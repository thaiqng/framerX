!function(e){var t={};function __webpack_require__(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,__webpack_require__),i.l=!0,i.exports}__webpack_require__.m=e,__webpack_require__.c=t,__webpack_require__.d=function(e,t,n){__webpack_require__.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},__webpack_require__.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},__webpack_require__.t=function(e,t){if(1&t&&(e=__webpack_require__(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(__webpack_require__.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)__webpack_require__.d(n,i,function(t){return e[t]}.bind(null,i));return n},__webpack_require__.n=function(e){var t=e&&e.__esModule?function getDefault(){return e.default}:function getModuleExports(){return e};return __webpack_require__.d(t,"a",t),t},__webpack_require__.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},__webpack_require__.p="",__webpack_require__(__webpack_require__.s=472)}([function(e,t){e.exports=require("react")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(474);t.LineJoin=i.LineJoin,t.LineCap=i.LineCap;var o=n(226);t.collectFiltersFromProps=o.collectFiltersFromProps;var r=n(306);t.getConfigFromURL=r.getConfigFromPreviewURL,t.getConfigFromPreviewURL=r.getConfigFromPreviewURL,t.getConfigFromVekterURL=r.getConfigFromVekterURL;var s=n(307);t.serverURL=s.serverURL;var a=n(308);t.memoize=a.memoize;var l=n(309);t.InternalID=l.InternalID;var c=n(180);t.LinearGradientElementProperties=c.LinearGradientElementProperties;var d=n(477);t.frameFromElement=d.frameFromElement,t.frameFromElements=d.frameFromElements,t.dispatchKeyDownEvent=d.dispatchKeyDownEvent,t.DOM=d.DOM;var u=n(478);t.FillProperties=u.FillProperties;var h=n(479);t.FilterProperties=h.FilterProperties,t.FilterNumberProperties=h.FilterNumberProperties;var p=n(480);t.BackgroundFilterProperties=p.BackgroundFilterProperties;var g=n(315);t.RadiusProperties=g.RadiusProperties;var m=n(316);t.BlendingProperties=m.BlendingProperties,t.BlendingMode=m.BlendingMode,t.collectBlendingFromProps=m.collectBlendingFromProps;var f=n(232);t.Background=f.Background,t.BackgroundProperties=f.BackgroundProperties;var y=n(104);t.ImageFit=y.ImageFit,t.BackgroundImage=y.BackgroundImage;var v=n(233);t.WithOpacity=v.WithOpacity,t.withOpacity=v.withOpacity,t.collectOpacityFromProps=v.collectOpacityFromProps;var b=n(317);t.DeprecatedVisualProperties=b.DeprecatedVisualProperties,t.collectVisualStyleFromProps=b.collectVisualStyleFromProps;var k=n(483);t.WithShape=k.WithShape,t.withShape=k.withShape;var S=n(484);t.BoxShadowProperties=S.BoxShadowProperties;var C=n(485);t.gradientForShape=C.gradientForShape;var x=n(486);t.debounce=x.debounce;var w=n(487);t.throttle=w.throttle;var T=n(105);t.setImageForFill=T.setImageForFill,t.imageUrlForFill=T.imageUrlForFill,t.imageUrlForAsset=T.imageUrlForAsset,t.QualityOptions=T.QualityOptions;var P=n(105);t._imageURL=P._imageURL,t._imageScalingMethod=P._imageScalingMethod;var E=n(318);t.imagePatternPropsForFill=E.imagePatternPropsForFill;var F=n(151);t.ComponentDefinition=F.ComponentDefinition,t.ComponentIdentifier=F.ComponentIdentifier,t.ComponentLoader=F.ComponentLoader,t.ComponentMap=F.ComponentMap,t.DesignComponentDefinition=F.DesignComponentDefinition,t.PackageIdentifier=F.PackageIdentifier,t.TokenDefinition=F.TokenDefinition,t.TokenMap=F.TokenMap,t.componentLoader=F.componentLoader,t.isDesignDefinition=F.isDesignDefinition,t.isOverride=F.isOverride,t.isAction=F.isAction,t.isReactDefinition=F.isReactDefinition;var M=n(319);t.localPackageFallbackIdentifier=M.localPackageFallbackIdentifier;var _=n(489);t.ControlDescription=_.ControlDescription,t.CompactControlsDescription=_.CompactControlsDescription,t.BooleanControlDescription=_.BooleanControlDescription,t.NumberControlDescription=_.NumberControlDescription,t.StringControlDescription=_.StringControlDescription,t.FusedNumberControlDescription=_.FusedNumberControlDescription,t.EnumControlDescription=_.EnumControlDescription,t.SegmentedEnumControlDescription=_.SegmentedEnumControlDescription,t.ColorControlDescription=_.ColorControlDescription,t.ImageControlDescription=_.ImageControlDescription,t.FileControlDescription=_.FileControlDescription,t.ComponentInstanceDescription=_.ComponentInstanceDescription,t.ArrayControlDescription=_.ArrayControlDescription,t.EventHandlerControlDescription=_.EventHandlerControlDescription,t.ControlType=_.ControlType,t.PropertyControls=_.PropertyControls;var O=n(490);t.WithFractionOfFreeSpace=O.WithFractionOfFreeSpace;var I=n(491);t.withStylable=I.withStylable;var D=n(492);t.isOfAnnotatedType=D.isOfAnnotatedType,t.annotateTypeOnStringify=D.annotateTypeOnStringify;var N=n(320);t.PathSegment=N.PathSegment;var R=n(494);t.PathSegments=R.PathSegments;var A=n(321);t.WithPath=A.WithPath,t.withPath=A.withPath,t.WithPaths=A.WithPaths,t.isStraightCurve=A.isStraightCurve,t.pathDefaults=A.pathDefaults,t.toSVGPath=A.toSVGPath;var L=n(304);t.BoxShadow=L.BoxShadow,t.Shadow=L.Shadow;var B=n(495);t.StrokeAlignment=B.StrokeAlignment;var j=n(124);t.Rect=j.Rect;var H=n(182);t.Size=H.Size;var z=n(496);t.Line=z.Line;var $=n(228);t.Point=$.Point;var V=n(150);t.Gradient=V.Gradient,t.LinearGradient=V.LinearGradient,t.LinearGradientBase=V.LinearGradientBase,t.RadialGradient=V.RadialGradient,t.RadialGradientBase=V.RadialGradientBase;var U=n(97);t.Frame=U.Frame,t.FrameWithMotion=U.FrameWithMotion,t.FrameProps=U.FrameProps,t.DeprecatedFrame=U.DeprecatedFrame,t.DeprecatedFrameProperties=U.DeprecatedFrameProperties,t.DeprecatedFrameWithEvents=U.DeprecatedFrameWithEvents,t.DeprecatedFrameWithEventsProps=U.DeprecatedFrameWithEventsProps,t.FrameLayoutProperties=U.FrameLayoutProperties,t.DeprecatedCoreFrameProps=U.DeprecatedCoreFrameProps,t.BaseFrameProps=U.BaseFrameProps,t.CSSTransformProperties=U.CSSTransformProperties,t.VisualProperties=U.VisualProperties;var G=n(71);t.Layer=G.Layer,t.LayerProps=G.LayerProps,t.IdentityProps=G.IdentityProps;var W=n(513);t.SVG=W.SVG,t.SVGProperties=W.SVGProperties;var K=n(514);t.Text=K.Text,t.TextProperties=K.TextProperties,t.TextAlignment=K.TextAlignment;var X=n(519);t.Vector=X.Vector,t.VectorProperties=X.VectorProperties;var Y=n(522);t.VectorGroup=Y.VectorGroup,t.VectorGroupProperties=Y.VectorGroupProperties;var q=n(345);t.ComponentContainer=q.ComponentContainer,t.ComponentContainerProperties=q.ComponentContainerProperties;var Z=n(347);t.TextBlock=Z.TextBlock,t.draftBlockRendererFunction=Z.draftBlockRendererFunction;var J=n(523);t.TransformValues=J.TransformValues;var Q=n(183);t.DefaultProps=Q.DefaultProps,t.ConstraintMask=Q.ConstraintMask,t.ConstraintValues=Q.ConstraintValues,t.ConstraintProperties=Q.ConstraintProperties,t.ConstraintPercentage=Q.ConstraintPercentage,t.DimensionType=Q.DimensionType,t.valueToDimensionType=Q.valueToDimensionType;var ee=n(53);t.ProvideParentSize=ee.ProvideParentSize,t.NewConstraintProperties=ee.NewConstraintProperties,t.calculateRect=ee.calculateRect,t.ParentSizeState=ee.ParentSizeState,t.constraintsEnabled=ee.constraintsEnabled;var te=n(59);t.Color=te.Color,t.ConvertColor=te.ConvertColor,t.ColorMixOptions=te.ColorMixOptions;var ne=n(123);t.ColorFormat=ne.ColorFormat,t.ColorRGBA=ne.ColorRGBA,t.ColorHSLA=ne.ColorHSLA,t.ColorHSL=ne.ColorHSL,t.ColorHSVA=ne.ColorHSVA,t.ColorMixModelType=ne.ColorMixModelType,t.IncomingColor=ne.IncomingColor;var ie=n(184);t.BorderStyle=ie.BorderStyle,t.BorderProperties=ie.BorderProperties;var oe=n(344);t.StyleHandler=oe.StyleHandler,t.draftStyleFunction=oe.draftStyleFunction,t.draftStyles=oe.draftStyles,t.getStyleForTypefaceOrSelector=oe.getStyleForTypefaceOrSelector;var re=n(238);t.isEqual=re.isEqual;var se=n(96);t.isFiniteNumber=se.isFiniteNumber,t.finiteNumber=se.finiteNumber;var ae=n(350);t.isShallowEqualArray=ae.isShallowEqualArray;var le=n(149);t.roundedNumber=le.roundedNumber,t.roundedNumberString=le.roundedNumberString,t.roundWithOffset=le.roundWithOffset;var ce=n(240);t.transformString=ce.transformString;var de=n(148);t.localShadowFrame=de.localShadowFrame,t.shadowForShape=de.shadowForShape;var ue=n(524);t.PresentationTree=ue.PresentationTree,t.renderPresentationTree=ue.renderPresentationTree,t.convertPresentationTree=ue.convertPresentationTree,t.addServerUrlToResourceProps=ue.addServerUrlToResourceProps;var he=n(21);t.RenderTarget=he.RenderTarget,t.executeInRenderEnvironment=he.executeInRenderEnvironment,t.setGlobalRenderEnvironment=he.setGlobalRenderEnvironment;var pe=n(185);t.NavigationInterface=pe.NavigationInterface,t.NavigationProps=pe.NavigationProps,t.NavigationConsumer=pe.NavigationConsumer;var ge=n(351);t.NavigationTransition=ge.NavigationTransition,t.NavigationTransitionPosition=ge.NavigationTransitionPosition,t.NavigationTransitionSide=ge.NavigationTransitionSide,t.NavigationTransitionAnimation=ge.NavigationTransitionAnimation,t.NavigationTransitionAppearsFrom=ge.NavigationTransitionAppearsFrom,t.NavigationTransitionBackdropColor=ge.NavigationTransitionBackdropColor,t.FadeTransitionOptions=ge.FadeTransitionOptions,t.PushTransitionOptions=ge.PushTransitionOptions,t.ModalTransitionOptions=ge.ModalTransitionOptions,t.OverlayTransitionOptions=ge.OverlayTransitionOptions,t.FlipTransitionOptions=ge.FlipTransitionOptions;var me=n(528);t.NavigateTo=me.NavigateTo,t.NavigationLink=me.NavigationLink,t.NavigationTarget=me.NavigationTarget,t.NavigationTransitionType=me.NavigationTransitionType,t.NavigationTransitionDirection=me.NavigationTransitionDirection;var fe=n(529);t.useNavigation=fe.useNavigation;var ye=n(530);t.WithChildInsertion=ye.WithChildInsertion,t.withChildInsertion=ye.withChildInsertion;var ve=n(531);t.ChildLayoutProvider=ve.ChildLayoutProvider,t.providesChildLayout=ve.providesChildLayout;var be=n(532);t.FreeSpaceProvider=be.FreeSpaceProvider,t.providesFreeSpace=be.providesFreeSpace,t.toFreeSpace=be.toFreeSpace;var ke=n(533);t.AutoSize=ke.AutoSize,t.hasAutoSize=ke.hasAutoSize,t.toAutoSize=ke.toAutoSize;var Se=n(534);t.WithCSSExport=Se.WithCSSExport,t.withCSSExport=Se.withCSSExport;var Ce=n(535);t.toPaddingSize=Ce.toPaddingSize;const xe=n(184);t.styles={collectBorder:xe.collectBorderStyleForProps};var we=n(536);t.createDesignComponent=we.createDesignComponent,t.CanvasStore=we.CanvasStore,t.PropertyTree=we.PropertyTree;var Te=n(305);t.CustomProperties=Te.CustomProperties,t.CustomPropertiesContext=Te.CustomPropertiesContext;var Pe=n(239);t.fontStore=Pe.fontStore;var Ee=n(343);t.parseVariant=Ee.parseVariant;var Fe=n(126);t.WebFontLocator=Fe.WebFontLocator,t.Typeface=Fe.Typeface,t.Font=Fe.Font,t.TypefaceSourceName=Fe.TypefaceSourceName,t.TypefaceSourceNames=Fe.TypefaceSourceNames,t.TypefaceLocator=Fe.TypefaceLocator,t.ReadonlyFont=Fe.ReadonlyFont,t.ReadonlyTypeface=Fe.ReadonlyTypeface},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(242),o=n(672),r=i.VekterEngine.shared();r.codeGenerator=new o.CodeGenerator(r),t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(23),o=n(300);t.framerChromeClassName="__framer-chrome";function svgURL(e){return function url(e,t){return`url(data:${e};charset=utf-8;base64,${btoa(t)})`}("image/svg+xml",e)}t.theme=new class CurrentTheme{constructor(){this.globalStyleRules=[],this.imageNameToVariableMap=new Map,this.activeTheme=o.lightTheme,this.layerPanelRowBackgroundImage="var()",this.name="current",this.tint="var()",this.tintDark="var()",this.componentTint="var()",this.toolbarBackground="var()",this.toolbarIconIndicator="var()",this.tabContentBackground="var()",this.tabContentBackgroundHover="var()",this.tabContentAccessoryBackground="var()",this.tabContentDivider="var()",this.toolSectionHeaderText="var()",this.toolText="var()",this.toolTextActive="var()",this.toolAccelerator="var()",this.scrollerThumbBackground="var()",this.canvasBackground="var()",this.rulerBackground="var()",this.rulerBorderColor="var()",this.rulerTextColor="var()",this.guideColor="var()",this.guideHighlightColor="var()",this.panelEmptyHeader="var()",this.panelEmptyText="var()",this.layerPanelRowOdd="var()",this.layerPanelRowEven="var()",this.layerPanelAccent="var()",this.layerPanelText="var()",this.layerPanelDimmedText="var()",this.layerPanelSelection="var()",this.layerPanelSelectionText="var()",this.layerPanelSelectionDimmedText="var()",this.layerPanelFieldPlaceholderText="var()",this.layerPanelMasterOrReplica="var()",this.layerPanelComponentLabel="var()",this.layerPanelComponentLabelSelected="var()",this.propertyPanelHeaderBackground="var()",this.propertyPanelBackground="var()",this.propertyPanelBackgroundDivider="var()",this.propertyPanelTitle="var()",this.propertyPanelLabel="var()",this.propertyPanelLabelInactive="var()",this.propertyPanelDivider="var()",this.propertyPanelInputBackground="var()",this.propertyPanelInputBorder="var()",this.propertyPanelInputBorderOverlay="var()",this.propertyPanelInputBorderInactive="var()",this.propertyPanelInputText="var()",this.propertyPanelInputTextInactive="var()",this.propertyPanelInputLabel="var()",this.propertyPanelInputLabelInactive="var()",this.propertyPanelButtonBorderPrimary="var()",this.propertyPanelButtonBackground="var()",this.propertyPanelButtonBackgroundInactive="var()",this.propertyPanelButtonBackgroundPrimary="var()",this.propertyPanelButtonBackgroundPressed="var()",this.propertyPanelButtonText="var()",this.propertyPanelButtonTextInactive="var()",this.propertyPanelButtonTextPrimary="var()",this.propertyPanelSegmentDivider="var()",this.propertyPanelHeaderBorder="var()",this.pinsFrameBorder="var()",this.colorSwatchBorder="var()",this.colorTokenSwatchBorder="var()",this.colorTokenRowBackgroundActive="var()",this.colorTokenLabel="var()",this.colorTokenPlaceholderPreviewBackground="var()",this.colorTokenPlaceholderPreviewBorder="var()",this.constraintsReferenceFrame="var()",this.codeExportPanelCSSText="var()",this.codeExportPanelCSSProp="var()",this.codeExportPanelCSSValueNumber="var()",this.codeExportPanelCSSValueString="var()",this.sectionHeaderText="var()",this.sectionHeaderPopUp="var()",this.searchPlaceholder="var()",this.searchPlaceholderFocused="var()",this.focusRing="var()",this.sliderKnobFill="var()",this.sliderKnobShadow="var()",this.sliderTrack="var()",this.sliderTrackHighlight="var()",this.sliderTrackInactive="var()",this.checkboxBackground="var()",this.checkboxBackgroundPressed="var()",this.checkboxBackgroundChecked="var()",this.checkboxBackgroundCheckedPressed="var()",this.checkboxBorder="var()",this.checkboxBorderChecked="var()",this.checkboxIndicator="var()",this.checkboxBorderInnerChecked="var()",this.popoverBackground="var()",this.popoverShadow="var()",this.popoverArrowBorder="var()",this.popoverArrowBorderFlipped="var()",this.layerCreatePreview="var()",this.frameTitle="var()",this.frameOutline="var()",this.framePreview="var()",this.framePreviewOutline="var()",this.selectionBox="var()",this.selectionBoxOutline="var()",this.selectionBoxBackground="var()",this.selectionBoxComponentBackground="var()",this.resizeBox="var()",this.resizeHandle="var()",this.resizeHandleOutline="var()",this.snapLine="var()",this.snapConstraint="var()",this.parentHighlight="var()",this.shapeContainerOutline="var()",this.segmentAnchor="var()",this.segmentAnchorOutline="var()",this.pathCurvePreview="var()",this.navigationConnectionLine="var()",this.textEditorOutline="var()",this.packageTitle="var()",this.packageTitleBackground="var()",this.packageTitleBorder="var()",this.packageTitleArrow="var()",this.packageIconBorder="var()",this.packageIconBackground="var()",this.packageTitleNewBadgeBackground="var()",this.packageTitleNewBadgeBorder="var()",this.packageTitleNewBadgeLabel="var()",this.componentItemBackground="var()",this.componentItemBorder="var()",this.componentItemLabel="var()",this.componentCategoryLabel="var()",this.componentsEmptyHeader="var()",this.componentsEmptyText="var()",this.componentsEmptyInactive="var()",this.componentsEmptyActive="var()",this.error="var()",this.errorText="var()",this.statusBarBackground="var()",this.statusBarBorder="var()",this.statusBarText="var()",this.statusBarActiveText="var()",this.statusBarUpdateItemActive="var()",this.statusBarErrorItemActive="var()",this.statusBarItemInactive="var()",this.webFrameBackground="var()",this.webFrameTitle="var()",this.webFrameMessage="var()",this.tooltipBackground="var()",this.tooltipCaretBackground="var()",this.tooltipColor="var()",this.feedbackSidebarBackground="var()",this.feedbackSidebarDivider="var()",this.feedbackTabBarBackground="var()",this.feedbackTabBarBorderBottom="var()",this.feedbackTabBarMenuSelected="var()",this.feedbackTabBarMenuDefault="var()",this.feedbackTabBarButtonBackground="var()",this.feedbackTabBarButtonBorder="var()",this.feedbackTabBarButtonText="var()",this.feedbackTabBarThreadTitle="var()",this.feedbackPrimaryText="var()",this.feedbackSecondaryText="var()",this.feedbackItemHover="var()",this.feedbackEllipsisColor="var()",this.feedbackFormBackground="var()",this.feedbackFormPlaceholder="var()",this.feedbackFormButton="var()",this.feedbackFormDivider="var()",this.feedbackFormBorder="var()",this.feedbackFormInputBackground="var()",Object.keys(this).forEach(e=>{"var()"===this[e]&&(this[e]=`var(--framerInternalUI-${e})`)})}updateActiveThemeStyleElement(e){this.styleElement=e,e&&(e.innerHTML=this.cssTextForActiveTheme())}addStyle(e,t){this.addGlobalStyle(`.__framer-chrome ${e.replace(",",", .__framer-chrome ")}`,t)}addGlobalStyle(e,t){let n=e+" {";for(const i in t){const e=i.replace(/([A-Z])/g,e=>`-${e[0].toLowerCase()}`);let o=t[i];"number"==typeof o&&(o="opacity"===e?`${o}`:`${o}px`),n+="\n"+e+": "+o+";\n"}n+="\n}\n",i(-1===this.globalStyleRules.indexOf(n),"theme.addStyle() must be called only once for any given rule"),this.globalStyleRules.push(n)}backgroundImage(e,t){const n=this.activeTheme;return`url(images/theme-${n?n.name:""}/${e}.${t||"svg"}?hash=635540a)`}setActiveTheme(e){if(this.activeTheme===e)return;this.activeTheme=e;const t=`images/theme-${e?e.name:""}/`;!function replaceImages(e){const n=e.getAttribute("style");if(n&&n.indexOf("images/theme-")>=0&&e.setAttribute("style",n.replace(/images\/theme-[\w]+\//g,t)),e.childNodes)for(const t of e.childNodes)t instanceof HTMLElement&&replaceImages(t)}(document.body)}cssTextForActiveTheme(){const e=this.activeTheme,t={layerPanelRowBackgroundImage:svgURL(`<svg xmlns='http://www.w3.org/2000/svg' width='1' height='56'><g><path d='M 0 0 L 1 0 L 1 28 L 0 28 Z' style='fill:${e.layerPanelRowOdd}'></path><path d='M 0 28 L 1 28 L 1 56 L 0 56 Z' style='fill:${e.layerPanelRowEven}'></path></g></svg>`),checkboxCheckedBackgroundImage:svgURL(`<svg width='8' height='8' viewBox='0 0 8 8' xmlns='http://www.w3.org/2000/svg'><title>icon-checkmark</title><path d='M1 3l2 2 4-4v2L3 7 1 5z' style='fill:${e.checkboxIndicator}' fill-rule='evenodd'/></svg>`),checkboxUncheckedBackgroundImage:svgURL(`<svg width='8' height='8' viewBox='0 0 8 8' xmlns='http://www.w3.org/2000/svg'><title>icon-checkmark</title><path d='M1 3h6v2H1z' style='fill:${e.checkboxIndicator}' fill-rule='evenodd'/></svg>`)};let n=":root {";Object.keys(this).forEach(i=>{const o=this[i],r=e[i]||t[i];if("string"==typeof o&&o.startsWith("var(")&&"string"==typeof r){const e=o.substring("var(".length,o.length-")".length);n+=`${e}: ${r};`}});for(const[i,o]of this.imageNameToVariableMap)n+=`${o}: url(images/theme-${e?e.name:""}/${i}.svg);`;return n+="}",n+=`\n        body {\n            background: ${e.canvasBackground};\n        }`,n+=`\n        .__framer-chrome .tabBar,\n        .__framer-chrome .tabContent {\n            position: relative;\n        }\n\n        .__framer-chrome .tabBar::after,\n        .__framer-chrome .tabContent::after {\n            content: "";\n            position: absolute;\n            width: 1px;\n            height: 100%;\n            background: ${e.tabContentDivider};\n            top: 0;\n            right: 0;\n            z-index: 1001;\n        }\n\n        .__framer-chrome .tabBar::after {\n            right: -1px;\n        }`,n+="\n        .scroller::-webkit-scrollbar {\n            display: none;\n        }",n+=`\n        * {\n            box-sizing: inherit;\n            -webkit-user-select: none;\n            user-select: none;\n        }\n        .__framer-chrome input:enabled,\n        .__framer-chrome textarea:enabled,\n        [contenteditable="true"],\n        [contenteditable="true"] * {\n            -webkit-user-select: text;\n            user-select: text;\n        }\n\n        .__framer-chrome input[type="submit"] {\n            -webkit-appearance: none;\n            border: none;\n            outline: none;\n        }\n\n        .__framer-chrome input:focus:not([type="checkbox"]),\n        .__framer-chrome select:focus {\n            border-color: ${e.focusRing};\n        }\n\n        .__framer-chrome .force-focus-border:focus {\n            border-color: ${e.focusRing} !important;\n        }\n\n        /* Enforce blue borders in the property panel */\n        .__framer-chrome .propertyPanel input:focus:not([type="checkbox"]),\n        .__framer-chrome .propertyPanel select:focus,\n        .__framer-chrome .popover-input:focus {\n            border-color: ${e.focusRing} !important;\n        }\n\n        .__framer-chrome input:focus,\n        .__framer-chrome select:focus,\n        .__framer-chrome .popover-input:focus {\n            outline: none;\n        }\n\n        /* To show the cursor is Safari when empty */\n        [contenteditable="true"] > * {\n            outline: 1px solid transparent;\n        }\n\n        /* Color the cursor using CSS var, see TextEditor.tsx */\n        [contenteditable="true"] {\n            color: var(--cursor-color);\n        }`,n+=`\n        .__framer-chrome .searchPlaceholder::-webkit-input-placeholder {\n            color: ${e.searchPlaceholder};\n        }\n\n        .__framer-chrome .searchPlaceholder:focus::-webkit-input-placeholder {\n            color: ${e.searchPlaceholderFocused};\n        }\n\n        .__framer-chrome .layerPanelPlaceholder::-webkit-input-placeholder {\n            color: ${e.layerPanelFieldPlaceholderText};\n            position: relative;\n            top: 1px; /* FIXME: this fixes the offset placeholder text vs field content, but should be resolved using the base styling */\n        }`,n+=`\n        .__framer-chrome .inputButton {\n            background-color: ${e.propertyPanelButtonBackground};\n        }\n\n        .__framer-chrome .inputButton:active:hover {\n            background-color: ${e.propertyPanelButtonBackgroundPressed};\n        }`,n+=`\n        .__framer-chrome input[type="range"] {\n            -webkit-appearance: none;\n            background-color: transparent;\n            height: 19px;\n            padding-top: 4px;\n        }\n\n        .__framer-chrome input[type="range"]::-webkit-slider-runnable-track {\n            background: linear-gradient(to right, ${e.sliderTrackHighlight} calc(var(--progress)), ${e.sliderTrack} calc(var(--progress)));\n            height: 2px;\n            border-radius: 2px;\n            will-change: transform;\n        }\n\n        .__framer-chrome input:disabled[type="range"]::-webkit-slider-runnable-track {\n            background: ${e.sliderTrackInactive};\n        }\n\n        .__framer-chrome input[type="range"]::-webkit-slider-thumb {\n            -webkit-appearance: none;\n            background-color: ${e.sliderKnobFill};\n            box-shadow: ${e.sliderKnobShadow};\n            opacity: 1;\n            margin-top: -3px;\n            width: 8px;\n            height: 8px;\n            border-radius: 4px;\n            will-change: transform;\n        }\n\n        .__framer-chrome input:disabled[type="range"]::-webkit-slider-thumb {\n            display: none;\n        }\n\n        .__framer-chrome input[type="range"]:focus {\n            outline: none;\n        }`,n+=`\n        .__framer-chrome input[type="checkbox"] {\n            position: relative;\n            display: inline-block;\n            width: 12px;\n            height: 12px;\n            border-radius: 2px;\n            border: 1px solid ${e.checkboxBorder};\n            background-color: ${e.checkboxBackground};\n            -webkit-appearance: none;\n            background-repeat: no-repeat;\n            background-position: center\n        }\n\n        .__framer-chrome input[type="checkbox"]:checked, input[type="checkbox"]:indeterminate {\n            border-color: ${e.checkboxBorderChecked};\n            background-color: ${e.checkboxBackgroundChecked};\n            background-image: ${t.checkboxCheckedBackgroundImage};\n        }\n\n        .__framer-chrome input[type="checkbox"]:indeterminate {\n            background-image: ${t.checkboxUncheckedBackgroundImage};\n        }\n\n        .__framer-chrome input[type="checkbox"]:active:hover {\n            background-color: ${e.checkboxBackgroundPressed}\n        }\n\n        .__framer-chrome input[type="checkbox"]:checked:active:hover,\n        .__framer-chrome input[type="checkbox"]:indeterminate:active:hover {\n            background-color: ${e.checkboxBackgroundCheckedPressed};\n        }\n\n        .__framer-chrome input[type="checkbox"]:disabled:indeterminate,\n        .__framer-chrome input[type="checkbox"]:disabled:indeterminate:active,\n        .__framer-chrome input[type="checkbox"]:disabled:indeterminate:hover {\n            background-color: ${e.checkboxBackground};\n        }\n        .__framer-chrome input[type="checkbox"]:disabled,\n        .__framer-chrome input[type="checkbox"]:disabled:active,\n        .__framer-chrome input[type="checkbox"]:disabled:hover {\n            background-color: ${e.checkboxBackground};\n            border-color: ${e.checkboxBorder};\n        }`,n+=`\n        .__framer-chrome input[type="radio"] {\n            position: relative;\n            display: inline-block;\n            width: 12px;\n            height: 12px;\n            margin-right: 5px;\n            border-radius: 12px;\n            border: 1px solid ${e.checkboxBorder};\n            background-color: ${e.checkboxBackground};\n            -webkit-appearance: none;\n        }\n\n        .__framer-chrome input[type="radio"]:checked {\n            background-color: ${e.checkboxBackgroundChecked};\n            border-color: ${e.checkboxBorderChecked};\n        }\n\n        .__framer-chrome input[type="radio"]:checked::after {\n            content: "";\n            position: absolute;\n            top: 2px;\n            left: 2px;\n            width: 4px;\n            height: 4px;\n            border-radius: 50%;\n            background-color: ${e.checkboxIndicator};\n            border: 1px solid ${e.checkboxBorderInnerChecked};\n        }`,n+=this.globalStyleRules.join("\n\n")}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(372);var o=n(372);t.CanvasNodeConstructor=o.CanvasNodeConstructor,t.default=i.default;var r=n(48);t.CanvasNode=r.default;var s=n(164);t.TreeNode=s.default,t.DrawableNode=s.DrawableNode,t.isDrawableNode=s.isDrawableNode,t.VectorNode=s.VectorNode,t.isVectorNode=s.isVectorNode,t.isTreeNode=s.isTreeNode;var a=n(36);t.ImmutableNode=a.ImmutableNode;var l=n(92);t.FrameNode=l.default,t.isFrameNode=l.isFrameNode;var c=n(136);t.ShapeContainerNode=c.default,t.isShapeContainerNode=c.isShapeContainerNode;var d=n(99);t.SVGNode=d.default;var u=n(87);t.TextNode=u.default,t.isTextNode=u.isTextNode;var h=n(22);t.CodeComponentNode=h.default,t.isCodeComponentNode=h.isCodeComponentNode;var p=n(110);t.NodeID=p.NodeID,t.stringFromNodeID=p.stringFromNodeID,t.NullID=p.NullID,t.MaybeNodeID=p.MaybeNodeID,t.nodeIDFromString=p.nodeIDFromString,t.InvalidID=p.InvalidID;var g=n(193);t.ShapeGroupNode=g.default,t.isShapeGroupNode=g.isShapeGroupNode;var m=n(130);t.PathNode=m.default;var f=n(257);t.StarShapeNode=f.default;var y=n(256);t.OvalShapeNode=y.default;var v=n(255);t.RectangleShapeNode=v.default;var b=n(258);t.PolygonShapeNode=b.default;var k=n(197);t.BooleanShapeNode=k.default,t.isBooleanShapeNode=k.isBooleanShapeNode;var S=n(384);t.ExportOptions=S.default;var C=n(199);t.classList=C.classList;var x=n(625);t.onlyIncludes=x.onlyIncludes,t.doesNotInclude=x.doesNotInclude,t.isEqual=x.isEqual;var w=n(31);t.Export=w.Export},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(23),o=n(58);t.Tools=o.Tools;const r=n(6),s=n(13),a="private-store-shown",l="true";var c,d;!function(e){e[e.Tools=0]="Tools",e[e.Layers=1]="Layers",e[e.Components=2]="Components",e[e.Marketplace=3]="Marketplace",e[e.Intercom=4]="Intercom",e[e.Account=5]="Account",e[e.Organization=6]="Organization",e[e.CodeEditor=7]="CodeEditor"}(c=t.LeftPanelContent||(t.LeftPanelContent={})),function(e){e.MacOS="MacOS Icons",e.iOS="iOS Icons",e.Watch="Watch Icons",e.Android="Android Icons"}(t.ShapeContainerCategories||(t.ShapeContainerCategories={})),function(e){e[e.None=0]="None",e[e.Left=1]="Left",e[e.Bottom=2]="Bottom"}(d=t.ToolTipArrow||(t.ToolTipArrow={}));const u={_update:0,tool:o.Tools.Highlight,tooltip:null,tooltipArrow:d.None,tooltipDelay:!1,tooltipOrigin:null,popupMenu:null,shapeModeActive:!1,handle:{x:0,y:0,fx:0,fy:0},straightLineAnchorIndex:0,typeFacePanelIsOpen:!1,leftPanelContent:c.Tools,codeFileCreationHeaderIsExpanded:!1,mouseCursor:"",shapeContainerOpenCategories:new Set([]),hasShownPrivateStore:window&&window.localStorage&&window.localStorage.getItem(a)===l,selectedGuide:null,highlightedGuide:null,ghostGuide:null,snapLinesX:null,snapLinesY:null};t.ToolStore=class ToolStore{constructor(e){this.addChanges=e,this.state=Object.assign({},u),this.componentDefinitionsFromScriptText=null,this.setTypeFacePanelOpen=e=>{this.state=Object.assign({},this.state,{typeFacePanelIsOpen:e}),this.addChanges(r.EngineChangeFlags.ToolStore)},this.editorCommand=null,this.currentEditorFile=null,this.storeMainPanelOpened=!1,this.editorViewStates=new Map}afterCommit(e,t,n){n.didTreeChange&&(this.state=Object.assign({},this.state,{_update:e}),this.addChanges(r.EngineChangeFlags.ToolStore))}setTool(e){const t=this.state;this.state.shapeModeActive&&!function shapeTool(e){switch(e){case o.Tools.CreateFrame:case o.Tools.CreateText:case o.Tools.CreateStackComponent:case o.Tools.CreateScrollComponent:case o.Tools.CreatePageComponent:case o.Tools.NavigationLink:case o.Tools.SlotConnect:case o.Tools.TextEdit:return!1;default:return!0}}(e)&&this.setShapeModeActive(!1),this.state=Object.assign({},this.state,{tool:e});let n=r.EngineChangeFlags.ToolStore;this.state.tool!==t.tool&&(n|=r.EngineChangeFlags.Tool),this.state.leftPanelContent!==t.leftPanelContent&&(n|=r.EngineChangeFlags.LeftPanelContent),this.addChanges(n)}setTooltip(e,t,n,i){(e||this.state.tooltipArrow===n)&&(this.state=Object.assign({},this.state,{tooltip:e,tooltipArrow:n,tooltipDelay:i,tooltipOrigin:t}),this.addChanges(r.EngineChangeFlags.ToolStore))}setPopupMenu(e){this.state=Object.assign({},this.state,{popupMenu:e}),this.addChanges(r.EngineChangeFlags.ToolStore)}setToolHandle(e){this.state=Object.assign({},this.state,{handle:e}),this.addChanges(r.EngineChangeFlags.ToolStore)}setLeftPanelContent(e){this.state=function setLeftPanelContent(e,t){return e.leftPanelContent===c.CodeEditor&&t!==c.CodeEditor&&(e=Object.assign({},e,{codeFileCreationHeaderIsExpanded:!1})),c.Organization===t&&(localStorage.setItem(a,l),e=Object.assign({},e,{hasShownPrivateStore:!0})),Object.assign({},e,{leftPanelContent:t})}(this.state,e),this.addChanges(r.EngineChangeFlags.ToolStore)}setCodeFileCreationHeaderIsExpanded(e){this.state=Object.assign({},this.state,{codeFileCreationHeaderIsExpanded:e}),this.addChanges(r.EngineChangeFlags.ToolStore)}setMouseCursor(e){this.state.mouseCursor!==e&&(this.state=Object.assign({},this.state,{mouseCursor:e}),this.addChanges(r.EngineChangeFlags.ToolStore))}setShapeModeActive(e){this.state=Object.assign({},this.state,{shapeModeActive:e}),s.layout.shapeModeActive=e,this.addChanges(r.EngineChangeFlags.ToolStore)}setShapeContainerOpenCategories(e){this.state=Object.assign({},this.state,{shapeContainerOpenCategories:e}),this.addChanges(r.EngineChangeFlags.ToolStore)}setStraightLineAnchorIndex(e){this.state=Object.assign({},this.state,{straightLineAnchorIndex:e})}setSelectedGuide(e=null){(e||this.state.selectedGuide)&&(this.state=Object.assign({},this.state,{selectedGuide:e}),!e&&this.state.ghostGuide&&(this.state=Object.assign({},this.state,{ghostGuide:null})),this.addChanges(r.EngineChangeFlags.ToolStore))}setHighlightedGuide(e=null){this.state=Object.assign({},this.state,{highlightedGuide:e}),this.addChanges(r.EngineChangeFlags.ToolStore)}setGhostGuide(e=null){this.state=Object.assign({},this.state,{ghostGuide:e}),this.addChanges(r.EngineChangeFlags.ToolStore)}setSnapLines(e=null,t=null){this.state=Object.assign({},this.state,{snapLinesX:e,snapLinesY:t}),this.addChanges(r.EngineChangeFlags.ToolStore)}isPathToolActive(){return this.state.tool===o.Tools.Path}isTextEditToolActive(){return this.state.tool===o.Tools.TextEdit}putEditorCommand(e){i(!this.editorCommand),this.editorCommand=e,this.addChanges(r.EngineChangeFlags.ToolStore)}takeEditorCommand(){const e=this.editorCommand;return this.editorCommand=null,e}setCurrentEditingFile(e){this.currentEditorFile!==e&&(this.currentEditorFile=e,this.addChanges(r.EngineChangeFlags.ToolStore))}setStoreMainPanelOpened(e){this.storeMainPanelOpened!==e&&(this.storeMainPanelOpened=e,this.addChanges(r.EngineChangeFlags.ToolStore))}addEditorViewState(e,t){t&&this.editorViewStates.set(e,t)}getEditorViewState(e){return this.editorViewStates.get(e)}isCodeEditorOpen(){return this.state.leftPanelContent===c.CodeEditor&&!!this.currentEditorFile}shouldShowArrows(){switch(this.state.tool){case o.Tools.Pan:case o.Tools.Zoom:case o.Tools.Highlight:return!0;default:return!1}}isStoreMainPanelOpen(){return this.state.leftPanelContent===c.Marketplace&&this.storeMainPanelOpened}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.TreeStore=1]="TreeStore",e[e.Tree=2]="Tree",e[e.Selection=4]="Selection",e[e.Highlight=8]="Highlight",e[e.Arrows=16]="Arrows",e[e.ShapeContainerNodes=32]="ShapeContainerNodes",e[e.ToolStore=64]="ToolStore",e[e.Tool=128]="Tool",e[e.LeftPanelContent=256]="LeftPanelContent",e[e.Layout=512]="Layout",e[e.CanvasStore=1024]="CanvasStore",e[e.CanvasZoom=2048]="CanvasZoom",e[e.CanvasLiveTransform=4096]="CanvasLiveTransform",e[e.ComponentHash=8192]="ComponentHash",e[e.DebugStore=16384]="DebugStore",e[e.MouseStore=32768]="MouseStore",e[e.ChromePointerEvents=65536]="ChromePointerEvents",e[e.PathSelection=131072]="PathSelection",e[e.ChromeStore=262144]="ChromeStore",e[e.ServerStore=524288]="ServerStore",e[e.UserDefaultsStore=1048576]="UserDefaultsStore",e[e.DocumentSettings=2097152]="DocumentSettings",e[e.SelectionOutline=4194304]="SelectionOutline",e[e.TextStyle=8388608]="TextStyle",e[e.ExportStatus=16777216]="ExportStatus",e[e.StatusBar=33554432]="StatusBar",e[e.GradientTool=67108864]="GradientTool",e[e.ComponentPanel=134217728]="ComponentPanel",e[e.ColorPicker=268435456]="ColorPicker",e[e.FeedbackStore=536870912]="FeedbackStore",e[e.Rulers=1073741824]="Rulers"}(t.EngineChangeFlags||(t.EngineChangeFlags={}));t.EngineChanges=class EngineChanges{constructor(){this.addChanges=e=>{this.changes|=e},this.changeListenerKeys=[],this.changeListenerCallbacks=[]}get flags(){return this.changes}has(e){return 0!=(this.changes&e)}observe(e,t){return this.changeListenerKeys.push(e),this.changeListenerCallbacks.push(t),t}observeWithComponent(e,t,n){this.changeListenerKeys.push(e);const i=()=>t.setState(n());return this.changeListenerCallbacks.push(i),i}removeObserver(e){const t=this.changeListenerCallbacks.indexOf(e);t<0||(this.changeListenerKeys.splice(t,1),this.changeListenerCallbacks.splice(t,1))}signalAllObservers(){if(!this.changes)return;const e=this.changes,t=this.changeListenerKeys,n=this.changeListenerCallbacks;for(let i=0,o=t.length;i<o;i++)0!=(t[i]&e)&&n[i]();this.changes=0}signalObserversFor(e){const t=this.changeListenerKeys,n=this.changeListenerCallbacks;for(let i=0,o=t.length;i<o;i++)0!=(t[i]&e)&&n[i]();this.changes&=~e}}},function(e,t){e.exports=require("immutable")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(806),r=n(3);t.default=class PanelRow extends i.PureComponent{render(){const{title:e,children:t,style:n,checkbox:c,onContextMenu:d,secondRow:u}=this.props;return i.createElement("div",{className:r.framerChromeClassName,onContextMenu:d},i.createElement("div",{style:getStyle(n)},void 0!==e&&i.createElement("label",{htmlFor:c?c.id:void 0,style:void 0!==c?l:a,title:e},e),c&&i.createElement(o.default,Object.assign({},c)),t),u&&u.length>0&&i.createElement("div",{style:s},u))}};const s={position:"relative",width:"100%",padding:"0 5px",display:"flex",alignItems:"flex-start",flexDirection:"row",justifyContent:"flex-end"};function getStyle(e){return e?Object.assign({},s,e):s}const a={width:70,position:"absolute",top:5,left:8,padding:"4px 1px",fontSize:"11px",lineHeight:"16px",color:r.theme.propertyPanelTitle,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},l=Object.assign({},a,{padding:"3px 0 3px 22px"})},function(e,t){e.exports=require("@framerjs/framer-events")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(2),o=n(23);t.default=function createContainer(e){var t;o(function isEngineChangeContainerClass(e){return!!e.engineChangeKeys}(e),`Missing engineChangeKeys property on ${e.name||"Unknown"}`);const n=e;return(t=class extends n{constructor(t){super(t),this.__engineChangeObserver=i.default.changes.observeWithComponent(e.engineChangeKeys,this,e.calculateState),this.state=e.calculateState()}componentWillUnmount(){i.default.changes.removeObserver(this.__engineChangeObserver)}}).displayName=e.displayName||e.name||"Container",t.getStores=e.getStores,t.calculateState=e.calculateState,t}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(7),o=n(1),r=n(4),s=n(16),a=n(88),l=n(73),c=n(25),d=n(27),u=n(89),h=n(252),p=n(90),g=n(19),m=n(32),f=n(43);function groupPathSegmentSelectors(e){const t={};return e.forEach(e=>{t[e.id]||(t[e.id]=[]),t[e.id].push(e.index)}),t}function oppositeHandle(e,t){return t.handle===m.SegmentHandle.In?{x:e.handleOutX,y:e.handleOutY}:{x:e.handleInX,y:e.handleInY}}function collectDescendantPaths(e,t,n,i){if(r.isShapeGroupNode(t)||r.isBooleanShapeNode(t)||r.isShapeContainerNode(t))for(const o of t.children)d.hasShape(o)&&collectDescendantPaths(e,o,n,i);else if(a.hasPath(t)){let o=convertPathToCanvas(e,t,t)[0].pathSegments;i&&(o=convertPathToNode(e,i,[{pathSegments:o,pathClosed:t.pathClosed}])[0]),n[t.id]={pathSegments:o,pathClosed:t.pathClosed}}}function collectDescendantBasicShapes(e,t,n,i=!1,s=!1,l){if(r.isShapeGroupNode(t)||r.isBooleanShapeNode(t)||r.isShapeContainerNode(t))for(const o of t.children){const t=c.hasRotation(o)&&o.rotation%90!=0||i;d.hasShape(o)&&collectDescendantBasicShapes(e,o,n,t,s,l)}else if(!a.hasPath(t)&&d.hasShape(t))if(i||s)n[t.id]=null;else{const i=o.Rect.cornerPoints(o.Rect.atOrigin(e.getRect(t)));n[t.id]=i.map(n=>{const i=e.convertPointToCanvas(t,n);return l?e.convertPointToNode(l,i,!0):i})}}function convertPathToCanvas(e,t,n,i=1,o=!1){let r=[];return(r=Array.isArray(n)?n:[n]).map(({pathSegments:n,pathClosed:r})=>{return{pathSegments:n.map(n=>convertSegmentToCanvas(e,t,n,i,void 0,o)),pathClosed:r}})}function convertSegmentToCanvas(e,t,n,i=1,r,s){const a=o.Point.multiply(e.convertPointToCanvas(t,n,!0,r),i);s&&(a.x=Math.floor(a.x)+.5,a.y=Math.floor(a.y)+.5);const l=o.Point.multiply(e.convertPointToCanvas(t,o.PathSegment.calculatedHandleIn(n),!0,r),i),c=o.Point.multiply(e.convertPointToCanvas(t,o.PathSegment.calculatedHandleOut(n),!0,r),i),d=o.Point.subtract(l,a),u=o.Point.subtract(c,a);return n.merge(Object.assign({},a,{handleOutX:u.x,handleOutY:u.y,handleInX:d.x,handleInY:d.y}))}function convertPathToParent(e,t,n){let i;if(n){const t=Object.assign({},e,n);i=(new WebKitCSSMatrix).translate(t.x,t.y).rotate(0,0,t.rotation),i=(new WebKitCSSMatrix).translate(.5*t.width,.5*t.height).multiply(i).translate(-.5*t.width,-.5*t.height)}else i=e.transformMatrix(null,e);return t.map(({pathSegments:t,pathClosed:o})=>({pathSegments:t.map(t=>convertSegmentToParent(e,t,n,i)),pathClosed:o}))}function convertSegmentToParent(e,t,n,i){let r;if(i)r=i;else if(n){const t=Object.assign({},e,n);r=(new WebKitCSSMatrix).translate(t.x,t.y).rotate(0,0,t.rotation),r=(new WebKitCSSMatrix).translate(.5*t.width,.5*t.height).multiply(r).translate(-.5*t.width,-.5*t.height)}else r=e.transformMatrix(null,e);const s=p.default.convertPoint(r,t),a=p.default.convertPoint(r,o.PathSegment.calculatedHandleIn(t)),l=p.default.convertPoint(r,o.PathSegment.calculatedHandleOut(t)),c=o.Point.subtract(a,s),d=o.Point.subtract(l,s);return t.merge(Object.assign({},s,{handleOutX:d.x,handleOutY:d.y,handleInX:c.x,handleInY:c.y}))}function convertPathToNode(e,t,n){return n.map(({pathSegments:n})=>n.map(n=>{const i=e.convertPointToNode(t,n),r=e.convertPointToNode(t,o.PathSegment.calculatedHandleIn(n)),s=e.convertPointToNode(t,o.PathSegment.calculatedHandleOut(n)),a=o.Point.subtract(r,i),l=o.Point.subtract(s,i);return n.merge(Object.assign({},i,{handleOutX:l.x,handleOutY:l.y,handleInX:a.x,handleInY:a.y}))}))}function convertPoint(e,t,n){const i=(new WebKitCSSMatrix).translate(t.x,t.y).rotate(0,0,n),o=(new WebKitCSSMatrix).translate(.5*t.width,.5*t.height).multiply(i).translate(-.5*t.width,-.5*t.height);return p.default.convertPoint(o,e)}function offsetAndFilterChildren(e,t,n,i){for(let o=0,r=e.length;o<r;o++){const r=e[o],s=t[r.id];s.x-=n,s.y-=i;let a=!1;for(const e in s)if(s[e]!==r[e]){a=!0;break}a||delete t[r.id]}}function collectSubtreeShapeTransformUpdates(e,t,n,i){let o;const d=n[t.id];if(d)i[t.id]=Object.assign({x:t.x,y:t.y},d),o=t.calculatedPaths();else if(r.isShapeGroupNode(t)||r.isBooleanShapeNode(t)){const d=s.getChildren(t).map(t=>(function collectSubtreePathSegmentUpdates(e,t,n,i){let o;const d=n[t.id];if(r.isShapeGroupNode(t)||r.isBooleanShapeNode(t)){const a=s.getChildren(t).map(t=>collectSubtreePathSegmentUpdates(e,t,n,i));let d;d=r.isBooleanShapeNode(t)?t.pathBoolean:l.PathBooleanType.Join,o=h.CompoundShape.executePathBoolean(a,d);const[u,p]=updatedRectForBoundingBox(t,c.hasRotation(t)?t.rotation:0,o);i[t.id]=u;const g=p.x,m=p.y;offsetAndFilterChildren(t.children,i,g,m)}else if(d&&a.hasPath(t)){const e=t.updateForPath(d);i[t.id]=e,o=[Object.assign({pathSegments:t.pathSegments,pathClosed:t.pathClosed},d)]}else{if(d&&(t instanceof r.RectangleShapeNode||t instanceof r.OvalShapeNode||t instanceof r.StarShapeNode||t instanceof r.PolygonShapeNode)){i[t.id]=d;const e=u.BasicShape.calculatedPath(t,d)[0];return[g.default.offset(e,d)]}i[t.id]={x:t.x,y:t.y},o=t.calculatedPaths()}return convertPathToParent(t,o)})(e,t,n,i));let p;p=r.isBooleanShapeNode(t)?t.pathBoolean:l.PathBooleanType.Join,o=h.CompoundShape.executePathBoolean(d,p);const[m,f]=updatedRectForBoundingBox(t,c.hasRotation(t)?t.rotation:0,o);i[t.id]=m;const y=f.x,v=f.y;offsetAndFilterChildren(t.children,i,y,v)}else i[t.id]={x:t.x,y:t.y},o=t.calculatedPaths();return convertPathToParent(t,o,d)}function updatedRectForBoundingBox(e,t,n){const i=g.default.boundingBox(n),r=i.x,s=i.y,a={x:e.x+r,y:e.y+s,width:i.width,height:i.height},l=convertPoint({x:0,y:0},e,t),c=convertPoint({x:-r,y:-s},a,t),d=o.Point.subtract(l,c);return a.x+=d.x,a.y+=d.y,[a,{x:r,y:s}]}function curveAngle(e,t,n){const i=o.isStraightCurve(e,t);if(0===n){if(i)return o.Point.subtract(t,e);if(0!==e.handleOutX||0!==e.handleOutY){const t=o.PathSegment.calculatedHandleOut(e);return o.Point.subtract(t,e)}const n=o.PathSegment.calculatedHandleIn(t);return o.Point.subtract(n,e)}{if(i)return o.Point.subtract(e,t);if(0!==t.handleInX||0!==t.handleInY){const e=o.PathSegment.calculatedHandleIn(t);return o.Point.subtract(e,t)}const n=o.PathSegment.calculatedHandleOut(e);return o.Point.subtract(n,t)}}function copyShapeStyle(e){return{strokeEnabled:e.strokeEnabled,strokeAlignment:e.strokeAlignment,strokeWidth:e.strokeWidth,strokeColor:e.strokeColor,lineJoin:e.lineJoin,lineCap:e.lineCap,strokeMiterLimit:e.strokeMiterLimit,strokeDashArray:e.strokeDashArray,strokeDashOffset:e.strokeDashOffset,fillEnabled:e.fillEnabled,fillType:e.fillType,fillColor:e.fillColor,fillLinearGradient:e.fillLinearGradient,fillRadialGradient:e.fillRadialGradient,fillImage:e.fillImage,fillImageResize:e.fillImageResize,fillImagePixelWidth:e.fillImagePixelWidth,fillImagePixelHeight:e.fillImagePixelHeight,boxShadows:e.boxShadows}}t.groupPathSegmentSelectors=groupPathSegmentSelectors,t.roundedPoint=function roundedPoint(e,t){const n=1/t;return{x:Math.round(e.x*n)/n,y:Math.round(e.y*n)/n}},t.segmentHandlePoint=function segmentHandlePoint(e,t){const n=e.getNode(t.id);if(!n||!n.pathSegments)return null;const i=n.pathSegments.get(t.index),r=t.handle===m.SegmentHandle.In?o.PathSegment.calculatedHandleIn(i):o.PathSegment.calculatedHandleOut(i);return e.convertPointToCanvas(n,r)},t.oppositeHandle=oppositeHandle,t.handleUpdate=function handleUpdate(e,t,n,i,r){const s=e.getNode(t.id),a=s.pathSegments.get(t.index);return n=e.convertPointToNode(s,n),n=o.Point.subtract(n,a),s.pathSegments.update(t.index,e=>{let s=oppositeHandle(e,t),a="straight"===e.handleMirroring,l=e.handleMirroring;i&&(s=oppositeHandle(i,t),a="straight"===i.handleMirroring,l=i.handleMirroring),a&&(l="symmetric"),i&&r&&(l="disconnected"===l||"asymmetric"===l?"symmetric":"disconnected"),"symmetric"===l&&(s=o.Point.reverse(n));const c=t.handle===m.SegmentHandle.In,d=c?n.x:s.x,u=c?n.y:s.y,h=c?s.x:n.x,p=c?s.y:n.y;return new o.PathSegment(e.merge({handleOutX:h,handleOutY:p,handleInX:d,handleInY:u,handleMirroring:l}))})},t.collectDescendantShapesAndFlattenRotations=function collectDescendantShapesAndFlattenRotations(e,t,n=!1,o){const s=e.tree;let a=i.Map(),l=i.Map();if(!d.hasShape(t)&&!r.isShapeContainerNode(t))return{descendantPaths:a,descendantBasicShapes:l};const c={};collectDescendantPaths(s,t,c);const u=Object.keys(c);for(let i=0,r=u.length;i<r;i++){const e=u[i],t=c[e];a=a.set(e,t)}const h={};collectDescendantBasicShapes(s,t,h,n);const p=Object.keys(h);for(let i=0,r=p.length;i<r;i++){const e=p[i],t=h[e];l=l.set(e,t)}return l.forEach((t,n)=>{if(null!==t)return;const i=s.getNode(n);if(!f.ContextAction.flattenEnabled([i]))return;const[r,l]=f.ContextAction.flattenShape(e,i,!1,!0),c=l[0];a=a.set(r,c),o&&-1!==o.indexOf(n)&&e.toggleSelection([r])}),{descendantPaths:a,descendantBasicShapes:l}},t.collectShapeContainerDescendantShapesAndFlattenRotations=function collectShapeContainerDescendantShapesAndFlattenRotations(e,t){const n=e.tree;let o=i.Map(),s=i.Map();if(!r.isShapeContainerNode(t))return{shapeContainerDescendantPaths:o,shapeContainerDescendantBasicShapes:s};const a={};collectDescendantPaths(n,t,a,t);const l=Object.keys(a);for(let i=0,r=l.length;i<r;i++){const e=l[i],t=a[e];o=o.set(e,t)}const c={};collectDescendantBasicShapes(n,t,c,!1,!1,t);const d=Object.keys(c);for(let i=0,r=d.length;i<r;i++){const e=d[i],t=c[e];s=s.set(e,t)}return s.forEach((i,r)=>{if(null!==i)return;const s=n.getNode(r);if(!f.ContextAction.flattenEnabled([s]))return;const[a,l]=f.ContextAction.flattenShape(e,s,!1,!0),c=l[0],d=convertPathToNode(n,t,[c])[0];o=o.set(a,{pathSegments:d,pathClosed:!0})}),{shapeContainerDescendantPaths:o,shapeContainerDescendantBasicShapes:s}},t.collectDescendantPaths=collectDescendantPaths,t.collectDescendantBasicShapes=collectDescendantBasicShapes,t.convertPathToCanvasWithNewFrame=function convertPathToCanvasWithNewFrame(e,t,n,i,o){return{pathSegments:n.map(n=>convertSegmentToCanvas(e,t,n,1,o)),pathClosed:i}},t.convertPathToCanvas=convertPathToCanvas,t.convertSegmentToCanvas=convertSegmentToCanvas,t.convertPathToParent=convertPathToParent,t.convertSegmentToParent=convertSegmentToParent,t.convertPointToParent=function convertPointToParent(e,t,n){return p.default.convertPoint(e.transformMatrix(null,n||e),t)},t.reverseSegment=function reverseSegment(e){return e.merge({handleOutX:e.handleInX,handleOutY:e.handleInY,handleInX:e.handleOutX,handleInY:e.handleOutY})},t.convertPathToNode=convertPathToNode,t.convertPathFromNodeToDescendant=function convertPathFromNodeToDescendant(e,t,n,i){return i.map(({pathSegments:i})=>i.map(i=>{const r={x:i.x,y:i.y},s=e.convertPointFromNodeToDescendant(t,n,r),a=e.convertPointFromNodeToDescendant(t,n,o.PathSegment.calculatedHandleIn(i)),l=e.convertPointFromNodeToDescendant(t,n,o.PathSegment.calculatedHandleOut(i)),c=o.Point.subtract(a,s),d=o.Point.subtract(l,s);return i.merge(Object.assign({},s,{handleOutX:d.x,handleOutY:d.y,handleInX:c.x,handleInY:c.y}))}))},t.convertPath=function convertPath(e,t){return t.map(({pathSegments:t})=>t.map(t=>{const n=p.default.convertPoint(e,t),i=p.default.convertPoint(e,o.PathSegment.calculatedHandleIn(t)),r=p.default.convertPoint(e,o.PathSegment.calculatedHandleOut(t)),s=o.Point.subtract(i,n),a=o.Point.subtract(r,n);return t.merge(Object.assign({},n,{handleOutX:a.x,handleOutY:a.y,handleInX:s.x,handleInY:s.y}))}))},t.convertPoint=convertPoint,t.validBoundingBoxUpdatesForFrameNode=function validBoundingBoxUpdatesForFrameNode(e,t){const n={};return collectSubtreeShapeTransformUpdates(e,t,{},n),n},t.collectSubtreeShapeTransformUpdates=collectSubtreeShapeTransformUpdates,t.updatedRectForBoundingBox=updatedRectForBoundingBox,t.cloneNodeAndUpdatePath=function cloneNodeAndUpdatePath(e,t,n,i,o){const s=e.getParent(n.id),a=n.updateForPath(i);t.createPath(s?s.id:r.NullID,Object.assign({},a,{id:o,rotation:n.rotation},copyShapeStyle(n)))},t.generateSegmentSelection=function generateSegmentSelection(e,t,n){if(n===m.PathSelectionType.Segments)return t;const o=[],r=groupPathSegmentSelectors(t),s=Object.keys(r);for(let a=0,l=s.length;a<l;a++){const t=s[a],n=[],l=e.getNode(t),c=r[t],d=l.pathSegments.count();for(let e=0,i=c.length;e<i;e++){const t=c[e];n.push(t);const i=t+1;i===d?n.push(0):n.push(i)}const u=i.List(n).toArray();for(let e=0,i=u.length;e<i;e++){const t=u[e];o.push({id:l.id,index:t})}}return o},t.partOfSelection=function partOfSelection(e,t,n){for(const i of e)if(i.id===t&&i.index===n)return!0;return!1},t.canJoinPaths=function canJoinPaths(e,t,n,i){return e.id!==n.id&&g.default.isEndSegment(e.pathSegments,e.pathClosed,t.index)&&g.default.isEndSegment(n.pathSegments,n.pathClosed,i.index)},t.joinPaths=function joinPaths(e,t,n,i,o,r){let s=convertPathToNode(e,n,convertPathToCanvas(e,o,o))[0];const a=!g.default.isLastSegment(n.pathSegments,n.pathClosed,i.index),l=g.default.isLastSegment(o.pathSegments,o.pathClosed,r.index);let c;(!a&&l||a&&!l)&&(s=g.default.reverse(s)),c=a?n.pathSegments.unshift(...s.toArray()):n.pathSegments.push(...s.toArray()),t.deleteNode(o.id),function updateNodeWithPathAndBoundingBox(e,t,n){const i=t.updateForPath(n),o=t.id;e.updateNode(o,i)}(t,n,{pathSegments:c})},t.curveAngle=curveAngle,t.curveDerivative=function curveDerivative(e,t){const n=e.getNode(t.id);if(!n)return null;const i=n.pathSegments.get(t.segmentIndex),r=n.pathSegments.get(t.segmentIndex+1);if(!i||!r)return null;const s=convertSegmentToCanvas(e,n,i),a=convertSegmentToCanvas(e,n,r),l=t.projectedTime<.5?o.PathSegment.point(s):o.PathSegment.point(a),c=curveAngle(s,a,0);return o.Line(l,o.Point.add(l,c))},t.closestCurveDistance=function closestCurveDistance(e,t){const n=g.default.toBezierJS(e.calculatedPaths());let i=1/0;for(let o=0,r=n.length;o<r;o++){const e=n[o].project(t).d;e<i&&(i=e)}return i},t.closestCurve=function closestCurve(e,t,n,i){const r=5/i,s=t.cache.canvasRect;if(s){if(s.x-n.x>r)return null;if(s.y-n.y>r)return null;if(n.x-(s.x+s.width)>r)return null;if(n.y-(s.y+s.height)>r)return null}const a=g.default.toBezierJS(t,t),l=e.convertPointToNode(t,n);let c=-1,d=1/0,u=0;for(let o=0,g=a.length;o<g;o++){const e=a[o].project(l),t=e.d,n=e.t;t>=d||0===n||1===n||(d=t,c=o,u=n)}if(-1===c)return null;const h=a[c],p=h.get(u),m=h.get(.5),f=o.Point.distance(l,m)<r;return{id:t.id,segmentIndex:c,distance:d,projectedPoint:p,projectedTime:u,midPoint:m,midPointInRange:f}},t.copyShapeStyle=copyShapeStyle},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HIDDEN_MASTER="hidden master",t.templateDefaults={isMaster:!1,isExternalMaster:null,replicaInfo:null};const i="isMaster";function hasTemplate(e){return i in e}function isReplica(e){return hasTemplate(e)&&!!e.replicaInfo}t.hasTemplate=hasTemplate,t.isMaster=function isMaster(e){return hasTemplate(e)&&e.isMaster},t.isHiddenMaster=function isHiddenMaster(e){return e.isExternalMaster},t.isExternalMaster=function isExternalMaster(e){const n=e.isExternalMaster;return n&&n!==t.HIDDEN_MASTER},t.isInternalHiddenMaster=function isInternalHiddenMaster(e){return e.isExternalMaster===t.HIDDEN_MASTER},t.isReplica=isReplica,t.isReplicaChild=function isReplicaChild(e){return!!e.originalid&&!isReplica(e)},t.isReplicaOrReplicaChild=function isReplicaOrReplicaChild(e){const t=isReplica(e),n=hasTemplate(e)&&null!==e.originalid&&!t;return t||n}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(14),o=n(15),r=n(28);var s;!function(e){e[e.Top=0]="Top",e[e.Bottom=1]="Bottom",e[e.Overlay=2]="Overlay"}(s=t.TutorialPlacement||(t.TutorialPlacement={}));t.layout=new class CurrentLayout{constructor(){this.chromeMarginTop="var(--framerInternalUI-chromeMarginTop)",this.chromeMarginRight="var(--framerInternalUI-chromeMarginRight)",this.chromeMarginLeft="var(--framerInternalUI-chromeMarginLeft)",this.chromeMarginBottom="var(--framerInternalUI-chromeMarginBottom)",this.canvasMarginTop="var(--framerInternalUI-canvasMarginTop)",this.tabContentWidth="var(--framerInternalUI-tabContentWidth)",this.toolbarWidth=45,this.layerPanelPreviewHeight=80,this.canvasRight=220,this.propertyPanelWidth=221,this.statusBarHeight=0,this.shapeBarHeight=37,this.rulerWidth=20,this.rulerTickLength=5,this.rulerMaskWidth=40,this._chromeIsVisible=!0,this.minWidth=this.defaultTabContentWidth,this._targetTabContentWidth=window.UserDefaultsTabContentWidth||this.defaultTabContentWidth,this._constrainedTabContentWidth=0,this._tutorialPlacement=s.Top,this._tutorialHeight=0,this._shapeModeActive=!1,this.handleWindowResize=()=>{this.setTabContentWidth(this._targetTabContentWidth)},this.canvasRectStyle={position:"absolute",top:this.canvasMarginTop,left:this.chromeMarginLeft,right:this.chromeMarginRight,bottom:this.chromeMarginBottom}}get chromeIsVisible(){return this._chromeIsVisible}set chromeIsVisible(e){e!==this._chromeIsVisible&&(this._chromeIsVisible=e,this.updateLayoutStyleElement(this.styleElement))}get defaultTabContentWidth(){return 220}get maxWidth(){return Math.min(2*this.defaultTabContentWidth,Math.floor(.27*document.body.clientWidth))}constrainedTabContentWidth(e){return Math.min(Math.max(this.minWidth,e),this.maxWidth)}get currentTabContentWidth(){return this.constrainedTabContentWidth(this._targetTabContentWidth)}get tabOverlapOnCanvas(){return this.chromeIsVisible?this.constrainedTabContentWidth(this._targetTabContentWidth):0}setTabContentWidth(e){this._targetTabContentWidth=e;const t=this.constrainedTabContentWidth(e);t!==this._constrainedTabContentWidth&&(this._constrainedTabContentWidth=t,this.updateLayoutStyleElement(this.styleElement))}get currentChromeMarginTop(){return this._tutorialPlacement===s.Top?this.tutorialHeight:0}get currentChromeMarginRight(){return this.chromeIsVisible?this.propertyPanelWidth:0}get currentChromeMarginLeft(){return this.chromeIsVisible?this.toolbarWidth+this.tabOverlapOnCanvas:0}get currentChromeMarginBottom(){return this._tutorialPlacement===s.Bottom?this.tutorialHeight:this.statusBarHeight}get currentCanvasMarginTop(){const e=this.chromeIsVisible&&this._shapeModeActive&&!r.experiments.isOn("bottomToolbar")?this.shapeBarHeight:0;return this.currentChromeMarginTop+e}get showsStatusBar(){return this._tutorialPlacement!==s.Bottom}get tutorialHeight(){return this._tutorialHeight}get tutorialContainerStyle(){return{position:"fixed",top:"var(--framerInternalUI-tutorialTop)",bottom:"var(--framerInternalUI-tutorialBottom)",left:0,right:0,zIndex:1e5,overflow:"hidden"}}setTutorialLayout(e,t){this._tutorialPlacement=e,this._tutorialHeight=t,this.updateLayoutStyleElement(this.styleElement)}saveToUserDefaults(){o.getIpcRenderer().send(i.TabContentWidthChanged,{value:this._constrainedTabContentWidth})}updateLayoutStyleElement(e){this.styleElement=e,e&&(e.innerHTML=this.cssText())}get shapeModeActive(){return this._shapeModeActive}set shapeModeActive(e){this._shapeModeActive=e,this.updateLayoutStyleElement(this.styleElement)}cssText(){const e=this._tutorialPlacement;let t="0",n="100%";return e===s.Bottom?(n=this.showsStatusBar?`${this.statusBarHeight}px`:"0px",t=`calc(100% - ${this.tutorialHeight}px - ${n})`):e===s.Overlay?(t="0",n="0"):(t="0",n=`calc(100% - ${this.tutorialHeight}px)`),`:root { --framerInternalUI-tabContentWidth: ${Math.max(1,this.tabOverlapOnCanvas)}px; --framerInternalUI-chromeMarginTop: ${this.currentChromeMarginTop}px; --framerInternalUI-chromeMarginRight: ${this.currentChromeMarginRight}px;  --framerInternalUI-chromeMarginLeft: ${this.currentChromeMarginLeft}px;  --framerInternalUI-chromeMarginBottom: ${this.currentChromeMarginBottom}px; --framerInternalUI-tutorialTop: ${t}; --framerInternalUI-tutorialBottom: ${n};\n        --framerInternalUI-canvasMarginTop: ${this.currentCanvasMarginTop}px;}`}},window.addEventListener("resize",t.layout.handleWindowResize)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DocumentReady="DocumentReady",t.DocumentSave="DocumentSave",t.DocumentSaveAs="DocumentSaveAs",t.DocumentSaveDialogStart="DocumentSaveDialogStart",t.DocumentSaveDialogEnd="DocumentSaveDialogEnd",t.DocumentLoaded="DocumentLoaded",t.DocumentLoadJSON="DocumentLoadJSON",t.DocumentInsertImage="DocumentInsertImage",t.DocumentInsertSVG="DocumentInsertSVG",t.DocumentReceivedImage="DocumentReceivedImage",t.DocumentSetImageBaseURL="DocumentSetImageBaseURLForExportTesting",t.DocumentSetProjectURL="DocumentSetProjectURL",t.DocumentKeepMouseCursorVisible="DocumentKeepMouseCursorVisible",t.ChooseImageDialog="ChooseImageDialog",t.ChooseFileDialog="ChooseFileDialog",t.ChooseImageDialogDrop="ChooseImageDialogDrop",t.ChooseMetadataImageDialog="ChooseMetadataImageDialog",t.ShowSaveDialog="ShowSaveDialog",t.ShowPathInFileViewer="ShowPathInFileViewer",t.OpenRelativePathExternally="OpenRelativePathExternally",t.CreateFileAtRelativePath="CreateFileAtRelativePath",t.CopyFileContentsAtRelativePath="CopyFileContentsAtRelativePath",t.RevealInFinder="RevealInFinder",t.DocumentCopyStyleToPasteboard="DocumentCopyStyleToPasteboard",t.DocumentPasteStyleFromPasteboard="DocumentPasteStyleFromPasteboard",t.DocumentCopyCSSToPasteboard="DocumentCopyCSSToPasteboard",t.DocumentCopySVGToPasteboard="DocumentCopySVGToPasteboard",t.DocumentDirty="DocumentDirty",t.VekterUserDefaultsChange="VekterUserDefaultsChange",t.FramesHintShownChanged="FramesHintShownChanged",t.TabContentWidthChanged="TabContentWidthChanged",t.DocumentCopy="DocumentCopy",t.DocumentPaste="DocumentPaste",t.ExportAction="ExportAction",t.ExportProgress="ExportProgress",t.ExportHTML="ExportHTML",t.ExportToPasteboard="ExportToPasteboard",t.GeneratePreview="GeneratePreview",t.ExportDragPreviewStart="ExportDragPreviewStart",t.Beep="Beep",t.PreviewLoaded="PreviewLoaded",t.UpdatePreview="UpdatePreview",t.UpdatePreviewSettings="UpdatePreviewSettings",t.TogglePreviewConsole="TogglePreviewConsole",t.OpenPreview="OpenPreview",t.OpenPreviewInspector="OpenPreviewInspector",t.PreviewErrors="PreviewErrors",t.SetPreviewSelectionLock="SetPreviewSelectionLock",t.PackageAdd="PackageAdd",t.PackageUpdateInfo="PackageUpdateInfo",t.ShowStoreView="ShowStoreView",t.ServerStoreData="ServerStoreData",t.ApplicationOpenURL="ApplicationOpenURL",t.ApplicationOpenMetadataFolder="ApplicationOpenMetadataFolder",t.ApplicationOpenREADME="ApplicationOpenREADME",t.MetricsContext="MetricsContext",t.OrganizationInfo="OrganizationInfo"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(323),o=n(157);const r=new class IpcRenderer extends i.EventEmitter{send(e,...t){window._bridge?window._bridge(e,...t):o.isDebugBuild&&console.warn("IPC message could not be sent",e,t)}};function onBridge(e,...t){if(!t)return;const n=t[0],i=t.slice(1);r.emit(n,...i)}function onBridgeRaw(e,...t){if(!t)return;const n=t[0],i=t.slice(1),o=null!==i?JSON.parse("["+i+"]"):i;r.emit(n,...o)}"undefined"!=typeof window&&(window._ipc=r),t.getIpcRenderer=()=>r,t.isElectron=function isElectron(){return window._isElectron},function main(){if(window._bridge)return window._onBridge=onBridge,void(window._onBridgeRaw=onBridgeRaw)}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(85),o=n(164),r=n(22),s=n(84),a=n(12),l=n(56),c=n(4),d=n(1),u=n(99);t.basicChildrenDefaults={},t.instructionalChildrenDefaults={};const h="children";function hasChildren(e){return h in e&&void 0!==e.children}function findComponentIn(e,t,n){if(!n)return!1;if(n===t)return!0;if(r.isCodeComponentNode(n)){const i=Object.keys(n.codeComponentProps);for(const o of i){const i=n.codeComponentProps[o];if(Array.isArray(i))for(const n of i){if(n.type!==d.ControlType.ComponentInstance)continue;const i=n.value;if(i&&findComponentIn(e,t,e.get(i)))return!0}}}const i=n.children;if(!i)return!1;for(let o=0,r=i.length;o<r;o++)if(findComponentIn(e,t,i[o]))return!0;return!1}t.hasChildren=hasChildren,t.getChildren=function getChildren(e){return hasChildren(e)?e.children:[]},t.acceptsChild=function acceptsChild(e,t,n){if(t===n)return!1;if(t.originalid)return!1;if(!o.isDrawableNode(t)||!hasChildren(t))return!1;if(n instanceof i.RootNode)return!1;if(u.isSVGNode(t))return!1;if(c.isShapeContainerNode(t)&&!o.isVectorNode(n))return!1;if(o.isVectorNode(n)&&!c.isShapeContainerNode(t)&&!o.isVectorNode(t))return!1;if(r.isCodeComponentNode(t)){if(o.isVectorNode(n))return!1;if(!s.codeComponentWithChildInsertion(t))return!1}let d=!1,h=!1,p=!1;return n.walk(n=>{d||(r.isCodeComponentNode(n)&&(d=findComponentIn(e,t,n)),h||(h=a.isReplica(n)),p||(p=a.isMaster(n)))}),!(d||h&&l.TemplateHelper.isInMasterOfReplica(e,t,n))},t.findComponentIn=findComponentIn},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o={position:"relative",width:"100%",paddingTop:5,paddingBottom:5,borderTop:`1px solid ${n(3).theme.propertyPanelHeaderBorder}`},r=Object.assign({},o,{paddingTop:0}),s=Object.assign({},o,{paddingBottom:0}),a=Object.assign({},r,{paddingBottom:0}),l=(e,t,n)=>{let i;return i=t&&n?a:t?s:n?r:o,void 0!==e&&(i=Object.assign({},i,e)),i};t.default=function Panel({children:e,nodes:t,autohide:n,hidden:o,empty:r,withHeader:s,style:a}){return o||0===t.length&&!1!==n?i.createElement("noscript",null):i.createElement("div",{style:l(a,r,s)},e)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.safeWindow="undefined"==typeof window?{addEventListener:()=>{},removeEventListener:()=>{},dispatchEvent:()=>!1,onpointerdown:!1,onpointermove:!1,onpointerup:!1,ontouchstart:!1,ontouchmove:!1,ontouchend:!1,onmousedown:!1,onmousemove:!1,onmouseup:!1,devicePixelRatio:1,scrollX:0,scrollY:0,location:{href:""},setTimeout:()=>0,clearTimeout:()=>{},setInterval:()=>0,clearInterval:()=>{},webkitConvertPointFromPageToNode:(e,t)=>t}:window},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(7),o=n(598),r=n(1),s=n(11),a=n(26);var l;function curveAngle(e,t,n){const i=Math.atan2(n.y-e.y,n.x-e.x)-Math.atan2(t.y-e.y,t.x-e.x),o=i>=0?i:2*Math.PI+i;return o<Math.PI?o:2*Math.PI-o}function maxRadius(e,t){return t*Math.tan(e/2)}function movePoint(e,t,n){const i=r.Point.distance(e,t);if(0===n||0===i)return e;const o=t.x-e.x,s=t.y-e.y,a=n/i;return{x:e.x+a*o,y:e.y+a*s}}!function(e){function toBezierJS(e,t){let n=null;if(t&&!t.mutable&&(n=t.cache).bezier)return n.bezier;const i=[];let s=[];return(s=Array.isArray(e)?e:[e]).forEach(({pathSegments:e,pathClosed:t})=>{for(let n=0,s=e.count();n<s;n++){const a=e.get(n);let l;if(n===s-1?t&&s>1&&(l=e.get(0)):l=e.get(n+1),l){const e=[r.PathSegment.point(a),r.PathSegment.calculatedHandleOut(a),r.PathSegment.calculatedHandleIn(l),r.PathSegment.point(l)],t=new o(e);i.push(t)}}}),!n||t&&t.mutable||(n.bezier=i),i}function isFirstSegment(e,t,n){return!t&&0===n}function isLastSegment(e,t,n){return!t&&n===e.count()-1}function radiusEnabledSegments(e,t){const n=[];for(let i=0,o=e.count();i<o;i++){if(o<3){n.push(!1);continue}const s=0===i,a=i===o-1;if(s&&!t){n.push(!1);continue}if(a&&!t){n.push(!1);continue}const l=s?e.last():e.get(i-1),c=a?e.first():e.get(i+1),d=e.get(i),u=r.isStraightCurve(l,d)&&r.isStraightCurve(d,c);n.push(u)}return n}e.toBezierJS=toBezierJS,e.isClosed=function isClosed(e){return Array.isArray(e)?!0===a.commonPropertyValue(e,"pathClosed"):e.pathClosed},e.boundingBox=function boundingBox(e){const t=toBezierJS(e),n=[],i=[];for(let l=0,c=t.length;l<c;l++){const e=t[l].bbox();n.push(e.x.min,e.x.max),i.push(e.y.min,e.y.max)}if(0===n.length)return{x:0,y:0,width:1,height:1};const o=Math.min(...n),r=Math.min(...i),s=Math.max(...n),a=Math.max(...i);return{x:o,y:r,width:Math.max(s-o,1),height:Math.max(a-r,1)}},e.anchorBoundingBox=function anchorBoundingBox(e){const t=[],n=[];for(let s=0,a=e.count();s<a;s++){const i=e.get(s);t.push(i.x),n.push(i.y)}const i=Math.min(...t),o=Math.max(...t),r=Math.min(...n);return{x:i,y:r,width:o-i,height:Math.max(...n)-r}},e.offset=function offset(e,t){return{pathSegments:e.pathSegments.map(e=>e.merge(r.Point.add(e,t))),pathClosed:e.pathClosed}},e.split=function split(e,t,n,i){const o=toBezierJS([{pathSegments:e,pathClosed:t}])[n].split(i);let s=n+1;n===e.count()-1&&(s=0);const a=e.get(n),l=e.get(s),c=r.isStraightCurve(a,l),d=o.left.points[1];let u=e.update(n,e=>c?e:new r.PathSegment(e.merge({handleOutX:d.x-e.x,handleOutY:d.y-e.y,handleMirroring:"asymmetric"})));const h=o.right.points[2];u=u.update(s,e=>c?e:new r.PathSegment(e.merge({handleInX:h.x-e.x,handleInY:h.y-e.y,handleMirroring:"asymmetric"})));const p=o.left.points[3],g=o.left.points[2],m=o.right.points[1],f=new r.PathSegment({x:p.x,y:p.y,handleInX:c?0:g.x-p.x,handleInY:c?0:g.y-p.y,handleOutX:c?0:m.x-p.x,handleOutY:c?0:m.y-p.y,handleMirroring:c?"straight":"asymmetric"});return u.insert(n+1,f)},e.isFirstSegment=isFirstSegment,e.isLastSegment=isLastSegment,e.isEndSegment=function isEndSegment(e,t,n){return isFirstSegment(0,t,n)||isLastSegment(e,t,n)},e.reverse=function reverse(e){return e.reverse().map(e=>s.reverseSegment(e))},e.canClose=function canClose(e,t,n,i){if(1===e.count())return!1;const o=isFirstSegment(0,t,n),r=isLastSegment(e,t,n),s=isFirstSegment(0,t,i),a=isLastSegment(e,t,i);return o&&a||r&&s},e.segmentIndexesToDelete=function segmentIndexesToDelete(e,t,n){const i=e.count(),o=!t||-1!==n.indexOf(i-1);return e.map((e,t)=>{const r=0===t,s=t===i-1,a=-1!==n.indexOf(t),l=-1!==n.indexOf(t-1);return r?a&&o:s?l&&o:a&&l}).toArray()},e.radiusEnabledSegments=radiusEnabledSegments,e.reduceRadius=function reduceRadius(e,t,n,i){if(null===n.radius)return;const o=radiusEnabledSegments(e,t);for(let r=0,s=e.count();r<s;r++){if(!o[r])continue;if(i&&-1===i.indexOf(r))continue;const t=e.get(r);if(void 0===n.radius)n.radius=t.radius;else if(n.radius!==t.radius)return void(n.radius=null)}},e.applyRadius=function applyRadius(e,t){const n=radiusEnabledSegments(e,t),o=[];for(let i=0,s=e.count();i<s;i++){const t=n[i],a=e.get(i);if(!t||0===a.radius){o.push(a);continue}const l=0===i,c=i===s-1,d=l?e.last():e.get(i-1),u=c?e.first():e.get(i+1);let h=1,p=1;const g=(l?n[s-1]:n[i-1])&&0!==d.radius,m=c?n[0]:n[i+1]&&0!==u.radius;g&&(h=a.radius/(d.radius+a.radius)),m&&(p=a.radius/(u.radius+a.radius));const f=r.Point.distance(d,a)*h,y=r.Point.distance(a,u)*p,v=Math.min(f,y);if(0===v){o.push(a);continue}const b=curveAngle(a,d,u),k=maxRadius(b,v),S=Math.min(a.radius,k),C=S/Math.tan(b/2),x=movePoint(a,d,C),w=movePoint(a,u,C),T=720/(180-180*b/Math.PI),P=4/3*Math.tan(Math.PI/T),E=movePoint(x,a,P*S),F=movePoint(w,a,P*S),M=r.Point.subtract(E,x),_=r.Point.subtract(F,w),O=new r.PathSegment(Object.assign({},x,{handleMirroring:"disconnected",handleOutX:M.x,handleOutY:M.y})),I=new r.PathSegment(Object.assign({},w,{handleMirroring:"disconnected",handleInX:_.x,handleInY:_.y}));o.push(O,I)}return{pathSegments:i.List(o),pathClosed:t}}}(l||(l={})),t.default=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});function toolClassFor(e){if(e===i.Tools.Move)return r.MoveTool;if(e===i.Tools.Resize)return s.ResizeTool;if(e===i.Tools.Rotate)return a.RotateTool;if(e===i.Tools.CreateFrame)return l.CreateFrameTool;if(e===i.Tools.CreateRoundedFrame)return l.CreateRoundedFrameTool;if(e===i.Tools.CreateShapeContainer)return l.CreateShapeContainerTool;if(e===i.Tools.CreateStackComponent)return c.CreateStackComponentTool;if(e===i.Tools.CreateScrollComponent)return c.CreateScrollComponentTool;if(e===i.Tools.CreatePageComponent)return c.CreatePageComponentTool;if(e===i.Tools.Highlight)return o.HighlightTool;if(e===i.Tools.DirectSelect)return o.DirectSelectTool;if(e===i.Tools.Select)return d.SelectTool;if(e===i.Tools.Path)return u.VekterPathEngine;if(e===i.Tools.Pan)return h.PanTool;if(e===i.Tools.Zoom)return p.ZoomTool;if(e===i.Tools.ZoomSelect)return g.ZoomSelectTool;if(e===i.Tools.Radius)return m.RadiusTool;if(e===i.Tools.SampleColor)return f.SampleColorTool;if(e===i.Tools.Gradient)return y.GradientToolEngine;if(e===i.Tools.TextEdit)return v.TextEditTool;if(e===i.Tools.CreateText)return b.CreateTextTool;if(e===i.Tools.CreateRectangleShape)return k.CreateRectangleShapeTool;if(e===i.Tools.CreateOvalShape)return k.CreateOvalShapeTool;if(e===i.Tools.CreatePolygonShape)return k.CreatePolygonShapeTool;if(e===i.Tools.CreateStarShape)return k.CreateStarShapeTool;if(e===i.Tools.SlotConnect)return S.SlotConnectTool;if(e===i.Tools.NavigationLink)return C.NavigationLinkTool;if(e===i.Tools.Comment)return x.FeedbackTool;if(e!==i.Tools.Unknown)throw Error("missing case");return null}t.VekterTool=class VekterTool{constructor(){this.enum=i.Tools.Unknown,this.wantsAutoscrolling=!1,this.displaySelectionBox=!1,this.displaySelectionHandles=!1}start(){}stop(){}cancel(){}update(){}},t.toolClassFor=toolClassFor,t.newToolFor=function newToolFor(e,t){const n=toolClassFor(e);if(!n)throw Error("call with a known tool");return t?new n(t):new n};const i=n(5),o=n(268),r=n(173),s=n(403),a=n(404),l=n(270),c=n(407),d=n(269),u=n(206),h=n(172),p=n(272),g=n(207),m=n(412),f=n(210),y=n(212),v=n(280),b=n(415),k=n(416),S=n(417),C=n(281),x=n(671)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(18);var o;!function(e){e.canvas="CANVAS",e.export="EXPORT",e.thumbnail="THUMBNAIL",e.preview="PREVIEW"}(o=t.RenderTarget||(t.RenderTarget={}));t.RenderEnvironment=Object.assign({imageBaseURL:"",target:o.preview,zoom:1},i.safeWindow.FramerRenderEnvironment),t.executeInRenderEnvironment=function executeInRenderEnvironment(e,n){const i=Object.assign({},t.RenderEnvironment);Object.assign(t.RenderEnvironment,e);const o=n();return Object.assign(t.RenderEnvironment,i),o},t.setGlobalRenderEnvironment=function setGlobalRenderEnvironment(e){Object.assign(t.RenderEnvironment,e)},function(e){e.current=function current(){return t.RenderEnvironment.target},e.hasRestrictions=function hasRestrictions(){const n=t.RenderEnvironment.target;return n===e.canvas||n===e.export}}(o=t.RenderTarget||(t.RenderTarget={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(1),o=n(24),r=n(48),s=n(158),a=n(36),l=n(592),c=n(40),d=n(84),u=n(375),h=n(249),p=n(250),g=n(100),m=n(167),f=n(189),y=n(260),v=n(1),b=n(117),k=n(28),S=n(261);function isCodeComponentNode(e){return e instanceof CodeComponentNode}t.isCodeComponentNode=isCodeComponentNode,t.isStackComponent=function isStackComponent(e){return!!e&&isCodeComponentNode(e)&&e.codeComponentIdentifier===b.HardCodedCodeIdentifier.stack};class CodeComponentNode extends(s.withPinsSizeRatioConstraints(r.default)){constructor(e){super(),a.setDefaults(this,l.CodeComponentRecord,e)}updateForRect(e,t){return c.updateConstrainedFrame(e,t,this.constraints(),this.constraintsLocked)}updateForSize(e,t){return c.updateConstrainedSize(e,t,this.constraintValues())}getComponentChildren(){if(d.codeComponentWithChildInsertion(this))return this.children||[];if(!this.cache.latest)return[];const e=this.tree(),{children:t}=this.codeComponentProps;if(e&&t){const n=this.component();if(!n||!n.properties||!n.properties.children)return[];const{type:i}=n.properties.children;if((i===v.ControlType.Array||i===v.ControlType.ComponentInstance)&&Array.isArray(t)){const n=[];for(let o=0,r=t.length;o<r;o++){const r=t[o];if(r.enabled&&r.value){const t=e.getNode(r.value);t&&n.push(t)}if(i===v.ControlType.ComponentInstance)break}return n}}return[]}getComponentSlotChildren(){const e={},t=this.getSlotKeys();for(const n of t){const t=this.codeComponentProps[n];e[n]=this.getNodesForSlotValues(t)}return e}getCodeComponentProps(){const e=this.component();if(!e||!e.properties)return{};const t={};if(!k.experiments.isOn("forceCodeComponentDomLayout")){const e=this.rect(this.cache.parentRect);e&&(t.width=e.width,t.height=e.height)}if(this.isStylable()){const e={overflow:this.clip?"hidden":"visible"},n=g.collectStyleFromNode(this);p.collectBoxShadowPropsForNode(this,n),f.collectFilterPropsForNode(this,n),m.collectBackgroundPropsForNode(this,n),i.collectVisualStyleFromProps(n,e),t.background=n.background,t._border=h.borderPropsForNode(this),t.style=e}const n=[],o=Object.keys(e.properties);for(let i=0,r=o.length;i<r;i++){const r=o[i];if("children"===r)continue;const s=e.properties[r],a=this.codeComponentProps[r];switch(s.type){case v.ControlType.File:case v.ControlType.Image:t[r]=a,n.push(r);break;case v.ControlType.FusedNumber:[r,s.toggleKey,...s.valueKeys].forEach(e=>t[e]=this.codeComponentProps[e]);break;case v.ControlType.Array:{const e=s.propertyControl.type;if(e===v.ControlType.ComponentInstance)t[r]=this.getNodesForSlotValues(a);else{if(!Array.isArray(a))continue;t[r]=[];for(const i of a)i.enabled&&(e!==v.ControlType.File&&e!==v.ControlType.Image||n.push([r,t[r].length]),t[r].push(i.value))}break}case v.ControlType.ComponentInstance:t[r]=this.getNodesForSlotValues(a);break;default:t[r]=a}}return n.length>0&&(t.__serverResources=n),b.HardCodedCodeIdentifier.all.includes(this.codeComponentIdentifier)&&(t.__fromCodeComponentNode=!0),t}getNodesForSlotValues(e){const t=[];if(!Array.isArray(e))return t;for(const n of e){if(!n.enabled)continue;const e=n.value;if(!e)continue;const i=this.tree().getNode(e);i&&t.push(i)}return t}getProps(){const e=Object.assign({},super.getProps(),this.newConstraintProperties(),{componentIdentifier:this.codeComponentIdentifier,visible:this.visible,style:{rotate:`${this.rotation}deg`,opacity:this.opacity}});return this.__unsafeIsGroundNode()&&(e.left=0,e.top=0),void 0===e.name&&this.name&&(e.name=this.name),e}component(){return o.componentLoader.componentForIdentifier(this.codeComponentIdentifier)}getSlotKeys(){const e=this.slotDictionary();return e?[...e.single,...e.multi]:[]}slotTitleForKey(e){const t=this.component();if(!t||!t.properties)return e;const n=t.properties[e];return n&&n.title||e}slotDictionary(){const e=this.component();if(!e)return null;const{properties:t}=e;if(!t)return null;const n={single:[],multi:[]},i=Object.keys(t);for(let o=0,r=i.length;o<r;o++){const e=i[o],r=t[e];if(r&&!S.isHidden(r,this))switch(r.type){case v.ControlType.ComponentInstance:n.single.push(e);break;case v.ControlType.Array:r.propertyControl.type===v.ControlType.ComponentInstance&&n.multi.push(e)}}return n}singleSlotWithContent(){const e=this.slots(),t=Object.keys(e);let n;for(const i of t){const e=this.codeComponentProps[i];if(e&&Array.isArray(e)&&0!==e.length){if(n)return null;n=i}}return n||null}anySlotContent(){const e=this.slotDictionary();if(!e)return!1;const t=[...e.single,...e.multi];for(const n of t){const e=this.codeComponentProps[n];if(e&&Array.isArray(e))for(let t=0,n=e.length;t<n;t++){const n=e[t];if(!n)continue;const i=n.value;if(i&&"string"==typeof i)return!0}}return!1}slots(){const e={},t=this.getSlotKeys();for(const n of t){const t=this.codeComponentProps[n];if(e[n]=[],t&&Array.isArray(t))for(let i=0,o=t.length;i<o;i++){const o=t[i];if(!o)continue;const r=o.value;r&&"string"==typeof r&&e[n].push(r)}}return e}allSlotContent(){const e=this.slots(),t=Object.keys(e),n=[];for(const i of t){const t=e[i];n.push(...t)}return n}removeNodeFromSlotContent(e){if(!this.allSlotContent().includes(e))return;const t=Object.assign({},this.codeComponentProps),n=this.slots();let i=!1;for(const o in n)n.hasOwnProperty(o)&&n[o].includes(e)&&(t[o]=t[o].filter(t=>t.value!==e),i=!0);if(i){const e=this.tree();e&&this.id&&e.update(this.id,{codeComponentProps:t})}}providesFreeSpace(){const e=this.component();return!!e&&i.providesFreeSpace(e.class)}isStylable(){const e=this.component();return!e||!e.class||i.withStylable(e.class)}collectCSS(e){const t=this.component();if(!t||!i.withCSSExport(t.class))return;const n=t.class._cssExport(this.codeComponentProps),o=Object.keys(n);for(let i=0,r=o.length;i<r;i++){const t=o[i],r=n[t];e[t]=r}}framerComponent(){const e=this.component();return!!e&&"framer"===e.packageIdentifier}hasAutoSize(){const e=o.componentLoader.componentForIdentifier(this.codeComponentIdentifier);return!!e&&i.hasAutoSize(e.class)}autoSize(e){const t=o.componentLoader.componentForIdentifier(this.codeComponentIdentifier);if(this.children&&t&&i.hasAutoSize(t.class)){const n=this.children.map(t=>u.toMinSize(t,e)),i=y.invisibleChildIndexes(this);return t.class.autoSize(n,this.codeComponentProps,i)}return null}minSize(e){let t=null;if((this.widthType===i.DimensionType.Auto||this.heightType===i.DimensionType.Auto)&&this.children){const n=super.minSize(e);t=this.autoSize(n)}return i.ConstraintValues.toMinSize(this.constraintValues(),e,t)}size(e,t,n=!0){const{parentDirectedRect:o}=this.cache;if(o&&n)return{width:o.width,height:o.height};let r=null;if((this.widthType===i.DimensionType.Auto||this.heightType===i.DimensionType.Auto)&&this.children){const t=super.minSize(e);r=this.autoSize(t)}return i.ConstraintValues.toSize(this.constraintValues(),e,r,t)}rect(e){if(this.cache.parentDirectedRect)return Object.assign({},this.cache.parentDirectedRect);let t=null;if((this.widthType===i.DimensionType.Auto||this.heightType===i.DimensionType.Auto)&&this.children){const n=this.minSize(e);t=this.autoSize(n)}return i.ConstraintValues.toRect(this.constraintValues(),e,t,!0)}}t.default=CodeComponentNode},function(e,t){e.exports=require("assert")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(538);t.componentLoader=i.componentLoader,t.isErrorDefinition=i.isErrorDefinition,t.isDesignDefinition=i.isDesignDefinition,t.findMasters=i.findMasters,t.extractComponentDefinitionsFromScript=i.extractComponentDefinitionsFromScript,t.ComponentLoaderInterface=i.ComponentLoaderInterface,t.ProjectBundleGlobalEnvironment=i.ProjectBundleGlobalEnvironment,t.ProjectBundleScriptsMap=i.ProjectBundleScriptsMap},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.rotationDefaults={rotation:0};const i="rotation";function hasRotation(e){return i in e}t.hasRotation=hasRotation,t.isRotated=function isRotated(e){if(!hasRotation)return!1;if(e.cache&&e.cache.matrix)return function getRotationAngleFromMatrix(e){const{a:t,b:n}=e;return Math.round(Math.atan2(n,t)*(180/Math.PI))}(e.cache.matrix)%90!=0;return e.rotation%90!=0},t.reduceRotation=function reduceRotation(e,t){hasRotation(e)&&(void 0===t.rotation?t.rotation=e.rotation:null!==t.rotation&&e.rotation!==t.rotation&&(t.rotation=null))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.commonValue=function commonValue(e){const t=e.length;if(0===t)return null;const n=e[0];for(let i=1;i<t;i++)if(n!==e[i])return null;return n},t.commonPropertyValue=function commonPropertyValue(e,t){const n=e.length;if(0===n)return null;const i=e[0][t];for(let o=1;o<n;o++)if(i!==e[o][t])return null;return i}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(1);t.hasShape=function hasShape(e){return i.withShape(e)}},function(e,t,n){"use strict";var i=this&&this.__rest||function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(i=Object.getOwnPropertySymbols(e);o<i.length;o++)t.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(e,i[o])&&(n[i[o]]=e[i[o]])}return n};Object.defineProperty(t,"__esModule",{value:!0});const o=n(0),r=n(0),s={bottomToolbar:"off",feedback:"off",feedbackJustSendIt:"off",feedbackServiceShim:"off",forceCodeComponentDomLayout:"off",ipcPreview:"off",disablePublishing:"off",sidebarStore:"off",rulers:"on",replaceWith:"on",exportPanel:"off",sandboxCanvas:"off",webfonts:"on",fractionOnStackInsert:"off"}||{},a=Object.assign({},"undefined"!=typeof window&&window.experiments||{}),l=(()=>{try{return JSON.parse(localStorage.experiments||"{}")}catch(e){}})();let c=!1;t.didHydrate=()=>{c=!0};class Experiments{constructor(e,t){this.isActive=(n,i)=>{if(t){const e=t(n,i);if(void 0!==e)return e}return e[n]===i}}isOn(e){return this.isActive(e,"on")}}const d=[];t.withExperiments=function withExperiments(e,t){d.push(e);try{return t()}finally{d.pop()!==e&&console.warn("Something went wrong with experiment overrides")}},t.experiments=new Experiments(Object.assign({},s,a,l),function isActiveByOverrides(e,t){for(let n=d.length-1;n>=0;n--){const i=d[n];if(e in i)return i[e]===t}});const u=new Experiments(s);function useExperimentVariant(e,n){const[,i]=r.useState(!1),o=r.useRef(!1),s=(c||o.current?t.experiments:u).isActive(e,n);return r.useLayoutEffect(()=>{const r=o.current||c;o.current=!0,r||s===t.experiments.isActive(e,n)||i(!0)},[]),s}t.Experiment=function Experiment(e){var{children:t}=e,n=i(e,["children"]);const[r,s,a]=function propsToParameters(e){if("isOn"in e)return[e.isOn,"on",!0];if("isNotOn"in e)return[e.isNotOn,"on",!1];if("isActive"in e)return[e.isActive,e.variant,!0];if("isNotActive"in e)return[e.isNotActive,e.variant,!1];throw Error("invalid props")}(n);return useExperimentVariant(r,s)===a?o.createElement(o.Fragment,null,t):null},t.useExperimentVariant=useExperimentVariant,t.useExperimentIsOn=function useExperimentIsOn(e){return useExperimentVariant(e,"on")}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(7),o=n(2),r=n(70),s=n(35),a=r.ContextMenuPresenter.on(r.PostMessageChannel.toParentFrame).expect();class Menu{constructor(){this.handlePopupResponse=o.default.wrapHandler(e=>{if(void 0===e)return;let t=this._items,n=void 0;for(const o of e){if(void 0===(n=t.get(o)))throw Error("Could not find expected menu item");t=void 0===n.submenu?i.List():n.submenu._items}void 0!==n&&n.click()}),this._items=i.List()}static buildFromTemplate(e){const t=new Menu;for(const n of e)t.append(new MenuItem(n));return t}get items(){return this._items.toArray()}append(e){this._items=this._items.push(e)}insert(e,t){this._items=this._items.insert(e,t)}popup(e){const t=JSON.parse(JSON.stringify(this._items.toJS()));a.showContextMenu({items:t,location:e}).then(e=>{this.handlePopupResponse(e.indexPath)}).catch(s.unhandledError)}}t.Menu=Menu;const l={enabled:!0,visible:!0,label:void 0,click:void 0,type:"normal",accelerator:void 0,submenu:void 0,checked:!1,mixed:!1};class MenuItem extends(i.Record(l)){constructor(e){void 0!==e.submenu&&"Menu"!==e.submenu.constructor.name&&(e.submenu=Menu.buildFromTemplate(e.submenu)),super(e)}toJS(){const e=super.toJS();return void 0!==e.submenu&&(e.submenu=e.submenu._items.toJS()),e}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(1),r=n(63),s=n(450),a=n(451);t.NumberInput=class NumberInput extends i.PureComponent{constructor(){super(...arguments),this.state={mouseOver:!1},this.textInput=null,this.focus=()=>{null!==this.textInput&&this.textInput.focus()},this.reset=()=>{this.textInput&&this.textInput.reset()},this.numValue=(e,t)=>{const n=this.props.value,i=parseFloat(e),o=a.evalMath(e);let r=0;if(Number.isFinite(o))r=o;else if(Number.isFinite(i))r=i;else if("number"==typeof n&&Number.isFinite(n))r=n;else if("string"==typeof n){const e=parseFloat(n);Number.isFinite(e)&&(r=e)}"number"==typeof t&&(r+=t),"number"==typeof this.props.min&&(r=Math.max(this.props.min,r)),"number"==typeof this.props.max&&(r=Math.min(this.props.max,r));const s=Math.pow(10,7);return r=Math.round(r*s)/s},this.onChange=e=>{if((null!==this.props.value||null!==e)&&`${this.props.value}`!==e){if(""===e){if(null===this.props.value)return;return void 0!==this.props.defaultValue&&this.props.onChange(this.props.defaultValue,e,this.props.contextData),this.inputValue=void 0,void this.reset()}this.props.onChange(this.numValue(e),e,this.props.contextData)}},this.onChangeTicker=e=>{this.props.onChange(this.numValue(`${e}`),void 0,this.props.contextData)},this.onChangeInput=(e,t)=>{t?(this.onChange(e),this.inputValue=void 0):this.inputValue=e},this.onArrow=e=>{const t=e.currentTarget;let n=e.shiftKey?10:1;40===e.keyCode&&(n*=-1);const{step:i}=this.props;void 0!==i&&(n*=i);const o=this.numValue(t.value,n);this.props.onChange(o,void 0,this.props.contextData),e.preventDefault()},this.focusDidChange=e=>{this.props.focusDidChange&&this.props.focusDidChange(e,this.props.contextData)},this.onMouseOver=e=>{this.setState({mouseOver:!0})},this.onMouseOut=e=>{this.setState({mouseOver:!1})},this.setTextInput=e=>{this.textInput=e}}componentWillUpdate(e,t){o.isEqual(e,this.props)||(this.inputValue=void 0)}render(){const{label:e,style:t,step:n,min:o,max:a,tickerOffset:l,onContextMenu:c,unit:d}=this.props,{mouseOver:u}=this.state,h=void 0===this.props.enabled||this.props.enabled;let p;p=void 0!==this.inputValue?this.inputValue:void 0!==this.props.value&&null!==this.props.value?`${this.props.value}${d||""}`:"";let g=parseFloat(p);Number.isNaN(g)&&(g=0);const m=Object.assign({width:60,margin:5,fontVariantNumeric:"tabular-nums"},t),f=i.createElement(s.default,{value:g,enabled:h,visible:u,onChangeValue:this.onChangeTicker,step:n,minValue:o,maxValue:a,offset:l});return i.createElement("div",{style:{position:"relative"}},i.createElement(r.TextInput,{type:r.TextInputType.Field,value:p,className:"numberInputField",onChange:this.onChangeInput,constantChange:!0,onArrow:this.onArrow,onMouseOver:this.onMouseOver,onMouseOut:this.onMouseOut,onContextMenu:c,enabled:h,label:u&&h?[]:e,focusDidChange:this.focusDidChange,ref:this.setTextInput,style:m,detail:f,labelOffset:l}))}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(7);t.withExportDefaults={exportOptions:i.List([])},t.withExportIncludesBackgroundDefaults={exportIncludesBackground:!1};const o="exportOptions";t.hasExport=function hasExport(e){return o in e};const r="exportIncludesBackground";t.hasExportIncludesBackground=function hasExportIncludesBackground(e){return r in e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(108),o=n(6);var r,s;!function(e){e[e.In=0]="In",e[e.Out=1]="Out"}(t.SegmentHandle||(t.SegmentHandle={})),function(e){e[e.Segments=0]="Segments",e[e.Curves=1]="Curves"}(r=t.PathSelectionType||(t.PathSelectionType={})),function(e){e[e.Full=1]="Full",e[e.Half=.5]="Half"}(s=t.PointRounding||(t.PointRounding={}));t.PathSelectionStore=class PathSelectionStore{constructor(e){this.addChanges=e,this.state={segmentSelection:[],selectionType:r.Segments,segmentHandle:null,segmentHovered:null,closestCurve:null,pointRounding:s.Half,snapConstraint:null}}validateSegmentSelection(e){this.state=function validateSelection(e,t){const n=[];for(let o=0,r=t.segmentSelection.length;o<r;o++){const i=t.segmentSelection[o],r=e.getNode(i.id);!r||i.index>=r.pathSegments.count()||n.push(i)}let i=t.segmentHandle;if(i){const t=e.getNode(i.id);(!t||i.index>=t.pathSegments.count())&&(i=null)}return Object.assign({},t,{segmentSelection:n,segmentHandle:i})}(e,this.state),this.addChanges(o.EngineChangeFlags.PathSelection)}setSegmentSelection(e,t){this.state=Object.assign({},this.state,{segmentSelection:e,selectionType:t}),this.addChanges(o.EngineChangeFlags.PathSelection)}toggleSegmentSelection(e,t){this.state.selectionType!==t&&(this.state=Object.assign({},this.state,{segmentSelection:e,selectionType:t}));const n=e.filter(e=>void 0===this.state.segmentSelection.find(t=>e.id===t.id&&e.index===t.index)),r=this.state.segmentSelection.filter(t=>void 0===e.find(e=>e.id===t.id&&e.index===t.index));this.state=Object.assign({},this.state,{segmentSelection:i.union(n,r)}),this.addChanges(o.EngineChangeFlags.PathSelection)}setSegmentHandle(e){this.state=Object.assign({},this.state,{segmentHandle:e}),this.addChanges(o.EngineChangeFlags.PathSelection)}setHoveredSegment(e){this.state=Object.assign({},this.state,{segmentHovered:e}),this.addChanges(o.EngineChangeFlags.PathSelection)}setClosestCurve(e){this.state=Object.assign({},this.state,{closestCurve:e}),this.addChanges(o.EngineChangeFlags.PathSelection)}setPathPointRounding(e){this.state=Object.assign({},this.state,{pointRounding:e}),this.addChanges(o.EngineChangeFlags.PathSelection)}setPathConstraint(e){this.state=Object.assign({},this.state,{snapConstraint:e}),this.addChanges(o.EngineChangeFlags.PathSelection)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(230);t.Animatable=i.Animatable,t.AnimatableObject=i.AnimatableObject,t.Cancel=i.Cancel,t.Change=i.Change,t.isAnimatable=i.isAnimatable;var o=n(231);t.UpdateObserver=o.UpdateObserver},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(1),o=n(40);t.pinDefaults={constraintsLocked:!1,left:0,right:null,top:0,bottom:null,centerAnchorX:0,centerAnchorY:0,widthType:i.DimensionType.FixedNumber,heightType:i.DimensionType.FixedNumber};const r="constraintsLocked";function isPinnable(e){return r in e}t.isPinnable=isPinnable,t.reducePins=function reducePins(e,t,n){if(!isPinnable(t))return;if(t.cache.parentDirected)return;if(t.parentid===e.root.id)return;if(void 0===n.constraintsLocked?n.constraintsLocked=t.constraintsLocked:null!==n.constraintsLocked&&n.constraintsLocked!==t.constraintsLocked&&(n.constraintsLocked=null),null!==n.pinLeft){const e=!!i.isFiniteNumber(t.left);void 0===n.pinLeft?n.pinLeft=e:n.pinLeft!==e&&(n.pinLeft=null)}if(null!==n.pinRight){const e=!!i.isFiniteNumber(t.right);void 0===n.pinRight?n.pinRight=e:n.pinRight!==e&&(n.pinRight=null)}if(null!==n.pinTop){const e=!!i.isFiniteNumber(t.top);void 0===n.pinTop?n.pinTop=e:n.pinTop!==e&&(n.pinTop=null)}if(null!==n.pinBottom){const e=!!i.isFiniteNumber(t.bottom);void 0===n.pinBottom?n.pinBottom=e:n.pinBottom!==e&&(n.pinBottom=null)}if(null!==n.widthFactor){const e=t.widthType===i.DimensionType.Percentage;void 0===n.widthFactor?n.widthFactor=e:n.widthFactor!==e&&(n.widthFactor=null)}if(null!==n.heightFactor){const e=t.heightType===i.DimensionType.Percentage;void 0===n.heightFactor?n.heightFactor=e:n.heightFactor!==e&&(n.heightFactor=null)}const r=t.constraints();n.canSetTop&&!o.canSetConstraint(r,"top")&&(n.canSetTop=!1),n.canSetBottom&&!o.canSetConstraint(r,"bottom")&&(n.canSetBottom=!1),n.canSetLeft&&!o.canSetConstraint(r,"left")&&(n.canSetLeft=!1),n.canSetRight&&!o.canSetConstraint(r,"right")&&(n.canSetRight=!1)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.unhandledError=function unhandledError(e){setTimeout(()=>{throw e},0)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(23),o=n(110),r=n(373),s=n(374);t.setDefaults=function setDefaults(e,t,n){Object.assign(e,t,n)};const a={mutable:!0,update:0};t.MutableNode=class MutableNode{constructor(e,t){this.mutable=!0,this.update=0,this.parentid=o.NullID,this.originalid=null,this.children=[],e?(Object.assign(this,e),this.id||(this.id=o.randomID()),this.cache||(this.cache=t||new r.NodeCache)):(this.id=o.randomID(),this.cache=t||new r.NodeCache)}toJS(){const e=Object.assign({},this);delete e.cache,delete e.update,delete e.mutable;for(const n in e){if("children"===n)continue;const t=e[n];void 0!==t&&(t&&t.toJS)instanceof Function&&(e[n]=t.toJS())}if(e.__class=this.constructor.name,e.replicaInfo)return e.children&&(e.children=[]),e;const t=e.children;return t&&(e.children=t.map(e=>e.toJS())),e}set(e,t){this.cache.latest&&(i(!e.id,"`id` should not be set"),i(!e.parentid,"`parentid` should not be set"),i(!e.children,"`children` should not be set"),i(!e.mutable,"`mutable` should not be set"),i(!e.update,"`update` should not be set"),i(!e.cache,"`cache` should not be set"));const n=this.asMutable(t);return Object.assign(n,e),n}clone(e){const t=new this.constructor;if(Object.assign(t,this,a,{cache:t.cache,id:t.id},e),e&&e.children)return t;const n=this.children;return n&&(t.children=n.map(e=>e.clone({parentid:t.id}))),t}cloneWithIds(e){const t=new this.constructor;Object.assign(t,this,a,{cache:t.cache},e);const n=this.children;return n&&(t.children=n.map(e=>e.cloneWithIds())),t}freeze(){return i(this.mutable,"Node must be mutable when freezing"),this.mutable=!1,this.cache.future=null,this.cache.reset(),s.USE_FREEZE&&Object.freeze(this),s.USE_FREEZE&&Object.freeze(this.children),this}preCommit(e){}preFreeze(e){}tree(){return this.cache.tree()}latest(){return this.tree().getCurrentOrFuture(this.id)}isMutable(){return this.mutable}asMutable(e){return this.mutable?this:(e||this.tree()).mutableFutureNode(this)}futureOrCurrent(){return this.cache.future?this.cache.future:this}getChild(e){return this.children?e<0||e>=this.children.length?null:this.children[e]:null}addChild(e){return i(this.mutable,"Node must be mutable when adding children"),i(this.children,"Node must have children"),this.children&&(e.parentid=this.id,this.children.push(e)),e}walk(e){e(this);const t=this.children;if(t)for(let n=0,i=t.length;n<i;n++){const i=t[n];i&&i.walk(e)}}walkWithPredicate(e){if(!e(this))return;const t=this.children;if(t)for(let n=0,i=t.length;n<i;n++){const i=t[n];i&&i.walkWithPredicate(e)}}find(e){if(e(this))return this;const t=this.children;if(t)for(let n=0,i=t.length;n<i;n++){const i=t[n].find(e);if(i)return i}return null}*ancestors(){const e=this.tree();let t=e.get(this.parentid);for(;t;)yield t,t=e.get(t.parentid)}}},function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))(function(o,r){function fulfilled(e){try{step(i.next(e))}catch(t){r(t)}}function rejected(e){try{step(i.throw(e))}catch(t){r(t)}}function step(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(fulfilled,rejected)}step((i=i.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const o=n(81),r=n(1),s=n(7),a=n(0),l=n(179),c=n(51),d=n(163),u=n(596),h=n(378),p=n(28),g=()=>{};class StyledTextDraft extends u.StyledText{constructor(e,t){let n=null;if(t)if(n=h.StyledTextCache.fromRawValue(t))super(void 0,n);else{let e=o.convertFromRaw(t);e=StyledTextDraft.convertInternalStateFromRaw(e),super(o.EditorState.createWithContent(e))}else if("string"==typeof e||e instanceof o.EditorState||void 0===e)super(e);else{if(!(e instanceof o.ContentState))throw Error("state error");super(o.EditorState.createWithContent(e))}this.blockRendererFn=this.blockRendererFn.bind(this),this._sizeCache=s.Map(),this._blockSizeCache=s.Map(),n&&(this._sizeCache=this._sizeCache.set(n.width,n.size))}reviveFromCached(e){return e.revive()}static createEmptyWithStyle(e){return new StyledTextDraft(o.EditorState.setInlineStyleOverride(o.EditorState.createWithContent(StyledTextDraft.ensureBlockEmptyStyles(o.ContentState.createFromText(""),e)),e))}get text(){return super.text}get styledText(){return super.styledText}withUpdatedText(e){const t=this.styledText.getCurrentContent(),n=t.getFirstBlock(),i=n.getLength();let r=n.getData().get("emptyStyle");return!r&&i>0&&(r=n.getInlineStyleAt(i-1)),new StyledTextDraft(o.Modifier.replaceText(t,this.fullTextSelection(),e,r))}toJS(){const e=this.cached();if(e&&e._rawLoadedValue)return e._rawLoadedValue;const t=o.convertToRaw(this.styledText.getCurrentContent());return t.__class=this.constructor.name,e&&(t.cached=e.toJS()),t}toJSON(){return this.toJS()}toHTML(){const e=this.alignment(),t=a.createElement(o.Editor,{editorState:this.styledText,onChange:g,customStyleFn:r.draftStyleFunction,textAlignment:e,readOnly:!0,blockRendererFn:this.blockRendererFn},null);return l.renderToStaticMarkup(t)}tokenVariables(){return this.colors(!1).toArray().filter(c.isTokenCSSVariable)}removeTokenVariables(e){const t=this.styledText.getCurrentContent(),n=this.adjustStyle(r.draftStyles.color.prefix,t=>d.findValueForTokenCSSVariable(t,e)||t);return t===n.styledText.getCurrentContent()?void 0:n}uncachedBlocksHTML(e){const t=[];if(this.styledText.getCurrentContent().getBlockMap().forEach((n,i)=>{this._blockSizeCache.has(i)&&this._blockSizeCache.get(i).get(e)||t.push(n)}),0===t.length)return null;const n=o.EditorState.createWithContent(o.ContentState.createFromBlockArray(t)),i=a.createElement(o.Editor,{editorState:n,onChange:g,customStyleFn:r.draftStyleFunction,textAlignment:"left",readOnly:!0,blockRendererFn:this.blockRendererFn},null);return l.renderToStaticMarkup(i)}blockRendererFn(e){return r.draftBlockRendererFunction({editable:!1,alignment:this.alignment()})(e)}updateStyledText(e){const t=new StyledTextDraft(e);t._measureElement=this._measureElement;const n=this.styledText.getCurrentContent(),i=e.getCurrentContent();if(i===n)t._sizeCache=this._sizeCache,t._blockSizeCache=this._blockSizeCache,t._alignment=this._alignment,t._cached=this._cached;else{const e=i.getBlocksAsArray();let o=this._blockSizeCache;n.getBlockMap().forEach((t,n)=>{-1===e.indexOf(t)&&(o=o.delete(n))}),t._blockSizeCache=o}return t}calculateSize(e=0){const t=this._sizeCache.get(e);if(void 0!==t)return t;const n=this.measureUncachedBlocks(e),i=r.Size(e,0),o=this.styledText.getCurrentContent().getBlockMap();if(o.keySeq().forEach(t=>{const n=this._blockSizeCache.get(t);if(void 0===n)throw Error(`Did not find cache for block ${t}`);const o=n.get(e);if(void 0===o)throw Error(`Did not find size for block ${t}`);i.height+=o.height,i.width=Math.max(o.width,i.width)}),i.height=Math.ceil(i.height),i.width=Math.ceil(i.width+1),this._sizeCache=this._sizeCache.set(e,i),n&&1===o.size){const t=this._measureElement.querySelectorAll("span");if(2===t.length&&t[0].parentElement){let n=t[0].parentElement.outerHTML;const o=this.alignment();o&&(n=`<div class='DraftEditor-align${o[0].toUpperCase()}${o.substring(1)}'>${n}</div>`),this._cached=new h.StyledTextCache(n,e,i)}}return i}measureUncachedBlocks(e){const t=this.uncachedBlocksHTML(e);return null!==t&&(this._measureElement||(this._measureElement=document.createElement("div")),this._measureElement.style.width=0===e?"10000px":`${e}px`,this._measureElement.innerHTML=t,document.body.appendChild(this._measureElement),[].slice.call(this._measureElement.querySelectorAll('[data-block="true"]')).forEach(t=>{const n=r.frameFromElement(t).height,i=[].slice.call(t.querySelectorAll('[data-text="true"]'));if(0===i.length)throw Error("Found block without expected text span");const o=r.frameFromElements(i).width,a=r.Size(o,n),l=this.blockId(t);if(void 0!==l){let t=this._blockSizeCache.get(l,s.Map());t=t.set(e,a),this._blockSizeCache=this._blockSizeCache.set(l,t)}}),document.body.removeChild(this._measureElement),!0)}scaledToHeight(e){const t=e/this.calculateSize().height;return this.adjustStyle(r.draftStyles.size.prefix,e=>{const n=e?Number(e):r.draftStyles.size.default;return`${Math.round(n*t)}`})}adjustStyle(e,t,n=!1){const i=this.styledText.getSelection();let r=this.styledText.getCurrentContent();if(n&&i.isCollapsed()){const i=this.styles(n).find(t=>t.startsWith(e));let o=void 0;void 0!==i&&(o=i.slice(e.length));const r=t(o);return void 0===r?this:this.updateStyle(e,r,!0)}const s=this.styledText.getCurrentContent();let a=!1;s.getBlocksAsArray().forEach(s=>{let l,c,d=NaN,u=NaN;if(n){if(!a){if(s.getKey()!==i.getStartKey())return;a=!0,d=i.getStartOffset()}a&&s.getKey()===i.getEndKey()&&(u=i.getEndOffset())}s.findStyleRanges(t=>{const n=t.getStyle();return l=void 0,n.forEach(t=>{if(t.startsWith(e))return l=t,!1}),!0},(n,i)=>{if(!isNaN(d)){if(d>i)return;n=Math.max(d,n)}if(!isNaN(u)){if(n>u)return;i=Math.min(u,i)}const a=new o.SelectionState({anchorKey:s.getKey(),anchorOffset:n,focusKey:s.getKey(),focusOffset:i});let c;void 0!==l&&(r=o.Modifier.removeInlineStyle(r,a,l),c=l.slice(e.length));const h=t(c);void 0!==h&&(r=o.Modifier.applyInlineStyle(r,a,`${e}${h}`))}),r.getBlockForKey(s.getKey()).getInlineStyleAt(0).forEach(t=>{if(t.startsWith(e))return c=t.slice(e.length),!1}),void 0!==c&&(r=StyledTextDraft.updateBlockEmptyStyle(r,[s.getKey()],e,c)),this.stylesPrefixedWith(e,!1),isNaN(u)||(a=!1)});let l=o.EditorState.push(this.styledText,r,"change-inline-style");return l=o.EditorState.acceptSelection(l,i),this.updateStyledText(l)}emptyStyledText(){return this.textToStyledText("")}textToStyledText(e){return o.EditorState.setInlineStyleOverride(o.EditorState.createWithContent(o.ContentState.createFromText(e)),StyledTextDraft.defaultStyleOverride)}styledTextToText(e){return e.getCurrentContent().getPlainText()}fonts(e){if(this._cached){const e=this._cached.fonts();if(e)return e}return this.stylesPrefixedWith(r.draftStyles.font.prefix,e)}colors(e){return this.stylesPrefixedWith(r.draftStyles.color.prefix,e)}sizes(e){return this.stylesPrefixedWith(r.draftStyles.size.prefix,e)}letterSpacings(e){return this.stylesPrefixedWith(r.draftStyles.letterSpacing.prefix,e)}lineHeight(){return this.stylesPrefixedWith(r.draftStyles.lineHeight.prefix,!0).first()}alignment(){let e=this._alignment;return e||((e=this.findFirstAlignment())||(e="undefined"),this._alignment=e),this.stringToTextAlignment(e)}findFirstAlignment(){const e=this.styledText.getCurrentContent().getBlockMap().find(e=>e.getLength()>0);if(!e)return;const t=e.getInlineStyleAt(0).find(e=>e.startsWith(r.draftStyles.align.prefix));return t?this.stringToTextAlignment(t.slice(r.draftStyles.align.prefix.length)):void 0}stringToTextAlignment(e){return"left"!==e&&"right"!==e&&"center"!==e?void 0:e}serialize(e){if(this._cached){const t=this._cached.serialize(e);if(t)return t}const t=this.styledText.getCurrentContent(),n=[];return t.getBlocksAsArray().forEach(e=>{const t={text:e.getText(),inlineStyles:[]};let i;if(e.findStyleRanges(e=>(i=e.getStyle(),!0),(e,n)=>{const o=r.draftStyleFunction(i,!1);t.inlineStyles.push({startIndex:e,endIndex:n,css:o})}),0===t.inlineStyles.length){const n=StyledTextDraft.getBlockEmptyStyle(e),i=r.draftStyleFunction(n,!1);t.inlineStyles.push({startIndex:0,endIndex:0,css:i})}n.push(t)}),{blocks:n,alignment:this.alignment()}}fullTextSelection(){const e=this.styledText.getCurrentContent();return new o.SelectionState({anchorKey:e.getFirstBlock().getKey(),anchorOffset:0,focusKey:e.getLastBlock().getKey(),focusOffset:e.getLastBlock().getLength()})}styles(e){let t=s.OrderedSet();const n=this.styledText,i=n.getCurrentContent(),o=e?n.getSelection():this.fullTextSelection();if(o.isCollapsed())return n.getCurrentInlineStyle();const r=o.getEndKey(),a=o.getEndOffset(),l=o.getStartKey(),c=o.getStartOffset();let d=i.getBlockForKey(l);for(;;){let e;if(d.findStyleRanges(t=>(e=t.getStyle(),!0),(n,i)=>{void 0!==e&&(d.getKey()===l&&i<=c||d.getKey()===r&&n>=a||(t=t.merge(e)))}),d.getKey()===r)break;d=i.getBlockAfter(d.getKey())}return t}stylesPrefixedWith(e,t){return s.OrderedSet(this.styles(t).filter(t=>t.startsWith(e)).map(t=>t.slice(e.length)))}updateStyle(e,t,n){const i=this.styles(n),r=`${e}${t}`;let a=this.styledText,l=a.getCurrentContent();const c=a.getSelection(),d=n?c:this.fullTextSelection(),u=StyledTextDraft.keysOfBlocksWithStartInSelection(l,d);let h;return l=StyledTextDraft.updateBlockEmptyStyle(l,u,e,t),d.isCollapsed()?h=(h=s.OrderedSet(i.filter(t=>void 0!==t&&!t.startsWith(e)))).add(r):(i.forEach(t=>{t&&t.startsWith(e)&&(l=o.Modifier.removeInlineStyle(l,d,t))}),l=o.Modifier.applyInlineStyle(l,d,r)),a=StyledTextDraft.updateEditorStateAfterStyling(a,l,c,h),this.updateStyledText(a)}toggleStyle(e,t){const n=this.styles(t);let i=this.styledText,r=i.getCurrentContent();const s=i.getSelection(),a=t?s:this.fullTextSelection(),l=StyledTextDraft.keysOfBlocksWithStartInSelection(r,a);let c;return r=n.has(e)?StyledTextDraft.removeBlockEmptyStyle(r,l,e):StyledTextDraft.addBlockEmptyStyle(r,l,e),a.isCollapsed()?c=n.has(e)?n.remove(e):n.add(e):r=n.has(e)?o.Modifier.removeInlineStyle(r,a,e):o.Modifier.applyInlineStyle(r,a,e),i=StyledTextDraft.updateEditorStateAfterStyling(i,r,s,c),this.updateStyledText(i)}static updateEditorStateAfterStyling(e,t,n,i){let r=o.EditorState.push(e,t,"change-inline-style");return r=o.EditorState.acceptSelection(r,n),void 0!==i&&(r=o.EditorState.setInlineStyleOverride(r,i)),r}static keysOfBlocksWithStartInSelection(e,t){if(t.isCollapsed())return 0===t.getAnchorOffset()?[t.getAnchorKey()]:[];{const n=t.getStartKey(),i=t.getEndKey(),o=e.getBlockMap().keySeq().skipUntil(e=>e===n).takeUntil(e=>e===i).concat(i);return(0===t.getAnchorOffset()?o:o.rest()).toArray()}}static getBlockEmptyStyle(e){return e.getData().get("emptyStyle",s.OrderedSet())}static setBlockEmptyStyle(e,t){return e.merge({data:e.getData().merge({emptyStyle:t})})}static updateBlockEmptyStyle(e,t,n,i){const o=`${n}${i}`;return t.forEach(t=>{const i=e.getBlockForKey(t);StyledTextDraft.getBlockEmptyStyle(i).forEach(i=>{i&&i.startsWith(n)&&(e=StyledTextDraft.removeBlockEmptyStyle(e,[t],i))})}),e=StyledTextDraft.addBlockEmptyStyle(e,t,o)}static addBlockEmptyStyle(e,t,n){return this.addOrRemoveBlockEmptyStyle(e,t,n,!0)}static removeBlockEmptyStyle(e,t,n){return this.addOrRemoveBlockEmptyStyle(e,t,n,!1)}static addOrRemoveBlockEmptyStyle(e,t,n,i){if(0===t.length)return e;const o=e.getBlockMap().filter(e=>-1!==t.indexOf(e.getKey())).map(e=>{const t=this.getBlockEmptyStyle(e),o=i?t.add(n):t.remove(n);return this.setBlockEmptyStyle(e,o)});return e.merge({blockMap:e.getBlockMap().merge(o)})}static ensureBlockEmptyStyles(e,t){let n=s.Map(),i=t||this.defaultStyleOverride;return e.getBlockMap().forEach((e,t)=>{const o=e.getLength();if(void 0===e.getData().get("emptyStyle")){const r=0===o?i:e.getInlineStyleAt(0);n=n.set(t,this.setBlockEmptyStyle(e,r))}o>0&&(i=e.getInlineStyleAt(o-1))}),n.count()>0?e.merge({blockMap:e.getBlockMap().merge(n)}):e}blockId(e){const t=e.getAttribute("data-offset-key");if(null===t)return;const n=t.split("-")[0];return 0!==n.length?n:void 0}static convertInternalStateFromRaw(e){const t=e.getBlockMap().map(e=>{const t=this.getBlockEmptyStyle(e);return this.setBlockEmptyStyle(e,s.OrderedSet(t))});return e.merge({blockMap:t})}static getRawStylesFromCSS(e){const t=[],n=r.draftStyles;for(const i of Object.keys(n)){const o=n[i];if(void 0===o.fromCSS)continue;const r=o.fromCSS(e);void 0!==r&&t.push(n[i].prefix+r)}return"italic"===e.fontStyle&&t.push("ITALIC"),("bold"===e.fontWeight||null!==e.fontWeight&&parseFloat(e.fontWeight)>=500)&&t.push("BOLD"),t}loadMissingFonts(e,t){return i(this,void 0,void 0,function*(){(yield r.fontStore.loadWebFontsFromSelectors(e)).length&&(this._sizeCache=this._sizeCache.clear(),this._blockSizeCache=this._blockSizeCache.clear(),t&&t())})}getProps(e){const t=this._cached,n=this.fonts(!1).toArray(),i=n.filter(e=>!r.fontStore.isSelectorLoaded(e));if(i.length&&p.experiments.isOn("webfonts")){const t=i.filter(e=>r.fontStore.canLoadSelector(e));t.length&&this.loadMissingFonts(t,e)}if(t){return{rawHTML:t.html,alignment:t.alignment(this),fonts:n}}return{alignment:this.alignment(),contentState:this.styledText.getCurrentContent(),fonts:n}}static patch(e,t,n){if(e.text!==t.text&&e.text===n.text)return n.withUpdatedText(t.text);const i=[];if(e.styledText&&e instanceof StyledTextDraft){e.styledText.getCurrentContent().getFirstBlock().getInlineStyleAt(0).forEach(e=>{e&&i.push(e)})}const o=[];if(t.styledText&&t instanceof StyledTextDraft){t.styledText.getCurrentContent().getFirstBlock().getInlineStyleAt(0).forEach(e=>{e&&o.push(e)})}const r=[];if(n.styledText&&n instanceof StyledTextDraft){n.styledText.getCurrentContent().getFirstBlock().getInlineStyleAt(0).forEach(e=>{e&&r.push(e)})}o.forEach(e=>{if("SELECTED"===e)return;if(i.indexOf(e)>=0)return;let t=e.indexOf(":");t<0&&(t=e.length);const o=e.slice(0,t);if(i.find(e=>e.startsWith(o))===r.find(e=>e.startsWith(o))){const i=e.slice(t);n=n.updateStyle(o,i,!1)}});return["ITALIC","BOLD","UNDERLINE"].forEach(e=>{i.indexOf(e)<0||r.indexOf(e)<0||o.indexOf(e)>=0||(n=n.toggleStyle(e,!1))}),n}}StyledTextDraft.defaultStyleOverride=s.OrderedSet([r.draftStyles.font.prefix+r.draftStyles.font.default,r.draftStyles.color.prefix+r.draftStyles.color.default,r.draftStyles.size.prefix+r.draftStyles.size.default,r.draftStyles.letterSpacing.prefix+r.draftStyles.letterSpacing.default,r.draftStyles.lineHeight.prefix+r.draftStyles.lineHeight.default]),StyledTextDraft.setFont=(e,t,n)=>e.updateStyle(r.draftStyles.font.prefix,t,n),StyledTextDraft.setColor=(e,t,n)=>e.updateStyle(r.draftStyles.color.prefix,t,n),StyledTextDraft.setColorAlpha=(e,t,n)=>e.adjustStyle(r.draftStyles.color.prefix,e=>r.ConvertColor.setAlpha(e||r.draftStyles.color.default,t/100),n),StyledTextDraft.setSize=(e,t,n)=>e.updateStyle(r.draftStyles.size.prefix,`${t}`,n),StyledTextDraft.setLetterSpacing=(e,t,n)=>e.updateStyle(r.draftStyles.letterSpacing.prefix,`${t}`,n),StyledTextDraft.setLineHeight=(e,t)=>e.updateStyle(r.draftStyles.lineHeight.prefix,`${t}`,!1),StyledTextDraft.setAlignment=(e,t)=>e.updateStyle(r.draftStyles.align.prefix,t,!1),StyledTextDraft.toggleBold=(e,t=!1)=>e.toggleStyle("BOLD",t),StyledTextDraft.toggleItalic=(e,t=!1)=>e.toggleStyle("ITALIC",t),StyledTextDraft.toggleUnderline=(e,t=!1)=>e.toggleStyle("UNDERLINE",t),t.StyledTextDraft=StyledTextDraft,t.draftBlockRenderMap=s.Map({unstyled:{element:"div",aliasedElements:["p"]}})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(3),r=n(29),s=n(2),a=e=>"items"in e;class PanelHeader extends i.PureComponent{constructor(){super(...arguments),this.onMouseDownSettings=e=>{const{settings:t}=this.props;t&&this.showSettings(t,e.clientX,e.clientY+14)},this.onMouseDownHeader=e=>{if((0===e.button||1===e.buttons)&&!e.ctrlKey){const{addition:t}=this.props;t&&a(t)&&this.showAdditionMenu(t,e.clientX,e.clientY+14)}},this.onClickHeader=e=>{const{addition:t,subtraction:n}=this.props;t&&!a(t)?t.action():!t&&n&&n.enabled&&n.action&&n.action()},this.onClickAddition=e=>{const{addition:t}=this.props;t&&(a(t)?this.showAdditionMenu(t,e.clientX,e.clientY+14):t.action(),e.stopPropagation())},this.showAdditionMenu=(e,t,n)=>{const{items:i,action:o}=e;if(0===i.length)return;const a=i.map(e=>"___"===e.title?{type:"separator"}:{label:e.title,click:s.default.wrapHandler(()=>{o(e)})});r.Menu.buildFromTemplate(a).popup({x:t,y:n})},this.showSettings=(e,t,n)=>{const{values:i,selectedValues:o,onSelect:a,disabledValues:l,mixedValues:c}=e;if(0===i.length)return;const d=i.map((e,t)=>{if("___"===e)return{type:"separator"};const n=-1!==o.indexOf(e)||-1!==o.indexOf(t);let i=!0;l&&(i=-1===l.indexOf(e)&&-1===l.indexOf(t));let r=o.length>1;return c&&(r=-1!==c.indexOf(e)||-1!==c.indexOf(t)),{label:e,checked:n,enabled:i,mixed:r,click:s.default.wrapHandler(()=>{a(e,t)})}});r.Menu.buildFromTemplate(d).popup({x:t,y:n})},this.onClickMinus=e=>{const{subtraction:t}=this.props;t&&(t.action(),e.stopPropagation())},this.stopPropagation=e=>{e.stopPropagation()},this.settings=()=>{const{settings:e,subtraction:t,addition:n}=this.props;return e?n||t&&t.enabled?void 0:i.createElement("div",{style:d,onMouseDown:this.onMouseDownSettings},e.title?e.title:1===e.selectedValues.length?e.selectedValues[0]:"Multiple"):null},this.subTitle=()=>{const{subTitle:e}=this.props;if(e)return i.createElement("div",{style:u},e)},this.onContextMenu=e=>{const{onContextMenu:t,settings:n}=this.props;t?t(e):n&&this.showSettings(n,e.clientX,e.clientY+14)}}render(){const{title:e,addition:t,subtraction:n,settings:r,empty:s,popover:l,style:d}=this.props;return i.createElement("div",{style:mainStyle(s,d),onClick:this.onClickHeader,onMouseDown:this.onMouseDownHeader,onContextMenu:this.onContextMenu},e,n&&n.enabled&&i.createElement("div",{style:minusIcon(t,r),onClick:this.onClickMinus,onMouseDown:this.stopPropagation}),t&&i.createElement("div",{style:(u=!a(t)||t.items.length>0,Object.assign({},c,{background:`no-repeat center ${o.theme.backgroundImage("icon-layer-panel-plus")}`,opacity:u?1:.5})),onClick:this.onClickAddition}),this.settings()||this.subTitle(),l);var u}}PanelHeader.divider="___",t.PanelHeader=PanelHeader;const l={position:"relative",color:o.theme.sectionHeaderText,height:26,width:"100%",borderBottom:`1px solid ${o.theme.propertyPanelHeaderBorder}`,backgroundColor:o.theme.propertyPanelHeaderBackground,fontWeight:500,fontSize:"11px",lineHeight:"1em",cursor:"default",WebkitUserSelect:"none",userSelect:"none",padding:"6px 9px",marginBottom:5};function mainStyle(e,t){return!0!==e?t?Object.assign({},l,t):l:Object.assign({},l,{marginBottom:-1},t)}const c={position:"absolute",width:26,height:26,right:2,top:0};function minusIcon(e,t){return e||t?Object.assign({},c,{background:`no-repeat right ${o.theme.backgroundImage("icon-layer-panel-minus")}`,right:30,width:20}):Object.assign({},c,{background:`no-repeat center ${o.theme.backgroundImage("icon-layer-panel-minus")}`})}const d={position:"absolute",height:24,top:0,right:10,fontSize:"9px",fontWeight:"normal",lineHeight:"11px",padding:"7px 9px",color:o.theme.sectionHeaderPopUp,background:`no-repeat right 12px ${o.theme.backgroundImage("icon-dropdown-tiny")}`},u={position:"absolute",height:24,top:0,right:10,fontSize:"9px",fontWeight:"normal",lineHeight:"11px",paddingTop:7,color:o.theme.sectionHeaderPopUp}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(1);t.aspectRatioDefaults={aspectRatio:null};const o="aspectRatio";function hasAspectRatio(e){return o in e}t.hasAspectRatio=hasAspectRatio,t.reduceAspectRatio=function reduceAspectRatio(e,t){if(!hasAspectRatio(e))return;const n=i.isFiniteNumber(e.aspectRatio);void 0===t.aspectRatioEnabled?t.aspectRatioEnabled=n:null!==t.aspectRatioEnabled&&t.aspectRatioEnabled!==n&&(t.aspectRatioEnabled=null)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(1),o=n(26),r=n(1);t.updateConstrainedFrame=(e,n,o,r)=>{const a=i.Rect.pixelAligned(e);return r?s(o,a,n):t.guessConstrainedFrame(a,n,o)},t.updateConstrainedSize=(e,t,n)=>{const o=r.ConstraintValues.toRect(n,t,null,!0),s={};return i.isFiniteNumber(n.aspectRatio)&&(i.isFiniteNumber(e.width)?e.height=e.width/n.aspectRatio:i.isFiniteNumber(e.height)&&(e.width=e.height*n.aspectRatio)),i.isFiniteNumber(e.width)&&(t&&n.widthType===r.DimensionType.Percentage?s.width=e.width/t.width:(s.widthType=r.DimensionType.FixedNumber,s.width=e.width)),i.isFiniteNumber(e.height)&&(t&&n.heightType===r.DimensionType.Percentage?s.height=e.height/t.height:(s.heightType=r.DimensionType.FixedNumber,s.height=e.height)),i.isFiniteNumber(s.width)&&null!==n.left&&null!==n.right&&(s.right=n.right-(s.width-o.width),s.widthType=r.DimensionType.FixedNumber),i.isFiniteNumber(s.height)&&null!==n.top&&null!==n.bottom&&(s.bottom=n.bottom-(s.height-o.height),s.heightType=r.DimensionType.FixedNumber),s},t.guessConstrainedFrame=(e,n,i,o,r)=>{const a=t.guessConstraints(e,n,i,o,r);return s(a,e,n)};t.guessConstraints=(e,n,o,s,a)=>{const l=o&&o.aspectRatio||a||null;let c=o&&o.fixedSize||!1;if(null===n)return{left:!0,top:!0,bottom:!1,right:!1,widthType:r.DimensionType.FixedNumber,heightType:r.DimensionType.FixedNumber,aspectRatio:l,fixedSize:c};if(void 0!==o&&(e=>!1===e.left&&!1===e.right&&!1===e.top&&!1===e.bottom&&e.widthType===r.DimensionType.Percentage&&e.heightType===r.DimensionType.Percentage)(o))return o;const d=.2*n.width,u=.2*n.height,h=i.Rect.center(e),p=Math.abs(h.x-n.width/2)<2,g=Math.abs(h.y-n.height/2)<2,m=t.pinValues(e,n);let f=(m.left||0)<d,y=(m.right||0)<d,v=(m.top||0)<u,b=(m.bottom||0)<u;f||y||p||((m.left||0)<=(m.right||0)?f=!0:y=!0),v||b||g||((m.top||0)<=(m.bottom||0)?v=!0:b=!0);const k=o?o.widthType:r.DimensionType.FixedNumber,S=o?o.heightType:r.DimensionType.FixedNumber,C=k!==r.DimensionType.FixedNumber,x=S!==r.DimensionType.FixedNumber;return C&&f&&y&&(p?y=f=!1:m.left<=m.right?y=!1:f=!1),x&&v&&b&&(g?b=v=!1:m.top<=m.bottom?b=!1:v=!1),void 0!==s&&(c=s),c&&f&&y&&(y=!1,f=!1),c&&v&&b&&(b=!1,v=!1),i.isFiniteNumber(l)&&v&&b&&f&&y&&((m.top||0)<=(m.bottom||0)?b=!1:v=!1),{left:f,top:v,right:y,bottom:b,widthType:k,heightType:S,aspectRatio:l,fixedSize:c}};const s=(e,n,i)=>{const{width:o,height:s}=n,{widthType:a,heightType:l}=e;if(null===i)return{width:o,height:s,left:n.x,top:n.y,right:null,bottom:null,widthType:r.DimensionType.FixedNumber,heightType:r.DimensionType.FixedNumber};const d=c(n,i),u=t.pinValues(n,i),h={centerAnchorX:d.x,centerAnchorY:d.y,top:e.top?u.top:null,bottom:e.bottom?u.bottom:null,left:e.left?u.left:null,right:e.right?u.right:null,widthType:a,heightType:l};return a===r.DimensionType.FixedNumber?h.width=o:a===r.DimensionType.Percentage&&(h.width=n.width/i.width),l===r.DimensionType.FixedNumber?h.height=s:l===r.DimensionType.Percentage&&(h.height=n.height/i.height),h};t.canSetConstraint=(e,t)=>!e.fixedSize||-1===["widthFactor","heightFactor","aspectRatio"].indexOf(t),t.setConstraint=(e,n,o)=>{if(!t.canSetConstraint(e,n))throw Error("Trying to solve constraint that can't be solved");const s=Object.assign({},e,{[n]:o});if(!o)return s;const c=e.widthType!==r.DimensionType.FixedNumber,d=e.heightType!==r.DimensionType.FixedNumber;return s.fixedSize?a(s,n):i.isFiniteNumber(s.aspectRatio)&&l(s,n)&&a(s,n),s.left&&s.right&&c&&(s.widthType=r.DimensionType.FixedNumber),s.top&&s.bottom&&d&&(s.heightType=r.DimensionType.FixedNumber),s};const a=(e,t)=>{switch(t){case"left":e.right=!1;break;case"right":e.left=!1;break;case"top":e.bottom=!1;break;case"bottom":e.top=!1}return e},l=(e,t)=>{const n=["top","bottom","left","right"].filter(e=>e!==t).map(t=>e[t]);return!0===o.commonValue(n)};t.pinValues=(e,t)=>({top:e.y,bottom:t.height-e.y-e.height,left:e.x,right:t.width-e.x-e.width});const c=(e,t)=>{const n=i.Rect.center(e);return{x:n.x/t.width,y:n.y/t.height}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.lockDefaults={locked:!1};const i="locked";t.hasLock=function hasLock(e){return i in e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(4),o=n(194),r=n(4),s=n(73),a=n(22),l=n(24),c=n(74),d=n(117);function isRoundFrame(e){const t=e.radiusPerCorner?Math.min(e.radiusTopLeft,e.radiusTopRight,e.radiusBottomLeft,e.radiusBottomRight):e.radius;if(0===t)return!1;if(!e.radiusPerCorner&&e.radiusIsRelative)return e.radius>40;if(!e.cache.latest)return!1;const n=e.tree().getRect(e);return t>=Math.min(n.width,n.height)/2}t.defaultName=e=>{if(e instanceof i.SVGNode)return e.originalFilename||"Icon";if(e instanceof i.TextNode)return e.text.replace(/\s+/g," ").trim();if(e instanceof i.PathNode)return"Path";if(e instanceof r.FrameNode){const t=o.getDeviceName(e.deviceType);if(t){if(!e.cache.latest)return t;const n=e.tree();if(e.parentid===n.root.id)return t}return isRoundFrame(e)?"Round":"Frame"}if(e instanceof i.ShapeContainerNode)return"Graphic";if(e instanceof r.BooleanShapeNode)return s.nameForPathBooleanType(e.pathBoolean);if(e instanceof r.ShapeGroupNode)return"Group";if(e instanceof r.StarShapeNode)return"Star";if(e instanceof i.PolygonShapeNode)return"Polygon";if(e instanceof r.OvalShapeNode)return"Oval";if(e instanceof r.RectangleShapeNode)return"Rectangle";if(e instanceof a.default){const t=l.componentLoader.componentForIdentifier(e.codeComponentIdentifier);return t&&t.name?t.name:"Component"}return"Rectangle"},t.iconName=e=>{if(void 0===e)return"canvas";if(c.isUserComponent(e))return"component";if(a.isCodeComponentNode(e))switch(e.codeComponentIdentifier){case d.HardCodedCodeIdentifier.scroll:return"scroll";case d.HardCodedCodeIdentifier.stack:return"stack";case d.HardCodedCodeIdentifier.page:return"page"}return e instanceof r.FrameNode?isRoundFrame(e)?"frame-round":"frame":e instanceof i.TextNode?"text":e instanceof i.SVGNode?"svg":e instanceof i.PathNode?"path":e instanceof r.BooleanShapeNode?"boolean":e instanceof r.StarShapeNode?"star":e instanceof i.PolygonShapeNode?"polygon":e instanceof r.OvalShapeNode?"oval":e instanceof r.RectangleShapeNode?"rectangle":e instanceof r.ShapeGroupNode?"group":e instanceof i.ShapeContainerNode?"graphic":"rectangle"},t.equalSelection=(e,t)=>{const n=e.length;if(n!==t.length)return!1;const i=new Set;for(let o=0;o<n;o++)i.add(e[o].id);for(let o=0;o<n;o++)if(!i.has(t[o].id))return!1;return!0}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(9),o=n(24),r=n(4),s=n(1),a=n(19),l=n(40),c=n(16),d=n(166),u=n(115),h=n(54),p=n(41),g=n(25),m=n(88),f=n(27),y=n(11),v=n(73),b=n(615),k=n(34),S=n(89),C=n(192),x=n(23),w=n(92),T=n(12),P=n(56),E=n(22),F=n(5),M=n(69),_=n(84),O=n(195),I=n(39),D=n(90),N=n(15),R=n(14),A=n(196);var L;!function(e){e[e.frame=0]="frame",e[e.stack=1]="stack"}(L||(L={})),function(e){function sendBackwardEnabled(e,t,n){if(t.find(T.isReplicaChild))return!1;if(!n){n=groupByParent(e.withoutDescendants(t))}return canSendNode(e,n,-1)}function sendForwardEnabled(e,t,n){if(t.find(T.isReplicaChild))return!1;if(!n){n=groupByParent(e.withoutDescendants(t))}return canSendNode(e,n,1)}function wrapSelectionWith(e,t,n){const i=e.tree;if(!wrappingEnabled(e,t))return;const o=i.sortVisually(i.withoutDescendants(t)),a=i.getParent(o[0].id),c=i.getIndex(o.slice(-1)[0]),d=o.map(e=>i.convertFrameToCanvas(e));let u=s.Rect.merge(...d);null!==a&&(u=i.convertFrameToNode(a,u)),u=s.Rect.roundToOutside(u);const h=i.newId();let p={id:h,top:u.y,left:u.x,width:u.width,height:u.height};if(null!==a){const e=i.getRect(a),t=l.guessConstrainedFrame(u,e);p=Object.assign({},p,t,{clip:!1,fillEnabled:!1})}const g=null!==a?a.id:r.NullID;if(n===L.frame){e.createFrame(g,p);const t=e.getNode(h);e.moveNode(h,g,c),o.forEach(n=>{const o=convertNodeToNewParentUpdate(i,n,a,t);e.moveNode(n.id,h),e.updateNode(n.id,o)})}else e.createStack(h,g,p,o,u),e.moveNode(h,g,c);e.setSelection([h])}function wrappingEnabled(e,t){if(!e.isDefaultToolActive())return!1;if(t.find(T.isReplicaChild))return!1;if(0===t.length)return!1;const n=e.tree,i=n.withoutDescendants(t),[o,s]=i.reduce(([e,t],o)=>{const s=!r.isVectorNode(o),a=n.getParentId(i[0]),l=n.getParentId(o);return[e&&a===l,t&&s]},[!0,!0]);return o&&s}function nodesAreClipping(e,t){return void 0!==t.find(e=>u.hasClip(e)&&e.clip)}function sizeToFitContent(e,t){sizeToFitContentEnabled(t)&&t.forEach(t=>{if(0===t.children.length)return;const n={minX:1/0,maxX:-1/0,minY:1/0,maxY:-1/0},i=e.getParentRect(t,!0,!1);t.children.forEach(e=>{O.collectBoundingBox(e,n,!1)});const o=O.getRectContainingBoundingBox(n),r=t.transformMatrix(i),a=D.default.convertPoint(r,o),l=t.transformMatrix(i,s.Rect.atOrigin(o)),c=D.default.convertPoint(l,{x:0,y:0}),d=Object.assign({},s.Point.subtract(a,c),{width:o.width,height:o.height});let u;I.hasAspectRatio(t)&&(u={aspectRatio:null}),e.updateNode(t,Object.assign({},u,t.updateForRect(d,i))),t.children.forEach(t=>{const n=e.getRect(t);n.x-=o.x,n.y-=o.y,e.updateNode(t,t.updateForRect(n,o))})})}function sizeToFitContentEnabled(e){return void 0===e.find(e=>!r.isShapeContainerNode(e)||0===e.children.length)}function makeMasterEnabled(e,t){if(1!==t.length)return!1;const n=t[0];return!!T.hasTemplate(n)&&(!T.isMaster(n)&&!n.originalid)}function visibilityEnabled(e,t){return void 0!==t.find(e=>h.hasVisibility(e))}e.canReplaceWith=function canReplaceWith(e){return!T.isMaster(e)&&!T.isReplicaChild(e)&&!r.isTextNode(e)&&!r.isShapeContainerNode(e)&&k.isPinnable(e)},e.replaceWith=function replaceWith(e,t,n){if(T.isMaster(n)){const t=e.tree.get(n.id);t?e.tree.hasNode(n)||(n=t):n=A.insertExternalMasterInDocument(e,n,o.componentLoader)}n=e.cloneNode(n),e.moveNode(n.id,null);const i=e.tree.getParent(t.id)||e.tree.root,r=i.children.indexOf(t);e.tree.removeNode(t),e.moveNode(n.id,i.id,r),e.updateNode(n.id,t.constraintValues()),e.setSelection([n.id])},e.canDuplicateNodes=function canDuplicateNodes(e){return e.filter(e=>!T.isReplicaChild(e)).length>0},e.duplicateNodes=function duplicateNodes(t,n,o){const a=t.tree,l=a.withoutDescendants(a.getNodes(n)),u=l.map(e=>a.getRect(e)),h=[],p=[];if(l.forEach((s,l)=>{if(T.isReplicaChild(s))return;const g=t.cloneNode(s);if(h.push(g.id),s.isMaster)i.triggerComponentDesignInstanceEvent({});else if(s.replicaInfo){const{master:e}=s.replicaInfo,t=e&&a.getNode(e);t&&T.isExternalMaster(t)||i.triggerComponentDesignInstanceEvent({})}if(o){const n=a.getParent(g.id);if(o.node){if(c.acceptsChild(t.tree,o.node,g)){const i=n&&E.isStackComponent(n)&&E.isStackComponent(o.node),r=n&&w.isFrameNode(n)&&w.isFrameNode(o.node);if(i||r)t.moveNode(g.id,o.node.id,o.insertionIndex);else if(k.isPinnable(g)){t.moveNode(g.id,o.node.id,o.insertionIndex);const e=a.getRect(o.node),i=g.updateForSize(u[l],e);n||(i.left=0,i.top=0),t.updateNode(g.id,i)}else e.convertNodeToNewParent(t,g,n,o.node,o.insertionIndex)}}else if(e.convertNodeToNewParent(t,g,n,o.node,o.insertionIndex),E.isStackComponent(n)){const e=u[l];t.updateNode(g.id,g.updateForSize(e,null))}}if(k.isPinnable(s)&&a.getParent(s.id)===r.NullID&&!o){const e=d.suggestedConstraintsForCopiedNode(a,s,n,p);g.set(e)}}),p.length){const e=s.Rect.merge(...p);t.canvasStore.scrollToCenter(s.Rect.center(e))}h.length>0&&t.setSelection(h)},e.deleteAction=function deleteAction(e,t){if(e.tool.deleteAction)e.tool.deleteAction();else if(t){const n=t.filter(e=>!T.isReplicaChild(e));e.deleteNodes(n.map(e=>e.id))}},e.canDelete=function canDelete(e,t){return e.tool.deleteAction?!!e.tool.canDelete&&e.tool.canDelete():!!t&&t.some(e=>!T.isReplicaChild(e))},e.sendForward=function sendForward(e,t){const n=e.tree,i=groupByParent(n.withoutDescendants(t));sendForwardEnabled(n,t,i)&&sendNodes(e,i,1)},e.sendBackward=function sendBackward(e,t){const n=e.tree,i=groupByParent(n.withoutDescendants(t));sendBackwardEnabled(n,t,i)&&sendNodes(e,i,-1)},e.sendBackwardEnabled=sendBackwardEnabled,e.sendForwardEnabled=sendForwardEnabled,e.addFrame=function addFrame(e,t){wrapSelectionWith(e,t,L.frame)},e.addStack=function addStack(e,t){wrapSelectionWith(e,t,L.stack)},e.wrappingEnabled=wrappingEnabled,e.clip=function clip(e,t){const n=!nodesAreClipping(e,t);t.forEach(t=>{u.hasClip(t)&&e.updateNode(t,{clip:n})})},e.clipEnabled=function clipEnabled(e,t){return void 0!==t.find(e=>u.hasClip(e))},e.clipTitle=function clipTitle(e,t){return nodesAreClipping(e,t)?"Show Overflow":"Hide Overflow"},e.nodesAreClipping=nodesAreClipping,e.sizeToFitContent=sizeToFitContent,e.sizeToFitContentEnabled=sizeToFitContentEnabled,e.makeMasterEnabled=makeMasterEnabled,e.makeMaster=function makeMaster(e,t){if(!makeMasterEnabled(e.tree,t))return;const n=t[0];e.updateNode(n.id,{isMaster:!0,replicaInfo:null,originalid:null})},e.canResetToMasterValues=function canResetToMasterValues(e,t){for(const n of t)if(n.originalid&&T.isReplicaOrReplicaChild(n)&&P.TemplateHelper.overrideKeys(e,[n]).length>0)return!0;return!1},e.resetToMasterValues=function resetToMasterValues(e,t){for(const n of t){if(!n.originalid)continue;const t=P.TemplateHelper.getReplicaForTemplateNode(e,n);t&&P.TemplateHelper.resetOverrides(e,t,n)}},e.canDetachFromMaster=function canDetachFromMaster(e){if(0===e.length)return!1;for(const t of e)if(T.isReplica(t))return!0;return!1},e.detachFromMaster=function detachFromMaster(e,t){t.filter(T.isReplica).forEach(t=>{t.walk(t=>t.set({replicaInfo:null,originalid:null},e.tree))})},e.visibility=function visibility(e,n){if(!visibilityEnabled(e.tree,n))return;const i=t(e.tree,n),o=n.filter(h.hasVisibility);e.updateNodesDirect(o,{visible:!i}),e.setHighlight(r.NullID)},e.visibilityEnabled=visibilityEnabled;const t=(e,t)=>{return void 0===t.find(e=>h.hasVisibility(e)&&!e.visible)};function lockEnabled(e,t){return void 0!==t.find(e=>p.hasLock(e))}function nodesAreLocked(e,t){return void 0===t.find(e=>p.hasLock(e)&&!e.locked)}function removeFrameEnabled(e,t){return 0!==t.length&&(!t.find(e=>!!e.originalid)&&-1===t.map(t=>{if(!w.isFrameNode(t)&&!_.codeComponentWithChildInsertion(t)||!t.children||0===t.children.length)return!1;const n=e.getParent(t.id);if(!n)return!0;for(const i of t.children)if(!c.acceptsChild(e,n,i))return!1;return!0}).indexOf(!1))}function convertNodeToNewParentUpdate(e,t,n,i){const o=e.getRect(t);let r=e.convertPointToCanvas(t,{x:o.width/2,y:o.height/2});i&&(r=e.convertPointToNode(i,r,!0));const a=Object.assign({},o,{x:r.x-o.width/2,y:r.y-o.height/2}),l=t.updateForRect(a,i?e.getRect(i):null);return _.codeComponentWithChildInsertion(i)||(l.widthType===s.DimensionType.FractionOfFreeSpace&&(l.widthType=s.DimensionType.FixedNumber,l.width=o.width),l.heightType===s.DimensionType.FractionOfFreeSpace&&(l.heightType=s.DimensionType.FixedNumber,l.height=o.height)),g.hasRotation(t)&&(l.rotation=t.rotation-function rotationDelta(e,t,n){let i=0,o=0;t&&(i=e.totalAncestorRotation(t));n&&(o=e.totalAncestorRotation(n));return Math.round(o-i)}(e,n,i)),i&&_.codeComponentWithChildInsertion(i)&&(l.top=null,l.left=null,l.bottom=null,l.right=null),l}function convertNodeToNewParent(e,t,n,i,o=-1){const r=e.tree,s=convertNodeToNewParentUpdate(r,t,n,i);e.moveNode(t.id,i?i.id:r.root.id,o),r.updateNode(t,s)}function allSelectableNodes(e,t){if(T.isHiddenMaster(e))return;if(p.hasLock(e)&&e.locked)return;t.push(e.id);const n=e.children;if(n)for(let i=0,o=n.length;i<o;i++)allSelectableNodes(n[i],t)}function groupByParent(e){const t={};return e.forEach(e=>{const n=e.parentid?e.parentid:r.InvalidID;let i=t[n];i||(i=[],t[n]=i),i.push(e)}),t}function sendNodes(e,t,n){const i=e.tree;for(const o in t){const s=o===r.InvalidID?i.root:i.get(o);if(!s)continue;const a=t[o],l=s.children;let c=!1;for(let t=0,i=l.length;t<i;t++){const r=1===n?i-t-1:t,s=l[r];a.indexOf(s)>=0?c&&e.moveNode(s.id,o,r+n):c=!0}}}function canSendNode(e,t,n){for(const i in t){const o=i===r.InvalidID?e.root:e.get(i);if(!o)continue;const s=t[i],a=o.children;let l=!1;for(let e=0,t=a.length;e<t;e++){const i=a[1===n?t-e-1:e];if(s.indexOf(i)>=0){if(l)return!0}else l=!0}}return!1}function flattenShape(e,t,n,i){const o=e.tree;let l;l=S.BasicShape.isBasicShape(t)?S.BasicShape.path(t):t.calculatedPaths();const d=y.convertPathToParent(t,l),u=y.convertPathToCanvas(o,t,l),h=o.newId(),p=a.default.boundingBox(d),g=y.copyShapeStyle(t);if("linear-gradient"===g.fillType&&g.fillLinearGradient&&(g.fillType="linear-gradient",g.fillLinearGradient=new M.LinearGradient(g.fillLinearGradient.merge({angle:g.fillLinearGradient.angle+t.rotation}))),1===d.length){const n=a.default.offset(d[0],s.Point.reverse(p));e.createPath(t.parentid,Object.assign({id:h},n,p,g))}else{const n=[],i=new r.BooleanShapeNode(Object.assign({id:h,parentid:t.parentid,pathBoolean:v.PathBooleanType.Join},p,g));n.push(i);for(const e of d){const t=a.default.boundingBox(e),i=Object.assign({},t,s.Point.subtract(t,p)),o=a.default.offset(e,s.Point.reverse(t)),l=new r.PathNode(Object.assign({parentid:h},i,o,g));n.push(l)}e.insertNodes(n)}const m=o.getParent(t.id);if(null!==m&&c.hasChildren(m)){const n=m.children.indexOf(t);e.moveNode(h,m.id,n)}return e.deleteNode(t.id),i||e.setSelection([h]),!0===n&&e.setPathTool(),[h,u]}function ungroup(t,n){if(0===n.length)return;const i=t.tree,o=i.sortVisually(b.getNodesForNodeIDsOrNodes(n,i)),r=i.withoutDescendants(o),s=[];r.forEach(n=>{const o=i.getParent(n.id);if(c.hasChildren(n)&&n.children.length>0){const r=i.getIndex(n);c.getChildren(n).forEach((a,l)=>{const c=o,d=c?c.id:null,u=e.convertNodeToNewParentUpdate(i,a,n,c);t.moveNode(a.id,d,r+l),t.updateNode(a.id,u),s.push(a.id)}),t.deleteNode(n.id)}}),t.setSelection(s)}function canMergeGraphics(e,t){const n=b.getNodesForNodeIDsOrNodes(t,e.tree);if(n.length<2)return!1;const i=n[0];return n.every(e=>r.isShapeContainerNode(e)&&e.parentid===i.parentid&&!e.originalid)}function canJoinInGroup(e,t){if(!e.isDefaultToolActive())return!1;const n=b.getNodesForNodeIDsOrNodes(t,e.tree);return 0!==n.length&&-1===n.map(e=>r.isVectorNode(e)&&!e.originalid).indexOf(!1)}e.visibilityTitle=function visibilityTitle(e,n){return t(e,n)?"Hide":"Show"},e.lock=function lock(e,t){if(!lockEnabled(e,t))return;const n=nodesAreLocked(e,t),i=t.filter(p.hasLock);e.updateNodes(i,{locked:!n})},e.lockEnabled=lockEnabled,e.lockTitle=function lockTitle(e,t){return nodesAreLocked(0,t)?"Unlock":"Lock"},e.removeFrameTitle=function removeFrameTitle(e){return`Remove ${e.length>0&&void 0===e.find(e=>!_.codeComponentWithChildInsertion(e))?"Stack":"Frame"}${e.length>1?"s":""}`},e.removeFrame=function removeFrame(e,t){removeFrameEnabled(e.tree,t)&&ungroup(e,t)},e.removeFrameEnabled=removeFrameEnabled,e.resetToIntrinsicSize=function resetToIntrinsicSize(e,t){t.forEach(t=>{const n=e.getParentSize(t);if(null!==t.intrinsicWidth&&null!==t.intrinsicHeight){const i={width:t.intrinsicWidth,height:t.intrinsicHeight};e.updateNode(t,t.updateForSize(i,n))}})},e.convertNodeToNewParentUpdate=convertNodeToNewParentUpdate,e.convertNodeToNewParent=convertNodeToNewParent,e.selectAll=function selectAll(e,t){const n=e.tree;let i=[];if(e.tool.selectAll)e.tool.selectAll();else{if(e.shapeModeActive){const e=t.map(e=>{const t=n.getNode(e);return t?n.getAncestorOfType(t,r.ShapeContainerNode,!0):r.NullID});new Set(e).forEach(e=>{if(!e)return;const t=n.getSubtreeNodes(e.id).filter(t=>!(p.hasLock(t)&&t.locked||t.id===e.id)).map(e=>e.id);i.push(...t)})}else{const e=t.map(e=>{const t=n.getGroundFrameAncestor(e,!1);return null!==t?t.id:r.NullID});if(1===new Set(e).size&&null!==e[0]){const t=e[0];i=n.getSubtreeNodes(t).filter(e=>!(p.hasLock(e)&&e.locked||e.id===t)).map(e=>e.id)}if(0===i.length){const e=n.root.children;for(let t=0,n=e.length;t<n;t++)allSelectableNodes(e[t],i)}}e.setSelection(i)}},e.selectAllSiblings=function selectAllSiblings(e,t){const n=e.tree,i=[];t.forEach(e=>{const t=n.getNode(e);if(!t)return;const o=n.getSiblings(t,!0).map(e=>e.id);i.push(...o)}),e.setSelection(Array.from(new Set(i)))},e.selectAllChildren=function selectAllChildren(e,t){const n=e.tree,i=[];t.forEach(e=>{const t=n.getNode(e);t&&i.push(...c.getChildren(t).map(e=>e.id))}),e.setSelection(Array.from(new Set(i)))},e.reversePathDirectionEnabled=function reversePathDirectionEnabled(e){if(1!==e.length)return!1;const t=e[0];return m.hasPath(t)&&!t.originalid},e.reversePathDirection=function reversePathDirection(e,t){const n=a.default.reverse(t.pathSegments);e.updateNode(t,{pathSegments:n})},e.flattenEnabled=function flattenEnabled(e){return 0!==e.length&&void 0===e.find(e=>!(!m.hasPath(e)&&f.hasShape(e)&&!r.isShapeGroupNode(e)&&!e.originalid))},e.flattenShapes=function flattenShapes(e,t,n,i){const o=t.map(t=>flattenShape(e,t,n,i)[0]);e.setSelection(o)},e.flattenShape=flattenShape,e.canUngroup=function canUngroup(e,t){const n=b.getNodesForNodeIDsOrNodes(t,e);return 0!==n.length&&-1===n.map(e=>r.isVectorNode(e)&&!e.originalid&&c.getChildren(e).length>0).indexOf(!1)},e.ungroup=ungroup,e.canMergeGraphics=canMergeGraphics,e.mergeGraphics=function mergeGraphics(e,t){if(!canMergeGraphics(e,t))return;const n=b.getNodesForNodeIDsOrNodes(t,e.tree),i=e.tree.sortVisually(n),o=i[0];i.slice(1).forEach(t=>{t.children.forEach(n=>{convertNodeToNewParent(e,n,t,o)}),e.tree.removeNode(t)}),sizeToFitContent(e.tree,[e.tree.current(o)])},e.canJoinInGroup=canJoinInGroup,e.joinInGroup=function joinInGroup(t,n){const i=t.tree;if(x(n.length>0,"No nodes"),!canJoinInGroup(t,n))return;const o=b.getNodesForNodeIDsOrNodes(n,i),s=i.sortVisually(i.withoutDescendants(o)),a=s.slice(-1)[0],l=i.getParent(a.id),c=l?l.id:r.NullID,d=i.getIndex(a),u=i.newId();t.createShapeGroup(c,{id:u}),t.moveNode(u,c,d),s.forEach(n=>{const o=e.convertNodeToNewParentUpdate(i,n,i.getParent(n.id),l);t.moveNode(n.id,u),t.updateNode(n.id,o)}),t.setSelection([u])},e.convertSVGToShape=function convertSVGToShape(e,t){if(t.originalid)return;const n=C.getPathOperator().importSvg(t.svg,{width:t.width,height:t.height},t);if(n){n.name=t.name||t.originalFilename,n.parentid=t.parentid;const i=e.cloneNode(n),o=null===t.parentid,r=o?"rgb(255,255,255)":"transparent";e.updateNode(i.id,Object.assign({},t.constraintValues(),{rotation:t.rotation,fillEnabled:o,fillColor:r}));const s=e.tree.getParent(t.id);if(null!==s&&c.hasChildren(s)){const n=s.children.indexOf(t);e.moveNode(i.id,s.id,n)}e.deleteNode(t.id)}},e.canUpdateMasterFromInstance=function canUpdateMasterFromInstance(e,t){if(t.length>1)return!1;const n=P.TemplateHelper.getReplicaForTemplateNode(e,t[0]);if(!n)return!1;const i=P.TemplateHelper.getMaster(e,n);if(T.isHiddenMaster(i))return!1;const o=n.replicaInfo.overrides;for(let r=0,s=t.length;r<s;r++){const e=t[r];if(e.originalid){const t=o[e.originalid];if(t&&Object.keys(t).length>0)return!0}}return!1},e.updateMasterFromInstance=function updateMasterFromInstance({tree:e},t){function updatedMasterProperties(e,t){for(const n of["id","update","cache","children","mutable","parentid","originalid","isMaster","replicaInfo"])delete e[n];if(t)for(const n of["top","right","bottom","left"])delete e[n];return e}function preservedReplicaProperties(e,t){let n;if(t)for(const i of["top","right","bottom","left"])void 0!==e[i]&&((n=n||{})[i]=e[i]);return n}const n=P.TemplateHelper.getReplicaForTemplateNode(e,t[0]);if(!n)return;const i=P.TemplateHelper.getMaster(e,n);if(T.isHiddenMaster(i))return;const o=Object.assign({},n.replicaInfo.overrides),r=Object.assign({},n.replicaInfo,{overrides:o});for(let s=0,a=t.length;s<a;s++){const n=t[s];if(!n.originalid)continue;const i=e.get(n.originalid),r=updatedMasterProperties(Object.assign({},n),T.isReplica(n));i.set(r);const a=preservedReplicaProperties(o[n.originalid],T.isReplica(n));a?o[n.originalid]=a:delete o[n.originalid]}n.asMutable().replicaInfo=r},e.getCodeComponentFile=function getCodeComponentFile(e,t){if(1!==t.length)return null;const n=t[0];if(!E.isCodeComponentNode(n))return null;const i=o.componentLoader.componentForIdentifier(n.codeComponentIdentifier);return!i||i.depth>0?null:i.file},e.editCode=function editCode(t,n){let i=e.getCodeComponentFile(t,n);i&&(i.startsWith("./")&&(i=i.slice(2)),t.persistedUserDefaults.useInternalEditor?(t.toolStore.setLeftPanelContent(F.LeftPanelContent.CodeEditor),t.toolStore.setCurrentEditingFile(i),t.toolStore.putEditorCommand({name:i,useExisting:!1})):N.getIpcRenderer().send(R.OpenRelativePathExternally,`code/${i}`))},e.canGoToMaster=function canGoToMaster(e,t){const i=n(e,t);return i?T.isExternalMaster(i)?0:T.isInternalHiddenMaster(i)?2:1:0};const n=(e,t)=>{let n=null;for(let o=0,r=t.length;o<r;o++){const i=t[o],r=P.TemplateHelper.getReplicaForTemplateNode(e,i);if(r)if(n){if(n!==r.originalid)return null}else n=r.originalid}if(!n)return null;const i=e.getNode(n);return i&&T.isMaster(i)?i:null};function showNodeOnCanvas(e,t){T.isMaster(t)&&P.TemplateHelper.showMaster(e.tree,t);const n=e.tree.convertFrameToCanvas(t);e.canvasStore.scrollToCenter(s.Rect.center(n))}e.goToMaster=function goToMaster(e,t){const i=n(e.tree,t);i&&(P.TemplateHelper.showMaster(e.tree,i),e.setSelection((e=>{const t=[];for(let n=0,i=e.length;n<i;n++){const i=e[n];i.originalid&&t.push(i.originalid)}return t})(t)),showNodeOnCanvas(e,i))},e.showNodeOnCanvas=showNodeOnCanvas,e.createCodeComponent=function createCodeComponent(e){e.setLeftPanelContent(F.LeftPanelContent.CodeEditor),e.setCodeFileCreationHeaderIsExpanded(!0)}}(t.ContextAction||(t.ContextAction={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(170);var o;!function(e){let t;!function(e){e[e.escape=27]="escape"}(t=e.Key||(e.Key={})),e.isKey=(e,t)=>e.keyCode===t,e.isLeftMouseClick=e=>{const t=i.isWindows()?e.metaKey:e.ctrlKey;return(0===e.button||1==(1&e.buttons))&&!t},e.isMiddleMouseClick=e=>1===e.button||4==(4&e.buttons),e.isLeftMouseButtonDown=e=>"which"in e?1===e.which:1===e.buttons}(o||(o={})),t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.traitFilter=(e,t)=>{const n=[];return e.forEach(e=>{t(e)&&n.push(e)}),n}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(1);t.cursorImage=(e,t,n=12)=>{const o=i.isFiniteNumber(n)?n:n.x,r=i.isFiniteNumber(n)?n:n.y;return t?`-webkit-image-set(url(images/cursors/${e}.png) 1x, url(images/cursors/${e}@2x.png) 2x) ${o} ${r}, default`:`-webkit-image-set(url(images/cursors/${e}.png) 1x) ${o} ${r}, default`};const o=["resize-vertical","resize-diagonal-right","resize-horizontal","resize-diagonal-left"];t.rotationCursors=["rotate-top-center","rotate-top-right","rotate-mid-right","rotate-bottom-right","rotate-bottom-center","rotate-bottom-left","rotate-mid-left","rotate-top-left"];const r=(e,t,n)=>{const o=n[1],r=n[4];let s=i.Point.angle(r,o);(s+=202.5)<360&&(s+=360);const a=Math.floor(s/45);if(0===t){if(0===e)return a+7;if(1===e)return a+1}else if(.5===t){if(0===e)return a+6;if(1===e)return a+2}else{if(0===e)return a+5;if(.5===e)return a+4;if(1===e)return a+3}return a},s={x:10,y:1};t.pathExtensionCursor=function pathExtensionCursor(){return t.cursorImage("cursor-vector",!0,s)},t.pathCurveSplitCursor=function pathCurveSplitCursor(){return t.cursorImage("cursor-vector-add",!0,s)},t.pathClosingCursor=function pathClosingCursor(){return t.cursorImage("cursor-vector-point",!0,s)},t.disconnectCursor=function disconnectCursor(){return t.cursorImage("cursor-disconnect",!0,10)},t.addCursor=function addCursor(){return t.cursorImage("cursor-add",!0,10)},t.removeCursor=function removeCursor(){return t.cursorImage("cursor-remove",!0,10)},t.swapCursor=function swapCursor(){return t.cursorImage("cursor-swap",!0,{x:3,y:3})},t.resizing=(e,n)=>{const{fx:i,fy:s}=e,a=r(i,s,n),l=o[a%4];return t.cursorImage(l,!0)},t.rotating=(e,n)=>{const{fx:i,fy:o}=e,s=r(i,o,n),a=t.rotationCursors[s%8];return t.cursorImage(a,!0)},t.gradientRotate=e=>{(e+=202.5)<360&&(e+=360);const n=Math.floor(e/45),i=t.rotationCursors[n%8];return t.cursorImage(i,!0)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(3),r=n(76),s=n(733);var a;!function(e){e[e.Default=0]="Default",e[e.Borderless=1]="Borderless"}(a=t.SegmentedControlType||(t.SegmentedControlType={})),t.SegmentedControl=i.memo(({selectedIndex:e,icons:t,overrideSecondIcon:n,titles:o,style:h,enabled:p,enabledSegments:g,iconExtension:m,iconSize:f,onSelect:y,metricIds:v,type:b})=>{const k=!!b&&b===a.Borderless,S=i.useCallback(e=>{const t=e.target,n=Number(t.getAttribute("data-index"));y(n)},[y]),C=i.useContext(r.MetricsViewContext),x=[];o.forEach((r,a)=>{const l=e===a,h=t?t[a]:null,y=v?v[a]:void 0;let b=void 0,w=void 0;h?b=r:w=r;const T=g?g[a]:p,P=i.createElement("a",{"data-metric-id":y,"data-metric-view":y?C.view:void 0,key:a,"data-index":a,title:b,onClick:S,className:k?s.borderlessSegmentedControlItem:s.segmentedControlItem,style:u(l,a,h,n,T,m,f)},w);x.push(P),a<o.length-1&&!k&&x.push(i.createElement("div",{key:a+"divider",style:p?c:d}))}),!1===p&&(h=Object.assign({},h,{border:l}));const w=i.useRef(null);return i.createElement("div",{className:k?s.borderlessSegmentedControl:s.segmentedControl,ref:w,style:h,onMouseDown:stopPopagation},x)});const l=`1px solid ${o.theme.propertyPanelInputBorderInactive}`,c={height:12,width:1,marginTop:5,backgroundColor:o.theme.propertyPanelSegmentDivider},d=Object.assign({},c,{backgroundColor:o.theme.propertyPanelSegmentDivider});function stopPopagation(e){e.stopPropagation()}const u=(e,t,n,i,r,s,a)=>{const l=!1===r;return{color:e?o.theme.tint:o.theme.propertyPanelButtonTextInactive,pointerEvents:l?"none":void 0,backgroundImage:void 0!==i&&1===t?o.theme.backgroundImage(i,s):n?o.theme.backgroundImage(`${n}${e?"-active":""}`,s):void 0,backgroundRepeat:"no-repeat",backgroundPosition:"center center",backgroundSize:a,opacity:l?.2:1}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(23),o=n(7),r=n(107),s=n(7),a=n(36),l=n(110),c=n(590);function revive(e){if(e){const t=e.__class;if("StyledTextDraft"===t)return new g.StyledTextDraft(void 0,e);t!==k.LinearGradient.name&&t!==S.RadialGradient.name||(e=d.gradientMigration(e))}return o.fromJS(e,immutableReviver)}function reviveGuidesInfo(e){return s.Set(e)}function reviveReplicaInfo(e){if(!e)return e;const{overrides:t}=e,n={};for(const i in t){const e=t[i],o=n[i]={};for(const t in e)o[t]="codeComponentProps"===t?e[t]:revive(e[t])}return Object.assign({},e,{overrides:n})}function reviveTokens(e,t){t=t||Object.keys(e);const n=[];for(const i of t){const t=e[i],o=canvasNodeFromValue(t,null,[]);o?n.push([o.id,o]):r.warn(`Could not revive token: ${t.name}`)}return s.OrderedMap(n)}function reviveCodeComponentProps(e){const t=Object.keys(e);for(const n of t){const t=e[n];if("object"==typeof t&&null!==t&&"__class"in t){const i=p.classMap[t.__class];i&&(e[n]=new i(t))}}return e}function canvasNodeFromValue(e,t,n){if(!e)return null;const i=e.id;if(!i)return n.push("node missing id"),null;const o=e.__class;if(!o)return n.push(`${i}: node missing __class`),null;const r=p.classMap[o];if(!r)return d.classMigrations[o]?canvasNodeFromValue(d.classMigrations[o](e),t,n):(n.push(`${i}: unknown node class ${o}`),null);e.parentid&&e.parentid!==t&&n.push(`${i}: parentid is different from parent. ${e.parentid} !== ${t}`);const s=new r;for(const a in e)"children"!==a&&(a.startsWith("_")||d.ignoredMigrations[o]&&d.ignoredMigrations[o][a]||(d.migrations[a]?"codeComponentProps"===a?d.migrations.codeComponentProps(s,e[a],reviveCodeComponentProps):d.migrations[a](s,e[a],revive):"guidesX"===a||"guidesY"===a?s[a]=reviveGuidesInfo(e[a]):"replicaInfo"===a?s.replicaInfo=reviveReplicaInfo(e[a]):"tokens"===a?s.tokens=reviveTokens(e[a],e.tokensIndex):"tokensIndex"===a||(a in s?s[a]=revive(e[a]):n.push(`${i} Not setting key '${a}' in object '${o}', value: ${e[a]}`))));if("parentid"in s&&(s.parentid=t),"mutable"in s&&(s.mutable=!0),s.originalid)return s;if(e.children){let t=e.children.map(e=>{return canvasNodeFromValue(e,i,n)}).filter(e=>!!e);if(v.isFrameNode(s)&&t.length>0&&t.every(m.isVectorNode)){const e=new f.default({top:0,left:0,width:s.width,height:s.height,parentid:s.id,children:t,fillEnabled:!1});t.forEach(t=>t.parentid=e.id),t=[e]}else{const e=[];t.forEach(t=>{if(m.isVectorNode(s)||f.isShapeContainerNode(s)){if(!m.isVectorNode(t))return;return void e.push(t)}if(!m.isVectorNode(t))return void e.push(t);const o={minX:1/0,maxX:-1/0,minY:1/0,maxY:-1/0};if(y.collectBoundingBox(t,o,!1),!y.isValidBoundingBox(o))return void n.push(`${i}: could not wrap shape in container because of invalid bounding box`);const r=y.getRectContainingBoundingBox(o),a=new f.default({top:r.y,left:r.x,width:r.width,height:r.height,parentid:s.id,children:[t],fillEnabled:b.isRootNode(s)});t.parentid=a.id,t.x=t.x-o.minX,t.y=t.y-o.minY,e.push(a)}),t=e}s.children=t}return s}function immutableReviver(e,t){const n=t.get("__class");if(!n)return o.Iterable.isIndexed(t)?s.List(t):t;const i=p.classMap[n];return i?new i(t):t}t.default=class CanvasNode extends a.MutableNode{constructor(e){super({id:e},new c.CanvasNodeCache),this.visible=!1,this.name=null}static fromJS(e,t){return canvasNodeFromValue(e,l.NullID,t||[])}set(e,t){if(this.originalid){this.cache.templateProperties||(this.cache.templateProperties={});const t=Object.keys(e);for(const n of t){const t=e[n];this[n]!==t&&(this.cache.templateProperties[n]=t)}}const n=this.asMutable(t);return Object.assign(n,e),n}setIgnoringReplica(e,t){const n=this.asMutable(t);return Object.assign(n,e),n}preCommit(e){if(i(this===this.cache.future,"Pre-commit node must be its future"),h.isReplica(this)&&u.TemplateHelper.replicaWithChanges(e,this),h.isMaster(this)){const t=this.cache.replicaInstances;if(t)for(let n=0,o=t.length;n<o;n++){const o=e.getFuture(t[n]);o&&o.replicaInfo&&(i(o.replicaInfo.master===this.id,"Replica does not have expected master"),i(o.originalid,"Replica does not have original id"),o.asMutable(e))}}const t=this.cache.links;t&&t.forEach(t=>{const n=e.getFuture(t);n&&n.asMutable()})}rect(e=null){return{x:0,y:0,width:0,height:0}}updateForRect(e,t){return{x:0,y:0,width:0,height:0}}updateForSize(e,t){return{left:0,top:0,width:0,height:0}}transformMatrix(e,t){return new WebKitCSSMatrix}isEmptyGroup(){return!1}getProps(){return{key:this.id,id:l.stringFromNodeID(this.id),willChangeTransform:!1}}canvasMatrix(){const e=this.cache.matrix;if(!e)throw Error("shape matrix requested but does not exist");return e}providesFreeSpace(){return!1}hasAutoSize(){return!1}isSelected(){return this.cache.selected}__unsafeIsGroundNode(){return!!this.cache.latest&&this.tree().isGroundNode(this)}},t.revive=revive,t.reviveGuidesInfo=reviveGuidesInfo,t.reviveReplicaInfo=reviveReplicaInfo,t.reviveTokens=reviveTokens,t.canvasNodeFromValue=canvasNodeFromValue;const d=n(591),u=n(56),h=n(12),p=n(199),g=n(37),m=n(164),f=n(136),y=n(195),v=n(92),b=n(85),k=n(118),S=n(91)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(111),o="fillType",r="fillEnabled",s="supportsGradient";function hasFill(e){return o in e&&i.stylableNode(e)}t.hasFill=hasFill,t.hasOptionalFill=function hasOptionalFill(e){return r in e&&i.stylableNode(e)},t.supportsGradient=function supportsGradient(e){return!!i.stylableNode(e)&&(function hasSupportsGradient(e){return s in e&&i.stylableNode(e)}(e)?e.supportsGradient():hasFill(e))},t.hasActiveGradientFill=function hasActiveGradientFill(e){return"linear-gradient"===e.fillType||"radial-gradient"===e.fillType}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sizeDefaults={width:100,height:100},t.pathSizeDefaults={width:1,height:1};const i="width";t.hasSize=function hasSize(e){return i in e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(187),o=n(1),r="--token-";function tokenToCSSCustomProperty(e){return`${r}${e.id}`}function parseCSSVariable(e){const t=/var\((.+)\)/.exec(e);if(!t)return{};const n=t[1],[i,...o]=n.split(",");return{customProperty:i.trim(),fallback:o.join(",").trim()||void 0}}t.tokenToCSSCustomProperty=tokenToCSSCustomProperty,t.tokenToCSSVariable=function tokenToCSSVariable(e,t={}){const n=o.Color.isColor(e.value)?o.Color.toRgbString(o.Color(e.value)):e.value,i=`var(${tokenToCSSCustomProperty(e)}, ${n})`;return!0===t.excludeMetadata?i:`${i} ${function tokenMetadata(e,t){const n={name:e};return t&&t!==o.localPackageFallbackIdentifier&&(n.packageIdentifier=t),`/* ${JSON.stringify(n)} */`}(e.name,t.packageIdentifier)}`},t.tokenIdFromCSSVariable=function tokenIdFromCSSVariable(e){const{customProperty:t}=parseCSSVariable(e);return t?t.slice(r.length):null},t.fallbackValueFromCSSVariable=function fallbackValueFromCSSVariable(e){return parseCSSVariable(e).fallback||null},t.isTokenCSSVariable=function isTokenCSSVariable(e){return"string"==typeof e&&e.trim().startsWith(`var(${r}`)};t.TokenNode=class TokenNode{constructor(e){this.name="",this.value="",this.id=e||i()}toJS(){const e=Object.assign({},this);for(const t in e){const n=e[t];void 0===n&&delete e[t],(n&&n.toJS)instanceof Function&&(e[t]=n.toJS())}return e.__class=this.constructor.name,e}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(3),r=n(76);t.Icon=i.memo(e=>{const{name:t,active:n,width:s,height:a,title:l,style:c,onClick:d,onMouseDown:u,className:h,containsActive:p}=e,g=i.useContext(r.MetricsViewContext),m=`${2*s}px ${2*a}px`,f=Object.assign({backgroundImage:!1!==p?`${o.theme.backgroundImage(`icon-${t}`)}, ${o.theme.backgroundImage(`icon-${t}-active`)}`:`${o.theme.backgroundImage(`icon-${t}`)}`,backgroundPosition:n?`${m}, center center`:`center center, ${m}`,backgroundRepeat:"no-repeat, no-repeat",overflow:"hidden",width:s,height:a},c);return i.createElement("div",{className:h,title:l,style:f,onClick:d,onMouseDown:u,"data-metric-id":t,"data-metric-view":g.view})})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(183),r=n(96);function isString(e){return"string"==typeof e}function constraintsEnabled(e){const{_constraints:t}=e;return!!t&&(!function containsInvalidStringValues(e){const{left:t,right:n,top:i,bottom:o,center:r}=e;return!![n,o].some(isString)||!(!isString(t)||r&&"y"!==r)||!(!isString(i)||r&&"x"!==r)}(e)&&t.enabled)}function sizeFromFiniteNumberProps(e){const{size:t}=e;let{width:n,height:i}=e;return r.isFiniteNumber(t)&&(void 0===n&&(n=t),void 0===i&&(i=t)),r.isFiniteNumber(n)&&r.isFiniteNumber(i)?{width:n,height:i}:null}function calculateRect(e,t,n=!0){if(!constraintsEnabled(e)||t===s.Disabled)return function rectFromFiniteNumberProps(e){const t=sizeFromFiniteNumberProps(e);if(null===t)return null;const{left:n,top:i}=e;return r.isFiniteNumber(n)&&r.isFiniteNumber(i)?Object.assign({x:n,y:i},t):null}(e);const i=getConstraintValues(e);return o.ConstraintValues.toRect(i,deprecatedParentSize(t),null,n)}function getConstraintValues(e){const{left:t,right:n,top:i,bottom:s,center:a,_constraints:l,size:c}=e;let{width:d,height:u}=e;void 0===d&&(d=c),void 0===u&&(u=c);const{aspectRatio:h,autoSize:p}=l,g=o.ConstraintMask.quickfix({left:r.isFiniteNumber(t),right:r.isFiniteNumber(n),top:r.isFiniteNumber(i),bottom:r.isFiniteNumber(s),widthType:o.valueToDimensionType(d),heightType:o.valueToDimensionType(u),aspectRatio:h||null,fixedSize:!0===p});let m=null,f=null,y=o.DimensionType.FixedNumber,v=o.DimensionType.FixedNumber;if(g.widthType!==o.DimensionType.FixedNumber&&"string"==typeof d){const e=parseFloat(d);d.endsWith("fr")?(y=o.DimensionType.FractionOfFreeSpace,m=e):"auto"===d?y=o.DimensionType.Auto:(y=o.DimensionType.Percentage,m=e/100)}else void 0!==d&&"string"!=typeof d&&(m=d);if(g.heightType!==o.DimensionType.FixedNumber&&"string"==typeof u){const e=parseFloat(u);u.endsWith("fr")?(v=o.DimensionType.FractionOfFreeSpace,f=e):"auto"===u?v=o.DimensionType.Auto:(v=o.DimensionType.Percentage,f=parseFloat(u)/100)}else void 0!==u&&"string"!=typeof u&&(f=u);let b=.5,k=.5;return!0!==a&&"x"!==a||(g.left=!1,"string"==typeof t&&(b=parseFloat(t)/100)),!0!==a&&"y"!==a||(g.top=!1,"string"==typeof i&&(k=parseFloat(i)/100)),{left:g.left?t:null,right:g.right?n:null,top:g.top?i:null,bottom:g.bottom?s:null,widthType:y,heightType:v,width:m,height:f,aspectRatio:g.aspectRatio||null,centerAnchorX:b,centerAnchorY:k}}var s;function deprecatedParentSize(e){return e===s.Unknown||e===s.Disabled?null:e}function useParentSize(){return i.useContext(t.ConstraintsContext).size}function isSize(e){return"object"==typeof e}t.constraintsEnabled=constraintsEnabled,t.calculateSize=function calculateSize(e,t){if(!constraintsEnabled(e)||t===s.Disabled)return sizeFromFiniteNumberProps(e);const n=getConstraintValues(e),i=o.ConstraintValues.toRect(n,deprecatedParentSize(t),null,!0);return{width:i.width,height:i.height}},t.calculateRect=calculateRect,function(e){e[e.Unknown=0]="Unknown",e[e.Disabled=1]="Disabled"}(s=t.ParentSizeState||(t.ParentSizeState={})),t.ConstraintsContext=i.createContext({size:s.Unknown}),t.deprecatedParentSize=deprecatedParentSize,t.useParentSize=useParentSize,t.isSize=isSize,t.ProvideParentSize=e=>{const n=useParentSize(),{parentSize:o,children:r}=e;if(n===s.Disabled)return r?i.createElement(i.Fragment,null,r):null;const a=isSize(o)?[o.width,o.height]:[o,-1],l=i.useMemo(()=>({size:o}),a);return i.createElement(t.ConstraintsContext.Provider,{value:l},r)},t.ConsumeParentSize=t.ConstraintsContext.Consumer,t.useProvideParentSize=function useProvideParentSize(e,n){return i.createElement(t.ProvideParentSize,{parentSize:n},e)},t.useConstraints=function useConstraints(e){return calculateRect(e,useParentSize())}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.visibilityDefaults={visible:!0};const i="visible";t.hasVisibility=function hasVisibility(e){return i in e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.radiusDefaults={radius:0},t.relativeRadiusDefaults=Object.assign({},t.radiusDefaults,{radiusIsRelative:!1});const i=n(111),o="radius";function withRadius(e){return o in e&&i.stylableNode(e)}function withRelativeRadius(e){return"radiusIsRelative"in e&&i.stylableNode(e)}t.withRadius=withRadius,t.withRelativeRadius=withRelativeRadius,t.reduceRadius=function reduceRadius(e,t){if(!withRadius(e))return;let n=e.radius;withRelativeRadius(e)&&e.radiusIsRelative&&(n=`${e.radius}%`),void 0===t.radius?t.radius=n:null!==t.radius&&t.radius!==n&&(t.radius=null)}},function(e,t,n){"use strict";var i=this&&this.__rest||function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(i=Object.getOwnPropertySymbols(e);o<i.length;o++)t.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(e,i[o])&&(n[i[o]]=e[i[o]])}return n};Object.defineProperty(t,"__esModule",{value:!0});const o=n(23),r=n(12),s=n(34),a=n(87),l=n(37),c=Object.prototype.hasOwnProperty;function sanitizeOverride(e){if(!e)return e;if(!c.call(e,"originalid"))return e;const{originalid:t}=e;return i(e,["originalid"])}function updateNodeWithMaster(e,t,n){const i={id:(e=e.asMutable()).id,cache:e.cache,mutable:!0,update:e.update+1,parentid:e.parentid,originalid:e.originalid,isMaster:!1,isExternalMaster:null,children:e.children};Object.assign(e,t,i,n)}function rebuildChildren(e,t,n,i,r,s){if(i)return i.map(i=>{const a=function rebuildTemplate(e,t,n,i,r,s){const a=function mixID(e,t){return e+t}(t,i.id);i.cache.future&&(i=i.cache.future);let l=e.get(a);if(l){if(o(l.originalid===i.id,"`templateid` must match masters `id`"),!i.mutable)return l.walk(e=>{e!==l&&s.delete(e.id)}),l;const a={id:(l=l.asMutable()).id,cache:l.cache,mutable:!0,update:l.update+1,parentid:n,originalid:l.originalid,isMaster:!1,isExternalMaster:null,replicaInfo:null,children:rebuildChildren(e,t,l.id,i.children,r,s)};return Object.assign(l,i,a,sanitizeOverride(r[i.id]))}return i.clone(Object.assign({id:a,parentid:n,originalid:i.id,replicaInfo:null,isMaster:!1,children:rebuildChildren(e,t,a,i.children,r,s)},sanitizeOverride(r[i.id])))}(e,t,n,i,r,s);return s.has(a.id)?s.delete(a.id):s.has(n)&&e.unsafeInsertNode(a,n),a})}t.updateNodeWithMaster=updateNodeWithMaster,function(e){function registerInMaster(e,t){o(e.id===t.replicaInfo.master,"Replica master should match master id"),e.cache.replicaInstances||(e.cache.replicaInstances=[]),o(e.cache.replicaInstances.indexOf(t.id)<0,"Replica id should be in master cache"),e.cache.replicaInstances.push(t.id)}function getMaster(e,t){return e.get(t.replicaInfo.master)}function withChanges(e,t,n){const i=!!t.cache.future,r=!!n.cache.future;i&&(o(t===t.cache.future),updateOverrides(t)),r&&(o(n.mutable,"Master must be mutable"),o(n===n.cache.future),updateFromMaster(e,t,n))}function updateFromMaster(e,t,n){let i=t.replicaInfo,o=i.overrides;t=t.asMutable();const r=new Set;t.walk(t=>{if(r.add(t.id),t instanceof a.default){const n=o[t.originalid];if(n&&n.styledText){const n=e.getCurrentOrFuture(t.originalid);if(!n)return;const i=n.cache.future;if(!i)return;o=maybePatchText(n,i,t,o)}}}),i.overrides!==o&&(i=Object.assign({},i,{overrides:o}));const s={id:t.id,cache:t.cache,mutable:!0,update:t.update+1,parentid:t.parentid,originalid:t.originalid,isMaster:!1,isExternalMaster:null,replicaInfo:i,children:rebuildChildren(e,t.id,t.id,n.children,o,r)};r.delete(t.id),r.forEach(t=>e.unsafeRemoveId(t)),Object.assign(t,n,s,sanitizeOverride(o[t.originalid]))}function updateOverrides(e){o(e.mutable,"Replica must be mutable"),o(e.originalid,"Replica must have original id");let t=null;e.walk(n=>{const i=n.mutable?n:n.cache.future;if(!i)return;const r=n.originalid;o(r,"Original id must not be empty");const s=i.cache.templateProperties;if(s){if(t||(t=Object.assign({},e.replicaInfo.overrides),e.replicaInfo={master:e.replicaInfo.master,overrides:t}),s.restore)return s.overrides?t[r]=s.overrides:delete t[r],void(i.cache.templateProperties=null);s.pathSegments&&(s.x=n.x,s.y=n.y,s.width=n.width,s.height=n.height),t[r]=Object.assign({},sanitizeOverride(t[r]),s),i.cache.templateProperties=null}})}e.create=function create(e,t,n={},i=e.newId()){if(o(t.isMaster,"Node is not a master node"),s.isPinnable(t)){const e=sanitizeOverride(n[t.id])||{},{top:i,left:o,right:r,bottom:s,centerAnchorX:a,centerAnchorY:l}=t;n[t.id]=Object.assign({top:i,left:o,right:r,bottom:s,centerAnchorX:a,centerAnchorY:l},e)}const r=t.clone(Object.assign({id:i,originalid:t.id,isMaster:!1,isExternalMaster:null,replicaInfo:{master:t.id,overrides:n},children:rebuildChildren(e,i,i,t.children,n,new Set)},sanitizeOverride(n[t.id])));return t.cache.latest&&registerInMaster(t,r),o(r.id===i,"Replica must be owned by the tree"),r.walk(e=>o(e.originalid,"Node must have a original id")),r},e.treeDidLoad=function treeDidLoad(e){const t=new Set;return function nodeDidLoad(e,t,n){t.walkWithPredicate(t=>{if(n.has(t.id))return!1;if(n.add(t.id),!t.replicaInfo)return!0;const i=getMaster(e,t);return i&&(nodeDidLoad(e,i,n),i.asMutable(e),registerInMaster(i,t)),!0})}(e,e.root,t),e.commit()},e.registerInMaster=registerInMaster,e.getMaster=getMaster,e.replicaWithChanges=function replicaWithChanges(e,t){const n=getMaster(e,t);n&&withChanges(e,t,n)},e.withChanges=withChanges,e.updateFromMaster=updateFromMaster,e.updateFromOverrides=function updateFromOverrides(e,t,n){const i=t.replicaInfo.overrides,o=n.replicaInfo.overrides;t.walk(t=>{const n=t.originalid,r=i[n];if(r){for(const[e,i]of Object.entries(r))if(t[e]!==i){t.setIgnoringReplica(r);break}}else if(o[n]){const i=e.get(n);i&&updateNodeWithMaster(t,i,{})}})},e.updateOverrides=updateOverrides,e.resetOverrides=function resetOverrides(e,t,n){const i=e.get(n.originalid),o=Object.assign({},t.replicaInfo.overrides);let r={};if(t.id===n.id){const e=o[n.originalid];r={left:e.left,top:e.top,right:e.right,bottom:e.bottom,name:n.name},o[n.originalid]=r}else n.name?(r={name:n.name},o[n.originalid]=r):delete o[n.originalid];const s=t.replicaInfo.master;updateNodeWithMaster(n,i,r),(t=t.asMutable()).replicaInfo={master:s,overrides:o}},e.resetOverridesByProperty=function resetOverridesByProperty(e,t,n,i){const o=e.get(n.originalid),r=Object.assign({},t.replicaInfo.overrides),s=Object.assign({},r[n.originalid]);i.forEach(e=>{delete s[e]}),r[n.originalid]=s;const a=t.replicaInfo.master;updateNodeWithMaster(n,o,s),(t=t.asMutable()).replicaInfo={master:a,overrides:r}};const t=["name"];function shouldIgnorePosition(t,n){if(!r.isReplica(n))return!1;const i=e.getMaster(t,n),o=i&&null===t.getParent(i.id),s=null===t.getParent(n.id),a=t.getParent(n.id)===t.getParent(n.originalid);return o||s||a}function isInMasterOfReplica(e,t,n){if(!t)return!1;if(!r.isReplica(n))return function isAnyChildInMasterOfReplica(e,t,n){let i=!1;return n.walk(n=>{!i&&r.isReplica(n)&&(i=isInMasterOfReplica(e,t,n))}),i}(e,t,n);for(;t;){if(r.isMaster(t)&&isMasterOfReplica(e,t,n))return!0;t=e.get(t.parentid)}return!1}function isMasterOfReplica(e,t,n){if(n.replicaInfo.master===t.id)return!0;const i=t.cache.replicaInstances;if(!i)return!1;for(let o=0,r=i.length;o<r;o++){const t=i[o];if(isInMasterOfReplica(e,e.get(t),n))return!0}return!1}function maybePatchText(e,t,n,i){if(!n.originalid)return i;if(!(n.styledText instanceof l.StyledTextDraft))return i;const o=e.styledText,r=t.styledText;if(o!==r){const t=n.styledText,s=l.StyledTextDraft.patch(o,r,t);s!==t&&((i=Object.assign({},i))[e.id]=Object.assign({},sanitizeOverride(i[e.id]),{styledText:s}))}return i}e.positionKeysToIgnore=["bottom","top","left","right","centerAnchorX","centerAnchorY"],e.shouldIgnorePosition=shouldIgnorePosition,e.overrideKeys=function overrideKeys(n,i){const o=[];for(let r=0,s=i.length;r<s;r++){const s=i[r],a=e.getReplicaForTemplateNode(n,s);if(!s.originalid||!a||!a.replicaInfo)continue;const l=sanitizeOverride(a.replicaInfo.overrides[s.originalid]);if(!l)continue;const c=shouldIgnorePosition(n,s),d=Object.keys(l);for(const n of d)c&&-1!==e.positionKeysToIgnore.indexOf(n)||-1===t.indexOf(n)&&-1===o.indexOf(n)&&o.push(n)}return o},e.isInMasterOfReplica=isInMasterOfReplica,e.getReplicaForTemplateNode=function getReplicaForTemplateNode(e,t){if(!t||!t.originalid)return null;let n=t;for(;n&&!r.isReplica(n);)n=e.get(n.parentid);return n},e.hasReplicas=function hasReplicas(e,t){const n=t.cache.replicaInstances;if(!n)return!1;for(let i=0,o=n.length;i<o;i++){const t=n[i];if(e.getFuture(t))return!0}return!1},e.hideMaster=function hideMaster(e,t){t.isExternalMaster||t.set({isExternalMaster:r.HIDDEN_MASTER},e)},e.showMaster=function showMaster(e,t){t.isExternalMaster===r.HIDDEN_MASTER&&t.set({isExternalMaster:null},e)},e.maybePatchText=maybePatchText}(t.TemplateHelper||(t.TemplateHelper={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(7),o=n(1);t.GradientColorStopRecord=i.Record({value:"black",position:0});class GradientColorStop extends t.GradientColorStopRecord{toJS(){const e=super.toJS();return e.__class=this.constructor.name,e}toJSON(){return this.toJS()}}t.GradientColorStop=GradientColorStop,t.isColorStops=function isColorStops(e){return function isList(e){return i.List.isList(e)}(e)&&e.every(e=>e instanceof GradientColorStop)},t.equalColorStops=function equalColorStops(e,t){return e.count()===t.count()&&e.every((e,n)=>{const i=t.get(n);return(e.value===i.value||o.ConvertColor.equals(e.value,i.value))&&e.position===i.position})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.Highlight=0]="Highlight",e[e.DirectSelect=1]="DirectSelect",e[e.Select=2]="Select",e[e.Pan=3]="Pan",e[e.Zoom=4]="Zoom",e[e.ZoomSelect=5]="ZoomSelect",e[e.Move=6]="Move",e[e.Resize=7]="Resize",e[e.Rotate=8]="Rotate",e[e.LineAnchorMove=9]="LineAnchorMove",e[e.CreateFrame=10]="CreateFrame",e[e.CreateRoundedFrame=11]="CreateRoundedFrame",e[e.CreateShapeContainer=12]="CreateShapeContainer",e[e.CreateText=13]="CreateText",e[e.CreateOvalShape=14]="CreateOvalShape",e[e.CreateRectangleShape=15]="CreateRectangleShape",e[e.CreatePolygonShape=16]="CreatePolygonShape",e[e.CreateStarShape=17]="CreateStarShape",e[e.CreateStackComponent=18]="CreateStackComponent",e[e.CreateScrollComponent=19]="CreateScrollComponent",e[e.CreatePageComponent=20]="CreatePageComponent",e[e.TextEdit=21]="TextEdit",e[e.Path=22]="Path",e[e.SampleColor=23]="SampleColor",e[e.Radius=24]="Radius",e[e.Gradient=25]="Gradient",e[e.SlotConnect=26]="SlotConnect",e[e.NavigationLink=27]="NavigationLink",e[e.Comment=28]="Comment",e[e.Guide=29]="Guide",e[e.Unknown=30]="Unknown"}(t.Tools||(t.Tools={})),function(e){function actionForName(e){return`tool${e}`}e.actionForCase=function actionForCase(t){return actionForName(e[t])},e.actionForName=actionForName,e.allNames=function allNames(){return Object.keys(e).filter(e=>!Number.isNaN(parseInt(e))).map(t=>e[t]).filter(e=>"string"==typeof e)}}(t.Tools||(t.Tools={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(227);t.Color=i.Color,t.ColorMixOptions=i.ColorMixOptions;var o=n(476);t.ConvertColor=o.ConvertColor},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.opacityDefaults={opacity:1};const i="opacity";function hasOpacity(e){return i in e}t.hasOpacity=hasOpacity,t.reduceOpacity=function reduceOpacity(e,t){if(!hasOpacity(e))return;const n=Math.round(100*e.opacity);void 0===t.opacity?t.opacity=n:null!==t.opacity&&t.opacity!==n&&(t.opacity=null)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.radiusPerCornerDefaults={radiusPerCorner:!1,radiusTopLeft:0,radiusTopRight:0,radiusBottomLeft:0,radiusBottomRight:0};const i="radiusPerCorner";function withRadiusPerCorner(e){return i in e}t.withRadiusPerCorner=withRadiusPerCorner,t.reduceRadiusPerCorner=function reduceRadiusPerCorner(e,t){withRadiusPerCorner(e)&&(void 0===t.radiusPerCorner?(t.radiusPerCorner=e.radiusPerCorner,t.radiusTopLeft=e.radiusTopLeft,t.radiusTopRight=e.radiusTopRight,t.radiusBottomLeft=e.radiusBottomLeft,t.radiusBottomRight=e.radiusBottomRight):(null!==t.radiusPerCorner&&t.radiusPerCorner!==e.radiusPerCorner&&(t.radiusPerCorner=null),null!==t.radiusTopLeft&&t.radiusTopLeft!==e.radiusTopLeft&&(t.radiusTopLeft=null),null!==t.radiusTopRight&&t.radiusTopRight!==e.radiusTopRight&&(t.radiusTopRight=null),null!==t.radiusBottomLeft&&t.radiusBottomLeft!==e.radiusBottomLeft&&(t.radiusBottomLeft=null),null!==t.radiusBottomRight&&t.radiusBottomRight!==e.radiusBottomRight&&(t.radiusBottomRight=null)))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(72);t.strokeDefaults={strokeEnabled:i.Property.enabled,strokeAlignment:"center",strokeWidth:1,strokeColor:"#AAA",lineJoin:"miter",lineCap:"butt",strokeMiterLimit:4,strokeDashArray:"0",strokeDashOffset:0},t.shapeStrokeDefaults={strokeEnabled:void 0,strokeAlignment:void 0,strokeWidth:void 0,strokeColor:void 0,lineJoin:void 0,lineCap:void 0,strokeMiterLimit:void 0,strokeDashArray:void 0,strokeDashOffset:void 0};t.hasStroke=e=>"strokeEnabled"in e},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(1),r=n(2),s=n(44),a=n(3);var l;!function(e){e[e.Borderless=0]="Borderless",e[e.Field=1]="Field"}(l=t.TextInputType||(t.TextInputType={}));t.TextInput=class TextInput extends i.Component{constructor(){super(...arguments),this.inputElement=null,this.cancelled=!1,this.focus=()=>{this.inputElement&&this.inputElement.focus()},this.blur=()=>{this.inputElement&&this.inputElement.blur()},this.reset=()=>{this.setState({value:this.props.value})},this.onChange=e=>{const t=e.nativeEvent.target;this.setState(e=>Object.assign({},e,{value:t.value})),this.props.constantChange&&this.props.onChange(t.value,!1,this.props.data)},this.onBlur=()=>{const{blurOnEnter:e,onBlur:t,onChange:n,focusDidChange:i,data:o}=this.props,{value:s}=this.state;e&&this.inputElement&&this.inputElement.blur(),r.default.processWhenReady(()=>{t?t(s,this.cancelled):(n(s,!0,o),i&&i(!1))})},this.onFocus=e=>{const t=e.nativeEvent.target;setTimeout(function(){document.activeElement===t&&t.select()},0),this.cancelled=!1,void 0!==this.props.focusDidChange&&this.props.focusDidChange(!0)},this.onContextMenu=e=>{const{onContextMenu:t}=this.props;t&&t(e),e.stopPropagation()},this.onKeyDown=r.default.wrapHandler(e=>{r.default.mouseStore.setModifiers(e,!0);const t=e.currentTarget,n=0==(t.selectionEnd||0)-(t.selectionStart||0);switch(e.keyCode){case 38:case 40:this.props.onArrow&&(this.props.onArrow(e),e.preventDefault()),e.stopPropagation();break;case 37:0===t.selectionStart&&n&&e.preventDefault(),e.stopPropagation();break;case 39:t.value.length===t.selectionEnd&&n&&e.preventDefault(),e.stopPropagation()}13===e.keyCode&&(this.props.onChange(t.value,!0,this.props.data),e.preventDefault(),this.props.onEnter?this.props.onEnter(e):this.props.blurOnEnter&&t.blur()),27===e.keyCode&&this.props.onEscape&&this.props.onEscape(e),s.default.isKey(e,s.default.Key.escape)&&(this.setState((e,t)=>Object.assign({},e,{value:t.value})),this.cancelled=!0,t.value=this.props.value,t.blur(),e.preventDefault())}),this.onKeyUp=e=>{r.default.mouseStore.setModifiers(e,!1)},this.setInputElement=e=>{this.inputElement=e},this.labelTitle=e=>{const{label:t}=this.props;if(void 0!==t){const n=e.length,i=t.find(e=>e.length+n<8);if(void 0!==i)return i}return""}}shouldComponentUpdate(e,t){const n=!o.isEqual(this.props,e,!1),i=this.state.value!==t.value,r=this.state.value!==e.value;return n||i||r}componentWillMount(){this.setState({value:this.props.value})}componentWillUnmount(){const{onBlur:e}=this.props,{value:t}=this.state;t!==this.props.value&&r.default.processWhenReady(()=>{e&&e(t,this.cancelled)})}componentWillReceiveProps(e){this.state.value===e.value||e.keepValueState||this.setState(t=>Object.assign({},t,{value:e.value}))}componentDidUpdate(e){this.props.autoFocus&&this.props.enabled&&!e.enabled&&setTimeout(()=>{this.inputElement&&this.inputElement.focus()},0)}render(){const{type:e,placeholder:t,obscured:n,style:o,detail:r,labelOffset:s,autoFocus:u,containerStyle:h}=this.props,{value:p}=this.state,g=!1!==this.props.enabled,m=e===l.Field?{color:g?a.theme.propertyPanelInputText:a.theme.propertyPanelInputTextInactive,backgroundColor:a.theme.propertyPanelInputBackground,padding:0===p.length?"0 0 0 4px":"2px 0 3px 4px",border:`1px solid ${g?a.theme.propertyPanelInputBorder:a.theme.propertyPanelInputBorderInactive}`,borderRadius:3}:{},f=Object.assign({pointerEvents:g?"inherit":"none"},d,m,o),y=this.labelTitle(this.state.value);return i.createElement("div",{style:h?Object.assign({},c,h):c,onMouseEnter:this.props.onMouseOver,onMouseLeave:this.props.onMouseOut},i.createElement("input",{type:n?"password":"text",style:f,value:this.state.value,className:this.props.className,placeholder:t,onChange:this.onChange,onBlur:this.onBlur,onFocus:this.onFocus,onKeyDown:this.onKeyDown,onKeyUp:this.onKeyUp,onContextMenu:this.onContextMenu,disabled:!g,autoComplete:"nope",autoCorrect:"off",spellCheck:!1,ref:this.setInputElement,autoFocus:u}),y.length>0&&i.createElement("div",{style:labelStyle(g,s)},y),r)}};const c={width:"auto",position:"relative"},d={position:"relative",display:"block",width:"auto",height:24,fontSize:"11px",lineHeight:"1em",color:a.theme.propertyPanelInputText,backgroundColor:"transparent",border:"none",margin:0,outline:"none",textOverflow:"ellipsis"},u={position:"absolute",right:10,top:2,bottom:2,width:"auto",fontSize:"9px",lineHeight:"22px",pointerEvents:"none",color:a.theme.propertyPanelInputLabel},h=Object.assign({},u,{color:a.theme.propertyPanelInputLabelInactive});function labelStyle(e,t){let n=e?u:h;return o.isFiniteNumber(t)&&o.isFiniteNumber(u.right)&&(n=Object.assign({},n,{right:u.right+t})),n}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(3);t.Button=class Button extends i.PureComponent{constructor(){super(...arguments),this.onClick=()=>{const{onClick:e,enabled:t}=this.props;!1!==t&&e()}}render(){const{style:e,title:t,id:n,primary:c}=this.props,d=!1!==this.props.enabled;let u;return u=c?Object.assign({color:d?o.theme.propertyPanelButtonTextPrimary:o.theme.propertyPanelButtonTextInactive,border:d?a:s,backgroundColor:d?o.theme.propertyPanelButtonBackgroundPrimary:o.theme.propertyPanelButtonBackgroundInactive},l,e):Object.assign({color:d?o.theme.propertyPanelButtonText:o.theme.propertyPanelButtonTextInactive,border:d?r:s,backgroundColor:d?o.theme.propertyPanelButtonBackground:o.theme.propertyPanelButtonBackgroundInactive},l,e),i.createElement("a",{id:n,key:t,className:d?"inputButton":void 0,style:u,onClick:this.onClick,title:this.props.children&&t?t:void 0},this.props.children||t)}};const r=`1px solid ${o.theme.propertyPanelInputBorder}`,s=`1px solid ${o.theme.propertyPanelInputBorderInactive}`,a=`1px solid ${o.theme.propertyPanelButtonBorderPrimary}`,l={position:"relative",height:24,borderRadius:3,textAlign:"center",fontSize:"11px",lineHeight:"22px",cursor:"default",WebkitUserSelect:"none",userSelect:"none"}},function(e,t){e.exports=require("framer-motion")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(111);t.filterDefaults={brightnessEnabled:void 0,brightness:void 0,contrastEnabled:void 0,contrast:void 0,grayScaleEnabled:void 0,grayscale:void 0,hueRotateEnabled:void 0,hueRotate:void 0,invertEnabled:void 0,invert:void 0,saturateEnabled:void 0,saturate:void 0,sepiaEnabled:void 0,sepia:void 0,blurEnabled:void 0,blur:void 0,blurType:void 0};const o="brightness";t.withFilters=function withFilters(e){return o in e&&i.stylableNode(e)}},function(e,t,n){"use strict";function withShadow(e){return t.shadowsKey in e}Object.defineProperty(t,"__esModule",{value:!0}),t.hasShadow=function hasShadow(e){return withShadow(e)},t.shadowDefaults={shadows:void 0},t.shadowsKey="shadows",t.withShadow=withShadow},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(111);function withBoxShadow(e){return t.boxShadowsKey in e}t.hasBoxShadow=function hasBoxShadow(e){return withBoxShadow(e)&&i.stylableNode(e)},t.boxShadowsKey="boxShadows",t.withBoxShadow=withBoxShadow},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(381);t.LinearGradient=i.LinearGradient;const o=n(611);t.RadialGradient=o.RadialGradient;const r=n(118),s=n(91);t.isGradient=function isGradient(e){return r.isLinearGradient(e)||s.isRadialGradient(e)},t.getGradient=function getGradient(e){return e&&e.fillType?"linear-gradient"===e.fillType&&e.fillLinearGradient?e.fillLinearGradient:"radial-gradient"===e.fillType&&e.fillRadialGradient?e.fillRadialGradient:null:null},t.linearGradientUpdate=function linearGradientUpdate(e,t){const n=e.fillLinearGradient||new i.LinearGradient;return new i.LinearGradient(n.merge(t))},t.radialGradientUpdate=function radialGradientUpdate(e,t){const n=e.fillRadialGradient||new o.RadialGradient;return new o.RadialGradient(n.merge(t))}},function(e,t){e.exports=require("@framerjs/framer-services")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(238),r=n(21),s=n(336),a=n(337);class Layer extends i.Component{constructor(){super(...arguments),this.previousZoom=r.RenderEnvironment.zoom}static applyWillChange(e,t){(e.props.willChangeTransform||r.RenderTarget.current()!==r.RenderTarget.canvas)&&(t.willChange="transform")}shouldComponentUpdate(e,t){return this.state!==t||!o.isEqual(this.props,e)}componentDidUpdate(e){const{zoom:t}=r.RenderEnvironment,n=a.elementForComponent(this);t!==this.previousZoom&&this.props.blendingMode&&"normal"!==this.props.blendingMode&&s.resetSetStyle(n,"mixBlendMode",this.props.blendingMode),this.props.clip&&0===this.props.radius&&0!==e.radius&&s.resetSetStyle(n,"overflow","hidden",!1),this.previousZoom=t}}Layer.defaultProps={},t.Layer=Layer},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){let t;!function(e){e[e.enabled=1]="enabled",e[e.disabledHidden=0]="disabledHidden",e[e.disabledVisible=-1]="disabledVisible"}(t=e.Enabled||(e.Enabled={})),e.enabled=t.enabled,e.disabledHidden=t.disabledHidden,e.disabledVisible=t.disabledVisible,e.isEnabled=function isEnabled(e){return e===t.enabled},e.isDisabledHidden=function isDisabledHidden(e){return e===t.disabledHidden},e.isDisabledVisible=function isDisabledVisible(e){return e===t.disabledVisible},e.nonOptional=function nonOptional(e){return void 0===e?t.disabledHidden:e},e.isEnabledState=function isEnabledState(e){switch(e){case t.enabled:case t.disabledHidden:case t.disabledVisible:return!0;default:return!1}}}(t.Property||(t.Property={}))},function(e,t,n){"use strict";var i;Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.Unite=0]="Unite",e[e.Subtract=1]="Subtract",e[e.Intersect=2]="Intersect",e[e.Exclude=3]="Exclude",e[e.Join=4]="Join"}(i=t.PathBooleanType||(t.PathBooleanType={})),t.pathBooleanDefaults={pathBoolean:i.Unite};const o="pathBoolean";t.hasBooleanPath=function hasBooleanPath(e){return o in e},t.nameForPathBooleanType=function nameForPathBooleanType(e){switch(e){case i.Unite:return"Unite";case i.Intersect:return"Intersect";case i.Exclude:return"Exclude";case i.Subtract:return"Subtract";case i.Join:return"Join"}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(12),o=n(22);t.isUserComponent=function isUserComponent(e){return!(!i.isMaster(e)&&!i.isReplica(e))||o.isCodeComponentNode(e)&&!e.framerComponent()}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0);t.default=function Overlay({frame:e,border:t,backgroundColor:n,borderWidth:o,borderColor:r,borderRadius:s,opacity:a,rotation:l,oval:c,children:d,shadow:u,onDoubleClick:h,onContextMenu:p,className:g,style:m}){if(!e)return i.createElement("noscript",null);const f=Object.assign({position:"absolute",border:void 0!==t?t:`${r} ${o}px solid`,backgroundColor:n,width:`${e.width}px`,height:`${e.height}px`,borderRadius:c?"50%":s,opacity:a,transformOrigin:"0 0",transform:`translate(${e.x}px, ${e.y}px) rotate(${l?l.toFixed(4):0}deg)`,willChange:"transform",boxShadow:u?"0px 1px 2px 0px rgba(0,0,0,0.15)":void 0},m);return i.createElement("div",Object.assign({},{style:f,onDoubleClick:h,onContextMenu:p},{className:g||"Overlay"}),d)}},function(e,t,n){"use strict";var i=this&&this.__rest||function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(i=Object.getOwnPropertySymbols(e);o<i.length;o++)t.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(e,i[o])&&(n[i[o]]=e[i[o]])}return n};Object.defineProperty(t,"__esModule",{value:!0});const o=n(0),r=n(676),s=n(677);var a,l,c;!function(e){e.NOT_DEFINED="not-defined",e.CHROME="chrome",e.MAIN_MENU="main-menu-bar",e.TOOLS_PANEL="main-menu-bar-tools",e.LAYERS_PANEL="main-menu-bar-layers",e.PROPERTIES_PANEL="properties-panel",e.SHAPE_TOOLS_PANEL="shape-tools-panel",e.COMPONENTS_PANEL="main-menu-bar-components",e.COLOR_PICKER="color-picker"}(a=t.MetricsInteractionViews||(t.MetricsInteractionViews={})),t.MetricsViewContext=o.createContext({view:a.NOT_DEFINED}),t.withMetricsViewContext=(e,n)=>o.createElement(t.MetricsViewContext.Provider,{value:e},n),function(e){e.STORE_INTERNAL="store_internal",e.STORE_BROWSE="store_browse",e.STORE_USE_INSTALLED="store_use_installed"}(l=t.MetricEventType||(t.MetricEventType={})),function(e){e[e.v2=2]="v2"}(c||(c={}));const d={[l.STORE_INTERNAL]:c.v2,[l.STORE_BROWSE]:c.v2,[l.STORE_USE_INSTALLED]:c.v2},u={},h=new r.FramerTracking({sourceName:"framer-x",trackingURL:s.appServices.trackingURL,verbose:window.localStorage&&"active"===window.localStorage.getItem("debug-metrics"),addContext:e=>{for(const t in u)void 0===e[t]&&(e[t]=u[t])}});!function(e){e.init=function(e){const{appVersion:t,projectId:n}=e;Object.assign(u,{appVersion:t,projectId:n}),h.setUserId(e.userId)},e.push=function(e){if(e.type===l.STORE_INTERNAL){const{action:t,name:n,type:o}=e,r=i(e,["action","name","type"]);h.track(Object.assign({type:"track",event:n,version:c.v2},r))}else{const{type:t}=e,n=i(e,["type"]);h.track(Object.assign({type:"track",event:t,version:d[t]},n))}},e.pushEvent=function(e){const{event:t}=e,n=i(e,["event"]);h.track(Object.assign({},n,{type:"track",event:t,version:d[t]}))}}(t.Metrics||(t.Metrics={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(78);t.panelScroller="panelScroller_pc0u82d",t.invisiblePanelScroller=i.cx(t.panelScroller,"invisiblePanelScroller_i1uv0mra"),n(713)},function(e,t){e.exports=require("linaria")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(3);function PopupButtonItem(e){const{visible:t,type:n,enabled:o,onSelect:s,title:a,identifier:l,selected:c}=e,d=i.useContext(r);if(!1===t)return null;if("divider"===n)return i.createElement("hr",null);const u=!!c&&!!s;return i.createElement("option",{value:valueForItem(l,a),disabled:!1===o||!s},function titleForItem(e,t,n,i){if(!e)return"unknown";const o="string"==typeof e?e:e(t);return i&&n?` ${o}`:o}(a,l,u,d))}function valueForItem(e,t){return void 0!==e?e:"string"==typeof t?t:void 0}t.PopupButtonItem=PopupButtonItem,t.PopupButton=i.forwardRef((e,t)=>{const{className:n,enabled:o,autoFocus:a,style:l,children:c}=e,d=new Set;i.Children.map(c,e=>{if(!e||"string"==typeof e||"number"==typeof e)return;const{selected:t,visible:n,title:i,identifier:o}=e.props;if(t&&!1!==n){const e=valueForItem(o,i);void 0!==e&&d.add(e)}});const u=d.size>1;let h;1===d.size?h=d.values().next().value:u&&(h=s);const p=!1===o,g=i.useCallback(e=>{let{selectedIndex:t}=e.target;u&&t--;const n=i.Children.toArray(c).filter(e=>{const{type:t,visible:n}=e.props;return"divider"!==t&&!1!==n})[t];if("object"!=typeof n)return;const{onSelect:o,identifier:r}=n.props;o&&o(r)},[u,c]);return i.createElement("select",{ref:t,className:n,value:h,disabled:p,autoFocus:a,style:style(p,l),onChange:g},i.createElement(PopupButtonItem,{key:"multiple-selected-item",title:s,visible:u,selected:u,enabled:!1}),i.createElement(PopupButtonItem,{key:"multiple-selected-divider",type:"divider",visible:u}),i.createElement(r.Provider,{value:u},c))});const r=i.createContext(!1),s="Multiple";function baseStyle(){return{position:"relative",width:130,height:24,margin:5,color:o.theme.propertyPanelButtonText,border:`1px solid ${o.theme.propertyPanelInputBorder}`,backgroundColor:o.theme.propertyPanelButtonBackground,borderRadius:3,WebkitAppearance:"none",padding:"0px 12px 1px 5px",textOverflow:"ellipsis",overflow:"hidden",backgroundImage:o.theme.backgroundImage("icon-popover-arrow"),backgroundPosition:"center",backgroundRepeat:"no-repeat",backgroundPositionX:"calc(100% - 4px)"}}function style(e,t){const n=e?function disabledBaseStyle(){return Object.assign({},baseStyle(),{backgroundImage:o.theme.backgroundImage("icon-popover-arrow-disabled"),color:o.theme.propertyPanelLabelInactive})}():baseStyle();return t?Object.assign({},n,t):n}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(1),r=n(2);t.SliderInput=class SliderInput extends i.PureComponent{constructor(){super(...arguments),this.inputElement=null,this.mouseDown=!1,this.onChange=e=>{const t=e.target,n=Number(t.value);""===t.value||isNaN(n)||this.props.onChange(n)},this.onMouseDown=r.default.wrapHandler(()=>{this.mouseDown=!0,r.default.beginUndoGroup()}),this.onMouseUp=r.default.wrapHandler(()=>{this.mouseDown=!1,r.default.endUndoGroup()}),this.setInputElement=e=>{this.inputElement=e}}componentDidMount(){this.updateSliderProgress()}componentWillUnmount(){this.mouseDown&&r.default.endUndoGroup()}componentDidUpdate(){this.updateSliderProgress()}updateSliderProgress(){if(null!==this.inputElement){const{value:e,min:t,max:n}=this.inputElement,i=parseFloat(e),o=parseFloat(t),r=parseFloat(n),s=Math.round((i-o)/(r-o)*100);this.inputElement.style.setProperty("--progress",`${s}%`)}}render(){const{min:e,max:t,step:n,value:r,enabled:l}=this.props,{onChange:c,onMouseDown:d,onMouseUp:u}=this;return i.createElement("div",{style:s},i.createElement("input",{type:"range",value:o.isFiniteNumber(r)?r:"",min:e||0,max:t||100,step:n,onMouseDown:d,onMouseUp:u,onChange:c,style:a,ref:this.setInputElement,tabIndex:-1,disabled:void 0===r||!1===l}))}};const s={width:60,margin:5},a={width:"100%",position:"relative",top:-1,left:-2}},function(e,t){e.exports=require("draft-js")},function(e,t,n){"use strict";function __export(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),__export(n(65));var i=n(540);t.Scroll=i.Scroll,t.ScrollProps=i.ScrollProps,t.ScrollEvents=i.ScrollEvents,t.ScrollConfig=i.ScrollConfig,t.Page=i.Page,t.PageEvents=i.PageEvents,t.PageProps=i.PageProps,t.PageProperties=i.PageProperties,t.PageEffect=i.PageEffect,t.PageEffectInfo=i.PageEffectInfo,t.PageAlignment=i.PageAlignment,t.Draggable=i.Draggable,t.Stack=i.Stack,t.StackProperties=i.StackProperties,t.StackSpecificProps=i.StackSpecificProps,t.Navigation=i.Navigation,t.calcChildLayoutRects=i.calcChildLayoutRects;var o=n(564);t.WithNavigator=o.WithNavigator;var r=n(245);t.Device=r.Device,t.DeviceProperties=r.DeviceProperties,t.DeviceDescriptor=r.DeviceDescriptor,t.DeviceSkin=r.DeviceSkin,t.DeviceSkins=r.DeviceSkins,t.DeviceRenderer=r.DeviceRenderer,__export(n(565));var s=n(237);t.AnyInterpolation=s.AnyInterpolation,t.ValueInterpolation=s.ValueInterpolation;var a=n(33);t.Animatable=a.Animatable,t.AnimatableObject=a.AnimatableObject,t.Cancel=a.Cancel;var l=n(566);t.animate=l.animate;var c=n(361);t.FramerAnimation=c.FramerAnimation;var d=n(363);t.BezierAnimator=d.BezierAnimator,t.SpringAnimator=d.SpringAnimator;var u=n(244);t.FramerEvent=u.FramerEvent,t.FramerEventListener=u.FramerEventListener,t.FramerEventSession=u.FramerEventSession;var h=n(1);t.Point=h.Point,t.Size=h.Size,t.Rect=h.Rect,t.Vector=h.Vector,t.VectorGroup=h.VectorGroup,t.ComponentContainer=h.ComponentContainer,t.ComponentIdentifier=h.ComponentIdentifier,t.SVG=h.SVG,t.Text=h.Text,t.Frame=h.Frame,t.FrameProps=h.FrameProps,t.BaseFrameProps=h.BaseFrameProps,t.FrameLayoutProperties=h.FrameLayoutProperties,t.CSSTransformProperties=h.CSSTransformProperties,t.VisualProperties=h.VisualProperties,t.DeprecatedFrame=h.DeprecatedFrame,t.QualityOptions=h.QualityOptions,t.DeprecatedFrameProperties=h.DeprecatedFrameProperties,t.DeprecatedFrameWithEvents=h.DeprecatedFrameWithEvents,t.DeprecatedFrameWithEventsProps=h.DeprecatedFrameWithEventsProps,t.componentLoader=h.componentLoader,t.setGlobalRenderEnvironment=h.setGlobalRenderEnvironment,t.RenderTarget=h.RenderTarget,t.ControlType=h.ControlType,t.PropertyControls=h.PropertyControls,t.NumberControlDescription=h.NumberControlDescription,t.EnumControlDescription=h.EnumControlDescription,t.BooleanControlDescription=h.BooleanControlDescription,t.StringControlDescription=h.StringControlDescription,t.ColorControlDescription=h.ColorControlDescription,t.FusedNumberControlDescription=h.FusedNumberControlDescription,t.SegmentedEnumControlDescription=h.SegmentedEnumControlDescription,t.ImageControlDescription=h.ImageControlDescription,t.FileControlDescription=h.FileControlDescription,t.ArrayControlDescription=h.ArrayControlDescription,t.EventHandlerControlDescription=h.EventHandlerControlDescription,t.ControlDescription=h.ControlDescription,t.getConfigFromURL=h.getConfigFromPreviewURL,t.getConfigFromPreviewURL=h.getConfigFromPreviewURL,t.getConfigFromVekterURL=h.getConfigFromVekterURL,t.serverURL=h.serverURL,t.NavigationInterface=h.NavigationInterface,t.NavigationConsumer=h.NavigationConsumer,t.NavigationLink=h.NavigationLink,t.NavigationTransitionDirection=h.NavigationTransitionDirection,t.NavigationTransitionSide=h.NavigationTransitionSide,t.NavigationTransitionPosition=h.NavigationTransitionPosition,t.NavigationTransitionAnimation=h.NavigationTransitionAnimation,t.NavigationTransitionAppearsFrom=h.NavigationTransitionAppearsFrom,t.NavigationTransitionBackdropColor=h.NavigationTransitionBackdropColor,t.NavigationTransition=h.NavigationTransition,t.FadeTransitionOptions=h.FadeTransitionOptions,t.PushTransitionOptions=h.PushTransitionOptions,t.ModalTransitionOptions=h.ModalTransitionOptions,t.OverlayTransitionOptions=h.OverlayTransitionOptions,t.FlipTransitionOptions=h.FlipTransitionOptions,t.NavigationProps=h.NavigationProps,t.useNavigation=h.useNavigation,t.isReactDefinition=h.isReactDefinition,t.createDesignComponent=h.createDesignComponent,t.CanvasStore=h.CanvasStore,t.isOverride=h.isOverride,t.isAction=h.isAction,t.Color=h.Color,t.ConvertColor=h.ConvertColor,t.ColorMixModelType=h.ColorMixModelType,t.addServerUrlToResourceProps=h.addServerUrlToResourceProps,t.BackgroundProperties=h.BackgroundProperties,t.CustomProperties=h.CustomProperties,t.CustomPropertiesContext=h.CustomPropertiesContext,t.constraintsEnabled=h.constraintsEnabled,t.throttle=h.throttle,t.debounce=h.debounce;var p=n(154);t.ObservableObject=p.ObservableObject;var g=n(364);t.Data=g.Data;var m=n(568);t.createData=m.createData,t.DataContext=m.DataContext;var f=n(570);t.Override=f.Override,t.OverrideFunction=f.OverrideFunction,t.OverrideObject=f.OverrideObject,t.WithOverride=f.WithOverride;var y=n(572);t.Action=y.Action,t.ActionHandler=y.ActionHandler,t.ActionInfo=y.ActionInfo,t.addActionControls=y.addActionControls,t.getActionControls=y.getActionControls,t.ActionControlDescription=y.ActionControlDescription,t.ActionControls=y.ActionControls;var v=n(365);t.DataObserver=v.DataObserver;var b=n(573);t.PropertyStore=b.PropertyStore;var k=n(575);t.loadJSON=k.loadJSON;var S=n(576);t.print=S.print;var C=n(356);t.addPropertyControls=C.addPropertyControls,t.getPropertyControls=C.getPropertyControls;var x=n(579);t.version=x.version;const w=n(152);t.MainLoop=w.MainLoop},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.nameDefaults={name:null};const i="name";t.hasName=function hasName(e){return i in e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(1),o=n(24),r=n(22);t.codeComponentWithChildInsertion=function codeComponentWithChildInsertion(e){if(!r.isCodeComponentNode(e))return!1;const t=o.componentLoader.componentForIdentifier(e.codeComponentIdentifier);return!!t&&t.class&&i.withChildInsertion(t.class)},t.codeComponentChildInsertionClass=function codeComponentChildInsertionClass(e){const t=o.componentLoader.componentForIdentifier(e.codeComponentIdentifier),n=t?t.class:null;return n&&i.withChildInsertion(n)?n:null}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(7),o=n(599),r=n(36),s=n(48),a=n(86),l=n(23);t.isRootNode=function isRootNode(e){return e instanceof RootNode};class RootNode extends s.default{constructor(e){super(),this.tokens=i.OrderedMap(),r.setDefaults(this,o.RootRecord,e)}toJS(){const e=super.toJS();return e.tokensIndex=Array.from(this.tokens.keys()),e}getToken(e){return this.tokens.get(e)||null}getTokensHash(){return this.tokens.hashCode()}getAllTokens(){return this.tokens.toArray()}getTokensOfType(e){return this.tokens.toArray().filter(t=>t instanceof e)}deleteToken(e){const t=this.tokens.remove(e.id);this.tree().updateNode(this,{tokens:t}),this.walk(t=>{const n=a.removeTokenFromNode(t,e);n&&this.tree().updateNode(t,n)})}setToken(e){const t=this.tokens.set(e.id,e);this.tree().updateNode(this,{tokens:t})}moveToken(e,t){const n=Array.from(this.tokens.entries()),o=n.length;l(t<o&&t>=0,`toIndex is out of bounds: ${t} in ${o}`),l(e<o&&e>=0,`fromIndex is out of bounds: ${e} in ${o}`);const[r]=n.splice(e,1);n.splice(t,0,r),this.tree().updateNode(this,{tokens:i.OrderedMap(n)})}}t.RootNode=RootNode},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(7),o=n(1),r=n(24),s=n(51),a=n(48),l=n(600),c=n(22),d=n(163);function getTokenMap(e,t,n=r.componentLoader){const i={},o=getTokenByPackageIdMap(e,t,n);for(const r in o)Object.assign(i,o[r]);return i}function getTokenByPackageIdMap(e,t,n=r.componentLoader){const i={},s=t?e=>e instanceof t:()=>!0;e.root.getAllTokens().filter(s).forEach(e=>{i[o.localPackageFallbackIdentifier]||(i[o.localPackageFallbackIdentifier]={}),i[o.localPackageFallbackIdentifier][e.id]=e});const l=n.packageIdentifiers();for(const o of l){const e=n.tokensForPackage(o);if(!e)continue;const t=Object.values(e).map(e=>a.canvasNodeFromValue(e,null,[]));for(const n of t)n&&(i[o]||(i[o]={}),i[o][n.id]=n)}return i}function removeTokensFromNode(e,t){let n;const o={};return t.forEach(e=>o[e.id]=e.value),Object.entries(e).forEach(([e,t])=>{if("children"===e)return;let r,s=!1;if(i.List.isList(t)&&(t=Array.from(t),s=!0),Array.isArray(t)){const e=[];let n=!1;t.forEach((t,i)=>{const r=replacePropertyToken(String(i),t,o);r&&(n=!0),e.push(r||t)}),n&&(r=e)}else r=replacePropertyToken(e,t,o);void 0!==r&&(n||(n={}),s&&(r=i.List(r)),n[e]=r)}),n}function replacePropertyToken(e,t,n){if("codeComponentProps"===e)return function removeTokenFromCodeComponentProps(e,t){let n;return Object.keys(e).forEach(i=>{const o=e[i];if(Array.isArray(o)){let r=!1;const s=[];o.forEach(e=>{const n=d.findValueForTokenCSSVariable(e,t);n?(r=!0,s.push(n)):s.push(e)}),r&&((n=n||Object.assign({},e))[i]=s)}else if(s.isTokenCSSVariable(o)){const r=d.findValueForTokenCSSVariable(o,t);if(!r)return;(n=n||Object.assign({},e))[i]=r}}),n}(t,n);if(l.hasTokenVariables(t)){const e=t.removeTokenVariables(n);if(e)return e}const i=d.findValueForTokenCSSVariable(t,n);return i||void 0}t.findTokenNode=function findTokenNode(e,t,n=r.componentLoader){const i=t.root.getToken(e);if(i)return i;const o=n.packageIdentifiers();for(const r of o){const t=n.tokensForPackage(r);if(!t)continue;const i=t[e],o=[],s=a.canvasNodeFromValue(i,null,o);if(o.length)throw new Error(`Unable to parse TokenNode: \n${o.join("\n")}`);if(s)return s}return null},t.getTokenCSSProperties=function getTokenCSSProperties(e,t=r.componentLoader){const n={};e.root.getAllTokens().forEach(e=>{e.value&&(n[s.tokenToCSSCustomProperty(e)]=e.value)});const i=t.packageIdentifiers();for(const o of i){const e=t.tokensForPackage(o);if(e)for(const t of Object.values(e))n[s.tokenToCSSCustomProperty(t)]=t.value}return n},t.getTokenMap=getTokenMap,t.getTokenByPackageIdMap=getTokenByPackageIdMap,t.removeTokenFromNode=function removeTokenFromNode(e,t){return removeTokensFromNode(e,[t])},t.removeAllTokensFromNodeTree=function removeAllTokensFromNodeTree(e,t){const n=e.cloneWithIds(),i=Object.values(getTokenMap(t));return n.walk(e=>Object.assign(e,removeTokensFromNode(e,i))),n},t.removeTokensFromNode=removeTokensFromNode,t.nodeContainsToken=function nodeContainsToken(e){return!(!c.isCodeComponentNode(e)||!function objectContainsToken(e){if(!function isObject(e){return"object"==typeof e&&null!==e}(e))return!1;const t=Object.keys(e);for(const n of t){const t=e[n];if(s.isTokenCSSVariable(t))return!0;if(objectContainsToken(t))return!0}return!1}(e.codeComponentProps))||Object.keys(e).some(t=>{if("children"===t)return!1;const n=e[t];return!(!function isList(e){return i.List.isList(e)}(n)||!n.some(e=>s.isTokenCSSVariable(n)||l.hasTokenVariables(e)&&e.tokenVariables().length>0))||(!!(l.hasTokenVariables(n)&&n.tokenVariables().length>0)||s.isTokenCSSVariable(n))})}},function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))(function(o,r){function fulfilled(e){try{step(i.next(e))}catch(t){r(t)}}function rejected(e){try{step(i.throw(e))}catch(t){r(t)}}function step(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(fulfilled,rejected)}step((i=i.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const o=n(158),r=n(189),s=n(603),a=n(40),l=n(1),c=n(604),d=n(100),u=n(48),h=n(36);let p;!function loadEngine(){return i(this,void 0,void 0,function*(){p=(yield Promise.resolve().then(()=>n(2))).default})}(),t.isTextNode=function isTextNode(e){return e instanceof TextNode};class TextNode extends u.default{constructor(e){super(),this.styledTextChanged=p&&p.wrapHandler(()=>{const e=this.latest();e&&e.set({})}),h.setDefaults(this,c.TextRecord,e),delete this.children}set(e,t){return super.set(e,t)}toJS(){const e=super.toJS();return delete e.aspectRatio,e}minSize(e){return l.ConstraintValues.toMinSize(this.constraintValues(),e)}size(e,t){return l.ConstraintValues.toSize(this.constraintValues(),e,null,t)}rect(e){return l.ConstraintValues.toRect(this.constraintValues(),e,null,!0)}matrix(e,t){if(t||void 0===e||(t=this.rect(e)),!t)throw Error("Could not determine frame to build matrix from");return(new WebKitCSSMatrix).translate(t.x,t.y).rotate(0,0,this.rotation)}transformMatrix(e,t){if(t||(t=this.rect(e)),!t)throw Error("Could not determine frame to build matrix from");return(new WebKitCSSMatrix).translate(.5*t.width,.5*t.height).multiply(this.matrix(e,t)).translate(-.5*t.width,-.5*t.height)}get text(){return this.styledText.text}set text(e){this.styledText=this.styledText.withUpdatedText(e)}isRotated(){return this.rotation%360!=0}constraints(){return l.ConstraintMask.quickfix({left:l.isFiniteNumber(this.left),right:l.isFiniteNumber(this.right),top:l.isFiniteNumber(this.top),bottom:l.isFiniteNumber(this.bottom),widthType:this.widthType,heightType:this.heightType,aspectRatio:null,fixedSize:this.autoSize})}constraintValues(){const e=this.constraints(),{width:t,height:n}=this.autoSize?this.styledText.calculateSize():this;return{left:e.left?this.left:null,right:e.right?this.right:null,top:e.top?this.top:null,bottom:e.bottom?this.bottom:null,widthType:e.widthType,heightType:e.heightType,width:t,height:n,aspectRatio:null,centerAnchorX:this.centerAnchorX,centerAnchorY:this.centerAnchorY}}newConstraintProperties(){return this.mutable?this.calculatedNewConstraintProperties():this.cache.newConstraintProps?this.cache.newConstraintProps:this.cache.newConstraintProps=this.calculatedNewConstraintProperties()}calculatedNewConstraintProperties(){const{width:e,height:t}=this.autoSize?this.styledText.calculateSize():this,n=o.newConstraintProperties(this);return n.width=this.autoSize?e:n.width,n.height=this.autoSize?t:n.height,n._constraints.autoSize=this.autoSize,n}updateForRect(e,t,n){let i,o={width:e.width,height:e.height};if(this.autoSize){this.rect(t).height!==o.height&&(i=this.styledText.scaledToHeight(e.height))}const r=this.constraintsLocked||void 0!==n&&n;return o=a.updateConstrainedFrame(e,t,this.constraints(),r),i?Object.assign({},o,{styledText:i}):o}updateForSize(e,t,n=!0){const i={},o=this.rect(t);if(this.autoSize&&n&&void 0!==e.height&&o.height!==e.height){const t=this.styledText.scaledToHeight(e.height),n=t.calculateSize();e.width=n.width,e.height=n.height,i.styledText=t}const r=this.constraintValues();if(this.autoSize&&this.cache.isEditable){const n={width:e.width,height:e.height};if(e.width&&"alignment"in this.styledText){const i=this.styledText.alignment()||"left";if("left"===i&&null===r.left&&(null!==r.right&&(n.right=r.right-(e.width-o.width)),t&&(n.centerAnchorX=(o.x+e.width/2)/t.width)),"right"===i&&null===r.right&&(null!==r.left&&(n.left=r.left-(e.width-o.width)),t&&(n.centerAnchorX=(o.x-(e.width-o.width)+e.width/2)/t.width)),"center"===i){const t=Math.round((e.width-o.width)/2);null!==r.left?n.left=r.left-t:null!==r.right&&(n.right=r.right-t)}}return e.height&&null===r.top&&(null!==r.bottom&&(n.bottom=r.bottom-(e.height-o.height)),t&&(n.centerAnchorY=(o.y+e.height/2)/t.height)),Object.assign({},i,n)}return Object.assign({},i,a.updateConstrainedSize(e,t,r))}getAllFonts(){return[]}getProps(){const e=this.newConstraintProperties(),t=l.calculateRect(e,this.cache.parentRect||l.ParentSizeState.Unknown),n=this.styledText.calculateSize(this.autoSize||!t?0:t.width),i=Object.assign({},super.getProps(),e,this.styledText.getProps(this.styledTextChanged),d.collectStyleFromNode(this),{rotation:this.rotation,visible:this.visible,autoSize:this.autoSize,calculatedSize:n,opacity:this.opacity,isEditable:this.cache.isEditable});return this.__unsafeIsGroundNode()&&(i.left=0,i.top=0),void 0===i.name&&this.name&&(i.name=this.name),r.collectFilterPropsForNode(this,i),s.collectShadowPropsForNode(this,i),i}}t.default=TextNode},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(1);t.hasPath=function hasPath(e){return i.withPath(e)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(7),o=n(4),r=n(1),s=n(19),a=n(191);!function(e){function calculatePath(e,t){const n=path(e,t);return e instanceof o.OvalShapeNode?n:n.map(e=>s.default.applyRadius(e.pathSegments,e.pathClosed))}function path(e,t){const{width:n,height:i}=t||e;if(e instanceof o.OvalShapeNode)return makeOval(n,i);if(e instanceof o.StarShapeNode)return makeStar(n,i,e.spikeCount,e.spikeDepth,e.radius);if(e instanceof o.PolygonShapeNode)return makePolygon(n,i,e.polygonSides,e.radius);if(e instanceof o.RectangleShapeNode)return makeRectangle(n,i,e.radius,e.radiusPerCorner,e.radiusTopLeft,e.radiusTopRight,e.radiusBottomRight,e.radiusBottomLeft);throw Error("can't make path, uknown basic shape")}function makeRectangle(e,t,n=0,o=!1,s=0,a=0,l=0,c=0){const d=o?s:n,u=o?a:n,h=o?l:n,p=o?c:n;return[{pathSegments:i.List([new r.PathSegment({radius:d}),new r.PathSegment({x:e,y:0,radius:u}),new r.PathSegment({x:e,y:t,radius:h}),new r.PathSegment({x:0,y:t,radius:p})]),pathClosed:!0}]}function makeOval(e,t){const n=2*(Math.sqrt(2)-1)/3;return[{pathSegments:i.List([new r.PathSegment({x:e/2,y:0,handleMirroring:"symmetric",handleOutX:n*e,handleOutY:0,handleInX:-n*e,handleInY:0}),new r.PathSegment({x:e,y:t/2,handleMirroring:"symmetric",handleOutY:n*t,handleOutX:0,handleInY:-n*t,handleInX:0}),new r.PathSegment({x:e/2,y:t,handleMirroring:"symmetric",handleOutX:-n*e,handleOutY:0,handleInX:n*e,handleInY:0}),new r.PathSegment({x:0,y:t/2,handleMirroring:"symmetric",handleOutY:-n*t,handleOutX:0,handleInY:n*t,handleInX:0})]),pathClosed:!0}]}function makeStar(e,t,n=a.spikesDefaults.spikeCount,o=a.spikesDefaults.spikeDepth,s=0){const l=Math.max(0,Math.min(1,(100-o)/100)),c=[];let d=Math.PI/2*3,u=0,h=0;const p=Math.PI/n;for(let i=0;i<n;i++)u=1*Math.cos(d),h=1*Math.sin(d),c.push({x:u,y:h}),d+=p,u=Math.cos(d)*l,h=Math.sin(d)*l,c.push({x:u,y:h}),d+=p;return[{pathSegments:i.List(c.map(n=>new r.PathSegment({x:(n.x+1)*e/2,y:(n.y+1)*t/2,radius:s}))),pathClosed:!0}]}function makePolygon(e,t,n=6,o=0){const s=[];let a=Math.PI/2*3,l=0,c=0;const d=2*Math.PI/n;for(let i=0;i<n;i++)l=1*Math.cos(a),c=1*Math.sin(a),s.push({x:l,y:c}),a+=d;return[{pathSegments:i.List(s.map(n=>new r.PathSegment({x:(n.x+1)*e/2,y:(n.y+1)*t/2,radius:o}))),pathClosed:!0}]}e.isBasicShape=function isBasicShape(e){return e instanceof o.RectangleShapeNode||e instanceof o.OvalShapeNode||e instanceof o.StarShapeNode||e instanceof o.PolygonShapeNode},e.calculatedPath=function calculatedPath(e,t){if(e.mutable)return calculatePath(e,t);const n=e.cache;return n.calculatedPaths||(n.calculatedPaths=calculatePath(e,t)),n.calculatedPaths},e.path=path,e.makeRoundedRectangle=function makeRoundedRectangle(e,t){return makeRectangle(e,t,Math.max(e,t))},e.makeRectangle=makeRectangle,e.makeOval=makeOval,e.makeStar=makeStar,e.makePolygon=makePolygon}(t.BasicShape||(t.BasicShape={}))},function(e,t,n){"use strict";var i;Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.convertPoint=(e,t)=>{const{x:n,y:i}=t;let o=e.m14*n+e.m24*i+0*e.m34+e.m44;return o=o||1,{x:(e.m11*n+e.m21*i+0*e.m31+e.m41)/o,y:(e.m12*n+e.m22*i+0*e.m32+e.m42)/o}},e.equals=function equals(e,t){return e===t||!(!e||!t)&&(e.isIdentity?t.isIdentity:e.m41===t.m41&&e.m42===t.m42&&e.m11===t.m11&&e.m12===t.m12&&e.m21===t.m21&&e.m22===t.m22&&(!(!e.is2D||!t.is2D)||e.m13===t.m13&&e.m14===t.m14&&e.m23===t.m23&&e.m24===t.m24&&e.m31===t.m31&&e.m32===t.m32&&e.m33===t.m33&&e.m34===t.m34&&e.m43===t.m43&&e.m44===t.m44))}}(i||(i={})),t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(1),o=n(612),r=n(51),s=n(163),a=n(57);t.isRadialGradient=function isRadialGradient(e){return e instanceof RadialGradient};class RadialGradient extends o.RadialGradientRecord{toJS(){let e=this.__js;return e||((e=super.toJS()).__class=this.constructor.name,this.stops.some(e=>r.isTokenCSSVariable(e.value))&&(e.alpha=1),this.__js=e)}toJSON(){return this.toJS()}toCSS(){const e=this.__css;return e||(this.__css=i.RadialGradient.toCSS(this.toJS()))}equals(e){return this.widthFactor===e.widthFactor&&this.heightFactor===e.heightFactor&&this.centerAnchorX===e.centerAnchorX&&this.centerAnchorY===e.centerAnchorY&&this.equalColors(e)}equalColors(e){return this.alpha===e.alpha&&this.stops.count()===e.stops.count()&&this.stops.every((t,n)=>{const o=e.stops.get(n);return(t.value===o.value||i.ConvertColor.equals(t.value,o.value))&&t.position===o.position})}tokenVariables(){const e=[];return this.stops.forEach(t=>{r.isTokenCSSVariable(t.value)&&e.push(t.value)}),e}removeTokenVariables(e){let t=!1;const n=this.stops.map(n=>{const i=s.findValueForTokenCSSVariable(n.value,e);return i?(t=!0,new a.GradientColorStop(n.merge({value:i}))):n});if(t)return new RadialGradient(Object.assign({},this.toJS(),{stops:n}))}}t.RadialGradient=RadialGradient},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(1),o=n(48),r=n(158),s=n(616),a=n(40),l=n(12),c=n(36),d=n(167),u=n(100),h=n(249),p=n(250),g=n(189),m=n(253);t.isFrameNode=function isFrameNode(e){return e instanceof FrameNode};class FrameNode extends(r.withPinsSizeRatioConstraints(o.default)){constructor(e){super(),c.setDefaults(this,s.FrameRecord,e)}updateForRect(e,t){const n=a.updateConstrainedFrame(e,t,this.constraints(),this.constraintsLocked);return e.width===this.width&&e.height===this.height||null===this.deviceType?n:Object.assign({},n,{deviceType:null})}updateForSize(e,t){const n=a.updateConstrainedSize(e,t,this.constraintValues());return null!==this.deviceType?Object.assign({},n,{deviceType:null}):n}getProps(){const e={rotate:this.rotation,overflow:this.clip?"hidden":"visible"},t=Object.assign({},super.getProps(),this.newConstraintProperties(),{_border:h.borderPropsForNode(this),visible:this.visible,style:e});this.__unsafeIsGroundNode()&&(t.left=0,t.top=0,l.isReplica(this)&&t._constraints&&(i.isFiniteNumber(t._constraints.intrinsicWidth)&&!i.isFiniteNumber(t.width)&&(t.width=t._constraints.intrinsicWidth),i.isFiniteNumber(t._constraints.intrinsicHeight)&&!i.isFiniteNumber(t.height)&&(t.height=t._constraints.intrinsicHeight)));const n=u.collectStyleFromNode(this);p.collectBoxShadowPropsForNode(this,n),g.collectFilterPropsForNode(this,n),d.collectBackgroundPropsForNode(this,n),i.collectVisualStyleFromProps(n,e),t.background=n.background;let o=!1;if(l.isMaster(this)||l.isReplica(this)){let e=!1;const n={};this.walk(t=>{if(t!==this&&t.name){e=!0;const i=m.safeName(t.name);n[m.idToReactId(t.id)]=i}}),e&&(o=-1!==Object.values(n).indexOf("name"),t._overrideForwardingDescription=n)}return void 0===t.name&&this.name&&!o&&(t.name=this.name),t}}t.default=FrameNode},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(1),o=n(51),r=n(86);t.isColorToken=function isColorToken(e){return e instanceof ColorTokenNode},t.computeColor=function computeColor(e,t,n="transparent"){if(void 0===e)return n;if(!o.isTokenCSSVariable(e))return e;const i=r.findTokenNode(e,t);return i&&"string"==typeof i.value?i.value:n};class ColorTokenNode extends o.TokenNode{constructor(e){super(),this.value="#fff";const t={};e&&e.value&&(t.value=i.Color.toRgbString(i.Color(e.value))),Object.assign(this,e,t)}}t.ColorTokenNode=ColorTokenNode},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(386);t.useAutoSizeTransition=i.useAutoSizeTransition;var o=n(389);t.usePositionTransition=o.usePositionTransition;var r=n(201);t.useDraggable=r.useDraggable;var s=n(396);t.useDroppable=s.useDroppable;var a=n(267);t.Sortable=a.Sortable;var l=n(397);t.SortableWithSections=l.SortableWithSections;var c=n(639);t.Draggable=c.Draggable;var d=n(394);t.DragDataTransfer=d.DragDataTransfer;var u=n(395);t.DragGestureEvent=u.DragGestureEvent;var h=n(201);t.DraggableEvent=h.DraggableEvent;var p=n(396);t.DroppableEvent=p.DroppableEvent;var g=n(640);t.DragDataType=g.DragDataType;var m=n(397);t.SortableSectionSelector=m.SortableSectionSelector,t.SortableSectionItemSelector=m.SortableSectionItemSelector,t.SortableSectionItem=m.SortableSectionItem;var f=n(266);t.dragSessionActive=f.dragSessionActive;var y=n(267);t.SortableKeys=y.SortableKeys},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(157);function wantsActions(e){return!e.wantsActions||e.wantsActions()}function wantsAction(e,t){return!e.wantsAction||e.wantsAction(t)}function optionsForAction(e,t){return e.optionsForAction?e.optionsForAction(t):void 0}var r;!function(e){e.chain=function chain(e){return new Chain(e)},e.functionTarget=function functionTarget(e,t){return e&&e instanceof Chain?e.actionToTargetMap[t]:e};class Chain{constructor(e){this.actionToTargetMap={},this.wantedActions=[],this.then(e)}then(e){this.wantedActions=this.wantedActions.concat(e.wantedActions);const t=this.actionToTargetMap,n=e.wantedActions;for(const i of n)t[i]=t[i]||e;return this}wantsAction(e){const t=this.actionToTargetMap[e];return!(!t||!wantsActions(t))&&wantsAction(t,e)}optionsForAction(e){const t=this.actionToTargetMap[e];if(t)return optionsForAction(t,e)}}}(r=t.ActionTarget||(t.ActionTarget={}));t.ActionResponder=class ActionResponder extends i.Component{constructor(){super(...arguments),this.ref=null,this.setRef=e=>{const t=document.documentElement?[document.documentElement]:[];this.ref&&t.push(this.ref);for(const n of t)n.removeEventListener(ActionDispatchEvent.eventType,this.onAction),n.removeEventListener(ActionValidationEvent.eventType,this.onValidateActions);if(this.ref=e,this.ref){const e=(this.props.global?document.documentElement:null)||this.ref;e.addEventListener(ActionDispatchEvent.eventType,this.onAction),e.addEventListener(ActionValidationEvent.eventType,this.onValidateActions)}},this.onAction=e=>{const t=e.actionIdentifier;if(!t)return;const n=r.functionTarget(this.props.target,t);if(n&&-1!==n.wantedActions.indexOf(t)&&wantsActions(n)){const i=n[t];if("function"==typeof i){const o=wantsAction(n,t);o&&(e.preventDefault(),e.stopPropagation(),!0===o&&this.props.engine.wrapHandler(i.bind(n))(e.actionArgument))}}},this.onValidateActions=e=>{const{invalidatedActions:t,validatedActionStates:n,validatedActionOptions:i}=e;if(!t||!n||!i)return;const{target:o}=this.props;if(o){for(const e of o.wantedActions)if(t.has(e)){t.delete(e);const r=!!wantsActions(o)&&wantsAction(o,e);if(n[e]=r,!0===r){const t=optionsForAction(o,e);t&&(i[e]=t)}}0===t.size&&(e.preventDefault(),e.stopPropagation())}},this.onContextMenu=e=>{o.isDebugBuild||e.preventDefault()}}render(){return i.createElement("div",{ref:this.setRef,onContextMenu:this.onContextMenu},this.props.children)}},t.dispatchAction=function dispatchAction(e,t){const n=document.activeElement;if(!n)throw Error("No active element for action dispatch");const i=new ActionDispatchEvent(ActionDispatchEvent.eventType,{bubbles:!0});return i.actionIdentifier=e,i.actionArgument=t,n.dispatchEvent(i)};class ActionDispatchEvent extends Event{}ActionDispatchEvent.eventType="vekter-action-dispatch-event";class ActionValidationEvent extends Event{}ActionValidationEvent.eventType="vekter-action-validation-event";const s=[],a=[];t.beforeValidatingActions=function beforeValidatingActions(e){s.push(e)},t.afterValidatingActions=function afterValidatingActions(e){a.push(e)},t.validateAction=function validateAction(e){const t="*"===e?Object.keys(l):[e];s.forEach(e=>e());const{states:n,options:i}=function dispatchActionValidation(e){const t=document.activeElement;if(!t)throw Error("No active element for action validation");const n=new Set;for(const s of e)n.add(s);const i={},o={},r=new ActionValidationEvent(ActionValidationEvent.eventType,{bubbles:!0});return r.invalidatedActions=n,r.validatedActionStates=i,r.validatedActionOptions=o,t.dispatchEvent(r),{states:i,options:o}}(t);Object.assign(l,n),Object.assign(c,i);for(const o of t)l[o]=n[o]||("undo"===o||"redo"===o||"delete"===o)&&"native";return a.forEach(e=>e()),{states:l,options:c}};const l={},c={};t.wantsNativeTextActions=function wantsNativeTextActions(){const e=document.activeElement;return!!e&&(!!e.classList.contains("wantsNativeTextAction")||e instanceof HTMLIFrameElement||e instanceof HTMLInputElement&&"text"===e.type||e instanceof HTMLElement&&e.isContentEditable)}},function(e,t,n){"use strict";function isFiniteNumber(e){return"number"==typeof e&&isFinite(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.isFiniteNumber=isFiniteNumber,t.finiteNumber=function finiteNumber(e){return isFiniteNumber(e)?e:void 0}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(0),r=n(497),s=n(335),a=n(155),l=n(53),c=n(340);var d=n(340);t.isDeprecatedFrameProps=d.isDeprecatedFrameProps;var u=n(335);t.DeprecatedFrame=u.DeprecatedFrame,t.DeprecatedCoreFrameProps=u.DeprecatedCoreFrameProps,t.DeprecatedFrameProperties=u.DeprecatedFrameProperties;var h=n(155);t.BackgroundImageState=h.BackgroundImageState,t.FrameWithMotion=h.FrameWithMotion,t.FrameProps=h.FrameProps;var p=n(512);t.BaseFrameProps=p.BaseFrameProps,t.FrameLayoutProperties=p.FrameLayoutProperties,t.CSSTransformProperties=p.CSSTransformProperties,t.VisualProperties=p.VisualProperties,t.DeprecatedFrameWithEvents=r.WithEvents(s.DeprecatedFrame),t.Frame=o.forwardRef(function Frame(e,n){const o=l.useParentSize();if(c.isDeprecatedFrameProps(e)){const n=e.parentSize||l.deprecatedParentSize(o);return i.createElement(t.DeprecatedFrameWithEvents,Object.assign({},e,{parentSize:n}))}return i.createElement(a.FrameWithMotion,Object.assign({},e,{ref:n}))}),t.Frame.rect=(e,t)=>c.isDeprecatedFrameProps(e)?s.DeprecatedFrame.rect(e):a.FrameWithMotion.rect(e),t.Frame.name="Frame"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(111);t.borderDefaults={borderEnabled:void 0,borderWidth:void 0,borderColor:void 0,borderStyle:void 0},t.hasBorder=e=>"borderEnabled"in e&&i.stylableNode(e)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(48),o=n(158),r=n(593),s=n(40),a=n(36),l=n(100),c=n(189),d=n(167),u=/<svg[^>]+stroke[^>]+>/;t.isSVGNode=function isSVGNode(e){return e instanceof SVGNode};class SVGNode extends(o.withPinsSizeRatioConstraints(i.default)){constructor(e){super(),a.setDefaults(this,r.SVGRecord,e)}updateForRect(e,t){return s.updateConstrainedFrame(e,t,this.constraints(),this.constraintsLocked)}updateForSize(e,t){return s.updateConstrainedSize(e,t,this.constraintValues())}supportsGradient(){return!u.test(this.svg)}getProps(){const e=Object.assign({},super.getProps(),l.collectStyleFromNode(this),this.newConstraintProperties(),{rotation:this.rotation,svg:this.svg,visible:this.visible,intrinsicHeight:this.intrinsicHeight||void 0,intrinsicWidth:this.intrinsicWidth||void 0});return this.__unsafeIsGroundNode()&&(e.left=0,e.top=0),c.collectFilterPropsForNode(this,e),d.collectFillPropsForNode(this,e),e}}t.default=SVGNode},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(1),o=n(251),r=n(129),s=n(66),a=n(55),l=n(61),c=n(22),d=n(164),u=n(51),h=n(86),p=n(253),g=["tabSize","whiteSpace"];function getCSSInfoForNode(e,t,n){const i=getCSSForNode(e,t),o=[];for(const r of Object.keys(i).sort((e,t)=>e.localeCompare(t))){const e=i[r];if(e&&-1===g.indexOf(r)){const t="CSS"===n?camelCaseToCSS(r):r,i=typeof e,s=addQuotesIfReactString(valueToCSS(e),n);o.push({type:i,prop:t,value:s})}}return o}function getCSSForNode(e,t){const n=t.getProps(),r=Object.assign({},n.style);return i.collectVisualStyleFromProps(n,r),n._border&&i.styles.collectBorder(n._border,r),o.collectTextStyleForNode(t,r),c.isCodeComponentNode(t)&&t.collectCSS(r),function migrateCSS(e,t){const n={};for(const i of Object.keys(t)){const{key:o,value:r}=migrateCSSKeyAndValue(i,t[i]);n[o]=r,u.isTokenCSSVariable(r)&&(n[o]=migrateCSSVariable(e,r))}return n}(e,r)}function camelCaseToCSS(e){let t="";for(const n of e)n.toUpperCase()===n?t+=`-${n.toLowerCase()}`:t+=n;return t}function valueToCSS(e){return"string"==typeof e?e.replace(/\b(rgb|hsv|hsl)a?\([^)]+\)/,e=>{const t=i.ConvertColor.toHexOrRgbaString(e);return t||e}):e}function migrateCSSVariable(e,t){const n=u.tokenIdFromCSSVariable(t);if(!n)return t;const i=h.findTokenNode(n,e);return i?`var(--${p.safeName(i.name)}, ${i.value})`:t}function migrateCSSKeyAndValue(e,t){if("rotate"===e)return{key:"transform",value:`rotate(${t}deg)`};if("WebkitTextFillColor"===e)return{key:"color",value:t};if("lineHeight"===e&&"string"==typeof t){const n=parseFloat(t);if(i.isFiniteNumber(n))return{key:e,value:n}}return{key:e,value:t}}function addQuotesIfReactString(e,t){return"React CSS"!==t?e:"string"!=typeof e?e:e.includes('"')?`\`${e}\``:`"${e}"`}t.collectStyleFromNode=function collectStyleFromNode(e){const t={};return r.withBlending(e)&&"normal"!==e.blendingMode&&(t.blendingMode=e.blendingMode),i.withOpacity(e)&&(t.opacity=e.opacity),a.withRadius(e)&&(t.radius=e.radius),a.withRelativeRadius(e)&&e.radiusIsRelative&&(t.radius=`${e.radius}%`),l.withRadiusPerCorner(e)&&e.radiusPerCorner&&(t.radius={topLeft:e.radiusTopLeft,topRight:e.radiusTopRight,bottomLeft:e.radiusBottomLeft,bottomRight:e.radiusBottomRight}),s.withFilters(e)&&1===e.blurEnabled&&("layer"===e.blurType?t.blur=e.blur:t.backgroundBlur=e.blur),t},t.copyCSSForNodeEnabled=function copyCSSForNodeEnabled(e){return!(null===e||d.isVectorNode(e)||c.isCodeComponentNode(e)&&!e.isStylable())},t.getCSSTextForNode=function getCSSTextForNode(e,t,n="CSS"){return getCSSInfoForNode(e,t,n).map(e=>`${e.prop}: ${e.value}`).join("\n")},t.getCSSInfoForNode=getCSSInfoForNode,t.getCSSForNode=getCSSForNode},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(7),o=n(85),r=n(1),s=n(188),a=n(25);t.guidesDefaults={guidesX:i.Set(),guidesY:i.Set()};const l="guidesX";function hasGuides(e){return l in e}t.hasGuides=hasGuides;t.closestGuideInRange=(e,n,i)=>{const o=d(e.root,n),r=t.getValidGuideNodeAtPoint(e,n);if(!r&&!o)return null;let s=o;if(r){const t=c(e,n,r),i=d(r,t);o?i?i&&o&&(s=i.distance>o.distance?o:i):s=o:s=i}return s&&s.distance*i<3?s.guide:null},t.getValidGuideNodeAtPoint=(e,n)=>{return e.getNodesAtPoint(n).filter(n=>e.isGroundNode(n)&&t.isValidGuideNode(n))[0]||null};const c=(e,t,n)=>{const i=e.convertFrameToCanvas(n);return{x:t.x-i.x,y:t.y-i.y}},d=(e,t)=>{const{guidesX:n,guidesY:i}=e,o=u(n,t.x),r=u(i,t.y);return o&&(!r||o.distance<r.distance)?{guide:{nodeId:e.id,axis:"x",offset:o.value},distance:o.distance}:r?{guide:{nodeId:e.id,axis:"y",offset:r.value},distance:r.distance}:null},u=(e,t)=>{let n=null,i=1/0;return e.forEach(e=>{const o=h(e,t);o<i&&(i=o,n=e)}),r.isFiniteNumber(n)?{value:n,distance:i}:null},h=(e,t)=>Math.abs(e-t);t.isValidGuideNode=e=>(!a.hasRotation(e)||0===e.rotation)&&hasGuides(e),t.getGuideNode=(e,n)=>{if(!n.nodeId||n.nodeId===e.root.id)return e.root;const i=e.getNode(n.nodeId);return i&&t.isValidGuideNode(i)?i:null},t.containGuide=(e,t)=>{const n=!t.nodeId&&o.isRootNode(e);return!(t.nodeId!==e.id&&!n)&&("y"===t.axis?e.guidesY:e.guidesX).has(t.offset)},t.isGuideInFrameRect=(e,t,n)=>{if(o.isRootNode(t))return!0;const i=e.convertFrameToCanvas(t),{offset:r,axis:s}=n;return r>=0&&r<=i["x"===s?"width":"height"]},t.getGuidesKey=e=>"x"===e?"guidesX":"guidesY",t.getGuides=(e,n)=>e[t.getGuidesKey(n)],t.isEqualGuide=(e,t)=>!(!e||!t)&&s.isEqual(e,t),t.getAbsoluteOffset=(e,t,n,i)=>{return e.convertFrameToCanvas(t)[n]+i},t.getGuideAbsoluteOffset=(e,n)=>{const i=t.getGuideNode(e,n);if(!i)return null;const{axis:o,offset:r}=n;return t.getAbsoluteOffset(e,i,o,r)},t.getRelativeOffset=(e,t,n,i)=>{return i-e.convertFrameToCanvas(t)[n]},t.getOrthogonalAxis=e=>"x"===e?"y":"x"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(107);t.log=i.getLogger("editor"),t.loggingAtDebug=function loggingAtDebug(){return t.log.getLevel()<=i.levels.DEBUG}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.capitalizeFirstLetter=function capitalizeFirstLetter(e){return e.charAt(0).toUpperCase()+e.slice(1)},t.capitalizeFirstLetterWithLocale=function capitalizeFirstLetterWithLocale(e){return e.charAt(0).toLocaleUpperCase()+e.slice(1)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i;!function(e){e.isImageObject=function(e){return!(!e||"string"==typeof e)&&"src"in e}}(i||(i={})),t.BackgroundImage=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(21),o=n(18);function _imageURL(e,t,n,r,s){if(null===e)return"";if(/^\w+:/.test(e))return e;if(!r||r.target===i.RenderTarget.export||r.target===i.RenderTarget.preview||(null===t||null===n))return imageURLForSize(e,s,null);const a=o.safeWindow.devicePixelRatio||1,l=Math.max(t||0,n||0),c=Math.max(r&&r.frame.width||0,r&&r.frame.height||0);let d=null;return l*a>4096&&(d=4096),c*a<4096&&(d=2048),c*a<1024&&(d=1024),c*a<512&&(d=512),imageURLForSize(e,s,d)}function _imageScalingMethod(e,t,n,r,s,a,l="fill"){if(null===e)return"auto";if(!t)return"auto";const{frame:c,zoom:d,target:u}=t;let h=c.width,p=c.height;d>1&&(h*=d,p*=d),u!==i.RenderTarget.export&&u!==i.RenderTarget.preview&&o.safeWindow.devicePixelRatio&&(h*=o.safeWindow.devicePixelRatio,p*=o.safeWindow.devicePixelRatio);const g=s||n||0,m=a||r||0;if("fill"===l){if(h>g||p>m)return"pixelated"}else if(h>g&&p>m)return"pixelated";return"auto"}function imageURLForSize(e,t,n){if(null===e)return"";const i=0===t.length||t.endsWith("/")?"":"/";return t+i+(null===n||0===e.indexOf("node_modules")?"":`../../.cache/images/${n}/`)+e}function resolveImagePath(e,t,n){return e.startsWith("http://")||e.startsWith("https://")||e.startsWith("file://")?e:(e.startsWith("node_modules/")&&(e="../../"+e),n===i.RenderTarget.export?`##base64-${t}${e}##`:n===i.RenderTarget.preview?`${t.replace(/\/$/,"")}/design/images/${e}`:`${t.replace(/\/$/,"")}/${e}`)}t.imageUrlForAsset=function imageUrlForAsset(e,t){const{imageBaseURL:n}=i.RenderEnvironment;let o=null,r=null;return void 0!==t&&(o={frame:{x:0,y:0,width:t=Math.max(1,t),height:t},target:i.RenderTarget.canvas,zoom:0},r=t),resolveImagePath(_imageURL(e,r,r,o,""),n,i.RenderTarget.current())},t.imageUrlForFill=function imageUrlForFill(e,t=null){const{src:n,intrinsicWidth:o,intrinsicHeight:r}=e,{imageBaseURL:s}=i.RenderEnvironment;return resolveImagePath(_imageURL(n,o||null,r||null,t,""),s,t?t.target:i.RenderTarget.canvas)},t.setImageForFill=function setImageForFill(e,t,n){const{src:o,pixelWidth:r,pixelHeight:s,intrinsicWidth:a,intrinsicHeight:l}=e,{imageBaseURL:c}=i.RenderEnvironment,d=resolveImagePath(_imageURL(o,a||null,l||null,t,""),c,t?t.target:i.RenderTarget.canvas);n.backgroundImage=`url("${d}")`,n.backgroundSize=function cssBackgroundSize(e){switch(e){case"fit":return"contain";case"stretch":return"100% 100%";case"fill":default:return"cover"}}(e.fit),n.backgroundRepeat="no-repeat",n.backgroundPosition="center",n.imageRendering=_imageScalingMethod(o,t,a||null,l||null,r||null,s||null,e.fit)},t._imageURL=_imageURL,t._imageScalingMethod=_imageScalingMethod},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isReactElement=function isReactElement(e){return"string"!=typeof e&&"number"!=typeof e},t.isReactChild=function isReactChild(e){return null!=e&&"boolean"!=typeof e&&!function isEmpty(e){return!e||!Object.keys(e).length&&e.constructor===Object}(e)}},function(e,t){e.exports=require("loglevel")},function(e,t,n){"use strict";function findIndex(e,t,n){return n?e.findIndex(e=>n(e,t)):e.indexOf(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.intersection=(e,t,n)=>{const i=[];for(const o of e){-1!==findIndex(t,o,n)&&i.push(o)}return i},t.union=(e,t,n)=>{if(!n)return Array.from(new Set([...e,...t]));const i=[...e];for(const o of t){-1===findIndex(i,o,n)&&i.push(o)}return i},t.without=(e,t,n)=>e.filter(e=>{return-1===findIndex(t,e,n)})},function(e,t,n){"use strict";function isShallowArrayEqual(e,t){if(e===t)return!0;const n=e.length;if(n!==t.length)return!1;for(let i=0;i<n;i++)if(e[i]!=t[i])return!1;return!0}function isShallowObjectEqual(e,t){if(e===t)return!0;const n=Object.keys(e),i=n.length;if(i!==Object.keys(t).length)return!1;for(let o=i;0!=o--;){const i=n[o];if(e[i]!=t[i])return!1}return!0}function isShallowEqual(e,t){return e===t||e instanceof Object&&(t instanceof Object&&(Array.isArray(e)?!!Array.isArray(t)&&isShallowArrayEqual(e,t):isShallowObjectEqual(e,t)))}Object.defineProperty(t,"__esModule",{value:!0}),t.isShallowArrayEqual=isShallowArrayEqual,t.isShallowObjectEqual=isShallowObjectEqual,t.isShallowEqual=isShallowEqual,t.default=isShallowEqual},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NullID=null,t.InvalidID="i-invalid";const i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789_";function l(){return o[Math.floor(Math.random()*o.length)]}t.randomID=function randomID(){return function f(){return i[Math.floor(Math.random()*i.length)]}()+l()+l()+l()+l()+l()+l()+l()+l()},t.nodeIDFromString=function nodeIDFromString(e){return e.startsWith("id_")&&(e=e.slice(3)),e.replace(/\\/g,"")};let r=function fallbackEscape(e){return e};window.CSS&&window.CSS.escape&&(r=window.CSS.escape),t.stringFromNodeID=function stringFromNodeID(e){return r("id_"+e)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(22);t.stylableNode=function stylableNode(e){return!i.isCodeComponentNode(e)||e.isStylable()}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.intrinsicSizeDefaults={intrinsicWidth:null,intrinsicHeight:null};const i="intrinsicWidth";t.hasIntrinsicSize=function hasIntrinsicSize(e){return i in e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.codeOverrideDefaults={codeOverrideEnabled:!1,codeOverrideIdentifier:void 0,codeOverrideFile:void 0,codeOverrideName:void 0};const i="codeOverrideIdentifier";function hasCodeOverride(e){return i in e}t.hasCodeOverride=hasCodeOverride,t.reduceOverride=function reduceOverride(e,t){if(hasCodeOverride(e)){if(e.codeOverrideFile&&-1===t.codeOverrideFiles.indexOf(e.codeOverrideFile)&&t.codeOverrideFiles.push(e.codeOverrideFile),void 0===t.codeOverrideEnabled)return t.codeOverrideEnabled=e.codeOverrideEnabled,t.codeOverrideIdentifier=e.codeOverrideIdentifier,void(t.codeOverrideName=e.codeOverrideName);null!==t.codeOverrideEnabled&&e.codeOverrideEnabled!==t.codeOverrideEnabled&&(t.codeOverrideEnabled=null),null!==t.codeOverrideIdentifier&&e.codeOverrideIdentifier!==t.codeOverrideIdentifier&&(t.codeOverrideIdentifier=null),null!==t.codeOverrideName&&e.codeOverrideName!==t.codeOverrideName&&(t.codeOverrideName=null)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.fillDefaults={fillEnabled:!0,fillType:"color",fillColor:"rgba(255,255,255,1)",fillLinearGradient:void 0,fillRadialGradient:void 0,fillImage:null,fillImageResize:"fill",fillImagePixelWidth:null,fillImagePixelHeight:null},t.codeComponentFillDefaults=Object.assign({},t.fillDefaults,{fillEnabled:!1}),t.svgFillDefaults={fillType:"color",fillColor:"rgba(0,0,0,1)",fillLinearGradient:void 0,fillRadialGradient:void 0,fillImage:null,fillImageResize:"fill",fillImagePixelWidth:null,fillImagePixelHeight:null},t.pathFillDefaults={fillEnabled:!1,fillType:"color",fillColor:"rgba(0,170,255,0.5)",fillLinearGradient:void 0,fillRadialGradient:void 0,fillImage:null,fillImageResize:"fill",fillImagePixelWidth:null,fillImagePixelHeight:null},t.shapeFillDefaults={fillEnabled:!0,fillType:"color",fillColor:"#CCC",fillLinearGradient:void 0,fillRadialGradient:void 0,fillImage:null,fillImageResize:"fill",fillImagePixelWidth:null,fillImagePixelHeight:null},t.shapeContainerFillDefaults={fillEnabled:!0,fillType:"color",fillColor:"#FFF",fillLinearGradient:void 0,fillRadialGradient:void 0,fillImage:null,fillImageResize:"fill",fillImagePixelWidth:null,fillImagePixelHeight:null}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.clipDefaults={clip:!0};const i=n(111),o="clip";function hasClip(e){return o in e&&i.stylableNode(e)}t.hasClip=hasClip,t.reduceClip=function reduceClip(e,t){hasClip(e)&&(void 0===t.clip?t.clip=e.clip:null!==t.clip&&t.clip!==e.clip&&(t.clip=null))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.positionDefaults={x:0,y:0};const i="x";t.hasPosition=function hasPosition(e){return i in e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.scroll="framer/Scroll",e.page="framer/Page",e.stack="framer/Stack",e.all=[e.scroll,e.page,e.stack]}(t.HardCodedCodeIdentifier||(t.HardCodedCodeIdentifier={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(1),o=n(610),r=n(51),s=n(163),a=n(57);t.isLinearGradient=function isLinearGradient(e){return e instanceof LinearGradient};class LinearGradient extends o.LinearGradientRecord{toJS(){let e=this.__js;return e||((e=super.toJS()).__class=this.constructor.name,this.stops.some(e=>r.isTokenCSSVariable(e.value))&&(e.alpha=1),this.__js=e)}toJSON(){return this.toJS()}toCSS(e){const{__css:t,__overrideAngle:n}=this;return e===n&&t?t:(this.__overrideAngle=e,this.__css=i.LinearGradient.toCSS(this.toJS(),e))}equals(e){return this.angle===e.angle&&this.equalColors(e)}equalColors(e){return this.alpha===e.alpha&&this.stops.count()===e.stops.count()&&this.stops.every((t,n)=>{const o=e.stops.get(n);return(t.value===o.value||i.ConvertColor.equals(t.value,o.value))&&t.position===o.position})}tokenVariables(){const e=[];return this.stops.forEach(t=>{r.isTokenCSSVariable(t.value)&&e.push(t.value)}),e}removeTokenVariables(e){let t=!1;const n=this.stops.map(n=>{const i=s.findValueForTokenCSSVariable(n.value,e);return i?(t=!0,new a.GradientColorStop(n.merge({value:i}))):n});if(t)return new LinearGradient(Object.assign({},this.toJS(),{stops:n}))}}t.LinearGradient=LinearGradient},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(1);t.navigationLinkDefaults={navigationTarget:null,navigationTransition:i.NavigationTransitionType.push,navigationTransitionDirection:"left",navigationTransitionBackdropColor:"rgba(4,4,15,.4)"};const o="navigationTarget";t.hasNavigationLink=function hasNavigationLink(e){return o in e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(7),o=n(1),r=n(32),s=n(11);t.snappingThreshold=e=>Math.max(.5,4/e);t.snappingData=(e,t,n)=>{let o=i.Set(),a=i.Set();return e.forEach(e=>{if(void 0!==t){const n=e.width*t,i=e.height*t;if(n<12&&i<12)return}const i=n?r.PointRounding.Half:r.PointRounding.Full,{x:l,y:c}=s.roundedPoint({x:e.x,y:e.y},i),{x:d,y:u}=s.roundedPoint({x:e.x+e.width/2,y:e.y+e.height/2},i),{x:h,y:p}=s.roundedPoint({x:e.x+e.width,y:e.y+e.height},i);o=o.union([l,d,h]),a=a.union([c,u,p])}),{x:o,y:a}};const a=(e,t,n,o)=>{let r=i.Map();const s=t?n.x:n.y;let a=null,l=null;if("number"==typeof n.width&&"number"==typeof n.height){const{width:e,height:i}=n;a=t?n.x+e/2:n.y+i/2,l=t?n.x+e:n.y+i}return e.forEach(e=>{const t=Math.abs(s-e),n=Math.abs((a||0)-e),c=Math.abs((l||0)-e);let d=null;if(t<o?d=e:null!==a&&n<o?d=e-Math.abs(a-s):null!==l&&c<o&&(d=e-Math.abs(l-s)),null!==d){const t=r.get(d,i.Set());r=r.set(d,t.add(e))}}),r},l=(e,t,n)=>{return{x:a(e.x,!0,t,n),y:a(e.y,!1,t,n)}},c=(e,t)=>{let n,i=0;return e.forEach((e,o)=>{void 0!==t&&o===t||e.size>i&&(i=e.size,n=[o,e])}),n},d=(e,n)=>{if(!n)return e;const i=t.snappingData(n);return{x:e.x.union(i.x),y:e.y.union(i.y)}};t.snap=(e,n,o,r,s)=>{e=d(e,s);const a=t.snappingThreshold(n),u=((e,t)=>{return{x:c(e.x,t?t.x:void 0),y:c(e.y,t?t.y:void 0)}})(l(e,o,a),r),[h,p]=u.x?u.x:[void 0,i.Set()],[g,m]=u.y?u.y:[void 0,i.Set()];return{point:{x:h,y:g},snapLines:{x:p,y:m}}};const u=(e,t,n,i,r,s)=>{let a=null;return e.forEach(e=>{const l=s(e);if(null!==(a=o.Line.intersection(l,i)))return!r&&(!(o.Point.distance(a,n)<=t)&&void(a=null))}),a};t.snapWithConstraint=(e,n,r,s,a,c=!1)=>{e=d(e,a);const h=t.snappingThreshold(n),p=l(e,r,h),g=o.Line.isOrthogonal(s)||c,m=(e=>Math.max(.5,16/e))(n);let f=null;const y=i.Set(),v=i.Set();if(null!==(f=u(p.x.keySeq().toList(),m,r,s,g,e=>o.Line({x:e,y:0},{x:e,y:100}))))return{point:f,snapLines:{x:y.add(f.x),y:v}};if(null!==(f=u(p.y.keySeq().toList(),m,r,s,g,e=>o.Line({x:0,y:e},{x:100,y:e}))))return{point:f,snapLines:{x:y,y:v.add(f.y)}};const b=o.Line.perpendicular(s,r);return null===(f=o.Line.intersection(s,b))&&(f=r),{point:f,snapLines:{x:y,y:v}}},t.snapDistance=(e,n,i,r)=>{const s=Object.assign({},n),a=[],l=[],c=[],d=[],u=t.snappingThreshold(r),{x:h,y:p}=i,g="height"in i?i.height:0,m="width"in i?i.width:0,f=h+m,y=p+g,v={x:h,y:p,width:m,height:g};return e.siblingFrames.forEach(t=>{e.horizontalDistances.forEach((n,i)=>{let r=n.filter(e=>o.Rect.overlapVertically(v,e));if(0!==r.length&&o.Rect.overlapVertically(v,t))if(Math.abs(t.x-i-f)<u){const n={x:t.x-i,y:t.y,width:i,height:t.height};if(0===(r=r.filter(e=>!o.Rect.overlapHorizontally(e,n))).length)return;if(o.Rect.doesNotIntersect(n,e.siblingFrames)){const e=t.x-i-m;void 0!==s.x&&s.x!==e||(a.push(...r),c.push(n),s.x=e)}}else if(Math.abs(o.Rect.maxX(t)+i-h)<u){const n={x:o.Rect.maxX(t),y:t.y,width:i,height:t.height};if(0===(r=r.filter(e=>!o.Rect.overlapHorizontally(e,n))).length)return;if(o.Rect.doesNotIntersect(n,e.siblingFrames)){const e=o.Rect.maxX(t)+i;void 0!==s.x&&s.x!==e||(a.push(...r),c.push(n),s.x=e)}}}),e.verticalDistances.forEach((n,i)=>{let r=n.filter(e=>o.Rect.overlapHorizontally(v,e));if(0!==r.length&&o.Rect.overlapHorizontally(v,t))if(Math.abs(t.y-i-y)<u){const n={y:t.y-i,x:t.x,height:i,width:t.width};if(0===(r=r.filter(e=>!o.Rect.overlapVertically(e,n))).length)return;if(o.Rect.doesNotIntersect(n,e.siblingFrames)){const e=t.y-i-g;void 0!==s.y&&s.y!==e||(l.push(...r),d.push(n),s.y=e)}}else if(Math.abs(o.Rect.maxY(t)+i-p)<u){const n={y:o.Rect.maxY(t),x:t.x,height:i,width:t.width};if(0===(r=r.filter(e=>!o.Rect.overlapVertically(e,n))).length)return;if(o.Rect.doesNotIntersect(n,e.siblingFrames)){const e=o.Rect.maxY(t)+i;void 0!==s.y&&s.y!==e||(l.push(...r),d.push(n),s.y=e)}}})}),{distanceSnap:s,distanceFramesX:a,distanceFramesY:l,horizontalDistanceFrames:c,verticalDistanceFrames:d}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(24),o=n(433),r=n(218),s=n(176),a=n(103),l=n(219),c=n(102);function nameAndExtensionFor(e){const t=e.lastIndexOf(".");return t<0?{name:e,extension:""}:{name:e.slice(0,t),extension:e.slice(t)}}function hasValidExtension(e){return!!e.endsWith(".json")||/\.[tj]sx?$/.test(e)}function restoreExtension(e,t){if(hasValidExtension(e))return e;let{extension:n}=nameAndExtensionFor(t);return n&&hasValidExtension(n)||(n=l.tsxExtension),e+n}function dirname(e){const t=e.lastIndexOf("/");return t<0?"":e.slice(0,t)}function filename(e){const t=e.lastIndexOf("/")+1;return e.slice(t)}function pathjoin(...e){let t="";return e.forEach(e=>{for(;e.startsWith("/");)e=e.slice(1);for(;e.endsWith("/");)e=e.slice(0,-1);""!==e&&(""!==t&&(t+="/"),t+=e)}),t}t.nameAndExtensionFor=nameAndExtensionFor,t.hasValidExtension=hasValidExtension,t.restoreExtension=restoreExtension,t.dirname=dirname,t.filename=filename,t.pathjoin=pathjoin;class EditableFile{constructor(e,t,n){this.manager=e,this.path=t,this.content=n,this.edited=!1,this.formatted=!1,this.errors=!1,this.disposed=!1,this.backgroundSyncTimerRepeat=0,this.backgroundSyncTimer=null,this.afterSaveCallback=void 0,this.latestRemoteUpdate=-1,this.latestLocalUpdate=-1,this.backgroundSync=()=>{if(this.backgroundSyncTimerRepeat>0)return this.backgroundSyncTimerRepeat-=1,void(this.backgroundSyncTimer=setTimeout(this.backgroundSync,250));if(this.backgroundSyncTimer=null,this.isDisposed())return;const e=this.model.getValue();this.content!==e&&(this.content=e,this.manager.localChanged(this))},this.model=e.factory.create(t,n),this.name=filename(t),this.sortName=nameAndExtensionFor(t).name,this.folderSortName=dirname(t),this.folders=this.folderSortName.split("/").filter(e=>e)}locallyChanged(){return this.latestLocalUpdate>this.latestRemoteUpdate}remoteInSync(){this.latestRemoteUpdate=this.latestLocalUpdate}dispose(){this.disposed||(this.disposed=!0,this.model.dispose())}isDisposed(){return this.disposed}markAsEdited(){this.edited=!0,this.formatted=!1}hasEdits(){return this.edited}setHasErrors(e){this.errors=e}hasErrors(){return this.errors}setContent(e){this.content!==e&&(this.content=e,this.model.getValue()!==e&&(this.manager.factory.setValue(this.model,e),this.edited=!1,this.formatted=!1))}format(e=this.model.getValue()){try{const n=o.formatCode(e);return n===e?e:(this.manager.factory.setValue(this.model,n),this.edited=!0,this.formatted=!0,n)}catch(t){return c.log.warn("[prettier] error:",t),e}}sync(e){this.afterSaveCallback=e;let t=this.model.getValue();return this.formatted||(t=this.format(t)),this.content=t,this.edited=!1,this.manager.localChanged(this),this.content}backgroundSyncSoon(){this.backgroundSyncTimerRepeat=1,clearTimeout(this.backgroundSyncTimer),this.backgroundSyncTimer=setTimeout(this.backgroundSync,250)}didSave(){this.afterSaveCallback&&(this.afterSaveCallback(),this.afterSaveCallback=void 0)}}t.EditableFile=EditableFile,t.createComponentFile=function createComponentFile(e){e=e.trim();const{name:t,extension:n}=nameAndExtensionFor(filename(e)),i=dirname(e).split("/").map(e=>s.sanitizedDirectoryName(e)).filter(e=>!!e).join("/");let c=s.sanitizedVariableName(t)||"MyComponent";if(hasValidExtension(n)&&n!==l.tsxExtension)return{path:pathjoin(i,c+n),content:""};c=a.capitalizeFirstLetterWithLocale(c);const d=r.createCodeFile(c);return{path:pathjoin(i,restoreExtension(c+n,d.name)),content:o.formatCode(d.content)}},t.updateFileTypes=function updateFileTypes(e){e.root.walk(e=>{e instanceof EditableFile&&(e.type=null)}),i.componentLoader.componentsForPackage(i.componentLoader.localPackageIdentifier()).forEach(t=>{const n=function fileItemTypeFor(e){switch(e){case"component":case"override":return e;default:return null}}(t.type);if(!n)return;let i=t.file;i.startsWith("./")&&(i=i.slice("./".length));const o=e.get(i);o&&(t.name===o.sortName?o.type=n:o.type||(o.type=n))}),e.somethingUpdated()}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(24),r=n(2),s=n(6),a=n(10),l=n(817),c=n(5),d=n(1),u=n(93),h=n(51),p=n(86),g=n(188);t.localTokensDisplayName="Shared Colors";class ColorPicker extends i.PureComponent{static calculateState(){const e=r.default.documentSettings.getColorPickerActivePreset();return{selection:r.default.treeStore.selection,colorModel:r.default.persistedUserDefaults.colorModel,colorPresets:r.default.persistedUserDefaults.colorPresets,gradientColorStopPresets:r.default.persistedUserDefaults.gradientColorStopPresets,colorStopSelection:r.default.documentSettings.gradientStopIndex,gradientToolActive:r.default.toolStore.state.tool===c.Tools.Gradient,tokenPackages:tokenPackages(),selectedTokenPackage:e}}render(){let e,t=null,n=this.props.value;if(e="string"==typeof n?n:n.stops.get(this.state.colorStopSelection).value,h.isTokenCSSVariable(e)){const i=h.tokenIdFromCSSVariable(e);(t=i?p.findTokenNode(i,r.default.tree):null)||(n=h.fallbackValueFromCSSVariable(e)||"transparent")}return i.createElement(l.ColorPickerPopover,Object.assign({},this.props,this.state,{value:n,token:t}))}}ColorPicker.engineChangeKeys=s.EngineChangeFlags.TreeStore|s.EngineChangeFlags.ToolStore|s.EngineChangeFlags.UserDefaultsStore|s.EngineChangeFlags.GradientTool|s.EngineChangeFlags.Selection|s.EngineChangeFlags.ColorPicker;const m=a.default(ColorPicker);let f;function tokenPackages(){const e={},n=p.getTokenByPackageIdMap(r.default.tree,u.ColorTokenNode);let i=!1;for(const r in n){const s=r===d.localPackageFallbackIdentifier,a=n[r];if(f&&f[r]){const e=f[r].tokens;i=i||!equalKeyOrder(a,e)}e[r]={packageIdentifier:s?d.localPackageFallbackIdentifier:r,displayName:s?t.localTokensDisplayName:o.componentLoader.packageDisplayName(r)||"Unnamed Package",tokens:a,tokensCount:Object.keys(a).length,isEditable:s,isLocal:s}}return n[d.localPackageFallbackIdentifier]||(e[d.localPackageFallbackIdentifier]={packageIdentifier:d.localPackageFallbackIdentifier,displayName:t.localTokensDisplayName,tokens:{},tokensCount:0,isEditable:!0,isLocal:!0}),!i&&f&&g.isEqual(e,f,!0)?f:f=e}function equalKeyOrder(e,t){const n=Object.keys(e),i=Object.keys(t);return g.isEqual(n,i)}t.ColorPicker=m,t.trackingMetadata=function trackingMetadata(e,t){if(!e.length)return;return{nodeType:e[0].constructor.name,nodeProperty:t}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.RGB="rgb",e.HSL="hsl",e.HSV="hsv",e.HEX="hex",e.NAME="name"}(t.ColorFormat||(t.ColorFormat={})),function(e){e.RGB="rgb",e.RGBA="rgba",e.HSL="hsl",e.HSLA="hsla",e.HUSL="husl"}(t.ColorMixModelType||(t.ColorMixModelType={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(228),o=n(149);!function(e){e.equals=function equals(e,t){return e===t||!(!e||!t)&&e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height},e.atOrigin=e=>Object.assign({},e,{x:0,y:0}),e.fromTwoPoints=(e,t)=>({x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),width:Math.abs(e.x-t.x),height:Math.abs(e.y-t.y)}),e.fromRect=e=>({x:e.left,y:e.top,width:e.right-e.left,height:e.bottom-e.top}),e.multiply=(e,t)=>({x:e.x*t,y:e.y*t,width:e.width*t,height:e.height*t}),e.divide=(t,n)=>e.multiply(t,1/n),e.offset=(e,t)=>{const n="number"==typeof t.x?t.x:0,i="number"==typeof t.y?t.y:0;return Object.assign({},e,{x:e.x+n,y:e.y+i})},e.inflate=function inflate(e,t){if(0===t)return e;const n=2*t;return{x:e.x-t,y:e.y-t,width:e.width+n,height:e.height+n}},e.pixelAligned=e=>{const t=Math.round(e.x),n=Math.round(e.y),i=Math.round(e.x+e.width),o=Math.round(e.y+e.height);return{x:t,y:n,width:Math.max(i-t,0),height:Math.max(o-n,0)}},e.halfPixelAligned=e=>{const t=Math.round(2*e.x)/2,n=Math.round(2*e.y)/2,i=Math.round(2*(e.x+e.width))/2,o=Math.round(2*(e.y+e.height))/2;return{x:t,y:n,width:Math.max(i-t,1),height:Math.max(o-n,1)}},e.round=(e,t=0)=>{return{x:o.roundedNumber(e.x,t),y:o.roundedNumber(e.y,t),width:o.roundedNumber(e.width,t),height:o.roundedNumber(e.height,t)}},e.roundToOutside=e=>{const t=Math.floor(e.x),n=Math.floor(e.y),i=Math.ceil(e.x+e.width),o=Math.ceil(e.y+e.height);return{x:t,y:n,width:Math.max(i-t,0),height:Math.max(o-n,0)}},e.minX=e=>e.x,e.maxX=e=>e.x+e.width,e.minY=e=>e.y,e.maxY=e=>e.y+e.height,e.positions=t=>({minX:t.x,midX:t.x+t.width/2,maxX:e.maxX(t),minY:t.y,midY:t.y+t.height/2,maxY:e.maxY(t)}),e.center=e=>({x:e.x+e.width/2,y:e.y+e.height/2}),e.fromPoints=e=>{const t=e.map(e=>e.x),n=e.map(e=>e.y),i=Math.min(...t),o=Math.min(...n);return{x:i,y:o,width:Math.max(...t)-i,height:Math.max(...n)-o}},e.merge=(...t)=>{const n={x:Math.min(...t.map(e.minX)),y:Math.min(...t.map(e.minY))},i={x:Math.max(...t.map(e.maxX)),y:Math.max(...t.map(e.maxY))};return e.fromTwoPoints(n,i)},e.intersection=(e,t)=>{const n=Math.max(e.x,t.x),i=Math.min(e.x+e.width,t.x+t.width),o=Math.max(e.y,t.y);return{x:n,y:o,width:i-n,height:Math.min(e.y+e.height,t.y+t.height)-o}},e.points=t=>[{x:e.minX(t),y:e.minY(t)},{x:e.minX(t),y:e.maxY(t)},{x:e.maxX(t),y:e.minY(t)},{x:e.maxX(t),y:e.maxY(t)}],e.containsPoint=(t,n)=>!(n.x<e.minX(t))&&(!(n.x>e.maxX(t))&&(!(n.y<e.minY(t))&&(!(n.y>e.maxY(t))&&(!isNaN(t.x)&&!isNaN(t.y))))),e.containsRect=(t,n)=>{for(const i of e.points(n))if(!e.containsPoint(t,i))return!1;return!0},e.toCSS=e=>({display:"block",transform:`translate(${e.x}px, ${e.y}px)`,width:`${e.width}px`,height:`${e.height}px`}),e.inset=(e,t)=>({x:e.x+t,y:e.y+t,width:Math.max(0,e.width-2*t),height:Math.max(0,e.height-2*t)}),e.intersects=(t,n)=>!(n.x>=e.maxX(t)||e.maxX(n)<=t.x||n.y>=e.maxY(t)||e.maxY(n)<=t.y),e.overlapHorizontally=(t,n)=>{const i=e.maxX(t),o=e.maxX(n);return i>n.x&&o>t.x},e.overlapVertically=(t,n)=>{const i=e.maxY(t),o=e.maxY(n);return i>n.y&&o>t.y},e.doesNotIntersect=(t,n)=>void 0===n.find(n=>e.intersects(n,t)),e.isEqual=(e,t)=>{if(e&&t){const{x:n,y:i,width:o,height:r}=e;return t.x===n&&t.y===i&&t.width===o&&t.height===r}return e===t},e.cornerPoints=e=>{const t=e.x,n=e.x+e.width,i=e.y,o=e.y+e.height;return[{x:t,y:i},{x:n,y:i},{x:n,y:o},{x:t,y:o}]},e.midPoints=e=>{const t=e.x,n=e.x+e.width/2,i=e.x+e.width,o=e.y,r=e.y+e.height/2;return[{x:n,y:o},{x:i,y:r},{x:n,y:e.y+e.height},{x:t,y:r}]},e.pointDistance=(t,n)=>{let o=0,r=0;return n.x<t.x?o=t.x-n.x:n.x>e.maxX(t)&&(o=n.x-e.maxX(t)),n.y<t.y?r=t.y-n.y:n.y>e.maxY(t)&&(r=n.y-e.maxY(t)),i.Point.distance({x:o,y:r},{x:0,y:0})};const t={x:0,y:0,width:0,height:0};e.fromAny=(e,n=t)=>({x:e.x||n.x,y:e.y||n.y,width:e.width||n.width,height:e.height||n.height})}(t.Rect||(t.Rect={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isInterpolatable=function isInterpolatable(e){return"function"==typeof e&&e.interpolationFor&&"function"==typeof e.interpolationFor},function(e){e.handleUndefined=function handleUndefined(e,t){return void 0===e&&(e=t),void 0===t&&(t=e),[e,t]}}(t.Interpolation||(t.Interpolation={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.Google="google",e.Local="local"}(t.TypefaceSourceNames||(t.TypefaceSourceNames={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.borderPerSideDefaults={borderPerSide:void 0,borderTop:void 0,borderRight:void 0,borderBottom:void 0,borderLeft:void 0};const i="borderPerSide";t.hasBorderPerSide=function hasBorderPerSide(e){return i in e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.previewSettingsDefaults={previewSettings:null};const i="previewSettings";t.hasPreviewSettings=function hasPreviewSettings(e){return i in e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(111),o=n(72);t.blendingDefaults={blendingEnabled:o.Property.disabledHidden,blendingMode:"normal"},t.blendingModeKey="blendingMode",t.withBlending=function withBlending(e){return t.blendingModeKey in e&&i.stylableNode(e)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(4),o=n(597),r=n(1),s=n(19),a=n(254),l=n(134),c=n(135),d=n(11),u=n(36);t.isPathNode=function isPathNode(e){return e instanceof PathNode};class PathNode extends(l.withFrameForShape(c.withBaseShapeTraits(i.CanvasNode))){constructor(e){super(),u.setDefaults(this,o.PathRecord,e),delete this.children}rect(e){return{x:this.x,y:this.y,width:this.width,height:this.height}}matrix(e,t){const n={x:this.x,y:this.y};return t&&(n.x=t.x,n.y=t.y),(new WebKitCSSMatrix).translate(n.x,n.y).rotate(0,0,this.rotation)}transformMatrix(e,t){const n={width:this.width,height:this.height};return t&&(n.width=t.width,n.height=t.height),(new WebKitCSSMatrix).translate(.5*n.width,.5*n.height).multiply(this.matrix(e,t)).translate(-.5*n.width,-.5*n.height)}isRotated(){return this.rotation%360!=0}calculatedPaths(){return this.mutable?this.calculatePaths():(this.cache.calculatedPaths||(this.cache.calculatedPaths=this.calculatePaths()),this.cache.calculatedPaths)}calculatePaths(){const{pathSegments:e,pathClosed:t}=this;return[s.default.applyRadius(e,t)]}updateForRect(e,t){e.width=Math.max(1,e.width),e.height=Math.max(1,e.height);const n=this.rect(t),i=[n.x,n.x+n.width],o=[e.x,e.x+e.width],l=[n.y,n.y+n.height],c=[e.y,e.y+e.height],d=0===n.width?1:e.width/n.width,u=0===n.height?1:e.height/n.height;let h=this.pathSegments.map(e=>new r.PathSegment(e.merge({x:a.default(e.x+n.x,i,o,!1),y:a.default(e.y+n.y,l,c,!1),handleOutX:e.handleOutX*d,handleOutY:e.handleOutY*u,handleInX:e.handleInX*d,handleInY:e.handleInY*u})));const p=s.default.boundingBox({pathSegments:h,pathClosed:this.pathClosed});return{pathSegments:h=h.map(e=>new r.PathSegment(e.merge(r.Point.subtract(e,p)))),x:p.x,y:p.y,width:p.width,height:p.height}}updateForSize(e,t){const n=this.rect(t);return this.updateForRect(Object.assign({},n,e),t)}updateForPath(e){const t=void 0!==e.pathSegments?e.pathSegments:this.pathSegments;let n=void 0!==e.pathClosed?e.pathClosed:this.pathClosed;if(void 0!==e.pathSegments&&n){const t=e.pathSegments.count();if(2===t){const t=e.pathSegments.get(0),i=e.pathSegments.get(1),o=r.isStraightCurve(t,i),s=r.isStraightCurve(i,t);o&&s&&(n=!1)}else t<2&&(n=!1)}const i=s.default.boundingBox({pathSegments:t,pathClosed:n}),o=i.x,a=i.y,l={x:this.x+o,y:this.y+a,width:i.width,height:i.height},c=d.convertPoint({x:0,y:0},this,this.rotation),u=d.convertPoint({x:-o,y:-a},l,this.rotation),h=r.Point.subtract(c,u);l.x+=h.x,l.y+=h.y;const p=t.map(e=>{const t=r.Point.subtract(e,{x:o,y:a});return new r.PathSegment(e.merge(t))}),g=n?this.strokeAlignment:"center";return Object.assign({},l,{pathSegments:p,pathClosed:n,strokeAlignment:g})}}t.default=PathNode},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.autoSizeDefaults={autoSize:!0},t.hasAutoSize=function hasAutoSize(e){return"autoSize"in e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.targetDefaults={isTarget:!1};const i="isTarget";t.withTarget=function withTarget(e){return i in e}},function(e,t){e.exports=require("paper")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.withFrameForShape=function withFrameForShape(e){return class extends e{rect(e){return{x:this.x,y:this.y,width:this.width,height:this.height}}matrix(e,t){const n={x:this.x,y:this.y};return t&&(n.x=t.x,n.y=t.y),(new WebKitCSSMatrix).translate(n.x,n.y).rotate(0,0,this.rotation)}transformMatrix(e,t){const n={width:this.width,height:this.height};return t&&(n.width=t.width,n.height=t.height),(new WebKitCSSMatrix).translate(.5*n.width,.5*n.height).multiply(this.matrix(e,t)).translate(-.5*n.width,-.5*n.height)}isRotated(){return this.rotation%360!=0}updateForRect(e,t){return e}updateForSize(e,t){return e}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(4),o=n(48),r=n(1),s=n(19),a=n(42),l=n(250),c=n(167),d=n(380);t.withBaseShapeTraits=function withBaseShapeTraits(e){return class extends o.default{isEmptyGroup(){if(!(this instanceof i.ShapeGroupNode||this instanceof i.BooleanShapeNode))return!1;const e=this.children;for(let t=0,n=e.length;t<n;t++)if(!e[t].isEmptyGroup())return!1;return!0}preCommit(e){d.wrapInShapeContainer(this,e)}getProps(){const e=super.getProps();if(!i.isVectorNode(this))return e;if(!this.visible)return e;const t=1!==this.opacity?this.opacity:void 0,n=this.cache.latest?this.cache.latest.tree:null,d=n?n.getParent(this.id):null;let u=!1;d instanceof o.default&&(u=i.isVectorNode(d));const h=!!n&&n.isRootVectorNode(this),p=i.stringFromNodeID(this.id);let g=void 0;g=this.name?this.name:a.defaultName(this);const m=this.calculatedPaths(),f=s.default.isClosed(m)&&"inside"===this.strokeAlignment&&1===this.strokeEnabled&&!!this.strokeWidth,y=1===this.strokeEnabled&&this.strokeWidth?this.strokeColor:"transparent",v=y?r.ConvertColor.getAlpha(y):0,b=p,k=`${p}_clip`,S=1===this.strokeEnabled;let C;S&&this.strokeWidth&&(C=this.strokeWidth,f&&(C*=2));const x={opacity:t,isRootVectorNode:h,calculatedPath:m,insideStroke:f,shapeId:b,strokeEnabled:S,strokeClipId:k,strokeWidth:C,rect:{x:this.x,y:this.y,width:this.width,height:this.height},frame:this.rect(),strokeAlpha:v,key:p,name:g,rotation:this.rotation,lineCap:this.lineCap,lineJoin:this.lineJoin,strokeColor:this.strokeColor,id:this.id,strokeDashArray:this.strokeDashArray,strokeDashOffset:this.strokeDashOffset,strokeMiterLimit:this.strokeMiterLimit};return l.collectBoxShadowPropsForNode(this,x),c.collectFillPropsForNode(this,x),Object.assign(e,x),e}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(1),o=n(48),r=n(621),s=n(40),a=n(36),l=n(100),c=n(167),d=n(11),u=n(43),h=n(249),p=n(158);t.isShapeContainerNode=function isShapeContainerNode(e){return e instanceof ShapeContainerNode};class ShapeContainerNode extends o.default{constructor(e){super(),a.setDefaults(this,r.ShapeContainerRecord,e)}updateForRect(e,t){return s.updateConstrainedFrame(e,t,this.constraints(),this.constraintsLocked)}updateForSize(e,t){return s.updateConstrainedSize(e,t,this.constraintValues())}getProps(){const e={},t=Object.assign({},super.getProps(),this.newConstraintProperties(),{_border:h.borderPropsForNode(this),visible:this.visible,overflow:"hidden",style:e});this.__unsafeIsGroundNode()&&(t.left=0,t.top=0);const n=l.collectStyleFromNode(this);return c.collectBackgroundPropsForNode(this,n),i.collectVisualStyleFromProps(n,e),t.background=n.background,t}newConstraintProperties(){return p.newConstraintProperties(this)}constraintProperties(){if(this.cache.constraintProps)return this.cache.constraintProps;const e=this.constraints();return this.cache.constraintProps={left:e.left?this.left:null,right:e.right?this.right:null,top:e.top?this.top:null,bottom:e.bottom?this.bottom:null,width:this.width,height:this.height,aspectRatio:e.aspectRatio,centerX:`${100*this.centerAnchorX}%`,centerY:`${100*this.centerAnchorY}%`,parentSize:null}}constraints(){return this.cache.parentDirected?i.ConstraintMask.quickfix({left:!1,right:!1,top:!1,bottom:!1,widthType:this.widthType,heightType:this.heightType,aspectRatio:null,fixedSize:!0}):i.ConstraintMask.quickfix({left:i.isFiniteNumber(this.left),right:i.isFiniteNumber(this.right),top:i.isFiniteNumber(this.top),bottom:i.isFiniteNumber(this.bottom),widthType:this.widthType,heightType:this.heightType,aspectRatio:null,fixedSize:!0})}constraintValues(){const e=this.constraints();return{left:e.left?this.left:null,right:e.right?this.right:null,top:e.top?this.top:null,bottom:e.bottom?this.bottom:null,widthType:this.widthType,heightType:this.heightType,width:this.width,height:this.height,aspectRatio:null,centerAnchorX:this.centerAnchorX,centerAnchorY:this.centerAnchorY}}minSize(e){return i.ConstraintValues.toMinSize(this.constraintValues(),e)}size(e,t,n=!0){const{parentDirectedRect:o}=this.cache;return o&&n?{width:o.width,height:o.height}:i.ConstraintValues.toSize(this.constraintValues(),e,null,t)}rect(e){return this.cache.parentDirectedRect?Object.assign({},this.cache.parentDirectedRect):i.ConstraintValues.toRect(this.constraintValues(),e,null,!0)}matrix(e,t){if(t||void 0===e||(t=this.rect(e)),!t)throw Error("Could not determine frame to build matrix from");return(new WebKitCSSMatrix).translate(t.x,t.y)}transformMatrix(e,t){if(t||(t=this.rect(e)),!t)throw Error("Could not determine frame to build matrix from");return(new WebKitCSSMatrix).translate(.5*t.width,.5*t.height).multiply(this.matrix(e,t)).translate(-.5*t.width,-.5*t.height)}isRotated(){return!1}preFreeze(e){this.children.forEach(t=>(function shapePreFreeze(e,t){const n=d.validBoundingBoxUpdatesForFrameNode(e,t),i=Object.keys(n);for(let o=0,r=i.length;o<r;o++){const t=i[o],r=n[t];e.update(t,r)}})(e,t)),this.sizeToFit&&u.ContextAction.sizeToFitContent(e,[this])}}t.default=ShapeContainerNode},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.Canvas="canvas"}(t.AnchorType||(t.AnchorType={})),function(e){e.All="All",e.Archived="Archived"}(t.Tab||(t.Tab={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=["#8800FF","#6600FF","#4400FF","#0055FF","#0099FF","#00BBFF","#22DDDD","#FFBB00","#FF3388","#FF4444"];t.colorFromId=function colorFromId(e){let t=0;for(let i=0;i<e.length;i++)t+=e.charCodeAt(i);const n=t%i.length;return i[n]}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(1),o=n(7),r=n(6),s=n(3),a=n(300),l=n(645);var c;!function(e){e.List="list",e.Grid="grid"}(c=t.ComponentPanelViewType||(t.ComponentPanelViewType={})),t.ColorPresetsKey="color-presets";t.DocumentSettingsStore=class DocumentSettingsStore{constructor(e){this.addChanges=e,this.font=i.draftStyles.font.default,this.color=i.draftStyles.color.default,this.size=i.draftStyles.size.default,this.letterSpacing=i.draftStyles.letterSpacing.default,this.lineHeight=i.draftStyles.lineHeight.default,this._hasDarkAppearance=!1,this._openArtboardCategories=o.Set([]),this._crashMessage=null,this._organization=null,this.gradientStopIndex=0,this.componentPanelViewType=c.List,this._componentPanelExpandedPackages=o.Set(),this._componentPanelExpandedCategories=o.Set(),this._propertyPanelTab="Layout",this._exportCSSType="CSS",this._activePreset=i.localPackageFallbackIdentifier,this.hasDarkAppearance=!!window.hasDarkAppearance}get hasDarkAppearance(){return this._hasDarkAppearance}set hasDarkAppearance(e){this._hasDarkAppearance!==e&&(this._hasDarkAppearance=e,s.theme.setActiveTheme(this._hasDarkAppearance?l.darkTheme:a.lightTheme),this.addChanges(r.EngineChangeFlags.DocumentSettings))}get openArtboardCategories(){return this._openArtboardCategories}openArtboardCategory(e){const t=this._openArtboardCategories.add(e);t!==this._openArtboardCategories&&(this._openArtboardCategories=t,this.addChanges(r.EngineChangeFlags.DocumentSettings))}closeArtboardCategory(e){const t=this._openArtboardCategories.remove(e);t!==this._openArtboardCategories&&(this._openArtboardCategories=t,this.addChanges(r.EngineChangeFlags.DocumentSettings))}get crashMessage(){return this._crashMessage}set crashMessage(e){this._crashMessage!==e&&(this._crashMessage=e,this.addChanges(r.EngineChangeFlags.DocumentSettings))}get organization(){return this._organization}set organization(e){this._organization!==e&&(this._organization=e,this.addChanges(r.EngineChangeFlags.DocumentSettings))}componentPanelExpandedPackages(){return this._componentPanelExpandedPackages.toArray()}componentPanelExpandedCategories(){return this._componentPanelExpandedCategories.toArray()}get propertyPanelTab(){return this._propertyPanelTab}set propertyPanelTab(e){this._propertyPanelTab=e,this.addChanges(r.EngineChangeFlags.DocumentSettings)}get exportCSSType(){return this._exportCSSType}set exportCSSType(e){this._exportCSSType=e,this.addChanges(r.EngineChangeFlags.DocumentSettings)}setDefaultFont(e){this.font!==e&&(this.font=e,this.addChanges(r.EngineChangeFlags.TextStyle))}setDefaultTextColor(e){this.color!==e&&(this.color=e,this.addChanges(r.EngineChangeFlags.TextStyle))}setDefaultTextSize(e){this.size!==e&&(this.size=e,this.addChanges(r.EngineChangeFlags.TextStyle))}setDefaultLetterSpacing(e){this.letterSpacing!==e&&(this.letterSpacing=e,this.addChanges(r.EngineChangeFlags.TextStyle))}setDefaultLineHeight(e){this.lineHeight!==e&&(this.lineHeight=e,this.addChanges(r.EngineChangeFlags.TextStyle))}asStyle(){const e=[i.draftStyles.font.prefix+this.font,i.draftStyles.color.prefix+this.color,i.draftStyles.size.prefix+this.size,i.draftStyles.letterSpacing.prefix+this.letterSpacing,i.draftStyles.lineHeight.prefix+this.lineHeight];return o.OrderedSet(e)}setGradientStopIndex(e){this.gradientStopIndex!==e&&(this.gradientStopIndex=e,this.addChanges(r.EngineChangeFlags.GradientTool))}setComponentPanelViewType(e){this.componentPanelViewType!==e&&(this.componentPanelViewType=e,this.addChanges(r.EngineChangeFlags.ComponentPanel))}expandComponentPanelPackage(e,{shouldCollapseOthers:t}={}){const n=t?o.Set([e]):this._componentPanelExpandedPackages.add(e);n===this._componentPanelExpandedPackages||n.equals(this._componentPanelExpandedPackages)||(this._componentPanelExpandedPackages=n,this.addChanges(r.EngineChangeFlags.ComponentPanel))}collapseComponentPanelPackage(e){const t=this._componentPanelExpandedPackages.remove(e);t!==this._componentPanelExpandedPackages&&(this._componentPanelExpandedPackages=t,this.addChanges(r.EngineChangeFlags.ComponentPanel))}expandComponentPanelCategory(e){const t=this._componentPanelExpandedCategories.add(e);t!==this._componentPanelExpandedCategories&&(this._componentPanelExpandedCategories=t,this.addChanges(r.EngineChangeFlags.ComponentPanel))}collapseComponentPanelCategory(e){const t=this._componentPanelExpandedCategories.remove(e);t!==this._componentPanelExpandedCategories&&(this._componentPanelExpandedCategories=t,this.addChanges(r.EngineChangeFlags.ComponentPanel))}getColorPickerActivePreset(){return this._activePreset}setColorPickerActivePreset(e){this._activePreset=e,this.addChanges(r.EngineChangeFlags.ColorPicker)}get isFramerTeam(){return!!this._organization&&"framer"===this._organization.name}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function mouseDidMove(e,t){if(e&&t){const{x:n,y:i}=e,o=t.x,r=t.y;return o!==n||r!==i}return e!==t}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(23),o=n(4),r=n(27),s=n(11),a=n(1),l=n(19),c=n(254),d=n(39),u=n(400),h=n(90);function scaleShapeContainerDescendantShapes(e,t,n,i,o,r){const{tree:l}=e,c=l.getNode(t.id),d=r.width>-1&&r.width<1?1:r.width,u=r.height>-1&&r.height<1?1:r.height,h=d/o.width,p=u/o.height;n.forEach((t,n)=>{const i=l.getNode(n);if(!i)return;const o={pathSegments:t.pathSegments.map(e=>new a.PathSegment(e.merge({x:e.x*h,y:e.y*p,handleOutX:e.handleOutX*h,handleOutY:e.handleOutY*p,handleInX:e.handleInX*h,handleInY:e.handleInY*p}))),pathClosed:t.pathClosed},r={pathSegments:s.convertPathFromNodeToDescendant(l,c,i,[o])[0],pathClosed:i.pathClosed},d=i.updateForPath(r);e.updateNode(i.id,d)}),i.forEach((t,n)=>{if(null===t)return;const i=t.map(e=>({x:e.x*h,y:e.y*p})),o=l.getNode(n),r=i.map(e=>l.convertPointFromNodeToDescendant(c,o,e,!1)),s=a.Rect.fromPoints(r);e.updateNode(n,s)})}t.updateNodeFrameForEach=function updateNodeFrameForEach(e,t,n,i){n.forEach(t=>{const n=e.getParent(t.id),o=i(e.getRect(t)),r=t.updateForRect(o,n?e.getRect(n):null);e.updateNode(t,r)})},t.flipShapes=function flipShapes(e,t,n,o){const d=n.map(e=>e.id);n.forEach(n=>{if(!r.hasShape(n))return;const{descendantPaths:u}=s.collectDescendantShapesAndFlattenRotations(t,n,!0,d),h=u.valueSeq().toArray(),p=l.default.boundingBox(h),g=Object.assign({},p);"horizontal"===o?(g.x=p.x+p.width,g.width=-p.width):(g.y=p.y+p.height,g.height=-p.height);const m=g.width>-1&&g.width<1?1:g.width,f=g.height>-1&&g.height<1?1:g.height,y=[p.x,p.x+p.width],v=[g.x,g.x+m],b=[p.y,p.y+p.height],k=[g.y,g.y+f],S=m/p.width,C=f/p.height;u.forEach((n,o)=>{const r=n.pathSegments.map(e=>new a.PathSegment(e.merge({x:c.default(e.x,y,v,!1),y:c.default(e.y,b,k,!1),handleOutX:e.handleOutX*S,handleOutY:e.handleOutY*C,handleInX:e.handleInX*S,handleInY:e.handleInY*C})));i(t.tree===e);const l=e.getNode(o);if(!l)return;const d={pathSegments:r,pathClosed:l.pathClosed},u={pathSegments:s.convertPathToNode(e,l,[d])[0],pathClosed:l.pathClosed},h=l.updateForPath(u);e.updateNode(l,h)})})},t.updateNodeSizeForEach=function updateNodeSizeForEach(e,t,n){const{tree:l}=e;t.forEach(t=>{const p=l.getRect(t),g=n(p);if(g.width&&g.width<1&&(g.width=1),g.height&&g.height<1&&(g.height=1),o.isShapeContainerNode(t))!function updateShapeContainerSize(e,t,n){const{tree:i,shapeModeActive:o}=e;if(o){const e=i.getParent(t.id),o=e?i.getRect(e):null,r=t.updateForSize(n,o);return r.sizeToFit=!1,void i.updateNode(t,r)}const r=i.getRect(t),l=function shapeContainerResizeRect(e,t,n){const i=Object.assign({},t),o=i.width/i.height;n.width&&(i.width=n.width,i.height=Math.round(n.width/o)),n.height&&(i.height=n.height,i.width=Math.round(n.height*o));const r=i.width-t.width,s=i.height-t.height,{left:l,right:c,top:d,bottom:u}=e;return null===l&&null===c?i.x=Math.round(i.x-r/2):a.isFiniteNumber(c)&&(i.x=Math.round(i.x-r)),null===d&&null===u?i.y=Math.round(i.y-s/2):a.isFiniteNumber(u)&&(i.y=Math.round(i.y-s)),i}(t,r,n),d={width:l.width,height:l.height};if(t.sizeToFit){const{descendantPaths:n,descendantBasicShapes:i}=s.collectDescendantShapesAndFlattenRotations(e,t);!function resizeShapeContainerDescendantShapes(e,t,n,i,o,r){const{tree:l}=e,d=t.canvasMatrix(),u=d.inverse(),p=r.width>-1&&r.width<1?1:r.width,g=r.height>-1&&r.height<1?1:r.height,m=[o.x,o.x+o.width],f=[r.x,r.x+p],y=[o.y,o.y+o.height],v=[r.y,r.y+g],b=p/o.width,k=g/o.height,S=o;n.forEach((t,n)=>{const i=s.convertPath(u,[t])[0],o=i.map(e=>new a.PathSegment(e.merge({x:c.default(e.x+S.x,m,f,!1)-S.x,y:c.default(e.y+S.y,y,v,!1)-S.y,handleOutX:e.handleOutX*b,handleOutY:e.handleOutY*k,handleInX:e.handleInX*b,handleInY:e.handleInY*k}))),r={pathSegments:s.convertPath(d,[{pathSegments:o,pathClosed:t.pathClosed}])[0],pathClosed:t.pathClosed},h=l.getNode(n);if(!h)return;const p=s.convertPathToNode(l,h,[r]),g={pathSegments:p[0],pathClosed:h.pathClosed},C=h.updateForPath(g);e.updateNode(h.id,C)}),i.forEach((t,n)=>{if(null===t)return;const i=t.map(e=>h.default.convertPoint(u,e)),o=i.map(e=>({x:c.default(e.x+S.x,m,f,!1)-S.x,y:c.default(e.y+S.y,y,v,!1)-S.y})),r=o.map(e=>h.default.convertPoint(d,e)),p=l.getNode(n),g=r.map(e=>h.default.convertPoint(p.canvasMatrix().inverse(),e)),b=a.Rect.fromPoints(g),k=a.Rect.center(b),C=s.convertPointToParent(p,k),x={x:C.x-b.width/2,y:C.y-b.height/2,width:b.width,height:b.height};e.updateNode(n,x)})}(e,t,n,i,r,l)}else{const{shapeContainerDescendantPaths:n,shapeContainerDescendantBasicShapes:o}=s.collectShapeContainerDescendantShapesAndFlattenRotations(e,t),a=i.getParent(t.id),c=t.updateForSize(d,a?i.getRect(a):null);i.updateNode(t,c),scaleShapeContainerDescendantShapes(e,t,n,o,r,l)}const p=u.collectScalableVectorStyles(t);u.scaleVectorStyles(i,p,function scaleFactor(e,t){return t.width?t.width/e.width:t.height?t.height/e.height:1}(r,n))}(e,t,g);else if(r.hasShape(t))!function updateShapeSize(e,t,n){const{tree:o}=e,r=o.getRect(t),l=a.Size.update(r,n,!!d.hasAspectRatio(t)&&a.isFiniteNumber(t.aspectRatio)),u=Object.assign({},r,l),h=u.width>-1&&u.width<1?1:u.width,p=u.height>-1&&u.height<1?1:u.height,g=[r.x,r.x+r.width],m=[u.x,u.x+h],f=[r.y,r.y+r.height],y=[u.y,u.y+p],v=h/r.width,b=p/r.height,{descendantPaths:k,descendantBasicShapes:S}=s.collectDescendantShapesAndFlattenRotations(e,t);k.forEach((n,l)=>{const d=s.convertPathToNode(o,t,[n])[0],u=d.map(e=>new a.PathSegment(e.merge({x:c.default(e.x+r.x,g,m,!1)-r.x,y:c.default(e.y+r.y,f,y,!1)-r.y,handleOutX:e.handleOutX*v,handleOutY:e.handleOutY*b,handleInX:e.handleInX*v,handleInY:e.handleInY*b}))),h=s.convertPathToCanvas(o,t,{pathSegments:u,pathClosed:!0});i(e.tree===o);const p=o.getNode(l);if(!p)return;const k=s.convertPathToNode(o,p,h),S={pathSegments:k[0],pathClosed:p.pathClosed},C=p.updateForPath(S);o.updateNode(p,C)}),S.forEach((e,n)=>{if(null===e)return;const i=e.map(e=>o.convertPointToNode(t,e)),l=i.map(e=>({x:c.default(e.x+r.x,g,m,!1)-r.x,y:c.default(e.y+r.y,f,y,!1)-r.y})),d=l.map(e=>o.convertPointToCanvas(t,e)),u=o.getNode(n),h=d.map(e=>o.convertPointToNode(u,e)),p=a.Rect.fromPoints(h),v=a.Rect.center(p),b=s.convertPointToParent(u,v),k={x:b.x-p.width/2,y:b.y-p.height/2,width:p.width,height:p.height};o.updateNode(u,k)})}(e,t,g);else{const e=l.getParent(t.id),n=t.updateForSize(g,e?l.getRect(e):null);l.updateNode(t,n)}})},t.scaleShapeContainerDescendantShapes=scaleShapeContainerDescendantShapes},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function assertNever(e){throw new Error("Unexpected object: "+e)}},function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))(function(o,r){function fulfilled(e){try{step(i.next(e))}catch(t){r(t)}}function rejected(e){try{step(i.throw(e))}catch(t){r(t)}}function step(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(fulfilled,rejected)}step((i=i.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const o=n(82),r=n(9),s=n(70),a=n(24),l=n(28),c=n(196),d=n(6),u=n(418),h=n(70),p=n(674),g=n(15),m=n(14),f=n(2),y=n(35),v=n(420);t.defaultComponentMap={"framer/Stack":{class:o.Stack,depth:1,file:"",identifier:"framer/Stack",name:o.Stack.name,packageIdentifier:"framer",properties:o.getPropertyControls(o.Stack),type:"component"},"framer/Scroll":{class:o.Scroll,depth:1,file:"",identifier:"framer/Scroll",name:o.Scroll.name,packageIdentifier:"framer",properties:o.getPropertyControls(o.Scroll),type:"component"},"framer/Page":{class:o.Page,depth:1,file:"",identifier:"framer/Page",name:o.Page.name,packageIdentifier:"framer",properties:o.getPropertyControls(o.Page),type:"component"}};class ProjectServerConnection{constructor(){this.socketChannelListeners=[],this.updateToRun=null,this.maybeUpdateHashAfterEditorCloses=()=>{this.updateToRun&&(f.default.toolStore.isCodeEditorOpen()||f.default.processWhenReady(()=>{const e=this.updateToRun;this.updateToRun=null,e&&e()}))},this.previewScriptEmitter=new s.ServiceEventEmitter,this.previewCanvasEmitter=new s.ServiceEventEmitter,this.previewStateEmitter=new s.ServiceEventEmitter,this.cache={canvas:"",script:"",preview:""},this.onSocketChannelMessage=e=>{for(const t of this.socketChannelListeners)t(e)}}setupIPC(){return i(this,void 0,void 0,function*(){this.previewDocument||(this.previewDocument=s.PreviewDocument.on(s.PostMessageChannel.toParentFrame).expect(),yield s.PreviewFrame.on(s.PostMessageChannel.toParentFrame).register({load:({projectURL:e})=>i(this,void 0,void 0,function*(){const t=f.default.serverStore.projectURL;if(t&&t.href===new URL(e).href)return this.cache;throw new Error("Mismatched Project URL")}),toggleSelectionLock:({force:e})=>i(this,void 0,void 0,function*(){g.getIpcRenderer().emit(m.SetPreviewSelectionLock,Boolean(e))}),triggerPreviewRemoteEvent:e=>i(this,void 0,void 0,function*(){r.triggerPreviewRemoteEvent(e)}),canvasUpdateStream:()=>this.previewCanvasEmitter,scriptUpdateStream:()=>this.previewScriptEmitter,previewUpdateStream:()=>this.previewStateEmitter}))})}setProjectURL(e){l.experiments.isOn("ipcPreview")&&!this.previewDocument&&this.setupIPC().catch(y.unhandledError),this.socket&&this.socket.io.uri!==e&&(this.socket=null,this.socketChannel=void 0),!this.socket&&e&&(f.default.disableUserInteractions(),f.default.changes.observe(d.EngineChangeFlags.ToolStore,this.maybeUpdateHashAfterEditorCloses),this.socket=u.getGlobalSocketIO(e),this.socketChannel=new h.SocketClientChannel(this.socket),this.socketChannel.addMessageListener(this.onSocketChannelMessage),this.socket.emit("clientConnected"),this.socket.on("runPerformanceTests",()=>this.socket&&v.automatedPerformanceTests(this.socket,f.default)),this.socket.on("script",e=>{this.cache.script=e,this.previewScriptEmitter.emit({content:e});const n=JSON.parse(e),i=p.updateProjectBundleHash(n);if(f.default.canvasStore.componentHash===i)return;f.default.canvasStore.userScriptBundle=n;const r=()=>{clearStyledComponents(),f.default.toolStore.componentDefinitionsFromScriptText=null,a.componentLoader.updateStateWithScripts(n,o,t.defaultComponentMap),f.default.signalNonUserEvent(),c.updateExternalMasterInDocument(f.default,a.componentLoader),f.default.setComponentHash(i)};f.default.processWhenReady(()=>{if(f.default.toolStore.isCodeEditorOpen()){this.updateToRun=r;const e=n["index.js"];if(e){const t=a.extractComponentDefinitionsFromScript(e);f.default.toolStore.componentDefinitionsFromScriptText=t}f.default.changes.addChanges(d.EngineChangeFlags.ToolStore)}else r()})}),this.socket.on("state",e=>{f.default.serverStore.setStateFromServer(e)}),this.socket.on("metrics",()=>{r.triggerPreviewRemoteEvent({})}))}updatePreview(e){this.cache.preview=e,this.sendCommand("updatePreview",{previewData:e}),this.previewStateEmitter.emit({content:e})}togglePreviewInspector(){this.sendCommand("togglePreviewInspector"),this.previewDocument&&this.previewDocument.toggleConsole({})}updateCanvasData(e){this.cache.canvas=e,this.sendCommand("updateCanvasData",{canvasData:e}),this.previewCanvasEmitter.emit({content:e})}updateCanvasModule(e){this.sendCommand("updateCanvasModule",{code:e})}buildStandaloneExport(e,t,n){this.socket?(this.sendCommand("buildStandaloneExport",{path:e,previewData:t}),this.socket.once("buildStandaloneExportDone",()=>{n&&n()})):n&&n()}upgradePackage(e,t){this.sendCommand("upgradeDependency",{packageName:e,version:`^${t}`})}removePackage(e){this.sendCommand("removePackage",{packageName:e})}installFramerLibrary(e){this.sendCommand("installFramerLibrary",{version:e})}sendCommand(e,t){this.socket&&this.socket.emit(e,t)}postMessage(e){if(!this.socketChannel)throw new Error("No project server connection to send messages");this.socketChannel.postMessage(e)}addMessageListener(e){this.socketChannelListeners.push(e)}}function clearStyledComponents(){void 0!==window["__styled-components-init__"]&&(delete window["__styled-components-init__"],document.head.querySelectorAll("style[data-styled-components]").forEach(e=>e.remove()),document.head.querySelectorAll("style[data-styled]").forEach(e=>e.remove()))}t.ProjectServerConnection=ProjectServerConnection,t.projectServerConnection=new ProjectServerConnection,t.clearStyledComponents=clearStyledComponents,function main(){return i(this,void 0,void 0,function*(){const{default:e}=yield Promise.resolve().then(()=>n(2));e&&e.changes&&e.changes.observe(d.EngineChangeFlags.ServerStore,()=>{e.serverStore.projectURL&&t.projectServerConnection.setProjectURL(e.serverStore.projectURL.toString())})})}().catch(y.unhandledError)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(4),o=n(136);t.isExportableAsSVG=function isExportableAsSVG(e){return i.isVectorNode(e)||o.isShapeContainerNode(e)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(706),r=n(707);t.ActivityIndicator=function ActivityIndicator({style:e,large:t=!1}){return i.createElement("div",{className:"spinner",style:Object.assign({},t?a:s,e)})};const s={backgroundColor:"black",position:"absolute",left:"calc(50% - 6px)",top:"calc(50% - 6px)",width:12,height:12,WebkitMask:`url(${o.SpinnerIconDataUrl})`,WebkitMaskSize:12},a={position:"absolute",left:"calc(50% - 15px)",top:"calc(50% - 15px)",width:30,height:30,background:`url(${r.SpinnerIconLargeDataUrl})`,backgroundSize:30}},function(e,t){e.exports=require("monaco-editor")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(1),r=n(3);var s;!function(e){e.top="--portal-popover-offset-top",e.popoverBottom="--portal-popover-bottom",e.popoverArrowLeft="--portal-popover-arrow-left",e.popoverArrowTop="--portal-popover-arrow-top",e.popoverArrowBottom="--portal-popover-arrow-bottom",e.popoverArrowRotation="--portal-popover-arrow-rotation",e.popoverArrowBorder="--portal-popover-arrow-border"}(s||(s={}));t.popoverPortal=new class PopoverPortal{constructor(){this.portalRef=i.createRef(),this.popoverRef=i.createRef(),this.setPopoverRef=e=>{this.popoverRef.current=e,this.updateOffset()},this.popoverWillUnmount=e=>{this.setPopoverRef&&this.popoverRef.current===e&&(this.popoverRef.current=null)},this.isOpen=()=>!!this.popoverRef.current&&this.popoverRef.current.isOpen(),this.closeIfOpen=()=>{this.popoverRef.current&&this.popoverRef.current.close()}}get popoverBottom(){return`var(${s.popoverBottom}, "")`}get popoverArrowLeft(){return`var(${s.popoverArrowLeft}, 50%)`}get popoverArrowTop(){return`var(${s.popoverArrowTop})`}get popoverArrowBottom(){return`var(${s.popoverArrowBottom})`}get popoverArrowRotation(){return`var(${s.popoverArrowRotation}, 45deg)`}get popoverArrowBorder(){return`var(${s.popoverArrowBorder}, ${r.theme.popoverArrowBorder})`}component(){return i.createElement("div",{ref:this.portalRef,style:{position:"absolute",top:`var(${s.top}, 0px)`,left:0}})}updateOffset(){if(!this.popoverRef.current||!this.portalRef.current)return;const{inputElement:e}=this.popoverRef.current;if(!e)return;const t=e.getBoundingClientRect(),n=t.top-9,i=t.bottom+9,o=t.left+t.width/2;let s=i,a=n,l="50%";const c=this.portalRef.current.parentElement;if(c instanceof HTMLDivElement){const e=c.getBoundingClientRect(),t=e.top-c.scrollTop;l=`${(o-e.left)/e.width*100}%`,s-=t,a-=t}let d=s,u="",h="-5px",p="",g="45deg",m=r.theme.popoverArrowBorder;a>440&&(d=a,u="0px",h="",p="-5px",g="225deg",m=r.theme.popoverArrowBorderFlipped),this.setPopoverPortalProperties({top:d,popoverBottom:u,popoverArrowLeft:l,popoverArrowTop:h,popoverArrowBottom:p,popoverArrowRotation:g,popoverArrowBorder:m})}setPopoverPortalProperties(e){if(!this.portalRef.current)return;const t={};o.isFiniteNumber(e.top)&&(t[s.top]=e.top+"px"),void 0!==e.popoverBottom&&(t[s.popoverBottom]=e.popoverBottom),void 0!==e.popoverArrowLeft&&(t[s.popoverArrowLeft]=e.popoverArrowLeft),void 0!==e.popoverArrowTop&&(t[s.popoverArrowTop]=e.popoverArrowTop),void 0!==e.popoverArrowBottom&&(t[s.popoverArrowBottom]=e.popoverArrowBottom),void 0!==e.popoverArrowRotation&&(t[s.popoverArrowRotation]=e.popoverArrowRotation),void 0!==e.popoverArrowBorder&&(t[s.popoverArrowBorder]=e.popoverArrowBorder);const n=Object.keys(t);for(const i of n)this.portalRef.current.style.setProperty(i,t[i])}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(96),r=n(149),s=n(59),a=n(124),l=n(304),c=n(21),d=n(305),u=16,h=1048576;function shadowBufferResultion(e,t,n){let i=!1;if(n===c.RenderTarget.export||n===c.RenderTarget.preview)return{scaled:i};let o=e.width*t,r=e.height*t;for(;o*r>h;)i=!0,(o/=2)<32&&(o=32),(r/=2)<32&&(r=32);return{string:`${Math.ceil(o)} ${Math.ceil(r)}`,scaled:i}}function outerShadowElements(e,t,n){const o=e.add("_outer_shadow"+n),r=o.add("offset").id,s=o.add("blur").id,a=o.add("matrix").id;return{filterElements:i.createElement(p,{key:o.id+"-filters",shadow:t,blurId:s,offsetId:r,matrixId:a}),mergeElement:i.createElement("feMergeNode",{key:o.id+"-merge",in:a})}}t.shadowsAsFilter=function shadowsAsFilter(e){const t=[];if(e&&e.length){const n=e.map(e=>`drop-shadow(${e.x}px ${e.y}px ${e.blur}px ${e.color})`);t.push(...n)}return t},t.collectTextShadowsForProps=function collectTextShadowsForProps(e,t){const n=e.shadows.map(e=>`${e.x}px ${e.y}px ${e.blur}px ${e.color}`).join(", ");n&&(t.textShadow=n)},t.collectBoxShadowsForProps=function collectBoxShadowsForProps(e,t){if(!e.shadows||0===e.shadows.length)return;const n=e.shadows.map(e=>l.BoxShadow.toCSS(e)).join(", ");n&&(t.boxShadow=n)},t.shadowForShape=function shadowForShape(e,t,n,r,s,l,d,h,p,g){const m=[];let f=null,y=null,v=!1;if(g!==c.RenderTarget.export&&g!==c.RenderTarget.preview&&p>=u)return{definition:m,outsetElement:f,insetElement:y,needsStrokeClip:v};const b=[],k=[];for(let i=0,o=e.length;i<o;i++){const t=e[i];t.inset?k.push(t):b.push(t)}if(b.length>0){b.reverse();const e=n.add("_shadow_out"),c=a.Rect.atOrigin(t),u=[c];for(let t=0,n=b.length;t<n;t++){const e=localShadowFrame(b[t],c,!0);null!==e&&u.push(e)}let y=0;const v=[],k=[];for(let t=0,i=b.length;t<i;t++){const e=b[t],i=outerShadowElements(n,e,t);y=Math.max(y,e.blur),v.push(i.filterElements),k.push(i.mergeElement)}let S=l;o.isFiniteNumber(S)||(S=0);let C=h.strokeMiterlimit;o.isFiniteNumber(C)||(C=4);let x=a.Rect.merge(...u);const w=shadowBufferResultion(x=a.Rect.inflate(x,1.1*(S*C/2+y)),p,g),T=t.width+(l?l/2:.1),P=t.height+(l?l/2:.1),E=x.x/T*100,F=x.y/P*100,M=x.width/T*100,_=x.height/P*100;m.push(i.createElement("filter",{key:e.id,id:e.id,x:`${E.toFixed(1)}%`,y:`${F.toFixed(1)}%`,width:`${M.toFixed(1)}%`,height:`${_.toFixed(1)}%`,filterUnits:"objectBoundingBox",filterRes:w.string},v,b.length>1?i.createElement("feMerge",null,k):null)),f=i.createElement("g",{filter:e.urlLink},i.createElement("use",Object.assign({},h,{fill:"black",fillOpacity:r<=0?0:1,stroke:"black",strokeOpacity:s<=0?0:1,strokeWidth:s>0?l:0,xlinkHref:n.link,clipPath:d.urlLink})))}if(k.length){k.reverse();const e=n.add("_shadow_inside"),o=a.Rect.atOrigin(t),r=[o];for(let t=0,n=k.length;t<n;t++){const e=localShadowFrame(k[t],o,!0);null!==e&&r.push(e)}const s=a.Rect.merge(...r),c=shadowBufferResultion(s,p,g);v=v||c.scaled;const u=t.width+(l?l/2:.1),h=t.height+(l?l/2:.1),f=s.x/u*100,b=s.y/h*100,S=s.width/u*100,C=s.height/h*100,x=[],w=[];for(let t=0,i=k.length;t<i;t++){const e=innerShadowElements(n,k[t],t);x.push(e.filterElements),w.push(e.mergeElement)}let T;m.push(i.createElement("filter",{key:e.id,id:e.id,x:`${f.toFixed(1)}%`,y:`${b.toFixed(1)}%`,width:`${S.toFixed(1)}%`,height:`${C.toFixed(1)}%`,filterUnits:"objectBoundingBox",filterRes:c.string},x,k.length>1?i.createElement("feMerge",null,w):null)),v&&(T=d.urlLink),y=i.createElement("use",{fill:"black",fillOpacity:"1",filter:e.urlLink,xlinkHref:n.link,clipPath:T})}return{definition:m,outsetElement:f,insetElement:y,needsStrokeClip:v}};const p=e=>{const t=i.useContext(d.CustomPropertiesContext),{shadow:n,blurId:o,offsetId:a,matrixId:l}=e;let c=n.color;const u=t(c);u&&(c=u);const h=s.ConvertColor.toRgb(c),p=`0 0 0 0 ${r.roundedNumberString(h.r/255,3)}   0 0 0 0 ${r.roundedNumberString(h.g/255,3)}   0 0 0 0 ${r.roundedNumberString(h.b/255,3)}  0 0 0 ${h.a} 0`;return i.createElement(i.Fragment,null,i.createElement("feOffset",{dx:n.x,dy:n.y,in:"SourceAlpha",result:a}),i.createElement("feGaussianBlur",{stdDeviation:n.blur/2,in:a,result:o}),i.createElement("feColorMatrix",{colorInterpolationFilters:"sRGB",values:p,type:"matrix",in:o,result:l}))};function innerShadowElements(e,t,n){const o=e.add("_inside_shadow"+n),r=o.add("blur").id,s=o.add("offset").id,a=o.add("composite").id,l=o.add("matrix").id;return{filterElements:i.createElement(g,{key:o.id+"-filters",shadow:t,blurId:r,offsetId:s,compositeId:a,matrixId:l}),mergeElement:i.createElement("feMergeNode",{key:o.id+"-merge",in:l})}}const g=e=>{const t=i.useContext(d.CustomPropertiesContext),{shadow:n,blurId:o,offsetId:r,compositeId:a,matrixId:l}=e;let c=n.color;const u=t(c);u&&(c=u);const h=s.ConvertColor.toRgb(c),p=`0 0 0 0 ${h.r/255}   0 0 0 0 ${h.g/255}   0 0 0 0 ${h.b/255}  0 0 0 ${h.a} 0`;return i.createElement(i.Fragment,null,i.createElement("feGaussianBlur",{stdDeviation:n.blur/2,in:"SourceAlpha",result:o}),i.createElement("feOffset",{dx:n.x,dy:n.y,in:o,result:r}),i.createElement("feComposite",{in:r,in2:"SourceAlpha",operator:"arithmetic",k2:"-1",k3:"1",result:a}),i.createElement("feColorMatrix",{colorInterpolationFilters:"sRGB",values:p,type:"matrix",in:a,result:l}))};function localShadowFrame(e,t,n){let i,o,r,s,a=e.blur;if(l.BoxShadow.is(e)&&!0!==n){if(e.inset)return null;a+=e.spread}return!0===n?(i=-Math.abs(e.x)-a,o=Math.abs(e.x)+t.width+a,r=-Math.abs(e.y)-a,s=Math.abs(e.y)+t.height+a):(i=e.x-a,o=e.x+t.width+a,r=e.y-a,s=e.y+t.height+a),o<=i||s<=r?null:{x:i,y:r,width:o-i,height:s-r}}t.localShadowFrame=localShadowFrame},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.roundedNumber=function roundedNumber(e,t){const n=Math.round(Math.abs(t)),i=Math.pow(10,n);return Math.round(e*i)/i},t.roundedNumberString=function roundedNumberString(e,t){const n=e.toFixed(t);return 0===t?n:n.replace(/\.?0+$/,"")},t.roundWithOffset=function roundWithOffset(e,t){return 0===t?Math.round(e):((t-=0|t)<0&&(t=1-t),Math.round(e-t)+t)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(310);t.LinearGradient=i.LinearGradient,t.LinearGradientBase=i.LinearGradientBase;const o=n(314);t.RadialGradient=o.RadialGradient,t.RadialGradientBase=o.RadialGradientBase},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(319);!function __export(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}(n(488)),t.componentLoader={componentForIdentifier:e=>null,componentsForPackage:e=>[],componentIdentifiers:()=>[],errorForIdentifier:e=>null,forEachComponent:e=>{},forEachDesignComponents:e=>{},localPackageIdentifier:()=>i.localPackageFallbackIdentifier,packageDisplayName:e=>{},packageIdentifiers:()=>[],tokensForPackage:e=>({}),packageFileNames:e=>[]}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(498),o=n(499);let r=1/60;class Loop extends o.EventEmitter{constructor(e=!1){super(),this._started=!1,this._frame=0,this._frameTasks=[],this.tick=()=>{this._started&&(i.raf(this.tick),this.emit("update",this._frame,r),this.emit("render",this._frame,r),this._processFrameTasks(),this._frame++)},e&&this.start()}addFrameTask(e){this._frameTasks.push(e)}_processFrameTasks(){const e=this._frameTasks,t=e.length;if(0!==t){for(let n=0;n<t;n++)e[n]();e.length=0}}static set TimeStep(e){r=e}static get TimeStep(){return r}start(){return this._started?this:(this._frame=0,this._started=!0,i.raf(this.tick),this)}stop(){return this._started=!1,this}get frame(){return this._frame}get time(){return this._frame*r}}t.Loop=Loop,t.MainLoop=new Loop},function(e,t){e.exports=require("hoist-non-react-statics")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(231),o=n(33);function ObservableObject(e={},t=!1,n=!0){const o={};o[s]={makeAnimatables:t,observeAnimatables:n,observers:new i.Observers,transactions:new Set};const a=new Proxy(o,r);return Object.assign(a,e),a}t.ObservableObject=ObservableObject,function(e){e.addObserver=function addObserver(e,t){return e[s].observers.add(t)}}(ObservableObject||(ObservableObject={})),t.ObservableObject=ObservableObject;const r=new class ObservableObjectProxyHandler{constructor(){this.set=(e,t,n,i)=>{if(t===s)return!1;const r=e[s];let a,l;if(l=o.isAnimatable(n)?(a=n).get():n,r.makeAnimatables&&"function"!=typeof n&&"object"!=typeof n&&!a&&(a=o.Animatable(n)),r.observeAnimatables&&a){const e=r.transactions;a.onUpdate({update:(t,n)=>{n&&e.add(n),r.observers.notify({value:i},n)},finish:t=>{e.delete(t)&&r.observers.finishTransaction(t)}})}let c=!1,d=!0;if(void 0!==e[t]){o.isAnimatable(e[t])?(d=e[t].get()!==l,e[t].set(l)):(d=e[t]!==l,e[t]=l);const n=null!==l&&"object"==typeof l;(Array.isArray(l)||n)&&(d=!0),c=!0}else a&&(n=a),c=Reflect.set(e,t,n);return d&&r.observers.notify({value:i}),c},this.get=(e,t,n)=>{if(t===s)return e[t];const i=Reflect.get(e,t,n);return"function"==typeof i?i.bind(n):i}}deleteProperty(e,t){const n=Reflect.deleteProperty(e,t);return e[s].observers.notify({value:e}),n}ownKeys(e){const t=Reflect.ownKeys(e),n=t.indexOf(s);return-1!==n&&t.splice(n,1),t}getOwnPropertyDescriptor(e,t){if(t!==s)return Reflect.getOwnPropertyDescriptor(e,t)}},s=Symbol("private")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(0),r=n(65),s=(n(18),n(505)),a=n(71),l=n(184),c=n(338),d=n(104),u=n(105),h=n(506),p=n(508),g=n(53),m=n(339),f=n(21),y=n(156);function unwrapFrameProps(e){const{left:t,top:n,bottom:i,right:o,width:s,height:a,center:l,_constraints:c,size:d}=e;return{top:r.unwrapMotionValue(n),left:r.unwrapMotionValue(t),bottom:r.unwrapMotionValue(i),right:r.unwrapMotionValue(o),width:r.unwrapMotionValue(s),height:r.unwrapMotionValue(a),size:r.unwrapMotionValue(d),center:l,_constraints:c}}function useStyleAndRect(e,n){y.injectComponentCSSRules();const{style:r,_initialStyle:s,size:l}=e,p=unwrapFrameProps(e),m=g.useConstraints(p),v=function useBackgroundImage(e,t,n){let i;d.BackgroundImage.isImageObject(e.background)&&(i=e.background);const r=e.background&&i?i.src:null,[s,a]=o.useState({shouldCheckImageAvailability:!0,currentBackgroundImageSrc:null});if(!i)return{};const l={};if(r){if(null===t)return u.setImageForFill(e.background,null,l),l;const n=s.currentBackgroundImageSrc!==r;n!==s.shouldCheckImageAvailability&&a({currentBackgroundImageSrc:r,shouldCheckImageAvailability:n})}return c.collectBackgroundImageFromProps(e,t,l,s.shouldCheckImageAvailability,t=>{const{background:i}=e;if(!i||!d.BackgroundImage.isImageObject(i))return;const o=new Image;o.src=u.imageUrlForFill(i,t),o.onerror=()=>{n&&n.current&&(n.current.style.backgroundImage=u.imageUrlForFill(i))}}),l}(e,m||t.defaultFrameRect,n),b={display:"block",flexShrink:0,userSelect:"none",backgroundColor:void 0===e.background?"rgba(0, 170, 255, 0.3)":void 0};(function hasEvents(e){for(const t in e)if("drag"===t||t.startsWith("while")||"function"==typeof e[t]&&t.startsWith("on"))return!0;return!1})(e)||(b.pointerEvents="none");const k=i.Children.count(e.children)>0&&i.Children.map(e.children,e=>"string"==typeof e||"number"==typeof e).every(e=>!!e)&&{display:"flex",alignItems:"center",justifyContent:"center",textAlign:"center"},S=h.getStyleForFrameProps(e);void 0===l&&(h.hasLeftAndRight(S)||(b.width=t.defaultFrameRect.width),h.hasTopAndBottom(S)||(b.height=t.defaultFrameRect.height));let C={};m&&g.constraintsEnabled(p)&&(C={left:m.x,top:m.y,width:m.width,height:m.height,right:void 0,bottom:void 0},f.RenderTarget.current()===f.RenderTarget.canvas&&(C=Object.assign({},C,{left:0,top:0,x:0===m.x?"0px":m.x,y:0===m.y?"0px":m.y}))),Object.assign(b,v,k,s,S,C,r),a.Layer.applyWillChange({props:e},b);let x=b;return b.transform||(x=Object.assign({x:0,y:0},b)),[x,m]}t.unwrapFrameProps=unwrapFrameProps,t.defaultFrameRect={x:0,y:0,width:200,height:200};const v=new Set(["width","height","opacity","overflow","radius","background","color","x","y","z","rotate","rotateX","rotateY","rotateZ","scale","scaleX","scaleY","skew","skewX","skewY","originX","originY","originZ"]);t.FrameWithMotion=Object.assign(o.forwardRef(function FrameWithMotion(e,t){const{visible:n=!0}=e;return n?i.createElement(b,Object.assign({},e,{ref:t})):null}),{rect:(e,t)=>g.calculateRect(unwrapFrameProps(e),t||g.ParentSizeState.Unknown)});const b=o.forwardRef((e,t)=>{const{_border:n,style:o,name:a,center:c,border:d}=e,{props:u,children:h}=m.processOverrideForwarding(e),f=function getMotionProps(e){const t={};for(const n in e)(r.isValidMotionProp(n)||s.default(n))&&!v.has(n)&&(t[n]=e[n]);return t}(u),y=r.useExternalRef(t),[b,k]=useStyleAndRect(u,y);!c||k&&g.constraintsEnabled(unwrapFrameProps(u))||(f.transformTemplate=(e,t)=>!0===c?`translate(-50%, -50%) ${t}`:"x"===c?`translateX(-50%) ${t}`:"y"===c?`translateY(-50%) ${t}`:t);const S={"data-framer-component-type":"Frame"};void 0!==a&&(S["data-framer-name"]=a);const C=k?{width:k.width,height:k.height}:g.ParentSizeState.Disabled,x=g.useProvideParentSize(i.createElement(i.Fragment,null,h,i.createElement(l.Border,Object.assign({},n,{border:d}))),C);return i.createElement(r.motion.div,Object.assign({},S,f,{style:b,ref:y,transformValues:p.transformValues}),x)})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(511),o=n(21);t.injectComponentCSSRules=()=>{i.add('\n\n[data-framer-component-type] {\n    position: absolute;\n}\n\n\n[data-framer-component-type="Text"] {\n    cursor: default;\n}\n\n\n[data-framer-component-type="Stack"] > *,\n[data-framer-component-type="Stack"] > [data-framer-component-type],\n[data-framer-stack-gap] > *,\n[data-framer-stack-gap] > [data-framer-component-type] {\n    position: relative;\n}\n\n[data-framer-stack-gap] > * {\n    margin-top: calc(var(--stack-gap-y) / 2);\n    margin-bottom: calc(var(--stack-gap-y) / 2);\n    margin-right: calc(var(--stack-gap-x) / 2);\n    margin-left: calc(var(--stack-gap-x) / 2);\n}\n\n/* This should take the language direction into account */\n[data-framer-stack-direction-reverse="false"]\n[data-framer-stack-gap]\n> *:first-child,\n[data-framer-stack-direction-reverse="true"]\n[data-framer-stack-gap]\n> *:last-child {\n    margin-top: 0;\n    margin-left: 0;\n}\n\n/* This should take the language direction into account */\n[data-framer-stack-direction-reverse="false"]\n[data-framer-stack-gap]\n> *:last-child,\n[data-framer-stack-direction-reverse="true"]\n[data-framer-stack-gap]\n> *:first-child {\n    margin-right: 0;\n    margin-bottom: 0;\n}\n\n\nNavigationContainer\n[data-framer-component-type="NavigationContainer"] > *,\n[data-framer-component-type="NavigationContainer"] > [data-framer-component-type] {\n    position: relative;\n}\n\n'),i.add(o.RenderTarget.current()===o.RenderTarget.preview?' [data-framer-component-type="Frame"] * { pointer-events: auto; } ':"")}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GPU_RASTER_ENABLED=!1,t.isDebugBuild=!1},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(1),o=n(48),r=n(25),s=n(12);function nullToUndefined(e){if(null!==e)return e}function newConstraintProperties(e){if(e.cache.newConstraintProps)return e.cache.newConstraintProps;const t=e.constraints(),{left:n,right:o,top:r,bottom:a,centerAnchorX:l,centerAnchorY:c,width:d,height:u}=e,h={_constraints:{enabled:!0}};if(h.width=sizeValue(d,t.widthType),h.height=sizeValue(u,t.heightType),e.cache.parentDirected)return e.cache.newConstraintProps=h;if(i.isFiniteNumber(t.aspectRatio)||s.isMaster(e)||s.isReplica(e)){const n=e.cache.parentRect,o=e.rect(n);h._constraints.intrinsicWidth=o.width,h._constraints.intrinsicHeight=o.height,t.widthType===i.DimensionType.FixedNumber&&(h.width=o.width),t.heightType===i.DimensionType.FixedNumber&&(h.height=o.height)}return h.left=t.left?nullToUndefined(n):void 0,h.right=t.right?nullToUndefined(o):void 0,h.top=t.top?nullToUndefined(r):void 0,h.bottom=t.bottom?nullToUndefined(a):void 0,t.left&&t.right&&(h.width=void 0),t.top&&t.bottom&&(h.height=void 0),t.left||t.right||(h.center="x",h.left=`${100*l}%`),t.top||t.bottom||(h.center="y",h.top=`${100*c}%`),t.left||t.right||t.top||t.bottom||(h.center=!0),e.cache.newConstraintProps=h}function sizeValue(e,t){switch(t){case i.DimensionType.FixedNumber:return e;case i.DimensionType.Percentage:return`${100*e}%`;case i.DimensionType.FractionOfFreeSpace:return`${e}fr`;case i.DimensionType.Auto:return"auto"}}t.newConstraintProperties=newConstraintProperties,t.withPinsSizeRatioConstraints=function withPinsSizeRatioConstraints(e){return class extends o.default{constraintProperties(){if(this.cache.constraintProps)return this.cache.constraintProps;const e=this.constraints();return this.cache.constraintProps={left:e.left?this.left:null,right:e.right?this.right:null,top:e.top?this.top:null,bottom:e.bottom?this.bottom:null,width:sizeValue(this.width,e.widthType),height:sizeValue(this.height,e.heightType),aspectRatio:e.aspectRatio,centerX:`${100*this.centerAnchorX}%`,centerY:`${100*this.centerAnchorY}%`,parentSize:null}}newConstraintProperties(){return newConstraintProperties(this)}constraints(){return this.cache.parentDirected?i.ConstraintMask.quickfix({left:!1,right:!1,top:!1,bottom:!1,widthType:this.widthType,heightType:this.heightType,aspectRatio:this.aspectRatio,fixedSize:!1}):i.ConstraintMask.quickfix({left:i.isFiniteNumber(this.left),right:i.isFiniteNumber(this.right),top:i.isFiniteNumber(this.top),bottom:i.isFiniteNumber(this.bottom),widthType:this.widthType,heightType:this.heightType,aspectRatio:this.aspectRatio,fixedSize:!1})}constraintValues(){const e=this.constraints();return{left:e.left?this.left:null,right:e.right?this.right:null,top:e.top?this.top:null,bottom:e.bottom?this.bottom:null,widthType:this.widthType,heightType:this.heightType,width:this.width,height:this.height,aspectRatio:this.aspectRatio,centerAnchorX:this.centerAnchorX,centerAnchorY:this.centerAnchorY}}minSize(e){return i.ConstraintValues.toMinSize(this.constraintValues(),e)}size(e,t,n=!0){const{parentDirectedRect:o}=this.cache;return o&&n?{width:o.width,height:o.height}:i.ConstraintValues.toSize(this.constraintValues(),e,null,t)}rect(e){return this.cache.parentDirectedRect?Object.assign({},this.cache.parentDirectedRect):i.ConstraintValues.toRect(this.constraintValues(),e,null,!0)}matrix(e,t){if(t||void 0===e||(t=this.rect(e)),!t)throw Error("Could not determine frame to build matrix from");return(new WebKitCSSMatrix).translate(t.x,t.y).rotate(0,0,r.hasRotation(this)?this.rotation:0)}transformMatrix(e,t){if(t||(t=this.rect(e)),!t)throw Error("Could not determine frame to build matrix from");return(new WebKitCSSMatrix).translate(.5*t.width,.5*t.height).multiply(this.matrix(e,t)).translate(-.5*t.width,-.5*t.height)}isRotated(){return!!r.hasRotation(this)&&this.rotation%360!=0}}},t.sizeValue=sizeValue},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.codeComponentDefaults={codeComponentIdentifier:"",codeComponentProps:{}};const i="codeComponentIdentifier";function hasCodeComponent(e){return i in e}t.hasCodeComponent=hasCodeComponent,t.reduceCodeComponents=function reduceCodeComponents(e,t){hasCodeComponent(e)&&-1===t.codeComponentIdentifiers.indexOf(e.codeComponentIdentifier)&&t.codeComponentIdentifiers.push(e.codeComponentIdentifier)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.boxShadowDefaults={boxShadows:void 0}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.withDeviceDefaults={deviceType:null};const i="deviceType";t.hasDevice=function hasDevice(e){return i in e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(129),o=n(66),r=n(72);function effectDisabledOrHidden(e,t){return 0===e&&-1===t||-1===e&&(0===t||void 0===t)}t.effectsDefaults=Object.assign({},i.blendingDefaults,o.filterDefaults),t.effectDisabledOrHidden=effectDisabledOrHidden,t.withEffects=function withEffects(e){return i.withBlending(e)&&o.withFilters(e)},t.reduceBlurAndFilters=function reduceBlurAndFilters(e,t){if(!o.withFilters(e))return;const n=r.Property.nonOptional(e.blurEnabled);r.Property.isEnabled(n)?(void 0===t.blur?t.blur=e.blur:null!==t.blur&&t.blur!==e.blur&&(t.blur=null),e.blurType&&-1===t.blurTypes.indexOf(e.blurType)&&t.blurTypes.push(e.blurType)):r.Property.isDisabledVisible(n)&&(void 0===t.disabledBlur?t.disabledBlur=e.blur:null!==t.disabledBlur&&t.disabledBlur!==e.blur&&(t.disabledBlur=null));const i=r.Property.nonOptional(e.brightnessEnabled),s=r.Property.nonOptional(e.contrastEnabled),a=r.Property.nonOptional(e.grayScaleEnabled),l=r.Property.nonOptional(e.hueRotateEnabled),c=r.Property.nonOptional(e.invertEnabled),d=r.Property.nonOptional(e.saturateEnabled),u=r.Property.nonOptional(e.sepiaEnabled);void 0===t.blurEnabled?t.blurEnabled=n:effectDisabledOrHidden(t.blurEnabled,n)?t.blurEnabled=r.Property.disabledVisible:t.blurEnabled!==n&&(t.blurEnabled=null),void 0===t.brightnessEnabled?t.brightnessEnabled=i:effectDisabledOrHidden(t.brightnessEnabled,i)?t.brightnessEnabled=r.Property.disabledVisible:t.brightnessEnabled!==i&&(t.brightnessEnabled=null),void 0===t.contrastEnabled?t.contrastEnabled=s:effectDisabledOrHidden(t.contrastEnabled,s)?t.contrastEnabled=r.Property.disabledVisible:t.contrastEnabled!==s&&(t.contrastEnabled=null),void 0===t.grayScaleEnabled?t.grayScaleEnabled=a:effectDisabledOrHidden(t.grayScaleEnabled,a)?t.grayScaleEnabled=r.Property.disabledVisible:t.grayScaleEnabled!==a&&(t.grayScaleEnabled=null),void 0===t.hueRotateEnabled?t.hueRotateEnabled=l:effectDisabledOrHidden(t.hueRotateEnabled,l)?t.hueRotateEnabled=r.Property.disabledVisible:t.hueRotateEnabled!==l&&(t.hueRotateEnabled=null),void 0===t.invertEnabled?t.invertEnabled=c:effectDisabledOrHidden(t.invertEnabled,c)?t.invertEnabled=r.Property.disabledVisible:t.invertEnabled!==c&&(t.invertEnabled=null),void 0===t.saturateEnabled?t.saturateEnabled=d:effectDisabledOrHidden(t.saturateEnabled,d)?t.saturateEnabled=r.Property.disabledVisible:t.saturateEnabled!==d&&(t.saturateEnabled=null),void 0===t.sepiaEnabled?t.sepiaEnabled=u:effectDisabledOrHidden(t.sepiaEnabled,u)?t.sepiaEnabled=r.Property.disabledVisible:t.sepiaEnabled!==u&&(t.sepiaEnabled=null),null!==t.brightness&&r.Property.isEnabled(i)&&(void 0===t.brightness?t.brightness=e.brightness:t.brightness!==e.brightness&&(t.brightness=null)),null!==t.contrast&&r.Property.isEnabled(s)&&(void 0===t.contrast?t.contrast=e.contrast:t.contrast!==e.contrast&&(t.contrast=null)),null!==t.grayscale&&r.Property.isEnabled(a)&&(void 0===t.grayscale?t.grayscale=e.grayscale:t.grayscale!==e.grayscale&&(t.grayscale=null)),null!==t.hueRotate&&r.Property.isEnabled(l)&&(void 0===t.hueRotate?t.hueRotate=e.hueRotate:t.hueRotate!==e.hueRotate&&(t.hueRotate=null)),null!==t.invert&&r.Property.isEnabled(c)&&(void 0===t.invert?t.invert=e.invert:t.invert!==e.invert&&(t.invert=null)),null!==t.saturate&&r.Property.isEnabled(d)&&(void 0===t.saturate?t.saturate=e.saturate:t.saturate!==e.saturate&&(t.saturate=null)),null!==t.sepia&&r.Property.isEnabled(u)&&(void 0===t.sepia?t.sepia=e.sepia:t.sepia!==e.sepia&&(t.sepia=null))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(51);t.findValueForTokenCSSVariable=function findValueForTokenCSSVariable(e,t){if(!i.isTokenCSSVariable(e))return;const n=i.tokenIdFromCSSVariable(e);return n?t[n]:void 0}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(130),o=n(197),r=n(193),s=n(255),a=n(256),l=n(257),c=n(258),d=n(92),u=n(136),h=n(99),p=n(87),g=n(85),m=n(22);function isDrawableNode(e){return e&&(e instanceof d.default||e instanceof u.default||e instanceof h.default||e instanceof p.default||e instanceof m.default||isVectorNode(e))}function isVectorNode(e){return e&&(e instanceof i.default||e instanceof o.default||e instanceof r.default||e instanceof s.default||e instanceof a.default||e instanceof l.default||e instanceof c.default)}t.isTreeNode=function isTreeNode(e){return isDrawableNode(e)||e instanceof g.RootNode},t.isDrawableNode=isDrawableNode,t.isVectorNode=isVectorNode,t.isVectorNodeList=function isVectorNodeList(e){return-1===e.map(isVectorNode).indexOf(!1)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(601),o=n(51),r=n(163);class Shadow extends i.ShadowRecord{toJS(){const e=super.toJS();return e.__class=this.constructor.name,e}toJSON(){return this.toJS()}tokenVariables(){return o.isTokenCSSVariable(this.color)?[this.color]:[]}removeTokenVariables(e){const t=r.findValueForTokenCSSVariable(this.color,e);if(t)return new Shadow(Object.assign({},this.toJSON(),{color:t}))}}t.Shadow=Shadow;class BoxShadow extends i.BoxShadowRecord{toJS(){const e=super.toJS();return e.__class=this.constructor.name,e}toJSON(){return this.toJS()}tokenVariables(){return o.isTokenCSSVariable(this.color)?[this.color]:[]}removeTokenVariables(e){const t=r.findValueForTokenCSSVariable(this.color,e);if(t)return new BoxShadow(Object.assign({},this.toJSON(),{color:t}))}}t.BoxShadow=BoxShadow,t.isShadow=function isShadow(e){return e instanceof Shadow},t.isBoxShadow=function isBoxShadow(e){return e instanceof BoxShadow}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(4),o=n(1),r=n(4),s=n(16),a=n(12),l=n(40),c=(e,t,n)=>{const i=e.getGroundNodes().map(t=>e.getRect(t));return void 0!==n&&i.push(...n),void 0===i.find(e=>o.Rect.intersects(t,e))},d=(e,t,n,i,r)=>{const s=Object.assign({},e.getRect(t),n),a=[...e.getGroundNodes().map(e=>e.rect(null))];i&&a.push(...i);let l=s,c=0;for(;l;){if(s.x=xOffset(l,r),l=a.find(e=>o.Rect.intersects(e,s)),c>a.length)return s;c++}return s};function xOffset(e,t){const n=o.isFiniteNumber(t)?t:100;return o.Rect.maxX(e)+n}function addDefaultOffset(e,t,n){return Object.assign({},e,{x:xOffset(e,n)},t)}t.suggestedRect=(e,t,n,i,r,s)=>{if(r){const n=e.getNode(r);if(n)return d(e,n,t,i,s)}if(n){const r=((e,t,n)=>t.map(t=>e.getNode(t)).filter(e=>o.Size.equals(e.rect(null),n)))(e,n,t);if(r.length){const n=r.map(e=>addDefaultOffset(e.rect(null),t,s)).find(t=>c(e,t,i));if(n)return n;const o=r[0];return d(e,o,t,i,s)}}const a=((e,t,n,i)=>{const r=e.getGroundNodes().map(t=>e.getRect(t));void 0!==n&&r.push(...n);const s=r.filter(e=>e.width===t.width&&e.height===t.height||e.height===t.width&&e.width===t.height).sort((e,t)=>o.Rect.maxX(e)>o.Rect.maxX(t)?-1:1)[0];return void 0!==s?addDefaultOffset(s,t,i):null})(e,t,i,s);if(null!==a&&c(e,a,i))return a;const l=((e,t,n,i)=>{const r=e.getGroundNodes().map(t=>e.getRect(t));void 0!==n&&r.push(...n);const s=r.sort((e,t)=>o.Rect.maxX(e)>o.Rect.maxX(t)?-1:1)[0];return void 0!==s?addDefaultOffset(s,t,i):null})(e,t,i,s);return null!==l&&c(e,l,i)?l:Object.assign({},t,{x:0,y:0})},t.suggestedConstraintsForCopiedNode=(e,n,o,r)=>{const s=e.getRect(n);let a;i.isShapeContainerNode(n)&&(a=Math.min(s.width,100));const c=t.suggestedRect(e,s,o,r,n.id,a);return r.push(c),l.guessConstrainedFrame(c,null)},t.suggestedParent=(e,n,i,o)=>{if(1===n.length){let t=n[0];if(t===o){const n=e.getParent(t);t=n?n.id:r.NullID}let l=null;if(t){const n=e.getNode(t);if(n){const t=e.getRect(n);t.width>i.width&&t.height>i.height&&(l=n)}}if(null!==l&&s.hasChildren(l)&&!a.isReplicaOrReplicaChild(l))return l.id}return t.suggestedTopLevelFrame(e,n,i)},t.suggestedTopLevelFrame=(e,t,n)=>{if(t.length>0){const n=t[t.length-1],i=e.getGroundFrameAncestor(n,!0);if(i)return i.id}for(const o of e.sortVisually(e.getNodesAtPoint(n)).reverse())if(o instanceof i.FrameNode&&e.getParent(o.id)===r.NullID){if(a.isReplicaOrReplicaChild(o))continue;return o.id}return r.NullID}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(49),o=n(27),r=n(1),s=n(112),a=n(51),l=new Map;function background(e){if("linear-gradient"===e.fillType&&e.fillLinearGradient)return e.fillLinearGradient.toJS();if("radial-gradient"===e.fillType&&e.fillRadialGradient)return e.fillRadialGradient.toJS();if("image"===e.fillType&&e.fillImage){let t,n,i,o;return s.hasIntrinsicSize(e)&&(r.isFiniteNumber(e.intrinsicWidth)&&(t=e.intrinsicWidth),r.isFiniteNumber(e.intrinsicHeight)&&(n=e.intrinsicHeight)),r.isFiniteNumber(e.fillImagePixelWidth)&&(i=e.fillImagePixelWidth),r.isFiniteNumber(e.fillImagePixelHeight)&&(o=e.fillImagePixelHeight),{src:e.fillImage,pixelWidth:i,pixelHeight:o,intrinsicWidth:t,intrinsicHeight:n,fit:e.fillImageResize}}return e.fillColor?function cachedColor(e){return a.isTokenCSSVariable(e)?e:r.memoize(1e3,l,e,()=>r.Color(e))}(e.fillColor):void 0}t.collectBackgroundPropsForNode=function collectBackgroundPropsForNode(e,t){o.hasShape(e)||(!i.hasOptionalFill(e)||e.fillEnabled?i.hasFill(e)&&(t.background=background(e)):t.background=null)},t.collectFillPropsForNode=function collectFillPropsForNode(e,t){!i.hasOptionalFill(e)||e.fillEnabled?i.hasFill(e)&&(t.fill=background(e)):t.fill=null}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(138);function getThreadTimestamp({comments:e}){const t=e[e.length-1];return t&&t.createdAt.getTime()||0}t.colorFromThread=function colorFromThread(e){const t=e.comments[0];return t?i.colorFromId(t.author.id):""},t.getThreadTimestamp=getThreadTimestamp,t.getThreadPermalink=function getThreadPermalink({threadId:e,commentId:t},{href:n}=("undefined"!=typeof window?window.top.location:{href:""})){const i=new URL(n),o=t?`${e}:${t}`:e;return i.searchParams.set("t",o),i.toString()},t.canEditComment=function canEditComment(e,t){return t.author.id===e},t.canDeleteComment=function canDeleteComment(e,t){return t.author.id===e},t.isUnread=function isUnread({seenUntil:e,comments:t}){return!e||getThreadTimestamp({comments:t})>e.getTime()}},function(e,t){e.exports=require("react-dom")},function(e,t,n){"use strict";function keyDownToShortcut(e){const n=[];t.isWindows()?(e.metaKey&&n.push("Control"),e.ctrlKey&&n.push("Meta"),e.altKey&&n.push("Alt"),e.shiftKey&&n.push("Shift")):(e.ctrlKey&&n.push("Control"),e.metaKey&&n.push("Meta"),e.altKey&&n.push("Alt"),e.shiftKey&&n.push("Shift"));let i=(e.key||"").toUpperCase();return["CONTROL","ALT","SHIFT","META"].indexOf(i)<0&&(" "===i&&(i="SPACE"),i.length>0&&(i=i.substring(0,1).toUpperCase()+i.substring(1).toLowerCase()),n.push(i)),n.join("+")}Object.defineProperty(t,"__esModule",{value:!0}),t.isWindows=()=>/Win/.test(navigator.platform),t.keyDownToShortcut=keyDownToShortcut,t.handleKeyDown=function handleKeyDown(e,t){const n=t.getKeyMap(),i=n[keyDownToShortcut(e)]||n[e.keyIdentifier||(e.nativeEvent?e.nativeEvent.keyIdentifier:null)],o=[];return i?(i instanceof Array?o.push(...i):o.push(i),o.forEach(e=>e.call(t)),o):o}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(4),o=n(16),r=n(54),s=n(41),a=n(12),l=n(56);function replicaDescendantInSelection(e,t,n){if(!a.isReplicaChild(t))return!1;const i=l.TemplateHelper.getReplicaForTemplateNode(e,t);return!!i&&descendantInSelection(i,n)}function descendantInSelection(e,t){let n=!1;return function checkChildren(e){if(!n&&e)for(let t=0,i=e.length;t<i;t++){const i=e[t];if(i.isSelected())return void(n=!0);checkChildren(i.children)}}(e.children),n}t.default=function isSelectable(e,t,n,r,l){const{tree:c}=t;if(!e.cache.visible)return!1;if(s.hasLock(e)&&e.locked)return!1;if(r)return!!l||(a.isReplicaChild(e)?replicaDescendantInSelection(c,e,n):!(i.isVectorNode(e)&&!t.shapeModeActive)||function graphicDescendantInSelection(e,t,n){const o=e.getAncestorOfType(t,i.ShapeContainerNode);return!!o&&descendantInSelection(o,n)}(c,e,n));if(i.isVectorNode(e)&&!t.shapeModeActive)return!1;if(i.isFrameNode(e)&&!c.getParent(e.id))return 0===e.children.length||0!==e.rotation||e.isSelected()||a.isReplica(e);const d=[...n],u=c.getGroundNodesOfType(i.FrameNode,e=>!a.isReplica(e)&&0===e.rotation),h=t=>{t.forEach(t=>{(!a.isReplicaChild(t)||l||replicaDescendantInSelection(c,e,n))&&(s.hasLock(t)&&t.locked&&o.hasChildren(t)&&h(t.children),d.push(t.id))})};u.forEach(e=>{const t=e.children;h(t)}),t.shapeModeActive&&c.getNodesWithPredicate(i.isShapeContainerNode).forEach(e=>{const t=e.children;h(t)});const p=c.getGroundNodes(e=>!(e instanceof i.FrameNode));return h(p),n.forEach(e=>{const t=c.getNode(e);if(!t)return;d.push(...c.getAncestors(e));const n=c.getSiblings(t);h(n),l&&o.hasChildren(t)&&h(t.children)}),-1!==d.indexOf(e.id)},t.buildSelectableNodeCache=function buildSelectableNodeCache(e){const{tree:t}=e,n=[],r=t.getGroundNodesOfType(i.FrameNode,e=>0===e.rotation&&!a.isReplica(e)),l=e=>{e.forEach(e=>{s.hasLock(e)&&e.locked&&o.hasChildren(e)&&l(e.children),n.push(e.id)})};e.shapeModeActive||r.forEach(e=>{const t=e.children;l(t)});const c=t.getGroundNodes(t=>{if(e.shapeModeActive){if(!i.isVectorNode(t)&&!i.isShapeContainerNode(t))return!1;if(i.isShapeContainerNode(t)&&t.children.length>0)return!1}return!(t instanceof i.FrameNode&&0===t.rotation&&!a.isReplica(t))});e.shapeModeActive&&t.getNodesWithPredicate(i.isShapeContainerNode).forEach(e=>{l(e.children)});return l(c),n},t.isSelectableInFrame=function isSelectableInFrame(e,t,n,o){const{tree:l}=t;return!(r.hasVisibility(e)&&!e.visible||s.hasLock(e)&&e.locked||t.shapeModeActive&&!i.isVectorNode(e)&&!i.isShapeContainerNode(e)||void 0!==l.getAncestors(e.id).map(e=>l.getNode(e)).find(e=>r.hasVisibility(e)&&!e.visible)||(i.isFrameNode(e)&&l.getParent(e.id)===i.NullID&&0===e.rotation&&!a.isReplica(e)?0!==e.children.length:a.isReplicaChild(e)||!n&&-1===o.indexOf(e.id)))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(9),r=n(1),s=n(14),a=n(15),l=n(20),c=n(5);t.PanTool=class PanTool extends l.VekterTool{constructor(){super(...arguments),this.enum=c.Tools.Pan}start(){this.startScrollPoint=this.engine.canvasStore.offset,this.startSpacebar=this.engine.mouseStore.spacebar,this.startMiddleButton=this.engine.mouseStore.middleMouseButtonDownRaw,this.engine.toolStore.setMouseCursor("-webkit-grab"),a.getIpcRenderer().send(s.DocumentKeepMouseCursorVisible,!0),o.triggerCanvasPanEvent({})}stop(){this.engine.toolStore.setMouseCursor(""),a.getIpcRenderer().send(s.DocumentKeepMouseCursorVisible,!1)}update(){const{mouseRaw:e,mouseDownRaw:t,spacebar:n,middleMouseButtonDownRaw:i}=this.engine.mouseStore,o=this.engine.previousInputState;if(!t&&this.startSpacebar&&!n||this.startMiddleButton&&!i)return void(this.pathEngine?this.pathEngine.switchToDefault():this.engine.exitTool());!t&&o.mouseDownRaw&&this.engine.toolStore.setMouseCursor("-webkit-grab");const s=t||i;if(!e||!s)return;i&&this.engine.toolStore.setMouseCursor("-webkit-grabbing"),!o.mouseDownRaw&&t&&(this.engine.toolStore.setMouseCursor("-webkit-grabbing"),this.startScrollPoint=this.engine.canvasStore.offset);const a=r.Point.subtract(e,s),l=r.Point.subtract(this.startScrollPoint,r.Point.divide(a,this.engine.canvasStore.zoom));this.engine.canvasStore.scrollToTopLeft(l)}};t.Pan=class Pan extends i.Component{render(){return null}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(7),o=n(1),r=n(20),s=n(4),a=n(22),l=n(56),c=n(16),d=n(34),u=n(25),h=n(27),p=n(50),g=n(12),m=n(84),f=n(260),y=n(90),v=n(5),b=n(202),k=n(131),S=n(28);function getDelta(e,t,n){const i=o.Point.pixelAligned(o.Point.subtract(t,e));return n&&(Math.abs(i.x)>Math.abs(i.y)?i.y=0:i.x=0),i}function removeAutoAndFractionDimensionsFromUpdate(e,t){return d.isPinnable(e)?(e.widthType!==o.DimensionType.Auto&&e.widthType!==o.DimensionType.FractionOfFreeSpace||(delete t.width,delete t.widthType),e.heightType!==o.DimensionType.Auto&&e.heightType!==o.DimensionType.FractionOfFreeSpace||(delete t.height,delete t.heightType),t):t}function insertionSizesForSelection(e){return e.map(e=>e.rect).toArray()}function removeInsertionPlaceholders(e,t){t&&(t.cache.placeholders=null,e.updateNode(t.id,{}))}function intersects(e,t){for(const n of e)if(-1!==t.indexOf(n))return!0;return!1}function getChildBeginState(e,t){let n=i.Map();return s.isVectorNode(t)?n:(c.getChildren(t).forEach(t=>{const i=e.getRect(t),o=e.convertFrameToCanvas(t);n=n.set(t.id,{frame:i,canvasFrame:o})}),n)}function getOverrides(e,t){if(!t.originalid)return;const n=l.TemplateHelper.getReplicaForTemplateNode(e,t);return n?n.replicaInfo.overrides[t.originalid]:void 0}function getStartSize(e){const t={};return p.hasSize(e)&&(t.width=e.width,t.height=e.height),d.isPinnable(e)&&(t.widthType=e.widthType,t.heightType=e.heightType),t}t.MoveTool=class MoveTool extends r.VekterTool{constructor(){super(...arguments),this.enum=v.Tools.Move,this.wantsAutoscrolling=!0,this.targetIds=i.Map(),this.highlightedParents=new Set,this.hasMoved=!1,this.canMoveToParentDirected=!1,this.activeParentDirected=null,this.commonParentDirectedAtStart=null,this.activeParentDirectedInsertion=null,this.parentDirectedInsertionLine=null,this.memoizedParentDirectedSortingRects=function getMemoizedLiveSortingRects(){let e,t;return function(n,i,o,r,a){let l=a?t:e;if(!l){!function makeGroundNodes(e,t,n){t.forEach((t,i)=>{const o=n.get(i,i.id);e.moveNode(o,s.NullID,-1)})}(n,i,o);const c=n.tree.current(r);l=f.getLiveSortingRects(c,insertionSizesForSelection(i)),a?t=l:e=l}return l}}(),this.displaySelectionBox=!0,this.displaySelectionHandles=!0}start(){const{engine:e}=this,{selection:t,tree:n}=e;this.snapper=new b.SnapTool(e,t);const r=n.withoutDescendants(n.getNodes(t));this.selectedNodes=function getSelectedNodes(e,t){const n=e.sortVisually(t);let r=i.OrderedMap();return n.forEach(t=>{const n=function getBeginState(e,t){const n=e.getParent(t.id),i=m.codeComponentWithChildInsertion(n),r=e.convertFrameToCanvas(t);return{parent:n,index:e.getIndex(t),rect:e.getRect(t),canvasRect:r,canvasCenterPoint:o.Rect.center(r),constraintsLocked:d.isPinnable(t)?t.constraintsLocked:void 0,children:getChildBeginState(e,t),startFromParentDirected:i,unableToMove:i&&g.isReplicaChild(t),startSizeProps:getStartSize(t),overrides:getOverrides(e,t),hasMovedToNewParent:!1}}(e,t);r=r.set(t,n)}),r}(n,r),this.maxSize=function getMaxSize(e){let t=0,n=0;return e.forEach(e=>{const{width:i,height:o}=e.rect;i>t&&(t=i),o>n&&(n=o)}),{width:t,height:n}}(this.selectedNodes),this.startCanvasRect=function canvasRectForSelection(e){const t=[];return e.forEach(e=>{t.push(e.canvasRect)}),o.Rect.merge(...t)}(this.selectedNodes),this.canMoveToParentDirected=function selectionCanMoveToParentDirected(e){return void 0===e.find(e=>{const t=e.originalid&&!g.isReplica(e);return!!t||!!s.isVectorNode(e)})}(r),this.commonParentDirectedAtStart=function selectionHasCommonParentDirectedNode(e,t){let n=null;for(let i=0,o=t.length;i<o;i++){const o=t[i],r=e.getParent(o.id);if(!r||!a.isCodeComponentNode(r)||!m.codeComponentWithChildInsertion(r))return null;if(n){if(n.id!==r.id)return null}else n=r}return n}(n,r),e.beginUndoGroup(),e.setHighlight(null)}cancel(){const{engine:e}=this;e.discardUndoGroup()}stop(){const{engine:e}=this,{activeParentDirected:t,activeParentDirectedInsertion:n,selectedNodes:i,targetIds:r}=this;removeInsertionPlaceholders(e,t),t&&o.isFiniteNumber(n)&&(function insertSelectionIntoParentDirectedNode(e,t,n,i,o){i.forEach((i,r)=>{const s=o.get(r,r.id);e.moveNode(s,t.id,n);let a={top:0,left:0,right:null,bottom:null};i.parent&&i.parent.id===t.id&&(a=Object.assign({},a,i.startSizeProps)),e.updateNode(s,a),n++})}(e,t,n,i,r),S.experiments.isOn("fractionOnStackInsert")&&function setFractionInCrossDirection(e,t,n,i,r){if(n||1!==i.count())return;const s=i.keySeq().first(),a=r.get(s,s.id),l=e.tree.get(a)||s;if(!d.isPinnable(l)||k.hasAutoSize(l)&&"boolean"==typeof l.autoSize&&l.autoSize)return;const c={};"horizontal"===t.codeComponentProps.direction?(c.height=1,c.heightType=o.DimensionType.FractionOfFreeSpace):(c.width=1,c.widthType=o.DimensionType.FractionOfFreeSpace),e.updateNode(l.id,c)}(e,t,this.commonParentDirectedAtStart,i,r)),e.endUndoGroup(),this.snapper.stop()}update(){const{engine:e}=this,{tree:t,selection:n,altKey:i,cmdKey:r,mouse:l}=e,{middleMouseButtonDown:p}=e.mouseStore;if(!e.mouseDown||p)return void e.exitTool();if(function unableToMoveAll(e){return e.every(e=>e.unableToMove)}(this.selectedNodes))return;const v=function getMouseDelta(e){const{mouseDown:t,mouse:n,shiftKey:i,altKey:o,cmdKey:r}=e,s=e.previousInputState;if(!s.mouseDown)return;const a=getDelta(s.mouseDown,n,i),l=getDelta(s.mouseDown,s.mouse,s.shiftKey);return l.x===a.x&&l.y===a.y&&o===s.altKey&&r===s.cmdKey&&t?void 0:a}(e);if(!v||0===v.x&&0===v.y&&!this.hasMoved)return;this.hasMoved=!0,this.displaySelectionHandles=!1,this.highlightedParents.clear(),removeInsertionPlaceholders(e,this.activeParentDirected),this.targetIds=function handleCopies(e,t,n,i){return i?function createCopies(e,t,n){if(!1===n.isEmpty())return n;(function moveChildrenToDefaultPosition(e,t){t.valueSeq().forEach(t=>{t.children.forEach((n,i)=>{const o=e.getNode(i),r=n.frame;let s=o.updateForRect(r,t.rect);s=removeAutoAndFractionDimensionsFromUpdate(o,s),o.setIgnoringReplica(s,e)})})})(e.tree,t),t.forEach((t,i)=>{const o=e.cloneNode(i);n=n.set(i,o.id);const{parent:r,index:a,constraintsLocked:l}=t;let{rect:c}=t;if(i.originalid||e.moveNode(i.id,r?r.id:s.NullID,a),s.isVectorNode(i)&&r){const n=e.tree.convertPointToNode(r,t.canvasCenterPoint),i=n.x-c.width/2,o=n.y-c.height/2;c=Object.assign({},c,{x:i,y:o})}const d=r?e.tree.getRect(r):null;let u=i.updateForRect(c,d);void 0!==l&&(u.constraintsLocked=l),u=removeAutoAndFractionDimensionsFromUpdate(i,u),e.updateNode(i.id,u),i.originalid&&(i.cache.templateProperties={restore:!0,overrides:t.overrides})});const i=n.valueSeq().toArray();return e.setSelection(i),n}(e,t,n):function deleteCopies(e,t,n){if(n.isEmpty())return n;const i=n.valueSeq().toArray();return n=n.clear(),e.deleteNodes(i),e.setSelection(t.keySeq().toArray().map(e=>e.id)),n}(e,t,n)}(this.engine,this.selectedNodes,this.targetIds,i);const b=o.Rect.offset(this.startCanvasRect,v),{insertionIndex:k,insertionLine:S,activeParentDirected:C}=function parentDirectedInsertion(e,t,n,i,r,l,d,u){const p=function parentDirectingNodeInRange(e,t,n,i,o){if(!i)return null;const r=e.getNodesAtPoint(n).filter(e=>!e.originalid).reverse();if(o){const e=r.find(e=>e.id===o.id);if(e)return e}const l=r.find(n=>{if(!s.isTreeNode(n)||h.hasShape(n))return!1;const i=e.getAncestors(n.id);i.push(n.id);const o=!intersects(i,t);return o})||null;if(l&&a.isCodeComponentNode(l)&&m.codeComponentWithChildInsertion(l)){for(let n=0,i=t.length;n<i;n++){const i=t[n],o=e.getNode(i);if(o){const t=c.acceptsChild(e,l,o);if(!t)return null}}return l}return null}(e.tree,t,e.mouse,r,l);if(!p)return{insertionIndex:null,insertionLine:null,activeParentDirected:p};if(l&&l.id===p.id){const t=function getLiveSortingIndex(e,t,n,i,r,s){const a=s(e,t,n,i,e.altKey);return function closestSortingRect(e,t,n,i){const r=function getSmallesDistanceIndex(e){let t=1/0,n=0;for(let i=0,o=e.length;i<o;i++){const o=e[i];o>=t||(t=o,n=i)}return n}(t.map(e=>{const t=o.Rect.center(e);return o.Point.distance(t,n)}));return e.cache.placeholders={index:r,sizes:i},r}(i,a,r,insertionSizesForSelection(t))}(e,n,i,p,e.tree.convertPointToNode(p,e.mouse),d);return{insertionIndex:t,insertionLine:null,activeParentDirected:p}}{const{insertionIndex:t,insertionLine:n}=function getInsertionIndex(e,t,n,i){let o=null,r=null;if(!c.hasChildren(e))return{insertionIndex:o,insertionLine:r};let s=f.getChildrenRects(e,!0);if(!s)return{insertionIndex:o,insertionLine:r};const a=f.invisibleChildIndexes(e);s=s.filter((e,t)=>-1===a.indexOf(t));const l=t.getRect(e),{index:d,line:u}=e.component().class.childInsertion(s,l,n,i,e.codeComponentProps);s.length>0&&(r={a:t.convertPointToCanvas(e,u.a),b:t.convertPointToCanvas(e,u.b)});let h=-1;const p=e.children.length;o=p;for(let c=0;c<p;c++){const t=e.children[c];if(t.visible&&h++,h===d){o=d;break}}return{insertionIndex:o,insertionLine:r}}(p,e.tree,e.tree.convertPointToNode(p,e.mouse),u);return{insertionIndex:t,insertionLine:n,activeParentDirected:p}}}(e,n,this.selectedNodes,this.targetIds,this.canMoveToParentDirected,this.commonParentDirectedAtStart,this.memoizedParentDirectedSortingRects,this.maxSize);this.activeParentDirectedInsertion=k,this.parentDirectedInsertionLine=S,this.activeParentDirected=C;const{activeNodes:x,extraSnapRects:w}=function activeNodesAndSnapRects(e,t,n,i){let o=[],r=t.keySeq().toArray();if(!1===n.isEmpty()&&(o=r.map(t=>e.convertFrameToCanvas(t)),r=n.valueSeq().map(t=>e.getNode(t)).toArray()),i){const e=function getChildCanvasRects(e){const t=[];return e.valueSeq().forEach(e=>{e.children.forEach(e=>{t.push(e.canvasFrame)})}),t}(t);o.push(...e)}return{activeNodes:r,extraSnapRects:o}}(t,this.selectedNodes,this.targetIds,r),T=function getCommonParent(e,t){const n=t.map(t=>t?e.getParent(t.id):void 0);if(1!==new Set(n).size)return;const i=n[0];return i?i.id:s.NullID}(t,x),P=o.Point.distance(this.engine.previousInputState.mouse,this.engine.mouse)*this.engine.zoom<10&&!this.activeParentDirected,E=t.getTopLevelFrameNodes(x);this.snapper.excludedNodes=this.engine.selection;const F=this.snapper.snap(b,P,E,T,void 0,void 0,w),M=o.Point.pixelAligned(o.Point.subtract(this.startCanvasRect,F));this.selectedNodes.forEach((i,a)=>{const{unableToMove:p,startFromParentDirected:f}=i;if(p)return;const v=this.targetIds.get(a,a.id),b=t.get(v)||a,k=i.parent?t.current(i.parent):null,S=i.rect,x=k?t.convertPointToNode(k,this.startCanvasRect):this.startCanvasRect,w=k?t.convertPointToNode(k,F):F,T=o.Point.pixelAligned(o.Point.subtract(w,x)),P=o.Rect.offset(S,T),E=k?t.convertFrameToCanvas(k,P):P,_=k&&s.isVectorNode(k),O=b.originalid&&!g.isReplica(b),I=!r&&!_&&!O;let D=k;C?D=s.NullID:I&&(D=function findNewParent(e,t,n,i,o){const r=e.getPotentialParents(n,o,t);return e.sortVisually(r).reverse().find(n=>(function isValidParent(e,t,n,i){if(!s.isTreeNode(n)||h.hasShape(n))return!1;if(n&&n.originalid)return!1;if(m.codeComponentWithChildInsertion(n))return!1;if(!c.acceptsChild(e,n,t))return!1;const o=e.getAncestors(n.id);return o.push(n.id),!intersects(o,i)&&!o.some(e=>e===t.id)})(e,t,n,i))||s.NullID}(t,b,E,n,l),s.isVectorNode(b)&&null===D&&(D=function closestShapeContainer(e,t,n){if(!n||!s.isShapeContainerNode(n)||n.sizeToFit)return n;const i=e.convertFrameToCanvas(n);return o.Rect.intersects(t,i)?n:e.getNodesWithPredicate(s.isShapeContainerNode).find(n=>{const i=e.convertFrameToCanvas(n);return o.Rect.intersects(t,i)})||n}(t,E,k)),function shouldStayInOriginalParent(e,t,n,i,r){if(r||!n||!i)return!1;if(s.isEqual(i,n))return!1;if(i&&!e.getAncestors(n.id).find(e=>null!==i&&e===i.id))return!1;const a=o.Rect.atOrigin(e.getRect(n));return o.Rect.intersects(a,t)}(t,P,k,D,f)&&(D=k)),function moveNodeToNewParent(e,t,n){const i=e.tree.getParent(t.id);s.isEqual(n,i)||e.moveNode(t.id,n?n.id:s.NullID,-1)}(e,b,D),this.highlightedParents=function addToHighlightedParents(e,t,n){const i=n||t;return!i||s.isVectorNode(i)||s.isShapeContainerNode(i)&&i.sizeToFit?e:e.add(i.id)}(this.highlightedParents,D,C);const N=o.Point.subtract(i.canvasCenterPoint,M),R=D?t.convertPointToNode(D,N,!0):N;R.x-=P.width/2,R.y-=P.height/2;const A=o.Point.pixelAligned(R,S),L={x:A.x,y:A.y,width:S.width,height:S.height},B=b.updateForRect(L,D?t.getRect(D):null);!function collectConstraintsLock(e,t,n,i,o){if(void 0===n.constraintsLocked||!d.isPinnable(e))return;n.hasMovedToNewParent||(n.hasMovedToNewParent=!function isMovingToOriginalParent(e,t){return e&&t?e.id===t.id:!e&&!t}(i,o));const r=!n.hasMovedToNewParent&&n.constraintsLocked;e.constraintsLocked!==r&&Object.assign(t,{constraintsLocked:r})}(b,B,i,k,D),e.updateNode(v,B),function resetChildPositions(e,t,n,i){const{tree:r,cmdKey:s,altKey:a,previousInputState:l}=e,c=l.cmdKey;(s||s!==c)&&n.children.forEach((l,c)=>{let d=l.frame;if(s&&!a&&!n.startFromParentDirected){const e=function getParentOffset(e,t,n){let i={x:t.rect.x-n.x,y:t.rect.y-n.y};if(u.hasRotation(e)){const t=(new WebKitCSSMatrix).rotate(0,0,-e.rotation);i=y.default.convertPoint(t,i)}return i}(t,n,i);d=o.Rect.offset(d,e)}const h=r.getNode(c),p=h.updateForRect(d,i);removeAutoAndFractionDimensionsFromUpdate(h,p),e.updateNode(c,p)})}(e,b,i,L)})}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(179),r=n(107),s=n(1),a=n(4),l=n(31),c=n(283),d=n(684),u=n(424),h=n(42),p=n(422),g=n(5),m=n(3),f=n(144),y=n(49),v=n(425),b=n(72),k=n(426),S=n(14),C=n(15),x=n(299),w=n(195),T=n(2),P=n(86);function exportName(e){const t=e.name||h.defaultName(e);return 0===t.length&&e instanceof a.TextNode?"Text":t}function sanitizedFileName(e){return e.replace(/[\f\n\r\t\v\u00a0\u1680\u2000-\u200a\u2028\u2029\u202f\u205f\u3000\ufeff]+/gm," ").replace(/([\/]|^)([.]+[\/])+/gm,"/")}function renderNodeToSVG(e,t=1,n=s.RenderTarget.export,r=null,l=!1){let c=[],d=!0;if(a.isShapeContainerNode(e)?e.children.map(e=>{a.isVectorNode(e)&&c.push(e)}):(d=!1,c.push(e)),c=c.map(e=>P.removeAllTokensFromNodeTree(e,e.tree())),r){const e={gradientFillSupported:!0,strokeAlignmentValues:[],lineJoinValues:[],lineCapValues:[],fillImageResize:[]},t=[];c.forEach(t=>{t.walk(t=>{v.reduceFill(t,e),k.reduceStroke(t,e)})}),t.length>0&&(r.targetedElements=t),!0===e.fillEnabled&&"color"===e.fillType&&null!==e.fillColor&&(r.fillColor=e.fillColor),e.strokeEnabled&&b.Property.isEnabled(e.strokeEnabled)&&(null!==e.strokeColor&&(r.strokeColor=e.strokeColor),null!==e.strokeWidth&&1===e.strokeAlignmentValues.length&&null!==e.pathsAreClosed&&(r.strokeWidth=e.strokeWidth,r.strokeAlignment=e.strokeAlignmentValues[0]))}const u={needsXlinks:!1},h=c.map(e=>(function reduceVectorNodeNeedsXlinks(e,t){if(t.needsXlinks)return;(a.isShapeGroupNode(e)||a.isBooleanShapeNode(e))&&e.children&&e.children.map(e=>reduceVectorNodeNeedsXlinks(e,t));if(a.isShapeGroupNode(e))return;const{strokeEnabled:n,strokeAlignment:i,strokeWidth:o,fillEnabled:r,fillType:s,fillImage:l,boxShadows:c}=e;const d="inside"===i&&n&&b.Property.isEnabled(n)&&!!o;const u=r&&"image"===s&&null!==l;const h=c&&c.count()>0&&c.some(e=>void 0!==e&&e.enabled);(d||h||u)&&(t.needsXlinks=!0)}(e,u),function renderVectorNode(e,t,n,o){if(a.isShapeGroupNode(e)){const r=e.getProps();return i.createElement(s.VectorGroup,Object.assign({},r,{key:e.id,isRootVectorNode:!1,includeTransform:t}),e.children.map(e=>renderVectorNode(e,!0,n,o)))}const r=e.getProps();return i.createElement(s.Vector,Object.assign({},r,{key:e.id,isRootVectorNode:!1,includeTransform:t}))}(e,d,l,r||{}))),p=i.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:u.needsXlinks?"http://www.w3.org/1999/xlink":void 0,width:s.roundedNumberString(e.width,3),height:s.roundedNumberString(e.height,3)},h),g=T.default.serverStore.imageBaseURL.toString();return s.executeInRenderEnvironment({zoom:t,target:n,imageBaseURL:g},()=>o.renderToStaticMarkup(p))}function createHTML(e,t,n,i,o,s){let a,l="*{box-sizing:border-box; -webkit-font-smoothing: antialiased}html,body{margin:0;overflow:hidden}"+`body{position:absolute;left:0;top:0;width:${t}px;height:${n}px;font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";}`+`#scale{position:absolute; transform-origin: 0% 0%; ${a=i<1?`transform: scale(${i}, ${i})`:`zoom: ${i}`};}`+`#boundingBoxAndOffset{position:absolute; left:${o.x}px; top:${o.y}px;}`;s&&(l+=`body{background-color:${s};}`);let c="";for(const p of document.styleSheets)if(p instanceof CSSStyleSheet&&!(p.ownerNode instanceof Element&&"false"===p.ownerNode.getAttribute("data-export"))){try{if(!p.cssRules)continue}catch(u){continue}for(const e of Array.from(p.cssRules))if(e instanceof CSSImportRule)try{const t=new XMLHttpRequest;t.open("GET",e.href,!1),t.send(),200===t.status&&(c+=t.responseText)}catch(h){if("NetworkError"!==h.name)throw h;r.warn(`Failed to import stylesheet for export: ${e.href}`)}else c+=e.cssText+"\n"}""!==c&&(c=`<style>${c}</style>`);let d="";for(const r of document.getElementsByTagName("link"))"false"!==r.getAttribute("data-export")&&(d+=r.outerHTML);return d&&(d="\n"+d),`<!doctype html>\n        <html>\n        <head>\n            <meta charset="utf8"/>\n            <style>${l}</style>\n            ${c}${d}\n        </head>\n        <body>\n            <div id="scale">\n                <div id="boundingBoxAndOffset">\n                    ${e}\n                </div>\n            </div>\n        </body>\n        </html>`}t.startExport=function startExport(e,t){T.default.statusStore.setExportProgress(1,0),T.default.statusStore.setLastExportMode(t),C.getIpcRenderer().send(S.ExportHTML,e)},t.exportCanvas=function exportCanvas(e,t,n,r){const l=function renderRoot(e,t,n,r,l=s.RenderTarget.canvas){const d={minX:1/0,maxX:-1/0,minY:1/0,maxY:-1/0},h=e.getGroundNodes(),f=e.getGroundNodes(e=>a.isFrameNode(e)||a.isCodeComponentNode(e)||a.isShapeContainerNode(e));for(let i=0,o=h.length;i<o;i++){const e=h[i];w.collectBoundingBox(e,d,!0)}if(!w.isValidBoundingBox(d))return null;const y=w.getRectContainingBoundingBox(d),v=-y.x+n,b=-y.y+n,k=(y.width+2*n)*t,S=(y.height+2*n)*t,C=r?m.theme.canvasBackground:"transparent",E=P.getTokenCSSProperties(e),F=T.default.serverStore.imageBaseURL.toString(),M=createHTML(s.executeInRenderEnvironment({zoom:t,target:l,imageBaseURL:F},()=>o.renderToStaticMarkup(i.createElement(x.ThemedContainer,null,i.createElement(s.CustomProperties,{customProperties:E},e.getGroundNodes().map(e=>{if(a.isDrawableNode(e))return i.createElement(p.GroundNodeWrapper,{key:e.id+"wrapper",node:e},c.createElement(e))})),i.createElement(u.Screens,{frameNodes:f,selection:[],tool:g.Tools.Highlight,zoom:1,highlight:null})))),k,S,t,{x:v,y:b},C);return{width:k,height:S,html:M}}(e,t,n,r,s.RenderTarget.export);if(!l)return null;const{html:d,width:h,height:f}=l,y=""+t;return{inputs:{[y]:[{html:d,width:h,height:f}]},images:[],fonts:[],outputs:[{name:"Canvas.png",type:"png",keyPath:{scale:y,index:0}}]}},t.exportNodes=function exportNodes(e,t,n,r=s.RenderTarget.export){const c=new Set,u={},h={},p=[];t.forEach((g,m)=>{let v=g.exportOptions;0===v.size&&n&&(v=n),v.forEach(n=>{if(!n)return;if(!n.enabled)return;if("svg"===n.type&&!f.isExportableAsSVG(g))return;const v=""+n.scale;let b=h[v];b||(b=h[v]=new Array(t.length)),b[m]||(b[m]=function renderNodeToHTML(e,t,n=1,r=s.RenderTarget.export){const{rotation:c}=e.convertRectToCanvasWithRotation(t),u=e.getRect(t),h=t.cloneWithIds(Object.assign({rotation:c},t.updateForRect(s.Rect.atOrigin(u),null)));let p=new a.default;p.insertNode(h),function addComponentChildren(e,t,n){t.walk(t=>{if(t instanceof a.CodeComponentNode){const i=t.slots(),o=Object.keys(i);for(const t of o){const o=i[t];for(const t of o){if(n.get(t))continue;const i=e.get(t);if(i){const t=i.cloneWithIds();t.walk(e=>e.originalid=null),n.insertNode(t),addComponentChildren(e,t,n)}}}}})}(e,h,p);const g=Object.values(P.getTokenMap(e)),m=a.isVectorNode(h);h.walk(e=>{const t=P.removeTokensFromNode(e,g)||e;m&&(t.originalid=null),p.updateNode(e,t)});let f=(p=p.commit()).root.children[0];l.hasExportIncludesBackground(f)&&!f.exportIncludesBackground&&y.hasOptionalFill(f)&&(f=f.set({fillEnabled:!1}));let v={minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};w.collectBoundingBox(f,v,!0),v=w.validBoundingBox(v,w.boundingBoxFromRect(u));const b=w.getRectContainingBoundingBox(v),k=b.width,S=b.height,C=a.isVectorNode(t)?{x:0,y:0}:{x:-b.x,y:-b.y},x=Math.ceil(k*n),E=Math.ceil(S*n),F=T.default.serverStore.imageBaseURL.toString(),M=createHTML(s.executeInRenderEnvironment({zoom:n,target:r,imageBaseURL:F},()=>o.renderToStaticMarkup(i.createElement(d.default,{root:f}))),x,E,n,C);return{width:x,height:E,html:M}}(e,g,n.scale,r),"svg"===n.type&&f.isExportableAsSVG(g)&&(b[m].svg=renderNodeToSVG(g,n.scale)));const k=n.type;"html"===k&&c.add(g);const S=n.nameExtension.lastIndexOf("/"),C=S>=0?n.nameExtension.slice(0,S+1):"",x=n.nameExtension.slice(S+1),E=sanitizedFileName(exportName(g))||"export";let F=1,M=C+E+x+"."+k;for(;u[M.toLowerCase()];)M=C+E+"-"+(F+=1)+x+"."+k;u[M.toLowerCase()]=!0,p.push({name:M,type:k,keyPath:{scale:v,index:m}})})});const g={},m={};function collectImages(e){const t=e.image;t&&(g[t]=!0)}function collectFonts(e){e instanceof a.TextNode&&e.getAllFonts().forEach(e=>{m[e]=!0})}c.forEach(e=>{e.walk(collectImages),e.walk(collectFonts)});const v=Object.keys(g),b=Object.keys(m);return{inputs:h,images:v,fonts:b,outputs:p}},t.exportName=exportName,t.sanitizedFileName=sanitizedFileName,t.renderNodeToSVG=renderNodeToSVG},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(1),o=n(90),r=n(4),s=n(11),a=n(19),l=n(2);!function(e){function alignPoint(e,t,n){switch(n){case"Left":return{y:e.y,x:t.x};case"Center":return{y:e.y,x:t.x+t.width/2};case"Right":return{y:e.y,x:t.x+t.width};case"Top":return{x:e.x,y:t.y};case"Middle":return{x:e.x,y:t.y+t.height/2};default:return{x:e.x,y:t.y+t.height}}}function canvasCenterPoint(e,t){return i.Rect.center(e.convertFrameToCanvas(t))}function distributionValue(e,t){return"Horizontally"===t?e.x:e.y}function sort(e,t){const n=e.map((e,n)=>[t(e),n]).sort((e,t)=>e[0]-t[0]),i=e.length,o=new Array(i);for(let r=0;r<i;r++){const t=n[r][1];o[r]=e[t]}return o}e.align=l.default.wrapHandler((e,t,n)=>{const r=e.withoutDescendants(t);if(1===r.length){const t=r[0],s=e.getParent(t.id);if(null===s)throw Error("Cant align node without parent");const a=e.getRect(t),c=e.getRect(s),d=i.Rect.cornerPoints(i.Rect.atOrigin(a)).map(e=>o.default.convertPoint(t.transformMatrix(c),e)),u=i.Rect.fromPoints(d),h=i.Rect.positions(i.Rect.atOrigin(c)),p=i.Rect.positions(u);let g;switch(n){case"Left":g={x:a.x-p.minX};break;case"Center":g={x:a.x+h.midX-p.midX};break;case"Right":g={x:a.x+h.maxX-p.maxX};break;case"Top":g={y:a.y-p.minY};break;case"Middle":g={y:a.y+h.midY-p.midY};break;case"Bottom":default:g={y:a.y+h.maxY-p.maxY}}const m=Object.assign({x:a.x,y:a.y},g),f=Object.assign({},a,i.Point.pixelAligned(m,a));l.default.updateNode(t.id,t.updateForRect(f,c))}else{const t=r.map(t=>e.convertFrameToCanvas(t)),o=i.Rect.merge(...t);l.default.beginUndoGroup(),r.forEach(t=>{const r=e.getRect(t),s=e.getParent(t.id),a=e.convertFrameToNode(s,o);let c;switch(n){case"Left":c={x:a.x};break;case"Center":c={x:a.x+a.width/2-r.width/2};break;case"Right":c={x:a.x+a.width-r.width};break;case"Top":c={y:a.y};break;case"Middle":c={y:a.y+a.height/2-r.height/2};break;case"Bottom":default:c={y:a.y+a.height-r.height}}const d=Object.assign({x:r.x,y:r.y},c),u=Object.assign({},r,i.Point.pixelAligned(d,r));l.default.updateNode(t.id,t.updateForRect(u,e.getParentRect(t)))}),l.default.endUndoGroup()}}),e.alignPathSegments=l.default.wrapHandler((e,t,n)=>{let o;if(1===t.length){const n=t[0],i=e.getNode(n.id),{pathSegments:r}=s.convertPathToCanvas(e,i,i)[0];o=a.default.anchorBoundingBox(r)}else{const n=t.map(t=>{const n=e.getNode(t.id),i=n.pathSegments.get(t.index);return e.convertPointToCanvas(n,i)});o=i.Rect.fromPoints(n)}const l=s.groupPathSegmentSelectors(t);for(const s in l){const t=e.getNode(r.nodeIDFromString(s)),a=l[s],c=t.pathSegments.map((r,s)=>{if(-1===a.indexOf(s))return r;const l=alignPoint(e.convertPointToCanvas(t,r),o,n),c=e.convertPointToNode(t,l);return new i.PathSegment(r.merge(c))});e.updateNode(t,t.updateForPath({pathSegments:c}))}}),e.alignEnabled=function alignEnabled(e,t){const n=e.withoutDescendants(t);if(n.every(e=>e.cache.parentDirected))return!1;const i=n.length;return 1===i?null!==e.getParent(n[0].id):i>0},e.distribute=l.default.wrapHandler((e,t,n)=>{const o=e.withoutDescendants(t);if(o.length<3)return;const r=sort(o,t=>{return distributionValue(canvasCenterPoint(e,t),n)}),s=distributionValue(function canvasMinPoint(e,t){const n=e.convertFrameToCanvas(t);return{x:n.x,y:n.y}}(e,r[0]),n),a=distributionValue(function canvasMaxPoint(e,t){const n=e.convertFrameToCanvas(t);return{x:i.Rect.maxX(n),y:i.Rect.maxY(n)}}(e,r[r.length-1]),n),c=r.map(t=>{const i=e.convertFrameToCanvas(t);return"Horizontally"===n?i.width:i.height}),d=(a-s-c.reduce((e,t)=>e+t,0))/(r.length-1);let u=s;l.default.beginUndoGroup(),r.forEach((t,o)=>{const r=canvasCenterPoint(e,t),s=c[o];if(u+=s/2,o>0){const e=c[o-1];u+=e/2+d}"Horizontally"===n?r.x=u:r.y=u;const a=e.getParent(t.id),h=e.convertPointToNode(a,r),p=e.getRect(t),g={x:h.x-p.width/2,y:h.y-p.height/2},m=Object.assign({},p,i.Point.pixelAligned(g,p));l.default.updateNode(t.id,t.updateForRect(m,a?e.getRect(a):null))}),l.default.endUndoGroup()}),e.distributePathSegments=l.default.wrapHandler((e,t,n)=>{const o=sort(t,t=>{const i=e.getNode(t.id),o=i.pathSegments.get(t.index);return distributionValue(e.convertPointToCanvas(i,o),n)}),a=o[0],l=o[o.length-1],c=e.getNode(a.id),d=e.getNode(l.id),u=distributionValue(e.convertPointToCanvas(c,c.pathSegments.get(a.index)),n),h=(distributionValue(e.convertPointToCanvas(d,d.pathSegments.get(l.index)),n)-u)/(o.length-1),p=s.groupPathSegmentSelectors(t);for(const s in p){const t=e.getNode(r.nodeIDFromString(s)),a=p[s],l=t.pathSegments.map((r,s)=>{if(-1===a.indexOf(s))return r;const l=o.findIndex(e=>e.id===t.id&&e.index===s),c=u+l*h,d=e.convertPointToCanvas(t,r);return"Horizontally"===n?d.x=c:d.y=c,new i.PathSegment(r.merge(e.convertPointToNode(t,d)))});e.updateNode(t,{pathSegments:l})}}),e.distributeEnabled=function distributeEnabled(e){return!e.find(e=>e.cache.parentDirected)&&e.length>=3}}(t.ContextAlignment||(t.ContextAlignment={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=["arguments","await","break","case","catch","class","const","continue","debugger","default","delete","do","else","enum","eval","export","extends","false","finally","for","function","if","implements","import","in","instanceof","interface","let","new","null","package","private","protected","public","return","static","super","switch","this","throw","true","try","typeof","var","void","while","with","yield","Infinity","NaN","document","undefined","window"],o=["toolbar"],r=/^[$_\p{Lu}\p{Ll}\p{Lt}\p{Lm}\p{Lo}\p{Nl}]+/u,s=/[^$_\p{Lu}\p{Ll}\p{Lt}\p{Lm}\p{Lo}\p{Nl}\u{220C}\u{200D}\p{Nd}\p{Pc}\p{Mc}\p{Mn}]+/gu,a=/^[.]+$/;t.uniqueVariableName=(e,t)=>{if(null===e||0===e.trim().length)return null;let n=1;const i=e.replace(/_\d+$/,"");let o=e;for(;-1!==t.indexOf(o)||l(o);)o=`${i}_${n}`,n++;return o};const l=e=>-1!==i.indexOf(e)||window.hasOwnProperty(e)&&-1===o.indexOf(e);t.sanitizedVariableName=function sanitizedVariableName(e){if(!e)return null;let t=e.trim();return 0===t.length?null:(r.test(t)||(t="$"+t),t=(t=(t=t.replace(s,"_")).replace(/_+/g,"_")).replace(/^\$_/,"$"))},t.sanitizedDirectoryName=function sanitizedDirectoryName(e){if(!e)return null;let t=e.trim();return 0===t.length?null:a.test(t)?null:t=(t=(t=t.replace(s,"_")).replace(/_+/g,"_")).replace(/^\$_/,"$")}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(700);t.PublicStore=i.PublicStore;var o=n(702);t.CompanyStore=o.CompanyStore},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){const t={};e.clipPathWithRadius=function clipPathWithRadius(e,n){const i=`${e}/${n}`;return t[i]||(t[i]=function generateClipPathWithRadius(e,t){const n=[],i=e,o=e,r=1/e,s=2*Math.PI;for(let a=0;a<s;a+=r){function position(t){return t<0?`${t+e}px`:t>0?`calc(100% - ${e-t}px)`:"50%"}const r=Math.pow(Math.abs(Math.cos(a)),2/t)*i*Math.sign(Math.cos(a)),s=Math.pow(Math.abs(Math.sin(a)),2/t)*o*Math.sign(Math.sin(a));n.push(`${position(r)} ${position(s)}`)}return`polygon(${n.join(", ")})`}(e,n))}}(t.Squircle||(t.Squircle={}))},function(e,t){e.exports=require("react-dom/server")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(150),o=n(59),r=n(229);t.elementPropertiesForLinearGradient=function elementPropertiesForLinearGradient(e,t){return{id:`id${t}g${i.LinearGradient.hash(e)}`,angle:e.angle-90,stops:r.gradientColorStops(e).map(t=>({color:t.value,alpha:o.ConvertColor.getAlpha(t.value)*e.alpha,position:t.position}))}},t.elementPropertiesForRadialGradient=function elementPropertiesForRadialGradient(e,t){return{id:`id${t}g${i.RadialGradient.hash(e)}`,widthFactor:e.widthFactor,heightFactor:e.heightFactor,centerAnchorX:e.centerAnchorX,centerAnchorY:e.centerAnchorY,stops:r.gradientColorStops(e).map(t=>({color:t.value,alpha:o.ConvertColor.getAlpha(t.value)*e.alpha,position:t.position}))}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(65);t.isMotionValue=e=>e instanceof i.MotionValue},function(e,t,n){"use strict";function Size(e,t){return{width:e,height:t}}Object.defineProperty(t,"__esModule",{value:!0}),t.Size=Size,function(e){e.equals=(e,t)=>e===t||!(!e||!t)&&(e.width===t.width&&e.height===t.height),e.update=(e,t,n=!1)=>{let{width:i,height:o}=e;const r=i/o;return i=void 0!==t.width?t.width:i,o=void 0!==t.height?t.height:o,n&&(void 0===t.width&&void 0!==t.height&&(i=t.height*r),void 0!==t.width&&void 0===t.height&&0!==r&&(o=t.width/r)),{width:i,height:o}},e.subtract=function subtract(e,t){return{width:Math.max(0,e.width-t.width),height:Math.max(0,e.height-t.height)}},e.zero=e(0,0),e.isZero=function(t){return t===e.zero||0===t.width&&0===t.height},e.defaultIfZero=function(t,n,i){return e.isZero(i)?e(t,n):i}}(Size||(Size={})),t.Size=Size},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(124),o=n(96),r=n(33),s=n(106);var a,l;function valueToDimensionType(e){if("string"==typeof e){const t=e.trim();if("auto"===t)return a.Auto;if(t.endsWith("fr"))return a.FractionOfFreeSpace;if(t.endsWith("%"))return a.Percentage}return a.FixedNumber}function sizeAfterApplyingDefaultsAndAspectRatio(e,t,n){let i=o.isFiniteNumber(e)?e:100,r=o.isFiniteNumber(t)?t:100;return o.isFiniteNumber(n.aspectRatio)&&(o.isFiniteNumber(n.left)&&o.isFiniteNumber(n.right)?r=i/n.aspectRatio:o.isFiniteNumber(n.top)&&o.isFiniteNumber(n.bottom)?i=r*n.aspectRatio:n.widthType!==a.FixedNumber?r=i/n.aspectRatio:i=r*n.aspectRatio),{width:i,height:r}}function pinnedOffset(e,t){return o.isFiniteNumber(e)&&o.isFiniteNumber(t)?e+t:null}t.constraintDefaults={left:null,right:null,top:null,bottom:null,centerX:"50%",centerY:"50%",aspectRatio:null,parentSize:null,width:100,height:100},function(e){e[e.FixedNumber=0]="FixedNumber",e[e.Percentage=1]="Percentage",e[e.Auto=2]="Auto",e[e.FractionOfFreeSpace=3]="FractionOfFreeSpace"}(a=t.DimensionType||(t.DimensionType={})),t.isConstraintSupportingChild=function isConstraintSupportingChild(e){return!(!s.isReactChild(e)||!s.isReactElement(e))},t.isConstraintSupportingClass=function isConstraintSupportingClass(e){return null!=e&&!0===e.supportsConstraints},function(e){e.quickfix=e=>(e.fixedSize&&(e.widthType=a.FixedNumber,e.heightType=a.FixedNumber,e.aspectRatio=null),o.isFiniteNumber(e.aspectRatio)&&((e.left&&e.right||e.top&&e.bottom)&&(e.widthType=a.FixedNumber,e.heightType=a.FixedNumber),e.left&&e.right&&e.top&&e.bottom&&(e.bottom=!1),e.widthType!==a.FixedNumber&&e.heightType!==a.FixedNumber&&(e.heightType=a.FixedNumber)),e.left&&e.right&&(e.widthType=a.FixedNumber,e.fixedSize&&(e.right=!1)),e.top&&e.bottom&&(e.heightType=a.FixedNumber,e.fixedSize&&(e.bottom=!1)),e)}(l=t.ConstraintMask||(t.ConstraintMask={})),t.valueToDimensionType=valueToDimensionType,function(e){e.fromProperties=e=>{const{left:t,right:n,top:i,bottom:s,width:c,height:d,centerX:u,centerY:h,aspectRatio:p,autoSize:g}=e,m=l.quickfix({left:o.isFiniteNumber(t)||r.isAnimatable(t),right:o.isFiniteNumber(n)||r.isAnimatable(n),top:o.isFiniteNumber(i)||r.isAnimatable(i),bottom:o.isFiniteNumber(s)||r.isAnimatable(s),widthType:valueToDimensionType(c),heightType:valueToDimensionType(d),aspectRatio:p||null,fixedSize:!0===g});let f=null,y=null,v=a.FixedNumber,b=a.FixedNumber;if(m.widthType!==a.FixedNumber&&"string"==typeof c){const e=parseFloat(c);c.endsWith("fr")?(v=a.FractionOfFreeSpace,f=e):"auto"===c?v=a.Auto:(v=a.Percentage,f=e/100)}else void 0!==c&&"string"!=typeof c&&(f=r.Animatable.getNumber(c));if(m.heightType!==a.FixedNumber&&"string"==typeof d){const e=parseFloat(d);d.endsWith("fr")?(b=a.FractionOfFreeSpace,y=e):"auto"===d?b=a.Auto:(b=a.Percentage,y=parseFloat(d)/100)}else void 0!==d&&"string"!=typeof d&&(y=r.Animatable.getNumber(d));let k=.5,S=.5;return u&&(k=parseFloat(u)/100),h&&(S=parseFloat(h)/100),{left:m.left?r.Animatable.getNumber(t):null,right:m.right?r.Animatable.getNumber(n):null,top:m.top?r.Animatable.getNumber(i):null,bottom:m.bottom?r.Animatable.getNumber(s):null,widthType:v,heightType:b,width:f,height:y,aspectRatio:m.aspectRatio||null,centerAnchorX:k,centerAnchorY:S}},e.toMinSize=(e,t,n=null)=>{let i=null,r=null;const s=t?t.width:null,l=t?t.height:null,c=pinnedOffset(e.left,e.right);if(s&&o.isFiniteNumber(c))i=s-c;else if(n&&e.widthType===a.Auto)i=n.width;else if(o.isFiniteNumber(e.width))switch(e.widthType){case a.FixedNumber:i=e.width;break;case a.FractionOfFreeSpace:i=0;break;case a.Percentage:s&&(i=s*e.width)}const d=pinnedOffset(e.top,e.bottom);if(l&&o.isFiniteNumber(d))r=l-d;else if(n&&e.heightType===a.Auto)r=n.height;else if(o.isFiniteNumber(e.height))switch(e.heightType){case a.FixedNumber:r=e.height;break;case a.FractionOfFreeSpace:r=0;break;case a.Percentage:l&&(r=l*e.height)}return sizeAfterApplyingDefaultsAndAspectRatio(i,r,e)},e.toSize=(e,t,n,i)=>{let s=null,l=null;const c=t?r.Animatable.getNumber(t.width):null,d=t?r.Animatable.getNumber(t.height):null,u=pinnedOffset(e.left,e.right);if(c&&o.isFiniteNumber(u))s=c-u;else if(n&&e.widthType===a.Auto)s=n.width;else if(o.isFiniteNumber(e.width))switch(e.widthType){case a.FixedNumber:s=e.width;break;case a.FractionOfFreeSpace:s=i?i.freeSpaceInParent.width/i.freeSpaceUnitDivisor.width*e.width:0;break;case a.Percentage:c&&(s=c*e.width)}const h=pinnedOffset(e.top,e.bottom);if(d&&o.isFiniteNumber(h))l=d-h;else if(n&&e.heightType===a.Auto)l=n.height;else if(o.isFiniteNumber(e.height))switch(e.heightType){case a.FixedNumber:l=e.height;break;case a.FractionOfFreeSpace:l=i?i.freeSpaceInParent.height/i.freeSpaceUnitDivisor.height*e.height:0;break;case a.Percentage:d&&(l=d*e.height)}return sizeAfterApplyingDefaultsAndAspectRatio(s,l,e)},e.toRect=(e,t,n=null,s=!1,l=null)=>{let c=e.left||0,d=e.top||0,u=null,h=null;const p=t?r.Animatable.getNumber(t.width):null,g=t?r.Animatable.getNumber(t.height):null,m=pinnedOffset(e.left,e.right);if(p&&o.isFiniteNumber(m))u=p-m;else if(n&&e.widthType===a.Auto)u=n.width;else if(o.isFiniteNumber(e.width))switch(e.widthType){case a.FixedNumber:u=e.width;break;case a.FractionOfFreeSpace:u=l?l.freeSpaceInParent.width/l.freeSpaceUnitDivisor.width*e.width:0;break;case a.Percentage:p&&(u=p*e.width)}const f=pinnedOffset(e.top,e.bottom);if(g&&o.isFiniteNumber(f))h=g-f;else if(n&&e.heightType===a.Auto)h=n.height;else if(o.isFiniteNumber(e.height))switch(e.heightType){case a.FixedNumber:h=e.height;break;case a.FractionOfFreeSpace:h=l?l.freeSpaceInParent.height/l.freeSpaceUnitDivisor.height*e.height:0;break;case a.Percentage:g&&(h=g*e.height)}const y=sizeAfterApplyingDefaultsAndAspectRatio(u,h,e);u=y.width,h=y.height,null!==e.left?c=e.left:p&&null!==e.right?c=p-e.right-u:p&&(c=e.centerAnchorX*p-u/2),null!==e.top?d=e.top:g&&null!==e.bottom?d=g-e.bottom-h:g&&(d=e.centerAnchorY*g-h/2);const v={x:c,y:d,width:u,height:h};return s?i.Rect.pixelAligned(v):v}}(t.ConstraintValues||(t.ConstraintValues={})),t.getMergedConstraintsProps=function getMergedConstraintsProps(e,t){const n={};return e.constraints?n.constraints=Object.assign({},e.constraints,t):Object.assign(n,t),n}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(65);function collectBorderStyleForProps(e,t){const{borderWidth:n,borderStyle:i,borderColor:o}=e;if(!n)return;let r,s,a,l;"number"==typeof n?r=s=a=l=n:(r=n.top||0,s=n.bottom||0,a=n.left||0,l=n.right||0),0===r&&0===s&&0===a&&0===l||(r!==s||r!==a||r!==l?(t.borderStyle=e.borderStyle,t.borderColor=e.borderColor,t.borderTopWidth=`${r}px`,t.borderBottomWidth=`${s}px`,t.borderLeftWidth=`${a}px`,t.borderRightWidth=`${l}px`):t.border=`${r}px ${i} ${o}`)}t.collectBorderStyleForProps=collectBorderStyleForProps,t.Border=function Border(e){if(!e.borderWidth)return null;const t={position:"absolute",left:0,right:0,top:0,bottom:0,borderRadius:"inherit",pointerEvents:"none"};return e.border?(t.border=e.border,i.createElement(o.motion.div,{style:t})):(collectBorderStyleForProps(e,t),i.createElement("div",{style:t}))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(97),r=n(351),s=n(526),a=n(106),l=n(156),c=n(527);t.NavigationContext=i.createContext(c.navigatorMock),t.NavigationConsumer=t.NavigationContext.Consumer;t.Navigation=class Navigation extends i.Component{constructor(){super(...arguments),this.stack=[],this.overlayStack=[],this.stackItemID=0,this.state={current:-1,previous:-1,currentOverlay:-1,previousOverlay:-1},this.goBack=()=>{-1===this.state.currentOverlay?0!==this.state.current&&this.state&&this.setState({current:this.state.current-1,previous:this.state.current}):this.setState({currentOverlay:-1,previousOverlay:this.state.currentOverlay})}}componentDidMount(){0===this.stack.length&&this.transition(this.props.children,r.TransitionDefaults.Instant),l.injectComponentCSSRules()}componentWillReceiveProps(e){this.stack[0].component=e.children}getStackState(e){const{current:t,previous:n,currentOverlay:i,previousOverlay:o}=this.state;return e.overCurrentContext?{current:i,previous:o,stack:this.overlayStack}:{current:t,previous:n,stack:this.stack}}newStackItem(e,t){return this.stackItemID++,{key:`stack-${this.stackItemID}`,component:e,transition:t}}transition(e,t,n){const i=Object.assign({},t,n),o=!!i.overCurrentContext,r=this.getStackState({overCurrentContext:o}),s=r.stack[r.current];if(s&&s.component===e)return;const a=this.newStackItem(e,i);o?(this.overlayStack=[a],this.setState({currentOverlay:Math.max(0,Math.min(this.state.currentOverlay+1,this.overlayStack.length-1)),previousOverlay:this.state.currentOverlay})):(this.stack=this.stack.slice(0,r.current+1),this.stack.push(a),this.setState({current:Math.min(this.state.current+1,this.stack.length-1),previous:this.state.current,currentOverlay:-1,previousOverlay:this.state.currentOverlay}))}instant(e){this.transition(e,r.TransitionDefaults.Instant)}fade(e,t){this.transition(e,r.TransitionDefaults.Fade,t)}push(e,t){this.transition(e,r.pushTransition(t),t)}modal(e,t){this.transition(e,r.TransitionDefaults.Modal,t)}overlay(e,t){this.transition(e,r.overlayTransition(t),t)}flip(e,t){this.transition(e,r.flipTransition(t),t)}customTransition(e,t){this.transition(e,t)}render(){const e=this.getStackState({overCurrentContext:!1}),n=this.getStackState({overCurrentContext:!0}),r=function activeOverlayItem(e){let t,n;return-1!==e.current?t=e.stack[e.current]:n=e.stack[e.previous],{currentOverlayItem:t,previousOverlayItem:n}}(n);return i.createElement(o.FrameWithMotion,{top:0,left:0,width:"100%",height:"100%",position:"relative",style:Object.assign({overflow:"hidden",background:"unset"},this.props.style)},i.createElement(t.NavigationContext.Provider,{value:this},i.createElement(s.NavigationContainer,{position:void 0,initialProps:{},instant:!1,transitionProps:transitionPropsForStackWrapper(r),animation:animationForStackWrapper(r),backfaceVisible:backfaceVisibleForStackWrapper(r),visible:!0,hideAfterTransition:!1,backdropColor:void 0,onTapBackdrop:void 0},this.stack.map((t,n)=>i.createElement(s.NavigationContainer,{key:t.key,position:t.transition.position,initialProps:initialPropsForContainer(n,e),transitionProps:transitionPropsForContainer(n,e),instant:isInstantContainerTransition(n,e),animation:animationPropsForContainer(n,e),visible:containerIsVisible(n,e),hideAfterTransition:containerShouldHideAfterTransition(n,e),backfaceVisible:getBackfaceVisible(n,e),backdropColor:void 0,onTapBackdrop:void 0},containerContent(t)))),this.overlayStack.map((e,t)=>{const o=containerShouldHideAfterTransition(t,n);return i.createElement(s.NavigationContainer,{key:e.key,position:e.transition.position,initialProps:initialPropsForContainer(t,n),transitionProps:transitionPropsForContainer(t,n),instant:isInstantContainerTransition(t,n),animation:animationPropsForContainer(t,n),visible:containerIsVisible(t,n),hideAfterTransition:o,backdropColor:backdropColorForTransition(e.transition),backfaceVisible:getBackfaceVisible(t,n),onTapBackdrop:backdropTapAction(e.transition,o,this.goBack)},containerContent(e))})))}};const d={stiffness:500,damping:50,restDelta:1,type:"spring"};function transitionPropsForStackWrapper({currentOverlayItem:e}){return e&&e.transition.exit}function animationForStackWrapper({currentOverlayItem:e,previousOverlayItem:t}){return e&&e.transition.animation?e.transition.animation:t&&t.transition.animation?t.transition.animation:d}function backfaceVisibleForStackWrapper({currentOverlayItem:e,previousOverlayItem:t}){return e?e.transition.backfaceVisible:t&&t.transition.backfaceVisible}function backdropColorForTransition(e){return e.backdropColor?e.backdropColor:e.overCurrentContext?"rgba(4,4,15,.4)":void 0}function getBackfaceVisible(e,t){const{current:n,stack:i}=t;if(e===n){const t=i[e];return!t||!t.transition||t.transition.backfaceVisible}if(e<n){const t=i[e+1];return!t||!t.transition||t.transition.backfaceVisible}{const t=i[e];return!t||!t.transition||t.transition.backfaceVisible}}function initialPropsForContainer(e,t){const n=t.stack[e];if(n)return n.transition.enter}function transitionPropsForContainer(e,t){const{current:n,stack:i}=t;if(e!==n)if(e<n){const t=i[e+1];if(t&&t.transition)return t.transition.exit}else{const t=i[e];if(t&&t.transition)return t.transition.enter}}function animationPropsForContainer(e,t){const{previous:n,stack:i}=t,o=n>t.current?t.previous:t.current;if(e<o){const t=i[e+1];if(t&&t.transition.animation)return t.transition.animation}else if(e!==o){const t=i[e];if(t&&t.transition.animation)return t.transition.animation}else{const t=i[e];if(t.transition.animation)return t.transition.animation}return d}function isInstantContainerTransition(e,t){const{current:n,previous:i}=t;return e!==i&&e!==n||n===i}function containerIsVisible(e,t){const{current:n,previous:i,stack:o}=t;if(e>n&&e>i)return!1;if(e===n||e===i)return!0;const r=o[e];return r&&!0===r.transition.overCurrentContext}function containerShouldHideAfterTransition(e,t){const{current:n,previous:i,stack:o}=t;if(e!==i)return!1;if(e>n)return!0;{const e=o[n];return!e||!0!==e.transition.overCurrentContext}}function containerContent(e){return i.Children.map(e.component,t=>{if(!a.isReactChild(t)||!a.isReactElement(t)||!t.props)return t;const n={},{position:o}=e.transition,r=!o||void 0!==o.left&&void 0!==o.right,s=!o||void 0!==o.top&&void 0!==o.bottom;return r&&"width"in t.props&&(n.width="100%"),s&&"height"in t.props&&(n.height="100%"),i.cloneElement(t,n)})}function backdropTapAction(e,t,n){if(!t&&!1!==e.goBackOnTapOutside)return n}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(21),r=n(97);t.EmptyState=function EmptyState({title:e="Connect to content",children:t,size:n,hide:s,showArrow:c=!0,insideUserCodeComponent:d=!1}){const{target:u}=o.RenderEnvironment,h=i.Children.count(t),p=n.width,g=n.height;if(d&&0===h)return i.createElement(r.FrameWithMotion,{width:p,height:g,"data-name":"placeholder"});if(u!==o.RenderTarget.canvas)return null;if(s)return null;if(0!==h)return null;const m=void 0!==g&&g>=24,f=c&&m&&void 0!==p&&p>=34,y=m&&(!c||f);return i.createElement(r.FrameWithMotion,{key:"empty-state",className:"framerInternalUI-canvasPlaceholder",top:0,left:0,width:p,height:g,style:{display:"flex",alignItems:"center",justifyContent:"center",lineHeight:"1",padding:"0 10px"}},y&&i.createElement(a,null,e),f&&i.createElement(l,null))};const s="var(--framerInternalCanvas-canvasPlaceholderContentScaleFactor, 1)",a=({children:e})=>i.createElement("span",{style:{flex:"auto",whiteSpace:"nowrap",overflow:"hidden",textAlign:"center",WebkitMaskImage:`linear-gradient(90deg, black, black calc(100% - 12px * ${s}), transparent)`}},e),l=()=>{return i.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:14,height:7,viewBox:"0 0 14 7",style:{width:14,opacity:.9,transform:`scale(${s})`,transformOrigin:"100% 50%",marginTop:1}},i.createElement("g",{transform:"translate(0.5 0.5)"},i.createElement("path",{d:"M 0 3 L 12 3",fill:"transparent",stroke:"currentColor",strokeLinecap:"butt"}),i.createElement("path",{d:"M 9 0 L 12 3 L 9 6",fill:"transparent",stroke:"currentColor",strokeLinecap:"butt"})))}},function(e,t){e.exports=require("uuid/v4")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=Array.isArray,o=Object.keys,r=Object.prototype.hasOwnProperty;t.isEqual=function isEqual(e,t,n=!0){try{return function equal(e,t,n){if(e===t)return!0;if(e&&t&&"object"==typeof e&&"object"==typeof t){const s=i(e),a=i(t);let l,c,d;if(s&&a){if((c=e.length)!==t.length)return!1;for(l=c;0!=l--;){if(!n&&e[l]!==t[l])return!1;if(n&&!equal(e[l],t[l],!0))return!1}return!0}if(s!==a)return!1;const u=e instanceof Date,h=t instanceof Date;if(u!==h)return!1;if(u&&h)return e.getTime()===t.getTime();const p=e instanceof RegExp,g=t instanceof RegExp;if(p!==g)return!1;if(p&&g)return e.toString()===t.toString();if("function"==typeof e.equals&&"function"==typeof t.equals)return e.equals(t);const m=o(e);if((c=m.length)!==o(t).length)return!1;for(l=c;0!=l--;)if(!r.call(t,m[l]))return!1;for(l=c;0!=l--;)if("_owner"!==(d=m[l])||!e.$$typeof){if(!n&&e[d]!==t[d])return!1;if(n&&!equal(e[d],t[d],!0))return!1}return!0}return e!=e&&t!=t}(e,t,n)}catch(s){if(s.message&&s.message.match(/stack|recursion/i)||-2146828260===s.number)return console.warn("Warning: isEqual does not handle circular references.",s.name,s.message),!1;throw s}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(376),o=n(68),r=n(67),s=n(379),a=n(602);t.collectFilterPropsForNode=function collectFilterPropsForNode(e,t){1===e.brightnessEnabled&&(t.brightness=e.brightness),1===e.contrastEnabled&&(t.contrast=e.contrast),1===e.grayScaleEnabled&&(t.grayscale=e.grayscale),1===e.hueRotateEnabled&&(t.hueRotate=e.hueRotate),1===e.invertEnabled&&(t.invert=e.invert),1===e.saturateEnabled&&(t.saturate=e.saturate),1===e.sepiaEnabled&&(t.sepia=e.sepia),i.wantsFilterShadow(e)&&(o.hasBoxShadow(e)&&e.boxShadows?t.dropShadows=e.boxShadows.toArray().filter(e=>e.enabled&&!e.inset).map(e=>new s.BoxShadow(e.merge({blur:a.getFilterBlurForBoxBlur(e.blur)}))):r.hasShadow(e)&&e.shadows&&(t.dropShadows=e.shadows.toArray().filter(e=>e.enabled)))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(1),o=n(165);t.Shadow=Object.assign(o.Shadow,i.Shadow),t.BoxShadow=Object.assign(o.BoxShadow,i.BoxShadow)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.spikesDefaults={spikeCount:5,spikeDepth:50};const i="spikeCount";function hasSpikes(e){return i in e}t.hasSpikes=hasSpikes,t.reduceSpikes=function reduceSpikes(e,t){hasSpikes(e)&&(void 0===t.spikeCount?t.spikeCount=e.spikeCount:null!==t.spikeCount&&t.spikeCount!==e.spikeCount&&(t.spikeCount=null),void 0===t.spikeDepth?t.spikeDepth=e.spikeDepth:null!==t.spikeDepth&&t.spikeDepth!==e.spikeDepth&&(t.spikeDepth=null))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(605);let o;t.getPathOperator=function getPathOperator(){return o||(o=new i.PaperjsPathOperator),o}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(252),o=n(609),r=n(73),s=n(36),a=n(48),l=n(42),c=n(110),d=n(380);t.isShapeGroupNode=function isShapeGroupNode(e){return e instanceof ShapeGroupNode};class ShapeGroupNode extends a.default{constructor(e){super(),s.setDefaults(this,o.ShapeGroupRecord,e)}calculatedPaths(){const e=this.cache;if(e.calculatedPaths)return e.calculatedPaths;const t=i.CompoundShape.sourcePaths(this.children);return e.calculatedPaths=i.CompoundShape.executePathBoolean(t,r.PathBooleanType.Join),e.calculatedPaths}normalizedPath(){this.calculatedPaths()}rect(e){return{x:this.x,y:this.y,width:this.width,height:this.height}}matrix(e,t){const n={x:this.x,y:this.y};return t&&(n.x=t.x,n.y=t.y),(new WebKitCSSMatrix).translate(n.x,n.y).rotate(0,0,this.rotation)}transformMatrix(e,t){const n={width:this.width,height:this.height};return t&&(n.width=t.width,n.height=t.height),(new WebKitCSSMatrix).translate(.5*n.width,.5*n.height).multiply(this.matrix(e,t)).translate(-.5*n.width,-.5*n.height)}isRotated(){return this.rotation%360!=0}updateForRect(e,t){return e}updateForSize(e,t){return e}getProps(){const e=c.stringFromNodeID(this.id),t=l.defaultName(this),n=1!==this.opacity?this.opacity:void 0;let i=!0;this.cache.latest&&(i=this.tree().isRootVectorNode(this));const o=this.rect(null),r=super.getProps(),s={key:e,id:void 0,opacity:n,visible:this.visible,x:this.x,y:this.y,rotation:this.rotation,width:this.width,height:this.height,defaultName:t,isRootVectorNode:i,frame:o};return Object.assign(r,s),r}preCommit(e){this.isEmptyGroup()?e.removeNode(this):d.wrapInShapeContainer(this,e)}}t.default=ShapeGroupNode},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(24);t.NoDevice="No Device",t.getDevices=()=>{const e=i.componentLoader.componentIdentifiers(),t={};return e.map(e=>{const n=i.componentLoader.componentForIdentifier(e);n&&"device"===n.type&&(t[n.identifier]=n.class.descriptor)}),t},t.getDeviceCategories=e=>{const t={};for(const n in e){const i=e[n],o=i.category||"Default",r=t[o]||{};r[n]=i,t[o]=r}return t},t.getDeviceKinds=e=>{const t={};for(const n in e){const i=e[n],o=i.kind;o&&(t[o]=t[o]||{},t[o][n]=i)}return t},t.getDevice=e=>t.getDevices()[e],t.getDeviceName=e=>{if(e){const n=t.getDevices()[e];return n?n.selector:void 0}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(4),o=n(115),r=n(16),s=n(1),a=n(68),l=n(67),c=n(90),d=n(1),u=n(62);function isValidBoundingBox(e){return[e.minX,e.maxX,e.minY,e.maxY].every(d.isFiniteNumber)}t.collectBoundingBox=function collectBoundingBox(e,t,n,d=new WebKitCSSMatrix,h=null){if(!e.visible&&n)return;d=d.multiply(e.transformMatrix(h));const p=e.rect(h);let g=s.Rect.atOrigin(p);u.hasStroke(e)&&1===e.strokeEnabled&&"center"===e.strokeAlignment&&e.strokeColor&&0!==s.Color(e.strokeColor).a&&e.strokeWidth&&e.strokeWidth>0&&(g=s.Rect.inflate(g,e.strokeWidth/2));const m=s.Rect.cornerPoints(g).map(e=>c.default.convertPoint(d,e)),f=s.Rect.fromPoints(m),y=Math.floor(f.x),v=Math.ceil(f.x+f.width),b=Math.floor(f.y),k=Math.ceil(f.y+f.height);if(t.minX=Math.min(t.minX,y),t.maxX=Math.max(t.maxX,v),t.minY=Math.min(t.minY,b),t.maxY=Math.max(t.maxY,k),function collectshadowBounds(e,t,n,o=null){if(!i.isDrawableNode(e))return;const r=e.rect(o),d=s.Rect.atOrigin(r);let u;if(a.hasBoxShadow(e)&&(u=e.boxShadows),l.hasShadow(e)&&(u=e.shadows),u)for(let i=0,a=u.count();i<a;i++){const e=u.get(i);if(!e.enabled)continue;const o=s.localShadowFrame(e,d);if(!o)continue;const r=s.Rect.cornerPoints(o),a=r.map(e=>c.default.convertPoint(n,e)),l=s.Rect.fromPoints(a),h=Math.floor(l.x),p=Math.ceil(h+l.width),g=Math.floor(l.y),m=Math.ceil(g+l.height);t.minX=Math.min(t.minX,h),t.maxX=Math.max(t.maxX,p),t.minY=Math.min(t.minY,g),t.maxY=Math.max(t.maxY,m)}}(e,t,d),(!o.hasClip(e)||!e.clip)&&r.hasChildren(e)&&!i.isBooleanShapeNode(e))for(let i=0,o=e.children.length;i<o;i++)collectBoundingBox(e.children[i],t,n,d,p)},t.isValidBoundingBox=isValidBoundingBox,t.validBoundingBox=function validBoundingBox(e,t){return isValidBoundingBox(e)?e:t},t.boundingBoxFromRect=function boundingBoxFromRect(e){return{minX:e.x,minY:e.y,maxX:s.Rect.maxX(e),maxY:s.Rect.maxY(e)}},t.getRectContainingBoundingBox=function getRectContainingBoundingBox(e){const t=Math.floor(e.minX),n=Math.floor(e.minY);return{x:t,y:n,width:Math.ceil(e.maxX)-t,height:Math.ceil(e.maxY)-n}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(23),o=n(4),r=n(1),s=n(12),a=n(56);function jsonEquals(e,t){for(const n in e){if("parentid"===n)continue;const i=e[n],o=t[n];if("id"===n||"fillImage"===n){if("string"==typeof i){if(!i.endsWith(o))return!1}else if(i!=o)return!1}else if("children"===n){if(!(i instanceof Array&&o instanceof Array))return!1;const e=i.length;if(e!==o.length)return!1;for(let t=0;t<e;t++)if(!jsonEquals(i[t],o[t]))return!1}else if(!r.isEqual(i,o))return!1}return!0}function updateInternalReplicas(e,t,n){t.walk(t=>{if(t.originalid&&(t.originalid=null),s.hasTemplate(t)&&t.replicaInfo){const i=t.replicaInfo;t.replicaInfo=null;const r=i.master,a=n.componentForIdentifier(r);if(!a)return;const l=o.CanvasNode.fromJS(a.class);if(!l||!s.isMaster(l))return;const c=e.newId();l.walk(e=>{e.id=`${c}${e.id}`}),updateInternalReplicas(e,l,n),t.children=l.children}})}t.masterFromJSONInFakeTree=function masterFromJSONInFakeTree(e,t){const n=o.CanvasNode.fromJS(e);if(!n)return null;n.cache.json=e;const i=new o.default;return i.insertNode(n,null),updateInternalReplicas(i,n,t),n},t.jsonEquals=jsonEquals,t.updateExternalMasterInDocument=function updateExternalMasterInDocument(e,t){t.forEachDesignComponents(n=>{const r=n.class,l=r.isExternalMaster;if("string"!=typeof l)throw Error("missing isExternalMaster");i(l===n.packageIdentifier,"Inconsistent packageName");const c=r.id,d=e.tree.get(c);if(!d)return;if(d.cache.json&&jsonEquals(d.cache.json,r))return;const u=o.CanvasNode.fromJS(r);if(!u)throw Error("assert: Invalid tree");u.cache.json=r,updateInternalReplicas(e.tree,u,t);const h=[];d.walk(e=>{e instanceof o.TextNode&&h.push(e)}),e.tree.removeNode(d);const p=e.tree.insertNode(u),g=d.cache.replicaInstances;g&&(p.cache.replicaInstances=g.slice()),p.cache.replicaInstances&&p.cache.replicaInstances.forEach(t=>{const n=e.tree.getNode(t);n&&s.isReplica(n)&&s.isMaster(u)&&n.walk(t=>{if(t instanceof o.TextNode){const i=n.replicaInfo.overrides[t.originalid];if(i&&i.styledText){if(!t.originalid)return;const i=h.find(e=>e.id===t.originalid),o=e.tree.getNode(t.originalid);if(!i||!o)return;n.replicaInfo.overrides=a.TemplateHelper.maybePatchText(i,o,t,n.replicaInfo.overrides)}}})})})},t.insertExternalMasterInDocument=function insertExternalMasterInDocument(e,t,n){i(s.isExternalMaster(t),"Non existing master must be external"),i(0===t.rect({width:0,height:0}).x,"Must be placed at 0, 0");const o=t.cache.json;return(t=e.tree.insertNode(t.cloneWithIds())).cache.json=o,updateInternalReplicas(e.tree,t,n),t}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(4),o=n(617),r=n(252),s=n(134),a=n(135),l=n(36);t.isBooleanShapeNode=function isBooleanShapeNode(e){return e instanceof BooleanShapeNode};class BooleanShapeNode extends(s.withFrameForShape(a.withBaseShapeTraits(i.CanvasNode))){constructor(e){super(),l.setDefaults(this,o.BooleanShapeRecord,e)}calculatedPaths(){const e=this.cache;if(e.calculatedPaths)return e.calculatedPaths;const t=r.CompoundShape.sourcePaths(this.children);return e.calculatedPaths=r.CompoundShape.executePathBoolean(t,this.pathBoolean),e.calculatedPaths}normalizedPath(){this.calculatedPaths()}preCommit(e){this.isEmptyGroup()?e.removeNode(this):super.preCommit(e)}}t.default=BooleanShapeNode},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(83),o=n(39),r=n(25),s=n(62),a=n(54),l=n(41),c=n(50),d=n(116),u=n(31),h=n(60),p=n(160),g=n(114);t.ShapeNodeRecord=Object.assign({},i.nameDefaults,g.shapeFillDefaults,r.rotationDefaults,o.aspectRatioDefaults,s.shapeStrokeDefaults,h.opacityDefaults,p.boxShadowDefaults,a.visibilityDefaults,l.lockDefaults,c.sizeDefaults,d.positionDefaults,u.withExportDefaults)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(85),o=n(92),r=n(136),s=n(130),a=n(197),l=n(99),c=n(87),d=n(384),u=n(255),h=n(256),p=n(258),g=n(257),m=n(193),f=n(1),y=n(22),v=n(37),b=n(190),k=n(69),S=n(57),C=n(93);t.classList=[i.RootNode,o.default,r.default,s.default,a.default,l.default,c.default,v.StyledTextDraft,b.Shadow,b.BoxShadow,k.LinearGradient,k.RadialGradient,S.GradientColorStop,d.default,f.PathSegment,u.default,h.default,p.default,g.default,m.default,y.default,C.ColorTokenNode],t.classMap={},t.nodeDefaultsMap={};for(const x of t.classList)x&&(t.classMap[x.name]=x,x.name.endsWith("Node")&&(t.nodeDefaultsMap[x.name]=new x({id:"_DEFAULT_"})))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.distance=function distance({x:e,y:t},{x:n,y:i}){const o=Math.abs(e-n),r=Math.abs(t-i);return Math.sqrt(o*o+r*r)},e.delta=function delta({x:e,y:t},{x:n,y:i}){return{x:n-e,y:i-t}},e.add=function add({x:e,y:t},{x:n,y:i}){return{x:e+n,y:t+i}}}(t.Point||(t.Point={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(169),o=n(0),r=n(390),s=n(391),a=n(200),l=n(392),c=n(634),d=n(266),u=n(394),h=n(395);function setDragPreviewPosition(e,t){setDragPreviewProperties(a.Point.add(t,e.elementOffset))}var p;function setDragPreviewProperties(e){const t={};s.isNumber(e.x)&&(t[p.x]=e.x+"px"),s.isNumber(e.y)&&(t[p.y]=e.y+"px"),s.isNumber(e.scale)&&(t[p.scale]=`${e.scale}`),s.isNumber(e.opacity)&&(t[p.opacity]=`${e.opacity}`),s.isNumber(e.originX)&&(t[p.originX]=`${100*e.originX}%`),s.isNumber(e.originY)&&(t[p.originY]=`${100*e.originY}%`),r.applyDragPreviewProperties(t)}function previewElement(e,t){let n;if(t){const e=document.createElement("template");i.render(t(),e),n=e.firstChild}else n=e.cloneNode(!0);return n.style.position="absolute",n.style.left="0px",n.style.top="0px",n.style.width=`${e.offsetWidth}px`,n.style.height=`${e.offsetHeight}px`,n.style.marginLeft="0px",n.style.marginRight="0px",n.style.marginTop="0px",n.style.marginBottom="0px",n.style.pointerEvents="none",n.style.userSelect="none",n.style.webkitUserSelect="none",n.style.animation="none",n.style.transition="",n.style.webkitTransition="",n.style.zIndex="100000",n.style.transform=`translateX(var(${p.x}, 0px)) translateY(var(${p.y}, 0px)) scale(var(${p.scale}, 0))`,n.style.transformOrigin=`var(${p.originX}, 50%) var(${p.originY}, 50%)`,n.style.opacity=`var(${p.opacity}, 1)`,n.style.cursor="default",n}t.useDraggable=function useDraggable(e={}){const{enabled:t,hideDragSource:n}=e,i=o.useRef(null),s=e.ref||i,a=l.useRefUpdateCount(s),p=o.useRef(e);p.current=e;const[g,m]=o.useState(null),{beginAutoScroll:f,endAutoScroll:y,updateAutoScroll:v}=c.useAutoScroll(),b=o.useContext(d.dragDataTransferContext),k=o.useCallback(e=>{if(!1===t)return;const n=s.current;if(!n)return;const{top:i,left:o,width:r,height:a}=n.getBoundingClientRect(),{x:l,y:c}=e.client,d=b.dragSessionStart(),h=new u.DragDataTransfer,g={x:o+r/2-l,y:i+a/2-c},f={sessionId:d,startEvent:e,elementOffset:{x:o,y:i},clonedElement:previewElement(n,p.current.customDragPreview),dropTransitionActive:!1,began:!1,ended:!1,originalOpacity:null,originalPointerEvents:null,centerOfGravityOffset:g,dataTransfer:h},y=(l-o)/r,v=(c-i)/a,k=Math.max(r,a,1),S=(k+2)/k;m(f),setDragPreviewPosition(f,{x:0,y:0}),setDragPreviewProperties({scale:S,opacity:.8,originX:y,originY:v})},[a,t]),S=o.useCallback(e=>{if(!g)return;if(setDragPreviewPosition(g,e.delta),!g.began||g.ended)return;const{dataTransfer:t}=g,n=Object.assign({},e,{dataTransfer:t,centerOfGravityOffset:g.centerOfGravityOffset});v(n),b.dragSessionChange(g.sessionId,n);const{onDrag:i,dragProperties:o}=p.current;let s="";if("none"!==t.dropEffect&&(t.dropEffectCursor?s=t.dropEffectCursor:"copy"===t.dropEffect&&(s="copy")),r.setDragOverlayCursor(s),i&&i(n),o){const e=o(n);e&&setDragPreviewProperties(e)}},[g,v,b]),C=o.useCallback(e=>{if(!g)return;const t=e.cancelled||function outsideWindowBounds(e){return e.x<0||e.y<0||e.x>window.innerWidth||e.y>window.innerHeight}(e.client),n=Object.assign({},e,{dataTransfer:g.dataTransfer,centerOfGravityOffset:g.centerOfGravityOffset,cancelled:t});b.dragSessionEnd(g.sessionId,n);const{onDragEnd:i,onDropAnimationStart:o,dropAnimationProperties:r}=p.current;i&&i(n);const s="none"!==g.dataTransfer.dropEffect;let a={scale:1,opacity:s?0:1};if(s||(a.x=g?g.elementOffset.x:0,a.y=g?g.elementOffset.y:0),!t&&r){const e=r(n);e&&(a=e)}g.dropTransitionActive=!0,o&&o(),g.clonedElement.style.transition="transform 0.2s, opacity 0.2s",g.clonedElement.style.webkitTransition="transform 0.2s, opacity 0.2s",setDragPreviewProperties(a),y()},[g,y,b]);return h.useDragGesture({ref:s,onDragStart:k,onDrag:S,onDragEnd:C}),o.useEffect(()=>{if(!g)return;const e=s.current;if(!e)return;function handleTransitionEnd(){if(!g||!g.dropTransitionActive)return;g.ended=!0,m(null);const{onDropAnimationEnd:e}=p.current;e&&e()}p.current.onDragStart&&p.current.onDragStart(Object.assign({},g.startEvent,{dataTransfer:g.dataTransfer,centerOfGravityOffset:g.centerOfGravityOffset})),g.began=!0,f(e),g.originalOpacity=e.style.opacity,g.originalPointerEvents=e.style.pointerEvents,!1!==n&&(e.style.opacity="0"),e.style.pointerEvents="none";const{clonedElement:t}=g;return r.displayDragPreview(t,handleTransitionEnd),t.addEventListener("transitionend",handleTransitionEnd),()=>{t.removeEventListener("transitionend",handleTransitionEnd),r.removeDragPreview(t),e.style.opacity=g.originalOpacity,e.style.pointerEvents=g.originalPointerEvents}},[g]),s},function(e){e.x="--layout-transition-drag-preview-x",e.y="--layout-transition-drag-preview-y",e.scale="--layout-transition-drag-preview-scale",e.opacity="--layout-transition-drag-preview-opacity",e.originX="--layout-transition-drag-preview-origin-x",e.originY="--layout-transition-drag-preview-origin-y"}(p||(p={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(7),r=n(651),s=n(652),a=n(120),l=n(4),c=n(120),d=n(401),u=n(1),h=n(2),p=n(101),g=n(58);t.SnapTool=class SnapTool{constructor(e,t){this.vekterEngine=e,this.excludedNodes=t,this.snapX=null,this.snapY=null,this.snapConstraint=null,this.distanceFramesX=[],this.distanceFramesY=[],this.snappingZoom=-1,this.snappingFrame={x:0,y:0,width:0,height:0},this.linesCache=o.Map(),this.distanceCache=o.Map()}stop(){this.vekterEngine.toolStore.setSnapLines()}validateCaches(){const{zoom:e}=this.vekterEngine,t=this.vekterEngine.canvasStore.getCanvasVisibleRect();this.snappingZoom===e&&u.Rect.isEqual(this.snappingFrame,t)||(this.snappingZoom=e,this.snappingFrame=t,this.linesCache=o.Map(),this.distanceCache=o.Map())}snap(e,t,n,i,r,s,l){const{zoom:d}=this.vekterEngine;if(!1===t)return this.snapX=null,this.snapY=null,this.snapConstraint=null,this.distanceFramesX=[],this.distanceFramesY=[],e;this.validateCaches();const p=this.getOrthogonalLines(n);let g;const m=(g=r?a.snapWithConstraint(p,d,e,r,l,h.default.shapeModeActive):a.snap(p,d,e,s,l)).snapLines.y.toArray(),f=g.snapLines.x.toArray(),y=void 0!==r?r:null;let v=null;if(void 0!==i&&void 0===r){const t=this.getSiblingDistances(i);v=c.snapDistance(t,g.point,e,d)}v&&void 0!==v.distanceSnap.x&&(g.point.x=v.distanceSnap.x),v&&void 0!==v.distanceSnap.y&&(g.point.y=v.distanceSnap.y);const b={x:u.isFiniteNumber(g.point.x)?g.point.x:e.x,y:u.isFiniteNumber(g.point.y)?g.point.y:e.y};null!==v&&(v.horizontalDistanceFrames.forEach(t=>{const n="height"in e?e.height:0,i=Math.min(t.y,b.y),o=Math.max(u.Rect.maxY(t),b.y+n);v.distanceFramesX.push(Object.assign({},t,{y:i,height:o-i}))}),v.verticalDistanceFrames.forEach(t=>{const n="width"in e?e.width:0,i=Math.min(t.x,b.x),o=Math.max(u.Rect.maxX(t),b.x+n);v.distanceFramesY.push(Object.assign({},t,{x:i,width:o-i}))}));const k=v?v.distanceFramesX:[],S=v?v.distanceFramesY:[];return this.snapX=f,this.snapY=m,this.vekterEngine.toolStore.setSnapLines(o.Set(f),o.Set(m)),this.snapConstraint=y,this.distanceFramesX=k,this.distanceFramesY=S,b}getOrthogonalLines(e){const{tree:t,zoom:n}=this.vekterEngine,i=this.vekterEngine.canvasStore.getCanvasVisibleRect(),{displayRulers:r}=this.vekterEngine.persistedUserDefaults,s=r?{x:t.root.guidesX,y:t.root.guidesY}:{x:o.Set(),y:o.Set()};return e.forEach(e=>{const r={x:o.Set(),y:o.Set()};if(!this.linesCache.has(e)){let s=[];const c=[...this.excludedNodes],d=t.getGroundNodesOfType(l.FrameNode,e=>-1===c.indexOf(e.id));if(e){s.push(...t.getSubtreeNodes(e,c));const n=t.getNode(e);n&&p.isValidGuideNode(n)&&(r.x=o.Set(n.guidesX.map(e=>p.getAbsoluteOffset(t,n,"x",e))),r.y=o.Set(n.guidesY.map(e=>p.getAbsoluteOffset(t,n,"y",e))))}else c.push(...d.map(e=>e.id)),s.push(...t.getSubtreeNodes(e,c)),s.push(...d);const h=(s=s.filter(e=>!(l.isShapeGroupNode(e)||l.isShapeContainerNode(e)&&e.sizeToFit))).map(e=>t.convertFrameToCanvas(e)).filter(e=>u.Rect.intersects(e,i)),m=this.vekterEngine.tool.enum===g.Tools.Path,f=a.snappingData(h,n,m),y={x:f.x.union(r.x),y:f.y.union(r.y)};this.linesCache=this.linesCache.set(e,y)}const c=this.linesCache.get(e);s.x=s.x.union(c.x),s.y=s.y.union(c.y)}),s}getSiblingDistances(e){const{tree:t}=this.vekterEngine,n=this.vekterEngine.canvasStore.getCanvasVisibleRect();if(!this.distanceCache.has(e)){let i=[];i=e?t.getNode(e).children:t.getGroundNodes();const r=[...this.excludedNodes],s=i.filter(e=>-1===r.indexOf(e.id)).map(e=>u.Rect.pixelAligned(t.convertFrameToCanvas(e))).filter(e=>u.Rect.intersects(n,e)),a=d.default(s);let l=o.Map(),c=o.Map();const h=(e,t,n)=>{const i=e.get(t,[]);return e.set(t,[...i,n])};a.forEach(([e,t])=>{const n=u.Rect.maxY(e),i=u.Rect.maxY(t),o=u.Rect.maxX(e),r=u.Rect.maxX(t);if(u.Rect.overlapHorizontally(e,t)){const a=Math.min(e.x,t.x),c=Math.max(o,r)-a;if(n<t.y){const e=t.y-n,i={y:n,x:a,width:c,height:e};u.Rect.doesNotIntersect(i,s)&&(l=h(l,e,i))}else if(i<e.y){const t=e.y-i,n={y:i,x:a,width:c,height:t};u.Rect.doesNotIntersect(n,s)&&(l=h(l,t,n))}}if(u.Rect.overlapVertically(e,t)){const a=Math.min(e.y,t.y),l=Math.max(n,i)-a;if(o<t.x){const e=t.x-o,n={x:o,y:a,width:e,height:l};u.Rect.doesNotIntersect(n,s)&&(c=h(c,e,n))}else if(r<e.x){const t=e.x-r,n={x:r,y:a,width:t,height:l};u.Rect.doesNotIntersect(n,s)&&(c=h(c,t,n))}}}),this.distanceCache=this.distanceCache.set(e,{verticalDistances:l,horizontalDistances:c,siblingFrames:s})}return this.distanceCache.get(e)}},t.default=function withSnapping(e){class WithSnapping extends i.Component{render(){const t=this.props.myTool.snapper;return t?i.createElement(e,Object.assign({},this.props),i.createElement(r.EqualDistanceFrames,{zoom:h.default.zoom,framesX:t.distanceFramesX,framesY:t.distanceFramesY}),i.createElement(s.default,Object.assign({zoom:h.default.zoom},t)),this.props.children):this.props.children}}return WithSnapping.displayName=`WithSnapping(${e.displayName||e.name})`,WithSnapping}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(140);t.default=(e,t)=>{if(e.mouseDown&&!t.mouseDown)return"mouseDown";if(!e.mouseDown&&t.mouseDown)return"mouseUp";const n=i.default(e.mouse,t.mouse),o=e.altKey!==t.altKey,r=e.cmdKey!==t.cmdKey,s=e.shiftKey!==t.shiftKey;return n||(o||r||s)?"mouseMove":null}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(1),r=n(140),s=n(4),a=n(27),l=n(89),c=n(84),d=n(19),u=n(120),h=n(405),p=n(656),g=n(202),m=n(406);t.CreateToolHelper=class CreateToolHelper{constructor(){this.spacebarOffset=null,this.showTooltip=!0,this.showFrame=!0,this.supportsAspectRatioLock=!0,this.supportsParentDirected=!0,this.topLevel=!1,this.needsShapeContainer=!1,this.roundedRect=!1,this.stateDidChange=(e,t)=>{const n=!e.mouseDown&&t.mouseDown||e.mouseDown&&!t.mouseDown,i=r.default(t.mouse,e.mouse),o=e.spacebarDown!==t.spacebarDown,s=e.altKey!==t.altKey||e.shiftKey!==t.shiftKey||e.cmdKey!==t.cmdKey;return n||i||o||s}}start(e){const t=e.engine;e.snapper=new g.SnapTool(t,[]),t.setHighlight(null)}stop(e){e.engine.setTooltip(null),e.snapper.stop()}update(e){const t=e.engine,{mouseDown:n,mouse:i,altKey:r,shiftKey:a,cmdKey:l,spacebarDown:c,tree:d,zoom:h}=t,p=t.previousInputState;if(!this.stateDidChange(p,t)||!i)return;const g=d.getGroundNodesOfType(s.FrameNode,e=>o.Rect.pointDistance(e.rect(null),i)<u.snappingThreshold(h))[0]||null,f=!l,y=[g?g.id:s.NullID];if(this.snappedMouse=i,c||(this.snappedMouse=e.snapper.snap(i,f,y,void 0,void 0,this.snappedMouseDown)),!p.mouseDown&&n&&(void 0!==this.dragStart&&this.dragStart(),this.snappedMouseDown=this.snappedMouse),!this.snappedMouseDown){if(this.highlightParent){const[e]=this.parentAndFrame(d,{x:i.x,y:i.y,width:0,height:0},i,this.nodeClass);this.parentHighlight=e||void 0}return}if(c&&this.spacebarOffset){const t=o.Point.subtract(i,this.spacebarOffset);this.snappedMouseDown=e.snapper.snap(t,f,y,void 0,void 0),this.snappedMouse=i}const v=this.frame(this.snappedMouseDown,this.snappedMouse,a,r&&!c);let[b,k,S]=this.parentAndFrame(d,v,i,this.nodeClass);if(c&&!p.spacebarDown&&(this.spacebarOffset=o.Point.subtract(this.snappedMouse,this.snappedMouseDown)),c||(this.spacebarOffset=null),n)!1!==this.showTooltip&&t.setTooltip(`${v.width}  ${v.height}`),this.highlightParent&&b?this.parentHighlight=b:this.parentHighlight=void 0;else{const n=d.newId(),i={id:n};!1!==this.supportsAspectRatioLock&&(i.aspectRatio=a?k.width/k.height:null);const{displayRulers:r}=t.persistedUserDefaults;if(0===d.getGroundNodes().length&&!r){const e=o.Point.reverse(k),n=o.Point.add(t.canvasStore.offset,e);t.canvasStore.scrollToTopLeft(n),k.x=0,k.y=0}if(this.needsShapeContainer){const e=m.findShapeContainerInRange(d,b,v);if(e){const t=o.Rect.center(v),n=d.convertPointToNode(e,t,!0);k=Object.assign({},v,{x:n.x-v.width/2,y:n.y-v.height/2}),S=d.totalAncestorRotation(e),b=e.id}}e.create(n,b,k,i,S)}}frame(e,t,n,i){let r=Math.round(t.x-e.x),s=Math.round(t.y-e.y);if(n){const e=Math.min(Math.abs(r),Math.abs(s));r=e*Math.sign(r),s=e*Math.sign(s)}let a=1;i&&(r=-Math.abs(r),s=-Math.abs(s),a=2);const l={x:Math.min(e.x,e.x+r),y:Math.min(e.y,e.y+s),width:Math.abs(r*a),height:Math.abs(s*a)};return o.Rect.pixelAligned(l)}parentAndFrame(e,t,n,i){let r;void 0!==i&&(r=new i(e));const l=e.getPotentialParents(t,n,r,!0).filter(e=>!(!this.supportsParentDirected&&c.codeComponentWithChildInsertion(e)||a.hasShape(e))),d=e.getTopMostChildNode(l);if(d&&s.isTreeNode(d)&&!this.topLevel){const n=o.Rect.center(t),i=e.convertPointToNode(d,n,!0),r=Object.assign({},t,{x:i.x-t.width/2,y:i.y-t.height/2}),s=e.totalAncestorRotation(d);return[d.id,r,-s]}return[s.NullID,t,0]}};const f=g.default(class Create extends i.Component{render(){const e=this.props.myTool,t=e.engine,n=e.helper,{tree:r,altKey:s,shiftKey:a,zoom:c}=this.props,u=n.overlayShape||l.BasicShape.makeRectangle;if(!n.snappedMouse||!1===n.showFrame)return null;let g=null;if(n.snappedMouseDown){const e=o.Rect.multiply(n.frame(n.snappedMouseDown,n.snappedMouse,a,s&&!t.spacebarDown),c);let r;r=!n.overlayShape&&n.roundedRect?l.BasicShape.makeRectangle(e.width,e.height,Math.max(e.width,e.height)):u(e.width,e.height);const h=[d.default.applyRadius(r[0].pathSegments,!0)];g=i.createElement(p.default,{paths:h,offset:e})}return i.createElement("div",null,g,i.createElement(h.default,{ids:n.parentHighlight?[n.parentHighlight]:[],tree:r,zoom:c}),this.props.children)}});t.Create=f},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(1),o=n(24),r=n(271);function exposedCodeComponentProps(e){if(!i.isReactDefinition(e))return[];if(!e.properties)return[];const t=[],n={},o=Object.keys(e.properties);for(let r=0,s=o.length;r<s;r++){const s=o[r],a=e.properties[s];if(a)if(a.type===i.ControlType.FusedNumber){t.push(s),n[s]={type:i.ControlType.Number,defaultValue:a.defaultValue},t.push(a.toggleKey),n[a.toggleKey]={type:i.ControlType.Boolean,defaultValue:!1};for(const e of a.valueKeys)t.push(e),n[e]={type:i.ControlType.Number,defaultValue:a.defaultValue}}else t.push(s),n[s]=a}return[t,n]}function getValue(e,t,n,o){const r=t[e];if(void 0!==r&&isValidValue(r,o))return r;const s=getPropertyControlDefault(o);if(void 0!==s&&isValidValue(s,o))return s;const a=function getReactDefault(e,t,n){if(!e)return;if("string"!=typeof n&&n.type===i.ControlType.Array){const i=e[t];return convertArrayDefaultToArrayValue(i,n)}return e[t]}(n,e,o);return void 0!==a&&isValidValue(a,o)?a:void 0}function isValidValue(e,t){let n;if("string"==typeof t)n=t;else{if(t.type===i.ControlType.Array)return validateArrayValues(e,t.propertyControl.type);if(t.type===i.ControlType.ComponentInstance)return validateArrayValues(e,t.type);n=t.type}return r.isValidPropertyValue(n,e)}function validateArrayValues(e,t){if(!Array.isArray(e))return!1;for(const n of e){if(!isValidValue(n.value,t))return!1;if(n.type!==t)return!1}return!0}function convertArrayDefaultToArrayValue(e,t){if(!Array.isArray(e))return;const n=[],{propertyControl:i}=t;for(const o of e)isValidValue(o,i)&&n.push({enabled:!0,value:o,type:i.type});return n}function getPropertyControlDefault(e){if("string"!=typeof e&&"defaultValue"in e)return e.type===i.ControlType.Array&&e.defaultValue?convertArrayDefaultToArrayValue(e.defaultValue,e):e.defaultValue}t.defaultCodeComponentProps=function defaultCodeComponentProps(e){if(!e||!i.isReactDefinition(e))return{};const[t,n]=exposedCodeComponentProps(e),o={},{defaultProps:r}=e.class;for(let i=0,s=t.length;i<s;i++){const e=t[i],s=n[e];o[e]=getValue(e,{},r,s)}return o},t.filterCodeComponentProps=function filterCodeComponentProps(e){const t=o.componentLoader.componentForIdentifier(e.codeComponentIdentifier);if(!t||!i.isReactDefinition(t))return e.codeComponentProps;if(!t.properties)return{};const n={},[r,s]=exposedCodeComponentProps(t),{defaultProps:a}=t.class;for(let i=0,o=r.length;i<o;i++){const t=r[i],o=s[t],l=getValue(t,e.codeComponentProps,a,o);void 0!==l&&(n[t]=l)}return n},t.getValue=getValue,t.getPropertyControlDefault=getPropertyControlDefault},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(7),o=n(107),r=n(0),s=n(1),a=n(44),l=n(20),c=n(4),d=n(19),u=n(32),h=n(5),p=n(172),g=n(272),m=n(207),f=n(273),y=n(274),v=n(208),b=n(275),k=n(409),S=n(658),C=n(278),x=n(660),w=n(662),T=n(665),P=n(411),E=n(11),F=n(209),M=o.getLogger("PathToolManager");t.pathToolEnumFor=function pathToolEnumFor(e){if(e instanceof y.PathDefaultTool)return P.PathTool.Default;if(e instanceof C.PathSegmentAdditionTool)return P.PathTool.SegmentAddition;if(e instanceof b.PathSegmentMoveTool)return P.PathTool.SegmentMove;if(e instanceof k.PathSegmentSelectTool)return P.PathTool.SegmentSelection;if(e instanceof v.PathSegmentHandleMoveTool)return P.PathTool.SegmentHandleMove;if(e instanceof f.PathCurveBendTool)return P.PathTool.CurveBending;if(e instanceof p.PanTool)return P.PathTool.Pan;if(e instanceof g.ZoomTool)return P.PathTool.Zoom;if(e instanceof m.ZoomSelectTool)return P.PathTool.ZoomSelect;throw Error("missing case")};t.VekterPathEngine=class VekterPathEngine extends l.VekterTool{constructor(){super(...arguments),this.enum=h.Tools.Path,this.workingSelection=[],this.segmentSelection=[],this.pointRounding=u.PointRounding.Full,this.onKeyPress=e=>{const t=String.fromCharCode(e.which),n=e.shiftKey||e.metaKey||e.ctrlKey;if(("z"===t||""===t||"Z"===t)&&!n){if(e.stopPropagation(),this.pathTool instanceof m.ZoomSelectTool)return;this.setPathTool(new g.ZoomTool)}},this.canDelete=()=>{const{selectionType:e,segmentHandle:t,segmentSelection:n}=this;return e===u.PathSelectionType.Curves?n.length>0:null!==t||n.length>0},this.deleteAction=()=>{const{selectionType:e,segmentHandle:t}=this;e===u.PathSelectionType.Curves?this.deleteCurves():null!==t?this.deleteHandle():this.deleteSelectedPathSegments()},this.onKeyDown=e=>{const{keyCode:t}=e,{tree:n,segmentHandle:i}=this;if(8===t||46===t)return this.deleteAction(),e.stopPropagation(),void e.preventDefault();if(13===t)return void this.engine.exitTool();if(a.default.isKey(e,a.default.Key.escape))return(this.pathTool instanceof y.PathDefaultTool||this.pathTool instanceof C.PathSegmentAdditionTool)&&(0===this.segmentSelection.length?this.engine.exitTool():(this.setSegmentSelection([]),this.setSegmentHandle(null))),void e.preventDefault();if(9===e.keyCode&&!e.metaKey&&!e.ctrlKey){if(this.pathTool instanceof y.PathDefaultTool||this.pathTool instanceof C.PathSegmentAdditionTool)if(0===this.segmentSelection.length){const e=this.workingSelection.slice(0).reverse().find(e=>{const t=this.engine.getNode(e);return t instanceof c.PathNode&&t.pathSegments.count()>=1});e&&(this.setSegmentSelection([{id:e,index:0}]),this.setSegmentHandle(null))}else{const t=this.segmentSelection.slice(-1)[0],n=this.engine.getNode(t.id);if(n){const i=e.shiftKey?-1:1;let o=t.index+i;o=(o=o>=n.pathSegments.count()?0:o)<0?n.pathSegments.count()-1:o,this.setSegmentSelection([{id:n.id,index:o}]),this.setSegmentHandle(null)}}return void e.preventDefault()}let o;const r=e.shiftKey?10:1;if(37===t&&(o={x:-r}),38===t&&(o={y:-r}),39===t&&(o={x:r}),40===t&&(o={y:r}),void 0!==o){if(i){const e=E.segmentHandlePoint(n,i);if(e){const t=s.Point.add(e,Object.assign({x:0,y:0},o)),r=E.handleUpdate(n,i,t),a=n.getNode(i.id);a&&a.pathSegments&&this.engine.updateNode(a.id,a.updateForPath({pathSegments:r}))}}else this.moveSelectedVectorSegments(o);e.stopPropagation(),e.preventDefault()}}}setSegmentSelection(e,t=u.PathSelectionType.Segments){this.engine.pathSelectionStore.setSegmentSelection(e,t),this.updateState()}toggleSegmentSelection(e,t=u.PathSelectionType.Segments){this.engine.assertStateMutable(),this.engine.pathSelectionStore.toggleSegmentSelection(e,t),this.updateState()}setSegmentHandle(e){this.engine.assertStateMutable(),this.engine.pathSelectionStore.setSegmentHandle(e),this.updateState()}setHoveredSegment(e){this.engine.assertStateMutable(),this.engine.pathSelectionStore.setHoveredSegment(e),this.updateState()}setClosestCurve(e){this.engine.pathSelectionStore.setClosestCurve(e),this.updateState()}setPathPointRounding(e){this.engine.assertStateMutable(),this.engine.pathSelectionStore.setPathPointRounding(e),this.updateState()}setPathConstraint(e){this.engine.assertStateMutable(),this.engine.pathSelectionStore.setPathConstraint(e),this.updateState()}updateState(){this.tree=this.engine.tree;const e=this.engine.pathSelectionStore.state;this.snapConstraint=e.snapConstraint,this.segmentSelection=e.segmentSelection,this.selectionType=e.selectionType,this.segmentHovered=e.segmentHovered,this.segmentHandle=e.segmentHandle,this.closestCurve=e.closestCurve,this.pointRounding=e.pointRounding}start(){this.snap=new F.PathSnapper(this.engine,this);const e=[],t=this.engine.selection.map(e=>this.engine.tree.getNode(e)).find(e=>e instanceof c.PathNode);t&&t.pathSegments.count()>0&&e.push({id:t.id,index:0}),this.engine.setHighlight(null),this.setSegmentSelection(e),this.setClosestCurve(null),this.setWorkingSelection(this.engine.selection),this.setPathTool(new y.PathDefaultTool),this.pathTool.start()}stop(){this.pathTool.stop(),this.setSegmentSelection([]),this.setClosestCurve(null),this.setWorkingSelection([]),this.engine.clearCursor(),this.snap.stop()}update(){const{selection:e,spacebarDown:t}=this.engine,{middleMouseButtonDown:n}=this.engine.mouseStore,i=this.engine.previousInputState;if(shouldIgnoreMouseEvents(this.pathTool))this.setClosestCurve(null);else if(s.isEqual(e,this.workingSelection))(t&&!i.spacebarDown||n)&&(this.pathTool instanceof y.PathDefaultTool||this.pathTool instanceof C.PathSegmentAdditionTool)?this.setPathTool(new p.PanTool):s.isEqual(this.engine.mouse,i.mouse)||this.getClosestCurve();else if(this.setWorkingSelection(e),0===e.length||e.filter(e=>!(this.engine.getNode(e)instanceof c.PathNode)).length>0)return void this.engine.exitTool();this.updateState(),this.setActiveTool(),this.snap.update(),this.pathTool.update()}setWorkingSelection(e){const t=this.workingSelection;this.workingSelection=e,this.engine.beginUndoGroup(),t.forEach(t=>{if(e.indexOf(t)>=0)return;const n=this.engine.getNode(t);n instanceof c.PathNode&&(n.pathSegments.count()>1||this.deleteNode(n))}),this.engine.endUndoGroup();const n=this.segmentSelection.filter(t=>e.indexOf(t.id)>=0);this.setClosestCurve(null),this.setSegmentSelection(n,this.selectionType),0===n.length&&this.switchToDefault()}deleteNode(e){this.engine.deleteNode(e.id)}setPathTool(e){const t=this.pathTool?this.pathTool.constructor.name:"null",n=e.constructor.name;M.debug("VekterPathEngine.setPathTool(): "+t+" -> "+n),this.pathTool&&this.pathTool.stop(),this.pathTool=e,e.engine=this.engine,e.pathEngine=this,e.start()}switchToDefault(){this.setPathTool(new y.PathDefaultTool),this.setActiveTool()}setActiveTool(){const{pathTool:e}=this,{selection:t,cmdKey:n}=this.engine,{tree:i,segmentSelection:o,selectionType:r,closestCurve:s,snapConstraint:a}=this;if(!this.engine.mouseDown&&(e instanceof y.PathDefaultTool||e instanceof C.PathSegmentAdditionTool))if(0!==t.length){if(1===o.length&&r===u.PathSelectionType.Segments){if(s&&!n&&!a){if(e instanceof y.PathDefaultTool)return;return void this.setPathTool(new y.PathDefaultTool)}const t=o[0],r=i.getNode(t.id);if(r&&d.default.isEndSegment(r.pathSegments,r.pathClosed,t.index)){if(this.pathTool instanceof C.PathSegmentAdditionTool)return;return void this.setPathTool(new C.PathSegmentAdditionTool)}}this.pathTool instanceof y.PathDefaultTool||this.setPathTool(new y.PathDefaultTool)}else{if(e instanceof C.PathSegmentAdditionTool)return;this.setPathTool(new C.PathSegmentAdditionTool)}}deleteHandle(){const{tree:e,segmentHandle:t}=this;if(!t)return;const n=e.getNode(t.id),i=n.pathSegments.update(t.index,e=>{const n={handleMirroring:"disconnected"};return t.handle===u.SegmentHandle.In?(n.handleInX=0,n.handleInY=0,0===e.handleOutX&&0===e.handleOutY&&(n.handleMirroring="straight")):(n.handleOutX=0,n.handleOutY=0,0===e.handleInX&&0===e.handleInY&&(n.handleMirroring="straight")),new s.PathSegment(e.merge(n))});this.setSegmentHandle(null),this.engine.updateNode(n.id,{pathSegments:i})}deleteSelectedPathSegments(){const{selection:e}=this.engine,{segmentSelection:t,tree:n}=this;if(0===t.length)return;const i=[];if(1===e.length&&1===t.length){const e=t[0],o=n.getNode(e.id);d.default.isFirstSegment(o.pathSegments,o.pathClosed,e.index)?i.push({id:o.id,index:0}):d.default.isLastSegment(o.pathSegments,o.pathClosed,e.index)&&i.push({id:o.id,index:o.pathSegments.count()-2})}const o=E.groupPathSegmentSelectors(t),r=Object.keys(o).map(e=>n.getNode(e));for(const s of r){const e=o[s.id],t=s.pathSegments.filter((t,n)=>-1===e.indexOf(n));0===t.count()?(this.deleteNode(s),i.length=0):n.updateNode(s,s.updateForPath({pathSegments:t}))}this.setSegmentSelection(i)}deleteCurves(){const{tree:e,segmentSelection:t}=this,n=E.groupPathSegmentSelectors(t),o=Object.keys(n).map(t=>e.getNode(t)),r=[...this.engine.selection];for(const s of o){const t=n[s.id],o=d.default.segmentIndexesToDelete(s.pathSegments,s.pathClosed,t);let a=s.pathClosed;const l=[];let c=[];l.push(c);for(let e=0,n=s.pathSegments.count();e<n;e++){const i=s.pathSegments.get(e);o[e]?e===n-1&&(a=!1):(c.push(i),-1!==t.indexOf(e)&&0!==c.length&&(c=[],l.push(c)))}if(a&&l.length>1){const e=l[0],t=l.pop();e.unshift(...t)}if(0===l[0].length){this.engine.deleteNode(s.id);const e=r.indexOf(s.id);-1!==e&&r.splice(e,1)}else for(let n=0,d=l.length;n<d;n++){const t=l[n];if(0===t.length)break;const o={pathSegments:i.List(t),pathClosed:!1};if(0===n)e.updateNode(s,s.updateForPath(o));else{const t=e.newId();E.cloneNodeAndUpdatePath(e,this.engine,s,o,t),r.push(t)}}}this.setSegmentSelection([]),this.setClosestCurve(null),this.engine.setSelection(r)}moveSelectedVectorSegments(e){const{engine:t,pointRounding:n,selectionType:i}=this,o=t.tree,r=E.generateSegmentSelection(o,this.segmentSelection,i),a=E.groupPathSegmentSelectors(r),l=Object.keys(a).map(c.nodeIDFromString);o.getNodes(l).forEach(t=>{const i=a[t.id],r=t.pathSegments.map((r,a)=>{if(-1!==i.indexOf(a)){const i=s.Point.add(o.convertPointToCanvas(t,r),Object.assign({x:0,y:0},e)),a=E.roundedPoint(i,n),l=o.convertPointToNode(t,a);return new s.PathSegment(r.merge(l))}return r});o.updateNode(t,t.updateForPath({pathSegments:r}))})}selectAll(){const{selection:e}=this.engine,{tree:t}=this,n=[];for(let i=0,o=e.length;i<o;i++){const o=t.getNode(e[i]);if(!(o instanceof c.PathNode))continue;const r=o.id,s=Array(o.pathSegments.count()).fill(null).map((e,t)=>({id:r,index:t}));n.push(...s)}this.setSegmentHandle(null),this.setSegmentSelection(n)}getClosestCurve(){const{selection:e,tree:t,mouse:n,zoom:i}=this.engine;if(!n)return;if(!n||this.pathTool instanceof f.PathCurveBendTool||this.pathTool instanceof b.PathSegmentMoveTool)return;const o=e.map(e=>t.getNode(e)),r=12/i;let s=null;for(const a of o){const e=E.closestCurve(t,a,n,i);if(e&&!(e.distance>r)){s=e;break}}this.setClosestCurve(s)}};function shouldIgnoreMouseEvents(e){return e instanceof p.PanTool||e instanceof g.ZoomTool||e instanceof m.ZoomSelectTool}function style(e){if(shouldIgnoreMouseEvents(e))return{pointerEvents:"none"}}t.default=class PathToolManager extends r.Component{render(){const{tree:e,selection:t,zoom:n,myTool:i}=this.props,o=i.pathTool,s=t.map(t=>e.getNode(t));return r.createElement("div",{style:style(o)},r.createElement(T.default,{tree:e,selection:t,zoom:n}),r.createElement(S.default,Object.assign({nodes:s},this.props)),this.activeToolElement(),r.createElement(w.default,Object.assign({},this.props,{pathTool:o})),r.createElement(x.default,Object.assign({},this.props,{pathTool:o})))}activeToolElement(){const e=this.props.myTool.pathTool;switch(e.constructor){case y.PathDefaultTool:return r.createElement(y.default,{pathTool:e});case C.PathSegmentAdditionTool:return r.createElement(C.default,{pathTool:e});case k.PathSegmentSelectTool:return r.createElement(k.PathSegmentSelect,{pathTool:e});case v.PathSegmentHandleMoveTool:return r.createElement(v.PathSegmentHandleMove,{pathTool:e});case f.PathCurveBendTool:return r.createElement(f.default,{pathTool:e});case p.PanTool:return r.createElement(p.Pan,null);case g.ZoomTool:return r.createElement(g.Zoom,{myTool:e});case m.ZoomSelectTool:return r.createElement(m.ZoomSelect,{myTool:e});default:return null}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(9),r=n(1),s=n(14),a=n(15),l=n(3),c=n(20),d=n(5),u=n(75);t.ZoomSelectTool=class ZoomSelectTool extends c.VekterTool{constructor(){super(...arguments),this.enum=d.Tools.ZoomSelect,this.wantsAutoscrolling=!0}start(){a.getIpcRenderer().send(s.DocumentKeepMouseCursorVisible,!0),this.engine.setCursor("zoom-in")}stop(){this.engine.clearCursor(),a.getIpcRenderer().send(s.DocumentKeepMouseCursorVisible,!1)}update(){const{mouse:e,mouseDown:t}=this.engine,n=this.engine.previousInputState;if(n.mouseDown&&!t&&e){const t=r.Rect.fromTwoPoints(n.mouseDown,e);this.engine.canvasStore.zoomToCenter(t),o.triggerCanvasZoomEvent({source:"selection"}),this.pathEngine?this.pathEngine.switchToDefault():this.engine.exitTool()}}};t.ZoomSelect=class ZoomSelect extends i.Component{render(){const{mouse:e,mouseDown:t,zoom:n}=this.props.myTool.engine;if(!e||!t)return null;const o=r.Rect.fromTwoPoints(t,e);return i.createElement(u.default,{frame:r.Rect.multiply(o,n),backgroundColor:l.theme.selectionBox,borderColor:l.theme.selectionBoxOutline,borderWidth:1})}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(1),r=n(5),s=n(11),a=n(209);t.PathSegmentHandleMoveTool=class PathSegmentHandleMoveTool{constructor(){this.enum=r.Tools.Unknown,this.wantsAutoscrolling=!0,this.didMove=!1}start(){const{segmentHandle:e,tree:t}=this.pathEngine;if(!e)return;const n=t.getNode(e.id);this.oriSegment=n.pathSegments.get(e.index),this.engine.beginUndoGroup(),this.didMove=!1}stop(){this.engine.endUndoGroup()}update(){const{mouseDown:e,mouse:t,altKey:n,tree:i}=this.engine,{segmentHandle:r,snap:a}=this.pathEngine,l=this.engine.previousInputState;if(!r||!e||!a.snappedMouse)return void this.pathEngine.switchToDefault();if(!this.didMove){if(o.isEqual(e,t))return;this.didMove=!0}if(o.isEqual(a.snappedMouse,a.previousSnappedMouse)&&n===l.altKey)return;const c=s.handleUpdate(i,r,a.snappedMouse,this.oriSegment,n),d=i.getNode(r.id);this.engine.updateNode(d.id,d.updateForPath({pathSegments:c}))}};const l=a.default(class PathSegmentHandleMove extends i.Component{render(){return null}});t.PathSegmentHandleMove=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(7),o=n(0),r=n(1),s=n(276),a=n(120),l=n(206),c=n(657),d=n(411),u=n(11);t.PathSnapper=class PathSnapper{constructor(e,t){this.engine=e,this.pathEngine=t,this.snappedMouse=null,this.previousSnappedMouse=null,this.temporaryConstraint=null,this.intersectionTangent=null,this.snapX=null,this.snapY=null}updateCache(){this.possibleConstraints=p.options(this),this.orthogonalLines=function orthogonalLineOptions(e,t){const{tree:n,selection:i}=e,o=i.map(e=>n.getNode(e));switch(e.pathTool){case d.PathTool.SegmentAddition:{const e=t.canvasStore.getCanvasVisibleRect();return s.pathSegmentSnappingData(n,o,[],e)}default:return h}}(this,this.engine)}shouldUpdateCache(){const e=l.pathToolEnumFor(this.pathEngine.pathTool);if(this.pathTool!==e)return!0;if(e!==d.PathTool.SegmentAddition)return!1;const t=this.segmentSelection[0],n=this.pathEngine.segmentSelection[0];if(t&&n){const e=this.tree.getNode(t.id),i=this.pathEngine.tree.getNode(n.id);if(e.id!==i.id)return!0;if(e.pathSegments.count()!==i.pathSegments.count())return!0}return!r.isEqual(this.segmentSelection,this.pathEngine.segmentSelection)}updateProps(){const e=this.shouldUpdateCache();this.tree=this.engine.tree,this.selection=this.engine.selection,this.mouse=this.engine.mouse,this.mouseDown=this.engine.mouseDown,this.shiftKey=this.engine.shiftKey,this.cmdKey=this.engine.cmdKey,this.zoom=this.engine.zoom,this.segmentSelection=this.pathEngine.segmentSelection,this.selectionType=this.pathEngine.selectionType,this.segmentHovered=this.pathEngine.segmentHovered,this.segmentHandle=this.pathEngine.segmentHandle,this.closestCurve=this.pathEngine.closestCurve,this.pointRounding=this.pathEngine.pointRounding,this.snapConstraint=this.pathEngine.snapConstraint,this.pathTool=l.pathToolEnumFor(this.pathEngine.pathTool),this.previousSnappedMouse=this.snappedMouse,e&&this.updateCache()}stop(){this.engine.toolStore.setSnapLines()}update(){this.updateProps();const e=function update(e,t,n){switch(e.pathTool){case d.PathTool.SegmentAddition:return function segmentAdditionUpdate(e,t,n){const{tree:i,segmentSelection:o,closestCurve:s,segmentHovered:l,snapConstraint:c,mouse:d,pointRounding:h,zoom:g,cmdKey:m}=e;let f=d,y=null,v=null,b=null,k=null;const S=o[0];let C=!1;if(s){const e=i.getNode(s.id);e&&(m?(f=i.convertPointToCanvas(e,s.projectedPoint),C=!0):c&&(v=p.curveDerivativeTangent(i,c,s))&&(C=!0,f=v.a))}else if(l){const e=i.getNode(l.id);if(e){const t=e.pathSegments.get(l.index);if(t&&(f=i.convertPointToCanvas(e,t),C=!0,c)){const e=r.Line.projectPoint(c,f);e&&(v=r.Line(f,e),f=e)}}}else y=p.temporary(t,e.mouse,e.zoom);const x=c||y;if(!C&&d){let e;if(S){const t=i.getNode(S.id);if(t){const n=t.pathSegments.get(S.index);n&&(e=i.convertPointToCanvas(t,r.PathSegment.point(n)))}}const t=a.snap(n,g,d,e,void 0);if(x){let e=!1;const{point:n}=t;if(void 0!==n.x){const i=r.Line({x:n.x,y:0},{x:n.x,y:10}),o=r.Line.intersection(i,x);o&&(f=o,b=t.snapLines.x.toArray(),e=!0)}if(!e&&void 0!==n.y){const i=r.Line({y:n.y,x:0},{y:n.y,x:10}),o=r.Line.intersection(i,x);o&&(f=o,k=t.snapLines.y.toArray(),e=!0)}if(!e){const e=r.Line.projectPoint(x,d);e&&(f=e)}}else if(f){const{point:e}=t;void 0!==e.x&&(f.x=e.x,b=t.snapLines.x.toArray()),void 0!==e.y&&(f.y=e.y,k=t.snapLines.y.toArray())}}return f&&(f=u.roundedPoint(f,h)),{snappedMouse:f,temporaryConstraint:y,intersectionTangent:v,snapX:b,snapY:k}}(e,t,n);case d.PathTool.SegmentHandleMove:return function segmentHandleMoveUpdate(e,t){const{mouse:n,snapConstraint:i}=e;let o=n,s=null;i||(s=p.temporary(t,e.mouse,e.zoom));const a=i||s;if(a&&n){const e=r.Line.projectPoint(a,n);e&&(o=e)}return{snappedMouse:o,temporaryConstraint:s,intersectionTangent:null}}(e,t);default:return null}}(this,this.possibleConstraints,this.orthogonalLines);if(!e)return;Object.assign(this,e);const{mouse:t,shiftKey:n}=this.engine,{snapConstraint:o}=this.pathEngine;if(n&&!this.engine.previousInputState.shiftKey&&t){const e=p.closest(this.possibleConstraints,t);this.pathEngine.setPathConstraint(e.constraint)}else!n&&o&&this.pathEngine.setPathConstraint(null);this.engine.toolStore.setSnapLines(this.snapX?i.Set(this.snapX):null,this.snapY?i.Set(this.snapY):null)}},t.default=function withPathSnapping(e){class WithPathSnapping extends o.Component{render(){const t=this.props.pathTool,n=t.engine,{zoom:i}=n,{intersectionTangent:r}=t.pathEngine.snap;return o.createElement("div",null,o.createElement(c.default,{intersectionTangent:r,zoom:i}),o.createElement(e,Object.assign({},this.props),this.props.children))}}return WithPathSnapping.displayName=`WithPathSnapping(${e.displayName||e.name})`,WithPathSnapping};const h={x:i.Set(),y:i.Set()};var p;!function(e){function closest(e,t){let n=1/0,i=e[0];for(let o=0,s=e.length;o<s;o++){const s=e[o],a=r.Line.projectPoint(s,t);if(null===a)continue;const l=r.Point.distance(t,a);l>=n||(n=l,i=s)}return{constraint:i||null,distance:n}}function standard(e){return[r.Line(e,{x:e.x,y:e.y+1}),r.Line(e,{y:e.y,x:e.x+1}),r.Line(e,{y:e.y+1,x:e.x+1}),r.Line(e,{y:e.y+1,x:e.x-1})]}function segmentOptions(e,t,n){const i=t.pathSegments.get(n.index),o=u.convertSegmentToCanvas(e,t,i),s=standard(e.convertPointToCanvas(t,i));let a=t.pathSegments.get(n.index-1),l=t.pathSegments.get(n.index+1);if(t.pathClosed&&0===n.index&&(a=t.pathSegments.last()),t.pathClosed&&n.index===t.pathSegments.count()-1&&(l=t.pathSegments.first()),a){const n=u.convertSegmentToCanvas(e,t,a),i=u.curveAngle(n,o,1);if(0!==i.x&&0!==i.y){const e=r.Line(o,{x:o.x+i.x,y:o.y+i.y}),t=r.Line.perpendicular(e,o);s.push(r.Line(e.a,e.b),r.Line(e.a,t.a))}}if(l){const n=u.convertSegmentToCanvas(e,t,l),i=u.curveAngle(o,n,0);if(0!==i.x&&0!==i.y){const e=r.Line(o,{x:o.x+i.x,y:o.y+i.y}),t=r.Line.perpendicular(e,o);s.push(r.Line(e.a,e.b),r.Line(e.a,t.a))}}return s}e.temporary=function temporary(e,t,n){if(null===t)return null;const{constraint:i,distance:o}=closest(e,t);return o>4/n?null:i},e.closest=closest,e.options=function options(e){switch(e.pathTool){case d.PathTool.SegmentAddition:return function segmentAdditionOptions(e){const{tree:t,segmentSelection:n,mouseDown:i}=e,o=n[0];if(!o)return[];const r=t.getNode(o.id);return segmentOptions(t,r,o)}(e);case d.PathTool.SegmentHandleMove:return function segmentHandleMoveOptions(e){const{tree:t,segmentHandle:n}=e;if(!n)return[];const i=t.getNode(n.id);return segmentOptions(t,i,n)}(e);default:return[]}},e.standard=standard,e.curveDerivativeTangent=function curveDerivativeTangent(e,t,n){const i=u.curveDerivative(e,n);if(!i)return null;const o=r.Line.intersection(t,i);return o?r.Point.distance(o,t.a)>2e3?null:r.Line(o,i.a):null}}(p=t.Constraint||(t.Constraint={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(14),r=n(15),s=n(20),a=n(2),l=n(4),c=n(98),d=n(68),u=n(49),h=n(67),p=n(62),g=n(57),m=n(69),f=n(165),y=n(37),v=n(5),b=n(211),k=n(35);t.SampleColorTool=class SampleColorTool extends s.VekterTool{constructor(){super(...arguments),this.enum=v.Tools.SampleColor,this.displaySelectionBox=!0}exit(){this.pathEngine?this.pathEngine.switchToDefault():this.gradientEngine?this.gradientEngine.setDefault():this.engine.exitTool()}update(){}stop(){}start(){const{tree:e,selection:t}=this.engine;if(0===t.length)return this.exit(),r.getIpcRenderer().send(o.DocumentKeepMouseCursorVisible,!0),void setTimeout(()=>{r.getIpcRenderer().send(o.DocumentKeepMouseCursorVisible,!1)},0);b.sampleColor().then(n=>{this.engine.processWhenReady(()=>{this.exit(),void 0!==n&&(a.default.beginUndoGroup(),e.getNodes(t).forEach(e=>{if(e instanceof l.TextNode){const t=e.styledText;a.default.updateNode(e.id,{styledText:y.StyledTextDraft.setColor(t,n,!1)})}else{const t=u.hasOptionalFill(e)&&!e.fillEnabled;if(function hasActiveGradient(e){const t=!u.hasOptionalFill(e)||!!e.fillEnabled;return u.supportsGradient(e)&&t&&("linear-gradient"===e.fillType||"radial-gradient"===e.fillType)&&!!e.fillLinearGradient&&!!e.fillRadialGradient}(e)&&e.fillLinearGradient){const t=e.fillLinearGradient.stops.update(a.default.documentSettings.gradientStopIndex,e=>new g.GradientColorStop(e.merge({value:n})));a.default.updateNode(e.id,{fillLinearGradient:m.linearGradientUpdate(e,{stops:t}),fillRadialGradient:m.radialGradientUpdate(e,{stops:t})})}else if(u.hasFill(e)&&!t)a.default.updateNode(e.id,{fillColor:n});else if(c.hasBorder(e)&&1===e.borderEnabled)a.default.updateNode(e.id,{borderColor:n});else if(p.hasStroke(e)&&1===e.strokeEnabled)a.default.updateNode(e.id,{strokeColor:n});else if(h.hasShadow(e)&&e.shadows&&e.shadows.first()){const t=e.shadows.first().merge({color:n}),i=new f.Shadow(t);a.default.updateNode(e.id,{shadows:e.shadows.set(0,i)})}else if(d.hasBoxShadow(e)&&e.boxShadows&&e.boxShadows.first()){const t=e.boxShadows.first().merge({color:n}),i=new f.BoxShadow(t);a.default.updateNode(e.id,{boxShadows:e.boxShadows.set(0,i)})}}}),a.default.endUndoGroup())})}).catch(k.unhandledError)}};t.SampleColor=class SampleColor extends i.Component{render(){return null}}},function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))(function(o,r){function fulfilled(e){try{step(i.next(e))}catch(t){r(t)}}function rejected(e){try{step(i.throw(e))}catch(t){r(t)}}function step(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(fulfilled,rejected)}step((i=i.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const o=n(2),r=n(70),s=r.ColorSampler.on(r.PostMessageChannel.toParentFrame).expect();t.sampleColor=function sampleColor(){return i(this,void 0,void 0,function*(){return new Promise(e=>{o.default.canvasStore.setColorSamplerActive(!0),o.default.runAtNextFrame(()=>i(this,void 0,void 0,function*(){const t=yield s.sampleColor();o.default.wrapHandler(()=>{o.default.canvasStore.setColorSamplerActive(!1),e(t.color)})()}))})})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(107),o=n(0),r=n(20),s=n(2),a=n(242),l=n(49),c=n(5),d=n(210),u=n(171),h=n(667),p=n(668),g=n(414),m=n(669),f=n(670),y=n(69),v=i.getLogger("GradientToolManager");t.GradientToolEngine=class GradientToolEngine extends r.VekterTool{constructor(){super(...arguments),this.enum=c.Tools.Gradient,this.tool=null}get gradientNode(){const{tree:e,selection:t}=this.engine;if(t.length>0){const n=e.getNode(t[0]);if(l.supportsGradient(n)&&("linear-gradient"===n.fillType||"radial-gradient"===n.fillType))return n}return null}start(){}stop(){this.tool&&this.tool.stop()}update(){const{mouseDown:e,tree:t,zoom:n,selection:i,cmdKey:o,shiftKey:r,previousInputState:a}=this.engine,l=this.gradientNode;if(!l||"linear-gradient"!==l.fillType&&"radial-gradient"!==l.fillType||!l.fillLinearGradient&&!l.fillRadialGradient)return void this.engine.exitTool();if(this.tool&&this.tool.update(),!e||a.mouseDown)return;const c=y.getGradient(l);if(!c)return;const d=g.gradientCoordinates(t,l,c);if(!d)return;if(g.gradientInRange(d,e,30/n))return;const h=t.getNodesAtPoint(e,!0,n<4).filter(e=>u.default(e,s.default,i,o)),p=t.getTopMostChildNode(h);if(!p)return this.engine.setSelection([]),void this.engine.exitTool();const m=p.id,f=p.isSelected();if(r){if(f&&1===i.length)return;this.engine.toggleSelection([m])}else f||(this.engine.setSelection([m]),this.engine.setHighlight())}setTool(e){const t=this.tool?this.tool.constructor.name:"null",n=e&&e.constructor.name;v.debug("GradientToolEngine.setTool(): "+t+" -> "+n),this.tool&&this.tool.stop(),this.tool=e,this.tool&&(this.tool.engine=this.engine,this.tool.gradientEngine=this,this.tool.start())}setDefault(){this.setTool(null)}};t.GradientToolManager=class GradientToolManager extends o.Component{constructor(){super(...arguments),this.activeToolElement=e=>{const{gradientEngine:t}=this,{tool:n}=t;if(!n)return null;switch(n.constructor.name){case d.SampleColorTool.constructor.name:{const e=new a.VekterEngine;return e.setTool(new d.SampleColorTool),e.setExit(t.setDefault),o.createElement(d.SampleColor,Object.assign({},this.props,{myTool:e.tool}))}default:return null}},this.onRotate=s.default.wrapHandler(()=>{this.gradientEngine.setTool(new h.GradientAngleTool)}),this.onSelectStop=s.default.wrapHandler(e=>{const t=this.gradientEngine.gradientNode;t&&(s.default.documentSettings.setGradientStopIndex(e),"linear-gradient"===t.fillType&&this.gradientEngine.setTool(new h.GradientAngleTool),"radial-gradient"===t.fillType&&(0===e?this.gradientEngine.setTool(new m.RadialGradientMoveTool):this.gradientEngine.setTool(new f.RadialGradientResizeTool)))}),this.onHeightFactorStart=s.default.wrapHandler(()=>{this.gradientEngine.setTool(new f.RadialGradientResizeTool({isHorizontal:!1}))}),this.handles=e=>{const t=y.getGradient(e);return t?o.createElement(p.GradientHandles,Object.assign({},this.props,{node:e,gradient:t,onRotate:this.onRotate,onSelectStop:this.onSelectStop,onHeightFactorStart:this.onHeightFactorStart})):null}}componentWillMount(){this.gradientEngine=this.props.myTool}render(){const e=this.gradientEngine.gradientNode;return e?o.createElement(o.Fragment,null,this.handles(e),this.activeToolElement(e)):null}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(7),r=n(1),s=n(19),a=n(3),l=n(90);var c,d;!function(e){e[e.Up=0]="Up",e[e.Right=1]="Right",e[e.Down=2]="Down",e[e.Left=3]="Left"}(c=t.ArrowDirection||(t.ArrowDirection={}));function style(e,t,n){return{position:"absolute",transform:`translate(${e}px, ${t}px)`,willChange:"transform",overflow:"visible",pointerEvents:"none",zIndex:n?1e4:void 0}}function rectPosition(e,t){switch(t){case d.CenterTop:return{x:e.width/2,y:0};case d.MiddleRight:return{x:e.width,y:e.height/2};case d.CenterBottom:return{x:e.width/2,y:e.height};case d.MiddleLeft:return{x:0,y:e.height/2}}}t.Arrow=class Arrow extends i.PureComponent{render(){const e=this.props,{tintColor:t,active:n,direction:l,startOffsetX:d,startOffsetY:h,showArrowHead:p,background:g,zoom:k}=e,S={x:e.startX,y:e.startY},C={x:S.x+d,y:S.y+h};if(!g)return function offsetLine(e,t,n,o,r){if(!t)return null;const s=e.x*n,l=e.y*n,c=t.x*n,d=t.y*n,u=Math.min(s,c),h=Math.min(l,d),p=Math.max(s,c),g=Math.max(l,d),m=Math.max(p-u,1),f=Math.max(g-h,1),y=s-u,v=l-h,b=c-u,k=d-h;return i.createElement("svg",{style:style(u,h),width:m,height:f,fill:"transparent"},i.createElement("line",{x1:y,y1:v,x2:b,y2:k,strokeWidth:1,stroke:o?r:a.theme.navigationConnectionLine}))}(S,C,k,n,t);const x=e.startX*k,w=e.startY*k,T=C.x*k,P=C.y*k,E=e.endX*k,F=e.endY*k,M=Math.min(T,E),_=Math.min(P,F),O=Math.max(T,E),I=Math.max(P,F),D=Math.max(O-M,1),N=Math.max(I-_,1),R=x-M,A=w-_,L=T-M,B=P-_,j=function arrowHeadOffset(e,t){if(!e)return m;switch(t){case c.Right:return f;case c.Left:return y;case c.Down:return v;case c.Up:return b}}(p,l),H=E-M+j.x,z=F-_+j.y,$=function generatePath(e,t,n,i,a,l,d,h){const p=JSON.stringify([e,t,n,l,d]);return r.memoize(2e3,u,p,()=>{let u=0,p=0;switch(e){case c.Right:u=1;break;case c.Left:u=-1;break;case c.Down:p=1;break;case c.Up:p=-1}const g=Math.abs(t-l)/2,m=Math.min(g,20)*h+6;let f;f=i===l||a===d?o.List([new r.PathSegment({x:t,y:n}),new r.PathSegment({x:i,y:a}),new r.PathSegment({x:l,y:d})]):o.List([new r.PathSegment({x:t,y:n}),new r.PathSegment({x:i,y:a}),new r.PathSegment({x:i+6*u,y:a+6*p}),new r.PathSegment({x:i+m*u,y:a+m*p,radius:100}),new r.PathSegment({x:l-m*u,y:d-m*p,radius:100}),new r.PathSegment({x:l-6*u,y:d-6*p}),new r.PathSegment({x:l,y:d})]);const y=s.default.applyRadius(f,!1),v=r.toSVGPath(y);return v})}(l,R,A,L,B,H,z,k);return i.createElement("svg",{style:style(M,_,n),width:D,height:N,fill:"transparent"},i.createElement("path",{d:$,strokeWidth:1,stroke:n?t:a.theme.navigationConnectionLine}),p&&i.createElement("path",{d:arrowHead(H,z,l),stroke:n?a.theme.tint:a.theme.navigationConnectionLine,strokeWidth:1,strokeLinecap:"round"}))}},t.preferredArrowDirection=function preferredArrowDirection(e,t){const n=r.Rect.positions(e),i=r.Rect.positions(t);if(r.Rect.overlapHorizontally(e,t)){const e=i.minY>n.maxY,t=i.maxY<n.minY;if(e)return c.Down;if(t)return c.Up}return i.midX<n.midX?c.Left:c.Right},t.startPoint=function startPoint(e,t,n){let i;switch(n){case c.Right:i=rectPosition(e,d.MiddleRight);break;case c.Left:i=rectPosition(e,d.MiddleLeft);break;case c.Down:i=rectPosition(e,d.CenterBottom);break;case c.Up:default:i=rectPosition(e,d.CenterTop)}return l.default.convertPoint(t,i)},t.arrowPoints=function arrowPoints(e,t,n,i,o,s,a){let u,h;switch(s){case c.Right:u=rectPosition(t,d.MiddleRight),h=rectPosition(i,d.MiddleLeft);break;case c.Left:u=rectPosition(t,d.MiddleLeft),h=rectPosition(i,d.MiddleRight);break;case c.Down:u=rectPosition(t,d.CenterBottom),h=rectPosition(i,d.CenterTop);break;case c.Up:default:u=rectPosition(t,d.CenterTop),h=rectPosition(i,d.CenterBottom)}u=l.default.convertPoint(n,u);const p=a?function arrowSourceOffset(e,t,n,i){const o=function lineForArrowStartAndDirection(e,t){const n=Object.assign({},e);switch(t){case c.Right:case c.Left:n.x+=10;break;case c.Up:case c.Down:default:n.y+=10}return r.Line(e,n)}(n,i),s=function canvasSidesForNode(e,t){const n=r.Rect.cornerPoints(r.Rect.atOrigin(e.getRect(t))),[i,o,s,a]=n.map(n=>e.convertPointToCanvas(t,n)),l=r.Line(i,o),c=r.Line(o,s),d=r.Line(s,a),u=r.Line(a,i);return[l,c,d,u]}(e,t).map(e=>r.Line.intersection(e,o)),a=function bestIntersection(e,t,n){let i=null,o=1/0;for(const r of t){if(!r)continue;let t;switch(n){case c.Right:t=r.x-e.x;break;case c.Left:t=e.x-r.x;break;case c.Down:t=r.y-e.y;break;case c.Up:default:t=e.y-r.y}t<0||t>o||(o=t,i=r)}return i}(n,s,i);if(!a)return{x:0,y:0};switch(i){case c.Right:case c.Left:return{x:a.x-n.x,y:0};default:return{y:a.y-n.y,x:0}}}(e,a,u,s):{x:0,y:0};return{start:u,end:h=l.default.convertPoint(o,h),offset:p}},function(e){e[e.CenterTop=0]="CenterTop",e[e.MiddleRight=1]="MiddleRight",e[e.CenterBottom=2]="CenterBottom",e[e.MiddleLeft=3]="MiddleLeft"}(d||(d={})),t.topAncestor=function topAncestor(e,t){const n=e.getAncestors(t.id);if(0===n.length)return null;const i=n[n.length-1];return e.getNode(i)};const u=new Map;const h=4,p=3.1,g=h-p,m={x:0,y:0},f={x:-4,y:0},y={x:4,y:0},v={x:0,y:-4},b={x:0,y:4};function arrowHead(e,t,n){switch(n){case c.Left:return`M${e+p}, ${t-h} ${e-g}, ${t} ${e+p}, ${t+h}`;case c.Right:return`M${e-p}, ${t-h} ${e+g}, ${t} ${e-p}, ${t+h}`;case c.Down:return`M${e-h}, ${t-p} ${e}, ${t+g} ${e+h}, ${t-p}`;case c.Up:return`M${e-h}, ${t+p} ${e}, ${t-g} ${e+h}, ${t+p}`}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(4),o=n(92),r=n(99),s=n(87),a=n(1),l=n(22),c=n(142);t.componentForNode=function componentForNode(e){return e instanceof o.default?a.Frame:e instanceof r.default?a.SVG:e instanceof s.default?a.Text:i.isShapeContainerNode(e)?a.Frame:i.isShapeGroupNode(e)?a.VectorGroup:i.isVectorNode(e)?a.Vector:l.isCodeComponentNode(e)?a.ComponentContainer:(c.default(e),a.Frame)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(9),o=n(1),r=n(28),s=n(4),a=n(112),l=n(216),c=n(43),d=n(175),u=n(29),h=n(88),p=n(27),g=n(174),m=n(144),f=n(141),y=n(2),v=n(12),b=n(95),k=n(286),S=n(438),C=n(439),x=n(288),w=n(58),T=n(100);t.showContextMenu=(e,t,n,u)=>{if(u){return void P([{label:"Delete",click:()=>c.ContextAction.deleteAction(y.default)}],e)}if(y.default.tool.enum===w.Tools.Comment&&y.default.feedbackStore.threadIdUnderMouse){const e=y.default.feedbackStore.getThread(y.default.feedbackStore.threadIdUnderMouse);if(y.default.feedbackStore.isTransientThread(e.id))return;return void P([{label:"Archive",enabled:!e.archived,click:()=>y.default.feedbackStore.archiveThread(e.id)}],e.anchor)}if(void 0===n||0===n.length){const n=[{label:"Paste",click:()=>b.dispatchAction("paste",{fromContextMenu:!0})}];return t&&t.getGroundNodes().length&&n.push({type:"separator"},{label:"Show All Layers",click:()=>y.default.zoomToFitAll()}),void P(n,e)}const k=t.getNodes(n),x=t.withoutDescendants(k).filter(e=>!v.isReplicaChild(e)),E=1===k.length?k[0]:null,F=k.filter(e=>!v.isReplicaChild(e)),M=c.ContextAction.canDetachFromMaster(k),_=c.ContextAction.canGoToMaster(t,k),O=c.ContextAction.canUpdateMasterFromInstance(t,k),I=M||O||_>0,D=function replaceWithOptions(e,t){if(!r.experiments.isOn("replaceWith"))return;if(!t||!c.ContextAction.canReplaceWith(t))return;const n=e.getLocalMasterComponents(),i=[];return o.componentLoader.packageIdentifiers().forEach(e=>{let r;const s=o.componentLoader.localPackageIdentifier()===e;if(!(r=s?"Document":o.componentLoader.packageDisplayName(e)))return;const a=[],l={label:r,submenu:a},c=o.componentLoader.componentsForPackage(e).filter(S.showInComponentsPanel);s&&c.push(...y.default.tree.getLocalMasterComponents());const d=S.sortComponents(c),{uncategorizedComponents:u,categorizedComponents:h}=C.groupComponentsByCategory(d);u.forEach(e=>{addMenuItemForComponentDefinition(t,e,n,a)}),Object.keys(h).forEach(e=>{const i=h[e],o=[],r={label:e,submenu:o};i.forEach(e=>addMenuItemForComponentDefinition(t,e,n,o)),o.length>0&&a.push(r)}),0!==a.length&&i.push(l)}),i.length>0?i:void 0}(y.default.tree,E),N=[];c.ContextAction.getCodeComponentFile(y.default,k)&&N.push({label:"Edit Code",click:()=>{c.ContextAction.editCode(y.default,k)}},{type:"separator"}),N.push({label:"Select",submenu:[{label:"All",click:()=>c.ContextAction.selectAll(y.default,n)},{label:"All Siblings",click:()=>c.ContextAction.selectAllSiblings(y.default,n)},{label:"All Children",click:()=>c.ContextAction.selectAllChildren(y.default,n)}]},{type:"separator"},{label:"Replace With",enabled:!!D&&D.length>0,submenu:D,visible:r.experiments.isOn("replaceWith")},{type:"separator"},{label:"Cut",click:()=>b.dispatchAction("cut")},{label:"Copy",submenu:[{label:"Copy",click:()=>b.dispatchAction("copy")},{label:"Copy Style",click:()=>l.default.copyStyle(k[0]),enabled:1===k.length},{label:"Copy Image",enabled:1===x.length,click:()=>l.default.copyImage(t,n)},{label:"Copy CSS",enabled:T.copyCSSForNodeEnabled(E),click:()=>{l.default.copyCSSForNode(E,t)}},{label:"Copy SVG",enabled:!!E&&m.isExportableAsSVG(E),click:()=>{if(!E||!m.isExportableAsSVG(E))return;const e=g.renderNodeToSVG(E,1,o.RenderTarget.export);l.default.copySVG(e)}}]},{label:"Paste",submenu:[{label:"Paste",click:()=>b.dispatchAction("paste",{fromContextMenu:!0})},{label:"Paste Style",click:()=>l.default.pasteStyle(t,n)}]},{label:"Duplicate",click:()=>c.ContextAction.duplicateNodes(y.default,n),enabled:c.ContextAction.canDuplicateNodes(k)},{label:"Delete",click:()=>c.ContextAction.deleteAction(y.default,k),enabled:c.ContextAction.canDelete(y.default,k)},{label:"Rename",click:()=>b.dispatchAction("rename",{fromContextMenu:!0}),enabled:1===F.length},{type:"separator"},{label:c.ContextAction.lockTitle(t,k),click:()=>c.ContextAction.lock(t,k),enabled:c.ContextAction.lockEnabled(t,k)},{label:c.ContextAction.visibilityTitle(t,k),click:()=>c.ContextAction.visibility(y.default,k),enabled:c.ContextAction.visibilityEnabled(t,k)},{label:c.ContextAction.clipTitle(t,k),click:()=>c.ContextAction.clip(t,k),enabled:c.ContextAction.clipEnabled(t,k)}),y.default.shapeModeActive||N.push({type:"separator"},{label:"Add Frame",click:()=>{c.ContextAction.addFrame(y.default,k),i.triggerLayoutFrameEvent({source:"context_menu"})},enabled:c.ContextAction.wrappingEnabled(y.default,k)},{label:"Add Stack",click:()=>{c.ContextAction.addStack(y.default,k)},enabled:c.ContextAction.wrappingEnabled(y.default,k)},{label:c.ContextAction.removeFrameTitle(x),click:()=>c.ContextAction.removeFrame(y.default,x),enabled:c.ContextAction.removeFrameEnabled(t,x)}),(c.ContextAction.makeMasterEnabled(t,k)||I)&&N.push({type:"separator"},{label:"Create Component",click:()=>{c.ContextAction.makeMaster(y.default,k),i.triggerComponentDesignCreateEvent({source:"context_menu"})},enabled:c.ContextAction.makeMasterEnabled(t,k),visible:!I},{label:_>1?"Unhide Master":"Show Master",click:()=>c.ContextAction.goToMaster(y.default,k),enabled:_>0,visible:I},{label:"Detach From Master",click:()=>c.ContextAction.detachFromMaster(y.default,k),enabled:M,visible:I},{label:"Update Master",click:()=>c.ContextAction.updateMasterFromInstance(y.default,k),enabled:O,visible:I},{label:"Reset Overrides",click:()=>c.ContextAction.resetToMasterValues(t,k),enabled:c.ContextAction.canResetToMasterValues(t,k),visible:I}),N.push({type:"separator"},{label:"Move Forward",click:()=>c.ContextAction.sendForward(y.default,k),enabled:c.ContextAction.sendForwardEnabled(t,k)},{label:"Move Backward",click:()=>c.ContextAction.sendBackward(y.default,k),enabled:c.ContextAction.sendBackwardEnabled(t,k)}),c.ContextAction.canMergeGraphics(y.default,k)&&N.push({type:"separator"},{label:"Merge Graphics",click:()=>c.ContextAction.mergeGraphics(y.default,k)}),y.default.shapeModeActive&&N.push({type:"separator"},{label:"Group",click:()=>c.ContextAction.joinInGroup(y.default,k),enabled:c.ContextAction.canJoinInGroup(y.default,k)},{label:"Ungroup",click:()=>c.ContextAction.ungroup(y.default,k),enabled:c.ContextAction.canUngroup(t,k)}),E&&p.hasShape(E)&&s.isVectorNode(E)&&(N.push({type:"separator"},{label:"Flip Horizontally",click:()=>f.flipShapes(t,y.default,[E],"horizontal")},{label:"Flip Vertically",click:()=>f.flipShapes(t,y.default,[E],"vertical")}),h.hasPath(E)?N.push({label:"Reverse Path Direction",click:()=>c.ContextAction.reversePathDirection(t,E)}):s.isShapeGroupNode(E)||N.push({label:"Flatten",enabled:c.ContextAction.flattenEnabled([E]),click:()=>c.ContextAction.flattenShape(y.default,E)}));const R=d.ContextAlignment.alignEnabled(t,x),A=d.ContextAlignment.distributeEnabled(x);(R||A)&&N.push({type:"separator"}),R&&N.push({label:"Align Horizontally",submenu:[{label:"Align Left",click:()=>d.ContextAlignment.align(t,x,"Left")},{label:"Align Center",click:()=>d.ContextAlignment.align(t,x,"Center")},{label:"Align Right",click:()=>d.ContextAlignment.align(t,x,"Right")}]},{label:"Align Vertically",submenu:[{label:"Align Top",click:()=>d.ContextAlignment.align(t,x,"Top")},{label:"Align Middle",click:()=>d.ContextAlignment.align(t,x,"Middle")},{label:"Align Bottom",click:()=>d.ContextAlignment.align(t,x,"Bottom")}]}),A&&(R&&N.push({type:"separator"}),N.push({label:"Distribute Horizontally",click:()=>d.ContextAlignment.distribute(t,x,"Horizontally")},{label:"Distribute Vertically",click:()=>d.ContextAlignment.distribute(t,x,"Vertically")}));const L=function getIntrinsicSizeNodes(e){return e.filter(e=>{if(!a.hasIntrinsicSize(e))return!1;const t=s.isFrameNode(e)&&("image"!==e.fillType||!e.fillEnabled||!e.fillImage);return!t&&(null!==e.intrinsicWidth&&null!==e.intrinsicHeight)})}(k);L.length>0&&N.push({type:"separator"},{label:"Intrinsic Size",click:()=>c.ContextAction.resetToIntrinsicSize(t,L)}),P(N,e)};const P=(e,t)=>{u.Menu.buildFromTemplate(e).popup({x:t.x,y:t.y})};function addMenuItemForComponentDefinition(e,t,n,i){let r=null;if(k.isLocalDesignComponent(t,n)?r=t:o.isDesignDefinition(t)?r=k.externalDesignComponent(t):o.isReactDefinition(t)&&(r=k.codeComponenentFromDefinition(t)),!r)return null;i.push({label:x.removeCategoriesFromName(k.componentName(t,r)),click:()=>c.ContextAction.replaceWith(y.default,e,r)})}},function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))(function(o,r){function fulfilled(e){try{step(i.next(e))}catch(t){r(t)}}function rejected(e){try{step(i.throw(e))}catch(t){r(t)}}function step(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(fulfilled,rejected)}step((i=i.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const o=n(23),r=n(284),s=n(9),a=n(70),l=n(1),c=n(14),d=n(26),u=n(174),h=n(686),p=n(15),g=n(2),m=n(4),f=n(48),y=n(56),v=n(129),b=n(98),k=n(127),S=n(68),C=n(16),x=n(159),w=n(31),T=n(49),P=n(66),E=n(60),F=n(34),M=n(116),_=n(55),O=n(61),I=n(67),D=n(62),N=n(383),R=n(12),A=n(84),L=n(285),B=n(37),j=n(427),H=n(43),z=n(86),$=n(100),V=n(166),U={tree:{},originalFrames:{},masters:{},replicas:{}};function adoptReplica(e,t,n,i){if(!R.isMaster(n))return e;let o;t&&(o=f.reviveReplicaInfo(t).overrides);const r=y.TemplateHelper.create(i,n,o);return e instanceof m.FrameNode&&r.set(e.constraintValues()),r}function prepareInsertableNode(e,t,n,i,r,s){const{id:a}=e;let c=r.originalFrames[a]||n.getRect(e);const d=function deepAdoptNode(e,t,n,i,r){o(t.mutable,"Node is not mutable"),o(!t.cache.latest,"Node already has latest in cache");const s=e.get(t.id);if(s)if(R.isMaster(s)){const n=y.TemplateHelper.create(e,s);t instanceof m.FrameNode&&n.set(t.constraintValues()),t=n}else if(R.isReplica(s)){const n=y.TemplateHelper.getMaster(e,s);t=adoptReplica(t,i.replicas[t.id],n,e)}else t.id=e.newId();else if(i.masters[t.id])R.hasTemplate(t)&&(t.isMaster=!0);else if(i.replicas[t.id]){const n=i.replicas[t.id],o=n.master;let s=e.get(o);s?t=adoptReplica(t,n,s,e):i.masters[o]&&(s=r.get(o))&&R.hasTemplate(s)&&(t=adoptReplica(t,n,s=s.cloneWithIds({isMaster:!0}),e))}if(t.parentid=n,R.isReplica(t))return t;const a=t.children;if(a)for(let o=0,l=a.length;o<l;o++)a[o]=deepAdoptNode(e,a[o],t.id,i,r);return t}(i,e,t,r,n),u=i.get(t);if(u&&u.originalid?d.parentid=m.NullID:y.TemplateHelper.isInMasterOfReplica(i,u,d)&&(d.parentid=m.NullID),!t){s&&(c=l.Rect.offset(c,s));const e=d.updateForRect(c,null);return d.set(e)}if(F.isPinnable(d)){const e=d.widthType===l.DimensionType.FractionOfFreeSpace,n=d.heightType===l.DimensionType.FractionOfFreeSpace;if(e||n){const e=i.getNode(t);if(!A.codeComponentWithChildInsertion(e)){const e=d.updateForRect(c,null);return d.set(e)}}}return d}var G;function nodesAreSimilar(e,t){if(e===t)return!0;if(e.constructor!==t.constructor)return!1;const n=Object.keys(e);for(const i of n){switch(i){case"id":case"left":case"right":case"top":case"bottom":case"widthFactor":case"heightFactor":case"centerAnchorX":case"centerAnchorY":case"children":case"parentid":case"styledText":case"cache":case"update":case"isMaster":case"originalid":case"replicaInfo":continue}if(i.startsWith("_"))continue;const n=e[i],o=t[i];if(!l.isEqual(n,o))return!1}return!0}!function(e){e.getCopyData=(n,i)=>{const{treeInfo:o,images:r}=e.extractTreeInfo(n,i),s=t(n,i),a=f(s,i);return{layers:JSON.stringify(o),images:r,export:a}},e.copy=(t,n)=>{const i=e.getCopyData(t,n);p.getIpcRenderer().send(c.DocumentCopy,i)},e.cut=(t,n)=>{t.canDeleteNodes(n)?(e.copy(t.tree,n),t.deleteNodes(n)):r.default()},e.paste=(t,n,i,o)=>{const r=(e=!1)=>{p.getIpcRenderer().once(c.DocumentPaste,a),p.getIpcRenderer().send(c.DocumentPaste,{point:n,ignoreSketchData:e})},a=g.default.wrapHandler((a,l,c,d,u)=>{if(null!=d&&null!=u){const a=e.pasteSketch(d,u,t,n,i,o);if(!a)return void r(!0);const l=[],c=[];a.forEach(e=>{l.push(e.id),m.isVectorNode(e)&&c.push(e.id)}),g.default.insertNodes(a),g.default.setSelection(l),s.triggerImportPasteSketchEvent({})}a?(a.masters||(a.masters={}),a.replicas||(a.replicas={}),e.insertTree(g.default,a,t,n,i,o)):null!=l&&e.pasteText(l,c||null,t,n,i)});r()},e.insertTree=(t,n,i,o,r,s)=>{const a=e.pasteTreeInfo(n,i,o,r,s);if(!a)return;t.insertNodes(a),t.setSelection(a.map(e=>e.id));const c=t.treeStore.tree.getBoundingFrameForNodes(a),d=t.canvasStore.getCanvasVisibleRect();l.Rect.intersects(c,d)||t.canvasStore.scrollToCenter(l.Rect.center(c)),t.tree.didNonLinearMove()},e.extractTreeInfo=(e,t)=>{const n=new m.default,i=[],r=e.sortVisually(e.withoutDescendants(e.getNodes(t))),s=r.map(e=>e.parentid),a=d.commonValue(s),c=r.map(t=>e.convertFrameToCanvas(t)),u=l.Rect.merge(...c),h={};r.forEach(t=>{let r=t;const s=e.getRect(r);if(o(e.get(r.id),"Node does not exist in tree"),F.isPinnable(r)&&(r=r.cloneWithIds({constraintsLocked:!1,parentid:null})),null!==a&&a!==e.root.id)n.insertNode(r.cloneWithIds({parentid:null})),h[r.id]=s;else{const t=e.getParent(r.id),i=H.ContextAction.convertNodeToNewParentUpdate(e,r,t,null);void 0!==i.x&&(i.x-=u.x),void 0!==i.y&&(i.y-=u.y),l.isFiniteNumber(i.left)&&(i.left-=u.x),l.isFiniteNumber(i.top)&&(i.top-=u.y),i.parentid=null;const o=r.cloneWithIds(i);n.insertNode(o)}e.getSubtreeNodes(r.id).forEach(e=>{T.hasFill(e)&&(T.hasOptionalFill(e)&&!e.fillEnabled||"image"===e.fillType&&e.fillImage&&i.push(e.fillImage))})});const p={},g={};return n.root.cache.future.walk(e=>{e.isMaster&&(p[e.id]=!0,e.isMaster=!1),e.replicaInfo&&(g[e.id]=e.replicaInfo,e.replicaInfo=null),e.originalid&&(e.originalid=null)}),{treeInfo:{tree:n.commit().toJS(),originalFrames:h,masters:p,replicas:g},images:i}};const t=(e,t)=>{const n=new m.default;return e.sortVisually(e.withoutDescendants(e.getNodes(t))).reverse().forEach(t=>{const i=e.getParent(t.id),o=H.ContextAction.convertNodeToNewParentUpdate(e,t,i,null),r=t.cloneWithIds(o);r.parentid=null,n.insertNode(r)}),n.commit()};e.pasteTreeInfo=(t,n,i,o,r)=>{const s=m.default.fromJS(t.tree);if(s)return e.pasteTree(s,t,n,i,o,r)},e.pasteTree=(e,t,n,i,o,r)=>{if(void 0===e||void 0===t.originalFrames)return;const s=A(e,n,o,r),a=n.get(s);let l=null!==s?void 0:G(i,e,t.originalFrames);const c=[],d=[];return e.root.children.forEach(e=>{if(a&&(m.isShapeContainerNode(a)||m.isVectorNode(a))&&m.isShapeContainerNode(e))e.children.forEach(e=>{const n=t.originalFrames[e.id];n&&M.hasPosition(e)&&(e=e.set({x:e.x+n.x,y:e.y+n.y})),c.push(e)});else{if(!a&&F.isPinnable(e)){let t;if(0===o.length)t=n.getGroundNodes().find(t=>t.id===e.id&&y(t,e));else if(1===o.length){const i=n.getNode(o[0]);i&&n.getGroundNodes().some(e=>e.id===i.id)&&y(i,e)&&(t=i)}if(t){const i=V.suggestedConstraintsForCopiedNode(n,t,o,d);e=e.set(i),l={x:0,y:0}}}c.push(e)}}),c.map(i=>prepareInsertableNode(i.cloneWithIds(),s,e,n,t,l))},e.pasteText=(e,t,n,i,o)=>{const r=n.newId();let s=i?{top:i.y,left:i.x}:void 0;const a=m.NullID;if(o.length>0){const e=o[o.length-1];n.getGroundFrameAncestor(e,!0)&&(s={top:null,left:null,centerAnchorX:.5,centerAnchorY:.5})}const l=B.StyledTextDraft.defaultStyleOverride.toArray(),c=new B.StyledTextDraft(t?j.parseHTMLContent(t,e,l):e);g.default.createNode(m.TextNode.name,Object.assign({},s,{styledText:c,id:r}),a),g.default.setSelection([r])},e.pasteSketch=(t,n,i,o,r,s)=>{try{const l=JSON.parse(t);l.metadata.bitmapInfo=JSON.parse(n);const c=h.sketchToVekter(l);return e.pasteTree(c,U,i,o,r,s)}catch(a){return console.warn("Error parsing Sketch clipboard data:",a),!1}};const n=a.Clipboard.on(a.PostMessageChannel.toParentFrame).expect();e.copyStyle=e=>i(this,void 0,void 0,function*(){let t=e.clone();C.hasChildren(t)&&(t=t.set({children:[]}));const n=m.default.createByAdoptingRoot(t);p.getIpcRenderer().send(c.DocumentCopyStyleToPasteboard,n.toJS())}),e.copyCSS=e=>{p.getIpcRenderer().send(c.DocumentCopyCSSToPasteboard,e)},e.copyCSSForNode=(t,n)=>{const i=z.removeAllTokensFromNodeTree(t,n),o=$.getCSSTextForNode(n,i);e.copyCSS(o)},e.copySVG=e=>{p.getIpcRenderer().send(c.DocumentCopyCSSToPasteboard,e)},e.pasteStyle=(e,t)=>i(this,void 0,void 0,function*(){const i=g.default.wrapHandler(n=>{if(void 0===n)return;const i=m.default.fromJS(n);if(!i)return;let o=i.root;m.isShapeContainerNode(o)&&1===o.children.length&&(o=o.children[0]);const r=e.withoutDescendants(e.getNodes(t));L.reduceProperties(e,r).expandedSelectionForShapeStyles.forEach(e=>{const t={};if(b.hasBorder(o)&&b.hasBorder(e)&&(t.borderEnabled=o.borderEnabled,t.borderWidth=o.borderWidth,t.borderColor=o.borderColor,t.borderStyle=o.borderStyle,k.hasBorderPerSide(o)&&k.hasBorderPerSide(e)&&(t.borderPerSide=o.borderPerSide,t.borderLeft=o.borderLeft,t.borderTop=o.borderTop,t.borderRight=o.borderRight,t.borderBottom=o.borderBottom)),b.hasBorder(o)&&D.hasStroke(e)&&(t.strokeEnabled=o.borderEnabled,t.strokeWidth=o.borderWidth,t.strokeColor=o.borderColor),D.hasStroke(o)&&D.hasStroke(e)&&(t.strokeEnabled=o.strokeEnabled,t.strokeColor=o.strokeColor,t.strokeWidth=o.strokeWidth,t.strokeAlignment=o.strokeAlignment,t.lineJoin=o.lineJoin,t.lineCap=o.lineCap,t.strokeMiterLimit=o.strokeMiterLimit,t.strokeDashArray=o.strokeDashArray,t.strokeDashOffset=o.strokeDashOffset),D.hasStroke(o)&&b.hasBorder(e)&&(t.borderEnabled=o.strokeEnabled,t.borderWidth=o.strokeWidth,t.borderColor=o.strokeColor),S.hasBoxShadow(o)&&S.hasBoxShadow(e)&&(t.boxShadows=o.boxShadows),I.hasShadow(o)&&I.hasShadow(e)&&(t.shadows=o.shadows),P.withFilters(o)&&P.withFilters(e)&&(t.blurEnabled=o.blurEnabled,t.blur=o.blur,t.blurType=o.blurType,t.brightnessEnabled=o.brightnessEnabled,t.brightness=o.brightness,t.contrastEnabled=o.contrastEnabled,t.contrast=o.contrast,t.grayScaleEnabled=o.grayScaleEnabled,t.grayscale=o.grayscale,t.hueRotateEnabled=o.hueRotateEnabled,t.hueRotate=o.hueRotate,t.invertEnabled=o.invertEnabled,t.invert=o.invert,t.saturateEnabled=o.saturateEnabled,t.saturate=o.saturate,t.sepiaEnabled=o.sepiaEnabled,t.sepia=o.sepia),v.withBlending(o)&&v.withBlending(e)&&(t.blendingEnabled=o.blendingEnabled,t.blendingMode=o.blendingMode),T.hasFill(o)&&(t.fillColor=o.fillColor,t.fillLinearGradient=o.fillLinearGradient,t.fillRadialGradient=o.fillRadialGradient,t.fillType=o.fillType,t.fillImage=o.fillImage,t.fillImageResize=o.fillImageResize,t.fillImagePixelWidth=o.fillImagePixelWidth,t.fillImagePixelHeight=o.fillImagePixelHeight),T.hasOptionalFill(o)&&T.hasOptionalFill(e)&&(t.fillEnabled=o.fillEnabled),E.hasOpacity(o)&&E.hasOpacity(e)&&(t.opacity=o.opacity),_.withRadius(o)&&_.withRadius(e)&&(t.radius=o.radius,_.withRelativeRadius(o)&&_.withRelativeRadius(e)&&(t.radiusIsRelative=o.radiusIsRelative),O.withRadiusPerCorner(o)&&O.withRadiusPerCorner(e)&&(t.radiusPerCorner=o.radiusPerCorner,t.radiusBottomLeft=o.radiusBottomLeft,t.radiusBottomRight=o.radiusBottomRight,t.radiusTopLeft=o.radiusTopLeft,t.radiusTopRight=o.radiusTopRight)),N.hasStyledText(o)&&N.hasStyledText(e)){const n=o.styledText;let i=e.styledText;const r=n.alignment();void 0!==r&&(i=B.StyledTextDraft.setAlignment(i,r));const s=n.colors(!1).first()||l.draftStyles.color.default;i=B.StyledTextDraft.setColor(i,s,!1);const a=n.fonts(!1).first()||l.draftStyles.font.default;i=B.StyledTextDraft.setFont(i,a,!1);const c=n.letterSpacings(!1).first()||`${l.draftStyles.letterSpacing.default}`;i=B.StyledTextDraft.setLetterSpacing(i,parseFloat(c),!1);const d=n.lineHeight()||`${l.draftStyles.lineHeight.default}`;i=B.StyledTextDraft.setLineHeight(i,parseFloat(d));const u=n.sizes(!1).first()||`${l.draftStyles.size.default}`;i=B.StyledTextDraft.setSize(i,parseFloat(u),!1),t.styledText=i}x.hasCodeComponent(o)&&x.hasCodeComponent(e)&&o.codeComponentIdentifier===e.codeComponentIdentifier&&(t.codeComponentProps=Object.assign({},o.codeComponentProps)),g.default.updateNode(e.id,t)})}),o=(yield n.read(),p.getIpcRenderer());o.once(c.DocumentPasteStyleFromPasteboard,i),o.send(c.DocumentPasteStyleFromPasteboard)}),e.copyImage=(e,t)=>{const n=e.withoutDescendants(e.getNodes(t)).map(e=>e.id),i=f(e,n);i&&p.getIpcRenderer().send(c.ExportToPasteboard,i)};const f=(e,t)=>{const n=window.devicePixelRatio;let i;if(1===t.length){const o=e.getNode(t[0]);if(!w.hasExport(o))return;const r=o.exportOptions.clear(),s=o.set({exportOptions:r.push(new m.ExportOptions({scale:n}))});return(i=u.exportNodes(e,[s])).inputs[n][0]}{const t=e.getGroundNodesOfType(m.FrameNode).length>1,o=t?100:0;i=u.exportCanvas(e,n,o,t)}if(i)return i.inputs[n][0]},y=(e,t)=>{if(C.hasChildren(e)&&C.hasChildren(t)){if(!(e.children.length===t.children.length))return!1;if(C.getChildren(e).find((e,n)=>{const i=t.children[n];return!y(e,i)}))return!1}return nodesAreSimilar(e,t)},A=(e,t,n,i)=>{const o=e.getGroundNodes(),r=1===n.length?t.getNode(n[0]):null;if(r){if(R.isReplicaOrReplicaChild(r))return m.NullID;if(m.isVectorNode(r)||m.isShapeContainerNode(r)){if(void 0!==o.find(e=>!m.isVectorNode(e)&&!m.isShapeContainerNode(e)))return m.NullID}if(C.hasChildren(r)&&!y(r,o[0])){if(r.id!==o[0].id)return r.id}else{const e=t.getParent(r.id);if(e)return e.id}}else if(i&&t.getNode(i))return i;return m.NullID},G=(e,t,n)=>{const i=t.getGroundNodes(),o=Object.keys(n);let r;if(i.length===o.length){const e=o.map(e=>n[e]);r=l.Rect.merge(...e)}else r=l.Rect.merge(...i.map(e=>t.getRect(e)));const s=l.Point(r.width/2,r.height/2);return l.Point.pixelAligned(l.Point.subtract(l.Point.subtract(e,s),r))}}(G||(G={})),t.default=G,t.nodesAreSimilar=nodesAreSimilar},function(e,t,n){"use strict";function exportOptionId(e){return[e.scale.toFixed(1),t.exportTypes.indexOf(e.type),e.type,e.nameExtensionMode].join("::")}Object.defineProperty(t,"__esModule",{value:!0}),t.exportTypes=["png","jpg","webp","svg","pdf"],t.exportOptionId=exportOptionId,t.exportOptionUniqueId=function exportOptionUniqueId(e,t){return e+"::"+t},t.exportOptionIndex=function exportOptionIndex(e,t){const n={};return t.exportOptions.findIndex(t=>{const i=exportOptionId(t);"number"==typeof n[i]?n[i]++:n[i]=0;const o=i+"::"+n[i];return e===o})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(176),o=n(219),r=n(15),s=n(14),a=n(289);function createCodeFile(e){const t=i.sanitizedVariableName(e)||"MyComponent";return{name:t+o.tsxExtension,content:function componentTemplate(e){return`import * as React from "react"\n    import { Frame, useCycle } from "framer"\n\n    // Open Preview (CMD + P)\n    // API Reference: https://www.framer.com/api\n\n    export function ${e}() {\n        const [twist, cycle] = useCycle(\n            { scale: 0.5, rotate: 0 },\n            { scale: 1, rotate: 90 },\n        )\n\n        return <Frame animate={twist} onTap={() => cycle()} size={"100%"} />\n    }`}(t)}}t.createCodeFile=createCodeFile,t.editNewCodeComponentFile=function editNewCodeComponentFile(e,t){const{name:n,content:i}=createCodeFile(t);if(e)a.CodeEditor.editFile(n,i);else{const e="code/"+n;r.getIpcRenderer().send(s.CreateFileAtRelativePath,[e,i]),r.getIpcRenderer().send(s.OpenRelativePathExternally,e)}},t.openCodeComponentFile=function openCodeComponentFile(e,t){t.startsWith("./")&&(t=t.slice(2)),e?a.CodeEditor.editFile(t):r.getIpcRenderer().send(s.OpenRelativePathExternally,`code/${t}`)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.tsxExtension=".tsx"},function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))(function(o,r){function fulfilled(e){try{step(i.next(e))}catch(t){r(t)}}function rejected(e){try{step(i.throw(e))}catch(t){r(t)}}function step(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(fulfilled,rejected)}step((i=i.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const o=n(24),r=n(16),s=n(1),a=n(14),l=n(15),c=n(4),d=n(81),u=n(214),h=n(113),p=n(119),g=n(698),m=n(128),f=n(161),y=n(194),v=n(22),b=n(42),k=n(143),S=n(6),C=n(2),x=n(86);let w=null,T=null,P=Object.assign({},g.PreviewSettingsDefaults);t.lastActiveScreenNode=null;let E=new Map,F=null;const M={selectionLock:!1,canvasNode:null,editorFile:null,editorPreviewSettings:Object.assign({},g.PreviewSettingsDefaults,{responsive:!0})};function previewConverter(e,t){let n,i,o;if(e instanceof c.CodeComponentNode)n=e.getProps();else{const t=e.cache;(n=t.props)||(n=t.props=e.getProps())}if(p.hasNavigationLink(e)&&e.navigationTarget&&(i={navigationTarget:e.navigationTarget,navigationTransition:e.navigationTransition,navigationTransitionDirection:e.navigationTransitionDirection,navigationTransitionOverrides:{backdropColor:e.navigationTransitionBackdropColor}}),e instanceof c.TextNode&&!n.rawHTML){const t=d.convertToRaw(e.styledText.styledText.getCurrentContent());n=Object.assign({},n,{contentState:t})}return h.hasCodeOverride(e)&&(o=e.codeOverrideIdentifier),{componentClass:e instanceof c.CanvasNode?u.componentForNode(e).name:e.componentIdentifier,props:n,children:t,codeOverrideIdentifier:o,navigationLink:i}}function getPreviewData(e){const t=function getPreviewMetadataForNode(e){const t=e;if(!t)return null;const n=t.name||b.defaultName(t),i=t;if(!i)return null;const o=t.cache.canvasRect;let r=i.previewSettings;r=r?new g.PreviewSettings(r):new g.PreviewSettings(Object.assign({},g.PreviewSettingsDefaults,{deviceType:t.deviceType||void 0}));if(r.deviceType&&!r.deviceDescriptor){const e=y.getDevices(),t=r.merge({deviceDescriptor:e[r.deviceType]});r=new g.PreviewSettings(t)}return{name:n,id:t.id,width:o?o.width:void 0,height:o?o.height:void 0,selectionLock:M.selectionLock,settings:r}}(e);if(t){const n=s.convertPresentationTree(e,previewConverter),i=x.getTokenCSSProperties(e.tree());return{presentationNode:n,metadata:t,navigation:function convertNavigationNodes(e){const t={};return e.forEach((e,n)=>{t[n]=s.convertPresentationTree(e,previewConverter)}),t}(getNavigationNodes(e)),customProperties:i}}return null}function sendPreviewData(e){let n=null;e&&(n=getPreviewData(e)),n||(n={metadata:{selectionLock:M.selectionLock,settings:P},customProperties:{}}),F=T?T.root.getTokensHash():null,t.lastActiveScreenNode=e,P=n.metadata.settings,k.projectServerConnection.updatePreview(JSON.stringify(n))}function getNavigationNodes(e,t=null,n={}){if(null===t&&(t=new Map),n[e.id])return t;if(p.hasNavigationLink(e)&&null!==e.navigationTarget){const i=e.tree().get(e.navigationTarget);n[e.id]=e.navigationTarget,i&&(t.set(e.navigationTarget,i),getNavigationNodes(i,t,n))}if(r.getChildren(e).map(e=>getNavigationNodes(e,t,n)),v.isCodeComponentNode(e)){const i=e.allSlotContent();for(const o of i){const i=e.tree().get(o);i&&getNavigationNodes(i,t,n)}}return t}t.getPreviewData=getPreviewData;const _=C.default.debounce(function updatePreviewIfChanged(){if(C.default.mouseDown)return void _();let e=T?T.get(w):null;e&&!m.hasPreviewSettings(e)&&(e=null);const n=F!==(T&&T.root.getTokensHash());if(e!==t.lastActiveScreenNode||M.selectionLock||n){if(M.selectionLock&&e){const t=getNavigationNodes(e);(function navigationNodesUpdated(e,t){if(e.size!==t.size)return!0;for(const[n,i]of e){const e=t.get(n);if(e!==i)return!0}return!1})(E,t)&&(E=t)}sendPreviewData(e)}},100);function forceUpdatePreview(){sendPreviewData(t.lastActiveScreenNode)}function componentForFile(e){e.startsWith("./")||(e="./"+e);let t=!1,n=null;const i=C.default.toolStore.componentDefinitionsFromScriptText,r=i?i.get(e):null;return r&&(t=!0,r.forEach(t=>{"component"===t.type&&(e.endsWith("/"+t.name+".tsx")?n=t:n||(n=t))}),n)?n:(o.componentLoader.componentsForPackage(o.componentLoader.localPackageIdentifier()).forEach(i=>{if(i.file===e){if("component"!==i.type)return void(t=!0);e.endsWith("/"+i.name+".tsx")?n=i:n||(n=i)}}),n||t||(n=o.componentLoader.errorForIdentifier(e)),n)}function updateCurrentState(){const e=C.default.toolStore.isCodeEditorOpen(),t=C.default.treeStore.fileInEditor,n=C.default.treeStore.state.activeScreen;let i=null;if(M.selectionLock&&(M.canvasNode?C.default.tree.has(M.canvasNode)||(M.selectionLock=!1,M.canvasNode=null):M.editorFile&&((i=componentForFile(M.editorFile))||(M.selectionLock=!1,M.editorFile=null))),M.selectionLock||(!i&&t&&(i=componentForFile(t)),e&&i?(M.canvasNode=null,M.editorFile=t):n&&(M.canvasNode=n,M.editorFile=null)),M.editorFile&&i){if(!function editorComponentNodeNeedsUpdate(e){if(!s.isReactDefinition(e))return!1;if(!T||T===C.default.tree)return!0;const t=T.get(w);if(!t||!v.isCodeComponentNode(t))return!0;if(t.codeComponentIdentifier!==e.identifier)return!0;const n=e.class.defaultProps||{},i=e.defaults||{},o=asNumber(i.width||n.width,200),r=asNumber(i.height||n.height,200);return t.width!==o||t.height!==r}(i))return;!function createEditorComponentNode(e){if(!s.isReactDefinition(e))return;T=new c.default;const t=e.class.defaultProps||{},n=e.defaults||{},i=asNumber(n.width||t.width,200),o=asNumber(n.height||t.height,200),r=new c.CodeComponentNode({codeComponentIdentifier:e.identifier,codeComponentProps:n,left:0,top:0,width:i,height:o});r.previewSettings=new g.PreviewSettings(M.editorPreviewSettings),T.insertNode(r),w=r.id}(i)}else M.canvasNode?(T=C.default.tree,w=M.canvasNode):(T=null,w=null);_()}function asNumber(e,t){return"number"!=typeof e&&(e=Number(e)),isNaN(e)?t:e}function togglePreviewSelectionLock(e){M.selectionLock="boolean"==typeof e?e:!M.selectionLock,M.selectionLock||updateCurrentState()}t.forceUpdatePreview=forceUpdatePreview,C.default.changes.observe(S.EngineChangeFlags.TreeStore|S.EngineChangeFlags.ComponentHash|S.EngineChangeFlags.ToolStore,updateCurrentState),t.updateFrameNodePreviewSettings=function updateFrameNodePreviewSettings(e,n){const i=C.default.toolStore.isCodeEditorOpen(),o=C.default.treeStore.fileInEditor;if(i&&o){if(!T||T===C.default.tree)return;if(!t.lastActiveScreenNode||!T.has(t.lastActiveScreenNode.id))return;return M.editorPreviewSettings=Object.assign({},g.PreviewSettingsDefaults,M.editorPreviewSettings,n),t.lastActiveScreenNode.previewSettings=new g.PreviewSettings(M.editorPreviewSettings),void forceUpdatePreview()}const r=C.default.tree.getCurrentOrFuture(e);if(!r||!m.hasPreviewSettings(r))return;const s=C.default.tree.mutableFutureNode(r);if(!m.hasPreviewSettings(s)||!f.hasDevice(s))return;const a=r.previewSettings&&r.previewSettings.toJS(),l=Object.assign({},g.PreviewSettingsDefaults,{deviceType:s.deviceType},a,n);s.previewSettings=new g.PreviewSettings(l)},t.sendServerStoreData=function sendServerStoreData(){l.getIpcRenderer().send(a.ServerStoreData,C.default.serverStore.stateForServer())},t.setPreviewSelectionLock=function setPreviewSelectionLock(e){togglePreviewSelectionLock(e)},t.togglePreviewSelectionLock=togglePreviewSelectionLock,t.togglePreviewInspector=function togglePreviewInspector(){return i(this,void 0,void 0,function*(){k.projectServerConnection.togglePreviewInspector()})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(13),r=n(3),s=n(292),a=n(712);t.TabContentSearchProps=a.TabContentSearchProps;const l=n(2),c=n(6);function cursorForWidth(e){switch(e){case o.layout.minWidth:return"e-resize";case o.layout.maxWidth:return"w-resize";default:return"ew-resize"}}t.TabContent=class TabContent extends i.Component{constructor(){super(...arguments),this.state={resizeCursor:cursorForWidth(o.layout.currentTabContentWidth)},this.onResizeDragStart=e=>{this.dragStartWidth=o.layout.currentTabContentWidth},this.onResizeDrag=l.default.wrapHandler(e=>{if(this.dragStartWidth){let t=this.dragStartWidth+e.x;const n=o.layout.defaultTabContentWidth;Math.abs(t-n)<10&&(t=n),o.layout.setTabContentWidth(t),l.default.changes.addChanges(c.EngineChangeFlags.Rulers);const i=cursorForWidth(o.layout.currentTabContentWidth);i!==this.state.resizeCursor&&this.setState({resizeCursor:i})}}),this.onResizeDragEnd=e=>{delete this.dragStartWidth,o.layout.saveToUserDefaults()},this.preventDefault=e=>{e.preventDefault()}}render(){const{children:e,search:t,header:n,footer:l,className:c,placeholder:d}=this.props,{resizeCursor:u}=this.state,h=0===i.Children.count(e),p=t&&t.position,g=t&&i.createElement(a.TabContentSearch,{position:t.position,placeholder:t.placeholder,onSearch:t.onSearch,value:t.value,detail:t.detail});return i.createElement("div",{style:{position:"fixed",top:o.layout.chromeMarginTop,left:o.layout.toolbarWidth,bottom:o.layout.chromeMarginBottom,width:o.layout.tabContentWidth,backgroundColor:r.theme.tabContentBackground,display:"flex",alignItems:"flex-start",flexDirection:"column",boxSizing:"border-box"},className:"tabContent",onContextMenu:this.preventDefault},h&&d&&i.createElement("div",{style:{position:"absolute",width:"100%",height:"100%",display:"flex",alignItems:"stretch",flexDirection:"column",flexGrow:2}},i.createElement("div",{style:{flexGrow:1,display:"flex"}},d)),n,"top"===p&&g,i.createElement("div",{style:{position:"relative",width:"100%",display:"flex",alignItems:"stretch",flexDirection:"column",flexGrow:2,pointerEvents:h?"none":"unset",overflow:"hidden"},className:c},!h&&e),l,"bottom"===p&&g,i.createElement(s.default,{onDragStart:this.onResizeDragStart,onDrag:this.onResizeDrag,onDragEnd:this.onResizeDragEnd,delta:!0,cursor:u,style:{cursor:u,position:"absolute",top:0,bottom:0,right:-1,width:5,zIndex:2e3,transform:"translate3d(0, 0, 0)"}}))}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(3);t.collapseIndicator=function collapseIndicator(e,t){const n=o.theme.backgroundImage(`icon-triangle-${e?"right":"down"}-${t&&t.active?"white":"gray"}`),r=Object.assign({position:"relative",width:15,height:20,marginLeft:10,marginRight:4,background:`no-repeat 5px 50% ${n}`,flexShrink:0,pointerEvents:"none"},t?t.style:{});return i.createElement("div",{style:r})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(3);t.PanelEmptyState=class PanelEmptyState extends i.Component{constructor(){super(...arguments),this.state={step:0},this.switchStep=e=>()=>{this.setState({step:e})},this.dotForStep=(e,t)=>i.createElement("a",{key:e,style:t===e?h:u,onClick:this.switchStep(e)},"")}render(){const{step:e}=this.state,{steps:t}=this.props,{icon:n,header:o,text:u,action:h,actionText:p}=t[e],g=[];for(let i=0;i<t.length;i++)g.push(this.dotForStep(i,e));return i.createElement("div",{style:r},i.createElement("div",null,i.createElement("div",{style:c(n)}),i.createElement("h1",{style:a},o),i.createElement("p",{style:s},u),h&&i.createElement("a",{style:l,onClick:h},p),!!h||i.createElement("div",{style:s},""),t.length>1&&i.createElement("div",{style:d},g)))}};const r={width:"100%",display:"flex",alignItems:"center",justifyContent:"center"},s={fontWeight:300,fontSize:"11px",lineHeight:1.6,textAlign:"center",color:o.theme.componentsEmptyText,cursor:"default",margin:2,padding:"0 10px",width:208},a=Object.assign({},s,{fontWeight:500,marginBottom:5,color:o.theme.componentsEmptyHeader}),l=Object.assign({},s,{color:o.theme.componentsEmptyActive,display:"block",fontWeight:400,marginTop:5,cursor:"pointer"}),c=e=>({background:`no-repeat center ${o.theme.backgroundImage(`icon-${e}`)}`,width:"100%",height:21,marginBottom:11}),d={margin:"10px 0",width:"100%",textAlign:"center"},u={fontSize:"10px",padding:5,color:o.theme.componentsEmptyInactive,cursor:"pointer"},h=Object.assign({},u,{color:o.theme.componentsEmptyActive})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(789);function isOptionsObject(e){return e===Object(e)&&0!==Object.keys(e).length}t.scrollIntoView=function scrollIntoView(e,t){const n=!e.ownerDocument.documentElement.contains(e);if(isOptionsObject(t)&&"function"==typeof t.behavior)return t.behavior(n?[]:i.computeScrollIntoView(e,t));if(n)return;const o=function getOptions(e){return!1===e?{block:"end",inline:"nearest"}:isOptionsObject(e)?e:{block:"start",inline:"nearest"}}(t);return function defaultBehavior(e,t="auto"){const n="scrollBehavior"in document.body.style;e.forEach(({el:e,top:i,left:o})=>{e!==document.body&&(e.scroll&&n?e.scroll({top:i,left:o,behavior:t}):(e.scrollTop=i,e.scrollLeft=o))})}(i.computeScrollIntoView(e,o),o.behavior)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(3);t.ColorPickerPreview=function ColorPickerPreview({background:e,width:t,style:n}){const o=e.includes("gradient")||e.includes("url")?e:void 0;return i.createElement("div",{key:o,style:Object.assign({},r,n,{width:(t||38)-8})},i.createElement("div",{style:s}),i.createElement("div",{style:fill(e)}))};const r={position:"absolute",borderRadius:1,marginLeft:3,marginTop:3,height:16,overflow:"hidden"},s={backgroundImage:o.theme.backgroundImage("pattern-checkboard-7"),backgroundRepeat:"repeat",backgroundPosition:"center",position:"absolute",top:1,bottom:1,left:1,right:1};function fill(e){return{boxShadow:`inset 0 0 0 1px ${o.theme.colorSwatchBorder}`,position:"absolute",top:0,bottom:0,left:0,right:0,background:e||"white",backgroundSize:"cover",backgroundRepeat:"no-repeat",backgroundPosition:"center center",borderRadius:1}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(1),o=n(148),r=n(21);function collectLayerFilters(e,t){const n=[];if(i.isFiniteNumber(e.brightness)&&n.push(`brightness(${e.brightness}%)`),i.isFiniteNumber(e.contrast)&&n.push(`contrast(${e.contrast}%)`),i.isFiniteNumber(e.grayscale)&&n.push(`grayscale(${e.grayscale}%)`),i.isFiniteNumber(e.hueRotate)&&n.push(`hue-rotate(${e.hueRotate}deg)`),i.isFiniteNumber(e.invert)&&n.push(`invert(${e.invert}%)`),i.isFiniteNumber(e.saturate)&&n.push(`saturate(${e.saturate}%)`),i.isFiniteNumber(e.sepia)&&n.push(`sepia(${e.sepia}%)`),i.isFiniteNumber(e.blur)&&n.push(`blur(${e.blur}px)`),e.dropShadows){const{zoom:t}=r.RenderEnvironment;t>=8||n.push(...o.shadowsAsFilter(e.dropShadows))}0!==n.length&&(t.filter=t.WebkitFilter=n.join(" "))}function collectBackgroundFilters(e,t){i.isFiniteNumber(e.backgroundBlur)&&(t.backdropFilter=t.WebkitBackdropFilter=`blur(${e.backgroundBlur}px)`)}t.collectLayerFilters=collectLayerFilters,t.collectBackgroundFilters=collectBackgroundFilters,t.collectFiltersFromProps=function collectFiltersFromProps(e,t){collectBackgroundFilters(e,t),collectLayerFilters(e,t)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(301),o=n(302),r=n(123),s=n(303),a=new Map;function Color(e,t,n,i){if("string"==typeof e){let t=a.get(e);return t||(void 0===(t=createColor(e))?Object.assign({},Color("black"),{isValid:!1}):(a.set(e,t),t))}const o=createColor(e,t,n,i);return void 0!==o?o:Object.assign({},Color("black"),{isValid:!1})}function createColor(e,t,n,i){if(""===e)return;const s=function getCompleteColorStrategy(e,t,n,i=1){let s;if("number"!=typeof e||Number.isNaN(e)||"number"!=typeof t||Number.isNaN(t)||"number"!=typeof n||Number.isNaN(n))"string"==typeof e?s=function getCompleteColorFromString(e){const t=o.stringToObject(e);if(t)return t.format===r.ColorFormat.HSL?getCompleteColorFromHSL(t):t.format===r.ColorFormat.HSV?function getCompleteColorFromHSV(e){const t=o.hsvToRgb(e.h,e.s,e.v),n=o.rgbToHsl(t.r,t.g,t.b);return Object.assign({},n,t,{format:r.ColorFormat.RGB,a:void 0!==e.a?correctAlpha(e.a):1})}(t):getCompleteColorFromRGB(t)}(e):"object"==typeof e&&(s=e.hasOwnProperty("r")&&e.hasOwnProperty("g")&&e.hasOwnProperty("b")?getCompleteColorFromRGB(e):getCompleteColorFromHSL(e));else{const o=e,r=t,a=n,l=i;s=getCompleteColorFromRGB({r:o,g:r,b:a,a:l})}return s}(e,t,n,i);if(s){const t={r:s.r,g:s.g,b:s.b,a:s.a,h:s.h,s:s.s,l:s.l,initialValue:"string"==typeof e&&s.format!==r.ColorFormat.HSV?e:void 0,roundA:Math.round(100*s.a)/100,format:s.format,mix:Color.mix,toValue:()=>Color.toRgbString(t)};return t}}t.Color=Color,function(e){e.inspect=function inspect(e,t){return e.format===r.ColorFormat.HSL?`<${e.constructor.name} h:${e.h} s:${e.s} l:${e.l} a:${e.a}>`:e.format===r.ColorFormat.HEX||e.format===r.ColorFormat.NAME?`<${e.constructor.name} "${t}">`:`<${e.constructor.name} r:${e.r} g:${e.g} b:${e.b} a:${e.a}>`},e.isColor=function isColor(t){return"string"==typeof t?e.isColorString(t):e.isColorObject(t)},e.isColorString=function isColorString(e){return"string"==typeof e&&!1!==o.stringToObject(e)},e.isColorObject=function isColorObject(e){return e&&"string"!=typeof e&&"number"==typeof e.r&&"number"==typeof e.g&&"number"==typeof e.b&&"number"==typeof e.h&&"number"==typeof e.s&&"number"==typeof e.l&&"number"==typeof e.a&&"number"==typeof e.roundA&&"string"==typeof e.format},e.toString=function toString(t){return e.toRgbString(t)},e.toHex=function toHex(e,t=!1){return o.rgbToHex(e.r,e.g,e.b,t)},e.toHexString=function toHexString(t,n=!1){return`#${e.toHex(t,n)}`},e.toRgbString=function toRgbString(e){return 1===e.a?"rgb("+Math.round(e.r)+", "+Math.round(e.g)+", "+Math.round(e.b)+")":"rgba("+Math.round(e.r)+", "+Math.round(e.g)+", "+Math.round(e.b)+", "+e.roundA+")"},e.toHusl=function toHusl(e){return Object.assign({},o.rgbToHsluv(e.r,e.g,e.b),{a:e.roundA})},e.toHslString=function toHslString(t){const n=e.toHsl(t),i=Math.round(n.h),o=Math.round(100*n.s),r=Math.round(100*n.l);return 1===t.a?"hsl("+i+", "+o+"%, "+r+"%)":"hsla("+i+", "+o+"%, "+r+"%, "+t.roundA+")"},e.toHsv=function toHsv(e){const t=o.rgbToHsv(e.r,e.g,e.b);return{h:360*t.h,s:t.s,v:t.v,a:e.a}},e.toHsvString=function toHsvString(e){const t=o.rgbToHsv(e.r,e.g,e.b),n=Math.round(360*t.h),i=Math.round(100*t.s),r=Math.round(100*t.v);return 1===e.a?"hsv("+n+", "+i+"%, "+r+"%)":"hsva("+n+", "+i+"%, "+r+"%, "+e.roundA+")"},e.toName=function toName(e){if(0===e.a)return"transparent";if(e.a<1)return!1;const t=o.rgbToHex(e.r,e.g,e.b,!0);for(const n of Object.keys(s.cssNames))if(s.cssNames[n]===t)return n;return!1},e.toHsl=function toHsl(e){return{h:Math.round(e.h),s:e.s,l:e.l,a:e.a}},e.toRgb=function toRgb(e){return{r:Math.round(e.r),g:Math.round(e.g),b:Math.round(e.b),a:e.a}},e.brighten=function brighten(t,n=10){const i=e.toRgb(t);return i.r=Math.max(0,Math.min(255,i.r-Math.round(-n/100*255))),i.g=Math.max(0,Math.min(255,i.g-Math.round(-n/100*255))),i.b=Math.max(0,Math.min(255,i.b-Math.round(-n/100*255))),e(i)},e.lighten=function lighten(t,n=10){const i=e.toHsl(t);return i.l+=n/100,i.l=Math.min(1,Math.max(0,i.l)),e(i)},e.darken=function darken(t,n=10){const i=e.toHsl(t);return i.l-=n/100,i.l=Math.min(1,Math.max(0,i.l)),e(i)},e.saturate=function saturate(t,n=10){const i=e.toHsl(t);return i.s+=n/100,i.s=Math.min(1,Math.max(0,i.s)),e(i)},e.desaturate=function desaturate(t,n=10){const i=e.toHsl(t);return i.s-=n/100,i.s=Math.min(1,Math.max(0,i.s)),e(i)},e.grayscale=function grayscale(t){return e.desaturate(t,100)},e.hueRotate=function hueRotate(t,n){const i=e.toHsl(t);return i.h+=n,i.h=i.h>360?i.h-360:i.h,e(i)},e.alpha=function alpha(t,n=1){return e({r:t.r,g:t.g,b:t.b,a:n})},e.transparent=function transparent(t){return e.alpha(t,0)},e.multiplyAlpha=function multiplyAlpha(t,n=1){return e({r:t.r,g:t.g,b:t.b,a:t.a*n})},e.interpolate=function interpolate(t,n,i=r.ColorMixModelType.RGB){if(!e.isColorObject(t)||!e.isColorObject(n))throw new TypeError("Both arguments for Color.interpolate must be Color objects");return o=>e.mixAsColor(t,n,o,!1,i)},e.mix=function mix(t,n,{model:i=r.ColorMixModelType.RGB}={}){const o="string"==typeof t?e(t):t,s=e.interpolate(o,n,i);return t=>e.toRgbString(s(t))},e.mixAsColor=function mixAsColor(t,n,s=.5,a=!1,c=r.ColorMixModelType.RGB){let d=null;if(l.isRGB(c))d=e({r:i.modulate(s,[0,1],[t.r,n.r],a),g:i.modulate(s,[0,1],[t.g,n.g],a),b:i.modulate(s,[0,1],[t.b,n.b],a),a:i.modulate(s,[0,1],[t.a,n.a],a)});else{let r,u;l.isHSL(c)?(r=e.toHsl(t),u=e.toHsl(n)):(r=e.toHusl(t),u=e.toHusl(n)),0===r.s?r.h=u.h:0===u.s&&(u.h=r.h);const h=r.h,p=u.h;let g=p-h;g>180?g=p-360-h:g<-180&&(g=p+360-h);const m={h:i.modulate(s,[0,1],[h,h+g],a),s:i.modulate(s,[0,1],[r.s,u.s],a),l:i.modulate(s,[0,1],[r.l,u.l],a),a:i.modulate(s,[0,1],[t.a,n.a],a)};d=l.isHSL(c)?e(m):e(o.rgbaFromHusl(m.h,m.s,m.l,m.a))}return d},e.random=function random(t=1){function gen(){return Math.floor(255*Math.random())}return e("rgba("+gen()+", "+gen()+", "+gen()+", "+t+")")},e.grey=function grey(t=.5,n=1){return t=Math.floor(255*t),e("rgba("+t+", "+t+", "+t+", "+n+")")},e.gray=e.grey,e.rgbToHsl=function rgbToHsl(e,t,n){return o.rgbToHsl(e,t,n)},e.isValidColorProperty=function(t,n){return!("color"!==t.toLowerCase().slice(-5)&&"fill"!==t&&"stroke"!==t||"string"!=typeof n||!e.isColorString(n))},e.difference=function difference(e,t){const n=(e.r+t.r)/2,i=e.r-t.r,o=e.g-t.g,r=e.b-t.b,s=Math.pow(i,2),a=Math.pow(o,2),l=Math.pow(r,2);return Math.sqrt(2*s+4*a+3*l+n*(s-l)/256)},e.equal=function equal(e,t,n=.1){return!(Math.abs(e.r-t.r)>=n||Math.abs(e.g-t.g)>=n||Math.abs(e.b-t.b)>=n||Math.abs(e.a-t.a)>=n)}}(Color||(Color={})),t.Color=Color;const l={isRGB:e=>e===r.ColorMixModelType.RGB||e===r.ColorMixModelType.RGBA,isHSL:e=>e===r.ColorMixModelType.HSL||e===r.ColorMixModelType.HSLA};function getCompleteColorFromRGB(e){const t=o.rgbToRgb(e.r,e.g,e.b),n=o.rgbToHsl(t.r,t.g,t.b);return Object.assign({},n,t,{format:r.ColorFormat.RGB,a:void 0!==e.a?correctAlpha(e.a):1})}function getCompleteColorFromHSL(e){let t,n,s,a={r:0,g:0,b:0},l={h:0,s:0,l:0};return t=((t=i.isNumeric(e.h)?e.h:0)+360)%360,n=i.isNumeric(e.s)?e.s:1,"string"==typeof e.s&&(n=i.numberFromString(e.s)),s=i.isNumeric(e.l)?e.l:.5,"string"==typeof e.l&&(s=i.numberFromString(e.l)),a=o.hslToRgb(t,n,s),l={h:t,s:n,l:s},Object.assign({},a,l,{a:void 0===e.a?1:e.a,format:r.ColorFormat.HSL})}function correctAlpha(e){return(e=parseFloat(e))<0&&(e=0),(isNaN(e)||e>1)&&(e=1),e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(149);function Point(e,t){return{x:e,y:t}}t.Point=Point,function(e){e.add=(...e)=>e.reduce((e,t)=>({x:e.x+t.x,y:e.y+t.y}),{x:0,y:0}),e.subtract=(e,t)=>({x:e.x-t.x,y:e.y-t.y}),e.multiply=(e,t)=>({x:e.x*t,y:e.y*t}),e.divide=(e,t)=>({x:e.x/t,y:e.y/t}),e.absolute=e=>({x:Math.abs(e.x),y:Math.abs(e.y)}),e.reverse=e=>({x:-1*e.x,y:-1*e.y}),e.pixelAligned=(e,t={x:0,y:0})=>({x:i.roundWithOffset(e.x,t.x),y:i.roundWithOffset(e.y,t.y)}),e.distance=(e,t)=>{const n=Math.abs(e.x-t.x),i=Math.abs(e.y-t.y);return Math.sqrt(n*n+i*i)},e.angle=(e,t)=>180*Math.atan2(t.y-e.y,t.x-e.x)/Math.PI-90,e.isEqual=(e,t)=>e.x===t.x&&e.y===t.y,e.rotationNormalizer=()=>{let e;return t=>{"number"!=typeof e&&(e=t);const n=e-t,i=Math.abs(n)+180,o=Math.floor(i/360);return n<180&&(t-=360*o),n>180&&(t+=360*o),e=t,t}},e.center=function center(e,t){return{x:(e.x+t.x)/2,y:(e.y+t.y)/2}}}(Point||(Point={})),t.Point=Point},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(311),o=n(59),r=n(308),s=/var\(.+\)/,a=new Map;function cachedMultiplyAlpha(e,t){const n=[e,t];return s.test(e)?e:r.memoize(1e3,a,n,()=>o.ConvertColor.multiplyAlpha(e,t))}function gradientColorStops(e,t=1){let n;return n="stops"in e?e.stops:[{value:e.start,position:0},{value:e.end,position:1}],1===t?n:n.map(e=>Object.assign({},e,{value:cachedMultiplyAlpha(e.value,t)}))}t.gradientColorStops=gradientColorStops,t.gradientColorStopsHash=function gradientColorStopsHash(e,t){let n=0;return gradientColorStops(e,t).forEach(e=>{n^=i.hash(e.value)^e.position}),n}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(231);function Animatable(e){return isAnimatable(e)?e:new AnimatableValue(e)}t.Animatable=Animatable,function(e){e.transaction=function transaction(e){const t=Math.random(),n=new Set;e((e,i)=>{e.set(i,t),n.add(e)},t);const i=[];n.forEach(e=>{i.push(...e.finishTransaction(t))}),i.forEach(e=>{e(t)})},e.getNumber=function getNumber(t,n=0){return e.get(t,n)},e.get=function get(e,t){return null==e?t:isAnimatable(e)?e.get():e},e.objectToValues=function objectToValues(e){if(!e)return e;const t={};for(const n in e){const i=e[n];isAnimatable(i)?t[n]=i.get():t[n]=i}return t}}(Animatable=t.Animatable||(t.Animatable={}));const o="onUpdate",r="finishTransaction";function isAnimatable(e){return null!==e&&"object"==typeof e&&o in e&&e[o]instanceof Function&&r in e&&e[r]instanceof Function}t.isAnimatable=isAnimatable;class AnimatableValue{constructor(e){this.value=e,this.observers=new i.Observers}static interpolationFor(e,t){if(isAnimatable(e))return function animatableInterpolation(e,t){return{interpolate(e,n){const i=e.get(),o=n.get(),r=Animatable(i);return e=>{const n=t.interpolate(i,o)(e);return r.set(n),r}},difference(e,n){const i=e.get();return t.difference(i,n.get())}}}(0,t)}get(){return this.value}set(e,t){const n=this.value;isAnimatable(e)&&(e=e.get()),this.value=e;const i={value:e,oldValue:n};this.observers.notify(i,t)}finishTransaction(e){return this.observers.finishTransaction(e)}onUpdate(e){return this.observers.add(e)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.Observers=class Observers{constructor(){this.observers=new Set,this.transactions={}}add(e){this.observers.add(e);let t=!1;return()=>{t||(t=!0,this.remove(e))}}remove(e){this.observers.delete(e)}notify(e,t){if(t){const n=this.transactions[t]||e;n.value=e.value,this.transactions[t]=n}else this.callObservers(e)}finishTransaction(e){const t=this.transactions[e];return delete this.transactions[e],this.callObservers(t,e)}callObservers(e,t){const n=[];return new Set(this.observers).forEach(i=>{"function"==typeof i?i(e,t):(i.update(e,t),n.push(i.finish))}),n}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(150),o=n(33),r=n(181),s=n(59);t.collectBackgroundFromProps=function collectBackgroundFromProps({background:e,backgroundColor:t},n){t?"string"==typeof t||r.isMotionValue(t)?n.backgroundColor=t:s.Color.isColorObject(e)&&(n.backgroundColor=e.initialValue||s.Color.toRgbString(e)):e&&("string"==typeof(e=o.Animatable.get(e,null))||r.isMotionValue(e)?n.background=e:i.LinearGradient.isLinearGradient(e)?n.background=i.LinearGradient.toCSS(e):i.RadialGradient.isRadialGradient(e)?n.background=i.RadialGradient.toCSS(e):s.Color.isColorObject(e)&&(n.backgroundColor=e.initialValue||s.Color.toRgbString(e)))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(33),o="opacity";function withOpacity(e){return o in e}t.withOpacity=withOpacity,t.collectOpacityFromProps=function collectOpacityFromProps(e,t){if(!withOpacity(e))return;const n=i.Animatable.getNumber(e.opacity);1!==n&&(t.opacity=n)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(322),o=n(152),r=n(1),s=n(324);class FramerEvent{constructor(e,t){this.originalEvent=e,this.session=t,this.time=Date.now(),this.loopTime=o.MainLoop.time;const n=t&&t.startEvent&&t.startEvent.target||e.target,s=FramerEvent.eventLikeFromOriginalEvent(e);this.point=i.pointForEvent(s,n);const a=t&&t.originElement?t.originElement:document.body;this.devicePoint=i.pointForEvent(s,a),this.target=e.target||null;const l=t&&t.lastEvent;e instanceof WheelEvent?this.delta={x:e.deltaX,y:e.deltaY}:l&&this.devicePoint&&l.devicePoint?this.delta=r.Point.subtract(this.devicePoint,l.devicePoint):this.delta={x:0,y:0}}static eventLikeFromOriginalEvent(e){if("touches"in e){let t=e.touches;if(t&&t.length||e.changedTouches&&e.changedTouches.length&&(t=e.changedTouches),!t||!t.length)return{pageX:0,pageY:0,target:null};const n=t[0];return{pageX:n.clientX||n.screenX||n.pageX,pageY:n.clientY||n.screenY||n.pageY,target:e.target}}return e}velocity(e){return this.session?this.session.velocity(e):{x:0,y:0}}get offset(){return this.session?this.session.offset(this):{x:0,y:0}}get isLeftMouseClick(){if(!s.environment.isTouch())return"button"in this.originalEvent&&"buttons"in this.originalEvent&&"ctrlKey"in this.originalEvent&&((0===this.originalEvent.button||1===this.originalEvent.buttons)&&!this.originalEvent.ctrlKey)}}t.FramerEvent=FramerEvent},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.round=(e,t=0,n=1,i,o)=>{const r=Math.pow(10,t);return n&&(e=Math.round(e/n)*n),e=Math.round(e*r)/r,i&&e<i?i:o&&e>o?o:e},t.roundWhole=(e,n=1)=>(null===n&&(n=1),parseInt(e.toString())===e?parseInt(e.toString()):t.round(e,n)),t.clamp=(e,t,n)=>{const i=Math.min(t,n),o=Math.max(t,n);return e<i&&(e=i),e>o&&(e=o),e},t.modulate=(e,t,n,i=!1)=>{const[o,r]=Array.from(t),[s,a]=Array.from(n),l=s+(e-o)/(r-o)*(a-s);if(!0===i)if(s<a){if(l<s)return s;if(l>a)return a}else{if(l>s)return s;if(l<a)return a}return l}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(18);t.isWebKit=()=>void 0!==i.safeWindow.WebKitCSSMatrix&&!t.isEdge(),t.webkitVersion=()=>{let e=-1;const t=/AppleWebKit\/([\d.]+)/.exec(navigator.userAgent);return t&&(e=parseFloat(t[1])),e},t.isChrome=()=>/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor),t.isSafari=()=>/Safari/.test(navigator.userAgent)&&/Apple Computer/.test(navigator.vendor),t.isFirefox=()=>/^Mozilla.*Firefox\/\d+\.\d+$/.test(navigator.userAgent),t.isEdge=()=>/Edge/.test(navigator.userAgent),t.isAndroid=()=>/(android)/i.test(navigator.userAgent),t.isIOS=()=>/(iPhone|iPod|iPad)/i.test(navigator.platform),t.isMacOS=()=>/Mac/.test(navigator.platform),t.isWindows=()=>/Win/.test(navigator.platform),t.isTouch=()=>null===i.safeWindow.ontouchstart&&null===i.safeWindow.ontouchmove&&null===i.safeWindow.ontouchend,t.isDesktop=()=>"desktop"===t.deviceType(),t.isPhone=()=>"phone"===t.deviceType(),t.isTablet=()=>"tablet"===t.deviceType(),t.isMobile=()=>t.isPhone()||t.isTablet(),t.isFileUrl=e=>e.startsWith("file://"),t.isDataUrl=e=>e.startsWith("data:"),t.isRelativeUrl=e=>!/^([a-zA-Z]{1,8}:\/\/).*$/.test(e),t.isLocalServerUrl=e=>/[a-zA-Z]{1,8}:\/\/127\.0\.0\.1/.test(e)||/[a-zA-Z]{1,8}:\/\/localhost/.test(e),t.isLocalUrl=e=>!!t.isFileUrl(e)||!!t.isLocalServerUrl(e),t.isLocalAssetUrl=(e,n)=>(null===n&&(n=i.safeWindow.location.href),!t.isDataUrl(e)&&(!!t.isLocalUrl(e)||!(!t.isRelativeUrl(e)||!t.isLocalUrl(n)))),t.devicePixelRatio=()=>i.safeWindow.devicePixelRatio,t.isJP2Supported=function(){return!t.isFirefox()&&(t.isWebKit()&&!t.isChrome())},t.isWebPSupported=()=>t.isChrome(),t.deviceType=()=>/(tablet)|(iPad)|(Nexus 9)/i.test(navigator.userAgent)?"tablet":/(mobi)/i.test(navigator.userAgent)?"phone":"desktop",t.deviceFont=e=>{e||(t.isMacOS()&&(e="macos"),t.isIOS()&&(e="ios"),t.isAndroid()&&(e="android"),t.isWindows()&&(e="windows"));const n="-apple-system, BlinkMacSystemFont, SF Pro Text, SF UI Text, Helvetica Neue";return"macos"===e?n:"ios"===e?n:"android"===e?"Roboto, Helvetica Neue":"windows"===e?"Segoe UI, Helvetica Neue":n}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(125);t.Interpolation=i.Interpolation;var o=n(501);t.ValueInterpolation=o.ValueInterpolation,t.AnyInterpolation=o.AnyInterpolation,t.InterpolationOptions=o.InterpolationOptions;var r=n(330);t.NumberInterpolation=r.NumberInterpolation;var s=n(331);t.ObjectInterpolation=s.ObjectInterpolation;var a=n(332);t.NoInterpolation=a.NoInterpolation;var l=n(333);t.ColorInterpolation=l.ColorInterpolation},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=Array.isArray,o=Object.keys,r=Object.prototype.hasOwnProperty;t.isEqual=function isEqual(e,t,n=!0){try{return function equal(e,t,n){if(e===t)return!0;if(e&&t&&"object"==typeof e&&"object"==typeof t){const s=i(e),a=i(t);let l,c,d;if(s&&a){if((c=e.length)!==t.length)return!1;for(l=c;0!=l--;){if(!n&&e[l]!==t[l])return!1;if(n&&!equal(e[l],t[l],!0))return!1}return!0}if(s!==a)return!1;const u=e instanceof Date,h=t instanceof Date;if(u!==h)return!1;if(u&&h)return e.getTime()===t.getTime();const p=e instanceof RegExp,g=t instanceof RegExp;if(p!==g)return!1;if(p&&g)return e.toString()===t.toString();if("function"==typeof e.equals&&"function"==typeof t.equals)return e.equals(t);const m=o(e);if((c=m.length)!==o(t).length)return!1;for(l=c;0!=l--;)if(!r.call(t,m[l]))return!1;for(l=c;0!=l--;)if("_owner"!==(d=m[l])||!e.$$typeof){if(!n&&e[d]!==t[d])return!1;if(n&&!equal(e[d],t[d],!0))return!1}return!0}return e!=e&&t!=t}(e,t,n)}catch(s){if(s.message&&s.message.match(/stack|recursion/i)||-2146828260===s.number)return console.warn("Warning: isEqual does not handle circular references.",s.name,s.message),!1;throw s}}},function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))(function(o,r){function fulfilled(e){try{step(i.next(e))}catch(t){r(t)}}function rejected(e){try{step(i.throw(e))}catch(t){r(t)}}function step(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(fulfilled,rejected)}step((i=i.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const o=n(342),r=n(515),s=n(518),a=n(126),l=n(343);class FontStore{constructor(){this.bySelector=new Map,this.createWebFontIfNeeded=e=>{const{source:t,family:n,variant:i}=e,o=this.createTypefaceIfNeeded({source:t,family:n});let r=o.fonts.find(t=>t.variant===e.variant);if(!r){const t=l.parseVariant(i)||{},{weight:n,style:s}=t,a=this.getFontSelector(e)||"";a||console.warn("Invalid font locator",e),r={typeface:o,variant:i,selector:a,weight:n,style:s},o.fonts.push(r),this.addFont(r)}return r},this.local=new s.LocalFontSource,this.google=new r.GoogleFontSource,this.bySelector=new Map,this.allFonts=[],this.importFonts(a.TypefaceSourceNames.Local),this.defaultFont=this.getFontBySelector(o.defaultFontDescriptor.selector)}importFonts(e,t){if(e!==a.TypefaceSourceNames.Google){if(e===a.TypefaceSourceNames.Local){this.local.importFonts().forEach(e=>this.addFont(e))}}else{if(!t)return;this.google.importFonts(t).forEach(e=>this.createWebFontIfNeeded(e))}}addFont(e){this.bySelector.set(e.selector,e),this.allFonts.push(e)}getSource(e){return this[e]}getTypeface(e){return this.getSource(e.source).byFamily.get(e.family)||null}getFontSelector(e){const{family:t,variant:n,source:i}=e;if(i===a.TypefaceSourceNames.Local){const t=this.getTypeface(e);if(!t)return null;const i=t.fonts.find(e=>e.variant===n);return i?i.selector:null}return`GF;${t}-${n}`}getFontBySelector(e){return this.bySelector.get(e)||null}getOrCreateFontBySelector(e){let t=this.getFontBySelector(e);if(t)return t;const n=this.google.parseSelector(e);return n?t=this.createWebFontIfNeeded(n):null}getAvailableFonts(){return this.allFonts}createTypefaceIfNeeded(e){let n=t.fontStore.getTypeface(e);if(!n){n=this.getSource(e.source).createTypeface(e.family)}return n}isSelectorLoaded(e){const t=this.getFontBySelector(e);return t&&"loaded"===t.status||!1}canLoadSelector(e){return e.startsWith(r.googleFontSelectorPrefix)}loadWebFont(e,t,n){return i(this,void 0,void 0,function*(){const i=[],o=this.getSource(e);return o instanceof s.LocalFontSource?i:(yield o.loadWebFont(t,n,e=>{const t=this.createWebFontIfNeeded(e);return t.status="loaded",i.push(t),t}),i)})}loadWebFontFromSelector(e){return i(this,void 0,void 0,function*(){if(this.isSelectorLoaded(e))return[];if(!this.canLoadSelector(e))return[];const t=this.google.parseSelector(e);return t?yield this.loadWebFont(a.TypefaceSourceNames.Google,t.family,[t.variant]):[]})}loadWebFontsFromSelectors(e){return i(this,void 0,void 0,function*(){const t=[];for(const n of e){const e=yield this.loadWebFontFromSelector(n);t.push(...e)}return t})}}t.FontStore=FontStore,t.fontStore=new FontStore},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(149);t.transformString=function transformString(e){if(void 0===e)return;const{x:t,y:n,rotation:o,width:r,height:s}=e;let a;if(0===t&&0===n||(a=`translate(${i.roundedNumberString(t,3)} ${i.roundedNumberString(n,3)})`),0!==o){const e=`rotate(${i.roundedNumberString(o,4)} ${i.roundedNumberString(r/2,3)} ${i.roundedNumberString(s/2,3)})`;a=a?`${a} ${e}`:e}return a}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.lightSyntaxColors={blue:"#0099FF",lightBlue:"#33AAEE",teal:"#00BBCC",yellow:"#FFAA00",orange:"#FF8866",purple:"#8855FF",purpleFade:"#DD88FF",pink:"#FF3377",default:"#666666",gray:"#999999",grayFade:"#BBBBBB"},t.darkSyntaxColors={blue:"#00BBFF",lightBlue:"#AADDFF",teal:"#22CCDD",yellow:"#FFCC66",orange:"#FF8866",purple:"#BB88FF",purpleFade:"#EEAAFF",pink:"#FF5599",default:"#EEEEEE",gray:"#999999",grayFade:"#666666"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(107),o=n(23),r=n(9),s=n(24),a=n(108),l=n(109),c=n(4),d=n(626),u=n(263),h=n(628),p=n(629),g=n(630),m=n(631),f=n(632),y=n(32),v=n(642),b=n(643),k=n(139),S=n(646),C=n(647),x=n(1),w=n(12),T=n(56),P=n(648),E=n(6),F=n(15),M=n(14),_=i.getLogger("ToolManager"),O=!1;function vekterKeyEvent(e){return e.which||(e.which=e.keyCode),e.preventDefault||(e.preventDefault=()=>{e.defaultPrevented=!0}),e.stopPropagation||(e.stopPropagation=()=>{}),e}var I;function stateName(e){switch(e){case I.Idle:return"Idle";case I.InEventHandling:return"InEventHandling";case I.InToolProcessing:return"InToolProcessing";case I.PostProcessing:return"PostProcessing";case I.Rendering:return"Rendering"}}t.vekterKeyEvent=vekterKeyEvent,t.vekterMouseEvent=function vekterMouseEvent(e,t,n={}){return n.clientX=e,n.clientY=t,n.button||(n.button=0),n.buttons||(n.buttons=0),n.preventDefault||(n.preventDefault=()=>{n.defaultPrevented=!0}),n.stopPropagation||(n.stopPropagation=()=>{}),n},function(e){e[e.Idle=1]="Idle",e[e.InEventHandling=2]="InEventHandling",e[e.InToolProcessing=3]="InToolProcessing",e[e.PostProcessing=4]="PostProcessing",e[e.Rendering=5]="Rendering"}(I=t.EngineState||(t.EngineState={}));class VekterEngine{constructor(){this.perf=null,this.zoom=1,this.selection=[],this.highlight=c.NullID,this.activeScreen=c.NullID,this.deletedMasters=!1,this.reactComponent=null,this.shapeModeActive=!1,this.changesLastUpdate=0,this.updateStartTime=0,this.toolStartTime=0,this.processStartTime=0,this.reactStartTime=0,this.paintStartTime=0,this.wantReport=!1,this.update=0,this.lastUpdateEndTime=Date.now(),this.lastIdleUpdate=0,this.startZoom=0,this.state=I.Idle,this.inEventHandling=0,this.eventsHandled=0,this.nonUserEvents=0,this.changes=new E.EngineChanges,this.serverStore=new h.ServerStore(this.changes.addChanges),this.persistedUserDefaults=new b.PersistedUserDefaults(this.changes.addChanges),this.treeStore=new p.TreeStore(this.changes.addChanges,this.persistedUserDefaults.displayAllLinks),this.toolStore=new N.ToolStore(this.changes.addChanges),this.canvasStore=new g.CanvasStore(this.changes.addChanges,this),this.statusStore=new u.StatusStore(this.changes.addChanges),this.mouseStore=new f.MouseStore(this.changes.addChanges,this),this.pathSelectionStore=new y.PathSelectionStore(this.changes.addChanges),this.chromeStore=new v.ChromeStore(this.changes.addChanges),this.documentSettings=new k.DocumentSettingsStore(this.changes.addChanges),this.feedbackStore=new d.FeedbackStore(this.changes.addChanges),this.selectionOutlineTracker=new C.SelectionOutlineTracker(this.changes.addChanges,this.wrapHandler.bind(this)),this.currentAnimationFrame=0,this.currentAnimationFrameBackupTimer=0,this.isAtomicUpdate=!1,this.ignoreDebounceCalls=!1,this.didLoad=this.wrapHandler(()=>{this.changes.addChanges(E.EngineChangeFlags.Tree),this.enableUserInteractions(),this.chromeStore.setDocumentIsLoaded(!0),this.feedbackStore.documentDidLoad(this),F.getIpcRenderer().send(M.DocumentLoaded)}),this.debugStore=new m.DebugStore(this.changes.addChanges,this.wrapHandler(()=>{})),this.inSetState=!1,this.triggerReactUpdate=()=>{clearTimeout(this.currentAnimationFrameBackupTimer),this.reactComponent&&(this.reactComponent.state.update>=this.update||this.reactComponent.setState({update:this.update}))},this.scheduledAtEndOfFrame=null,this.scheduledAtNextFrame=null,this.endFrame=()=>{this.scheduledAtEndOfFrame&&(this.scheduledAtEndOfFrame.forEach(e=>{try{e()}catch(t){console.error(t)}}),this.scheduledAtEndOfFrame=null),this.scheduledAtNextFrame&&(this.scheduledAtNextFrame.forEach(e=>setTimeout(e,0)),this.scheduledAtNextFrame=null),this.state!==I.Idle&&(o(this.state===I.Rendering,"Engine not clean: "+stateName(this.state)),this.setState(I.Idle),window.requestAnimationFrame&&(this.wantReport=!0,this.paintStartTime=Date.now(),setTimeout(()=>{this.wantReport&&(this.lastIdleUpdate=this.update),this.report()},0)))},this.cancelTool=()=>{this.tool.cancel&&this.tool.cancel(),this.mouseStore.setMouseDown(!1),this.exitTool()},this.exit=null,this.exitTool=()=>{this.exit?this.exit():this.setTool(R.newToolFor(N.Tools.Highlight))},this.mouse=x.Point(0,0),this.mouseDown=null,this.mouseRaw=x.Point(0,0),this.mouseDownRaw=null,this.altKey=!1,this.cmdKey=!1,this.shiftKey=!1,this.spacebarDown=!1,this.mouseOnCanvas=!1,this.previousInputState={mouse:x.Point(0,0),mouseDown:null,mouseRaw:x.Point(0,0),mouseDownRaw:null,altKey:!1,cmdKey:!1,shiftKey:!1,spacebarDown:!1,mouseOnCanvas:!1},this.previousSelection=[],this.setTooltip=(e,t=null,n=N.ToolTipArrow.None,i=!1)=>{this.toolStore.setTooltip(e,t||this.mouseRaw,n,i)},this.documentWasHiddenThisFrame=!1,this.updateTreeState(),this.tool=new InitialTool,this.tool.engine=this,document.addEventListener("visibilitychange",()=>this.trackDocumentVisibility(document.hidden))}static shared(){return D||(D=new VekterEngine),D}debounce(e,t){let n=0,i=0;const o=()=>{this.lastIdleUpdate>=n&&Date.now()-this.lastUpdateEndTime>60?(i=0,e()):i=setTimeout(o,60)};return()=>{this.ignoreDebounceCalls||(i&&clearTimeout(i),n=this.update,i=setTimeout(o,t))}}load(e){this.treeStore.setTree(e),this.updateTreeState(),this.codeGenerator&&this.codeGenerator.updateTree(this.tree),this.didLoad()}wrapHandler(e){const t=this;return function(...n){t.enterEventHandling();try{return e(...n)}finally{t.exitEventHandling()}}}wrapAtomicHandler(e){const t=this;return function(...n){if(t.state!==I.Rendering){o(t.state<=I.InEventHandling,`Engine not in clean state: ${stateName(t.state)}`),clearTimeout(t.currentAnimationFrameBackupTimer),cancelAnimationFrame(t.currentAnimationFrame),t.isAtomicUpdate=!0,t.enterEventHandling();try{e(...n)}finally{t.exitEventHandling()}t.triggerReactUpdate(),t.isAtomicUpdate=!1}else console.warn("Engine already rendering, ignoring handler")}}wrapKeyHandler(e){return t=>{this.enterEventHandling();try{return e(t)}finally{this.exitEventHandling()}}}wrapMouseHandler(e){return t=>{this.enterEventHandling();try{return e(t)}finally{this.exitEventHandling()}}}currentStateName(){return stateName(this.state)}currentToolName(){return this.tool.pathTool?this.tool.pathTool.constructor.name:this.tool.constructor.name}assertStateMutable(){if(this.state<I.InEventHandling||this.state>I.InToolProcessing)throw Error("Invalid State: mutations not allowed in: "+this.currentStateName()+", tool:"+this.currentToolName());if(this.inEventHandling<=0)throw Error("Invalid State: not in an event handler, "+this.currentStateName()+", tool:"+this.currentToolName())}assertReactRendering(){if(this.reactComponent&&this.state!==I.Rendering)throw Error("Invalid State: not in react rendering, but in: "+this.currentStateName())}setState(e){o(!this.inSetState,"must not call setState re-entrantly"),this.inSetState=!0,this.state===I.Idle&&e!==I.Idle&&(this.report(),this.documentWasHiddenThisFrame=document.hidden,this.updateStartTime=Date.now(),this.update+=1,!this.isAtomicUpdate&&!O&&e<I.InToolProcessing&&(this.currentAnimationFrameBackupTimer=window.setTimeout(this.triggerReactUpdate,250),this.currentAnimationFrame=window.requestAnimationFrame(this.triggerReactUpdate)),o(!this.tree.hasUncommittedChanges()||!this.canvasStore.isInteractive,"Tree must no longer have uncommited changes")),this.state=e,this.inSetState=!1}mouseEventForTest(e,t,n=!1,i=!1,o=!1,r=!1,s=!1){this.enterEventHandling();const a=x.Point(e,t);this.mouseStore.setMousePosition(a,a,i,o,r,s),n!==!!this.mouseStore.mouseDown&&this.mouseStore.setMouseDown(n),this.exitEventHandling(),this.inEventHandling||this.nextFrameForTest()}keyDownForTest(e){this.enterEventHandling(),this.mouseStore.onKeyDown(vekterKeyEvent(e)),this.exitEventHandling(),this.inEventHandling||this.nextFrameForTest()}keyPressForTest(e){this.enterEventHandling(),this.mouseStore.onKeyPress(vekterKeyEvent(e)),this.exitEventHandling(),this.inEventHandling||this.nextFrameForTest()}keyUpForTest(e){this.enterEventHandling(),this.mouseStore.onKeyUp(vekterKeyEvent(e)),this.exitEventHandling(),this.inEventHandling||this.nextFrameForTest()}processFrameForTest(e){this.enterEventHandling();try{e()}finally{this.exitEventHandling()}this.inEventHandling||this.nextFrameForTest()}nextFrameForTest(){this.updateInputState(),this.doToolProcessing(),this.beginRendering(),this.endRendering(),this.endFrame()}updateTreeState(){o(!this.tree||!this.tree.hasUncommittedChanges(),"Tree must not exist or it must not have uncommitted changes"),this.previousTree=this.tree,this.previousSelection=this.selection,this.tree=this.treeStore.getTree(),this.selection=this.treeStore.getSelection();const e=this.treeStore.state;this.activeScreen=e.activeScreen,this.highlight=e.highlight,this.tree.editClosed=!0,o(!this.tree.hasUncommittedChanges(),"Tree must not have uncommited changes")}updateToolState(){this.handle=this.toolStore.state.handle,this.shapeModeActive=this.toolStore.state.shapeModeActive,this.zoom=this.canvasStore.zoom}updateInputState(){const e=this.mouseStore,t=e.mouse;this.setMouse(t.x,t.y,!!e.mouseDown,e.altKey,e.cmdKey,e.shiftKey,e.spacebar,e.mouseOnCanvas),this.mouse=t,this.mouseRaw=e.mouseRaw,e.mouseDown&&(this.mouseDown=e.mouseDown,this.mouseDownRaw=e.mouseDownRaw)}beginRendering(){o(this.state===I.PostProcessing||this.state===I.Idle,"Engine not clean: "+stateName(this.state)),this.setState(I.Rendering)}endRendering(){o(this.state===I.Rendering,"Engine state must be Rendering"),!this.reactComponent||this.isAtomicUpdate||O?this.endFrame():Promise.resolve().then(this.endFrame).catch(e=>setTimeout(()=>{throw e}))}runAtEndOfFrame(e){this.scheduledAtEndOfFrame||(this.scheduledAtEndOfFrame=[]),this.scheduledAtEndOfFrame.push(e)}runAtNextFrame(e){this.scheduledAtNextFrame||(this.scheduledAtNextFrame=[]),this.scheduledAtNextFrame.push(e)}report(){if(!this.wantReport)return;this.wantReport=!1;const e=+Date.now();this.lastUpdateEndTime=e;const t={update:this.update,toolName:this.currentToolName(),didLoadScript:0!=(this.changesLastUpdate&E.EngineChangeFlags.ComponentHash),didZoom:0!=(this.changesLastUpdate&E.EngineChangeFlags.CanvasZoom),documentWasHidden:this.documentWasHiddenThisFrame,mouseDown:!!this.mouseDown,selectionCount:this.selection.length,treeSize:this.tree.size(),zoom:this.zoom,totalTime:e-this.updateStartTime,eventProcessing:this.toolStartTime-this.updateStartTime,toolUpdate:this.processStartTime-this.toolStartTime,postProcessing:this.reactStartTime-this.processStartTime,reactUpdate:this.paintStartTime-this.reactStartTime,browserPaint:e-this.paintStartTime};this.perf&&(t.perf=Object.assign({},this.perf),this.perf.reset()),this.debugStore.addFrameReport(t)}getLastReport(){return this.report(),this.debugStore.getLastReport()}signalNonUserEvent(){this.nonUserEvents+=1}enterEventHandling(){o(this.state<=I.InEventHandling,"Engine not in clean state: "+stateName(this.state)),this.setState(I.InEventHandling),this.tree.editClosed=!1,this.inEventHandling+=1,this.eventsHandled+=1}exitEventHandling(){this.inEventHandling-=1,this.tree.editClosed=this.inEventHandling<=0,(this.isAtomicUpdate||O)&&0===this.inEventHandling&&this.triggerReactUpdate()}process(e){this.enterEventHandling();try{e()}finally{this.exitEventHandling()}}processWhenReady(e){this.inEventHandling?e():this.state===I.InEventHandling||this.state===I.Idle?this.process(e):setTimeout(this.wrapHandler(e),0)}doToolProcessing(){if(this.toolStartTime=Date.now(),!this.canvasStore.isInteractive)return this.doNonInteractivePostProcessing();o(this.state<I.InToolProcessing,"Engine not in clean state: "+stateName(this.state)),o(0===this.inEventHandling,"Engine must not be handling events"),this.setState(I.InToolProcessing),o(this.tree.editClosed,"Tree must be closed for editing"),this.inEventHandling+=1,this.tree.editClosed=!1;try{_.info("TOOL UPDATE: "+this.currentToolName()+" "+JSON.stringify(this.mouse)),this.updateToolState(),this.tool.update();const e=null!==this.mouseDown&&!0===this.tool.wantsAutoscrolling;e&&this.canvasStore.beginAutoscrolling(),this.canvasStore.autoscrollIfNeeded(),e&&this.canvasStore.endAutoscrolling()}finally{this.inEventHandling-=1}if(!this.canvasStore.isInteractive)return this.doNonInteractivePostProcessing();o(0===this.inEventHandling,"Engine still must not be handling events"),o(this.state===I.InToolProcessing,"Engine in wrong state: "+stateName(this.state)),this.setState(I.PostProcessing),this.doInteractivePostProcessing()}doNonInteractivePostProcessing(){this.setState(I.PostProcessing),this.processStartTime=Date.now(),this.changes.signalObserversFor(E.EngineChangeFlags.CanvasLiveTransform),this.reactStartTime=Date.now()}doInteractivePostProcessing(){this.processStartTime=Date.now(),o(this.state===I.PostProcessing,"Engine state must be PostProcessing"),this.selectionOutlineTracker.beforeCommit(this.treeStore.selectionAsNodes);let e=!l.default(this.selection,this.previousSelection);if(this.tree.hasUncommittedChanges()){e=!0;const t=this.codeGenerator,n=this.tree;this.tree=this.tree.commit(t?t.changedNodes:null),n.editClosed=!0,this.tree.editClosed=!0,this.deletedMasters&&t&&(this.deletedMasters=!1,t.updateTree(this.tree)),this.nonUserEvents<this.eventsHandled&&$.documentChanged()}if(this.nonUserEvents=0,this.eventsHandled=0,e){const e=this.selection.find(e=>{const t=this.tree.getNode(e);return!!t&&!c.isVectorNode(t)&&!c.isShapeContainerNode(t)}),t=this.selection.find(e=>{const t=this.tree.getNode(e);return!!t&&c.isVectorNode(t)});this.shapeModeActive?e&&(this.setShapeModeActive(!1),this.selection=this.selection.filter(e=>{const t=this.tree.getNode(e);return t&&!c.isVectorNode(t)})):t&&(e?this.selection=this.selection.filter(e=>{const t=this.tree.getNode(e);return t&&!c.isVectorNode(t)}):this.setShapeModeActive(!0)),this.treeStore.commit(this.tree,this.selection)}this.treeStore.performScheduledEndUndoGroups(),this.updateTreeState(),this.selectionOutlineTracker.afterCommit(this.treeStore.selectionAsNodes),this.toolStore.afterCommit(this.update,this.selection,{didTreeChange:this.changes.has(E.EngineChangeFlags.Tree)}),this.toolStore.state.leftPanelContent===N.LeftPanelContent.Components&&this.serverStore.clearRecentlyInstalledPackagesFlag(),this.treeStore.state!==this.lastTreeStoreState&&(this.lastTreeStoreState=this.treeStore.state),this.changes.has(E.EngineChangeFlags.UserDefaultsStore)&&this.treeStore.setShowAllArrows(this.persistedUserDefaults.displayAllLinks),(this.changes.has(E.EngineChangeFlags.Selection)||this.changes.has(E.EngineChangeFlags.Tree)||this.changes.has(E.EngineChangeFlags.Highlight))&&this.treeStore.calculateConnectedScreens(),this.changes.has(E.EngineChangeFlags.Tree)&&this.pathSelectionStore.validateSegmentSelection(this.tree),this.changesLastUpdate=this.changes.flags,this.changes.signalAllObservers(),this.reactStartTime=Date.now()}setToolEnum(e,t){this.assertStateMutable(),this.setTool(R.newToolFor(e,t))}setTool(e){this.isUserInteractionsDisabled||(this.assertStateMutable(),_.debug("VekterEngine.setTool(): "+this.tool.constructor.name+" "+this.tool.enum+" -> "+e.constructor.name+" "+e.enum),this.tool.stop(),e instanceof j.CreateShapeContainerTool&&this.setShapeModeActive(!0),this.toolStore.setTool(e.enum),e.engine=this,this.tool=e,e.start())}setResizeTool(e){this.handle=e,this.toolStore.setToolHandle(e),this.setTool(R.newToolFor(N.Tools.Resize))}setRotateTool(e){this.handle=e,this.toolStore.setToolHandle(e),this.setTool(R.newToolFor(N.Tools.Rotate))}setPathTool(){this.setTool(R.newToolFor(N.Tools.Path))}setExit(e){this.exit=e}setLeftPanelContent(e,t){this.isUserInteractionsDisabled||(this.toolStore.setLeftPanelContent(e),Promise.resolve().then(()=>{t&&t()},V.unhandledError))}setCodeFileCreationHeaderIsExpanded(e){this.toolStore.setCodeFileCreationHeaderIsExpanded(e)}isDefaultToolActive(){return this.tool.enum===N.Tools.Highlight||this.tool.enum===N.Tools.DirectSelect}setShapeModeActive(e){if(e===this.shapeModeActive)return;this.shapeModeActive=e,this.toolStore.setShapeModeActive(e);const t=this.selection.length>0&&this.treeStore.selectionAsNodes.every(e=>c.isVectorNode(e)||c.isShapeContainerNode(e));e&&t&&this.setLeftPanelContent(N.LeftPanelContent.Layers)}setShapeContainerOpenCategories(e){this.toolStore.setShapeContainerOpenCategories(e)}setMouse(e,t,n,i,o,r,s,a){this.previousInputState.mouse=this.mouse,this.previousInputState.mouseDown=this.mouseDown,this.previousInputState.mouseRaw=this.mouseRaw,this.previousInputState.mouseDownRaw=this.mouseDownRaw,this.previousInputState.altKey=this.altKey,this.previousInputState.cmdKey=this.cmdKey,this.previousInputState.shiftKey=this.shiftKey,this.previousInputState.spacebarDown=this.spacebarDown,this.previousInputState.mouseOnCanvas=this.mouseOnCanvas,this.mouse=x.Point(e,t),this.mouseRaw=x.Point(e,t),n?(this.mouseDown||(this.mouseDown=x.Point(e,t)),this.mouseDownRaw||(this.mouseDownRaw=x.Point(e,t))):(this.mouseDown=null,this.mouseDownRaw=null),this.altKey=i,this.cmdKey=o,this.shiftKey=r,this.spacebarDown=s,this.mouseOnCanvas=a}setMouseStore(e,t,n=!1,i=!1,o=!1,r=!1,s=!1){const a=x.Point(e,t);this.mouseStore.setMousePosition(a,a,i,o,r,s),n!==!!this.mouseStore.mouseDown&&this.mouseStore.setMouseDown(n)}zoomToFitAll(e={}){const t=this.treeStore.tree.getBoundingFrame();t.width>0&&t.height>0&&this.canvasStore.zoomToCenter(t,{maxZoom:1,animated:!e.initial})}setCursor(e){this.toolStore.setMouseCursor(e)}clearCursor(){this.toolStore.setMouseCursor("")}undo(){this.assertStateMutable(),this.treeStore.undo(),this.updateTreeState(),this.previousTree=this.tree,this.previousSelection=this.selection,this.codeGenerator&&this.codeGenerator.updateTree(this.tree),this.toolStore.setSelectedGuide()}redo(){this.assertStateMutable(),this.treeStore.redo(),this.updateTreeState(),this.previousTree=this.tree,this.previousSelection=this.selection,this.codeGenerator&&this.codeGenerator.updateTree(this.tree)}beginUndoGroup(){this.assertStateMutable(),this.treeStore.beginUndoGroup()}endUndoGroup(){this.assertStateMutable(),this.treeStore.scheduleEndUndoGroup()}discardUndoGroup(){this.assertStateMutable(),this.treeStore.discardUndoGroup(),this.updateTreeState(),this.previousTree=this.tree,this.previousSelection=this.selection,this.codeGenerator&&this.codeGenerator.updateTree(this.tree)}clearUndoStack(){this.assertStateMutable(),this.treeStore.clearUndoStack()}setActiveScreen(e=c.NullID){e!==this.activeScreen&&this.treeStore.setActiveScreen(e)}setHighlight(e=c.NullID){this.treeStore.setHighlight(e),this.highlight=e,e&&this.toolStore.setHighlightedGuide()}clearSelection(){this.selection=[]}setSelection(e){this.assertStateMutable(),this.selection=e,e.length&&(this.toolStore.state.selectedGuide&&this.toolStore.setSelectedGuide(),this.toolStore.state.ghostGuide&&this.toolStore.setGhostGuide())}toggleSelection(e){this.assertStateMutable();const t=a.without(e,this.selection),n=a.without(this.selection,e);this.selection=a.union(n,t)}getNode(e){return this.tree.getNode(e)}createNode(e,t={},n=c.NullID){this.assertStateMutable();let i=t.id;return i||(i=this.tree.newId(),t=Object.assign({},t,{id:i})),this.tree.createClassName(e,n,t),this.tree.get(i)}createFrame(e,t={}){if(null!=e){this.getNode(e)&&r.triggerLayoutFrameHierarchyEvent({})}this.createNode(c.FrameNode.name,t,e)}createStack(e,t,n={},i=[],o){const r=H.HardCodedCodeIdentifier.stack;n.codeComponentIdentifier=r;const a=s.componentLoader.componentForIdentifier(r);a&&x.isReactDefinition(a)&&(n.codeComponentProps=B.defaultCodeComponentProps(a),this.createNode(c.CodeComponentNode.name,n,t),z.stackDefaultsDependOnChildren({siblingNodes:i,tree:this.tree,rect:o,component:a,properties:n,reparenting:{engine:this,id:e}}),n.codeComponentProps.distribution="space-between")}createShapeContainer(e,t={}){this.createNode(c.ShapeContainerNode.name,t,e)}createPath(e,t={}){this.createNode(c.PathNode.name,t,e)}createBooleanPath(e,t={}){this.createNode(c.BooleanShapeNode.name,t,e)}createShapeGroup(e,t={}){this.createNode(c.ShapeGroupNode.name,t,e)}createText(e,t,n={}){null!==e?e instanceof A.StyledTextDraft?n.styledText=e:n.styledText=new A.StyledTextDraft(e):n.styledText=A.StyledTextDraft.createEmptyWithStyle(this.documentSettings.asStyle()),this.createNode(c.TextNode.name,n,t)}createShape(e,t,n={}){let i;switch(e){case"oval":i=c.OvalShapeNode.name;break;case"polygon":i=c.PolygonShapeNode.name;break;case"star":i=c.StarShapeNode.name;break;default:i=c.RectangleShapeNode.name}this.createNode(i,n,t)}createImage(e,t,n={}){n.intrinsicWidth,this.createNode(c.FrameNode.name,Object.assign({aspectRatio:aspectRatioFromAttibutes(n),fillImage:e,fillType:"image"},n),t)}createSVG(e,t,n={}){this.createNode(c.SVGNode.name,Object.assign({aspectRatio:aspectRatioFromAttibutes(n),svg:e,fillColor:!0===n.colorable?"black":void 0},n),t)}insertNode(e,t){this.tree.insertNode(e,t||e.parentid)}insertNodes(e){this.tree.insertNodes(e)}cloneNode(e){const t=this.tree,n=function deepCloneWithTemplate(e,t,n){if(w.isMaster(t))return T.TemplateHelper.create(e,t);if(w.isReplica(t)){const i=T.TemplateHelper.create(e,T.TemplateHelper.getMaster(e,t),t.replicaInfo.overrides);return i.parentid!==t.parentid&&(i.parentid=n||t.parentid),i}const i=new t.constructor;Object.assign(i,t,U,{cache:i.cache,id:i.id});n&&(i.parentid=n);const o=t.children;o&&(i.children=o.map(n=>deepCloneWithTemplate(e,n,t.id)));return i}(t,e);if(e.originalid&&!n.originalid){n.parentid=null,this.tree.insertNode(n,c.NullID);const i=t.convertRectToCanvasCached(e);return n.set(n.updateForRect(i,null),t),n}let i;const o=(this.tree.getParent(e.id)||t.root).children.indexOf(e);return o>=0&&(i=o+1),this.tree.insertNode(n,n.parentid,i),n}canDeleteNodes(e){const t=this.tree;for(let n=0,i=e.length;n<i;n++){const i=e[n],o=t.get(i);if(o&&o.originalid&&!w.isReplica(o))return!1}return!0}removeNodes(e){const t=this.tree,n=t.root.id,i=[];e.forEach(e=>{const o=t.getFuture(e);if(!o)return;let r=!1;o.walk(e=>{const s=o.cache.links;if(s&&s.forEach(n=>{const i=t.get(n);i&&(i.asMutable(),c.isCodeComponentNode(i)&&e.id&&i.removeNodeFromSlotContent(e.id))}),w.isMaster(e)&&(this.deletedMasters=!0,T.TemplateHelper.hasReplicas(t,e))){o===e&&(r=!0);const s=t.convertRectToCanvasCached(e);T.TemplateHelper.hideMaster(t,e),e.parentid!==n&&t.moveNode(e,n),i.push(e.set(e.updateForRect(s,null),t))}}),r||t.removeNode(o.futureOrCurrent())}),i.forEach(e=>{T.TemplateHelper.hasReplicas(t,e)||t.removeNode(e)})}deleteNode(e){this.removeNodes([e])}deleteNodes(e){this.removeNodes(e)}moveNode(e,t=c.NullID,n){this.tree.move(e,t,n)}updateNode(e,t){this.tree.update(e,t)}updateNodes(e,t){const n=this.tree;for(let i=0,o=e.length;i<o;i++)n.update(e[i],t)}updateNodesDirect(e,t){const n=this.tree;for(let i=0,o=e.length;i<o;i++)n.updateNode(e[i],t)}bulkNodeUpdate(e,t){const n=this.tree;for(let i=0,o=e.length;i<o;i++)n.update(e[i],t[i])}updateNodesForEach(e,t){const n=this.tree;for(let i=0,o=e.length;i<o;i++){const o=e[i],r=t(o,i);r&&o.set(r,n)}}setRenameTarget(e=c.NullID){this.treeStore.setRenameTarget(e)}setComponentHash(e){const t=this.tree;t.root.futureOrCurrent().walk(e=>{if(e instanceof c.CodeComponentNode){if(e.originalid){const n=T.TemplateHelper.getReplicaForTemplateNode(t,e);if(n){const t=n.replicaInfo.overrides[e.originalid];if(!t||!t.codeComponentProps)return}}const n=B.filterCodeComponentProps(e);e.cache.codeComponentPresentation=null,t.updateNode(e,{codeComponentProps:n}),e.allSlotContent().forEach(n=>{const i=this.tree.get(n);i&&t.linkNodeChangesTo(i,e.id)})}}),this.canvasStore.setComponentHash(e)}linkChangesTo(e,t){const n=this.tree.get(e);o(n,"Node to link from must exist"),this.tree.linkNodeChangesTo(n,t)}inspect(e=[],t=[]){return P.inspect(this.tree,e,t)}installPerformanceDebugging(e=null){return this.perf&&this.perf.uninstall(),this.perf=new S.EnginePerformance(e).install(this.debugStore),this.perf}removePerformanceDebugging(){this.perf&&(this.perf.uninstall(),this.perf=null)}disableUserInteractions(){this.isUserInteractionsDisabled=!0}enableUserInteractions(){this.isUserInteractionsDisabled=!1}trackDocumentVisibility(e){e&&(this.documentWasHiddenThisFrame=!0)}}t.VekterEngine=VekterEngine;let D=null;class InitialTool{constructor(){this.enum=N.Tools.Unknown}start(){}update(){this.engine.setTool(R.newToolFor(N.Tools.Highlight))}stop(){}}t.InitialTool=InitialTool;const N=n(5),R=n(20),A=n(37),L=n(112),B=n(205),j=(n(16),n(270)),H=n(117),z=n(408),$=n(265),V=n(35),U={mutable:!0,update:0,originalid:null};function aspectRatioFromAttibutes(e){if(!L.hasIntrinsicSize(e))return null;const{intrinsicWidth:t,intrinsicHeight:n}=e;return x.isFiniteNumber(t)&&x.isFiniteNumber(n)?t/n:null}},function(e,t,n){"use strict";var i;function stateName(e){switch(e){case i.Possible:return"Possible";case i.Began:return"Began";case i.Changed:return"Changed";case i.Ended:return"Ended";case i.Failed:return"Failed";case i.Cancelled:return"Cancelled";case i.Recognized:return"Recognized";default:return"Unknown"}}function containsBitmask(e,t){return 0!=(e&t)}Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.Possible=2]="Possible",e[e.Began=4]="Began",e[e.Changed=8]="Changed",e[e.Ended=16]="Ended",e[e.Failed=32]="Failed",e[e.Cancelled=64]="Cancelled",e[e.Recognized=128]="Recognized"}(i=t.State||(t.State={}));t.GestureRecognizer=class GestureRecognizer{constructor(){this._state=i.Possible,this.preventers=[]}get state(){return this._state}setState(e){this._state=e}get isPrevented(){let e=!1;for(const t of this.preventers)if(t.state&(i.Began|i.Changed|i.Ended)){e=!0;break}return e}canBePreventedBy(e){this.preventers.push(e)}hasState(e){return containsBitmask(this.state,e)}stateSwitch(e){let t;switch(this.state){case i.Possible:t=i.Began|i.Recognized|i.Failed;break;case i.Began:case i.Changed:t=i.Changed|i.Cancelled|i.Ended;break;case i.Recognized:case i.Ended:case i.Cancelled:case i.Failed:t=i.Possible;break;default:t=0}containsBitmask(e,t)?this.setState(e):console.warn(`Unallowed state change from ${stateName(this.state)} to ${stateName(e)}`)}cancel(){this.hasState(i.Began|i.Changed)&&this.setState(i.Cancelled),this.reset()}reset(){this.hasState(i.Possible)||this.stateSwitch(i.Possible)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(550);t.FramerEventListener=i.FramerEventListener;var o=n(234);t.FramerEvent=o.FramerEvent;var r=n(359);t.FramerEventSession=r.FramerEventSession},function(e,t,n){"use strict";function __export(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(553),r=n(182),s=n(33),a=n(151),l=n(105),c=n(554);t.DeviceRenderer=c.DeviceRenderer;const d=n(555);__export(n(556)),__export(n(557));const u="framer-local://";class Device extends i.Component{get descriptor(){return this.constructor.descriptor}get skins(){return this.descriptor.skins}get hands(){return this.descriptor.hands}get svgScreenMask(){}componentDidMount(){this.computeRequiredPackages()}componentDidUpdate(e){this.computeRequiredPackages()}computeRequiredPackages(){if(!this.props.onRequirePackage)return;const{skin:e,hand:t}=this.props;if(e){const t=this.skins[e];d.isWithPackage(t)&&this.props.onRequirePackage(t.package,e)}if(t){const e=this.hands[t];d.isWithPackage(e)&&this.props.onRequirePackage(e.package,t)}}render(){const{width:e,height:t}=this.props.parentSize?{width:s.Animatable.getNumber(this.props.parentSize.width),height:s.Animatable.getNumber(this.props.parentSize.height)}:this.props.deviceSize,n={skin:this.getSkin(),hand:this.getHand(),device:r.Size(e,t),screen:this.descriptor.screen,content:this.props.contentSize,pixelRatio:this.descriptor.pixelRatio||1,rotate:this.props.rotate||!1,responsive:this.props.responsive,svgScreenMask:this.svgScreenMask,autoScale:this.props.autoScale},o=i.createElement(this.props.renderer,n,this.props.children),a=this.outerStyle(n);let l=o;if(-1!==this.props.zoom){const e=this.outerStyle(n);e.transformOrigin="center",e.transform=`scale(${this.props.zoom})`,l=i.createElement("div",{style:e},o)}return i.createElement("div",{style:a},l)}getSkin(){const e=this.props.skin?this.skins[this.props.skin]:null;let t=null;if(t=d.isWithPackage(e)?Device.skinOrHandFromPackage(e):e){const e=t.image;e.startsWith(u)&&(t.image=this.toLocalPath(e.substr(u.length)))}return t}getHand(){const e=this.props.hand?this.hands[this.props.hand]:null;return d.isWithPackage(e)?Device.skinOrHandFromPackage(e):e}outerStyle(e){return{width:this.props.deviceSize.width,height:this.props.deviceSize.height,WebkitUserSelect:"none",MozUserSelect:"none",msUserSelect:"none",overflow:"hidden",display:"block",position:"absolute",background:this.props.background||"none"}}static skinOrHandFromPackage(e){const t=e.package,n=t&&a.componentLoader.componentsForPackage(t);if(n&&n.length){const i=new n[0].class;return"image"in i&&(i.image=l.imageUrlForAsset(`node_modules/${t}/${i.image}`)),Object.keys(e).forEach(t=>{"image"!==t&&t in i&&(i[t]=e[t])}),i}return null}toLocalPath(e){let t=null;return a.componentLoader.forEachComponent(e=>e.class===this.constructor&&(e.depth>0&&(t=e.packageIdentifier),!0)),t&&(e=`node_modules/${t}/${e}`),l.imageUrlForAsset(e)}}Device.defaultProps={parentSize:null,deviceSize:r.Size.zero,contentSize:r.Size.zero,zoom:-1,responsive:!1,onRequirePackage:()=>{},renderer:c.DeviceRenderer},Device.registry=new o.DeviceRegistry,Device.descriptor={title:"Device Base Class",screen:r.Size.zero,pixelRatio:1,skins:{},hands:{}},t.Device=Device},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.paddingFromProps=function paddingFromProps(e){const{paddingPerSide:t,padding:n=0,paddingTop:i,paddingBottom:o,paddingLeft:r,paddingRight:s}=e;return!1!==t&&(i||o||r||s)?{top:void 0!==i?i:n,bottom:void 0!==o?o:n,left:void 0!==r?r:n,right:void 0!==s?s:n}:{top:n,bottom:n,left:n,right:n}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(1),r=n(33),s=n(124),a=n(154),l=n(360),c=n(21),d=n(106),u=(e,t,n,i)=>e===l.DeprecatedStack?((e,t,n)=>{const i=o.ConstraintValues.fromProperties(e),r=o.ConstraintValues.toMinSize(i,t);let s=null;const a=o.valueToDimensionType(e.width),l=o.valueToDimensionType(e.height);if(a===o.DimensionType.Auto||l===o.DimensionType.Auto){const t=g(e.children,r),n=p(e.children);s=m(t,e,n)}return o.ConstraintValues.toSize(i,e.parentSize,s,n)})(t,n,i):((e,t,n)=>{const i=o.ConstraintValues.fromProperties(e);return o.ConstraintValues.toSize(i,t||null,null,n)})(t.constraints||t,n,i);t.calcSize=u;const h=(e,t,n)=>e===l.DeprecatedStack?((e,t)=>{const n=o.ConstraintValues.fromProperties(e),i=o.ConstraintValues.toMinSize(n,t);let r=null;const s=o.valueToDimensionType(e.width),a=o.valueToDimensionType(e.height);if(s===o.DimensionType.Auto||a===o.DimensionType.Auto){const t=g(e.children,i),n=p(e.children);r=m(t,e,n)}return o.ConstraintValues.toMinSize(n,t,r)})(t,n):((e,t)=>{const n=o.ConstraintValues.fromProperties(e);return o.ConstraintValues.toMinSize(n,t||null)})(t.constraints||t,n);t.calcMinSize=h;const p=(e,t)=>{const n=[];return i.Children.forEach(e,(e,i)=>{if(!d.isReactChild(e)||!d.isReactElement(e)||!1!==e.props.visible)return e;t&&t.index<=i&&(i+=t.sizes.length),n.push(i)}),n};t.invisibleItemIndexes=p;const g=(e,t,n)=>{const o=i.Children.map(e,e=>d.isReactChild(e)&&d.isReactElement(e)?h(e.type,e.props,t):{width:0,height:0});return n&&o.splice(n.index,0,...n.sizes),o};t.calcMinChildSizes=g;t.calcChildSizes=(e,t,n,o)=>{const r=i.Children.map(e,e=>d.isReactChild(e)&&d.isReactElement(e)?u(e.type,e.props,t,n):{width:0,height:0});return o&&r.splice(o.index,0,...o.sizes),r};const m=(e=[],t,n)=>{const{direction:i,gap:o}=t,r="horizontal"===i;let s=0,a=0;if(e.forEach((e,t)=>{if(-1!==n.indexOf(t))return;const{width:i,height:o}=e;r?(s+=i,o>a&&(a=o)):(a+=o,i>s&&(s=i))}),v(t.distribution)){const t=Math.max(0,e.length-1-n.length);r?s+=t*o:a+=t*o}const l=f(t);return{width:s+l.width,height:a+l.height}};t.calcAutoSize=m;const f=e=>e.paddingPerSide?(({paddingTop:e,paddingRight:t,paddingBottom:n,paddingLeft:i})=>({width:i+t,height:e+n}))(e):(({padding:e})=>({width:2*e,height:2*e}))(e);t.calcPaddingSize=f;const y=new Set(["start","center","end"]),v=e=>y.has(e);t.calcChildFractions=e=>{const t={width:0,height:0};return i.Children.forEach(e,e=>{if(!d.isReactChild(e)||!d.isReactElement(e)||!1===e.props.visible)return;const n=e.props.constraints&&e.props.constraints.width||e.props.width,i=e.props.constraints&&e.props.constraints.height||e.props.height;if("string"==typeof n&&n.endsWith("fr")){const e=parseFloat(n);o.isFiniteNumber(e)&&(t.width+=e)}if("string"==typeof i&&i.endsWith("fr")){const e=parseFloat(i);o.isFiniteNumber(e)&&(t.height+=e)}}),t};t.calcFreeSpace=(e,t,n,i)=>{const o="horizontal"===i.direction,r=n;let s=Math.max(0,e.width-t.width),a=Math.max(0,e.height-t.height);const l=f(i);return o?a=n.height*(e.height-l.height):s=n.width*(e.width-l.width),{freeSpaceInParent:{width:s,height:a},freeSpaceUnitDivisor:r}};t.calcChildLayoutRects=(e=[],t,n,i)=>{const o=e.length;if(0===o)return[];const{direction:r,alignment:a}=n,l="vertical"===r,c="auto"===(l?n.height:n.width)?"start":n.distribution,{width:d,height:u}=t;let h=0;const p=e.map((e,t)=>{-1===i.indexOf(t)&&(h+=l?e.height:e.width);const n=Object.assign({},e,{x:0,y:0});switch(a){case"center":l?n.x=d/2-e.width/2:n.y=u/2-e.height/2;break;case"end":l?n.x=d-e.width:n.y=u-e.height}return n}),g=l?u:d,m=i.length,f=v(n.distribution)&&n.gap||0;let y=0;switch(c){case"center":h+=Math.max(o-1-m,0)*f,y=g/2-h/2;break;case"end":h+=Math.max(o-1-m,0)*f,y=g-h}const k=Math.max(g,h)-h,S=b(n);let C=0,x=0;return p.map((e,t)=>{let n,r;if(-1!==i.indexOf(t))return x++,e;switch(t-=x,c){case"start":case"center":case"end":n=y+C+t*f,l?e.y=n:e.x=n;break;case"space-between":n=C+k/Math.max(1,o-m-1)*t,l?e.y=n:e.x=n;break;case"space-around":n=C+(r=k/(2*(o-m)))*t+r*(t+1),l?e.y=n:e.x=n;break;case"space-evenly":n=C+(r=k/(o-m+1))*(t+1),l?e.y=n:e.x=n}return C+=l?e.height:e.width,e.x+=S.x,e.y+=S.y,s.Rect.pixelAligned(e)})};const b=e=>e.paddingPerSide?{x:e.paddingLeft,y:e.paddingTop}:{x:e.padding,y:e.padding},k=(e,t)=>{const n=o.ConstraintValues.fromProperties(e);return o.ConstraintValues.toRect(n,e.parentSize||null,t,!0)};t.calcStackRect=k;t.calcUpdatedStackComponentSize=(e,t)=>{const n=k(e,null);let i=t.size;const o={width:n.width,height:n.height},{target:s}=c.RenderEnvironment;return i?r.isAnimatable(i.width)&&r.isAnimatable(i.height)?(i.width.set(o.width),i.height.set(o.height)):i=o:i=s===c.RenderTarget.preview?a.ObservableObject(o,!0):o,i}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.warn=function warn(e,t){console.log("%c Loader: %c "+e,"color: white; font-weight: bold; background-color: #EE4444; border-radius: 5px; padding: 2px 5px","color: #EE4444"),t&&console.warn(t)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(98),o=n(127);t.borderPropsForNode=function borderPropsForNode(e){if(!i.hasBorder(e)||1!==e.borderEnabled)return{};let t,n=e.borderWidth,r=e.borderWidth,s=e.borderWidth,a=e.borderWidth;return o.hasBorderPerSide(e)&&e.borderPerSide&&(n=e.borderTop,r=e.borderBottom,s=e.borderLeft,a=e.borderRight),0===n&&0===r&&0===s&&0===a?{}:{borderWidth:t=n===r&&n===s&&n===a?n:{top:n,right:a,bottom:r,left:s},borderStyle:e.borderStyle,borderColor:e.borderColor}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(376);t.collectBoxShadowPropsForNode=function collectBoxShadowPropsForNode(e,t){const n=i.wantsFilterShadow(e);e.boxShadows&&(t.shadows=e.boxShadows.toArray().filter(e=>!(n&&!e.inset)&&e.enabled))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(1),o=n(37);t.styledTextDefaults={styledText:new o.StyledTextDraft};const r="styledText";function withStyledText(e){return r in e}t.withStyledText=withStyledText,t.collectTextStyleForNode=function collectTextStyleForNode(e,t){if(!withStyledText(e))return;const n=e.styledText,o=n.styledText.getCurrentContent().getFirstBlock().getInlineStyleAt(0),r=i.draftStyleFunction(o),s=n.alignment(),a=s?{textAlign:s}:{};Object.assign(t,r,a)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(27),o=n(11),r=n(192);!function(e){e.sourcePaths=function sourcePaths(e){const t=[];for(const n of e){if(!i.hasShape(n))continue;const e=n.calculatedPaths(),r=o.convertPathToParent(n,e);t.push(r)}return t},e.executePathBoolean=function executePathBoolean(e,t){return r.getPathOperator().booleanJoin(e,t)}}(t.CompoundShape||(t.CompoundShape={}))},function(e,t,n){"use strict";function safeName(e){return e&&0!==e.length?(e.match(/^[0-9]/)&&(e="$"+e),0===(e=e.replace(/^[^A-Za-z_$]+/,"_").replace(/[^A-Za-z0-9_$]+/g,"_")).length?null:e):null}function upperCaseFirstChar(e){if(0===e.length)return e;const t=e[0],n=t.toUpperCase();return t===n?e:n+e.slice(1)}Object.defineProperty(t,"__esModule",{value:!0}),t.safeName=safeName,t.safeComponentName=function safeComponentName(e){return upperCaseFirstChar(safeName(e)||"Component")},t.upperCaseFirstChar=upperCaseFirstChar,t.idToReactId=function idToReactId(e){return"id_"+e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function modulate(e,t,n,i){const o=t[0],r=t[1],s=n[0],a=n[1];if(0==r-o)return(a+s)/2;if(0==a-s)return s;const l=s+(e-o)/(r-o)*(a-s);if(i)if(s<a){if(l<s)return s;if(l>a)return a}else{if(l>s)return s;if(l<a)return a}return l}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(4),o=n(618),r=n(89),s=n(134),a=n(135),l=n(36);t.default=class RectangleShapeNode extends(s.withFrameForShape(a.withBaseShapeTraits(i.CanvasNode))){constructor(e){super(),l.setDefaults(this,o.RectangleShapeRecord,e),delete this.children}calculatedPaths(){return r.BasicShape.calculatedPath(this)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(4),o=n(198),r=n(89),s=n(134),a=n(135),l=n(36);t.isOvalShapeNode=function isOvalShapeNode(e){return e instanceof OvalShapeNode};class OvalShapeNode extends(s.withFrameForShape(a.withBaseShapeTraits(i.CanvasNode))){constructor(e){super(),l.setDefaults(this,o.ShapeNodeRecord,e),delete this.children}calculatedPaths(){return r.BasicShape.calculatedPath(this)}}t.default=OvalShapeNode},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(4),o=n(89),r=n(134),s=n(135),a=n(619),l=n(36);t.default=class StarShapeNode extends(r.withFrameForShape(s.withBaseShapeTraits(i.CanvasNode))){constructor(e){super(),l.setDefaults(this,a.StarShapeRecord,e),delete this.children}calculatedPaths(){return o.BasicShape.calculatedPath(this)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(4),o=n(89),r=n(134),s=n(135),a=n(620),l=n(36);t.default=class PolygonShapeNode extends(r.withFrameForShape(s.withBaseShapeTraits(i.CanvasNode))){constructor(e){super(),l.setDefaults(this,a.PolygonShapeRecord,e),delete this.children}calculatedPaths(){return o.BasicShape.calculatedPath(this)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.polygonDefaults={polygonSides:6};const i="polygonSides";function hasPolygon(e){return i in e}t.hasPolygon=hasPolygon,t.reducePolygon=function reducePolygon(e,t){hasPolygon(e)&&(void 0===t.polygonSides?t.polygonSides=e.polygonSides:null!==t.polygonSides&&t.polygonSides!==e.polygonSides&&(t.polygonSides=null))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(1),o=n(24),r=n(22),s=n(375),a=n(1),l=n(34),c=n(50),d=n(16);function getChildrenRects(e,t,n){const d=e.children;if(!d||!r.isCodeComponentNode(e))return null;const u=o.componentLoader.componentForIdentifier(e.codeComponentIdentifier);if(u&&u.class&&i.providesChildLayout(u.class)){const o=e.tree(),r=invisibleChildIndexes(e,n),h=o.getParentSize(e),p=i.toPaddingSize(u.class,e.codeComponentProps),g=e.minSize(h),m=i.Size.subtract(g,p),f=d.map(e=>(e.cache.parentDirected=!0,s.toMinSize(e,m)));n&&f.splice(n.index,0,...n.sizes);const y=a.toAutoSize(u.class,f,e.codeComponentProps,r),{parentDirectedRect:v}=e.cache,b=v||e.size(h,null),k=function collectFractions(e){const t={width:0,height:0};return e.forEach(e=>{e.visible&&l.isPinnable(e)&&c.hasSize(e)&&(e.widthType===i.DimensionType.FractionOfFreeSpace&&(t.width+=e.width),e.heightType===i.DimensionType.FractionOfFreeSpace&&(t.height+=e.height))}),t}(d),S=i.toFreeSpace(u.class,b,y,k,e.codeComponentProps),C=i.Size.subtract(b,p),x=d.map(e=>s.toSize(e,C,S,t));return n&&x.splice(n.index,0,...n.sizes),u.class.childLayoutRects(x,C,e.codeComponentProps,r)}return null}function invisibleChildIndexes(e,t){const n=[];if(!d.hasChildren(e))return n;for(let i=0,o=e.children.length;i<o;i++){if(e.children[i].visible)continue;let o=i;t&&t.index<=i&&(o+=t.sizes.length),n.push(o)}return n}t.getChildrenRects=getChildrenRects,t.getLiveSortingRects=function getLiveSortingRects(e,t){if(!d.hasChildren(e))return null;const n=[];for(let o=0,r=e.children.length+1;o<r;o++){const r=getChildrenRects(e,!1,{index:o,sizes:t});if(!r||0===r.length)return null;const s=r.splice(o,t.length),a=i.Rect.merge(...s);n.push(a)}return n},t.childrenRectsById=function childrenRectsById(e,t){const n=e.children;if(!n)return;const i=getChildrenRects(e,t);if(!i)return;const o={};return n.forEach((e,t)=>{o[e.id]=i[t]}),o},t.invisibleChildIndexes=invisibleChildIndexes},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});let i,o=0;function isHiddenCheckBudget(){if(++o>100)throw Error("property hidden() check code execution limit exceeded")}function restoreBudgetCheck(){i&&(window.__checkBudget__=i)}t.isHidden=function isHidden(e,t){if(!e.hidden)return!1;try{!function installHiddenBudgetCheck(){o=0,window.__checkBudget__!==o&&(i=window.__checkBudget__,window.__checkBudget__=isHiddenCheckBudget)}();const r=!!e.hidden(t.codeComponentProps);return restoreBudgetCheck(),r}catch(n){return restoreBudgetCheck(),!1}}},function(e,t,n){"use strict";var i;Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.fromFrame=e=>{const t=[],n=[0,.5,1];for(const i of n)for(const o of n)t.push({x:o*e.width,y:i*e.height,fx:o,fy:i});return t}}(i||(i={})),t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(6);var o;!function(e){e[e.Canvas=0]="Canvas",e[e.Artboards=1]="Artboards",e[e.Selection=2]="Selection"}(o=t.ExportMode||(t.ExportMode={}));t.StatusStore=class StatusStore{constructor(e){this.addChanges=e,this.exportWork=0,this.exportProgress=0,this.lastExportMode=o.Selection}setExportProgress(e,t){this.exportWork===e&&this.exportProgress===t||(this.exportWork=e,this.exportProgress=t,this.addChanges(i.EngineChangeFlags.ExportStatus))}setLastExportMode(e){this.lastExportMode!==e&&(this.lastExportMode=e,this.addChanges(i.EngineChangeFlags.ExportStatus))}}},function(e,t,n){"use strict";function deepClone(e){if(null===e)return e;if(Array.isArray(e))return function cloneArray(e){return e.map(deepClone)}(e);if(function isObject(e){return"object"==typeof e}(e)){if(e.constructor!==Object)throw Error("only able to clone object literals");return function cloneObject(e){const t={},n=Object.keys(e);for(const i of n)t[i]=deepClone(e[i]);return t}(e)}return e}Object.defineProperty(t,"__esModule",{value:!0}),t.deepClone=deepClone},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(15),o=n(14);let r=!1;t.documentChanged=()=>{!1===r&&(r=!0,i.getIpcRenderer().send(o.DocumentDirty))},t.documentClean=()=>{r=!1}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(187),r=n(393),s=n(390);function isActiveDragSession(e,t){return!!t&&e===t}const a=new class DragDataTransferManager{constructor(){this.activeDragSession=null,this.activeDroppable=null,this.droppables={},this.setDraggingOver=(e,t)=>{if(!e)return;const n=this.droppables[e];if(!n)return;const{onDragLeave:i,onDragEnter:o}=n.mutablePropsRef.current;!t&&i&&i(),t&&o&&o()},this.setActiveDroppable=e=>{e!==this.activeDroppable&&(this.setDraggingOver(this.activeDroppable,!1),this.setDraggingOver(e,!0),this.activeDroppable=e)},this.finishDrag=()=>{this.setActiveDroppable(null),this.activeDragSession=null},this.dragSessionStart=()=>(this.activeDragSession=o(),s.displayDragOverlay(!0),this.activeDragSession),this.dragSessionChange=(e,t)=>{if(!isActiveDragSession(e,this.activeDragSession))return;const{dataTransfer:n}=t,i=Object.values(this.droppables).find(e=>{if(!e)return!1;if(!1===e.mutablePropsRef.current.enabled)return!1;if(!e.dataTypes.some(e=>n.types.includes(e)))return!1;const i=e.getBoundingClientRect();return!!i&&r.pointInClientRect(t.client,i)}),o=i?i.id:null;if(this.setActiveDroppable(o),n.dropEffectCursor=void 0,n.dropEffect="none",i){const{onDragOver:e,dropEffect:o}=i.mutablePropsRef.current;if(n.dropEffect=o||"move",!e)return;const r=i.getBoundingClientRect();if(!r)return;e(Object.assign({},t,{clientRect:r}))}},this.dragSessionEnd=(e,t)=>{if(!isActiveDragSession(e,this.activeDragSession))return;if(s.displayDragOverlay(!1),t.cancelled)return t.dataTransfer.dropEffect="none",void this.finishDrag();const n=this.activeDroppable?this.droppables[this.activeDroppable]:void 0;if(this.finishDrag(),n){const e=n.getBoundingClientRect();if(!e)return;n.mutablePropsRef.current.onDrop(Object.assign({},t,{clientRect:e}))}},this.registerDroppable=e=>{this.droppables[e.id]=e},this.unregisterDroppable=e=>{delete this.droppables[e]}}dragSessionActive(){return!!this.activeDragSession}};t.dragSessionActive=function dragSessionActive(){return a.dragSessionActive()},t.dragDataTransferContext=i.createContext(a)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(187),r=n(636),s=n(386),a=n(637),l=n(200),c=n(638);function moveListItem(e,t,n){return e.splice(n,0,e.splice(t,1)[0]),e}function dragAndDropIndex(e){return{dragIndex:e?e.index:null,dropIndex:e?e.dropIndex:null}}function draggedItemRect(e){if(!a.isSortableItemElement(e))return null;if(!(e.firstChild instanceof HTMLDivElement))return null;const{offsetLeft:t,offsetTop:n,offsetWidth:i,offsetHeight:o}=e.firstChild;return{x:t,y:n,width:i,height:o}}t.Sortable=function Sortable(e){const{items:t,keyForItem:n,children:o,header:d,footer:u,enabled:h,style:p}=e,g=i.useRef(e);g.current=e;const m=r.useForceUpdate(),f=i.useRef(null),y=function getIsRemovingItem(e,t){return!!e.removeItem&&!!t&&null!==t.index&&null===t.dropIndex}(e,f.current),v=s.useAutoSizeTransition({dependencies:[t.length,y]}),{getKey:b,moveKey:k,removeKey:S}=function useKey(e){const t=i.useRef();return t.current||(t.current=new SortableKeys),{getKey:(n,i)=>e?e(n,i):t.current.getKey(n,i),moveKey:(e,n)=>{t.current.moveKey(e,n)},removeKey:e=>{t.current.removeKey(e)}}}(n),C=[f.current,v.current],x=i.useCallback((e,t)=>{g.current.onDragStart&&g.current.onDragStart(e);const n=function getInsertionRects(e,t){const n=[],i=e.current;if(!i)return n;const o=a.isSortableItemElement(i.firstChild)?t:t+1,r=i.childNodes[o],s=[...i.childNodes];if(!(r instanceof HTMLDivElement))return n;const l=r.nextSibling;let c=!1;if(s.forEach((e,t)=>{if(e===r)return;if(!a.isSortableItemElement(e)){if(0===t)return;c=!0}i.insertBefore(r,e);const o=draggedItemRect(r);o&&n.push(o)}),!c){i.insertBefore(r,null);const e=draggedItemRect(r);e&&n.push(e)}if(i.insertBefore(r,l),0===n.length){const e=draggedItemRect(r);e&&n.push(e)}return n}(v,t);0!==n.length&&(f.current={index:t,dropIndex:t,insertionRects:n},m())},C),w=i.useCallback(e=>{if(!f.current||!v.current)return;let t;(t=function isOutsideElement(e,t){const{top:n,left:i,width:o,height:r}=t.getBoundingClientRect(),{x:s,y:a}=e;return s<i||s>i+o||a<n||a>n+r}(e.client,v.current)?g.current.removeItem?null:f.current.index:function insertionIndex(e,t,n){const{top:i,left:o}=t.getBoundingClientRect(),r=e.x-o,s=e.y-i;return function closestRectIndex(e,t){let n=1/0,i=0;return e.forEach((e,o)=>{const r=c.Rect.center(e),s=l.Point.distance(r,t);s<n&&(n=s,i=o)}),i}(n.insertionRects,{x:r,y:s})}(l.Point.add(e.client,e.centerOfGravityOffset),v.current,f.current))!==f.current.dropIndex&&(f.current.dropIndex=t,m())},C),T=i.useCallback(e=>{f.current&&e.cancelled&&(f.current.dropIndex=f.current.index,m())},C),P=i.useCallback(()=>{const{dragIndex:e,dropIndex:t}=dragAndDropIndex(f.current);if(null!==e)if(f.current=null,null!==t){if(e===t)return;g.current.moveItem(e,t),k(e,t)}else g.current.removeItem&&(g.current.removeItem(e),S(e))},C),E=i.useCallback(()=>f.current?{opacity:null===f.current.dropIndex?.3:.8}:null,C),F=i.useCallback(()=>{if(!f.current||!v.current)return null;const{dropIndex:e}=dragAndDropIndex(f.current);if(null===e)return{opacity:0};const{top:t,left:n}=v.current.getBoundingClientRect(),i=f.current.insertionRects[e];return{x:n+i.x,y:t+i.y,scale:1,opacity:1}},C),M=i.useCallback(e=>o({item:t[e],index:e,isDragPreview:!0}),[t,o]);return i.createElement("div",{ref:v,style:Object.assign({position:"relative",boxSizing:"border-box"},p)},d,function sortedItems(e,t,n){const{dragIndex:i,dropIndex:o}=dragAndDropIndex(t),r=e.map((e,t)=>({item:e,index:t,visible:!n||t!==i}));return null===i?r:i===o?r:null===o?r:moveListItem(r,i,o)}(t,f.current,y).map((e,t)=>i.createElement(a.SortableItem,{key:b(e.item,e.index),enabled:h,index:e.index,sortIndex:t,visible:e.visible,isRemovingItem:y,onDragStart:x,onDrag:w,onDragEnd:T,onDropAnimationEnd:P,dragProperties:E,dropAnimationProperties:F,customDragPreview:M},o({item:e.item,index:e.index,isDragPreview:!1}))),u)};class SortableKeys{constructor(){this.keys=[],this.getKey=(e,t)=>{let n=this.keys[t];return n||(n=o(),this.keys[t]=n),n},this.addKey=e=>{const t=[...this.keys];t.splice(e,0,o()),this.keys=t},this.moveKey=(e,t)=>{this.keys=moveListItem(this.keys,e,t)},this.removeKey=e=>{const t=[...this.keys];t.splice(e,1),this.keys=t}}}t.SortableKeys=SortableKeys},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(1),r=n(9),s=n(26),a=n(44),l=n(140),c=n(20),d=n(49),u=n(12),h=n(45),p=n(5),g=n(399),m=n(141),f=n(172),y=n(173),v=n(269),b=n(171),k=n(93),S=n(402),C=n(13),x=n(101),w=n(46);class HighlightTool extends c.VekterTool{constructor(){super(...arguments),this.enum=p.Tools.Highlight,this.displaySelectionBox=!0,this.displaySelectionHandles=!0,this.onKeyDown=e=>{const t=this.engine,{selectedGuide:n}=t.toolStore.state,{displayRulers:i}=this.engine.persistedUserDefaults,{selection:o}=t;i&&n?this.handleKeyEventOnGuide(e,n):this.handleKeyEventOnNode(e,o)},this.isMouseOnRulers=e=>{const{mouseOnCanvas:t}=this.engine,{displayRulers:n}=this.engine.persistedUserDefaults;return n&&t&&(e.x<C.layout.currentChromeMarginLeft+C.layout.rulerWidth||e.y<C.layout.currentCanvasMarginTop+C.layout.rulerWidth)},this.handleMouseOnRulers=()=>{const{mouseDown:e}=this.engine;e?(this.engine.clearSelection(),this.selectGuide(),this.engine.setTool(new S.GuideMoveTool)):(this.engine.setCursor(w.addCursor()),this.engine.setHighlight(),this.highlightGuide())},this.handleMouseOnGuide=e=>{const{mouseDown:t}=this.engine;if(t)this.engine.clearSelection(),this.selectGuide(e),this.engine.setTool(new S.GuideMoveTool);else{const t="x"===e.axis?"ew-resize":"ns-resize";this.engine.setCursor(t),this.highlightGuide(e)}},this.handleMouseOnSelectableTopNode=e=>{const{mouseDown:t,selection:n,shiftKey:i}=this.engine;if(t){const t=e.id,o=-1!==n.indexOf(t);if(i){if(o&&1===n.length)return;this.engine.toggleSelection([t])}else!1===o&&(this.engine.setSelection([t]),this.engine.setHighlight());this.engine.setTool(new y.MoveTool)}else this.engine.setHighlight(e.id)},this.handleMouseOnVoid=()=>{const{mouseDown:e,shiftKey:t}=this.engine;e?(t||(this.engine.clearSelection(),this.selectGuide()),this.engine.setTool(new v.SelectTool)):(this.engine.clearCursor(),this.engine.setHighlight(),this.highlightGuide())},this.handleKeyEventOnGuide=(e,t)=>{const{keyCode:n,metaKey:i,shiftKey:o}=e;if(n===a.default.Key.escape)this.selectGuide();else if(8!==n&&46!==n||i){if(n>=37&&n<=40){const i=this.getDelta(n,o);i&&(this.moveSelectedGuide(t,i),e.preventDefault())}}else this.deleteAction(),e.preventDefault();e.stopPropagation()},this.handleKeyEventOnNode=(e,t)=>{const{keyCode:n}=e,i=this.engine,{tree:r}=i,l=r.withoutDescendants(r.getNodes(t));if(n===a.default.Key.escape){const e=l.map(e=>{const t=r.getParent(e.id);return t?t.id:null}),t=s.commonValue(e);if(t)return i.setHighlight(null),void i.setSelection([t]);i.setShapeModeActive(!1),i.setHighlight(null),i.clearSelection()}if(8!==n&&46!==n||e.metaKey||(this.deleteAction(),e.preventDefault()),n>=37&&n<=40){const t=this.getDelta(n,e.shiftKey);!t||e.altKey&&e.metaKey||(e.metaKey?m.updateNodeSizeForEach(i,l,e=>{const n={};return void 0!==t&&(void 0!==t.x&&(n.width=e.width+t.x),void 0!==t.y&&(n.height=e.height+t.y)),n}):m.updateNodeFrameForEach(r,i,l,e=>o.Rect.offset(e,t)),e.preventDefault())}if(e.metaKey||e.ctrlKey)return;let c;if(n>=48&&n<=57&&(c=n-48),n>=96&&n<=105&&(c=n-96),void 0!==c){let n=10*c;void 0!==this.lastNumberKey&&(n=10*this.lastNumberKey+c),this.lastNumberKey=c,setTimeout(()=>{this.lastNumberKey=void 0},300),i.beginUndoGroup();const s=r.getNodes(t);e.shiftKey?h.traitFilter(s,d.hasFill).forEach(e=>{if(!e.fillColor)return;const t=k.computeColor(e.fillColor,r),s=this.newOpacity(n/100,o.ConvertColor.getAlpha(t));o.isFiniteNumber(s)&&i.updateNode(e.id,{fillColor:o.ConvertColor.setAlpha(e.fillColor,s)})}):s.forEach(e=>{const t=this.newOpacity(n/100,e.opacity);void 0!==t&&i.updateNode(e.id,{opacity:t})}),i.endUndoGroup(),e.stopPropagation()}},this.getSelectableTopNodeAtPoint=e=>{const{tree:t,zoom:n,selection:i,cmdKey:o}=this.engine,r=this.engine.canvasStore.getCanvasVisibleRect(),s=t.getNodesAtPoint(e,!0,n<4,r).filter(e=>b.default(e,this.engine,i,o||this.enum===p.Tools.DirectSelect));return t.getTopMostChildNode(s)},this.canDelete=()=>{const{selectedGuide:e}=this.engine.toolStore.state;if(e)return!0;const{tree:t,selection:n}=this.engine;return t.getNodes(n).some(e=>!u.isReplicaChild(e))},this.deleteAction=()=>{const{selectedGuide:e}=this.engine.toolStore.state;if(e)return void this.deleteSelectedGuide(e);const t=this.engine,{tree:n,selection:i}=t,o=n.withoutDescendants(n.getNodes(i)).filter(e=>!u.isReplicaChild(e)).map(e=>e.id);t.deleteNodes(o),t.clearSelection()},this.selectGuide=(e=null)=>{const{displayRulers:t}=this.engine.persistedUserDefaults;t&&(this.engine.toolStore.setSelectedGuide(e),e&&(this.engine.selection.length&&this.engine.clearSelection(),this.engine.highlight&&this.engine.setHighlight()))},this.highlightGuide=(e=null)=>{const{displayRulers:t}=this.engine.persistedUserDefaults;if(t)if(e){const{selectedGuide:t}=this.engine.toolStore.state;if(t&&x.isEqualGuide(e,t))return;this.engine.toolStore.setHighlightedGuide(e),this.engine.setHighlight()}else this.engine.toolStore.setHighlightedGuide()},this.deleteSelectedGuide=e=>{const t=x.getGuideNode(this.engine.tree,e);if(!t)return;const n=x.getGuides(t,e.axis);this.engine.updateNode(t.id,{[x.getGuidesKey(e.axis)]:n.delete(e.offset)}),this.engine.toolStore.setSelectedGuide(),r.triggerRulersDeleteGuideEvent({guideSelector:`${t.id}-${e.axis}-${e.offset}`,method:"menu"})},this.moveSelectedGuide=(e,t)=>{const n=x.getGuideNode(this.engine.tree,e),i=t[e.axis];if(n&&i){const t=e.offset+i,o=x.getGuidesKey(e.axis),s=x.getGuides(n.futureOrCurrent(),e.axis),{ghostGuide:a}=this.engine.toolStore.state;let l;x.isEqualGuide(a,e)?(l=s.add(t),this.engine.toolStore.setGhostGuide()):l=s.delete(e.offset).add(t),this.engine.updateNode(n.id,{[o]:l}),r.triggerRulersMoveGuideEvent({guideSelector:`${n.id}-${e.axis}-${t}`,method:"keyboard"});const c=Object.assign({},e,{offset:t});this.engine.toolStore.setSelectedGuide(c),s.has(t)&&this.engine.toolStore.setGhostGuide(c)}},this.getDelta=(e,t)=>{let n;const i=t?10:1;return 37===e&&(n={x:-i}),38===e&&(n={y:-i}),39===e&&(n={x:i}),40===e&&(n={y:i}),n}}start(){this.update()}stop(){}update(){const{mouse:e,mouseRaw:t,mouseDown:n,spacebarDown:i,tree:o,altKey:r,cmdKey:s,zoom:a}=this.engine,{middleMouseButtonDownRaw:c}=this.engine.mouseStore,d=this.engine.previousInputState;if(i||c)return void this.engine.setTool(new f.PanTool);const u=l.default(e,d.mouse)||d.cmdKey!==s||d.altKey!==r||d.mouseDown!==n;if(!e||!u)return;const h=s,g=!s;if(this.enum===p.Tools.Highlight&&h)return void this.engine.setToolEnum(p.Tools.DirectSelect);if(this.enum===p.Tools.DirectSelect&&g)return void this.engine.setToolEnum(p.Tools.Highlight);const{displayRulers:m}=this.engine.persistedUserDefaults;if(m){const n=x.closestGuideInRange(o,e,a);if(n)return void this.handleMouseOnGuide(n);if(this.isMouseOnRulers(t))return void this.handleMouseOnRulers()}this.engine.clearCursor();const y=this.getSelectableTopNodeAtPoint(e);y?this.handleMouseOnSelectableTopNode(y):this.handleMouseOnVoid()}newOpacity(e,t){if(void 0===t)return;let n=e;return t<1&&0===e&&(n=1),n}}t.HighlightTool=HighlightTool;t.DirectSelectTool=class DirectSelectTool extends HighlightTool{constructor(){super(...arguments),this.enum=p.Tools.DirectSelect}};t.Highlight=class Highlight extends i.Component{render(){const{altKey:e}=this.props,{selectedGuide:t,highlightedGuide:n}=this.props.myTool.engine.toolStore.state;return i.createElement("div",null,e?i.createElement(g.default,Object.assign({},this.props,{selectedGuide:t,highlightedGuide:n})):null)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(1),r=n(3),s=n(140),a=n(20),l=n(92),c=n(5),d=n(75),u=n(108),h=n(171);t.SelectTool=class SelectTool extends a.VekterTool{constructor(){super(...arguments),this.enum=c.Tools.Select,this.wantsAutoscrolling=!0,this.selectableNodeCache=null,this.mouseDidMove=!1,this.displaySelectionBox=!0}start(){this.selectionAtStart=this.engine.selection,this.canvasGroundNodes=this.engine.tree.getGroundNodesOfType(l.default)}stop(){}update(){const{mouseDown:e,mouse:t,tree:n,altKey:i,shiftKey:r,cmdKey:a}=this.engine,l=this.engine.previousInputState;if(!e)return!this.mouseDidMove&&this.engine.setShapeModeActive&&this.engine.setShapeModeActive(!1),this.engine.exitTool();const c=s.default(l.mouse,t),d=l.altKey!==i,p=l.shiftKey!==r,g=l.cmdKey!==a;if(e&&t&&(c||d||p||g)){this.mouseDidMove=!0;const s=o.Rect.fromTwoPoints(e,t),l=n.getNodesInRect(s,!i);l.length>0&&!this.selectableNodeCache&&(this.selectableNodeCache=h.buildSelectableNodeCache(this.engine));const c=new Set;l.forEach(e=>{h.isSelectableInFrame(e,this.engine,a,this.selectableNodeCache)&&c.add(e.id)}),this.canvasGroundNodes.forEach(e=>{this.engine.shapeModeActive||o.Rect.containsRect(s,n.getRect(e))&&c.add(e.id)});let d=Array.from(c);if(r){const e=u.intersection(d,this.selectionAtStart);d=u.union(d,this.selectionAtStart),d=u.without(d,e)}this.engine.setSelection(d)}}};t.Select=class Select extends i.Component{render(){const{mouseDown:e,mouse:t,zoom:n}=this.props;if(!e||!t)return null;const s=o.Rect.fromTwoPoints(e,t);return i.createElement("div",null,i.createElement(d.default,{frame:o.Rect.multiply(s,n),backgroundColor:r.theme.selectionBox,borderColor:r.theme.selectionBoxOutline,borderWidth:1}))}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(9),r=n(1),s=n(44),a=n(20),l=n(4),c=n(4),d=n(16),u=n(40),h=n(5),p=n(654),g=n(204),m=n(43);class CreateFrameBaseTool extends a.VekterTool{constructor(){super(...arguments),this.wantsAutoscrolling=!0,this.helper=new g.CreateToolHelper,this.drawingDidStart=!1,this.onDragStart=()=>{this.drawingDidStart=!0},this.onKeyDown=e=>{const t=this.engine,{keyCode:n}=e;n===s.default.Key.escape&&this.enum===h.Tools.CreateShapeContainer&&t.setShapeModeActive(!1)}}start(){this.helper.nodeClass=c.FrameNode,this.helper.highlightParent=!0,this.helper.dragStart=this.onDragStart,this.helper.supportsAspectRatioLock=this.enum!==h.Tools.CreateShapeContainer,this.helper.roundedRect=this.enum===h.Tools.CreateRoundedFrame,this.helper.start(this),this.engine.setCursor("crosshair")}stop(){this.helper.stop(this),this.engine.clearCursor(),this.snapper.stop()}update(){this.helper.update(this)}create(e,t,n,i,s){const{tree:a}=this.engine;if(i=Object.assign({},i,{top:n.y,left:n.x,width:n.width,height:n.height}),this.helper.topLevel||this.enum===h.Tools.CreateShapeContainer||(i.rotation=s),0===i.width||0===i.height)return void this.engine.exitTool();this.engine.beginUndoGroup();let p=[];if(t){const e=a.getNode(t);if(e){const t=a.getRect(e),o=u.guessConstrainedFrame(n,t);i=Object.assign({},i,o),d.hasChildren(e)&&(p=e.children)}}else p=a.getGroundNodes();const g=t===c.NullID;this.enum===h.Tools.CreateShapeContainer?(i.fillEnabled=!1,this.engine.createShapeContainer(t,i),o.triggerLayoutGraphicEvent({source:"draw"})):(i.clip=g,i.fillColor="rgba(0, 153, 255, 0.5)",this.enum===h.Tools.CreateFrame&&g?i.fillColor="white":this.enum===h.Tools.CreateRoundedFrame&&(this.engine.shiftKey?(i.radius=50,i.radiusIsRelative=!0):i.radius=Math.min(n.width,n.height)),this.engine.createFrame(t,i),o.triggerLayoutFrameEvent({source:"draw"}),p.forEach(i=>{const o=a.getRect(i);if((!l.isDrawableNode(i)||!i.locked)&&r.Rect.containsRect(n,o)){const n=t?this.engine.getNode(t):null,o=a.getNode(e),r=m.ContextAction.convertNodeToNewParentUpdate(a,i,n,o);this.engine.moveNode(i.id,e),this.engine.updateNode(i.id,r)}})),this.engine.setSelection([e]),this.engine.endUndoGroup(),this.engine.exitTool(),this.enum===h.Tools.CreateShapeContainer&&this.engine.setShapeModeActive(!0)}}t.CreateFrameTool=class CreateFrameTool extends CreateFrameBaseTool{constructor(){super(...arguments),this.enum=h.Tools.CreateFrame}};t.CreateRoundedFrameTool=class CreateRoundedFrameTool extends CreateFrameBaseTool{constructor(){super(...arguments),this.enum=h.Tools.CreateRoundedFrame}};t.CreateShapeContainerTool=class CreateShapeContainerTool extends CreateFrameBaseTool{constructor(){super(...arguments),this.enum=h.Tools.CreateShapeContainer}};t.CreateFrame=class CreateFrame extends i.Component{render(){return i.createElement("div",null,this.props.myTool.drawingDidStart||this.props.myTool.enum!==h.Tools.CreateFrame?null:i.createElement(p.default,Object.assign({},this.props,this.state)),i.createElement(g.Create,Object.assign({},this.props)))}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(1);t.isValidPropertyValue=function isValidPropertyValue(e,t){switch(e){case i.ControlType.Boolean:return!0===t||!1===t;case i.ControlType.Number:return i.isFiniteNumber(t);case i.ControlType.String:case i.ControlType.Enum:case i.ControlType.SegmentedEnum:case i.ControlType.Color:case i.ControlType.Image:case i.ControlType.File:case i.ControlType.ComponentInstance:return"string"==typeof t;case i.ControlType.FusedNumber:return"object"==typeof t;default:return!1}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(9),r=n(1),s=n(14),a=n(15),l=n(20),c=n(2),d=n(5),u=n(207);t.ZoomTool=class ZoomTool extends l.VekterTool{constructor(){super(...arguments),this.enum=d.Tools.Zoom,this.wantsAutoscrolling=!0,this.blurHandler=c.default.wrapHandler(()=>{this.exit()}),this.onKeyUp=e=>{"Z"===String.fromCharCode(e.which)&&this.exit()}}start(){a.getIpcRenderer().send(s.DocumentKeepMouseCursorVisible,!0),this.updateCursor(this.engine.altKey),window.addEventListener("blur",this.blurHandler)}stop(){window.removeEventListener("blur",this.blurHandler),this.engine.clearCursor(),a.getIpcRenderer().send(s.DocumentKeepMouseCursorVisible,!1)}update(){const{mouseDown:e,mouseRaw:t,mouseDownRaw:n,altKey:i}=this.engine,s=this.engine.previousInputState;i!==s.altKey&&this.updateCursor(i),t&&n&&r.Point.distance(t,n)>10?this.pathEngine?this.pathEngine.setPathTool(new u.ZoomSelectTool):this.engine.setTool(new u.ZoomSelectTool):s.mouseDown&&!e&&(i?this.engine.canvasStore.zoomOut(s.mouseDown):this.engine.canvasStore.zoomIn(s.mouseDown),o.triggerCanvasZoomEvent({source:"zoom_tool"}))}exit(){this.pathEngine?this.pathEngine.switchToDefault():this.engine.exitTool()}updateCursor(e){return e?this.engine.setCursor("zoom-out"):this.engine.setCursor("zoom-in")}};t.Zoom=class Zoom extends i.Component{render(){return null}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(1),r=n(19),s=n(5),a=n(11);t.PathCurveBendTool=class PathCurveBendTool{constructor(){this.enum=s.Tools.Unknown}start(){const{closestCurve:e,tree:t}=this.pathEngine;if(!e)return void this.pathEngine.switchToDefault();this.engine.setCursor("-webkit-grabbing"),this.engine.beginUndoGroup(),this.node=t.getNode(e.id),this.normalizedClosestCurve=Object.assign({},e,{projectedPoint:t.convertPointToCanvas(this.node,e.projectedPoint),midPoint:t.convertPointToCanvas(this.node,e.midPoint)});const n=a.convertPathToCanvas(t,this.node,this.node),i=r.default.toBezierJS(n);this.originalBezier=i[e.segmentIndex],this.fromSegmentIndex=e.segmentIndex,this.toSegmentIndex=this.normalizedClosestCurve.segmentIndex+1,this.normalizedClosestCurve.segmentIndex===this.node.pathSegments.count()-1&&(this.toSegmentIndex=0),this.normalizedClosestCurve.segmentIndex,this.isStraight=o.isStraightCurve(this.node.pathSegments.get(this.fromSegmentIndex),this.node.pathSegments.get(this.toSegmentIndex))}stop(){this.pathEngine.setClosestCurve(null),this.engine.endUndoGroup(),this.engine.clearCursor()}update(){const{tree:e,mouseDown:t,mouse:n,shiftKey:i}=this.engine,r=this.engine.previousInputState,s=r.mouseDown,a=r.mouse,l=r.shiftKey;if(!(t&&s&&a&&n))return void this.pathEngine.switchToDefault();const c=this.delta(t,n,i),d=this.delta(s,a,l);if(d.x===c.x&&d.y===c.y)return;const u=e.current(this.node),h=function controlPointsForBend(e,t,n,i){const r=t.midPointInRange||i,s=r?.5:t.projectedTime,a=1-s,l=s*s*s+a*a*a,c=l-1,d=Math.abs(c/l),u=e.hull(s),h=u[5],p=e.get(s),g=e.points[0],m=e.points[3];h.x===p.x&&h.x===g.x&&h.x===m.x&&(g.x+=.01,m.x+=.01),h.y===p.y&&h.y===g.y&&h.y===m.y&&(g.y+=.01,m.y+=.01);let f=e.getUtils().lli4(h,p,g,m);f||(f=t.midPoint);const y=f,v=u[7],b=u[8],k={x:v.x-p.x,y:v.y-p.y},S={x:b.x-p.x,y:b.y-p.y},C=e.points,x=o.Point.add(r?t.midPoint:t.projectedPoint,n),w={x:x.x-(y.x-x.x)/d,y:x.y-(y.y-x.y)/d},T={x:x.x+k.x,y:x.y+k.y},P={x:w.x-(w.x-T.x)/(1-s),y:w.y-(w.y-T.y)/(1-s)},E={x:x.x+S.x,y:x.y+S.y},F={x:w.x+(E.x-w.x)/s,y:w.y+(E.y-w.y)/s},M={x:C[0].x+(P.x-C[0].x)/s,y:C[0].y+(P.y-C[0].y)/s},_={x:C[3].x-(C[3].x-F.x)/(1-s),y:C[3].y-(C[3].y-F.y)/(1-s)};return{from:M,to:_}}(this.originalBezier,this.normalizedClosestCurve,c,this.isStraight),p=e.convertPointToNode(u,h.from),g=e.convertPointToNode(u,h.to);let m=u.pathSegments.update(this.fromSegmentIndex,e=>updateSegment(e,o.Point.subtract(p,e),!0));m=m.update(this.toSegmentIndex,e=>updateSegment(e,o.Point.subtract(g,e),!1)),this.engine.updateNode(u.id,u.updateForPath({pathSegments:m}))}delta(e,t,n){const i=o.Point.subtract(t,e);return n&&(Math.abs(i.x)>Math.abs(i.y)?i.y=0:i.x=0),i}};function updateSegment(e,t,n){const i=t;let r=n?o.PathSegment.handleIn(e):o.PathSegment.handleOut(e);"symmetric"===e.handleMirroring&&(r=o.Point.reverse(i));const s={handleOutX:n?i.x:r.x,handleOutY:n?i.y:r.y,handleInX:n?r.x:i.x,handleInY:n?r.y:i.y,handleMirroring:"straight"===e.handleMirroring?"disconnected":e.handleMirroring};return new o.PathSegment(e.merge(s))}t.default=class PathCurveBend extends i.Component{render(){return null}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(46),r=n(192),s=n(88),a=n(19),l=n(32),c=n(5),d=n(203),u=n(409),h=n(273),p=n(275),g=n(410),m=n(11);t.PathDefaultTool=class PathDefaultTool{constructor(){this.enum=c.Tools.Unknown,this.mouseDidMove=!1}start(){this.updateCursor()}stop(){this.engine.clearCursor()}update(){const e=this.engine.previousInputState,t=d.default(this.engine,e);switch(this.updateCursor(),t){case"mouseDown":return this.mouseDown();case"mouseUp":return this.mouseUp();case"mouseMove":return this.mouseMove()}}mouseMove(){this.mouseDidMove=!0,this.engine.mouseDown?(this.pathEngine.setSegmentHandle(null),this.pathEngine.setPathTool(new u.PathSegmentSelectTool)):this.pathEngine.setHoveredSegment(null)}mouseUp(){if(this.mouseDidMove)return;const{tree:e,selection:t}=this.engine;for(let n=0,i=t.length;n<i;n++){const i=t[n],o=e.getNode(i);if(!o||!s.hasPath(o)||!this.engine.mouse)continue;const a=e.convertPointToNode(o,this.engine.mouse);if(r.getPathOperator().containsPoint(o,a))return this.pathEngine.setSegmentSelection([]),void this.pathEngine.setSegmentHandle(null)}this.engine.exitTool()}mouseDown(){const{mouse:e,altKey:t,cmdKey:n,shiftKey:i,tree:o}=this.engine,{closestCurve:r,segmentSelection:s}=this.pathEngine;if(this.mouseDidMove=!1,r&&e)if(t)this.pathEngine.setClosestCurve(r),this.pathEngine.setPathTool(new h.PathCurveBendTool);else if(n||r.midPointInRange){const e=o.getNode(r.id),t=n?r.projectedTime:.5,i=a.default.split(e.pathSegments,e.pathClosed,r.segmentIndex,t);this.engine.updateNode(e.id,e.updateForPath({pathSegments:i})),this.pathEngine.setClosestCurve(null),this.pathEngine.setSegmentSelection([{id:e.id,index:r.segmentIndex+1}]),this.pathEngine.setSegmentHandle(null),this.pathEngine.setPathTool(new p.PathSegmentMoveTool)}else{const e={id:r.id,index:r.segmentIndex};let t=!0;if(i?(this.pathEngine.toggleSegmentSelection([e],l.PathSelectionType.Curves),t=!m.partOfSelection(s,r.id,r.segmentIndex)):this.pathEngine.setSegmentSelection([e],l.PathSelectionType.Curves),this.pathEngine.setSegmentHandle(null),this.pathEngine.setClosestCurve(null),!t)return;this.pathEngine.setPathTool(new p.PathSegmentMoveTool)}}updateCursor(){const{altKey:e,cmdKey:t}=this.engine,{closestCurve:n}=this.pathEngine;n&&e?this.engine.setCursor("-webkit-grab"):n&&(t||n.midPointInRange)?this.engine.setCursor(o.pathCurveSplitCursor()):this.engine.clearCursor()}};t.default=class PathDefault extends i.Component{render(){const{mouse:e}=this.props.pathTool.engine;return e?i.createElement(g.default,Object.assign({},this.props)):null}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(1),o=n(276),r=n(5),s=n(11);t.PathSegmentMoveTool=class PathSegmentMoveTool{constructor(){this.enum=r.Tools.Unknown,this.wantsAutoscrolling=!0}start(){const{tree:e}=this.engine,{selectionType:t,segmentSelection:n}=this.pathEngine;this.segmentSelection=s.generateSegmentSelection(e,n,t),this.originalSegmentAnchorsInCanvas={};const o=this.segmentSelection.map(t=>{const n=e.get(t.id),i=n.pathSegments.get(t.index),o=this.originalPointKey(t),r=e.convertPointToCanvas(n,i);return this.originalSegmentAnchorsInCanvas[o]=r,r});this.originalFrame=i.Rect.fromPoints(o),this.engine.beginUndoGroup()}stop(){this.engine.toolStore.setSnapLines(),this.engine.endUndoGroup()}update(){const{tree:e,mouseDown:t,mouse:n,shiftKey:r,selection:a,zoom:l}=this.engine,{pointRounding:c}=this.pathEngine,d=this.engine.previousInputState,u=d.mouseDown,h=d.mouse,p=d.shiftKey;if(!t)return void this.pathEngine.switchToDefault();if(!h)return;if(!u)return;let g=this.delta(t,n,r);const m=this.delta(u,h,p);if(m.x===g.x&&m.y===g.y)return;const f=i.Rect.offset(this.originalFrame,g),y=s.roundedPoint(f,c);f.x=y.x,f.y=y.y;const v=s.groupPathSegmentSelectors(this.segmentSelection),b=e.getNodes(a);this.updateSnappingCache(e,b,this.segmentSelection);const[k,S]=o.pathSegmentSnap(this.snappingCache,e,l,b,this.segmentSelection,f,null);g=i.Point.subtract(f,this.originalFrame),this.engine.toolStore.setSnapLines(S.x,S.y),b.forEach(t=>{const n=v[t.id]||[],o=t.pathSegments.map((o,r)=>{if(-1===n.indexOf(r))return o;const a=this.originalPointKey({id:t.id,index:r}),l=this.originalSegmentAnchorsInCanvas[a],d=i.Point.add(l,g),u=s.roundedPoint(d,c),h=e.convertPointToNode(t,u);return new i.PathSegment(o.merge(h))});e.updateNode(t,t.updateForPath({pathSegments:o}))})}delta(e,t,n){const o=i.Point.subtract(t,e);return n&&(Math.abs(o.x)>Math.abs(o.y)?o.y=0:o.x=0),o}originalPointKey(e){return`${e.id} ${e.index}`}updateSnappingCache(e,t,n){const r=this.engine.canvasStore.getCanvasVisibleRect(),s=!i.isEqual(this.lastSnappingFrame,r),a=!this.snappingCache;(s||a)&&(this.snappingCache=o.pathSegmentSnappingData(e,t,n,r),this.lastSnappingFrame=r)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(7),o=n(1),r=n(4),s=n(32),a=n(1),l=n(120),c=n(11),d=n(27),u=n(16),h=n(88),p=n(89);t.pathSegmentSnap=function pathSegmentSnap(e,t,n,r,s,a,c){let d;if(c){d=l.snapWithConstraint(e,n,a,c,[]);const t=o.isFiniteNumber(d.point.x)&&d.point.x!==c.a.x,r=o.isFiniteNumber(d.point.y)&&d.point.y!==c.a.y;t||r||(d={snapLines:{x:i.Set(),y:i.Set()},point:{}})}else d=l.snap(e,n,a,void 0,void 0);return o.isFiniteNumber(d.point.x)&&(a.x=d.point.x),o.isFiniteNumber(d.point.y)&&(a.y=d.point.y),[a,d.snapLines]},t.pathSegmentSnappingData=function pathSegmentSnappingData(e,t,n,l){let g=i.Set(),m=i.Set();const f=e.getGroundNodesOfType(r.FrameNode).map(e=>e.id);t.forEach(t=>{const n=e.getParent(t.id);n&&(r.isShapeContainerNode(n)&&n.sizeToFit||-1===f.indexOf(n.id)&&f.push(n.id))}),e.getNodes(f).map(t=>e.convertFrameToCanvas(t)).forEach(e=>{if(!a.Rect.intersects(l,e))return;const t=s.PointRounding.Half,{x:n,y:i}=c.roundedPoint({x:e.x,y:e.y},t),{x:o,y:r}=c.roundedPoint({x:e.x+e.width/2,y:e.y+e.height/2},t),{x:d,y:u}=c.roundedPoint({x:e.x+e.width,y:e.y+e.height},t);g=g.union([n,o,d]),m=m.union([i,r,u])});const y=c.groupPathSegmentSelectors(n),v=Object.keys(y);return e.getNodesInRect(l,!0).filter(e=>!(!d.hasShape(e)||u.hasChildren(e))&&-1===v.indexOf(e.id)).forEach(t=>{let n;(n=h.hasPath(t)?t.pathSegments:p.BasicShape.path(t)[0].pathSegments).forEach(n=>{const i=e.convertPointToCanvas(t,o.PathSegment.point(n)),r=c.roundedPoint(i,s.PointRounding.Half);g=g.add(r.x),m=m.add(r.y)})}),t.forEach(t=>{const n=y[t.id]||[];let r=i.Set(),a=i.Set();t.pathSegments.forEach((i,l)=>{if(-1===n.indexOf(l)){const n=e.convertPointToCanvas(t,o.PathSegment.point(i)),l=c.roundedPoint(n,s.PointRounding.Half);r=r.add(l.x),a=a.add(l.y)}});const l=s.PointRounding.Half,{x:d,y:u}=c.roundedPoint({x:r.min(),y:a.min()},l),{x:h,y:p}=c.roundedPoint({x:r.max(),y:a.max()},l),{x:f,y:v}=c.roundedPoint({x:(d+h)/2,y:(u+p)/2},l);if(r=r.add(f),a=a.add(v),d===h&&u!==p){const e=p-u;e>3&&(g=g.add(d-e).add(d+e))}else{const e=h-d;g=g.add(d-e).add(h+e)}if(u===p&&d!==h){const e=h-d;e>3&&(m=m.add(u-e).add(u+e))}else{const e=p-u;m=m.add(u-e).add(p+e)}g=g.concat(r),m=m.concat(a)}),{x:g,y:m}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(7),o=n(0),r=n(1),s=n(3),a=n(19);t.default=class PathCurve extends o.Component{render(){const{from:e,to:t,stroke:n,strokeDasharray:l}=this.props;if(!e||!t)return null;const c={pathSegments:i.List([e,t]),pathClosed:!1},d=r.toSVGPath(c),u=a.default.boundingBox(c),h={position:"absolute",transform:`translate(${u.x}px, ${u.y}px)`},p={position:"absolute",width:u.width,height:u.height,overflow:"visible",fill:"transparent",strokeWidth:1,stroke:n||s.theme.tint};return o.createElement("div",{style:h},o.createElement("svg",{width:"100%",height:"100%",style:p,viewBox:`${u.x} ${u.y} ${u.width} ${u.height}`,strokeDasharray:l},o.createElement("path",{d})))}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(7),o=n(0),r=n(1),s=n(46),a=n(4),l=n(19),c=n(32),d=n(5),u=n(203),h=n(406),p=n(208),g=n(659),m=n(410),f=n(209),y=n(62);t.PathSegmentAdditionTool=class PathSegmentAdditionTool{constructor(){this.enum=d.Tools.Unknown,this.segmentAdded=!1}start(){this.engine.setCursor(s.pathExtensionCursor())}stop(){this.engine.clearCursor()}update(){const e=this.engine.previousInputState;switch(u.default(this.engine,e)){case"mouseDown":return this.mouseDown();case"mouseMove":return this.mouseMove()}}mouseMove(){const{mouseDown:e,tree:t}=this.engine,{segmentSelection:n}=this.pathEngine;if(this.segmentAdded&&e){const e=n[0],i=t.getNode(e.id),o=l.default.isLastSegment(i.pathSegments,i.pathClosed,e.index)?c.SegmentHandle.Out:c.SegmentHandle.In;this.pathEngine.setSegmentHandle({id:i.id,index:e.index,handle:o}),this.pathEngine.setPathTool(new p.PathSegmentHandleMoveTool)}else this.pathEngine.setHoveredSegment(null)}mouseDown(){const{tree:e,mouse:t}=this.engine,{segmentSelection:n,snap:o}=this.pathEngine,{snappedMouse:s}=o;if(t&&s)if(0===n.length){const n=e.getPotentialParents(Object.assign({},t,{width:1,height:1}),t).filter(e=>a.isShapeContainerNode(e));let o=a.NullID,l=s;const c=e.getTopMostChildNode(n);c&&a.isTreeNode(c)&&(o=c.id,l=e.convertPointToNode(c,l));const d=h.findShapeContainerInRange(e,o,l);d&&(o=d.id,l=e.convertPointToNode(d,l));const u=e.newId(),p=Object.assign({id:u},l,y.strokeDefaults,{pathSegments:i.List([new r.PathSegment])});this.engine.createPath(o,p),this.engine.setSelection([u]),this.pathEngine.setSegmentSelection([{id:u,index:0}]),this.segmentAdded=!0}else{const t=n[0],i=e.getNode(t.id),o=l.default.isLastSegment(i.pathSegments,i.pathClosed,t.index),a=e.convertPointToNode(i,s,!0),c=new r.PathSegment(a),d=o?i.pathSegments.count():0,u=i.pathSegments.insert(d,c);this.engine.updateNode(i.id,i.updateForPath({pathSegments:u})),this.pathEngine.setSegmentSelection([{id:i.id,index:d}]),this.pathEngine.setHoveredSegment(null),this.pathEngine.setClosestCurve(null),this.segmentAdded=!0}}};t.default=f.default(class PathSegmentAddition extends o.Component{render(){return o.createElement("div",null,o.createElement(g.default,Object.assign({},this.props)),o.createElement(m.default,Object.assign({},this.props)))}})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(20);!function(e){e[e.Default=0]="Default",e[e.GradientAngle=1]="GradientAngle",e[e.RadialGradientMove=2]="RadialGradientMove",e[e.RadialGradientResize=3]="RadialGradientResize",e[e.SampleColor=4]="SampleColor"}(t.GradientToolType||(t.GradientToolType={}));t.VekterGradientTool=class VekterGradientTool extends i.VekterTool{}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(20),r=n(5);t.TextEditTool=class TextEditTool extends o.VekterTool{constructor(e="none"){super(),this.enum=r.Tools.TextEdit,this.eventSource=e}start(){const{tree:e,selection:t}=this.engine;this.nodeId=t[0];const n=e.getNode(this.nodeId);n?(0!==n.styledText.text.length&&this.engine.beginUndoGroup(),n.cache.isEditable=!0):this.engine.exitTool()}update(){this.engine.mouseDown?this.engine.setToolEnum(r.Tools.Select):this.engine.selection[0]!==this.nodeId&&this.engine.exitTool()}stop(){const{tree:e}=this.engine,t=e.getNode(this.nodeId);t&&(0!==t.styledText.text.length||t.originalid?t.cache.isEditable=!1:this.engine.deleteNode(this.nodeId),this.engine.endUndoGroup())}};t.TextEdit=class TextEdit extends i.Component{render(){return null}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(9),r=n(1),s=n(3),a=n(46),l=n(20),c=n(2),d=n(4),u=n(22),h=n(119),p=n(5),g=n(213);function isValidLinkSource(e,t){return!(null===t||!d.isDrawableNode(t)||!h.hasNavigationLink(t))}function isValidLinkTarget(e,t,n){if(!t||!n)return!1;return!e.getAncestors(n.id).find(e=>e===t.id)&&(d.isFrameNode(t)||u.isCodeComponentNode(t))&&t.id!==n.id&&t.parentid===e.root.id}t.isValidLinkSource=isValidLinkSource,t.isValidLinkTarget=isValidLinkTarget;t.NavigationLinkTool=class NavigationLinkTool extends l.VekterTool{constructor(){super(...arguments),this.enum=p.Tools.NavigationLink,this.readyForDestinationTarget=!1,this.linkSource=null}start(){const{tree:e,selection:t}=this.engine;if(1===t.length){const n=t[0]?e.getNode(t[0]):null;this.linkSource=isValidLinkSource(0,n)?n:null}}update(){const{tree:e,mouse:t,mouseDown:n,previousInputState:i}=this.engine,s=this.linkSource?isValidLinkTarget:isValidLinkSource,l=e.getNodesAtPoint(t).filter(e=>!e.locked).reverse().find(t=>d.isDrawableNode(t)&&!!s(e,t,this.linkSource));l?(c.default.setHighlight(l.id),this.engine.clearCursor()):(c.default.setHighlight(d.NullID),this.linkSource?this.engine.setCursor(a.disconnectCursor()):this.engine.clearCursor());const u=i.mouseDown,h=null===n&&null!==u;null===n||null!==u||this.linkSource?h&&this.linkSource&&(this.readyForDestinationTarget||r.Point.distance(u,t)>4)&&(c.default.updateNode(this.linkSource.id,{navigationTarget:l?l.id:d.NullID}),c.default.setSelection([this.linkSource.id]),c.default.setHighlight(null),c.default.exitTool(),o.triggerInteractiveLinkCreateEvent({})):this.linkSource=l||null,this.readyForDestinationTarget=this.readyForDestinationTarget||h||null!==this.linkSource&&null===n}stop(){delete this.linkSource,this.engine.setCursor("default"),this.engine.setHighlight(null),this.engine.mouseStore.setMouseDown(!1)}};t.NavigationLink=class NavigationLink extends i.Component{render(){const{linkSource:e}=this.props.myTool;if(!e)return null;const{tree:t,highlight:n,mouse:o,zoom:r}=this.props.myTool.engine,a=t.convertFrameToCanvas(e),l=t.getRect(e),c=e.canvasMatrix();let d=g.preferredArrowDirection(a,Object.assign({},o,{width:1,height:1}));const u=g.startPoint(l,c,d);let h=o,p={x:0,y:0};const m=n?t.getNode(n):null;if(m){d=g.preferredArrowDirection(a,t.convertFrameToCanvas(m));const{end:n,offset:i}=g.arrowPoints(t,l,e.canvasMatrix(),t.getRect(m),m.canvasMatrix(),d,g.topAncestor(t,e));h=n,p=i}return i.createElement(g.Arrow,{tintColor:s.theme.tint,active:!0,startX:u.x,startY:u.y,endX:h.x,endY:h.y,direction:d,startOffsetX:p.x,startOffsetY:p.y,background:!0,showArrowHead:!0,zoom:r})}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(137),o=n(142);t.anchorToPoint=function anchorToPoint(e){switch(e.type){case i.AnchorType.Canvas:return{x:e.x,y:e.y};default:return o.default(e.type)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(1),r=n(82),s=n(10),a=n(4),l=n(2),c=n(214),d=n(68),u=n(67),h=n(49),p=n(84),g=n(16),m=n(22),f=n(99),y=n(6),v=n(173),b=n(683),k=n(422),S={static:!0};function createElement(e){return a.isTreeNode(e)?a.isDrawableNode(e)?o.renderPresentationTree(e,c.componentForNode):e.children.map(e=>{o.renderPresentationTree(e,c.componentForNode)}):null}function setupElementCache(e,t,n,i){const o=e.cache,r=o.selected;let s=!1;const l=e.children;if(l){const i=n&&!a.isDrawableNode(e);for(let e=0,n=l.length;e<n;e++){setupElementCache(l[e],t,i,r)&&(s=!0)}}const c=function nodeHasImageOrShadow(e){return!(!(d.hasBoxShadow(e)&&e.boxShadows&&e.boxShadows.size>0)&&!(u.hasShadow(e)&&e.shadows&&e.shadows.size>0)&&(!h.hasFill(e)||!e.fillImage||h.hasOptionalFill(e)&&!e.fillEnabled))}(e),y=p.codeComponentWithChildInsertion(e)&&0===g.getChildren(e).length,v=m.isCodeComponentNode(e)&&!e.anySlotContent(),b=c||y||v||f.isSVGNode(e)?t:0,k=n||!i&&r;return o.canvasZoom!==b||o.willChangeTransform!==k?(o.canvasZoom=b,o.willChangeTransform=k,o.reactElement=null,!0):!!s&&(o.reactElement=null,!0)}t.createElement=createElement;class CanvasRenderer extends i.PureComponent{constructor(){super(...arguments),this.previousZoom=0,this.previousSelection=[]}static calculateState(){l.default.canvasStore.assertInteractive();const e=l.default.serverStore.projectURL,t=e?e.toString():null;return{tree:l.default.tree,selection:l.default.selection,tool:l.default.toolStore.state.tool,canvasZoom:l.default.canvasStore.zoom,projectURL:t,componentHash:l.default.canvasStore.componentHash}}render(){l.default.assertReactRendering(),l.default.canvasStore.assertInteractive();const{tree:e,selection:t,canvasZoom:n}=this.state,o=l.default.tool instanceof v.MoveTool,r=l.default.serverStore.imageBaseURL.toString();return i.createElement(CanvasElements,{tree:e,selection:t,inMoveTool:o,zoom:n,imageBaseURL:r})}}CanvasRenderer.engineChangeKeys=y.EngineChangeFlags.Tree|y.EngineChangeFlags.Selection|y.EngineChangeFlags.Tool|y.EngineChangeFlags.CanvasZoom|y.EngineChangeFlags.ComponentHash|y.EngineChangeFlags.ServerStore;class CanvasElements extends i.PureComponent{constructor(){super(...arguments),this.previousZoom=-1,this.previousSelection=[]}render(){const{tree:e,selection:t,inMoveTool:n,zoom:s,imageBaseURL:a}=this.props;return(this.previousZoom!==s||this.previousSelection!==t&&n)&&(this.previousZoom=s,this.previousSelection=t,e.getGroundNodes().forEach(e=>setupElementCache(e,s,!0,!1))),o.setGlobalRenderEnvironment({target:o.RenderTarget.canvas,zoom:s,imageBaseURL:a}),i.createElement(r.MotionContext.Provider,{value:S},i.createElement("div",{key:"CanvasElements",ref:b.repairStrokedSVGs},e.getGroundNodes().map(e=>i.createElement(k.GroundNodeWrapper,{key:e.id+"-wrapper",node:e},createElement(e)))))}}t.CanvasElements=CanvasElements;const C=s.default(CanvasRenderer);t.CanvasRenderer=C},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(70),o=n(35);t.default=function beep(){i.Beep.on(i.PostMessageChannel.toParentFrame).expect().beep().catch(o.unhandledError)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(1),o=n(4),r=n(39),s=n(34),a=n(25),l=n(55),c=n(425),d=n(688),u=n(689),h=n(426),p=n(379),g=n(690),m=n(259),f=n(377),y=n(691),v=n(131),b=n(115),k=n(60),S=n(159),C=n(61),x=n(191),w=n(27),T=n(12),P=n(113),E=n(692),F=n(50),M=n(693),_=n(162),O=n(136),I=n(382),D=n(694);function reduceInstanceTypes(e,t){!t.onlyTextnodes||e instanceof o.TextNode||(t.onlyTextnodes=!1),t.onlyShapeNodes&&!w.hasShape(e)&&(t.onlyShapeNodes=!1),!t.onlyShapeAndGraphicNodes||O.isShapeContainerNode(e)||w.hasShape(e)||(t.onlyShapeAndGraphicNodes=!1),!t.onlyRelativeRadiusNodes||l.withRelativeRadius(e)&&e.radiusIsRelative||(t.onlyRelativeRadiusNodes=!1),t.onlyCodeComponentNodes&&!S.hasCodeComponent(e)&&(t.onlyCodeComponentNodes=!1),t.onlyShapeContainerNodes&&!O.isShapeContainerNode(e)&&(t.onlyShapeContainerNodes=!1);const n=T.isReplica(e);t.onlyReplicas&&!n&&(t.onlyReplicas=!1);const i=e.originalid&&!n,r=n||i;t.onlyReplicaWithDescendants&&!r&&(t.onlyReplicaWithDescendants=!1)}function reduceRect(e,t,n){const o=i.Rect.round(e.getRect(t),2);let r=o.width,a=o.height;if(s.isPinnable(t)&&F.hasSize(t)){switch(-1===n.widthTypes.indexOf(t.widthType)&&n.widthTypes.push(t.widthType),-1===n.heightTypes.indexOf(t.heightType)&&n.heightTypes.push(t.heightType),t.widthType){case i.DimensionType.Percentage:r=`${Math.round(100*t.width)}%`;break;case i.DimensionType.FractionOfFreeSpace:r=`${i.roundedNumberString(t.width,2)}fr`;break;case i.DimensionType.Auto:r="auto"}switch(t.heightType){case i.DimensionType.Percentage:a=`${Math.round(100*t.height)}%`;break;case i.DimensionType.FractionOfFreeSpace:a=`${i.roundedNumberString(t.height,2)}fr`;break;case i.DimensionType.Auto:a="auto"}}if(void 0===n.width?(n.width=r,n.height=a):(null!==n.width&&n.width!==r&&(n.width=null),null!==n.height&&n.height!==a&&(n.height=null)),t.cache.parentDirected)return;void 0===n.x?(n.x=o.x,n.y=o.y):(null!==n.x&&n.x!==o.x&&(n.x=null),null!==n.y&&n.y!==o.y&&(n.y=null));const l=e.getParent(t.id);if(!s.isPinnable(t)||!l)return;const c=e.getRect(l);void 0===n.right?(n.right=c.width-i.Rect.maxX(o),n.bottom=c.height-i.Rect.maxY(o)):(null!==n.right&&n.right!==c.width-i.Rect.maxX(o)&&(n.right=null),null!==n.bottom&&n.bottom!==c.height-i.Rect.maxY(o)&&(n.bottom=null))}t.reduceProperties=function reduceProperties(e,t){const n={withoutDescendants:[],expandedSelectionForShapeStyles:[],expandedSelectionForShapeGeometry:[],widthTypes:[],heightTypes:[],onlyTextnodes:!0,onlyShapeNodes:!0,onlyShapeAndGraphicNodes:!0,onlyCanvasFrameNodes:!0,onlyCodeComponentNodes:!0,onlyShapeContainerNodes:!0,onlyReplicas:!0,onlyReplicaWithDescendants:!0,onlyAutoSizedNodes:!0,onlyRelativeRadiusNodes:!0,onlyNodesWithExportIncludesBackground:!0,gradientFillSupported:!0,canSetLeft:!0,canSetTop:!0,canSetBottom:!0,canSetRight:!0,canSetWidthFactor:!0,canSetHeightFactor:!0,nodeBoxShadows:[],nodeShadows:[],enabledOutsideShadowLevels:[],enabledInsideShadowLevels:[],blendingValues:[],borderStyleValues:[],strokeAlignmentValues:[],lineJoinValues:[],lineCapValues:[],blurTypes:[],exportableNodes:[],exportCount:0,canExportAsSVG:!1,navigationTargets:[],navigationTransitions:[],navigationTransitionDirections:[],codeComponentIdentifiers:[],fillImageResize:[],codeOverrideFiles:[]};0===t.length&&(n.onlyTextnodes=!1,n.onlyShapeNodes=!1,n.onlyShapeAndGraphicNodes=!1,n.onlyCanvasFrameNodes=!1,n.onlyAutoSizedNodes=!1,n.onlyRelativeRadiusNodes=!1,n.onlyCodeComponentNodes=!1,n.onlyShapeContainerNodes=!1,n.onlyReplicas=!1,n.onlyReplicaWithDescendants=!1,n.onlyNodesWithExportIncludesBackground=!1);for(let o=0,a=t.length;o<a;o++){const i=t[o];s.reducePins(e,i,n),b.reduceClip(i,n),reduceInstanceTypes(i,n),r.reduceAspectRatio(i,n),k.reduceOpacity(i,n),d.reduceBorder(i,n),u.reduceBorderPerSide(i,n),f.reduceColorable(i,n),_.reduceBlurAndFilters(i,n),M.reduceBlending(i,n),g.reduceExport(i,n),S.reduceCodeComponents(i,n),P.reduceOverride(i,n),E.reduceNavigationLink(i,e,n),I.reduceSizeToFit(i,n),n.onlyAutoSizedNodes&&!v.hasAutoSize(i)&&(n.onlyAutoSizedNodes=!1)}let i;D.reduceText(n.onlyTextnodes,t,n),[n.expandedSelectionForShapeStyles,i,n.expandedSelectionForShapeGeometry]=y.expandSelectionForShapeProperties(e,t);for(let o=0,r=i.length;o<r;o++){const e=i[o];c.reduceFill(e,n),h.reduceStroke(e,n),p.reduceShadows(e,n)}for(let o=0,r=n.expandedSelectionForShapeGeometry.length;o<r;o++){const e=n.expandedSelectionForShapeGeometry[o];l.reduceRadius(e,n),C.reduceRadiusPerCorner(e,n),x.reduceSpikes(e,n),m.reducePolygon(e,n)}n.withoutDescendants=e.withoutDescendants(t),n.onlyCanvasFrameNodes=n.onlyCanvasFrameNodes&&n.withoutDescendants.length===t.length;for(let r=0,s=n.withoutDescendants.length;r<s;r++){const t=n.withoutDescendants[r];n.onlyCanvasFrameNodes=n.onlyCanvasFrameNodes&&o.isFrameNode(t)&&null===e.getParent(t.id),reduceRect(e,t,n),a.reduceRotation(t,n)}return n}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(4),r=n(1),s=n(24),a=n(205),l=n(287),c=n(1),d=n(288),u=n(696),h=n(139),p=n(2),g=n(42),m=n(145);function PreviewLoader({isList:e}){const t=e?30:80,n=e?30:80;return i.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",left:e?10:5,top:5,position:"absolute",width:t,height:n}},i.createElement(m.ActivityIndicator,{style:{left:"unset",top:"unset",opacity:.3}}))}function getComponentPreview(e,t,n,o){if(!t&&isLocalDesignComponent(e,n))return function localDesignComponentPreview(e,t){const n=p.default.tree.getRect(e);return{preview:l.nodePreview(e,previewRect(n,t)),component:e,contextAction:u.componentContextMenuHandler({id:e.id,isExternalPackage:!1})}}(e,o);if(c.isDesignDefinition(e))return function externalDesignComponentPreview(e,t){const n=externalDesignComponent(e),o=u.componentContextMenuHandler({id:null,isExternalPackage:!0});if(!n)return{preview:i.createElement("div",null,"error: ",e.class.name),component:n,contextAction:o};return{preview:l.nodePreviewForMaster(n,previewRect(null,t)),component:n,contextAction:o}}(e,o);if(c.isReactDefinition(e))return function codeComponentPreview(e,t,n){const i=codeComponenentFromDefinition(e),o=p.default.tree.getRect(i),r=u.componentContextMenuHandler({id:e.identifier,isExternalPackage:t,isCodeComponentNode:!0});return{component:i,preview:l.nodePreview(i,previewRect(o,n)),contextAction:r}}(e,t,o);throw Error("assert")}function externalDesignComponent(e){const t=e.class;return p.default.tree.get(t.id)||l.memoizedMasterFromJSON(t.id,t,s.componentLoader)}function codeComponenentFromDefinition(e){const t={width:200,height:200,codeComponentIdentifier:e.identifier,codeComponentProps:{},intrinsicWidth:null,intrinsicHeight:null};t.codeComponentProps=a.defaultCodeComponentProps(e);const{defaultProps:n}=e.class;n&&(r.isFiniteNumber(n.width)&&(t.width=n.width,t.intrinsicWidth=n.width),r.isFiniteNumber(n.height)&&(t.height=n.height,t.intrinsicHeight=n.height));const i=new o.CodeComponentNode(t);return i.id=e.identifier,i}function componentName(e,t){return e.name?e.name:t?g.defaultName(t):"Unknown"}function isLocalDesignComponent(e,t){return-1!==t.indexOf(e)}t.PackagePanelComponent=class PackagePanelComponent extends i.PureComponent{constructor(){super(...arguments),this.state={componentPreview:null}}getPreview(){const{componentDefinition:e,viewType:t,isExternalPackage:n,masters:i}=this.props;this.setState({componentPreview:getComponentPreview(e,n,i,t)})}getPreviewAsync(){setTimeout(()=>{this.getPreview()},1)}componentDidMount(){this.getPreviewAsync()}componentDidUpdate(e){const{viewType:t,componentDefinition:n}=this.props,i=e.viewType!==t,o=e.componentDefinition!==n;(i||o)&&this.getPreview()}getPreviewData(){const{componentPreview:e}=this.state;return e||{component:null,preview:null,contextAction:void 0}}render(){const{componentDefinition:e,viewType:t,packageIdentifier:n}=this.props,{component:o,preview:r,contextAction:s}=this.getPreviewData();return i.createElement(d.DraggablePackageComponent,{packageIdentifier:n,key:e.identifier,viewType:t,name:componentName(e,o),component:o,content:r||i.createElement(PreviewLoader,{isList:t===h.ComponentPanelViewType.List}),onContextMenu:s})}},t.externalDesignComponent=externalDesignComponent,t.codeComponenentFromDefinition=codeComponenentFromDefinition,t.componentName=componentName,t.isLocalDesignComponent=isLocalDesignComponent;const f=90,y=90;function previewRect(e,t){if(t===h.ComponentPanelViewType.List)return k;if(!e)return v;const n=e.width/e.height;return n>.8&&n<1.2?b:v}const v={width:f-10,height:y-10,x:5,y:5},b={width:f-30,height:y-30,x:15,y:15},k={width:30,height:30,x:10,y:5}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(179),r=n(2),s=n(4),a=n(1),l=n(214),c=n(196);let d=null;const u=new Map,h=new Map;function thumbnail(e,t,n,r){const c=a.memoize(1e3,u,e.id+e.update+n.height,c=>{const d=n.width/t.width,u=n.height/t.height,h=r?Math.max(d,u):Math.min(1,d,u),p=t.width*h,g=t.height*h,m=Math.round(n.height/2-g/2),f=Math.round(n.width/2-p/2),y={position:"absolute",top:m,left:f,transform:`scale(${h})`,transformOrigin:"0 0",pointerEvents:"none",width:p/h,height:g/h,overflow:"hidden"};let v="";try{a.executeInRenderEnvironment({target:a.RenderTarget.thumbnail},()=>{v=s.isCodeComponentNode(e)?o.renderToStaticMarkup(i.createElement("div",{style:y},i.createElement(a.ComponentContainer,{componentIdentifier:e.codeComponentIdentifier},a.renderPresentationTree(e,l.componentForNode)))):o.renderToStaticMarkup(i.createElement("div",{style:y},a.renderPresentationTree(e,l.componentForNode)))})}catch(b){return o.renderToStaticMarkup(i.createElement(ErrorPlaceholder,{nodeRect:t,scale:h,top:m,left:f}))}return v});return i.createElement("div",{style:{position:"absolute",left:n.x,top:n.y}},i.createElement("div",{dangerouslySetInnerHTML:{__html:c}}))}function ErrorPlaceholder({nodeRect:e,scale:t,top:n,left:o}){const r=e.height*t;return i.createElement("div",{className:"framerInternalUI-errorPlaceholder",style:{top:n,left:o,position:"absolute",width:e.width*t,height:r,fontSize:10,lineHeight:`${r-2}px`,textAlign:"center"}},"Error")}t.setPrerenderedComponentsVersion=function setPrerenderedComponentsVersion(e){d!==e&&(d=e,u.clear(),h.clear())},t.memoizedMasterFromJSON=function memoizedMasterFromJSON(e,t,n){return a.memoize(1e3,h,e,e=>c.masterFromJSONInFakeTree(t,n))},t.nodePreview=function nodePreview(e,t,n){const i=r.default.tree.getRect(e),o=new s.default,a=e.cloneWithIds(e.updateForRect(Object.assign({},i,{x:0,y:0}),null));return a.update=e.update,o.insertNode(a,s.NullID),thumbnail(a,i,t,n)},t.nodePreviewForMaster=function nodePreviewForMaster(e,t){const n=e.rect({width:0,height:0});return thumbnail(e,n,t)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(94),r=n(3),s=n(695),a=n(139);t.DraggableComponentDataType="PackageComponent",t.DraggablePackageComponent=function DraggablePackageComponent({name:e,onContextMenu:n,viewType:r,content:d,component:u,packageIdentifier:h}){const p=r===a.ComponentPanelViewType.List,g=removeCategoriesFromName(e),m=i.useCallback(e=>{const n={packageIdentifier:h,component:u,ignoreOffset:"list"===r};e.dataTransfer.setData(t.DraggableComponentDataType,n)},[h,u,r]);return i.createElement(o.Draggable,{onDragStart:m,onContextMenu:n,hideDragSource:!1,style:r===a.ComponentPanelViewType.List?l:c},({isDragPreview:e})=>i.createElement("div",{style:itemStyle(p),ref:s.disableMedia},i.createElement("div",{style:cardStyle(e),title:p?void 0:g},d,p?g:void 0)))};const l={position:"relative",width:"100%",border:"5px solid transparent"},c={position:"relative",border:"5px solid transparent"};function itemStyle(e){return{position:"relative",width:e?"100%":90,height:e?40:90}}function cardStyle(e){return{width:"100%",height:"100%",borderRadius:4,background:e?void 0:r.theme.componentItemBackground,overflow:"hidden",willChange:"transform",border:`1px solid ${e?"transparent":r.theme.componentItemBorder}`,paddingLeft:50,paddingRight:10,color:r.theme.componentItemLabel,fontSize:"11px",lineHeight:"38px",whiteSpace:"nowrap",textOverflow:"ellipsis",WebkitUserSelect:"none",userSelect:"none",cursor:"default"}}function removeCategoriesFromName(e){const t=e.split("/");return t[t.length-1].trim()}t.removeCategoriesFromName=removeCategoriesFromName},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(3),r=n(2),s=n(5),a=n(102);let l=null;setTimeout(()=>{try{l=n(697).CodeEditorManager}catch(e){a.log.debug("[monaco] unable to load:",e.message)}}),o.theme.addGlobalStyle("div.monaco-editor *",{WebkitUserSelect:"text",userSelect:"text"}),o.theme.addGlobalStyle("div.monaco-editor ::selection",{background:"transparent"}),o.theme.addGlobalStyle("div.monaco-quick-open-widget",{display:"none"});t.CodeEditor=class CodeEditor extends i.Component{static editFile(e,t,n=!0){r.default.processWhenReady(()=>{n&&r.default.toolStore.setLeftPanelContent(s.LeftPanelContent.CodeEditor),r.default.toolStore.putEditorCommand({name:e,content:t,useExisting:!n})})}render(){return this.props.visible&&l?i.createElement(l,{className:this.props.className}):null}}},function(e,t){e.exports=require("@framerjs/store-embedded")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(9),o=n(2),r=n(95),s=n(43),a=n(216),l=n(4),c=n(144),d=n(174),u=n(210),h=n(1),p=n(703),g=n(431),m=n(58),f=n(175),y=n(705),v=n(88),b=n(45),k=n(141),S=n(177),C=n(5),x=n(432),w=n(31),T=n(12),P=n(15),E=n(14),F=n(284),M=n(263),_=n(220),O=n(42),I=n(708),D=n(143),N=n(142),R=n(37),A=n(212),L=n(28),B=n(35);function isDocumentShown(){switch(o.default.toolStore.state.leftPanelContent){case C.LeftPanelContent.Layers:case C.LeftPanelContent.Components:case C.LeftPanelContent.Tools:return!0;case C.LeftPanelContent.CodeEditor:return!o.default.toolStore.isCodeEditorOpen();case C.LeftPanelContent.Marketplace:return L.experiments.isOn("sidebarStore")&&!o.default.toolStore.isStoreMainPanelOpen();default:return!1}}const j={exportWebPreview:e=>!0,exportSelection:e=>e.selection.length>0&&x.exportButtonVisible(),exportAll:e=>!!e.tree.root.find(e=>e.visible&&w.hasExport(e)&&!!e.exportOptions.find(e=>e.enabled)),exportCanvas:e=>!!e.groundNodes.find(e=>e.visible)};const H={undo:e=>isDocumentShown()?o.default.treeStore.canUndo():"native",redo:e=>isDocumentShown()?o.default.treeStore.canRedo():"native",cut:e=>r.wantsNativeTextActions()||!isDocumentShown()?"native":e.selection.length>0,copy:e=>r.wantsNativeTextActions()||!isDocumentShown()?"native":e.selection.length>0,paste:e=>!(r.wantsNativeTextActions()||!isDocumentShown())||"native",selectAll:e=>r.wantsNativeTextActions()||!isDocumentShown()?"native":o.default.treeStore.tree.root.children.length>0};const z={copyStyle:e=>1===e.selection.length,copyImage:e=>1===e.withoutDescendants.length||0===e.withoutDescendants.length,copyCSS:e=>null!==e.singleNode&&!l.isVectorNode(e.singleNode),copySVG:e=>null!==e.singleNode&&c.isExportableAsSVG(e.singleNode),pasteStyle:e=>e.selection.length>0,duplicate:e=>s.ContextAction.canDuplicateNodes(e.nodes),delete:e=>r.wantsNativeTextActions()?"native":s.ContextAction.canDelete(o.default,e.nodes),toggleLayerLock:e=>s.ContextAction.lockEnabled(e.tree,e.nodes),toggleLayerVisible:e=>s.ContextAction.visibilityEnabled(e.tree,e.nodes),toggleLayerClip:e=>s.ContextAction.clipEnabled(e.tree,e.nodes),rename:e=>{const{nodes:t}=e;return 1===t.filter(e=>!T.isReplicaChild(e)).length},selectSiblings:e=>e.selection.length>0,selectChildren:e=>e.selection.length>0,selectArtboards:e=>o.default.treeStore.tree.root.children.length>0,sampleColor:e=>e.selection.length>0};const $={zoomIn:e=>!0,zoomOut:e=>!0,zoomToFitAll:e=>!o.default.toolStore.isCodeEditorOpen()&&e.groundNodes.length>0,zoomToFitSelection:e=>o.default.treeStore.selection.length>0&&!o.default.toolStore.isCodeEditorOpen(),resetZoom:e=>!0,toggleShowPixelGrid:()=>!o.default.toolStore.isCodeEditorOpen(),toggleInterface:e=>!o.default.toolStore.isCodeEditorOpen(),toggleRulers:e=>!o.default.toolStore.isCodeEditorOpen(),toggleShowAllLinks:e=>!o.default.toolStore.isCodeEditorOpen(),useInternalEditor:e=>!0,goToTools:e=>!0,goToLayers:e=>!0,goToComponents:e=>!0,goToCodeEditor:e=>!0,goToMarketplace:e=>!0,goToOrganization:e=>!!o.default.documentSettings.organization,useExternalEditor:e=>!0};const V={addEnclosingFrame:e=>s.ContextAction.wrappingEnabled(o.default,e.nodes),addEnclosingStack:e=>s.ContextAction.wrappingEnabled(o.default,e.nodes),removeFramePreservingChildren:e=>s.ContextAction.removeFrameEnabled(e.tree,e.nodes),moveForward:e=>s.ContextAction.sendForwardEnabled(e.tree,e.nodes),moveBackward:e=>s.ContextAction.sendBackwardEnabled(e.tree,e.nodes),alignLeft:e=>e.alignmentEnabled,alignCenter:e=>e.alignmentEnabled,alignRight:e=>e.alignmentEnabled,alignTop:e=>e.alignmentEnabled,alignMiddle:e=>e.alignmentEnabled,alignBottom:e=>e.alignmentEnabled,distributeHorizontal:e=>e.distributionEnabled,distributeVertical:e=>e.distributionEnabled};const U={makeBold:e=>e.onlyTextNodes,makeItalic:e=>e.onlyTextNodes,makeUnderlined:e=>e.onlyTextNodes,chooseTypeface:e=>e.onlyTextNodes};const G={group:e=>s.ContextAction.canJoinInGroup(o.default,o.default.treeStore.selectionAsNodes),ungroup:e=>s.ContextAction.canUngroup(e.tree,o.default.treeStore.selectionAsNodes),flipHorizontal:e=>e.onlyShapeNodes,flipVertical:e=>e.onlyShapeNodes,flattenPath:e=>s.ContextAction.flattenEnabled(o.default.treeStore.selectionAsNodes),reversePath:e=>s.ContextAction.reversePathDirectionEnabled(o.default.treeStore.selectionAsNodes)};const W={makeDesignComponent:e=>s.ContextAction.makeMasterEnabled(e.tree,e.nodes),makeCodeComponent:e=>!0,showComponentMaster:e=>s.ContextAction.canGoToMaster(e.tree,e.nodes)>0,detachComponentInstanceFromMaster:e=>s.ContextAction.canDetachFromMaster(e.nodes),updateComponentMasterFromInstance:e=>s.ContextAction.canUpdateMasterFromInstance(e.tree,e.nodes),resetComponentInstanceOverrides:e=>s.ContextAction.canResetToMasterValues(e.tree,e.nodes),useBuiltInFramerLibrary:e=>{const{currentLibraryVersion:t,builtInLibraryVersion:n}=o.default.serverStore;return!!n&&t!==n}};t.nativeActionTarget=new class NativeActionTarget{constructor(){this.wantedActions=Object.keys(H),this.wantsAction=e=>H[e](p.getMenuContext())}undo(){o.default.undo()}redo(){o.default.redo()}cut(){if(!o.default.isDefaultToolActive())return;const e=o.default.treeStore.selection;a.default.cut(o.default,e)}copy(){if(!o.default.isDefaultToolActive())return;const e=o.default.tree,t=o.default.treeStore.selection;a.default.copy(e,t)}paste(e){if(!o.default.isDefaultToolActive())return;const{tree:t,activeScreen:n,mouse:i}=o.default,r=o.default.treeStore.selection,s=e&&e.fromContextMenu&&0===r.length&&i?i:h.Rect.center(o.default.canvasStore.getCanvasVisibleRect());a.default.paste(t,s,r,n)}selectAll(){s.ContextAction.selectAll(o.default,o.default.selection)}},t.exportActionTarget=new class ExportActionTarget{constructor(){this.wantedActions=Object.keys(j),this.wantsActions=isDocumentShown,this.wantsAction=e=>j[e](p.getMenuContext()),this.exportCanvas=o.default.wrapHandler(()=>{const e=d.exportCanvas(o.default.tree,window.devicePixelRatio,100,!0);e?d.startExport(e,M.ExportMode.Canvas):F.default()})}exportWebPreview(){const e=o.default.tree.withoutDescendants(o.default.treeStore.selectionAsNodes),t=_.lastActiveScreenNode?_.lastActiveScreenNode.id:null;let n=(t?o.default.tree.getNode(t):null)||(e.length>0?e[0]:null);for(;n&&n.parentid;){const e=o.default.tree.getNode(n.parentid);if(!e||e===o.default.tree.root)break;n=e}if(P.getIpcRenderer().send(E.OpenPreview,n?void 0:"behind"),!n)return;const i=_.getPreviewData(n);if(!i)return;const r=JSON.stringify(i,null,2),s=n.name||O.defaultName(n);I.dialog.showSaveDialog({message:"Export your Preview in a Web-ready folder, for publishing or sharing.",defaultPath:s,buttonLabel:"Export",nameFieldLabel:"Save Folder:"},e=>{""!==e&&D.projectServerConnection.buildStandaloneExport(e,r,()=>{P.getIpcRenderer().send(E.ShowPathInFileViewer,e+"/index.html")})})}exportSelection(){x.clickExportButton()}exportAll(){const e=[];o.default.tree.root.walk(t=>{t.exportOptions&&t.exportOptions.count()>0&&e.push(t)}),e.length>0?P.getIpcRenderer().send(E.ExportHTML,d.exportNodes(o.default.tree,e)):F.default()}},t.editActionTarget=new class EditActionTarget{constructor(){this.wantedActions=Object.keys(z),this.wantsActions=isDocumentShown,this.wantsAction=e=>z[e](p.getMenuContext())}copyStyle(){const e=o.default.treeStore.selectionAsNodes,t=1===e.length?e[0]:null;null!==t&&a.default.copyStyle(t).catch(B.unhandledError)}copyImage(){a.default.copyImage(o.default.tree,o.default.treeStore.selection)}copyCSS(){const e=o.default.treeStore.selectionAsNodes,t=1===e.length?e[0]:null;t&&a.default.copyCSSForNode(t,o.default.tree)}copySVG(){const e=o.default.treeStore.selectionAsNodes,t=1===e.length?e[0]:null;t&&c.isExportableAsSVG(t)&&a.default.copySVG(d.renderNodeToSVG(t))}pasteStyle(){const e=o.default.treeStore.selection;a.default.pasteStyle(o.default.tree,e).catch(B.unhandledError)}duplicate(){s.ContextAction.duplicateNodes(o.default,o.default.selection)}delete(){const e=o.default.treeStore.selectionAsNodes;s.ContextAction.deleteAction(o.default,e)}toggleLayerLock(){const e=o.default.treeStore.selectionAsNodes;s.ContextAction.lock(o.default.tree,e)}toggleLayerVisible(){const e=o.default.treeStore.selectionAsNodes;s.ContextAction.visibility(o.default,e)}toggleLayerClip(){const e=o.default.treeStore.selectionAsNodes;s.ContextAction.clip(o.default.tree,e)}rename(){const e=o.default.treeStore.selectionAsNodes;null!==(1===e.length?e[0]:null)&&(o.default.toolStore.setLeftPanelContent(C.LeftPanelContent.Layers),o.default.runAtNextFrame(()=>g.renameSelectedLayer()))}selectSiblings(){s.ContextAction.selectAllSiblings(o.default,o.default.selection)}selectChildren(){s.ContextAction.selectAllChildren(o.default,o.default.selection)}selectArtboards(){const e=o.default.tree.getGroundNodesOfType(l.FrameNode,e=>0===e.rotation);o.default.setSelection(e.map(e=>e.id))}sampleColor(){const e=new u.SampleColorTool;o.default.tool instanceof A.GradientToolEngine?o.default.tool.setTool(e):o.default.setTool(e)}},t.zoomActionTarget=new class ViewActionTarget{constructor(){this.wantedActions=Object.keys($),this.wantsActions=()=>!0,this.wantsAction=e=>!("goToTools"!==e&&"goToLayers"!==e&&"goToComponents"!==e&&"goToCodeEditor"!==e&&"goToMarketplace"!==e&&"goToOrganization"!==e&&!function isDocumentOrCodeEditorShown(){return isDocumentShown()||o.default.toolStore.isCodeEditorOpen()}())&&$[e](p.getMenuContext())}optionsForAction(e){const t=o.default.toolStore.state.leftPanelContent;if("toggleInterface"===e)return{label:o.default.chromeStore.state.chromeIsVisible?"Hide Interface":"Show Interface"};if("toggleRulers"===e)return{label:o.default.persistedUserDefaults.displayRulers?"Hide Rulers":"Show Rulers",visible:L.experiments.isOn("rulers")};if("toggleShowPixelGrid"===e)return{checked:o.default.persistedUserDefaults.showPixelGrid};if("toggleShowAllLinks"===e)return{checked:o.default.persistedUserDefaults.displayAllLinks};if("goToTools"===e)return L.experiments.isOn("bottomToolbar")?{visible:!1}:{checked:t===C.LeftPanelContent.Tools};if("goToLayers"===e)return{checked:t===C.LeftPanelContent.Layers};if("goToComponents"===e)return{checked:t===C.LeftPanelContent.Components};if("goToCodeEditor"===e)return{checked:t===C.LeftPanelContent.CodeEditor};if("goToMarketplace"===e)return{checked:t===C.LeftPanelContent.Marketplace};if("goToOrganization"===e){const{organization:e}=o.default.documentSettings;return{label:`${e&&e.displayName||"Company"} Store`,checked:t===C.LeftPanelContent.Organization}}return"useInternalEditor"===e?{checked:o.default.persistedUserDefaults.useInternalEditor}:"useExternalEditor"===e?{checked:!o.default.persistedUserDefaults.useInternalEditor}:void 0}zoomIn(){o.default.toolStore.isCodeEditorOpen()?o.default.persistedUserDefaults.editorFontSizeIncrease():(o.default.canvasStore.zoomIn(),i.triggerCanvasZoomEvent({source:"keyboard"}))}zoomOut(){o.default.toolStore.isCodeEditorOpen()?o.default.persistedUserDefaults.editorFontSizeDecrease():(o.default.canvasStore.zoomOut(),i.triggerCanvasZoomEvent({source:"keyboard"}))}zoomToFitAll(){o.default.zoomToFitAll()}zoomToFitSelection(){const e=o.default.treeStore.selectionAsNodes,t=o.default.tree.getBoundingFrameForNodes(e.length>0?e:o.default.tree.getGroundNodes());o.default.canvasStore.zoomToCenter(t)}resetZoom(){o.default.toolStore.isCodeEditorOpen()?o.default.persistedUserDefaults.editorFontSizeReset():o.default.canvasStore.setZoom(1,{animated:!0})}toggleInterface(){o.default.chromeStore.setChromeVisible(!o.default.chromeStore.state.chromeIsVisible)}toggleRulers(){o.default.persistedUserDefaults.displayRulers=!o.default.persistedUserDefaults.displayRulers,i.triggerToggleRulersEvent({toggleVisible:o.default.persistedUserDefaults.displayRulers})}toggleShowPixelGrid(){o.default.persistedUserDefaults.showPixelGrid=!o.default.persistedUserDefaults.showPixelGrid}toggleShowAllLinks(){o.default.persistedUserDefaults.displayAllLinks=!o.default.persistedUserDefaults.displayAllLinks}goToTools(){o.default.toolStore.setLeftPanelContent(C.LeftPanelContent.Tools)}goToLayers(){o.default.toolStore.setLeftPanelContent(C.LeftPanelContent.Layers)}goToComponents(){o.default.toolStore.setLeftPanelContent(C.LeftPanelContent.Components)}goToCodeEditor(){o.default.toolStore.setLeftPanelContent(C.LeftPanelContent.CodeEditor)}goToMarketplace(){o.default.toolStore.setLeftPanelContent(C.LeftPanelContent.Marketplace)}goToOrganization(){o.default.toolStore.setLeftPanelContent(C.LeftPanelContent.Organization)}useInternalEditor(){o.default.persistedUserDefaults.useInternalEditor=!0}useExternalEditor(){o.default.persistedUserDefaults.useInternalEditor=!1}},t.toolActionTarget=new class ToolActionTarget{constructor(){this.wantedActions=m.Tools.allNames().map(e=>m.Tools.actionForName(e)),this.wantsActions=isDocumentShown,this.wantsAction=e=>"string"!=typeof e||"toolPath"!==e&&!e.endsWith("Shape")||o.default.shapeModeActive;for(const e of m.Tools.allNames()){const t=m.Tools.actionForName(e);this[t]=this[t]||(()=>{o.default.setToolEnum(m.Tools[e])})}}optionsForAction(e){if(e===m.Tools.actionForCase(m.Tools.Comment))return{visible:L.experiments.isOn("feedback")}}toolPath(){o.default.setSelection([]),o.default.setToolEnum(m.Tools.Path)}},t.layoutActionTarget=new class LayoutActionTarget{constructor(){this.wantedActions=Object.keys(V),this.wantsActions=isDocumentShown,this.wantsAction=e=>V[e](p.getMenuContext())}addEnclosingFrame(){s.ContextAction.addFrame(o.default,o.default.treeStore.selectionAsNodes),i.triggerLayoutFrameEvent({source:"main_menu"})}addEnclosingStack(){s.ContextAction.addStack(o.default,o.default.treeStore.selectionAsNodes)}removeFramePreservingChildren(){s.ContextAction.removeFrame(o.default,o.default.treeStore.selectionAsNodes)}moveForward(){s.ContextAction.sendForward(o.default,o.default.treeStore.selectionAsNodes)}moveBackward(){s.ContextAction.sendBackward(o.default,o.default.treeStore.selectionAsNodes)}alignLeft(){const e=o.default.tree.withoutDescendants(o.default.treeStore.selectionAsNodes);f.ContextAlignment.align(o.default.tree,e,"Left")}alignCenter(){const e=o.default.tree.withoutDescendants(o.default.treeStore.selectionAsNodes);f.ContextAlignment.align(o.default.tree,e,"Center")}alignRight(){const e=o.default.tree.withoutDescendants(o.default.treeStore.selectionAsNodes);f.ContextAlignment.align(o.default.tree,e,"Right")}alignTop(){const e=o.default.tree.withoutDescendants(o.default.treeStore.selectionAsNodes);f.ContextAlignment.align(o.default.tree,e,"Top")}alignMiddle(){const e=o.default.tree.withoutDescendants(o.default.treeStore.selectionAsNodes);f.ContextAlignment.align(o.default.tree,e,"Middle")}alignBottom(){const e=o.default.tree.withoutDescendants(o.default.treeStore.selectionAsNodes);f.ContextAlignment.align(o.default.tree,e,"Bottom")}distributeHorizontal(){const e=o.default.tree.withoutDescendants(o.default.treeStore.selectionAsNodes);f.ContextAlignment.distribute(o.default.tree,e,"Horizontally")}distributeVertical(){const e=o.default.tree.withoutDescendants(o.default.treeStore.selectionAsNodes);f.ContextAlignment.distribute(o.default.tree,e,"Vertically")}},t.textActionTarget=new class TextActionTarget{constructor(){this.wantedActions=Object.keys(U),this.wantsActions=isDocumentShown,this.wantsAction=e=>U[e](p.getMenuContext())}makeBold(){this.formatCurrentSelection("bold")}makeItalic(){this.formatCurrentSelection("italic")}makeUnderlined(){this.formatCurrentSelection("underline")}formatCurrentSelection(e){if(o.default.toolStore.isTextEditToolActive()){const{key:t,code:n}=this.keydownEventOptionsForType(e);o.default.runAtNextFrame(()=>{y.dispatchKeyDownEvent(Number(n),{metaKey:!0,key:t,keyIdentifier:`vekter.${e}`})})}else this.applyFormattingForType(e)}keydownEventOptionsForType(e){switch(e){case"bold":return{key:"b",code:"66"};case"italic":return{key:"i",code:"73"};case"underline":return{key:"u",code:"85"};default:return N.default(e)}}applyFormattingForType(e){let t;switch(e){case"bold":t=R.StyledTextDraft.toggleBold;break;case"italic":t=R.StyledTextDraft.toggleItalic;break;case"underline":t=R.StyledTextDraft.toggleUnderline;break;default:N.default(e)}const{selection:n,tree:i}=o.default,r=i.getNodes(n);l.onlyIncludes(r,[l.TextNode])&&(o.default.beginUndoGroup(),r.forEach(e=>{const n=e.styledText;o.default.updateNode(e.id,{styledText:t(n)})}),o.default.endUndoGroup())}chooseTypeface(){o.default.toolStore.setTypeFacePanelOpen(!0)}},t.shapeActionTarget=new class ShapeActionTarget{constructor(){this.wantedActions=Object.keys(G),this.wantsActions=isDocumentShown,this.wantsAction=e=>G[e](p.getMenuContext())}group(){s.ContextAction.joinInGroup(o.default,o.default.treeStore.selectionAsNodes)}ungroup(){s.ContextAction.ungroup(o.default,o.default.treeStore.selectionAsNodes)}flip(e){const t=b.traitFilter(o.default.treeStore.selectionAsNodes,l.isVectorNode);k.flipShapes(o.default.tree,o.default,t,e)}flipHorizontal(){this.flip("horizontal")}flipVertical(){this.flip("vertical")}flattenPath(){s.ContextAction.flattenEnabled(o.default.treeStore.selectionAsNodes)&&s.ContextAction.flattenShapes(o.default,o.default.treeStore.selectionAsNodes)}reversePath(){const e=1===o.default.treeStore.selectionAsNodes.length?o.default.treeStore.selectionAsNodes[0]:void 0;e&&v.hasPath(e)&&s.ContextAction.reversePathDirection(o.default.tree,e)}},t.componentActionTarget=new class ComponentActionTarget{constructor(){this.wantedActions=Object.keys(W),this.wantsActions=isDocumentShown,this.wantsAction=e=>W[e](p.getMenuContext())}makeDesignComponent(){s.ContextAction.makeMaster(o.default,o.default.treeStore.selectionAsNodes),i.triggerComponentDesignCreateEvent({source:"main_menu"})}makeCodeComponent(){s.ContextAction.createCodeComponent(o.default)}showComponentMaster(){s.ContextAction.goToMaster(o.default,o.default.treeStore.selectionAsNodes)}detachComponentInstanceFromMaster(){s.ContextAction.detachFromMaster(o.default,o.default.treeStore.selectionAsNodes)}updateComponentMasterFromInstance(){s.ContextAction.updateMasterFromInstance(o.default,o.default.treeStore.selectionAsNodes)}resetComponentInstanceOverrides(){s.ContextAction.resetToMasterValues(o.default.tree,o.default.treeStore.selectionAsNodes)}useBuiltInFramerLibrary(){const{builtInLibraryVersion:e}=o.default.serverStore;e&&D.projectServerConnection.installFramerLibrary(e)}},t.storeActionTarget=new class StoreActionTarget{constructor(){this.wantedActions=["showStoreFeatured","showStoreRecents","showStoreFavorites","showStorePublished"],this.wantsAction=e=>!0}showStoreFeatured(){S.PublicStore.goToPageBrowse()}showStoreRecents(){S.PublicStore.goToPageRecent()}showStoreFavorites(){S.PublicStore.goToPageFavorites()}showStorePublished(){S.PublicStore.goToPagePublished()}},t.documentActionTarget=r.ActionTarget.chain(t.nativeActionTarget).then(t.exportActionTarget).then(t.editActionTarget).then(t.zoomActionTarget).then(t.toolActionTarget).then(t.layoutActionTarget).then(t.textActionTarget).then(t.shapeActionTarget).then(t.componentActionTarget).then(t.storeActionTarget)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(2),r=n(44);class MouseTracker extends i.Component{constructor(){super(...arguments),this.tracking=!1,this.state={wantsCursorOverlay:!1,lastTrackedPoint:null},this.ref=i.createRef(),this.handleMouseDown=o.default.wrapMouseHandler(e=>{if(!r.default.isLeftMouseClick(e))return;const t=e.nativeEvent;this.deltaReferencePoint=this.getPoint(t);const n=this.getPoint(t);n&&(this.props.onDragStart&&this.props.onDragStart(n,t.shiftKey),this.startTracking(n),this.handleMouseMove(t))}),this.handleMouseMove=o.default.wrapMouseHandler(e=>{const t=this.getPoint(e)||this.state.lastTrackedPoint;this.setState(Object.assign({},this.state,{lastTrackedPoint:t})),e.preventDefault(),this.props.onDrag&&t&&this.props.onDrag(t,e.shiftKey)}),this.handleStopTrackingEvent=o.default.wrapHandler(e=>{if(this.deltaReferencePoint=null,!this.tracking)return;const t=(e?this.getPoint(e):null)||this.state.lastTrackedPoint;this.stopTracking(),this.props.onDragEnd&&t&&this.props.onDragEnd(t,!!e&&e.shiftKey)}),this.handleKeyEvent=o.default.wrapKeyHandler(e=>{r.default.isKey(e,r.default.Key.escape)&&this.handleStopTrackingEvent()}),this.startTracking=e=>{this.tracking=!0,o.default.mouseStore.setChromePointerEvents(!1),window.addEventListener("mouseup",this.handleStopTrackingEvent),window.addEventListener("contextmenu",this.handleStopTrackingEvent),window.addEventListener("mousemove",this.handleMouseMove),window.addEventListener("keydown",this.handleKeyEvent),window.addEventListener("keyup",this.handleKeyEvent),this.setState({lastTrackedPoint:e,wantsCursorOverlay:!this.props.cursor})},this.stopTracking=()=>{this.tracking&&(this.tracking=!1,o.default.mouseStore.setChromePointerEvents(!0),window.removeEventListener("mousemove",this.handleMouseMove),window.removeEventListener("mouseup",this.handleStopTrackingEvent),window.removeEventListener("contextmenu",this.handleStopTrackingEvent),window.removeEventListener("keydown",this.handleKeyEvent),window.removeEventListener("keyup",this.handleKeyEvent),this.setState({lastTrackedPoint:null,wantsCursorOverlay:!this.props.cursor}))},this.getPoint=e=>{const t=this.ref.current;if(!t)return null;const{clientX:n,clientY:i}=e,{delta:o,limit:r}=this.props;if(o)return this.deltaReferencePoint?{x:n-this.deltaReferencePoint.x,y:i-this.deltaReferencePoint.y}:{x:n,y:i};let s=n-t.getBoundingClientRect().left,a=i-t.getBoundingClientRect().top;const l=t.clientWidth,c=t.clientHeight;return(void 0===r||r)&&(s=Math.max(0,Math.min(s,l)),a=Math.max(0,Math.min(a,c))),{x:s/l,y:a/c}}}render(){return i.createElement("div",{style:this.props.style,onMouseDown:this.handleMouseDown,ref:this.ref,draggable:!1},this.props.children,i.createElement("div",{style:this.state.lastTrackedPoint?MouseTracker.lockedCursorOverlay(this.props.cursor):void 0}))}componentWillUnmount(){this.stopTracking()}}MouseTracker.lockedCursorOverlay=e=>({position:"fixed",top:-screen.height,left:-screen.width,width:2*screen.width,height:2*screen.height,zIndex:2500,cursor:e,pointerEvents:"auto",opacity:0,transform:"translate3d(0, 0, 0)"}),t.default=MouseTracker},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(3);var r;!function(e){e.Frame="Frame-NUX",e.Graphic="Graphic-NUX",e.NavigationLink="NavigationLink-NUX",e.Stack="Stack-NUX",e.Scroll="Scroll-NUX",e.Page="Page-NUX"}(r=t.PropertyPanelHintIdentifier||(t.PropertyPanelHintIdentifier={}));function containerStyle(e){switch(e){case r.Frame:case r.Graphic:return a}}t.PropertyPanelHint=class PropertyPanelHint extends i.Component{render(){const{type:e}=this.props,t=function HintInfoForType(e){switch(e){case r.Frame:return u;case r.Graphic:return h;case r.NavigationLink:return p;case r.Stack:return g;case r.Scroll:return m;case r.Page:return f}}(this.props.type);return i.createElement("div",{style:containerStyle(e)},i.createElement("div",{style:d(t.icon)}),i.createElement("h1",{style:c},t.title),i.createElement("p",{style:l},t.body))}};const s={width:"100%",padding:"30px 0",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},a=Object.assign({},s,{borderBottom:`1px solid ${o.theme.propertyPanelDivider}`}),l={fontWeight:300,fontSize:"11px",lineHeight:1.6,textAlign:"center",color:o.theme.componentsEmptyText,cursor:"default",margin:2,padding:"0 10px"},c=Object.assign({},l,{fontWeight:500,marginBottom:5,color:o.theme.componentsEmptyHeader}),d=e=>({background:`no-repeat center ${o.theme.backgroundImage(`icon-${e}`)}`,width:"100%",height:21,marginBottom:11});const u={icon:"layout-frame-active",title:"How to use Frames",body:"Frames can be anything from screens to buttons to cards. You can draw a Frame within a Frame."},h={icon:"drawing-graphic-active",title:"How to use Graphics",body:"Draw a graphic container, then add shapes and paths to create icons, illustrations, or logos."},p={icon:"interactive-link-active",title:"How to create Links",body:["Select a Frame and connect it",i.createElement("br",{key:"br1"}),"to any other Frame to create",i.createElement("br",{key:"br2"}),"simple screen transitions."]},g={icon:"layout-stack-active",title:"How to use Stacks",body:["Create a Stack and add Frames",i.createElement("br",{key:"br1"}),"for automatic distribution. Drag",i.createElement("br",{key:"br2"}),"and drop them to reorder."]},m={icon:"interactive-scroll-active",title:"How to add Scrolling",body:["Draw a scrollable area, then",i.createElement("br",{key:"br1"}),"drag the connector to any Frame",i.createElement("br",{key:"br2"}),"that exceeds its width or height."]},f={icon:"interactive-page-active",title:"How to add Paging",body:["Draw a swipeable area, then",i.createElement("br",{key:"br1"}),"drag the connector to any",i.createElement("br",{key:"br2"}),"Frame. Repeat to add pages."]}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(7),o=n(1),r=n(68),s=n(67),a=n(26),l=n(27),c=n(165);var d;function shadowIndex(e,t,n){if(r.hasBoxShadow(e)&&e.boxShadows){const i=e.boxShadows.toArray();let o=-1,r=-1;for(const e of i){if(r++,(t===d.Inset?e.inset:!e.inset)&&++o===n)return r}return-1}return t===d.Inset?-1:n}function shadowReducer(e,t,n){const{enabledInsideShadowLevels:i,enabledOutsideShadowLevels:r}=e,s=t===d.Inset?i[n]:r[n],u=t===d.Inset?e.nodeBoxShadows:e.nodeShadows,h=[],p=[],g=[],m=[],f=[],y=[],v=[];let b=!1;for(let a=0,E=u.length;a<E;a++){const e=u[a],i=t===d.Inset?e.insideShadows[n]:e.outsideShadows[n];i?(h.push(i.enabled),b=c.isBoxShadow(i)&&!l.hasShape(e.node),s&&!i.enabled||(p.push(i.color),"string"==typeof i.color&&g.push(Math.round(100*o.ConvertColor.getAlpha(i.color))),m.push(i.x),f.push(i.y),y.push(i.blur),c.isBoxShadow(i)&&v.push(i.spread))):h.push(!1)}const k=a.commonValue(h),S=a.commonValue(p),C=a.commonValue(g),x=a.commonValue(m),w=a.commonValue(f),T=a.commonValue(y),P=a.commonValue(v);return{enabled:!0===k,indeterminate:null===k,color:S||null,alpha:null!==C?C:null,x:null!==x?x:null,y:null!==w?w:null,blur:null!==T?T:null,spread:null!==P?P:null,shadowSpreadEnabled:b}}function shadowDefaults(e,t,n){const i=shadowReducer(e,t,n),r={};i.color&&(r.color=i.color),o.isFiniteNumber(i.x)&&(r.x=i.x),o.isFiniteNumber(i.y)&&(r.y=i.y),o.isFiniteNumber(i.blur)&&(r.blur=i.blur);const s=Object.assign({},r);return o.isFiniteNumber(i.spread)&&(s.spread=i.spread),{shadow:r,boxShadow:s}}!function(e){e[e.Inset=0]="Inset",e[e.Outset=1]="Outset"}(d=t.ShadowType||(t.ShadowType={})),t.shadowIndex=shadowIndex,t.anyEnabledShadow=function anyEnabledShadow(e,t,n){for(const i of e){const e=shadowIndex(i,t,n);let o;if(r.hasBoxShadow(i)&&i.boxShadows&&(o=i.boxShadows.get(e)),s.hasShadow(i)&&i.shadows&&(o=i.shadows.get(e)),o&&o.enabled)return!0}return!1},t.shadowReducer=shadowReducer,t.removeDisabledLevels=function removeDisabledLevels(e,t){const n={ids:[],updates:[]},i=e.enabledOutsideShadowLevels.map((e,t)=>!1===e?t:null).filter(o.isFiniteNumber),a=e.enabledInsideShadowLevels.map((e,t)=>!1===e?t:null).filter(o.isFiniteNumber);return e.nodeShadows.forEach(e=>{const{node:o}=e;let l=null;if(r.hasBoxShadow(o)&&o.boxShadows&&(l=o.boxShadows),s.hasShadow(o)&&o.shadows&&(l=o.shadows),!l)return;const c=[];if(t===d.Outset){const e=i.map(e=>shadowIndex(o,d.Outset,e));c.push(...e)}else if(t===d.Inset&&r.hasBoxShadow(o)){const e=a.map(e=>shadowIndex(o,d.Inset,e));c.push(...e)}let u=l.filter((e,t)=>-1===c.indexOf(t));0===u.count()&&(u=void 0),r.hasBoxShadow(o)&&(n.updates.push({boxShadows:u}),n.ids.push(o.id)),s.hasShadow(o)&&(n.updates.push({shadows:u}),n.ids.push(o.id))}),n},t.addShadowLevel=function addShadowLevel(e,t){const n={ids:[],updates:[]},o=t===d.Inset?e.enabledInsideShadowLevels.length:e.enabledOutsideShadowLevels.length;return e.nodeShadows.forEach(e=>{const{node:a,outsideShadows:l,insideShadows:u}=e;if(t===d.Outset){const e=o-l.length;if(r.hasBoxShadow(a)){const t=Array(e).fill(null).map(()=>new c.BoxShadow({enabled:!1})),o=(a.boxShadows||i.List([])).push(...t,new c.BoxShadow({inset:!1}));n.ids.push(a.id),n.updates.push({boxShadows:o})}else if(s.hasShadow(a)){const t=Array(e).fill(null).map(()=>new c.Shadow({enabled:!1})),o=(a.shadows||i.List([])).push(...t,new c.Shadow);n.ids.push(a.id),n.updates.push({shadows:o})}}else if(r.hasBoxShadow(a)){const e=o-u.length,t=Array(e).fill(null).map(()=>new c.BoxShadow({enabled:!1,inset:!0})),r=(a.boxShadows||i.List([])).push(...t,new c.BoxShadow({inset:!0}));n.ids.push(a.id),n.updates.push({boxShadows:r})}}),n},t.shadowDefaults=shadowDefaults,t.enableShadows=function enableShadows(e,t,n){const o=shadowDefaults(e,t,n),a=t===d.Inset,l=[],u=[];return(t===d.Inset?e.nodeBoxShadows:e.nodeShadows).forEach(e=>{const{node:h}=e,p=t===d.Inset?e.insideShadows:e.outsideShadows,g=p[n];if(g&&g.enabled)return;const m=p.length;if(m>=n+1){const e=shadowIndex(h,t,n);if(r.hasBoxShadow(h)&&h.boxShadows){const t=h.boxShadows.map((t,n)=>n!==e?t:new c.BoxShadow(t.merge(Object.assign({},o.boxShadow,{enabled:!0}))));l.push(h.id),u.push({boxShadows:t})}if(s.hasShadow(h)&&h.shadows){const t=h.shadows.map((t,n)=>n!==e?t:new c.Shadow(t.merge(Object.assign({},o.shadow,{enabled:!0}))));l.push(h.id),u.push({shadows:t})}}else{const e=n+1-m-1;if(r.hasBoxShadow(h)){const t=Array(e).fill(null).map(()=>new c.BoxShadow({enabled:!1,inset:a})),n=new c.BoxShadow(Object.assign({},o.shadow,{inset:a})),r=(h.boxShadows||i.List([])).push(...t,n);l.push(h.id),u.push({boxShadows:r})}if(s.hasShadow(h)){const t=Array(e).fill(null).map(()=>new c.Shadow({enabled:!1})),n=new c.Shadow(o),r=(h.shadows||i.List([])).push(...t,n);l.push(h.id),u.push({shadows:r})}}}),{ids:l,updates:u}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(1),o=n(2),r=n(57);t.addPreset=function addPreset(e){const{persistedUserDefaults:t}=o.default;"string"==typeof e?t.colorPresets=t.colorPresets.push(e):t.gradientColorStopPresets=t.gradientColorStopPresets.push(e)},t.deletePreset=function deletePreset(e){const{persistedUserDefaults:t}=o.default;if("string"==typeof e){const n=t.colorPresets.filter(t=>!i.ConvertColor.equals(t,e));t.colorPresets=n}else{const n=t.gradientColorStopPresets.filter(t=>!r.equalColorStops(t,e));t.gradientColorStopPresets=n}},t.movePreset=function movePreset(e,t){const{persistedUserDefaults:n}=o.default;if("string"==typeof e){const{colorPresets:i}=n,o=i.indexOf(e),r=i.delete(o).insert(t,e);n.colorPresets=r}else{const{gradientColorStopPresets:i}=n,o=i.indexOf(e),r=i.delete(o).insert(t,e);n.gradientColorStopPresets=r}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(8),r=n(30),s=n(458),a=n(47),l=n(80),c=n(42),d=n(459),u=n(26),h=n(2);t.SplitInFourInputsRow=class SplitInFourInputsRow extends i.PureComponent{constructor(){super(...arguments),this.mainInput=null,this.fusedNumberInput=null,this.state={fusedActiveIndex:-1},this.onSegmentedSelect=h.default.wrapHandler(e=>{const{fusedTraitFilter:t,onUpdate:n}=this.props;let i=this.nodes();t&&(i=i.filter(e=>t(e)));const o={[this.props.splitInFourKey]:0!==e};n?n(o):h.default.updateNodesDirect(i,o)}),this.onMainInputChange=h.default.wrapHandler((e,t)=>{const{mainProperty:n,updateAddition:i,fusedProperties:o,splitInFourKey:r,fusedTraitFilter:s,willChange:a,didChange:l,onUpdate:c,fusedValues:d,mainValue:u}=this.props;if(h.default.beginUndoGroup(),a&&a(e,t),c){const t=Object.assign({[n]:e,[r]:!1},i);p(d,u,o,e,t),c(t)}else this.nodes().forEach(t=>{const a=Object.assign({[n]:e},i);if(s(t)){a[r]=!1;const i=o.map(e=>t[e]);p(i,t[n],o,e,a)}h.default.updateNode(t.id,a)});l&&l(e,t),h.default.endUndoGroup()}),this.onFusedInputChange=h.default.wrapHandler((e,t)=>{const{fusedProperties:n,updateAddition:i,willChange:o,didChange:r,onUpdate:s}=this.props,a=n[e];h.default.beginUndoGroup(),o&&o();const l=Object.assign({[a]:t},i);s?s(l):h.default.updateNodes(this.nodeIds(),l),r&&r(),h.default.endUndoGroup()}),this.onFusedFocusChange=e=>{this.setState({fusedActiveIndex:e})},this.setMainNumberInput=e=>{this.mainInput=e},this.setFusedNumberInput=e=>{this.fusedNumberInput=e},this.nodes=e=>{let t=this.props.nodes;void 0!==e&&(t=e.nodes);const{mainTraitFilter:n}=void 0!==e?e:this.props;return n?t.filter(n):t},this.enableFusedInput=e=>{const{fusedTraitFilter:t}=void 0!==e?e:this.props,n=this.nodes(e);return!t||n.filter(t).length===n.length},this.nodeIds=()=>this.nodes().map(e=>e.id),this.segmentedIconOverride=()=>{const{fusedActiveInputIcons:e,segmentedControlIndex:t}=this.props,{fusedActiveIndex:n}=this.state;if(void 0!==e&&0!==t&&n>=0)return e[n]}}componentDidUpdate(e){const t=e.segmentedControlIndex,n=this.props.segmentedControlIndex;t!==n&&c.equalSelection(e.nodes,this.props.nodes)&&(0===n&&null!==this.mainInput&&this.mainInput.focus(),1===n&&null!==this.fusedNumberInput&&this.fusedNumberInput.focus())}render(){const{title:e,checkbox:t,colorpicker:n,onContextMenu:c,segmentedIcons:u,mainValue:h,segmentedControlIndex:p,fusedLabels:g,fusedValues:m,toggleTitles:f,minValue:y,maxValue:v,mainDefaultValue:b,fusedDefaultValues:k}=this.props;if(void 0===h)return null;const S="string"==typeof h?parseFloat(h):h,C=this.enableFusedInput(this.props);return i.createElement("div",null,i.createElement(o.default,{title:e,checkbox:t,onContextMenu:c},n,i.createElement(r.NumberInput,{value:1!==p?h:null,onChange:this.onMainInputChange,enabled:!0,min:y,max:v,ref:this.setMainNumberInput,defaultValue:b}),C?i.createElement(a.SegmentedControl,{selectedIndex:p,icons:u,onSelect:this.onSegmentedSelect,overrideSecondIcon:this.segmentedIconOverride(),titles:f}):i.createElement(l.SliderInput,{value:1!==p?S:null,onChange:this.onMainInputChange,min:y,max:v})),C&&1===p&&i.createElement(o.default,{onContextMenu:c},i.createElement(s.default,{values:m,minValues:new Array(4).fill(y),onValueChange:this.onFusedInputChange,onFocusChange:this.onFusedFocusChange,ref:this.setFusedNumberInput,defaultValues:k})),C&&1===p&&i.createElement(o.default,null,i.createElement(d.InputLabels,{labels:g})))}};const p=(e,t,n,i,o)=>{null!==u.commonValue([...e,t])&&n.forEach(e=>{o[e]=i})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(1),r=n(2),s=n(51),a=n(86),l=n(30),c=n(80);function TokenLabel({name:e,columns:t=2}){return i.createElement("label",{style:2===t?d:u},e)}function colorTokenName(e){if(!s.isTokenCSSVariable(e))return null;const t=s.tokenIdFromCSSVariable(e),n=t?a.findTokenNode(t,r.default.tree):null;return n?n.name:null}t.ColorAlphaControls=i.memo(function ColorAlphaControls({color:e,alpha:t,onAlphaChange:n,enabled:r}){const a=colorTokenName(e);if(a&&!1!==r)return i.createElement(TokenLabel,{name:a});const d=!s.isTokenCSSVariable(e)&&!1!==r;let u;return d&&(void 0!==t?o.isFiniteNumber(t)&&(u=t):u=Math.round(100*o.ConvertColor.getAlpha(e))),i.createElement(i.Fragment,null,i.createElement(l.NumberInput,{value:u,onChange:n,min:0,max:100,unit:"%",enabled:d,defaultValue:100}),i.createElement(c.SliderInput,{value:u,onChange:n,enabled:d}))}),t.TokenLabel=TokenLabel,t.colorTokenName=colorTokenName;const d={fontSize:11,lineHeight:"16px",color:"var(--framerInternalUI-propertyPanelTitle)",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",alignSelf:"center",width:140,padding:"0 5px"},u=Object.assign({},d,{width:70})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.Copy="copy",e.TabChange="TabChange",e.ThreadCreate="thread-create",e.ThreadSelect="thread-select",e.ThreadUpdate="thread-update",e.ThreadArchive="thread-archive",e.CommentCreate="comment-create",e.CommentEdit="comment-edit",e.CommentEditCancel="comment-edit-cancel",e.CommentUpdate="comment-update",e.CommentDelete="comment-delete",e.ContextMenuOpen="context-menu-open"}(t.FeedbackActionType||(t.FeedbackActionType={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(3),r=n(13),s=n(10),a=n(2),l=n(6),c=e=>r.layout.updateLayoutStyleElement(e),d=e=>o.theme.updateActiveThemeStyleElement(e);class Themed extends i.PureComponent{static calculateState(){return{hasDarkAppearance:a.default.documentSettings.hasDarkAppearance}}componentWillUnmount(){o.theme.updateActiveThemeStyleElement(null),r.layout.updateLayoutStyleElement(null)}render(){return i.createElement("div",null,i.createElement("style",{ref:d,"data-export":"false",dangerouslySetInnerHTML:{__html:o.theme.cssTextForActiveTheme()}}),i.createElement("style",{ref:c,"data-export":"false",dangerouslySetInnerHTML:{__html:r.layout.cssText()}}),this.props.children)}}Themed.engineChangeKeys=l.EngineChangeFlags.DocumentSettings,t.ThemedContainer=s.default(Themed)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(1),o=n(537),r=n(241);t.lightTheme=new class LightTheme{constructor(){this.name="light",this.tint=o.Palette.blue,this.tintDark="#0088EE",this.componentTint="#85F",this.toolbarBackground="#FFF",this.toolbarIconIndicator="#09F",this.tabContentBackground="#FBFBFB",this.tabContentBackgroundHover="#f7f7f7",this.tabContentAccessoryBackground="#FDFDFD",this.tabContentDivider=o.Palette.cloud,this.toolSectionHeaderText=o.Palette.oil,this.toolText="#888",this.toolTextActive=this.tint,this.toolAccelerator="#BBB",this.scrollerThumbBackground="rgba(0, 0, 0, 0.25)",this.canvasBackground="#EEE",this.rulerBackground="#FFF",this.rulerBorderColor="#DDD",this.rulerTextColor="#BBB",this.guideColor="#00E4F5",this.guideHighlightColor="#0099FF",this.panelEmptyHeader="#000",this.panelEmptyText="#999",this.layerPanelRowOdd="rgba(251, 251, 251, 1.00)",this.layerPanelRowEven="rgba(253, 253, 253, 1.00)",this.layerPanelAccent=o.Palette.blue,this.layerPanelText="black",this.layerPanelDimmedText=i.ConvertColor.multiplyAlpha(i.Color.toRgbString(i.Color(this.layerPanelText)),.5),this.layerPanelSelection=o.Palette.blue,this.layerPanelSelectionText="#FFF",this.layerPanelSelectionDimmedText=i.ConvertColor.multiplyAlpha(i.Color.toRgbString(i.Color(this.layerPanelSelectionText)),.5),this.layerPanelFieldPlaceholderText="#999",this.layerPanelMasterOrReplica="#85F",this.layerPanelComponentLabel="#AAA",this.layerPanelComponentLabelSelected="rgba(255,255,255,.5)",this.propertyPanelHeaderBackground="#FDFDFD",this.propertyPanelBackground=this.tabContentBackground,this.propertyPanelBackgroundDivider="#DDD",this.propertyPanelInputBorder="#EEE",this.propertyPanelTitle=o.Palette.oil,this.propertyPanelLabel=o.Palette.ash,this.propertyPanelLabelInactive=o.Palette.silver,this.propertyPanelDivider=this.propertyPanelInputBorder,this.propertyPanelInputBackground="#FFF",this.propertyPanelInputBorderInactive=this.propertyPanelInputBorder,this.propertyPanelInputBorderOverlay="rgba(0, 0, 0, 0.07)",this.propertyPanelInputText="#000",this.propertyPanelInputTextInactive="#BBB",this.propertyPanelInputLabel="#BBBBBB",this.propertyPanelInputLabelInactive="#DDD",this.propertyPanelButtonBorderPrimary="rgba(0,0,0,.1)",this.propertyPanelButtonBackground=this.propertyPanelInputBackground,this.propertyPanelButtonBackgroundInactive="#FDFDFD",this.propertyPanelButtonBackgroundPrimary=this.tint,this.propertyPanelButtonBackgroundPressed="#fafafa",this.propertyPanelButtonText=this.propertyPanelInputText,this.propertyPanelButtonTextInactive="#CCC",this.propertyPanelButtonTextPrimary="#FFF",this.propertyPanelHeaderBorder=this.propertyPanelInputBorder,this.propertyPanelSegmentDivider=this.propertyPanelInputBorder,this.pinsFrameBorder=this.propertyPanelInputBorder,this.colorTokenLabel="rgb(0, 0, 0, 0.3)",this.colorTokenRowBackgroundActive="#FBFBFB",this.colorTokenPlaceholderPreviewBackground="rgba(0, 0, 0, 0.02)",this.colorTokenPlaceholderPreviewBorder="rgba(33, 33, 33, 0.1)",this.colorSwatchBorder="rgba(0,0,0,0.1)",this.colorTokenSwatchBorder="rgba(0,0,0,0.1)",this.constraintsReferenceFrame="#DDD",this.codeExportPanelCSSText=r.lightSyntaxColors.gray,this.codeExportPanelCSSProp=r.lightSyntaxColors.lightBlue,this.codeExportPanelCSSValueNumber=r.lightSyntaxColors.orange,this.codeExportPanelCSSValueString=r.lightSyntaxColors.purple,this.sectionHeaderText=this.propertyPanelTitle,this.sectionHeaderPopUp="#aaa",this.searchPlaceholder="#bbb",this.searchPlaceholderFocused="#ddd",this.focusRing="#0099ff",this.sliderKnobFill="white",this.sliderKnobShadow="0 1px 0 1px rgba(0, 0, 0, 0.05), 0 0 0 1px rgba(0, 0, 0, 0.1)",this.sliderTrack="#ddd",this.sliderTrackHighlight="#0099ff",this.sliderTrackInactive="#eee",this.checkboxBackground="white",this.checkboxBackgroundPressed="#f8f8f8",this.checkboxBackgroundChecked="#44bbff",this.checkboxBorder="#ddd",this.checkboxBorderChecked="#0099ff",this.checkboxBorderInnerChecked="#0099ff",this.checkboxBackgroundCheckedPressed=this.checkboxBorderChecked,this.checkboxIndicator="white",this.popoverBackground="white",this.popoverShadow="0 5px 10px rgba(0,0,0,.25), 0 0 0 1px rgba(0,0,0,.05)",this.popoverArrowBorder="1px solid rgba(0,0,0,.1)",this.popoverArrowBorderFlipped="1px solid rgba(0,0,0,.25)",this.layerCreatePreview=o.Palette.aluminum,this.frameTitle="#BBB",this.frameOutline=o.Palette.silver,this.framePreview="rgba(0,0,0,.03)",this.framePreviewOutline="rgba(0,0,0,0.1)",this.selectionBox="rgba(125,125,125,.03)",this.selectionBoxOutline="rgba(125,125,125,0.3)",this.selectionBoxBackground="rgba(0, 153, 255, 0.2)",this.selectionBoxComponentBackground="rgba(136, 85, 255,0.2)",this.resizeBox=o.Palette.blue,this.resizeHandle=o.Palette.white,this.resizeHandleOutline=o.Palette.blue,this.snapLine=o.Palette.magenta,this.snapConstraint="#FFD700",this.parentHighlight=o.Palette.blue,this.shapeContainerOutline=o.Palette.silver,this.segmentAnchor=o.Palette.white,this.segmentAnchorOutline=o.Palette.blue,this.pathCurvePreview=o.Palette.blue,this.navigationConnectionLine="rgba(135, 135, 135, 0.5)",this.textEditorOutline=o.Palette.silver,this.packageTitle="#333",this.packageTitleBackground="#FDFDFD",this.packageTitleBorder=this.propertyPanelInputBorder,this.packageTitleArrow="#CCC",this.packageIconBorder="rgba(0,0,0,.08)",this.packageIconBackground="transparent",this.packageTitleNewBadgeBackground="transparent",this.packageTitleNewBadgeBorder="hsla(204, 100%, 50%, 0.2)",this.packageTitleNewBadgeLabel="#09F",this.componentItemBackground="#F2F2F2",this.componentItemBorder=this.propertyPanelInputBorder,this.componentItemLabel="#888",this.componentCategoryLabel="#333",this.componentsEmptyHeader=o.Palette.black,this.componentsEmptyText="#999",this.componentsEmptyInactive=o.Palette.cloud,this.componentsEmptyActive=o.Palette.blue,this.error=o.Palette.red,this.errorText="white",this.statusBarBackground="#FDFDFD",this.statusBarBorder=o.Palette.cloud,this.statusBarText="#999",this.statusBarActiveText="#4197F7",this.statusBarUpdateItemActive="#4197F7",this.statusBarErrorItemActive="#FF0100",this.statusBarItemInactive="#777",this.webFrameBackground=this.tabContentBackground,this.webFrameTitle="rgb(17, 17, 17)",this.webFrameMessage="rgb(153, 153, 153)",this.tooltipBackground="rgba(0,0,0,0.6)",this.tooltipCaretBackground="rgba(0,0,0,0.61)",this.tooltipColor="white",this.feedbackSidebarBackground="#FBFBFB",this.feedbackSidebarDivider="#DDD",this.feedbackTabBarBackground="#FDFDFD",this.feedbackTabBarBorderBottom="#EEE",this.feedbackTabBarMenuSelected="#222",this.feedbackTabBarMenuDefault="#DDD",this.feedbackTabBarButtonBackground="#FFF",this.feedbackTabBarButtonBorder="#EEE",this.feedbackTabBarButtonText="#000",this.feedbackTabBarThreadTitle="#000",this.feedbackPrimaryText="#222",this.feedbackSecondaryText="#787878",this.feedbackItemHover="#F7F7F7",this.feedbackEllipsisColor="#000",this.feedbackFormBackground="#FFF",this.feedbackFormPlaceholder="#BBB",this.feedbackFormButton="#787878",this.feedbackFormDivider="#EEE",this.feedbackFormBorder="#EEE",this.feedbackFormInputBackground="rgba(0, 0, 0, 0.8)"}}},function(e,t,n){"use strict";function numberFromString(e){const t=e.match(/\d?\.?\d+/);return t?Number(t[0]):void 0}Object.defineProperty(t,"__esModule",{value:!0}),t.clamp=function clamp(e,t,n){const i=Math.min(t,n),o=Math.max(t,n);return e<i&&(e=i),e>o&&(e=o),e},t.modulate=function modulate(e,t,n,i=!1){const[o,r]=t,[s,a]=n,l=s+(e-o)/(r-o)*(a-s);if(!0===i)if(s<a){if(l<s)return s;if(l>a)return a}else{if(l>s)return s;if(l<a)return a}return l},t.isNumeric=function isNumeric(e){return!isNaN(e)&&isFinite(e)},t.percentToFraction=function percentToFraction(e){const t=numberFromString(e);return void 0!==t?~e.indexOf("%")?t/100:t:0},t.numberFromString=numberFromString},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(475),o=n(301),r=n(123),s=n(303);function hue2rgb(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function bound01(e,t){let n,i;if(n="string"==typeof t?parseFloat(t):t,"string"==typeof e){(function isOnePointZero(e){return"string"==typeof e&&-1!==e.indexOf(".")&&1===parseFloat(e)})(e)&&(e="100%");const t=function isPercentage(e){return"string"==typeof e&&-1!==e.indexOf("%")}(e);i=Math.min(n,Math.max(0,parseFloat(e))),t&&(i=Math.floor(i*n)/100)}else i=e;return Math.abs(i-n)<1e-6?1:i%n/n}function pad2(e){return 1===e.length?"0"+e:""+e}t.rgbToHsluv=function rgbToHsluv(e,t,n){const[o,r,s]=i.rgbToHsluv([e/255,t/255,n/255]);return{h:o,s:r,l:s}},t.rgbaFromHusl=function rgbaFromHusl(e,t,n,o=1){const r=i.hsluvToRgb([e,t,n]);return{r:255*r[0],g:255*r[1],b:255*r[2],a:o}},t.hsvToStr=function hsvToStr(e,t,n,i){const o=Math.round(e),r=Math.round(100*t),s=Math.round(100*n);return void 0===i||1===i?"hsv("+o+", "+r+"%, "+s+"%)":"hsva("+o+", "+r+"%, "+s+"%, "+i+")"},t.rgbToRgb=function rgbToRgb(e,t,n){return{r:o.isNumeric(e)?255*bound01(e,255):0,g:o.isNumeric(t)?255*bound01(t,255):0,b:o.isNumeric(n)?255*bound01(n,255):0}},t.rgbToHex=function rgbToHex(e,t,n,i){const o=[pad2(Math.round(e).toString(16)),pad2(Math.round(t).toString(16)),pad2(Math.round(n).toString(16))];return i&&o[0].charAt(0)===o[0].charAt(1)&&o[1].charAt(0)===o[1].charAt(1)&&o[2].charAt(0)===o[2].charAt(1)?o[0].charAt(0)+o[1].charAt(0)+o[2].charAt(0):o.join("")},t.rgbToHsl=function rgbToHsl(e,t,n){let i,o;const r=bound01(e,255),s=bound01(t,255),a=bound01(n,255),l=Math.max(r,s,a),c=Math.min(r,s,a);let d=o=i=(l+c)/2;if(l===c)d=o=0;else{const e=l-c;switch(o=i>.5?e/(2-l-c):e/(l+c),l){case r:d=(s-a)/e+(s<a?6:0);break;case s:d=(a-r)/e+2;break;case a:d=(r-s)/e+4}d/=6}return{h:360*d,s:o,l:i}},t.hslToRgb=function hslToRgb(e,t,n){let i,o,r;if(e=bound01(e,360),t=bound01(100*t,100),n=bound01(100*n,100),0===t)i=o=r=n;else{const s=n<.5?n*(1+t):n+t-n*t,a=2*n-s;i=hue2rgb(a,s,e+1/3),o=hue2rgb(a,s,e),r=hue2rgb(a,s,e-1/3)}return{r:255*i,g:255*o,b:255*r}},t.rgbToHsv=function rgbToHsv(e,t,n){e=bound01(e,255),t=bound01(t,255),n=bound01(n,255);const i=Math.max(e,t,n),o=Math.min(e,t,n),r=i-o;let s;const a=0===i?0:r/i,l=i;if(i===o)s=0;else{switch(i){case e:s=(t-n)/r+(t<n?6:0);break;case t:s=(n-e)/r+2;break;case n:s=(e-t)/r+4}s/=6}return{h:s,s:a,v:l}},t.hsvToRgb=function hsvToRgb(e,t,n){e=6*bound01(e,360),t=bound01(100*t,100),n=bound01(100*n,100);const i=Math.floor(e),o=e-i,r=n*(1-t),s=n*(1-o*t),a=n*(1-(1-o)*t),l=i%6;return{r:255*[n,s,r,r,a,n][l],g:255*[a,n,n,s,r,r][l],b:255*[r,r,a,n,n,s][l]}};const a=function(){const e="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)",t="[\\s|\\(]+("+e+")[,|\\s]+("+e+")[,|\\s]+("+e+")\\s*\\)?",n="[\\s|\\(]+("+e+")[,|\\s]+("+e+")[,|\\s]+("+e+")[,|\\s]+("+e+")\\s*\\)?";return{rgb:new RegExp("rgb"+t),rgba:new RegExp("rgba"+n),hsl:new RegExp("hsl"+t),hsla:new RegExp("hsla"+n),hsv:new RegExp("hsv"+t),hsva:new RegExp("hsva"+n),hex3:/^([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();function parseIntFromHex(e){return parseInt(e,16)}function convertHexToDecimal(e){return parseIntFromHex(e)/255}t.stringToObject=function stringToObject(e){if(-1!==e.indexOf("gradient("))return!1;if(-1!==e.indexOf("var("))return!1;let t,n=e.replace(/^[\s,#]+/,"").replace(/\s+$/,"").toLowerCase(),i=!1;return s.cssNames[n]&&(n=s.cssNames[n],i=!0),"transparent"===n?{r:0,g:0,b:0,a:0,format:r.ColorFormat.NAME}:(t=a.rgb.exec(n))?{r:parseInt(t[1]),g:parseInt(t[2]),b:parseInt(t[3]),a:1,format:r.ColorFormat.RGB}:(t=a.rgba.exec(n))?{r:parseInt(t[1]),g:parseInt(t[2]),b:parseInt(t[3]),a:parseFloat(t[4]),format:r.ColorFormat.RGB}:(t=a.hsl.exec(n))?{h:parseInt(t[1]),s:o.percentToFraction(t[2]),l:o.percentToFraction(t[3]),a:1,format:r.ColorFormat.HSL}:(t=a.hsla.exec(n))?{h:parseInt(t[1]),s:o.percentToFraction(t[2]),l:o.percentToFraction(t[3]),a:parseFloat(t[4]),format:r.ColorFormat.HSL}:(t=a.hsv.exec(n))?{h:parseInt(t[1]),s:o.percentToFraction(t[2]),v:o.percentToFraction(t[3]),a:1,format:r.ColorFormat.HSV}:(t=a.hsva.exec(n))?{h:parseInt(t[1]),s:o.percentToFraction(t[2]),v:o.percentToFraction(t[3]),a:parseFloat(t[4]),format:r.ColorFormat.HSV}:(t=a.hex8.exec(n))?{r:parseIntFromHex(t[1]),g:parseIntFromHex(t[2]),b:parseIntFromHex(t[3]),a:convertHexToDecimal(t[4]),format:i?r.ColorFormat.NAME:r.ColorFormat.HEX}:(t=a.hex6.exec(n))?{r:parseIntFromHex(t[1]),g:parseIntFromHex(t[2]),b:parseIntFromHex(t[3]),a:1,format:i?r.ColorFormat.NAME:r.ColorFormat.HEX}:(t=a.hex4.exec(n))?{r:parseIntFromHex(`${t[1]}${t[1]}`),g:parseIntFromHex(`${t[2]}${t[2]}`),b:parseIntFromHex(`${t[3]}${t[3]}`),a:convertHexToDecimal(t[4]+""+t[4]),format:i?r.ColorFormat.NAME:r.ColorFormat.HEX}:!!(t=a.hex3.exec(n))&&{r:parseIntFromHex(`${t[1]}${t[1]}`),g:parseIntFromHex(`${t[2]}${t[2]}`),b:parseIntFromHex(`${t[3]}${t[3]}`),a:1,format:i?r.ColorFormat.NAME:r.ColorFormat.HEX}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.cssNames={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=["color","x","y","blur"];!function(e){e.is=function is(e){return e&&i.every(t=>t in e)}}(t.Shadow||(t.Shadow={}));const o=["inset","color","x","y","blur","spread"];!function(e){e.is=function is(e){return e&&o.every(t=>t in e)},e.toCSS=function toCSS(e){return`${e.inset?"inset ":""}${e.x}px ${e.y}px ${e.blur}px ${e.spread}px ${e.color}`}}(t.BoxShadow||(t.BoxShadow={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=/var\(([^\),]+)/;t.CustomPropertiesContext=i.createContext(()=>null);t.CustomProperties=class CustomProperties extends i.PureComponent{constructor(){super(...arguments),this.lookup=e=>{const t=o.exec(e),n=t?t[1].trim():"";return this.props.customProperties[n]||null}}render(){const{children:e,customProperties:n}=this.props;return i.createElement(t.CustomPropertiesContext.Provider,{value:this.lookup},i.createElement("div",{style:n},e))}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(18);t.getConfigFromPreviewURL=function getConfigFromPreviewURL(e=i.safeWindow.location.href){if(!e)throw new Error(`getConfigFromURL() called without url argument (location.href = "${i.safeWindow.location.href}")`);const t=new URL(e).searchParams;return{imageBaseURL:t.get("imageBaseURL")||"",projectURL:t.get("projectURL")||"",showConsole:"1"===t.get("console")}},t.getConfigFromVekterURL=function getConfigFromVekterURL(e=i.safeWindow.location.href){if(!e)throw new Error(`getConfigFromURL() called without url argument (location.href = "${i.safeWindow.location.href}")`);const t=decodeURIComponent(new URL(e).hash.slice(1)),[n,o,r]=t.split("#&#");return{documentURL:n,imageBaseURL:o,projectURL:r}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(306),o=n(18);function calculateServerURL(e=o.safeWindow.location.href){const t=parseURL(e);if(!t)return"http://localhost:4567";const{projectURL:n,documentURL:r=""}=i.getConfigFromVekterURL(e),s=parseURL(n);if(s)return s.origin;if(r.startsWith("http:")){const e=parseURL(r);if(e)return e.origin}const a=parseURL(i.getConfigFromPreviewURL(e).projectURL);if(a)return a.origin;if(new Set(["file:","http:","https:"]).has(t.protocol)){const e=parseURL("./",t.href);if(e)return e.href.replace(/\/$/,"")}return console.warn("Unable to figure out server base address, using fallback:",""),""}function parseURL(e,t){try{return void 0===t?new URL(e):new URL(e,t)}catch(n){return null}}t.calculateServerURL=calculateServerURL;let r=null;t.serverURL=function serverURL(...e){const t=function joinPaths(e){let t="";for(const n of e)n&&(t.length>0&&!t.endsWith("/")&&(t+="/"),Array.isArray(n)?t+=joinPaths(n):t+=encodeURIComponent(n).replace(/%2F/g,"/"));return t}(e),n=/^(\w+)%3A(.*)$/.exec(t);if(n)return n[1]+":"+n[2];let i=function cachedServerURL(){return r||(r=calculateServerURL()),r}();return""===i&&(i="."),t.startsWith("/")?i+t:i+"/"+t}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.memoize=function memoize(e,t,n,i){const o=t.get(n);if(o)return o;!function manageCache(e,t){if(e.size<t)return;let n=Math.round(Math.random());for(const i of e.keys())1!=(1&++n)&&e.delete(i)}(t,e);const r=i(n);return t.set(n,r),r}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=new Map;class InternalID{constructor(e){this.id=e,this._link=null,this._urllink=null}add(e){return InternalID.forKey(this.id+e)}toString(){return this.id}get link(){const e=this._link;return e||(this._link="#"+this.id)}get urlLink(){const e=this._urllink;return e||(this._urllink="url(#"+this.id+")")}static forKey(e){let t=i.get(e);return t||(t=new InternalID("a"+(1e3+i.size)+"z"),i.set(e,t),t)}}t.InternalID=InternalID},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(229),o=n(312),r=n(313),s=["angle","alpha"];!function(e){e.isLinearGradient=function isLinearGradient(e){return e&&s.every(t=>t in e)&&(o.isSimpleGradient(e)||r.isMultiStopGradient(e))},e.hash=function hash(e){return e.angle^i.gradientColorStopsHash(e,e.alpha)},e.toCSS=function toCSS(e,t){const n=i.gradientColorStops(e,e.alpha);return`linear-gradient(${void 0!==t?t:e.angle}deg, ${n.map(e=>`${e.value} ${100*e.position}%`).join(", ")})`}}(t.LinearGradient||(t.LinearGradient={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.hash=e=>{let t,n,i=0;if(0===e.length)return i;for(t=0;t<e.length;t++)i=(i<<5)-i+(n=e.charCodeAt(t)),i|=0;return i}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=["start","end"];t.isSimpleGradient=function isSimpleGradient(e){return e&&i.every(t=>t in e)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=["stops"];t.isMultiStopGradient=function isMultiStopGradient(e){return e&&i.every(t=>t in e)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(229),o=n(312),r=n(313),s=["widthFactor","heightFactor","centerAnchorX","centerAnchorY","alpha"];!function(e){e.isRadialGradient=function isRadialGradient(e){return e&&s.every(t=>t in e)&&(o.isSimpleGradient(e)||r.isMultiStopGradient(e))},e.hash=function hash(e){return e.centerAnchorX^e.centerAnchorY^e.widthFactor^e.heightFactor^i.gradientColorStopsHash(e,e.alpha)},e.toCSS=function toCSS(e){const{alpha:t,widthFactor:n,heightFactor:o,centerAnchorX:r,centerAnchorY:s}=e;return`radial-gradient(${100*n}% ${100*o}% at ${100*r}% ${100*s}%, ${i.gradientColorStops(e,t).map(e=>`${e.value} ${100*e.position}%`).join(", ")})`}}(t.RadialGradient||(t.RadialGradient={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(33),o=n(1),r="radius";function getRadiusValue(e){let t=Number(e);return"string"==typeof e&&isNaN(t)?e:(i.isAnimatable(e)&&(t=i.Animatable.getNumber(e)),t?`${t}px`:"0")}function hasRadiusValue(e){return e&&"0"!==e}t.collectRadiusFromProps=function collectRadiusFromProps(e,t){if(!function hasRadius(e){return r in e}(e))return;const{radius:n}=e;if("string"==typeof n||i.isAnimatable(n)||o.isFiniteNumber(n)){const e=getRadiusValue(n);hasRadiusValue(e)&&(t.borderRadius=e)}else if(n){const e=getRadiusValue(n.topLeft),i=getRadiusValue(n.topRight),o=getRadiusValue(n.bottomRight),r=getRadiusValue(n.bottomLeft);(hasRadiusValue(e)||hasRadiusValue(i)||hasRadiusValue(o)||hasRadiusValue(r))&&(t.borderRadius=`${e} ${i} ${o} ${r}`)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.collectBlendingFromProps=function collectBlendingFromProps(e,t){e.blendingMode&&"normal"!==e.blendingMode&&(t.mixBlendMode=e.blendingMode)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(232),o=n(315),r=n(316),s=n(481),a=n(233),l=n(1),c=n(148),d=n(482);t.collectVisualStyleFromProps=function collectVisualStyleFromProps(e,t){i.collectBackgroundFromProps(e,t),o.collectRadiusFromProps(e,t),l.collectFiltersFromProps(e,t),r.collectBlendingFromProps(e,t),s.collectOverflowFromProps(e,t),a.collectOpacityFromProps(e,t),d.collectTextColorFromProps(e,t),c.collectBoxShadowsForProps(e,t)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(104),o=n(230);t.imagePatternPropsForFill=function imagePatternPropsForFill(e,t,n){if(e=o.Animatable.get(e,"#09F"),!i.BackgroundImage.isImageObject(e))return;if(!e.pixelWidth||!e.pixelHeight)return;const r=e.pixelWidth,s=e.pixelHeight;let a;const{fit:l}=e;if("fill"===l||"fit"===l||!l){let e=1,n=1,i=0,o=0;const c=r/s,d=t.height*c,u=t.width/c,h=d/t.width,p=u/t.height;("fill"!==l&&l?p<h:p>h)?(n=p,o=(1-p)/2):(e=h,i=(1-h)/2),a=`translate(${i}, ${o}) scale(${e}, ${n})`}return{id:`id${n}g-fillImage`,path:e.src,transform:a}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.localPackageFallbackIdentifier="|local|"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(493),o=n(1);class PathSegment extends i.PathSegmentRecord{toJS(){const e=super.toJS();return e.__class=this.constructor.name,e}toJSON(){return this.toJS()}}t.PathSegment=PathSegment,function(e){e.point=e=>({x:e.x,y:e.y}),e.handleOut=e=>({x:e.handleOutX,y:e.handleOutY}),e.handleIn=e=>({x:e.handleInX,y:e.handleInY}),e.calculatedHandleOut=t=>{switch(t.handleMirroring){case"symmetric":case"disconnected":case"asymmetric":return o.Point.add(e.point(t),e.handleOut(t));default:return{x:t.x,y:t.y}}},e.calculatedHandleIn=t=>{switch(t.handleMirroring){case"symmetric":return o.Point.subtract(e.point(t),e.handleOut(t));case"disconnected":case"asymmetric":return o.Point.add(e.point(t),e.handleIn(t));default:return e.point(t)}},e.curveDefault=(t,n)=>{if(t.length>2){let i,r;i=0===n?t[t.length-1]:t[n-1],r=n===t.length-1?t[0]:t[n+1];const s=o.Point.subtract(e.point(r),e.point(i));return{x:s.x/4,y:s.y/4}}return{x:10,y:10}}}(PathSegment=t.PathSegment||(t.PathSegment={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(1),o=n(96),r=n(7),s=n(320),a="pathSegments";function isStraightCurve(e,t){const n="straight"===e.handleMirroring||0===e.handleOutX&&0===e.handleOutY,i="straight"===t.handleMirroring||0===t.handleInX&&0===t.handleInY;return n&&i}t.withPath=function withPath(e){return a in e},t.pathDefaults={pathSegments:r.List([]),pathClosed:!1},t.toSVGPath=function toSVGPath(e,t={x:0,y:0},n=i.RenderTarget.canvas){let a=[],l=[];return(l=Array.isArray(e)?e:[e]).forEach((e,n)=>{const{pathClosed:i}=e;let{pathSegments:o}=e;const l=(o=r.List(o)).count();if(0===l)return"";for(let r=0;r<l;r++){const e=o.get(r);let n,c;const d=0===r,u=r===l-1;if(u?i&&(n=o.first()):n=o.get(r+1),d?i&&(c=o.last()):c=o.get(r-1),0===r?a.push("M"):c&&isStraightCurve(c,e)&&a.push("L"),a.push(e.x+t.x,e.y+t.y),n&&!isStraightCurve(e,n)){const i=s.PathSegment.calculatedHandleOut(e),o=s.PathSegment.calculatedHandleIn(n);a.push("C",i.x+t.x,i.y+t.y,o.x+t.x,o.y+t.y)}u&&n&&(isStraightCurve(e,n)?a.push("Z"):a.push(n.x+t.x,n.y+t.y,"Z"))}}),n!==i.RenderTarget.export&&n!==i.RenderTarget.preview||(a=a.map(e=>o.isFiniteNumber(e)?i.roundedNumberString(e,3):e)),a.join(" ")},t.isStraightCurve=isStraightCurve},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(18);t.pointForEvent=function pointForEvent(e,t=null){let n;if(t instanceof HTMLElement&&(n=t),!n&&e.target instanceof HTMLElement&&(n=e.target),!n)return{x:e.pageX,y:e.pageY};if(i.safeWindow.webkitConvertPointFromPageToNode){let t=new WebKitPoint(e.pageX,e.pageY);return{x:(t=i.safeWindow.webkitConvertPointFromPageToNode(n,t)).x,y:t.y}}const o=n.getBoundingClientRect(),r=parseFloat(n.style.width||"0")/o.width,s=parseFloat(n.style.height||"0")/o.height;return{x:r*(e.pageX-o.left-n.clientLeft+n.scrollLeft),y:s*(e.pageY-o.top-n.clientTop+n.scrollTop)}}},function(e,t){e.exports=require("eventemitter3")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(322);t.events=i;const o=n(235);t.math=o;const r=n(311);t.string=r;const s=n(236);t.environment=s},function(e,t,n){"use strict";var i=this&&this.__rest||function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(i=Object.getOwnPropertySymbols(e);o<i.length;o++)t.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(e,i[o])&&(n[i[o]]=e[i[o]])}return n};Object.defineProperty(t,"__esModule",{value:!0});const o=n(0),r=n(1),s=n(235),a=n(326),l=n(33),c=n(334);t.DraggingContext=o.createContext({dragging:!1});const d=n(153);t.WithDragging=function WithDragging(e){var n;const u=((n=class WithDraggingHOC extends o.Component{constructor(e,t){super(e,t),this.state={isDragging:!1},this.x=l.Animatable(0),this.y=l.Animatable(0),this.onChangePosition=(e,t)=>{e.value!==e.oldValue&&this.props.onMove&&this.props.onMove(this.point,this)},this.isMoving=!1,this.isAnimating=!1,this.directionLockAxis=null,this._constraints=null,this.panStart=e=>{this.props.enabled&&(this.isMoving=this.isAnimating,this.stopAnimation(),this.resetdirectionLock(),this.layerStartPoint=this.point,this.correctedLayerStartPoint=this.point,this._constraints&&this.props.bounce&&(this.correctedLayerStartPoint=this.constrainPosition(this.correctedLayerStartPoint,this._constraints,1/this.props.overdragScale)),this.previousPoint=this.correctedLayerStartPoint,this.state.isDragging||this.setState({isDragging:!0}),this.props.onDragSessionStart&&this.props.onDragSessionStart(e,this))},this.pan=e=>{const{enabled:t,speedX:n,speedY:i,directionLock:o,overdragScale:r,vertical:s,horizontal:a,pixelAlign:l,onDragStart:c,onDragWillMove:d,onDragDidMove:u,onDragSessionMove:h}=this.props;if(!t)return;let p=Object.assign({},this.previousPoint);if(p.x+=e.delta.x*n,p.y+=e.delta.y*i,this.previousPoint=Object.assign({},p),this._constraints&&(p=this.constrainPosition(p,this._constraints,r)),o){if(null===this.directionLockAxis){const t=e.offset;return t.x=t.x*n,t.y=t.y*i,void this.updatedirectionLock(t)}"y"===this.directionLockAxis&&(p.x=this.layerStartPoint.x),"x"===this.directionLockAxis&&(p.y=this.layerStartPoint.y)}if(this.state.isDragging||(this.setState({isDragging:!0}),this.isMoving=!0,c&&c(e,this)),d&&d(e,this),l&&(p.x=Math.round(p.x),p.y=Math.round(p.y)),!a&&!s)return;let g=null;a&&!s?g="x":s&&!a&&(g="y"),this.setPoint(p,g),u&&u(e,this),h&&h(e,this)},this.panEnd=e=>{if(!this.props.enabled)return;this.startAnimation(e);const{onDragSessionEnd:t,onDragEnd:n}=this.props;this.state.isDragging&&n&&n(e,this),t&&t(e,this),this.state.isDragging&&this.setState({isDragging:!1}),this.isMoving=this.isAnimating},this.mouseWheelStart=e=>{this.correctedLayerStartPoint=this.point,this.previousPoint=this.correctedLayerStartPoint,this.stopAnimation()},this.mouseWheel=e=>{const{enabled:t,speedX:n,speedY:i,vertical:o,horizontal:r,pixelAlign:s,onDragWillMove:a,onDragDidMove:l,mouseWheel:c}=this.props;if(!c||!t)return;let d=Object.assign({},this.point);if(d.x-=e.delta.x*n,d.y-=e.delta.y*i,this._constraints&&(d=this.constrainPosition(d,this._constraints,0,!1)),a&&a(e,this),s&&(d.x=Math.round(d.x),d.y=Math.round(d.y)),!r&&!o)return;let u=null;r&&!o?u="x":o&&!r&&(u="y"),this.setPoint(d,u),l&&l(e,this)},this.mouseWheelEnd=e=>{},this.onAnimationStep=(e,t)=>{if("x"===e&&!1===this.props.horizontal)return;if("y"===e&&!1===this.props.vertical)return;let n=0;if(this.constraints)if(this.props.bounce)n=t-this.getValue(e);else{const{minX:i,minY:o,maxX:r,maxY:a}=this.calculateConstraints(this._constraints);"x"===e&&(n=s.clamp(t,i,r)-this.getValue(e)),"y"===e&&(n=s.clamp(t,o,a)-this.getValue(e))}else n=t-this.getValue(e);const i=this.point;"x"===e&&(i[e]=i[e]+n),"y"===e&&(i[e]=i[e]+n),this.setPoint(i,e)},this.onAnimationStop=e=>{if(("x"!==e||!1!==this.props.horizontal)&&("y"!==e||!1!==this.props.vertical)&&this.animation){if(this.props.pixelAlign){const t=this.point;t.x=Math.round(t.x),t.y=Math.round(t.y),this.setPoint(t,e)}return this.animation.x.isFinished()&&this.animation.y.isFinished()?this.stopAnimation():void 0}},this.stopAnimation=()=>{this.isAnimating=!1,this.isMoving=!1,this.animation&&(this.animation.x.cancel(),this.animation.y.cancel(),this.props.onDragAnimationEnd&&this.props.onDragAnimationEnd(this.animation,this),this.animation=null)};const n=this.props.left,i=this.props.top;n?l.isAnimatable(n)?this.x=n:this.x=l.Animatable(n):this.x=l.Animatable(0),i?l.isAnimatable(i)?this.y=i:this.y=l.Animatable(i):this.y=l.Animatable(0),this.x.onUpdate(this.onChangePosition),this.y.onUpdate(this.onChangePosition);const o=this.props.constraints;o&&(this.constraints=o)}componentWillReceiveProps(e){this.props.left!==e.left&&r.isFiniteNumber(e.left)&&this.x.set(e.left),this.props.top!==e.top&&r.isFiniteNumber(e.top)&&this.y.set(e.top);const t=e.constraints;t&&(this.constraints=t)}get point(){return{x:this.x.get(),y:this.y.get()}}setPoint(e,t=null){switch(t){case"x":this.x.set(e.x);break;case"y":this.y.set(e.y);break;case null:this.x.set(e.x),this.y.set(e.y)}}getValue(e){switch(e){case"x":return this.x.get();case"y":return this.y.get()}}get width(){const e=this.props.width;return e?l.isAnimatable(e)?e.get():"string"==typeof e?parseFloat(e):e:100}get height(){const e=this.props.height;return e?l.isAnimatable(e)?e.get():"string"==typeof e?parseFloat(e):e:100}get constraints(){return this._constraints}set constraints(e){this._constraints=null!==e&&"object"==typeof e?{x:e.x||0,y:e.y||0,width:e.width||0,height:e.height||0}:null,this._constraints&&this.updateAnimationConstraints(this._constraints)}get constraintsOffset(){if(!this.constraints)return{x:0,y:0};const{minX:e,minY:t,maxX:n,maxY:i}=this.calculateConstraints(this._constraints),o=this.point,r=s.clamp(o.x,e,n),a=s.clamp(o.y,t,i);return{x:o.x-r,y:o.y-a}}get isBeyondConstraints(){let e;return 0!==(e=this.constraintsOffset).x||0!==e.y}clampAndScale(e,t,n,i,o){return o?(e<t&&(e=t+(e-t)*i),e>n&&(e=n+(e-n)*i),e):s.clamp(e,t,n)}calculateConstraints(e){if(!e)return{minX:1/0,maxX:1/0,minY:1/0,maxY:1/0};e.width<this.width&&(e.width=this.width),e.height<this.height&&(e.height=this.height);const t={minX:r.Rect.minX(e),maxX:r.Rect.maxX(e),minY:r.Rect.minY(e),maxY:r.Rect.maxY(e)};return t.maxX-=this.width,t.maxY-=this.height,t}constrainPosition(e,t,n,i=this.props.overdrag){const{maxX:o,maxY:r,minX:s,minY:a}=this.calculateConstraints(this._constraints),l={x:this.clampAndScale(e.x,s,o,n,i),y:this.clampAndScale(e.y,a,r,n,i)};return 0!==this.props.speedX&&!1!==this.props.horizontal||(l.x=e.x),0!==this.props.speedY&&!1!==this.props.vertical||(l.y=e.y),l}updatedirectionLock(e){Math.abs(e.y)>this.props.directionLockThreshold.y?this.directionLockAxis="y":Math.abs(e.x)>this.props.directionLockThreshold.x&&(this.directionLockAxis="x"),null!==this.directionLockAxis&&this.props.onDragDirectionLockStart&&this.props.onDragDirectionLockStart(this.directionLockAxis,this)}resetdirectionLock(){this.directionLockAxis=null}setupAnimation(){this.animation||(this.animation={x:this.setupAnimationForAxis("x"),y:this.setupAnimationForAxis("y")},this.updateAnimationConstraints(this._constraints))}setupAnimationForAxis(e){let t,n;(t={})[e]=!0;const i=new a.InertialScrollAnimator({momentum:this.props.momentumOptions,bounce:this.props.bounceOptions});return n=new c.MainLoopAnimationDriver(i,t=>{this.onAnimationStep(e,t)},()=>{this.onAnimationStop(e)})}updateAnimationConstraints(e){if(this.animation)if(e){const{minX:t,minY:n,maxX:i,maxY:o}=this.calculateConstraints(e);this.animation.x.animator.setLimits(t,i),this.animation.y.animator.setLimits(n,o)}else this.animation.x.animator.setLimits(-1/0,1/0),this.animation.y.animator.setLimits(-1/0,1/0)}startAnimation(e){const{momentum:t,bounce:n,momentumVelocityMultiplier:i,speedX:o,speedY:r,overdrag:s,onDragAnimationStart:a}=this.props;if(!t&&!n)return;if(!1===this.isBeyondConstraints&&!1===t)return;if(!1===this.isBeyondConstraints&&!1===this.state.isDragging)return;const{minX:l,minY:c,maxX:d,maxY:u}=this.calculateConstraints(this._constraints),h=!0===s||this.point.x>l&&this.point.x<d,p=!0===s||this.point.y>c&&this.point.y<u;if(h===p&&!1===p)return;const g=e.velocity(.1);let m=g.x*i*o,f=g.y*i*r;"x"===this.directionLockAxis&&(f=0),"y"===this.directionLockAxis&&(m=0),this.setupAnimation(),this.isAnimating=!0,this.isMoving=!0,this.animation&&(this.animation.x.animator.setState({x:this.point.x,v:m}),h&&this.animation.x.play(),this.animation.y.animator.setState({x:this.point.y,v:f}),p&&this.animation.y.play(),a&&a(this.animation,this))}wrapHandler(e,t){return t?n=>{e(n),t(n)}:e}render(){const n=this.props,{onPanStart:r,onPan:s,onPanEnd:a,onMouseWheelStart:l,onMouseWheel:c,onMouseWheelEnd:d}=n,u=i(n,["onPanStart","onPan","onPanEnd","onMouseWheelStart","onMouseWheel","onMouseWheelEnd"]),h=Object.assign({},u);return Object.keys(WithDraggingHOC.draggingDefaultProps).forEach(e=>{delete h[e]}),h.onPanStart=this.wrapHandler(this.panStart,r),h.onPan=this.wrapHandler(this.pan,s),h.onPanEnd=this.wrapHandler(this.panEnd,a),h.onMouseWheelStart=this.wrapHandler(this.mouseWheelStart,l),h.onMouseWheel=this.wrapHandler(this.mouseWheel,c),h.onMouseWheelEnd=this.wrapHandler(this.mouseWheelEnd,d),h.left=this.x,h.top=this.y,o.createElement(t.DraggingContext.Provider,{value:{dragging:this.state.isDragging}},o.createElement(e,Object.assign({},h)))}}).draggingDefaultProps={momentum:!0,momentumOptions:{friction:2.1,tolerance:1},momentumVelocityMultiplier:800,speedX:1,speedY:1,bounce:!0,bounceOptions:{friction:40,tension:200,tolerance:1},directionLock:!1,directionLockThreshold:{x:10,y:10},overdrag:!0,overdragScale:.5,pixelAlign:!0,velocityTimeout:100,velocityScale:890,horizontal:!0,vertical:!0,enabled:!0,constraints:{},mouseWheel:!1},n.defaultProps=Object.assign({},e.defaultProps,n.draggingDefaultProps),n);return d(u,e),u}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(327),o=n(329),r=n(237);t.Defaults={velocity:0,min:0,max:0,momentum:{friction:2,tolerance:10},bounce:{tension:500,friction:10,tolerance:1}};t.InertialScrollAnimator=class InertialScrollAnimator{constructor(e){this.options=Object.assign(Object.assign({},t.Defaults),e),this.frictionAnimator=new i.FrictionAnimator({friction:this.options.momentum.friction,tolerance:this.options.momentum.tolerance,velocity:this.options.velocity}),this.springAnimator=new o.SpringAnimator({tension:this.options.bounce.tension,friction:this.options.bounce.friction,tolerance:this.options.bounce.tolerance,velocity:this.options.velocity},r.NumberInterpolation),this.useSpring=!1}isReady(){return!0}next(e){return this.current=this.currentAnimator.next(e),this.useSpring||this.tryTransitionToSpring(),this.current}get currentAnimator(){return this.useSpring?this.springAnimator:this.frictionAnimator}isFinished(){return this.currentAnimator.isFinished()}get state(){return this.currentAnimator.getState()}setFrom(e){this.setState({x:e,v:this.state.v})}setState(e){if(this.frictionAnimator.setFrom(e.x),this.frictionAnimator.setVelocity(e.v),this.isValidState())return this.tryTransitionToSpring();{let e=0;return this.state.x<=this.options.min&&(e=this.options.min),this.state.x>=this.options.max&&(e=this.options.max),this.transitionToSpring(e)}}setTo(e){this.frictionAnimator.setTo(e),this.springAnimator.setTo(e)}setLimits(e,t){this.options.min=e,this.options.max=t}tryTransitionToSpring(){const e=this.state.x<this.options.min&&this.state.v<=0,t=this.state.x>this.options.max&&this.state.v>=0;if(e||t){let t;t=e?this.options.min:this.options.max,this.transitionToSpring(t)}else this.useSpring=!1}transitionToSpring(e){this.springAnimator.setFrom(this.state.x),this.springAnimator.setVelocity(this.state.v),this.springAnimator.setTo(e),this.useSpring=!0}isValidState(){const e=this.state.x<this.options.min&&this.state.v>0,t=this.state.x>this.options.max&&this.state.v<0;if(e||t){let t;return t=e?this.options.min:this.options.max,1-this.frictionAnimator.options.friction*(t-this.state.x)/this.state.v>0}return!0}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(328);t.FrictionAnimator=class FrictionAnimator{constructor(e){this.options={velocity:0,friction:2,tolerance:.1},Object.assign(this.options,e),this.state={x:0,v:this.options.velocity},this.integrator=new i.Integrator(e=>-this.options.friction*e.v)}setFrom(e){this.state.x=e}setTo(e){}setVelocity(e){this.state.v=e}getState(){return this.state}isReady(){return!0}next(e){return this.state=this.integrator.integrateState(this.state,e),this.state.x}isFinished(){return Math.abs(this.state.v)<this.options.tolerance}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.Integrator=class Integrator{constructor(e){this.accelerationForState=e}integrateState(e,t){let n,i,o,r,s,a;return n=this.evaluateState(e),i=this.evaluateStateWithDerivative(e,.5*t,n),o=this.evaluateStateWithDerivative(e,.5*t,i),r=this.evaluateStateWithDerivative(e,t,o),a=1/6*(n.dx+2*(i.dx+o.dx)+r.dx),s=1/6*(n.dv+2*(i.dv+o.dv)+r.dv),e.x=e.x+a*t,e.v=e.v+s*t,e}evaluateState(e){const t=this.accelerationForState(e);return{dx:e.v,dv:t}}evaluateStateWithDerivative(e,t,n){let i,o;return i={dx:(o={x:e.x+n.dx*t,v:e.v+n.dv*t}).v,dv:this.accelerationForState(o)}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(328),o=n(500);t.SpringTensionFrictionDefaults={tension:500,friction:10,tolerance:1e-4,velocity:0},t.SpringDampingDurationDefaults={dampingRatio:1,duration:1,velocity:0,mass:1};t.SpringAnimator=class SpringAnimator{constructor(e,n){let r;if(this.interpolation=n,function isDampingDurationSpringOptions(e){return!!e&&("number"==typeof e.dampingRatio||"number"==typeof e.duration||"number"==typeof e.mass)}(e)){const n=Object.assign({},t.SpringDampingDurationDefaults,e);r=o.SpringCurveValueConverter.computeDerivedCurveOptions(n.dampingRatio,n.duration,n.velocity,n.mass)}else r=e;this.options=Object.assign({},t.SpringTensionFrictionDefaults,r),this.state={x:0,v:this.options.velocity},this.integrator=new i.Integrator(e=>-this.options.tension*e.x-this.options.friction*e.v)}isReady(){return void 0!==this.interpolator&&void 0!==this.difference}next(e){return this.state=this.integrator.integrateState(this.state,e),this.interpolator(this.progress())}isFinished(){let e,t;return e=Math.abs(this.state.x)<this.options.tolerance,t=Math.abs(this.state.v)<this.options.tolerance,e&&t}setFrom(e){this.current=e,this.updateInterpolator()}setVelocity(e){this.state.v=e}progress(){return 1-this.state.x/this.difference}setTo(e){this.destination=e,this.difference=this.interpolation.difference(this.destination,this.current),this.state.x=this.difference,this.updateInterpolator()}getState(){return this.state}updateInterpolator(){void 0!==this.current&&void 0!==this.destination&&(this.interpolator=this.interpolation.interpolate(this.current,this.destination))}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(125);t.NumberInterpolation={interpolate(e,t){[e,t]=i.Interpolation.handleUndefined(e,t);const n=+e,o=t-n;return e=>{return n+o*e}},difference:(e,t)=>t-e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(125);t.ObjectInterpolation=e=>({interpolate(t,n){[t,n]=i.Interpolation.handleUndefined(t,n);const o=Object.assign({},t),r={},s=new Set;for(const i in t)r[i]=e.interpolate(t[i],n[i]),s.add(i);for(const i in n)s.has(i)||(r[i]=e.interpolate(t[i],n[i]),s.add(i));return e=>{for(const t in r)o[t]=r[t](e);return o}},difference(t,n){let i=0;for(const o in t){const r=e.difference(t[o],n[o]);i+=Math.pow(r,2)}return Math.sqrt(i)}})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(125);t.NoInterpolation={interpolate:(e,t)=>([e,t]=i.Interpolation.handleUndefined(e,t),n=>n<.5?e:t),difference:(e,t)=>e===t?0:1}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(125),o=n(59),r=n(123);t.ColorInterpolation=(e=r.ColorMixModelType.HUSL)=>({interpolate:(t,n)=>([t,n]=i.Interpolation.handleUndefined(t,n),o.Color.interpolate(o.Color(t),o.Color(n),e)),difference:(e,t)=>o.Color.difference(o.Color(e),o.Color(t))})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(502),o=n(21),r=n(152);t.MainLoopAnimationDriver=class MainLoopAnimationDriver extends i.AnimationDriver{play(){o.RenderEnvironment.target===o.RenderTarget.preview?r.MainLoop.on("update",this.update):this.finishedCallback&&this.finishedCallback(!1)}cancel(){r.MainLoop.off("update",this.update)}finish(){r.MainLoop.off("update",this.update),super.finish()}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(71),r=n(183),s=n(184),a=n(59),l=n(105),c=n(21),d=n(33),u=n(154),h=n(104),p=n(317),g=n(504),m=n(338),f=(n(18),n(53)),y=n(96);function toPixelString(e){return y.isFiniteNumber(e)?`${e}px`:e}function applyLayoutProp(e,t,n){if(void 0!==t[n]){const i=d.Animatable.get(t[n],void 0);e[n]=toPixelString(i)}}class DeprecatedFrame extends o.Layer{constructor(){super(...arguments),this.element=null,this.imageDidChange=!1,this.state={size:null,shouldCheckImageAvailability:!0,currentBackgroundImageSrc:null},this.updateStyle=()=>{this.element&&Object.assign(this.element.style,this.getStyle())},this.setElement=e=>{this.element=e},this.onPropsChange=e=>{const t=DeprecatedFrame.rect(d.Animatable.objectToValues(e.value));this.state.size&&d.isAnimatable(this.state.size.width)&&d.isAnimatable(e.value.width)&&this.state.size.width.set(t.width),this.state.size&&d.isAnimatable(this.state.size.height)&&d.isAnimatable(e.value.height)&&this.state.size.height.set(t.height),this.updateStyle()},this.onSizeChange=()=>{this.updateStyle()},this.checkImageAvailability=e=>{const{background:t}=this.props;if(!t||!h.BackgroundImage.isImageObject(t))return;const n=new Image;n.src=l.imageUrlForFill(t,e),n.onerror=()=>{this.element&&(this.element.style.backgroundImage=l.imageUrlForFill(t))}}}static rect(e){const t=r.ConstraintValues.fromProperties(e);return r.ConstraintValues.toRect(t,e.parentSize||null,null,!0)}get rect(){return DeprecatedFrame.rect(this.props)}static getDerivedStateFromProps(e,t){const n=DeprecatedFrame.updatedSize(e,t),{target:i}=c.RenderEnvironment,o=e.background&&h.BackgroundImage.isImageObject(e.background)?e.background.src:null;if(o){const e=t.currentBackgroundImageSrc!==o;if(e!==t.shouldCheckImageAvailability)return{size:n,currentBackgroundImageSrc:o,shouldCheckImageAvailability:e}}if(t.size){if(i===c.RenderTarget.preview)return null;if(t.size.width===n.width&&t.size.height===n.height)return null}return{size:n,currentBackgroundImageSrc:o,shouldCheckImageAvailability:t.shouldCheckImageAvailability}}static updatedSize(e,t){const n=DeprecatedFrame.rect(e);let i=t.size;const o={width:n.width,height:n.height},{target:r}=c.RenderEnvironment;return i?d.isAnimatable(i.width)&&d.isAnimatable(i.height)?(i.width.set(o.width),i.height.set(o.height)):i=o:i=r===c.RenderTarget.preview?u.ObservableObject(o,!0):o,i}getStyle(){const e=this.rect,t={display:"block",position:"absolute",width:`${e.width}px`,height:`${e.height}px`,pointerEvents:void 0,userSelect:"none"};let n=d.Animatable.get(this.props.left,void 0),i=d.Animatable.get(this.props.top,void 0);Object.assign(t,this.props._initialStyle);const r=this.context.size!==f.ParentSizeState.Disabled,s=d.Animatable.get(this.props.perspective,void 0);t.perspective=s,t.WebkitPerspective=s;let a=void 0;const l=d.Animatable.get(this.props.backfaceVisible,void 0);!0===l?a="visible":!1===l&&(a="hidden"),t.backfaceVisibility=a,t.WebkitBackfaceVisibility=a;const c=d.Animatable.get(this.props.preserve3d,void 0);if(!0===c?t.transformStyle="preserve-3d":!1===c&&(t.transformStyle="flat"),!r){applyLayoutProp(t,this.props,"right"),applyLayoutProp(t,this.props,"bottom");const e=toPixelString(d.Animatable.get(this.props.width,void 0)),o=toPixelString(d.Animatable.get(this.props.height,void 0));"string"==typeof n&&n.endsWith("%")&&null===this.props.right&&(n=`calc(${n} - calc(${e}} / 2))`,t.width=e),"string"==typeof i&&i.endsWith("%")&&null===this.props.bottom&&(i=`calc(${i} - calc(${o} / 2))`,t.height=o),void 0!==i&&void 0!==t.bottom?(t.height=void 0,i=toPixelString(d.Animatable.get(this.props.top,void 0))):t.height=o,void 0!==n&&void 0!==t.right?(t.width=void 0,n=toPixelString(d.Animatable.get(this.props.left,void 0))):t.width=e}const u=Object.assign({},e);return void 0!==n&&(u.x=n),void 0!==i&&(u.y=i),g.collectTransformFromProps(this.props,u,t),p.collectVisualStyleFromProps(this.props,t),m.collectBackgroundImageFromProps(this.props,e,t,this.state.shouldCheckImageAvailability,this.checkImageAvailability),o.Layer.applyWillChange(this,t),this.props.style&&Object.assign(t,this.props.style),t}componentDidMount(){const{target:e}=c.RenderEnvironment;e===c.RenderTarget.preview&&(this.propsObserver=u.ObservableObject(this.props,!0),this.propsObserverCancel=u.ObservableObject.addObserver(this.propsObserver,this.onPropsChange),this.props.parentSize&&d.isAnimatable(this.props.parentSize.width)&&d.isAnimatable(this.props.parentSize.height)&&(this.sizeObserver=u.ObservableObject(this.props.parentSize,!0),this.sizeObserverCancel=u.ObservableObject.addObserver(this.sizeObserver,this.onSizeChange)))}componentDidUpdate(){const{target:e}=c.RenderEnvironment;this.propsObserverCancel&&this.propsObserverCancel(),this.sizeObserverCancel&&this.sizeObserverCancel(),e===c.RenderTarget.preview&&(this.propsObserver=u.ObservableObject(this.props,!0),this.propsObserverCancel=u.ObservableObject.addObserver(this.propsObserver,this.onPropsChange),this.props.parentSize&&d.isAnimatable(this.props.parentSize.width)&&d.isAnimatable(this.props.parentSize.height)&&(this.sizeObserver=u.ObservableObject(this.props.parentSize,!0),this.sizeObserverCancel=u.ObservableObject.addObserver(this.sizeObserver,this.onSizeChange)))}componentWillUnmount(){this.propsObserverCancel&&this.propsObserverCancel(),this.propsObserverCancel=void 0,this.sizeObserverCancel&&this.sizeObserverCancel(),this.sizeObserverCancel=void 0}render(){const{visible:e,id:t,className:n}=this.props;if(!e)return null;const o=this.getStyle(),r=this.rect,a={width:r.width,height:r.height};return i.createElement("div",{id:t,style:o,ref:this.setElement,className:n},i.createElement(f.ProvideParentSize,{parentSize:a},this.layoutChildren()),i.createElement(s.Border,Object.assign({},this.props)))}layoutChildren(){let e=this.props._forwardedOverrides;const n=this.props._overrideForwardingDescription;if(n){let t=!1;e={};for(const i in n)t=!0,e[i]=this.props[n[i]];t||(e=void 0)}let o=i.Children.map(this.props.children,t=>r.isConstraintSupportingChild(t)?i.cloneElement(t,{parentSize:this.state.size,_forwardedOverrides:e}):e&&t?i.cloneElement(t,{_forwardedOverrides:e}):t);return o&&1===o.length&&"string"==typeof o[0]&&(o=[i.createElement(t.Center,{key:"0"},o)]),o}}DeprecatedFrame.supportsConstraints=!0,DeprecatedFrame.defaultFrameSpecificProps=Object.assign({},r.constraintDefaults,g.transformDefaults,{opacity:1,background:a.Color("rgba(0, 170, 255, 0.3)"),visible:!0,borderWidth:0,borderColor:"#222",borderStyle:"solid"}),DeprecatedFrame.defaultProps=Object.assign({},o.Layer.defaultProps,DeprecatedFrame.defaultFrameSpecificProps),t.DeprecatedFrame=DeprecatedFrame,DeprecatedFrame.contextType=f.ConstraintsContext,t.Center=e=>{const t=Object.assign({},{height:"100%",display:"flex",alignItems:"center",justifyContent:"center",fontFamily:"Helvetica"},e.style||{});return i.createElement("div",{style:t},e.children)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(21);function useDidUpdate(e,t){const n=i.useRef(!1);i.useEffect(()=>{n.current&&e(),n.current=!0},t)}function resetSetStyle(e,t,n,i=!0){if(!e)return;const o=n||e.style[t],r=()=>{e.style[t]=o};e.style[t]=null,i?Promise.resolve().then(r):setTimeout(r,0)}t.useWebkitFixes=function useWebkitFixes(e,t){const n=t.mixBlendMode&&"normal"!==t.mixBlendMode,i=void 0!==t.borderRadius,r="hidden"===t.overflow;useDidUpdate(()=>{n&&resetSetStyle(e.current,"mixBlendMode",t.mixBlendMode)},[o.RenderEnvironment.zoom,n,e.current]),useDidUpdate(()=>{r&&i&&resetSetStyle(e.current,"overflow","hidden",!1)},[r,i,e.current])},t.resetSetStyle=resetSetStyle},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(503);t.elementForComponent=function elementForComponent(e){const t=i.optionalReactDOM();return t?t.findDOMNode(e):null}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(33),o=n(104),r=n(21),s=n(105);t.collectBackgroundImageFromProps=function collectBackgroundImageFromProps(e,t,n,a,l){let c=i.Animatable.get(e.background,null);if(o.BackgroundImage.isImageObject(c)){const{_forwardedOverrides:i,id:o}=e,d=i&&o?i[o]:void 0;d&&"string"==typeof d&&(c=Object.assign({},c,{src:d}));const{target:u,zoom:h}=r.RenderEnvironment;if(void 0!==u&&h){const e=t?{frame:t,target:u,zoom:h}:null;s.setImageForFill(c,e,n),a&&e&&l(e)}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0);t.processOverrideForwarding=function processOverrideForwarding(e,t){if(!t&&!(t=e.children))return{props:e,children:t};let n=e._forwardedOverrides;const o=e._overrideForwardingDescription;if(o){n=void 0;for(const t in o){const i=o[t];void 0!==e[i]&&(n||(n={},e=Object.assign({},e)),n[t]=e[i],delete e[i])}}return n?{props:e,children:t=i.Children.map(t,e=>i.cloneElement(e,{_forwardedOverrides:n}))}:{props:e,children:t}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(230),o=["_border","_constraints","animate","initial","variants","transition","inherit","static","center","initial","transformTemplate","transformValues","animate","variants","transition","onUpdate","onAnimationComplete","onPanSessionStart","onTapCancel","whileTap","whileHover","onHoverStart","onHoverEnd","drag","dragDirectionLock","dragPropagation","dragConstraints","dragElastic","dragMomentum","dragTransition","onDragStart","onDragEnd","onDrag","onDirectionLock","onDragTransitionEnd","x","y","rotate","rotateX","rotateY","rotateZ","position","border","borderRadius","shadow","size"],r=["autoSize","aspectRatio","borderWidth","borderStyle","borderColor","centerX","centerY"];t.isDeprecatedFrameProps=function isDeprecatedFrameProps(e){let t;for(const n in e)if(i.isAnimatable(e[n]))return!0;for(t of o)if(e.hasOwnProperty(t))return!1;for(t of r)if(e.hasOwnProperty(t))return!0;return!1}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(105);t.ImagePatternElement=class ImagePatternElement extends i.Component{render(){const{id:e,path:t,transform:n}=this.props,r=o.imageUrlForAsset(t);return i.createElement("pattern",{id:e,width:"100%",height:"100%",patternContentUnits:"objectBoundingBox"},i.createElement("image",{key:r,width:1,height:1,xlinkHref:r,preserveAspectRatio:"none",transform:n}))}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(18),o=n(7);const r=[["Arial",[["Regular","Arial",void 0],["Black","Arial-Black",void 0],["Narrow","Arial Narrow",void 0],["Rounded Bold","Arial Rounded MT Bold",void 0]]],["Avenir",[["Book","Avenir",void 0],["Light","Avenir-Light",void 0],["Medium","Avenir-Medium",void 0],["Heavy","Avenir-Heavy",void 0],["Black","Avenir-Black",void 0]]],["Avenir Next",[["Regular","Avenir Next",void 0],["Ultra Light","AvenirNext-UltraLight",void 0],["Medium","AvenirNext-Medium",void 0],["Demi Bold","AvenirNext-DemiBold",void 0],["Heavy","AvenirNext-Heavy",void 0]]],["Avenir Next Condensed",[["Regular","Avenir Next Condensed",void 0],["Ultra Light","AvenirNextCondensed-UltraLight",void 0],["Medium","AvenirNextCondensed-Medium",void 0],["Demi Bold","AvenirNextCondensed-DemiBold",void 0],["Heavy","AvenirNextCondensed-Heavy",void 0]]],["Baskerville",[["Regular","Baskerville",void 0],["Semi Bold","Baskerville-SemiBold",void 0]]],["Bodoni 72",[["Book","Bodoni 72",void 0],["Oldstyle","Bodoni 72 Oldstyle",void 0],["Smallcaps","Bodoni 72 Smallcaps",void 0]]],["Courier",[["Regular","Courier",void 0]]],["Courier New",[["Regular","Courier New",void 0]]],["Futura",[["Medium","Futura",void 0],["Condensed","Futura-CondensedMedium",void 0],["Condensed ExtraBold","Futura-CondensedExtraBold",void 0]]],["Georgia",[["Regular","Georgia",void 0]]],["Gill Sans",[["Regular","Gill Sans",void 0],["Light","GillSans-Light",void 0],["SemiBold","GillSans-SemiBold",void 0],["UltraBold","GillSans-UltraBold",void 0]]],["Helvetica",[["Regular","Helvetica",void 0],["Light","Helvetica-Light",void 0]]],["Helvetica Neue",[["Regular","Helvetica Neue",void 0],["UltraLight","HelveticaNeue-UltraLight",void 0],["Thin","HelveticaNeue-Thin",void 0],["Light","HelveticaNeue-Light",void 0],["Medium","HelveticaNeue-Medium",void 0],["Condensed Bold","HelveticaNeue-CondensedBold",void 0],["Condensed Black","HelveticaNeue-CondensedBlack",void 0]]],["Hoefler Text",[["Regular","Hoefler Text",void 0]]],["Impact",[["Regular","Impact",void 0]]],["Lucida Grande",[["Regular","Lucida Grande",void 0]]],["Menlo",[["Regular","Menlo",void 0]]],["Monaco",[["Regular","Monaco",void 0]]],["Optima",[["Regular","Optima",void 0],["ExtraBlack","Optima-ExtraBlack",void 0]]],["Palatino",[["Regular","Palatino",void 0]]],["SF Compact Display",[["Regular","__SF-Compact-Display-Regular__",400],["Ultralight","__SF-Compact-Display-Ultralight__",100],["Thin","__SF-Compact-Display-Thin__",200],["Light","__SF-Compact-Display-Light__",300],["Medium","__SF-Compact-Display-Medium__",500],["Semibold","__SF-Compact-Display-Semibold__",600],["Bold","__SF-Compact-Display-Bold__",700],["Heavy","__SF-Compact-Display-Heavy__",800],["Black","__SF-Compact-Display-Black__",900]]],["SF Compact Rounded",[["Regular","__SF-Compact-Rounded-Regular__",400],["Ultralight","__SF-Compact-Rounded-Ultralight__",100],["Thin","__SF-Compact-Rounded-Thin__",200],["Light","__SF-Compact-Rounded-Light__",300],["Medium","__SF-Compact-Rounded-Medium__",500],["Semibold","__SF-Compact-Rounded-Semibold__",600],["Bold","__SF-Compact-Rounded-Bold__",700],["Heavy","__SF-Compact-Rounded-Heavy__",800],["Black","__SF-Compact-Rounded-Black__",900]]],["SF Compact Text",[["Regular","__SF-Compact-Text-Regular__",400],["Light","__SF-Compact-Text-Light__",200],["Medium","__SF-Compact-Text-Medium__",500],["Semibold","__SF-Compact-Text-Semibold__",600],["Bold","__SF-Compact-Text-Bold__",700],["Heavy","__SF-Compact-Text-Heavy__",800],["Italic","__SF-Compact-Text-Italic__",400],["Light Italic","__SF-Compact-Text-Light-Italic__",200],["Medium Italic","__SF-Compact-Text-Medium-Italic__",500],["Bold Italic","__SF-Compact-Text-Bold-Italic__",700],["Heavy Italic","__SF-Compact-Text-Heavy-Italic__",800],["Semibold Italic","__SF-Compact-Text-Semibold-Italic__",600]]],["SF Pro Display",[["Regular","__SF-UI-Display-Regular__",400],["Ultralight","__SF-UI-Display-Ultralight__",100],["Thin","__SF-UI-Display-Thin__",200],["Light","__SF-UI-Display-Light__",300],["Medium","__SF-UI-Display-Medium__",500],["Semibold","__SF-UI-Display-Semibold__",600],["Bold","__SF-UI-Display-Bold__",700],["Heavy","__SF-UI-Display-Heavy__",800],["Black","__SF-UI-Display-Black__",900],["Italic","__SF-UI-Display-Italic__",400],["Ultralight Italic","__SF-UI-Display-Ultralight-Italic__",100],["Thin Italic","__SF-UI-Display-Thin-Italic__",200],["Light Italic","__SF-UI-Display-Light-Italic__",300],["Medium Italic","__SF-UI-Display-Medium-Italic__",500],["Semibold Italic","__SF-UI-Display-Semibold-Italic__",600],["Bold Italic","__SF-UI-Display-Bold-Italic__",700],["Heavy Italic","__SF-UI-Display-Heavy-Italic__",800],["Black Italic","__SF-UI-Display-Black-Italic__",900]]],["SF Pro Display Condensed",[["Regular","__SF-UI-Display-Condensed-Regular__",400],["Ultralight","__SF-UI-Display-Condensed-Ultralight__",100],["Thin","__SF-UI-Display-Condensed-Thin__",200],["Light","__SF-UI-Display-Condensed-Light__",300],["Medium","__SF-UI-Display-Condensed-Medium__",500],["Semibold","__SF-UI-Display-Condensed-Semibold__",600],["Bold","__SF-UI-Display-Condensed-Bold__",700],["Heavy","__SF-UI-Display-Condensed-Heavy__",800],["Black","__SF-UI-Display-Condensed-Black__",900]]],["SF Pro Text",[["Regular","__SF-UI-Text-Regular__",400],["Light","__SF-UI-Text-Light__",200],["Medium","__SF-UI-Text-Medium__",500],["Semibold","__SF-UI-Text-Semibold__",600],["Bold","__SF-UI-Text-Bold__",700],["Heavy","__SF-UI-Text-Heavy__",800],["Italic","__SF-UI-Text-Italic__",400],["Light Italic","__SF-UI-Text-Light-Italic__",200],["Medium Italic","__SF-UI-Text-Medium-Italic__",500],["Semibold Italic","__SF-UI-Text-Semibold-Italic__",600],["Bold Italic","__SF-UI-Text-Bold-Italic__",700],["Heavy Italic","__SF-UI-Text-Heavy-Italic__",800]]],["SF Pro Text Condensed",[["Regular","__SF-UI-Text-Condensed-Regular__",400],["Light","__SF-UI-Text-Condensed-Light__",200],["Medium","__SF-UI-Text-Condensed-Medium__",500],["Semibold","__SF-UI-Text-Condensed-Semibold__",600],["Bold","__SF-UI-Text-Condensed-Bold__",700],["Heavy","__SF-UI-Text-Condensed-Heavy__",800]]],["Tahoma",[["Regular","Tahoma",void 0]]],["Times",[["Regular","Times",void 0]]],["Times New Roman",[["Regular","Times New Roman",void 0]]],["Trebuchet",[["Regular","Trebuchet MS",void 0]]],["Verdana",[["Regular","Verdana",void 0]]]];t.typefaceAliases={"__SF-Compact-Display-Regular__":"SFCompactDisplay-Regular|.SFCompactDisplay-Regular","__SF-Compact-Display-Ultralight__":"SFCompactDisplay-Ultralight|.SFCompactDisplay-Ultralight","__SF-Compact-Display-Thin__":"SFCompactDisplay-Thin|.SFCompactDisplay-Thin","__SF-Compact-Display-Light__":"SFCompactDisplay-Light|.SFCompactDisplay-Light","__SF-Compact-Display-Medium__":"SFCompactDisplay-Medium|.SFCompactDisplay-Medium","__SF-Compact-Display-Semibold__":"SFCompactDisplay-Semibold|.SFCompactDisplay-Semibold","__SF-Compact-Display-Heavy__":"SFCompactDisplay-Heavy|.SFCompactDisplay-Heavy","__SF-Compact-Display-Black__":"SFCompactDisplay-Black|.SFCompactDisplay-Black","__SF-Compact-Display-Bold__":"SFCompactDisplay-Bold|.SFCompactDisplay-Bold","__SF-UI-Text-Regular__":".SFNSText|SFProText-Regular|SFUIText-Regular|.SFUIText","__SF-UI-Text-Light__":".SFNSText-Light|SFProText-Light|SFUIText-Light|.SFUIText-Light","__SF-UI-Text-Medium__":".SFNSText-Medium|SFProText-Medium|SFUIText-Medium|.SFUIText-Medium","__SF-UI-Text-Semibold__":".SFNSText-Semibold|SFProText-Semibold|SFUIText-Semibold|.SFUIText-Semibold","__SF-UI-Text-Bold__":".SFNSText-Bold|SFProText-Bold|SFUIText-Bold|.SFUIText-Bold","__SF-UI-Text-Heavy__":".SFNSText-Heavy|SFProText-Heavy|.SFUIText-Heavy","__SF-UI-Text-Italic__":".SFNSText-Italic||SFProText-Italic|SFUIText-Italic|.SFUIText-Italic","__SF-UI-Text-Light-Italic__":".SFNSText-LightItalic|SFProText-LightItalic|SFUIText-LightItalic|.SFUIText-LightItalic","__SF-UI-Text-Medium-Italic__":".SFNSText-MediumItalic|SFProText-MediumItalic|SFUIText-MediumItalic|.SFUIText-MediumItalic","__SF-UI-Text-Semibold-Italic__":".SFNSText-SemiboldItalic|SFProText-SemiboldItalic|SFUIText-SemiboldItalic|.SFUIText-SemiboldItalic","__SF-UI-Text-Bold-Italic__":".SFNSText-BoldItalic|SFProText-BoldItalic|SFUIText-BoldItalic|.SFUIText-BoldItalic","__SF-UI-Text-Heavy-Italic__":".SFNSText-HeavyItalic|SFProText-HeavyItalic|.SFUIText-HeavyItalic","__SF-Compact-Text-Regular__":"SFCompactText-Regular|.SFCompactText-Regular","__SF-Compact-Text-Light__":"SFCompactText-Light|.SFCompactText-Light","__SF-Compact-Text-Medium__":"SFCompactText-Medium|.SFCompactText-Medium","__SF-Compact-Text-Semibold__":"SFCompactText-Semibold|.SFCompactText-Semibold","__SF-Compact-Text-Bold__":"SFCompactText-Bold|.SFCompactText-Bold","__SF-Compact-Text-Heavy__":"SFCompactText-Heavy|.SFCompactText-Heavy","__SF-Compact-Text-Italic__":"SFCompactText-Italic|.SFCompactText-Italic","__SF-Compact-Text-Light-Italic__":"SFCompactText-LightItalic|.SFCompactText-LightItalic","__SF-Compact-Text-Medium-Italic__":"SFCompactText-MediumItalic|.SFCompactText-MediumItalic","__SF-Compact-Text-Semibold-Italic__":"SFCompactText-SemiboldItalic|.SFCompactText-SemiboldItalic","__SF-Compact-Text-Bold-Italic__":"SFCompactText-BoldItalic|.SFCompactText-BoldItalic","__SF-Compact-Text-Heavy-Italic__":"SFCompactText-HeavyItalic|.SFCompactText-HeavyItalic","__SF-UI-Display-Condensed-Regular__":".SFNSDisplayCondensed-Regular|SFUIDisplayCondensed-Regular|.SFUIDisplayCondensed-Regular","__SF-UI-Display-Condensed-Ultralight__":".SFNSDisplayCondensed-Ultralight|SFUIDisplayCondensed-Ultralight|.SFUIDisplayCondensed-Ultralight","__SF-UI-Display-Condensed-Thin__":".SFNSDisplayCondensed-Thin|SFUIDisplayCondensed-Thin|.SFUIDisplayCondensed-Thin","__SF-UI-Display-Condensed-Light__":".SFNSDisplayCondensed-Light|SFUIDisplayCondensed-Light|.SFUIDisplayCondensed-Light","__SF-UI-Display-Condensed-Medium__":".SFNSDisplayCondensed-Medium|SFUIDisplayCondensed-Medium|.SFUIDisplayCondensed-Medium","__SF-UI-Display-Condensed-Semibold__":".SFNSDisplayCondensed-Semibold|SFUIDisplayCondensed-Semibold|.SFUIDisplayCondensed-Semibold","__SF-UI-Display-Condensed-Bold__":".SFNSDisplayCondensed-Bold|SFUIDisplayCondensed-Bold|.SFUIDisplayCondensed-Bold","__SF-UI-Display-Condensed-Heavy__":".SFNSDisplayCondensed-Heavy|SFUIDisplayCondensed-Heavy|.SFUIDisplayCondensed-Heavy","__SF-UI-Display-Condensed-Black__":".SFNSDisplayCondensed-Black|.SFUIDisplayCondensed-Black","__SF-UI-Display-Regular__":".SFNSDisplay|SFProDisplay-Regular|SFUIDisplay-Regular|.SFUIDisplay","__SF-UI-Display-Ultralight__":".SFNSDisplay-Ultralight|SFProDisplay-Ultralight|SFUIDisplay-Ultralight|.SFUIDisplay-Ultralight","__SF-UI-Display-Thin__":".SFNSDisplay-Thin|SFProDisplay-Thin|SFUIDisplay-Thin|.SFUIDisplay-Thin","__SF-UI-Display-Light__":".SFNSDisplay-Light|SFProDisplay-Light|SFUIDisplay-Light|.SFUIDisplay-Light","__SF-UI-Display-Medium__":".SFNSDisplay-Medium|SFProDisplay-Medium|SFUIDisplay-Medium|.SFUIDisplay-Medium","__SF-UI-Display-Semibold__":".SFNSDisplay-Semibold|SFProDisplay-Semibold|SFUIDisplay-Semibold|.SFUIDisplay-Semibold","__SF-UI-Display-Bold__":".SFNSDisplay-Bold|SFProDisplay-Bold|SFUIDisplay-Bold|.SFUIDisplay-Bold","__SF-UI-Display-Heavy__":".SFNSDisplay-Heavy|SFProDisplay-Heavy|SFUIDisplay-Heavy|.SFUIDisplay-Heavy","__SF-UI-Display-Black__":".SFNSDisplay-Black|SFProDisplay-Black|.SFUIDisplay-Black","__SF-UI-Display-Italic__":".SFNSDisplay-Italic|SFProDisplay-Italic|SFUIDisplay-Italic","__SF-UI-Display-Ultralight-Italic__":".SFNSDisplay-UltralightItalic|SFProDisplay-UltralightItalic|SFUIDisplay-UltralightItalic|.SFUIDisplay-UltralightItalic","__SF-UI-Display-Thin-Italic__":".SFNSDisplay-ThinItalic|SFProDisplay-ThinItalic|SFUIDisplay-ThinItalic|.SFUIDisplay-ThinItalic","__SF-UI-Display-Light-Italic__":".SFNSDisplay-LightItalic|SFProDisplay-LightItalic|SFUIDisplay-LightItalic|.SFUIDisplay-LightItalic","__SF-UI-Display-Medium-Italic__":".SFNSDisplay-MediumItalic|SFProDisplay-MediumItalic|SFUIDisplay-MediumItalic|.SFUIDisplay-MediumItalic","__SF-UI-Display-Semibold-Italic__":".SFNSDisplay-SemiboldItalic|SFProDisplay-SemiboldItalic|SFUIDisplay-SemiboldItalic|.SFUIDisplay-SemiboldItalic","__SF-UI-Display-Bold-Italic__":".SFNSDisplay-BoldItalic|SFProDisplay-BoldItalic|SFUIDisplay-BoldItalic|.SFUIDisplay-BoldItalic","__SF-UI-Display-Heavy-Italic__":".SFNSDisplay-HeavyItalic|SFProDisplay-HeavyItalic|SFUIDisplay-HeavyItalic|.SFUIDisplay-HeavyItalic","__SF-UI-Display-Black-Italic__":".SFNSDisplay-BlackItalic|SFProDisplay-BlackItalic|.SFUIDisplay-BlackItalic","__SF-UI-Text-Condensed-Regular__":".SFNSTextCondensed-Regular|SFUITextCondensed-Regular|.SFUITextCondensed-Regular","__SF-UI-Text-Condensed-Light__":".SFNSTextCondensed-Light|SFUITextCondensed-Light|.SFUITextCondensed-Light","__SF-UI-Text-Condensed-Medium__":".SFNSTextCondensed-Medium|SFUITextCondensed-Medium|.SFUITextCondensed-Medium","__SF-UI-Text-Condensed-Semibold__":".SFNSTextCondensed-Semibold|SFUITextCondensed-Semibold|.SFUITextCondensed-Semibold","__SF-UI-Text-Condensed-Bold__":".SFNSTextCondensed-Bold|SFUITextCondensed-Bold|.SFUITextCondensed-Bold","__SF-UI-Text-Condensed-Heavy__":".SFNSTextCondensed-Heavy|.SFUITextCondensed-Heavy","__SF-Compact-Rounded-Regular__":"SFCompactRounded-Regular|.SFCompactRounded-Regular","__SF-Compact-Rounded-Ultralight__":"SFCompactRounded-Ultralight|.SFCompactRounded-Ultralight","__SF-Compact-Rounded-Thin__":"SFCompactRounded-Thin|.SFCompactRounded-Thin","__SF-Compact-Rounded-Light__":"SFCompactRounded-Light|.SFCompactRounded-Light","__SF-Compact-Rounded-Medium__":"SFCompactRounded-Medium|.SFCompactRounded-Medium","__SF-Compact-Rounded-Semibold__":"SFCompactRounded-Semibold|.SFCompactRounded-Semibold","__SF-Compact-Rounded-Bold__":"SFCompactRounded-Bold|.SFCompactRounded-Bold","__SF-Compact-Rounded-Heavy__":"SFCompactRounded-Heavy|.SFCompactRounded-Heavy","__SF-Compact-Rounded-Black__":"SFCompactRounded-Black|.SFCompactRounded-Black"},t.typefaces=function convertToOrderedMap(e){return o.OrderedMap(e.map(e=>[e[0],o.OrderedMap(e[1].map(e=>[e[0],{selector:e[1],weight:e[2]}]))]))}(void 0!==i.safeWindow&&void 0!==i.safeWindow.SystemTypefaceDescriptors?i.safeWindow.SystemTypefaceDescriptors:r),t.defaultFontDescriptor=void 0!==i.safeWindow&&void 0!==i.safeWindow.SystemTypefaceDefaultDescriptor?i.safeWindow.SystemTypefaceDefaultDescriptor:t.typefaces.get("SF Pro Text").get("Regular"),t.fontSelectors=o.Map(t.typefaces.flatMap((e,t)=>o.Map(e.map((e,n)=>[e.selector,[t,n,e.weight]]).toArray())))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseVariant=function parseVariant(e){if("regular"===e)return{style:"normal",weight:400};const t=/([0-9]*)([a-z]*)/.exec(e);return t?{weight:parseInt(t[1]||"400"),style:t[2]||"normal"}:null}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(239),o=n(126),r=n(59),s=n(96);t.draftStyles={font:{prefix:"FONT:",default:i.fontStore.defaultFont.selector,setCSS:getStyleForTypefaceOrSelector,fromCSS:getFontStyleStringFromCSS},color:{prefix:"COLOR:",default:"rgb(0, 0, 0)",setCSS:(e,t)=>t.WebkitTextFillColor=e,fromCSS:e=>{let t;if(null!==e.webkitTextFillColor&&(t=e.webkitTextFillColor),null!==e.color&&(t=e.color),t)return r.ConvertColor.toRgbString(t)}},size:{prefix:"SIZE:",default:16,setCSS:(e,t)=>t.fontSize=`${e}px`,fromCSS:e=>a(e,"fontSize")},letterSpacing:{prefix:"LETTERSPACING:",default:0,setCSS:(e,t)=>t.letterSpacing=`${e}px`,fromCSS:e=>a(e,"letterSpacing",1)},lineHeight:{prefix:"LINEHEIGHT:",default:1.2,setCSS:(e,t)=>t.lineHeight=`${e}`,fromCSS:e=>a(e,"lineHeight",1)},align:{prefix:"ALIGN:"}};const a=(e,t,n)=>{if(null===e[t])return;const i=parseFloat(e[t]);return isNaN(i)?void 0:void 0===n?`${i}`:i.toFixed(n)};function isStyleHandler(e){return void 0!==e.setCSS}function getStyleForTypefaceOrSelector(e,t={}){let n=[],r="";i.fontStore.local.isTypefaceAlias(e)&&(e=i.fontStore.local.getTypefaceSelectorByAlias(e)||"");const s=i.fontStore.getTypeface({source:o.TypefaceSourceNames.Local,family:e});if(s&&s.fonts.length&&(r=s.fonts[0].selector)&&(i.fontStore.local.isTypefaceAlias(r)&&(r=i.fontStore.local.getTypefaceSelectorByAlias(r)||""),n=r.split("|")),!r){n=e.split("|");const o=i.fontStore.getOrCreateFontBySelector(e);if(o){const e=o.typeface.family,i=o.weight,r=o.style;-1===n.indexOf(e)&&void 0!==i&&(n.push(e),i&&(t.fontWeight=i)),r&&(t.fontStyle=r)}}e.startsWith(".SF")&&delete t.fontWeight;const a=n.map(e=>{const t=i.fontStore.getOrCreateFontBySelector(e);return t&&t.typeface.source===o.TypefaceSourceNames.Google?t.typeface.family:e});return t.fontFamily=`"${a.join('", "')}"`,e.match(/mono|consolas|console|courier|menlo|monaco/i)?t.fontFamily+=", monospace":e.match(/serif|roboto.slab/i)?t.fontFamily+=", serif":e.match(/sans|arial|roboto|sfui|futura|helvetica|grande|tahoma|verdana/i)?t.fontFamily+=", sans-serif":t.fontFamily+=", serif",t}function getFontStyleStringFromCSS(e){if(null===e.fontFamily)return;const t=e.fontFamily.split(/['"]?, ['"]?/);if(0===t.length)return;t.length>1&&t.pop(),t[0]=t[0].replace(/^['"]/,"");let n=t.join("|"),o=i.fontStore.getFontBySelector(n);if(!o){t.pop();const e=t.join("|");i.fontStore.getFontBySelector(e)&&(n=e)}const r=i.fontStore.local.getTypefaceAliasBySelector(n);if(r&&(n=r),o=i.fontStore.getFontBySelector(n)){const t=o.weight;t&&`${t}`===e.fontWeight&&(e.fontWeight="normal")}return n}t.draftStyleFunction=(e,n=!0)=>{const i={tabSize:4};for(const o in t.draftStyles){const e=t.draftStyles[o];isStyleHandler(e)&&e.setCSS(e.default,i)}return e.forEach(e=>{if("BOLD"===e)s.isFiniteNumber(i.fontWeight)?i.fontWeight=Math.max(i.fontWeight+300,900):i.fontWeight="bold";else if("ITALIC"===e)i.fontStyle="italic";else if("UNDERLINE"===e)i.textDecoration="underline";else if("SELECTION"===e&&n)i.backgroundColor="rgba(128,128,128,0.33)";else for(const n in t.draftStyles){const o=t.draftStyles[n];if(isStyleHandler(o)&&e.startsWith(o.prefix)){o.setCSS(e.slice(o.prefix.length),i);break}}}),i},t.getStyleForTypefaceOrSelector=getStyleForTypefaceOrSelector,t.getFontStyleStringFromCSS=getFontStyleStringFromCSS},function(e,t,n){"use strict";var i=this&&this.__rest||function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(i=Object.getOwnPropertySymbols(e);o<i.length;o++)t.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(e,i[o])&&(n[i[o]]=e[i[o]])}return n};Object.defineProperty(t,"__esModule",{value:!0});const o=n(0),r=n(71),s=n(151),a=n(21),l=n(97),c=n(346),d=n(106),u=n(18),h=n(53),p=150,g=5e3,m=200;let f=m,y=0,v=!0;function resetComponentTimeBudget(){f=m;const e=a.RenderEnvironment.target===a.RenderTarget.preview?g:p;y=Date.now()+e,v&&(v=!1,setTimeout(()=>{v=!0},1)),u.safeWindow.__checkBudget__!==checkBudget&&(u.safeWindow.__checkBudget__=checkBudget)}function checkBudget(){--f<0&&function checkBudgetFull(){if(v)resetComponentTimeBudget();else if(Date.now()>y)throw Error("Component exceeded time limit.");f=m}()}u.safeWindow.__checkBudget__=checkBudget,t.ComponentContainerContext=o.createContext(!1);class ComponentContainer extends r.Layer{constructor(){super(...arguments),this.state={}}componentDidCatch(e,t){let n=t.componentStack.split("\n").filter(e=>0!==e.length),i=0;for(const o of n){if(o.startsWith(`    in ${this.constructor.name}`))break;i++}n=n.slice(0,i),this.setState({lastError:{children:this.props.children,name:e.name,message:e.message,componentStack:n}})}renderErrorPlaceholder(e,t){return o.createElement(l.FrameWithMotion,Object.assign({},this.props,{background:null}),o.createElement(c.ComponentPlaceholder,{type:c.PlaceholderType.Error,title:e,message:t}))}render(){let{children:e}=this.props;const{componentIdentifier:n}=this.props,{lastError:r}=this.state;if(!e||Array.isArray(e)&&0===e.filter(e=>e).length){const e=s.componentLoader.errorForIdentifier(n);if(e)return this.renderErrorPlaceholder(e.file,e.error.toString())}if(r&&r.children===e){const e=s.componentLoader.componentForIdentifier(n),t=e?e.file:"???";return this.renderErrorPlaceholder(t,r.message)}resetComponentTimeBudget();let c=this.props;if(a.RenderTarget.current()!==a.RenderTarget.canvas){const t=c,{left:n,right:r,top:s,bottom:a,center:l,centerX:u,centerY:h,aspectRatio:p,parentSize:g,width:m,height:f,rotation:y,opacity:v,visible:b,_constraints:k,_initialStyle:S,name:C,componentIdentifier:x,children:w,style:T}=t,P=i(t,["left","right","top","bottom","center","centerX","centerY","aspectRatio","parentSize","width","height","rotation","opacity","visible","_constraints","_initialStyle","name","componentIdentifier","children","style"]);e=o.Children.map(w,e=>d.isReactChild(e)&&d.isReactElement(e)?o.cloneElement(e,P):e),c={style:T,_constraints:k,_initialStyle:S,left:n,right:r,top:s,bottom:a,center:l,centerX:u,centerY:h,aspectRatio:p,parentSize:g,width:m,height:f,rotation:y,visible:b,name:C}}return o.createElement(t.ComponentContainerContext.Provider,{value:!0},o.createElement(l.FrameWithMotion,Object.assign({background:null,overflow:"visible"},c),e))}}ComponentContainer.supportsConstraints=!0,ComponentContainer.defaultComponentContainerProps={style:{},visible:!0,componentIdentifier:""},ComponentContainer.defaultProps=Object.assign({},r.Layer.defaultProps,ComponentContainer.defaultComponentContainerProps),t.ComponentContainer=ComponentContainer,ComponentContainer.rect=function(e,t){return h.calculateRect(e,t||h.ParentSizeState.Unknown)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(97);var r;!function(e){e[e.Loading=0]="Loading",e[e.Error=1]="Error"}(r=t.PlaceholderType||(t.PlaceholderType={})),t.ComponentPlaceholder=function ComponentPlaceholder({type:e,title:t,message:n,props:r}){return i.createElement(o.FrameWithMotion,Object.assign({className:className(e),style:s,width:"100%",height:"100%"},r),i.createElement("div",{style:l},function placeholderTitle(e,t){return t?`${typeTitle(e)} in ${function stripSlash(e){return e.startsWith("./")?e.replace("./",""):e}(t)}`:typeTitle(e)}(e,t)),n&&i.createElement("div",{style:c},n))};const s={background:void 0,display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",lineHeight:"1.4em",textOverflow:"ellipsis",overflow:"hidden",minHeight:0},a={overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis",maxWidth:"100%",flexShrink:0,padding:"0 10px"},l=Object.assign({},a,{fontWeight:500}),c=Object.assign({},a,{whiteSpace:"pre",maxHeight:"calc(50% - calc(20px * var(--framerInternalCanvas-canvasPlaceholderContentScaleFactor, 1)))",opacity:.8,WebkitMaskImage:"linear-gradient(to bottom, black 80%, transparent 100%)"});function className(e){switch(e){case r.Error:return"framerInternalUI-errorPlaceholder";case r.Loading:return"framerInternalUI-componentPlaceholder"}}function typeTitle(e){switch(e){case r.Loading:return"Loading";case r.Error:return"Error"}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(7),r=n(81);class TextBlock extends i.Component{render(){const{block:e,blockProps:t}=this.props;let n;if(0===e.getLength()){const t=e.getData().get("emptyStyle",o.OrderedSet()),i=r.CharacterMetadata.create({style:t}),s=e.getCharacterList().insert(0,i);n=e.set("characterList",s)}const s={fontSize:"1px",textAlign:t.alignment};return i.createElement("div",{style:s},i.createElement(r.EditorBlock,Object.assign({},this.props,{block:n||e})))}}t.TextBlock=TextBlock,t.draftBlockRendererFunction=({alignment:e,editable:t})=>n=>({component:TextBlock,props:{alignment:e},editable:t})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(71);t.SVGRoot=class SVGRoot extends i.Component{render(){const{children:e,frame:t}=this.props,{width:n,height:r}=t,s=Math.floor(t.x),a=Math.floor(t.y),l={position:"absolute",width:Math.ceil(n),height:Math.ceil(r),overflow:"visible",display:"block",transform:`translate(${s}px, ${a}px)`};return o.Layer.applyWillChange(this,l),i.createElement("svg",{width:"100%",height:"100%",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",style:l},e)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.transformValues=function transformValues(e,t,n,i){const o=function getTransformMode(e,t){if(void 0!==t){if(t)return"asIs"}else if(!e)return"asIs";return e?"resetXYKeepFraction":"resetXY"}(n,i);return function createTransformValues(e,t){let{x:n,y:i}=e;const{width:o,height:r,rotation:s}=e;return"resetXYKeepFraction"===t?(n-=Math.floor(n),i-=Math.floor(i)):"resetXY"===t&&(n=0,i=0),{x:n,y:i,width:o,height:r,rotation:s}}(Object.assign({},e,{rotation:t}),o)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isShallowEqualArray=function isShallowEqualArray(e,t){return e.length===t.length&&e.every((e,n)=>e===t[n])}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i={stiffness:350,damping:100,restDelta:1,type:"spring"};var o;!function(e){e.Fade={exit:{opacity:0},enter:{opacity:0}},e.PushLeft={exit:{x:"-30%"},enter:{x:"100%"}},e.PushRight={exit:{x:"30%"},enter:{x:"-100%"}},e.PushUp={exit:{y:"-30%"},enter:{y:"100%"}},e.PushDown={exit:{y:"30%"},enter:{y:"-100%"}},e.Instant={animation:{type:!1}},e.Modal={overCurrentContext:!0,goBackOnTapOutside:!0,position:{center:!0},enter:{opacity:0,scale:1.2,y:10}},e.OverlayLeft={overCurrentContext:!0,goBackOnTapOutside:!0,position:{right:0,top:0,bottom:0},enter:{x:"100%"}},e.OverlayRight={overCurrentContext:!0,goBackOnTapOutside:!0,position:{left:0,top:0,bottom:0},enter:{x:"-100%"}},e.OverlayUp={overCurrentContext:!0,goBackOnTapOutside:!0,position:{bottom:0,left:0,right:0},enter:{y:"100%"}},e.OverlayDown={overCurrentContext:!0,goBackOnTapOutside:!0,position:{top:0,left:0,right:0},enter:{y:"-100%"}},e.FlipLeft={backfaceVisible:!1,exit:{rotateY:-180},enter:{rotateY:180},animation:i},e.FlipRight={backfaceVisible:!1,exit:{rotateY:180},enter:{rotateY:-180},animation:i},e.FlipUp={backfaceVisible:!1,exit:{rotateX:180},enter:{rotateX:-180},animation:i},e.FlipDown={backfaceVisible:!1,exit:{rotateX:-180},enter:{rotateX:180},animation:i}}(o=t.TransitionDefaults||(t.TransitionDefaults={})),t.pushTransition=function pushTransition(e){switch(e&&e.appearsFrom?e.appearsFrom:"right"){case"right":return o.PushLeft;case"left":return o.PushRight;case"bottom":return o.PushUp;case"top":return o.PushDown}},t.overlayTransition=function overlayTransition(e){switch(e&&e.appearsFrom?e.appearsFrom:"bottom"){case"right":return o.OverlayLeft;case"left":return o.OverlayRight;case"bottom":return o.OverlayUp;case"top":return o.OverlayDown}},t.flipTransition=function flipTransition(e){switch(e&&e.appearsFrom?e.appearsFrom:"bottom"){case"right":return o.FlipLeft;case"left":return o.FlipRight;case"bottom":return o.FlipUp;case"top":return o.FlipDown}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.delay=(e=0,t)=>{setTimeout(t,1e3*e)},t.isFunction=function isFunction(e){return e instanceof Function},t.isString=function isString(e){return"string"==typeof e},t.isNumber=function isNumber(e){return"number"==typeof e},t.isArray=function isArray(e){return e instanceof Array},t.isObject=function isObject(e){return"object"==typeof e}},function(e,t,n){"use strict";var i=this&&this.__rest||function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(i=Object.getOwnPropertySymbols(e);o<i.length;o++)t.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(e,i[o])&&(n[i[o]]=e[i[o]])}return n};Object.defineProperty(t,"__esModule",{value:!0});const o=n(0),r=n(0),s=n(65),a=n(541),l=n(355),c=n(1),d=n(155),u=n(235),h=n(186),p=n(356),g=n(181),m=n(21),f=n(53),y=n(543);var v=n(544);t.ScrollProps=v.ScrollProps,t.ScrollEvents=v.ScrollEvents,t.ScrollConfig=v.ScrollConfig;const b={horizontal:"x",vertical:"y",both:!0};const k=(e,t,n)=>r.useMemo(()=>{let i;if(!e)return[i,n];i={width:e.width,height:e.height};const r=o.Children.map(n,n=>{if(null===n||"object"!=typeof n||"string"==typeof n.type)return n;const r=n.type;if(l.isRectProviding(r)){const t=r.rect(n.props,e);t&&i?(i.width=Math.max(c.Rect.maxX(t),i.width),i.height=Math.max(c.Rect.maxY(t),i.height)):i=void 0}else i=void 0;const s={};return"vertical"===t?(s.width=e.width,i&&(i.width=e.width)):"horizontal"===t&&(s.height=e.height,i&&(i.height=e.height)),o.cloneElement(n,s)});return[i,r]},[e,t,n]);function Scroll(e){const{direction:t="vertical",directionLock:n=!1,dragEnabled:l=!0,wheelEnabled:p=!0,contentOffsetX:v=0,contentOffsetY:S=0,contentWidth:C,contentHeight:x,onScrollStart:w,onScroll:T,onScrollEnd:P,onDragStart:E,onDrag:F,onDragEnd:M,onUpdate:_,onDirectionLock:O,style:I,children:D,scrollAnimate:N,overflow:R="hidden"}=e,A=i(e,["direction","directionLock","dragEnabled","wheelEnabled","contentOffsetX","contentOffsetY","contentWidth","contentHeight","onScrollStart","onScroll","onScrollEnd","onDragStart","onDrag","onDragEnd","onUpdate","onDirectionLock","style","children","scrollAnimate","overflow"]),L=s.useMotionValue("number"==typeof v?v:0),B=s.useMotionValue("number"==typeof S?S:0),j=g.isMotionValue(v)?v:L,H=g.isMotionValue(S)?S:B,{initial:z,prev:$}=r.useRef({initial:{x:0,y:0},prev:{x:0,y:0}}).current,V=d.unwrapFrameProps(e),U=r.useRef(t);let G;U.current!==t&&(j.set(0),H.set(0),U.current=t);let W=!1;"number"==typeof A.width&&"number"==typeof A.height&&(G={width:A.width,height:A.height},W=!0),A.__fromCodeComponentNode&&!f.constraintsEnabled(V)&&(A.width="100%",A.height="100%",A._constraints={enabled:!0},W=!1);const K=f.useConstraints(V),X=m.RenderTarget.current()===m.RenderTarget.preview,Y=r.useRef(null),q=y.useMeasureSize(Y,{observe:X,skipHook:W,initial:G}),Z=K||q,[J,Q]=k(Z,t,D),ee=r.useRef(null),te=void 0!==C&&void 0!==x||void 0!==J;let ne=a.useChildrenSize(ee,{observe:X,skipHook:te||!X,initial:J});void 0!==C&&(ne=Object.assign({},ne,{width:C})),void 0!==x&&(ne=Object.assign({},ne,{height:x}));const ie={top:-ne.height,left:-ne.width,right:0,bottom:0};Z?(ie.top+=Z.height,ie.left+=Z.width):("number"==typeof A.width?ie.left+=A.width:void 0===A.width&&(ie.left+=d.defaultFrameRect.width),"number"==typeof A.height?ie.top+=A.height:void 0===A.height&&(ie.top+=d.defaultFrameRect.height)),ie.top=Math.min(ie.top,0),ie.left=Math.min(ie.left,0);const oe=()=>({x:j.get(),y:H.get()}),re=r.useCallback(()=>{const e=oe();z.x=e.x,z.y=e.y,$.x=e.x,$.y=e.y},[]),se=r.useCallback(()=>{const e=oe(),t={point:e,velocity:{x:j.getVelocity(),y:H.getVelocity()},offset:{x:e.x-z.x,y:e.y-z.y},delta:{x:e.x-$.x,y:e.y-$.y}};return $.x=e.x,$.y=e.y,t},[j,H]),ae=r.useCallback(e=>{_&&_(e),T&&T(se())},[T,_,se]),le=o.useRef(!1),ce=r.useMemo(()=>{function updateX(e){j.stop(),j.set(function clampX(e){return u.clamp(e,ie.left,ie.right)}(j.get()-e))}function updateY(e){H.stop(),H.set(function clampY(e){return u.clamp(e,ie.top,ie.bottom)}(H.get()-e))}const e=c.debounce(()=>{P&&P(se()),le.current=!1},200);return n=>{if(n.preventDefault(),p){switch(le.current||(re(),w&&w(se()),le.current=!0),t){case"horizontal":updateX(n.deltaX);break;case"vertical":updateY(n.deltaY);break;default:updateX(n.deltaX),updateY(n.deltaY)}e()}}},[j,H,t,ie]);return o.createElement(d.FrameWithMotion,Object.assign({onWheel:ce},A,{overflow:R,style:Object.assign({background:"transparent"},I),preserve3d:A.preserve3d,ref:Y}),o.createElement(d.FrameWithMotion,{animate:N,drag:l&&(de=t,de?b[de]:de),dragDirectionLock:n,dragConstraints:ie,onDragStart:(e,t)=>{re(),E&&E(e,t),w&&w(t)},onDrag:F,onDragEnd:M,onDragTransitionEnd:()=>P&&P(se()),onUpdate:ae,onDirectionLock:O,width:ne.width,height:ne.height,style:{background:"transparent",overflow:"visible",x:j,y:H},preserve3d:A.preserve3d},o.createElement("div",{ref:ee,style:{display:"contain"}},o.createElement(h.EmptyState,{children:D,size:{width:Z&&Z.width||s.unwrapMotionValue(A.width)||d.defaultFrameRect.width,height:Z&&Z.height||s.unwrapMotionValue(A.height)||d.defaultFrameRect.height},insideUserCodeComponent:!A.__fromCodeComponentNode,title:"Connect to scrollable content"}),Q)));var de}t.Scroll=Scroll,p.addPropertyControls(Scroll,{direction:{type:c.ControlType.SegmentedEnum,title:"Direction",options:["vertical","horizontal","both"],defaultValue:"vertical"},directionLock:{type:c.ControlType.Boolean,title:"Lock",enabledTitle:"1 Axis",disabledTitle:"Off",defaultValue:!0},dragEnabled:{type:c.ControlType.Boolean,title:"Drag scroll",enabledTitle:"On",disabledTitle:"Off",defaultValue:!0},wheelEnabled:{type:c.ControlType.Boolean,title:"Wheel scroll",enabledTitle:"On",disabledTitle:"Off",defaultValue:!0},onScroll:{type:c.ControlType.EventHandler},onScrollStart:{type:c.ControlType.EventHandler},onScrollEnd:{type:c.ControlType.EventHandler}}),Scroll.supportsConstraints=!0,Scroll._isStylable=!0},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(542),o=n(0);t.useResizeObserver=function useResizeObserver(e,t,n={}){const{skipHook:r=!1,observeChildren:s=!1}=n;o.useEffect(()=>{if(r||!e.current)return;const n=new i.default(t);if(s)for(const t of e.current.children)n.observe(t);else n.observe(e.current);return()=>{n.disconnect()}},[e.current,r,s,t])}},function(e,t,n){"use strict";function isRectProviding(e){return"rect"in e&&e.rect instanceof Function}Object.defineProperty(t,"__esModule",{value:!0}),t.isRectProviding=isRectProviding,t.rectFromReactNode=function rectFromReactNode(e){if(!e||!0===e||"number"==typeof e||"string"==typeof e||"string"==typeof e.type)return null;const t=e.type,n=e.props;return t&&n&&isRectProviding(t)?t.rect(n):null}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addPropertyControls=function addPropertyControls(e,t){Object.assign(e,{propertyControls:t})},t.getPropertyControls=function getPropertyControls(e){return e.propertyControls}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(325),o=n(1);t.Draggable=i.WithDragging(o.DeprecatedFrameWithEvents)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(359),r=n(97),s=n(244);t.Screen=class Screen extends i.Component{constructor(){super(...arguments),this.session=new o.FramerEventSession(this.dispatcher),this.elementRef=i.createRef()}componentDidMount(){this.elementRef.current&&(this.session.originElement=this.elementRef.current)}render(){const{width:e,height:t,scale:n,color:o="none",children:a}=this.props,l=i.createElement(r.FrameWithMotion,{ref:this.elementRef,width:e,height:t,style:{originX:0,originY:0,scale:n,backgroundColor:o}},a);return i.createElement(s.FramerEventListener,{session:this.session},l)}dispatcher(e,t,n){n.dispatchEvent(new CustomEvent("FramerEvent",{bubbles:!0,detail:{type:e,event:t}}))}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(152),o=n(547),r=n(548),s=n(549);t.FramerEventSession=class FramerEventSession{constructor(e,t){this.events=[],this.recognizers=[],this.mouseWheelRecognizer=new s.MouseWheelGestureRecognizer,this.dispatcher=e,this.originElement=t||document.body;const n=new o.PanGestureRecognizer,i=new r.TapGestureRecognizer;n.handler=this,i.handler=this,this.mouseWheelRecognizer.handler=this,this.recognizers=[i,n]}get isStarted(){return 0!==this.events.length}get startEvent(){return this.isStarted?this.events[0]:null}get lastEvent(){return this.events.length>0?this.events[this.events.length-1]:null}processEvent(e){return this.events.push(e),e}pointerDown(e){this.isStarted||(this.processEvent(e),this.recognizers.map(t=>{t.cancel(),t.pointerSessionBegan(this,e)}))}pointerMove(e){this.isStarted&&(this.processEvent(e),this.recognizers.map(t=>{t.pointerSessionMoved(this,e)}))}pointerUp(e){this.isStarted&&(this.processEvent(e),this.recognizers.map(t=>{t.pointerSessionEnded(this,e)}),this.clearEvents(),this.recognizers.map(e=>{e.reset()}))}mouseWheel(e){this.processEvent(e),this.mouseWheelRecognizer.mouseWheel(this,e),this.clearEvents()}clearEvents(){this.events=[]}dispatch(e,t,n=null){const i=n||this.startEvent&&this.startEvent.target||t.target;i&&this.dispatcher(e,t,i)}gestureBegan(e,t,n){this.dispatch(`${e}start`,t,n)}gestureChanged(e,t,n){this.dispatch(e,t,n)}gestureEnded(e,t,n){this.dispatch(`${e}end`,t,n)}velocity(e=2*i.Loop.TimeStep){if(!this.isStarted||this.events.length<2)return{x:0,y:0};const t=this.events;let n=t.length-1,o=null;for(;n>=0&&(o=t[n],!(i.MainLoop.time-o.loopTime>e));)n--;if(!o)return{x:0,y:0};const r=t[t.length-1],s=1e3*(i.MainLoop.time-o.loopTime);if(0===s)return{x:0,y:0};const a={x:(r.devicePoint.x-o.devicePoint.x)/s,y:(r.devicePoint.y-o.devicePoint.y)/s};return a.x===1/0&&(a.x=0),a.y===1/0&&(a.y=0),a}offset(e){return this.startEvent?((e,t)=>({x:e.x-t.x,y:e.y-t.y}))(e.devicePoint,this.startEvent.devicePoint):{x:0,y:0}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(71),r=n(186),s=n(183),a=n(124),l=n(182),c=n(21),d=n(1),u=n(104),h=n(247),p=n(106),g=n(97),m=n(246),f=n(53),y=["start","center","end"],v=y.map(e=>{switch(e){case"start":return"Start";case"center":return"Center";case"end":return"End"}}),b=y.map(e=>{switch(e){case"start":return"Left";case"center":return"Center";case"end":return"Right"}}),k=y.map(e=>{switch(e){case"start":return"Top";case"center":return"Center";case"end":return"Bottom"}});class DeprecatedStack extends o.Layer{constructor(){super(...arguments),this.state={size:null,shouldCheckImageAvailability:!0,currentBackgroundImageSrc:null}}get rect(){return h.calcStackRect(this.props,null)}static getDerivedStateFromProps(e,t){const n=h.calcUpdatedStackComponentSize(e,t),i=c.RenderTarget.current(),o=e.background&&u.BackgroundImage.isImageObject(e.background)?e.background.src:null;if(o){const e=t.currentBackgroundImageSrc!==o;if(e!==t.shouldCheckImageAvailability)return{size:n,currentBackgroundImageSrc:o,shouldCheckImageAvailability:e}}if(t.size){if(i===c.RenderTarget.preview)return null;if(t.size.width===n.width&&t.size.height===n.height)return null}return{size:n,currentBackgroundImageSrc:o,shouldCheckImageAvailability:t.shouldCheckImageAvailability}}render(){return i.createElement(f.ConsumeParentSize,null,({size:e})=>{const t=f.deprecatedParentSize(e),n=this.props,{visible:o,placeholders:a,_forwardedOverrides:c}=n;if(!o)return null;let d=this.props.children;c&&d&&(d=i.Children.map(this.props.children,e=>i.cloneElement(e,{_forwardedOverrides:c})));const u=h.invisibleItemIndexes(d,a),p=h.calcPaddingSize(n),m=s.ConstraintValues.fromProperties(n),y=s.ConstraintValues.toMinSize(m,t),v=l.Size.subtract(y,p),b=h.calcMinChildSizes(d,v,a),k=DeprecatedStack.autoSize(b,n,u),S=s.ConstraintValues.toSize(m,t,k,null),C=h.calcChildFractions(d),x=DeprecatedStack.freeSpace(S,k,C,n),w=l.Size.subtract(S,p),T=h.calcChildSizes(d,w,x,a),P=h.calcChildLayoutRects(T,w,n,u),E=Object.assign({},this.props);Object.keys(DeprecatedStack.defaultStackSpecificProps).map(e=>{delete E[e]});const F=this.props;if(F._border){const{borderWidth:e,borderColor:t,borderStyle:n}=F._border;Object.assign(E,{borderWidth:e,borderColor:t,borderStyle:n})}return i.createElement(g.DeprecatedFrameWithEvents,Object.assign({},E),this.layoutChildren(P,a),this.layoutPlaceholders(P,a),i.createElement(r.EmptyState,{title:"Drop items",children:this.props.children,size:S,showArrow:!1,hide:!!this.props.placeholders,insideUserCodeComponent:!n.__fromCodeComponentNode}))})}static _cssExport(e){const t={display:"flex",flexDirection:"horizontal"===e.direction?"row":"column",justifyContent:stackDistributionAndAlignmentToFlexbox(e.distribution),alignItems:stackDistributionAndAlignmentToFlexbox(e.alignment)},{top:n,left:i,right:o,bottom:r}=m.paddingFromProps(e);return t.padding=`${n}px ${o}px ${r}px ${i}px`,t}static paddingSize(e){return h.calcPaddingSize(e)}static childLayoutRects(e,t,n,i){return h.calcChildLayoutRects(e,t,n,i)}static autoSize(e,t,n){return h.calcAutoSize(e,t,n)}static freeSpace(e,t,n,i){return h.calcFreeSpace(e,t,n,i)}layoutChildren(e,t){return i.Children.map(this.props.children,(n,o)=>{if(!p.isReactChild(n)||!p.isReactElement(n))return n;t&&o>=t.index&&(o+=t.sizes.length);const r=e[o],a={top:r.y,left:r.x,width:r.width,height:r.height,right:null,bottom:null,_constraints:{enabled:!0}},l=s.getMergedConstraintsProps(n.props,a),c=Object.assign({},l,{style:t?Object.assign({},n.props.style,{WebkitTransition:"transform 0.2s ease-out"}):n.props.style});return i.cloneElement(n,c)})}layoutPlaceholders(e,t){return t?t.sizes.map((n,o)=>{const r=e[t.index+o];return i.createElement(g.DeprecatedFrameWithEvents,{key:`stack-placeholder-${o}`,top:r.y,left:r.x,width:r.width,height:r.height,style:{WebkitTransition:"transform 0.2s ease-out"}})}):null}static childInsertion(e,t,n,i,o){let r=1/0,s=null;const l="vertical"===o.direction;e.forEach((e,t)=>{const i=l?Math.abs(n.y-e.y):Math.abs(n.x-e.x);i>r||(r=i,s=t)});let c=0;if(null!==s){const t=a.Rect.center(e[s]);(l?n.y>t.y:n.x>t.x)&&s++,c=Math.min(Math.max(0,s),e.length)}const d=function crossPadding(e){const{direction:t,alignment:n,paddingPerSide:i,padding:o}=e;if("center"===n)return 0;if(!i)return o;const r="start"===n;return"vertical"===t?r?e.paddingLeft:e.paddingRight:r?e.paddingTop:e.paddingBottom}(o);return{index:c,line:function insertionIndicatorLine(e,t,n,i,o,r,s){const a=o[r-1],l=o[r],c="vertical"===e,d={x:i.width/2,y:i.height/2};if(a||l){if(1===o.length){const e=a||l;0===r?c?d.y=e.y-10:d.x=e.x-10:c?d.y=e.y+e.height+10:d.x=e.x+e.width+10}else if(a&&l){const e=Math.abs(c?a.y+a.height-l.y:a.x+a.width-l.x);c?d.y=l.y-e/2:d.x=l.x-e/2}else if(a){const e=o[r-2],t=Math.abs(c?e.y+e.height-a.y:e.x+e.width-a.x);c?d.y=a.y+a.height+t/2:d.x=a.x+a.width+t/2}else if(l){const e=o[r+1],t=Math.abs(c?l.y+l.height-e.y:l.x+l.width-e.x);c?d.y=l.y-t/2:d.x=l.x-t/2}}else;return d.x=Math.min(Math.max(4,d.x),i.width-8),d.y=Math.min(Math.max(4,d.y),i.height-8),function createLine(e,t,n,i,o,r){const s="vertical"===e;let a,l;const c=10+n;switch(t){case"center":a={x:s?i.x-r.width/2:i.x,y:s?i.y:i.y-r.height/2},l={x:s?i.x+r.width/2:i.x,y:s?i.y:i.y+r.height/2};break;case"start":a={x:s?c:i.x,y:s?i.y:c},l={x:s?r.width+c:i.x,y:s?i.y:r.height+c};break;case"end":default:a={x:s?o.width-r.width-c:i.x,y:s?i.y:o.height-r.height-c},l={x:s?o.width-c:i.x,y:s?i.y:o.height-c}}return{a,b:l}}(e,t,n,d,i,s)}(o.direction,o.alignment,d,t,e,c,i)}}}function stackDistributionAndAlignmentToFlexbox(e){switch(e){case"start":return"flex-start";case"end":return"flex-end";default:return e}}DeprecatedStack.userInterfaceName="Stack",DeprecatedStack._isStylable=!0,DeprecatedStack.defaultStackSpecificProps={direction:"vertical",distribution:"space-around",alignment:"center",gap:10,padding:0,paddingPerSide:!1,paddingTop:0,paddingRight:0,paddingBottom:0,paddingLeft:0},DeprecatedStack.defaultProps=Object.assign({},o.Layer.defaultProps,g.DeprecatedFrame.defaultFrameSpecificProps,DeprecatedStack.defaultStackSpecificProps,{background:null}),DeprecatedStack.propertyControls={direction:{type:d.ControlType.SegmentedEnum,options:["horizontal","vertical"],title:"Direction",defaultValue:"vertical"},distribution:{type:d.ControlType.Enum,options:["start","center","end","space-between","space-around","space-evenly"],optionTitles:["Start","Center","End","Space Between","Space Around","Space Evenly"],title:"Distribute",defaultValue:"space-around"},alignment:{type:d.ControlType.SegmentedEnum,options:["start","center","end"],optionTitles(e){if(!e)return v;return"horizontal"!==e.direction?b:k},title:"Align",defaultValue:"center"},gap:{type:d.ControlType.Number,min:0,title:"Gap",hidden:e=>void 0!==e.distribution&&-1!==["space-between","space-around","space-evenly"].indexOf(e.distribution),defaultValue:10},padding:{type:d.ControlType.FusedNumber,toggleKey:"paddingPerSide",toggleTitles:["Padding","Padding per side"],valueKeys:["paddingTop","paddingRight","paddingBottom","paddingLeft"],valueLabels:["t","r","b","l"],min:0,title:"Padding",defaultValue:0}},t.DeprecatedStack=DeprecatedStack},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(237),o=n(33),r=n(334),s=n(567),a=n(362),l={precalculate:!1,colorModel:n(123).ColorMixModelType.HUSL};class FramerAnimation{constructor(e,t,n,o,c,d=r.MainLoopAnimationDriver){this.playStateSource="idle",this.readyPromise=Promise.resolve(),this.resetFinishedPromise();const u=Object.assign({},l),h={};let p,g;c&&(Object.assign(u,c),Object.assign(h,c)),p=u.customInterpolation?u.customInterpolation:new i.ValueInterpolation(c),g=o?new o(h,p):new a.BezierAnimator({},p),u.precalculate&&(g=new s.PrecalculatedAnimator({animator:g})),g.setFrom(t),g.setTo(n);this.driver=new d(g,t=>{FramerAnimation.driverCallbackHandler(e,t)},t=>{t&&(FramerAnimation.driverCallbackHandler(e,n),"running"===this.playStateSource&&(this.playStateValue="finished"))})}static driverCallbackHandler(e,t){if(o.isAnimatable(e))e.set(t);else{const n=e;o.Animatable.transaction(e=>{for(const i in n){const r=n[i];o.isAnimatable(r)?e(r,t[i]):n[i]=t[i]}})}}get playStateValue(){return this.playStateSource}set playStateValue(e){if(e!==this.playStateSource){const t=e;switch(this.playStateSource=e,e){case"idle":"running"===t&&this.oncancel&&this.oncancel(),this.readyResolve&&this.readyResolve(),this.resetReadyPromise();break;case"finished":if("idle"===t){console.warn("Bad state transition");break}this.onfinish&&this.onfinish(),this.finishedResolve&&this.finishedResolve();break;case"running":this.resetReadyPromise()}"finished"===t&&this.resetFinishedPromise(),"finished"===e&&(this.playStateValue="idle")}}get playState(){return this.playStateValue}resetReadyPromise(){this.readyResolve=null,this.readyPromise=new Promise((e,t)=>{this.readyResolve=e})}get ready(){return this.readyPromise}resetFinishedPromise(){this.finishedResolve=null,this.finishedReject=null,this.finishedPromise=new Promise((e,t)=>{this.finishedResolve=e,this.finishedReject=t}),this.finishedPromise.catch(e=>{})}get finished(){return this.finishedPromise}play(){this.playStateValue="running",this.driver.play()}cancel(){if("running"===this.playStateValue){if(this.driver.cancel(),"idle"!==this.playState){const e="AbortError";this.finishedReject&&this.finishedReject(e)}this.playStateValue="idle"}}finish(){"running"===this.playStateSource&&(this.playStateValue="finished",this.driver.finish())}isFinished(){return"finished"===this.playStateValue}}t.FramerAnimation=FramerAnimation},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(228);var o;!function(e){e.Linear="linear",e.Ease="ease",e.EaseIn="ease-in",e.EaseOut="ease-out",e.EaseInOut="ease-in-out"}(o=t.Bezier||(t.Bezier={})),t.BezierDefaults={curve:o.Ease,duration:1};t.BezierAnimator=class BezierAnimator{constructor(e,n){let r;this.interpolation=n,this.progress=0,this.next=e=>{const{duration:t}=this.options;this.progress+=e/t;const n=this.unitBezier.solve(this.progress,this.solveEpsilon(t));return this.current=this.interpolator(n),this.current},this.options=Object.assign({},t.BezierDefaults,e),r="string"==typeof this.options.curve?function controlPointsForCurve(e){switch(e){case o.Linear:return[0,0,1,1];case o.Ease:return[.25,.1,.25,1];case o.EaseIn:return[.42,0,1,1];case o.EaseOut:return[0,0,.58,1];case o.EaseInOut:return[.42,0,.58,1]}}(this.options.curve):this.options.curve;const[s,a,l,c]=r;this.unitBezier=new UnitBezier(i.Point(s,a),i.Point(l,c))}setFrom(e){this.current=e,this.updateInterpolator()}setTo(e){this.destination=e,this.updateInterpolator()}isReady(){return void 0!==this.interpolator}updateInterpolator(){void 0!==this.current&&void 0!==this.destination&&(this.interpolator=this.interpolation.interpolate(this.current,this.destination))}isFinished(){return this.progress>=1}solveEpsilon(e){return 1/(200*e)}};class UnitBezier{constructor(e,t){this.c=i.Point.multiply(e,3),this.b=i.Point.subtract(i.Point.multiply(i.Point.subtract(t,e),3),this.c),this.a=i.Point.subtract(i.Point.subtract(i.Point(1,1),this.c),this.b)}solve(e,t){return this.sampleY(this.solveForT(e,t))}sampleX(e){return((this.a.x*e+this.b.x)*e+this.c.x)*e}sampleY(e){return((this.a.y*e+this.b.y)*e+this.c.y)*e}sampleDerivativeX(e){return(3*this.a.x*e+2*this.b.x)*e+this.c.x}solveForT(e,t){let n,i,o,r,s,a;for(o=e,a=0;a<8;++a){if(r=this.sampleX(o)-e,Math.abs(r)<t)return o;if(s=this.sampleDerivativeX(o),Math.abs(s)<t)break;o-=r/s}if((o=e)<(n=0))return n;if(o>(i=1))return i;for(;n<i;){if(r=this.sampleX(o),Math.abs(r-e)<t)return o;e>r?n=o:i=o,o=.5*(i-n)+n}return o}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(327);t.Friction=i.FrictionAnimator,t.FrictionOptions=i.Options;var o=n(329);t.SpringAnimator=o.SpringAnimator,t.SpringOptions=o.SpringOptions;var r=n(362);t.BezierAnimator=r.BezierAnimator,t.BezierOptions=r.BezierOptions,t.Bezier=r.Bezier;var s=n(326);t.InertialScroll=s.InertialScrollAnimator,t.InertialScrollOptions=s.Options},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(154);function Data(e={}){const t=i.ObservableObject(e,!1,!1);return Data.addData(t),t}t.Data=Data,function(e){e._stores=[],e.addData=function addData(t){e._stores.push(t)},e.addObserver=function addObserver(e,t){return i.ObservableObject.addObserver(e,t)}}(Data=t.Data||(t.Data={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(364),r=n(152),s={update:0};t.DataObserverContext=i.createContext(s);t.DataObserver=class DataObserver extends i.Component{constructor(){super(...arguments),this.observers=[],this.state=s,this.taskAdded=!1,this.frameTask=()=>{this.setState({update:this.state.update+1}),this.taskAdded=!1},this.observer=()=>{this.taskAdded||(this.taskAdded=!0,r.MainLoop.addFrameTask(this.frameTask))}}render(){const{children:e}=this.props;return this.observers.map(e=>e()),this.observers=[],o.Data._stores.forEach(e=>{const t=o.Data.addObserver(e,this.observer);this.observers.push(t)}),i.createElement(t.DataObserverContext.Provider,{value:Object.assign({},this.state)},e)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(367);function createErrorComponentClass(e){return class ErrorComponent extends i.Component{render(){throw e}}}t.createErrorDefinition=function createErrorDefinition(e,t,n){const i=o.extractComponentNameFromIdentifier(e),r=function cleanFilename(e){return e.startsWith("./")?e.slice(2):e}(i);return Object.assign({class:createErrorComponentClass(t),depth:e.startsWith(".")?0:1,error:t,file:i,identifier:e,name:r,packageIdentifier:"<unknown>",properties:{},type:"component"},n)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.extractComponentNameFromIdentifier=function extractComponentNameFromIdentifier(e){const t=e.match(/(.*?\.[tj]sx?)_.*/);return t?t[1]:e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isErrorDefinition=function isErrorDefinition(e){return void 0!==e&&void 0!==e.error}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.localPackageFallbackIdentifier="|local|"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isDesignDefinition=function isDesignDefinition(e){return"master"===e.type}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(23);t.findMasters=function findMasters(e,t,n){if(!e.id||e.replicaInfo)return;const o=e.children||[];for(const i of o)findMasters(i,t,n);if(!e.isMaster||e.isExternalMaster&&e.isExternalMaster!==t)return;const r=function updateJSONMaster(e,t,n,o){i(!e.id.startsWith(t));const r=t+e.id;let s=void 0;e.children&&Array.isArray(e.children)&&(s=e.children.map(e=>updateJSONMaster(e,t,n,r)));const a=Object.assign({},e,{id:r,parentid:o,children:s,isMaster:!1});return function ensureAbsoluteReferences(e,t){const{codeComponentIdentifier:n,fillImage:i,replicaInfo:o}=e;n&&n.startsWith(".")&&(e.codeComponentIdentifier=`${t}/${n}`),i&&(e.fillImage=`node_modules/${t}/design/images/${i}`),o&&-1===o.master.indexOf("-")&&(e.replicaInfo=Object.assign({},o,{master:`${t}-${o.master}`}))}(a,n),a}(e,`${t}-${e.id}-`,t,null);r.id=`${t}-${e.id}`,r.isMaster=!0,r.isExternalMaster=t,r.top=0,r.left=0,r.bottom=null,r.right=null,n.push(r)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(48),o=n(374),r=n(623),s=n(85),a=n(110),l=n(16),c=n(164),d=n(92),u=n(115),h=n(624),p=n(90),g=n(27),m=n(62),f=n(25),y=n(199),v=n(192),b=n(19),k=n(11),S=n(262),C=n(34),x=n(41),w=n(1),T=n(56),P=n(22),E=n(12),F=n(385),M=n(260),_=n(84);class CanvasTree extends o.NodeTree{constructor(e,t){super(e,t),this.serializationVersion=F.CanvasTreeVersion,this.spatialCache=null}static createByAdoptingRoot(e){return new CanvasTree(void 0,e)}static createWithRoot(e){return new CanvasTree(void 0,e.cloneWithIds())}newRootNode(){return new s.RootNode}copy(e){return new CanvasTree(this,e)}getParent(e){const t=super.getParent(e);return t&&l.hasChildren(t)&&t.id!==this.root.id?t:null}getParentId(e){return e.parentid}static fromJS(e){if(e.version<this.minimumSerializationVersion)return null;const t=i.default.fromJS(e.root);if(!t)return null;const n=CanvasTree.createWithRoot(t);return T.TemplateHelper.treeDidLoad(n).didNonLinearMove()}toJS(){return{version:this.serializationVersion,root:this.root.toJS()}}latestTree(){return this.latest.tree}getNode(e){return e===this.root.id?null:super.get(e)}getGroundNodesOfType(e,t){const n=this.root.futureOrCurrent().children||[];return t?n.filter(n=>n instanceof e&&!E.isHiddenMaster(n)&&t(n)):n.filter(t=>t instanceof e&&!E.isHiddenMaster(t))}getGroundNodes(e){const t=this.root.futureOrCurrent().children||[];return e?t.filter(t=>!E.isHiddenMaster(t)&&e(t)):t.filter(e=>!E.isHiddenMaster(e))}getNodesWithPredicate(e){const t=[],n=this.root;return this.root.walk(i=>{i!==n&&e(i)&&t.push(i)}),t}getLocalMasterComponents(){return this.getNodesWithPredicate(e=>E.isMaster(e)&&!E.isExternalMaster(e))}forEach(e,t=a.NullID){const n=t||this.root.id;!function _forEach(e,t){let n=void 0;const i=e.children;if(i)for(let o=i.length-1;o>=0;o--)n=_forEach(i[o],t);return!1===n?n:t(e)}(this.getNode(n),e)}getSubtreeNodes(e,t){const n=[],i=t?new Set(t):null,o=e=>{for(let t=0,r=e.length;t<r;t++){const r=e[t];if(i&&i.has(r.id))continue;n.push(r);const s=r.children;s&&o(s)}};if(e){const t=this.getNode(e);t&&o([t])}else o(this.getGroundNodes());return n}create(e,t=this.root.id,n={}){const i=new e;return i.parentid=t,i.set(n),this.insertNode(i,t),i}createClassName(e,t=this.root.id,n={}){const i=y.classMap[e];return this.create(i,t,n)}getSiblings(e,t=!0){const n=this.get(e.parentid),i=null===n?this.getGroundNodes():n.children;return t?i:i.filter(t=>t.id!==e.id)}getGroundNodeFor(e){let t=e;for(;t&&this.getParent(t.id);)t=this.getParent(t.id);return t}getGroundFrameAncestor(e,t=!1){const n=this.get(e);if(!n)return null;if(n.id===this.root.id)return null;if(n.parentid===this.root.id)return c.isDrawableNode(n)&&d.isFrameNode(n)?n:null;if(t&&n instanceof d.default&&null===this.getParent(e))return n;const i=this.ancestors(e);if(i.length>1){const e=i[i.length-2];if(e instanceof d.default)return e}return null}linkNodeChangesTo(e,t){e.cache.links||(e.cache.links=new Set),e.cache.links.add(t)}getRect(e,t=!0){if(e.cache.parentDirectedRect)return Object.assign({},e.cache.parentDirectedRect);const n=this.getParentSize(e,t);let i=e.rect(n);return t&&!c.isVectorNode(e)&&(i=w.Rect.pixelAligned(i)),i}isRootVectorNode(e){const t=this.getParent(e.id);return null===t||!c.isVectorNode(t)}isGroundNode(e){return e.parentid===this.root.id}getAncestorThatMatches(e,t,n=!1,i=!1){const o=this.ancestors(e.id);n&&t(e)&&o.unshift(e),i&&o.reverse();const r=o.find(t);return void 0===r?null:r}getAncestorOfType(e,t,n=!1,i=!1){const o=this.ancestors(e.id);n&&e instanceof t&&o.unshift(e),i&&o.reverse();const r=o.find(e=>e instanceof t);return r||null}getBoundingFrameForNodes(e){if(0===e.length)return{x:0,y:0,width:0,height:0};let t=1/0,n=1/0,i=-1/0,o=-1/0;for(let r=0,s=e.length;r<s;r++){const s=e[r],a=this.convertFrameToCanvas(s);let l=a.x,c=a.y,d=l+a.width,u=c+a.height;(Math.max(l,c,d,u)>Number.MAX_SAFE_INTEGER||Math.min(l,c,d,u)<Number.MIN_SAFE_INTEGER)&&(console.warn("Encountered bounding box with corrupted dimensions. Please contact Framer support."),l=c=d=u=0),l<t&&(t=l),c<n&&(n=c),d>i&&(i=d),u>o&&(o=u)}return{x:t,y:n,width:i-t,height:o-n}}getBoundingFrame(){return this.getBoundingFrameForNodes(this.getGroundNodes())}convertFrameToCanvas(e,t){if(void 0===t)return this.convertRectToCanvasCached(e);const n=w.Rect.cornerPoints(t).map(t=>this.convertPointToCanvas(e,t,!0));return w.Rect.fromPoints(n)}getNodesInRect(e,t=!1){const n=[],i=w.Rect.cornerPoints(e);return this.getNodesInSpatialCache(e).forEach(o=>{if(o.id!==this.root.id){const r=o,s=this.convertFrameToCanvas(r);if(t){if(w.Rect.intersects(s,e)){const t=i.map(e=>this.convertPointToNode(r,e,!0)),o=w.Rect.fromPoints(t),s=w.Rect.atOrigin(this.getRect(r));if(w.Rect.intersects(s,o)){if(this.outOfClippedBounds(e,r))return;n.push(r)}}}else w.Rect.containsRect(e,s)&&n.push(o)}}),n}getNodesContainingFrame(e){const t=[];return this.getNodesInSpatialCache(e).forEach(n=>{if(!c.isDrawableNode(n))return;const i=this.convertFrameToCanvas(n);w.Rect.containsRect(i,e)&&t.push(n)}),t}outOfClippedBounds(e,t){return void 0!==this.ancestors(t.id).filter(e=>c.isDrawableNode(e)&&u.hasClip(e)&&e.clip).find(t=>{const n=this.convertPointToNode(t,e,!0),i=w.Rect.atOrigin(this.getRect(t));return!1===w.Rect.intersects(i,Object.assign({width:0,height:0},e,n))})}convertRectToCanvasWithRotation(e,t){void 0===t&&((t=this.getRect(e)).x=0,t.y=0);const n=w.Rect.cornerPoints(t),[i,o,r,s]=n.map(t=>this.convertPointToCanvas(e,t,!0)),a=w.Point.distance(i,o),l=w.Point.distance(i,s),c=w.Point.angle(i,o)+90;return Object.assign({},i,{width:a,height:l,rotation:c})}convertRectToCanvasCached(e){const t=e.cache.canvasRect;if(t)return t;const n=this.getRect(e);n.x=0,n.y=0;const i=w.Rect.cornerPoints(n).map(t=>this.convertPointToCanvas(e,t,!0));return e.cache.canvasRect=w.Rect.fromPoints(i)}convertFrameToNode(e,t,n=!0){if(null===e)return t;const i=w.Rect.cornerPoints(t).map(t=>this.convertPointToNode(e,t,n));return w.Rect.fromPoints(i)}isNodeVisible(e){return e.visible}getIndex(e){const t=this.get(e.parentid);return(t&&l.hasChildren(t)?t.children:this.getGroundNodes()).indexOf(e)}sortVisually(e){return e.map(e=>{const t=this.getNodes(this.getAncestors(e.id));t.reverse();const n=t.map(e=>this.getIndex(e));return n.push(this.getIndex(e)),[n,e]}).sort(([e,t],[n,i])=>h.default(e,n)).map(([e,t])=>t)}convertPointToNode(e,t,n=!0){if(null===e)return t;if(n){const n=e.cache.matrix;if(n)return p.default.convertPoint(n.inverse(),t)}const i=this.ancestors(e.id).slice(0,-1);return n&&i.unshift(e),i.reverse(),i.reduce((e,t)=>p.default.convertPoint(t.transformMatrix(this.getParentRect(t)).inverse(),e),t)}convertPointFromNodeToDescendant(e,t,n,i=!0){let o=!1,r=n;const s=[...t.ancestors()].reverse();i&&s.push(t);for(const a of s){if(!o){o=a.id===e.id;continue}const t=a.transformMatrix(this.getParentRect(a)).inverse();r=p.default.convertPoint(t,r)}if(!o)throw Error("Node is not a descendant");return r}getNodesAtPoint(e,t=!1,n=!1,i){const o=[],r={x:e.x,y:e.y,width:0,height:0};return n&&(r.x-=2,r.width+=4,r.y-=2,r.height+=4),this.getNodesInSpatialCache(r).forEach(s=>{if(!c.isDrawableNode(s))return;const a=this.convertPointToNode(s,e,!0);let l=w.Rect.atOrigin(this.getRect(s));if(n&&(l.width<4&&(l.x-=2,l.width=4),l.height<4&&(l.y-=2,l.height=4)),g.hasShape(s)&&m.hasStroke(s)&&1===s.strokeEnabled&&s.strokeWidth&&(l=w.Rect.inflate(l,s.strokeWidth/2)),w.Rect.containsPoint(l,a)){if(this.outOfClippedBounds(r,s)){if(!t||!s.isSelected()||!i)return;if(!w.Rect.containsRect(i,l))return}if(g.hasShape(s)&&m.hasStroke(s)){const e=s.calculatedPaths(),t=v.getPathOperator().containsPoint(s,a),n=b.default.isClosed(e);if(1===s.strokeEnabled&&!!s.strokeWidth&&!s.fillEnabled){const e=k.closestCurveDistance(s,a),i=s.strokeWidth?s.strokeWidth:0;if(n&&"inside"===s.strokeAlignment){if(!t||e>Math.max(i,2))return}else if(e>Math.max(.5*i,2))return}else if(n&&!t)return}o.push(s)}}),o}getNodesInSpatialCache(e){return this.spatialCache||(this.spatialCache=new r.SpatialCache,this.root.walk(e=>{e.cache.visible&&c.isDrawableNode(e)&&this.spatialCache.add(this,e)})),this.spatialCache.getNodesInRect(this,e)}getParentSize(e,t=!0){return this.getParentRect(e,t)}getParentRect(e,t=!0,n=!0){if(n){const t=e.cache.parentRect;if(t)return t}const i=this.getParent(e.id);return i?this.getRect(i,t):null}convertPointToCanvas(e,t,n=!0,i){if(n&&void 0===i){const n=e.cache.matrix;if(n)return p.default.convertPoint(n,t)}const o=this.ancestors(e.id).slice(0,-1);return n&&o.unshift(e),o.reduce((t,n)=>i&&n.id===e.id?p.default.convertPoint(n.transformMatrix(this.getParentRect(n),i),t):p.default.convertPoint(n.transformMatrix(this.getParentRect(n)),t),t)}convertFramePointsToCanvas(e){return S.default.fromFrame(this.getRect(e)).map(t=>Object.assign({},t,this.convertPointToCanvas(e,t,!0)))}isConstrained(e){if(!e)return!1;if(c.isDrawableNode(e)&&C.isPinnable(e)){return null!==this.getParent(e.id)}return!1}getTopLevelFrameNodes(e,t=!1){const n=[],i=new Set;return e.forEach(e=>{if(!e)return;let o=e;for(;!i.has(o.id);){i.add(o.id);const r=this.getParent(o.id);if(!r)return void(d.isFrameNode(o)&&(o.id!==e.id||t)?n.push(o.id):-1===n.indexOf(a.NullID)&&n.push(a.NullID));o=r}}),n}totalAncestorRotation(e,t=!0){const n=this.getAncestors(e.id).map(e=>this.getNode(e));return t&&n.push(e),n.reduce((e,t)=>f.hasRotation(t)?Math.round(e+t.rotation):e,0)}getPotentialParents(e,t,n,i){const o=[];this.getNodesContainingFrame(e).forEach(t=>{this.outOfClippedBounds(e,t)||l.hasChildren(t)&&(P.isCodeComponentNode(t)&&!_.codeComponentWithChildInsertion(t)||o.push(t))});const r=[];return this.getGroundNodesOfType(d.default).forEach(n=>{const o=this.getRect(n),s=w.Rect.intersects(o,e),a=i&&w.Rect.containsRect(e,o);s&&!a&&t&&w.Rect.containsPoint(o,t)&&r.push(n)}),[...o,...r].filter(e=>!e.originalid&&((!x.hasLock(e)||!e.locked)&&(!!e.cache.visible&&(!!this.isNodeVisible(e)&&!(n&&!l.acceptsChild(this,e,n))))))}clearSelectionCache(){this.root.walk(e=>e.cache.selected=!1)}updateCache(){const e=getCacheUpdateFunction(this)||updateNodeCache,t=this.root.children;for(let n=0,i=t.length;n<i;n++){e(t[n],!0,null,new WebKitCSSMatrix)}}didNonLinearMove(){const e=new Set,t=new Set;return this.root.futureOrCurrent().walk(n=>{if(E.isMaster(n)){if(t.has(n.id))return;t.add(n.id),n.cache.replicaInstances=null}else if(E.isReplica(n)){const e=T.TemplateHelper.getMaster(this,n);if(!e)return;t.has(e.id)||(t.add(e.id),e.cache.replicaInstances=null),T.TemplateHelper.registerInMaster(e,n)}if(n.cache.links){if(e.has(n.id))return;e.add(n.id),n.cache.links=null}if(P.isCodeComponentNode(n)){const t=n.allSlotContent();for(const i of t){const t=this.get(i);if(!t)return;let o=t.cache.links;o&&e.has(i)||(e.add(i),o=t.cache.links=new Set),o.add(n.id)}}}),this}}function updateNodeCache(e,t,n,i,o){const r=e.cache,s=t&&!1!==e.visible&&!E.isHiddenMaster(e),a=p.default.equals(r.parentMatrix,i),l=r.visible===s&&r.lastUpdate===e.update&&w.Rect.equals(r.parentRect,n)&&!o;if(l&&a)return;l?r.canvasRect=null:(r.reset(),r.visible=s,r.lastUpdate=e.update,r.parentDirected=void 0!==o,r.parentRect=n);const c=o&&o[e.id];r.parentDirectedRect=c||null;const d=c||e.rect(n),u=i.multiply(e.transformMatrix(n,d));r.matrix=u,r.parentMatrix=i;const h=e.children;if(h){const t=M.childrenRectsById(e,!1);for(let e=0,n=h.length;e<n;e++){updateNodeCache(h[e],s,d,u,t)}}}function getCacheUpdateFunction(e){return e.root.cache.cacheUpdateFunction}CanvasTree.minimumSerializationVersion=0,t.default=CanvasTree,t.setCacheUpdateFunction=function setCacheUpdateFunction(e,t){e.root.cache.cacheUpdateFunction=t},t.getCacheUpdateFunction=getCacheUpdateFunction},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.NodeCache=class NodeCache{constructor(){this.latest=null,this.future=null}tree(){return this.latest.tree}reset(){this.future=null}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(7),o=n(23),r=n(36),s=n(110);t.USE_FREEZE=!1;class NodeTree{constructor(e,n){this.futures=[],this.allowChangingChildren=!0,this.editClosed=!1,e&&n?(this.latest=e.latest,this.latest.tree=this,this.root=n,this.idToNode=e.futureIdToNode.asImmutable(),o(this.root.cache.latest===this.latest,"Root cache must point to latest node tree")):n?(this.latest={tree:this},this.root=n,this.idToNode=this.importNodes(n),o(!n.mutable,"Root must not be mutable"),o(this.root.cache.latest===this.latest,"Root cache must point to latest node tree")):(this.latest={tree:this},this.root=this.own(this.newRootNode()).freeze(),this.idToNode=i.Map().set(this.root.id,this.root)),this.futureIdToNode=this.idToNode.asMutable(),t.USE_FREEZE&&Object.freeze(this.idToNode)}importNodes(e){e.parentid=s.NullID;const t=i.Map().asMutable();return e.walk(e=>{t.set(e.id,e),this.own(e),e.freeze()}),t.asImmutable()}static createWithRoot(e){return new NodeTree(void 0,e.cloneWithIds())}newRootNode(){return new r.MutableNode}copy(e){return new NodeTree(this,e)}updateCache(){}makeLatest(){return this.latest.tree=this,this.reset()}reset(){return this.futureIdToNode=this.idToNode.asMutable(),this.futures.length>0&&(this.futures.length=0,this.root.walk(e=>e.cache.future=null)),this}isLatest(){return this.latest.tree===this}own(e){return o(e.mutable,"Node must be mutable to own"),o(this.isLatest(),"Must be latest tree to take ownership"),o(!e.cache.latest,"Node must not have a latest tree in cache"),e.cache.latest=this.latest,e}newId(){return s.randomID()}size(){return this.futureIdToNode.size}current(e){return this.get(e.id)}has(e){return!!e&&this.futureIdToNode.has(e)}hasNode(e){return e.cache.latest===this.latest}get(e){if(!e)return null;const t=this.futureIdToNode.get(e);return t?t.cache.future?t.cache.future:t:null}getCurrentOrFuture(e){if(!e)return null;const t=this.idToNode.get(e)||this.futureIdToNode.get(e)||null;return t||null}getFuture(e){if(!e)return null;const t=this.futureIdToNode.get(e);return t?t.cache.future?t.cache.future:t:null}getParent(e){const t=this.get(e);return t?this.get(t.parentid):null}insertNode(e,t,n=-1){o(this.allowChangingChildren,"Changing children must be allowed when inserting"),e.parentid=t||this.root.id,this.own(e),e.cache.future=e,this.futures.push(e),o(!this.futureIdToNode.has(e.id),"Node already inserted in future"),this.futureIdToNode.set(e.id,e);const i=this.primeParents(e);o(i,"Future parent does not exist"),i&&(n<0&&(n+=i.children.length+1),i.children.splice(n,0,e));const r=e.children;if(!r)return e;for(let o=0,s=r.length;o<s;o++)this.insertInternalNode(r[o],e.id);return e}insertNodes(e){for(let t=0,n=e.length;t<n;t++){const n=e[t];this.insertNode(n,n.parentid)}return this}insertInternalNode(e,t){e.parentid=t,this.own(e),e.cache.future=e,this.futures.push(e),this.futureIdToNode.set(e.id,e);const n=e.children;if(n)for(let i=0,o=n.length;i<o;i++)this.insertInternalNode(n[i],e.id)}move(e,t,n){return this.moveNode(this.get(e),t||this.root.id,n),this}moveNode(e,t,n=-1){if(o(this.allowChangingChildren,"Changing children must be allowed when moving"),o(!e.originalid||e.replicaInfo,"Cannot move nodes of replica's"),e.parentid===t)return this.moveNodeIndex(e,n);o(e&&this.futureIdToNode.has(e.id),"Node does not exist or is unknown"),o(!this.nodeIsAncestorOf(e,t),"Node must not be an ancestor of its new parent");const i=e.mutable?this.getCurrentOrFuture(e.id):e;if(i&&i.parentid){const e=this.mutableFutureParent(i).children,t=e.indexOf(i);o(t>=0,"Node must be known as child"),e.splice(t,1)}const r=this.mutableFutureNode(e);r.parentid=t;const s=this.primeParents(r);return s&&(o(s.children,"Future parent must accept children"),n<0&&(n+=s.children.length+1),s.children.splice(n,0,r)),r}moveNodeIndex(e,t=-1){const n=this.mutableFutureParent(e),i=n.children;t<0&&(t+=i.length+1);const r=e.mutable?this.getCurrentOrFuture(e.id):e;o(r,"Node to move not found");const s=this.mutableFutureNode(e),a=i.indexOf(r);return o(a>=0,"Node to move not found in parent"),a===t?s:(n.children.splice(a,1),n.children.splice(t,0,s),s)}update(e,t){return this.updateNode(this.get(e),t),this}updateNode(e,t){return o(!this.editClosed,"Editing must not be closed"),e.set(t,this)}updateNodes(e,t){for(let n=0,i=e.length;n<i;n++)this.updateNode(e[n],t)}removeNode(e){o(this.allowChangingChildren,"Changing children must be allowed when removing"),o(!e.originalid||e.replicaInfo,"Cannot delete nodes of replica's"),o(e.parentid,"Node must have a parent id");const t=this.mutableFutureParent(e).children;let n=t.indexOf(e);n<0&&(n=t.findIndex(t=>t.id===e.id)),n>=0&&t.splice(n,1),this.removeInternalNode(e)}removeInternalNode(e){e=e.futureOrCurrent(),this.futureIdToNode.remove(e.id);const t=e.children;if(t)for(let n=0,i=t.length;n<i;n++)this.removeInternalNode(t[n])}unsafeInsertNode(e,t){o(this.allowChangingChildren,"Changing children must be allowed when inserting"),o(e.parentid===t,"Parentid must have been set correctly"),e.cache.latest||this.own(e),e.mutable&&!this.futureIdToNode.has(e.id)&&(e.cache.future=e,this.futures.push(e),this.futureIdToNode.set(e.id,e));const n=e.children;if(n)for(let i=0,o=n.length;i<o;i++)this.unsafeInsertNode(n[i],e.id)}unsafeRemoveId(e){this.futureIdToNode.remove(e)}remove(e){const t=this.futureIdToNode.get(e);return t?(this.removeNode(t),this):this}hasUncommittedChanges(){return this.futures.length>0}commit(e){o(this.isLatest(),"Tree must be latest to commit");const t=this.root.cache.future;if(null===t)return this;o(t,"Tree must have a future root to commit"),o(t.mutable,"Tree must have a mutable future root to commit");const n=this.futures;for(let o=0;o<n.length;o++)this.futureIdToNode.has(n[o].id)&&n[o].preCommit(this);const i=n.length;for(let o=0,s=i;o<s;o++){const e=n[o];if(this.futureIdToNode.has(e.id)&&e!==t){const t=this.getMutableParent(e);this.swapChild(t,e)}}this.allowChangingChildren=!1;for(let o=0,s=i;o<s;o++)this.futureIdToNode.has(n[o].id)&&n[o].preFreeze(this);for(let o=i;o<n.length;o++){const e=n[o];if(this.futureIdToNode.has(e.id)&&e!==t){const t=this.getMutableParent(e);this.swapChild(t,e)}}for(let o=0,s=n.length;o<s;o++){n[o].freeze()}this.allowChangingChildren=!0,o(!t.mutable,"Future root must not be mutable anymore"),o(!t.cache.future,"Future root should not have a future cache anymore");const r=this.copy(t);return r.updateCache(),e&&e(n),n.length=0,r}verify(){const e=this.verifyNode(this.root);return o(this.idToNode.size===e,"Node count must be equal to expected tree size"),this}verifyNode(e){o(!e.mutable,"Node must not be mutable to verify"),o(!e.cache.future,"Node must not have a future to verify"),t.USE_FREEZE&&o(Object.isFrozen(e),"Node object must be frozen"),t.USE_FREEZE&&o(Object.isFrozen(e.children),"Node children must be frozen"),o(this.get(e.id)===e,"Node must exist: "+e.id);let n=1;const i=e.children;if(i)for(let t=0,r=i.length;t<r;t++){const r=i[t];o(r.parentid===e.id,"Parent id of children must point back correctly"),n+=this.verifyNode(r)}return n}mutableFutureNode(e){let t=e.cache.future;if(t)return t;if(o(!this.editClosed,"Editing must not be closed"),e.mutable)t=e;else{o(this.get(e.id)===e,"Node must be known and up-to-date"),(t=Object.assign(Object.create(e.constructor.prototype),e)).mutable=!0,t.update+=1;const n=t.children;n&&(t.children=n.slice())}return e.cache.future=t,o(e.cache.latest===this.latest,"Node cache must point to latest tree"),o(e.id===t.id&&e.parentid===t.parentid,"Future ids must equal current ids"),this.futures.push(t),this.futureIdToNode.set(t.id,t),t.parentid&&this.primeParents(t),t}mutableFutureParent(e){o(e.parentid,"Node must have a parent id");const t=this.futureIdToNode.get(e.parentid);return o(t,"Node must have a known parent"),this.mutableFutureNode(t)}primeParents(e){o(e.mutable,"Node must be mutable to prime parents");const t=e.parentid;if(e.id===this.root.id)return;const n=this.futureIdToNode.get(t);if(o(n,"Node parent must exist to prime"),n.cache.future)return n.cache.future;const i=this.mutableFutureNode(n);return this.primeParents(i),i}getMutableParent(e){if(e.id===this.root.id)return null;const t=this.futureIdToNode.get(e.parentid);return o(t,"Parent must exist"),o(t.cache.future,"Parent must have a future"),t.cache.future}swapChild(e,t){o(e.mutable,"Parent must be mutable to swap a child"),o(t.parentid===e.id,"Parent id pointer must be correct");const n=e.children;for(let i=0,o=n.length;i<o;i++){if(n[i].id===t.id)return void(n[i]=t)}o(!1,"child.cache.future not in parent.cache.future.children")}nodeIsAncestorOf(e,t){let n=this.get(t);for(o(n,"Node to check must exist");n.id!==this.root.id;){if(n.id===e.id)return!0;n=this.get(n.parentid),o(n,"Ancestor node must exist")}return n.id===e.id}clearCache(){this.futures=[],this.futureIdToNode=this.idToNode.asMutable(),this.root.walk(e=>e.cache.reset())}getNodes(e){const t=[];for(let n=0,i=e.length;n<i;n++){const i=this.get(e[n]);i&&t.push(i)}return t}withoutDescendants(e){const t=[],n=new Set;for(let i=0,o=e.length;i<o;i++)n.add(e[i].id);for(let i=0,o=e.length;i<o;i++){const o=e[i];let r=!1,s=o.parentid;for(;s;){if(n.has(s)){r=!0;break}s=this.get(s).parentid}r||t.push(o)}return t}getTopMostChildNode(e){const t=new Set;for(let i=0,o=e.length;i<o;i++){let n=e[i];for(t.add(n.id);n.parentid&&!t.has(n.parentid);)t.add(n.parentid),n=this.get(n.parentid)}let n=this.root;for(;;){const e=n.children;if(!e)return n===this.root?null:n;let i=null;for(let n=0,o=e.length;n<o;n++){const o=e[n];t.has(o.id)&&(i=o)}if(!i)return n===this.root?null:n;n=i}}getAncestors(e){const t=[];let n=this.get(e);if(!n)throw Error("unknown node");for(n=this.get(n.parentid);n&&n.id!==this.root.id;)t.push(n.id),n=this.get(n.parentid);return t}ancestors(e){const t=[];let n=this.get(e);if(!n)throw Error("Unknown node");for(n=this.get(n.parentid);n;)t.push(n),n=this.get(n.parentid);return t}}t.NodeTree=NodeTree},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i="minSize";function withSizeFunctions(e){return i in e}t.withSizeFunctions=withSizeFunctions;const o={width:0,height:0};t.toMinSize=function toMinSize(e,t){return withSizeFunctions(e)?e.minSize(t):o},t.toSize=function toSize(e,t,n,i){return withSizeFunctions(e)?e.size(t,n,i):o}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(4),o=n(49),r=n(99),s=n(55),a=n(61),l=n(68);t.wantsFilterShadow=function wantsFilterShadow(e){if(i.isVectorNode(e))return!1;if(r.isSVGNode(e))return!0;if(!o.hasFill(e)||"image"!==e.fillType||o.hasOptionalFill(e)&&!e.fillEnabled)return!1;if(s.withRadius(e)&&e.radius)return!1;if(a.withRadiusPerCorner(e)&&(e.radiusTopLeft||e.radiusTopRight||e.radiusBottomLeft||e.radiusBottomLeft))return!1;if(l.hasBoxShadow(e)&&e.boxShadows){const t=e.boxShadows;for(let e=0,n=t.size;e<n;e++)if(t.get(e).spread>0)return!1}return!0}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.colorableDefaults={colorable:!0};const i="colorable";function hasColorable(e){return i in e}t.hasColorable=hasColorable,t.reduceColorable=function reduceColorable(e,t){hasColorable(e)&&(void 0===t.colorable?t.colorable=e.colorable:null!==t.colorable&&t.colorable!==e.colorable&&(t.colorable=null))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(7),o=n(81),r=n(37),s=n(1);const a=function getOSCacheKey(){const e=window.navigator;if(!e)return"";const t=e.userAgent;if(!t)return"";const n=t.match(/\d+[_]\d+/);return n&&n[0]?n[0]:""}();class StyledTextCache{constructor(e,t,n,i){this.html=e,this.width=t,this.size=n,i&&(this._rawLoadedValue=i)}static fromRawValue(e){const t=e.cached;if(!t)return;if(t.os!==a)return;const{html:n,width:i,size:o}=t;if("string"==typeof n&&i>=0&&o&&o.width>=0&&o.height>=0){const t=new StyledTextCache(n,i,o,e);if(t.validateCaches())return t}}toJS(){return{html:this.html,width:this.width,size:this.size,os:a}}toJSON(){return this.toJS()}revive(){if(!this._rawLoadedValue)throw Error("invalid use of lazy loading StyledTextCache");let e=o.convertFromRaw(this._rawLoadedValue);return e=r.StyledTextDraft.convertInternalStateFromRaw(e),o.EditorState.createWithContent(e)}validateCaches(){const e=this.font();if(!e)return!0;const t=(s.getStyleForTypefaceOrSelector(e).fontFamily||"").replace(/"/g,"&quot;");return this.html.indexOf(t)>=0}alignment(e){if(!this._rawLoadedValue)return e.alignment();if(this._alignment){if("undefined"===this._alignment)return;return this._alignment}const t=this._rawLoadedValue.blocks;if(!t)return;let n=void 0;for(let i=0,o=t.length;i<o;i++){const e=t[i];if(n)break;const o=e.inlineStyleRanges;if(o)for(let t=0,i=o.length;t<i;t++){const e=o[t];if(n)break;const i=e.style;i&&i.startsWith("ALIGN:")&&(n=i.slice(6))}}return this._alignment=n||"undefined",n}text(){if(void 0!==this._text)return this._text;if(!this._rawLoadedValue)return null;const e=this._rawLoadedValue.blocks;if(!e)return null;const t=[];for(let n=0,i=e.length;n<i;n++){const i=e[n];t.push(i.text||"")}return this._text=t.join("\n"),this._text}font(){if(!this._rawLoadedValue)return null;const e=this._rawLoadedValue.blocks;if(!e)return null;for(let t=0,n=e.length;t<n;t++){const n=e[t],i=n.inlineStyleRanges;if(i)for(let e=0,t=i.length;e<t;e++){const t=i[e].style;if(t&&t.startsWith("FONT:"))return t.slice(5)}const o=n.data;if(o){const e=o.emptyStyle;if(e)for(let t=0,n=e.length;t<n;t++){const n=e[t];if(n.startsWith("FONT:"))return n.slice(5)}}}return null}fonts(){const e=this.font();return e?i.OrderedSet([e]):null}serialize(e){if(!this._rawLoadedValue)return null;const t=this._rawLoadedValue.blocks;if(!t)return null;if(1!==t.length)return null;let n=void 0;const o=t[0],r=o.text;if(!r)return null;const a=o.inlineStyleRanges;if(!a)return null;const l=[];for(let i=0,s=a.length;i<s;i++){const e=a[i].style;e&&(l.push(e),e.startsWith("ALIGN:")&&(n=e.slice(6)))}return{blocks:[{text:r,inlineStyles:[{css:s.draftStyleFunction(i.OrderedSet(l),!1),startIndex:0,endIndex:r.length}]}],alignment:n}}}t.StyledTextCache=StyledTextCache},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(68);t.WithBoxShadow=i.WithBoxShadow;const o=n(67),r=n(190);t.Shadow=r.Shadow,t.BoxShadow=r.BoxShadow,t.reduceShadows=function reduceShadows(e,t){if(i.hasBoxShadow(e)){const n=[],i=[];e.boxShadows&&e.boxShadows.forEach(e=>{e.inset?(t.enabledInsideShadowLevels[i.length]=t.enabledInsideShadowLevels[i.length]||e.enabled,i.push(e)):(t.enabledOutsideShadowLevels[n.length]=t.enabledOutsideShadowLevels[n.length]||e.enabled,n.push(e))});const o={node:e,outsideShadows:n,insideShadows:i};t.nodeBoxShadows.push(o),t.nodeShadows.push(o)}if(o.hasShadow(e)){const n=[],i=[];e.shadows&&e.shadows.forEach(e=>{t.enabledOutsideShadowLevels[n.length]=t.enabledOutsideShadowLevels[n.length]||e.enabled,n.push(e)}),t.nodeShadows.push({node:e,outsideShadows:n,insideShadows:i})}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(4),o=n(195);t.wrapInShapeContainer=function wrapInShapeContainer(e,t){const n=t.getParent(e.id);if(n&&(i.isVectorNode(n)||i.isShapeContainerNode(n)))return;const r={minX:1/0,maxX:-1/0,minY:1/0,maxY:-1/0};if(o.collectBoundingBox(e,r,!1),!o.isValidBoundingBox(r))return console.error("Error converting document: could not wrap shape in container because of invalid bounding box"),null;const s=o.getRectContainingBoundingBox(r),a=t.getIndex(e),l={top:s.y,left:s.x,width:s.width,height:s.height,fillEnabled:!1,sizeToFit:!0},c=t.create(i.ShapeContainerNode,e.parentid,l);t.move(c.id,e.parentid,a),t.move(e.id,c.id),e.set({x:e.x-r.minX,y:e.y-r.minY})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(1),o=n(118);t.LinearGradient=Object.assign(o.LinearGradient,i.LinearGradient)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sizeToFitDefaults={sizeToFit:!1};const i="sizeToFit";function hasSizeToFit(e){return i in e}t.hasSizeToFit=hasSizeToFit,t.reduceSizeToFit=function reduceSizeToFit(e,t){hasSizeToFit(e)&&(void 0===t.sizeToFit?t.sizeToFit=e.sizeToFit:null!==t.sizeToFit&&e.sizeToFit!==t.sizeToFit&&(t.sizeToFit=null))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(251);t.hasStyledText=function hasStyledText(e){return i.withStyledText(e)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(622);t.default=class ExportOptions extends i.ExportOptionsRecord{toJS(){const e=super.toJS();return e.__class=this.constructor.name,e}toJSON(){return this.toJS()}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CanvasTreeVersion=54},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(387),r=n(633),s=n(388);function elementSize(e){return{height:e.offsetHeight,width:e.offsetWidth}}function resetSize(e,t){e.style.transition="",t.canAnimateHeight&&(e.style.height=t.originalHeight),t.canAnimateWidth&&(e.style.width=t.originalWidth)}t.useAutoSizeTransition=function useAutoSizeTransition(e){const t=i.useRef(null),n=e.ref||t,a=i.useRef(null),{current:l}=i.useRef(new Map);return i.useLayoutEffect(()=>{const t=n.current;if(!t)return;if(!a.current){if(a.current=function getSizeInfo(e){const t=e.style.width||"auto",n=e.style.height||"auto";return{originalWidth:t,originalHeight:n,canAnimateWidth:"auto"===t,canAnimateHeight:"auto"===n,lastSize:elementSize(e)}}(t),r.needsBoxSizingWarning(t),e.useSizeCache){const t=o.keyFromDependencies(e.dependencies);t&&l.set(t,a.current.lastSize)}return}const i=a.current.canAnimateHeight&&!1!==e.heightEnabled,c=a.current.canAnimateWidth&&!1!==e.widthEnabled;if(!i&&!c)return;let d;if(e.useSizeCache){const t=o.keyFromDependencies(e.dependencies);t&&(d=l.get(t))}if(!d&&(resetSize(t,a.current),d=elementSize(t),e.useSizeCache)){const t=o.keyFromDependencies(e.dependencies);t&&l.set(t,d)}const{lastSize:u}=a.current,h=u.height!==d.height,p=u.width!==d.width,g=i&&h,m=c&&p;if(!g&&!m)return;function resetSizeHandler(){t&&a.current&&resetSize(t,a.current)}i&&(t.style.height=`${u.height}px`),c&&(t.style.width=`${u.width}px`),t.getBoundingClientRect(),t.style.transition=s.transitionValue(["width","height"],e),g&&(t.style.height=`${d.height}px`),m&&(t.style.width=`${d.width}px`),a.current.lastSize=d;const f=s.transitionDuration(e),y=s.transitionDurationToMilliseconds(f)+50,v=setTimeout(resetSizeHandler,y);return()=>{clearTimeout(v),resetSizeHandler()}},o.toDependencyArray(e.dependencies)),n}},function(e,t,n){"use strict";function toString(e){return"string"==typeof e?e:"number"==typeof e?e.toString():!0===e||!1===e?`${e}`:"unknown"}Object.defineProperty(t,"__esModule",{value:!0}),t.keyFromDependencies=function keyFromDependencies(e){return Array.isArray(e)?e.map(toString).join("-"):toString(e)},t.toDependencyArray=function toDependencyArray(e){return Array.isArray(e)?e:[e]}},function(e,t,n){"use strict";function transitionDuration(e){return e.duration||"0.2s"}function transitionTimingFunction(e){return e.timingFunction||"cubic-bezier(0.2, 0, 0, 1)"}Object.defineProperty(t,"__esModule",{value:!0}),t.transitionDuration=transitionDuration,t.transitionTimingFunction=transitionTimingFunction,t.transitionValue=function transitionValue(e,t){const n=transitionDuration(t),i=transitionTimingFunction(t);return(Array.isArray(e)?e:[e]).map(e=>`${e} ${n} ${i}`).join(", ")},t.transitionDurationToMilliseconds=function transitionDurationToMilliseconds(e){if(!e)return 0;const t=e.trim().endsWith("ms")?1:1e3,n=parseFloat(e);return isNaN(n)?0:n*t}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(200),r=n(387),s=n(388);function elementOffset(e){return{x:e.offsetLeft,y:e.offsetTop}}function resetOffset(e,t){e.style.transition=t||"",e.style.transform=""}t.usePositionTransition=function usePositionTransition(e){const t=i.useRef(null),n=e.ref||t,a=i.useRef(null);return i.useLayoutEffect(()=>{const t=n.current;if(!t)return;const i=a.current;if(!i)return void(a.current={lastPosition:elementOffset(t),originalTransition:t.style.transition});resetOffset(t);const r=elementOffset(t),{lastPosition:l}=i,c=r.x!==l.x,d=r.y!==l.y;if(!c&&!d)return;i.lastPosition=r;const u=o.Point.delta(r,l);function resetOffsetHandler(){t&&i&&resetOffset(t,i.originalTransition)}t.style.transition="",t.style.transform=`translateX(${u.x}px) translateY(${u.y}px)`,t.getBoundingClientRect(),t.style.transition=s.transitionValue("transform",e),t.style.transform="";const h=s.transitionDuration(e),p=s.transitionDurationToMilliseconds(h)+50,g=setTimeout(resetOffsetHandler,p);return()=>{clearTimeout(g),resetOffsetHandler()}},r.toDependencyArray(e.dependencies)),n}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(44),o="drag-preview-wrapper";function getElement(e){let t=document.getElementById(e);return t||((t=document.createElement("div")).id=e,document.body&&document.body.appendChild(t)),t}function getDragPreviewWrapper(){return getElement(o)}let r;t.displayDragPreview=function displayDragPreview(e,t){const n=getDragPreviewWrapper();r&&r(),n.innerHTML="",n.appendChild(e),r=t},t.removeDragPreview=function removeDragPreview(e){const t=getDragPreviewWrapper();t.contains(e)&&(r=void 0,t.innerHTML="")},t.applyDragPreviewProperties=function applyDragPreviewProperties(e){const t=getDragPreviewWrapper(),n=Object.keys(e);for(const i of n)t.style.setProperty(i,e[i])};const s=getElement("drag-overlay");function setDragOverlayCursor(e){s.style.setProperty("cursor",e)}function displayDragOverlay(e){s.style.setProperty("display",e?"block":"none"),e||setDragOverlayCursor("")}s.style.setProperty("position","absolute"),s.style.setProperty("z-index","1000000"),s.style.setProperty("top","0"),s.style.setProperty("bottom","0"),s.style.setProperty("left","0"),s.style.setProperty("right","0"),s.style.setProperty("display","none"),t.setDragOverlayCursor=setDragOverlayCursor,t.displayDragOverlay=displayDragOverlay,s.addEventListener("mousemove",e=>{i.default.isLeftMouseButtonDown(e)||displayDragOverlay(!1)})},function(e,t,n){"use strict";function isNumber(e){return"number"==typeof e&&Number.isFinite(e)}function isString(e){return"string"==typeof e}function isBoolean(e){return!1===e||!0===e}Object.defineProperty(t,"__esModule",{value:!0}),t.isNumber=isNumber,t.toNumber=function toNumber(e,t){return isNumber(e)?e:t},t.isString=isString,t.toString=function toString(e,t){return isString(e)?e:t},t.isBoolean=isBoolean,t.toBoolean=function toBoolean(e,t){return isBoolean(e)?e:t}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0);function increase(e){return e+1}t.useRefUpdateCount=function useRefUpdateCount(e){const t=i.useRef(null),[n,o]=i.useState(0);return i.useEffect(()=>{e.current!==t.current&&null!==e.current&&(null!==t.current&&o(increase),t.current=e.current)}),n}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.pointInClientRect=function pointInClientRect(e,t){return t.left<=e.x&&t.right>=e.x&&t.top<=e.y&&t.bottom>=e.y}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.DragDataTransfer=class DragDataTransfer{constructor(){this._items=[],this._types=[],this.setData=(e,t)=>{const n=new DragDataTransferItem(e,t),i=this._items.findIndex(t=>t.format===e);-1===i?(this._items.push(n),this._types.push(e)):this._items[i]=n},this.getData=e=>{const t=this._items.find(t=>t.format===e);return t?t.data:void 0},this.dropEffect="none"}get types(){return this._types}};class DragDataTransferItem{constructor(e,t){this.format=e,this.data=t}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(44),r=n(392),s=n(200),a=n(391),l=n(635);function durationInSeconds(e){return e?(Date.now()-e)/1e3:0}function clientPoint(e){return{x:e.clientX,y:e.clientY}}t.useDragGesture=function useDragGesture(e={}){const t=i.useRef(null),n=e.ref||t,c=r.useRefUpdateCount(n),d=i.useRef(e);d.current=e;const u=i.useRef(null);return i.useEffect(()=>{const e=n.current;if(e)return e.addEventListener("mousedown",mouseDownHandler),()=>{endDrag({cancelled:!0}),removeActiveDragHandlers(),e.removeEventListener("mousedown",mouseDownHandler)};function endDrag(e){const t=u.current;if(t){if(t.began&&d.current.onDragEnd){const{cancelled:n,event:i}=e;d.current.onDragEnd({client:t.client,clientAtStart:t.clientAtStart,delta:t.delta,cancelled:!!n,duration:durationInSeconds(t.startTime),altKey:!!i&&i.altKey,ctrlKey:!!i&&i.ctrlKey,metaKey:!!i&&i.metaKey,shiftKey:!!i&&i.shiftKey})}u.current=null,removeActiveDragHandlers()}}function mouseMoveHandler(e){const t=u.current;if(!t)return;e.stopPropagation(),e.preventDefault();const{clientAtStart:n,began:i}=t,o=clientPoint(e),r=s.Point.delta(n,o);t.client=o,t.delta=r;const{onDrag:l,onDragStart:c}=d.current;if(i)l&&l({client:o,delta:r,clientAtStart:n,cancelled:!1,duration:durationInSeconds(t.startTime),altKey:e.altKey,ctrlKey:e.ctrlKey,metaKey:e.metaKey,shiftKey:e.shiftKey});else{const i=s.Point.distance(n,o)>a.toNumber(d.current.movementThreshold,2);if(!i)return;t.began=i,t.startTime=Date.now(),c&&c({client:o,delta:r,clientAtStart:n,cancelled:!1,duration:0,altKey:e.altKey,ctrlKey:e.ctrlKey,metaKey:e.metaKey,shiftKey:e.shiftKey})}}function mouseUpHandler(e){if(!u.current)return;const t=clientPoint(e);u.current.client=t,u.current.delta=s.Point.delta(u.current.clientAtStart,t),endDrag({event:e})}function keyDownHandler(e){o.default.isKey(e,o.default.Key.escape)&&(e.preventDefault(),e.stopPropagation(),endDrag({cancelled:!0,event:e}))}function mouseDownHandler(e){if(!o.default.isLeftMouseClick(e))return;if(!l.allowDragging(e))return;e.preventDefault(),function blurActiveElement(){document.activeElement instanceof HTMLElement&&document.activeElement.blur()}();const t=clientPoint(e);u.current={clientAtStart:t,client:t,delta:{x:0,y:0},began:!1,startTime:null},window.addEventListener("mouseup",mouseUpHandler,{capture:!0}),window.addEventListener("mousemove",mouseMoveHandler,{capture:!0}),window.addEventListener("keydown",keyDownHandler,{capture:!0})}function removeActiveDragHandlers(){window.removeEventListener("mouseup",mouseUpHandler,{capture:!0}),window.removeEventListener("mousemove",mouseMoveHandler,{capture:!0}),window.removeEventListener("keydown",keyDownHandler,{capture:!0})}},[c,n]),n}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(187),r=n(266);t.useDroppable=function useDroppable({dataTypes:e,onDrop:t,onDragOver:n,onDragEnter:s,onDragLeave:a,enabled:l,dropEffect:c,ref:d}){const u=i.useRef(null),h=d||u,p={onDrop:t,onDragOver:n,onDragEnter:s,onDragLeave:a,enabled:l,dropEffect:c},g=i.useRef(p);g.current=p;const m=function useIdentifier(){const e=i.useRef(null);return e.current||(e.current=o()),e.current}(),f=i.useContext(r.dragDataTransferContext);return i.useEffect(()=>(f.registerDroppable({id:m,dataTypes:e,mutablePropsRef:g,getBoundingClientRect:function getBoundingClientRect(){return h.current?h.current.getBoundingClientRect():null}}),()=>f.unregisterDroppable(m)),[]),h}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(267);t.SortableWithSections=function SortableWithSections({sections:e,itemsForSection:t,headerForSection:n,children:r,moveItem:s,removeItem:a,keyForSection:l,keyForItem:c,enabled:d,onDragStart:u,style:h}){const p=[];let g;if(e.forEach((e,n)=>{p.push({type:"header",section:e,sectionIndex:n});const i=t(e,n).map((t,i)=>({type:"item",section:e,sectionIndex:n,item:t,itemIndex:i}));p.push(...i)}),e.length){const t=e[0];g=n(t,0)}return i.createElement(o.Sortable,{header:g,items:p.slice(1),moveItem:(e,t)=>{const n=p[e+1],i=p[t+1];if("item"===n.type)if(function isMovingUp(e,t){return e.sectionIndex===t.sectionIndex?"header"===t.type||e.itemIndex>t.itemIndex:e.sectionIndex>t.sectionIndex}(n,i))if("header"===i.type){const e=function endOfSection(e,t){let n=0,i=null;return t.forEach(t=>{t.sectionIndex===e&&(i=t.section,"header"!==t.type&&n++)}),i?{section:i,sectionIndex:e,itemIndex:n}:null}(i.sectionIndex-1,p);e&&s(n,e)}else s(n,i);else{const e=n.sectionIndex!==i.sectionIndex?1:0,t="item"===i.type?i.itemIndex+e:0;s(n,Object.assign({},i,{itemIndex:t}))}},removeItem:e=>{const t=p[e+1];"item"===t.type&&a(t)},enabled:d,style:h,keyForItem:e=>"header"===e.type?l?l(e):"string"==typeof e.section?e.section:`section-${e.sectionIndex}`:c(e),onDragStart:u},({item:e,isDragPreview:t})=>"header"===e.type?n(e.section,e.sectionIndex):r(Object.assign({},e,{isDragPreview:t})))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(9),o=n(4),r=n(16),s=n(88),a=n(27),l=n(99),c=n(58),d=n(43),u=n(171),h=n(95);t.editActionForSelection=function editActionForSelection(e,t="none"){const{selection:n,tree:p,tool:g}=e;let m=()=>{};if(g.enum!==c.Tools.Highlight&&g.enum!==c.Tools.Move)return m;1===n.length&&"keyboard"===t&&(m=()=>h.dispatchAction("rename"));const f=function maybeGraphicsActionForSelection(e){const t=e.treeStore.selectionAsNodes;if(0===t.length)return null;let n=!0,l=!0,c=!1;for(const i of t)n=n&&a.hasShape(i),l=l&&s.hasPath(i),c=c||o.isBooleanShapeNode(i)||o.isShapeGroupNode(i);return n?l?()=>{i.triggerDrawingShapeEditEvent({}),e.setPathTool()}:c?()=>{const n=[];!function addToSelection(e){for(const t of e)r.hasChildren(t)?addToSelection(t.children):n.push(t.id)}(t),e.setSelection(n)}:d.ContextAction.flattenEnabled(t)?()=>{d.ContextAction.flattenShapes(e,t,!0)}:null:null}(e);if(f&&(m=f),1!==n.length)return m;f||"keyboard"!==t||(m=()=>h.dispatchAction("rename"));const y=p.getNode(n[0]);return y instanceof o.TextNode?m=()=>e.setToolEnum(c.Tools.TextEdit,t):l.isSVGNode(y)?m=()=>{d.ContextAction.convertSVGToShape(e,y)}:o.isShapeContainerNode(y)&&(m=()=>{e.setShapeModeActive(!0);const{mouse:t,cmdKey:i}=e;if(t){let o=p.getNodesAtPoint(t,!0);o=o.filter(t=>u.default(t,e,n,i,!0));const r=p.getTopMostChildNode(o);r&&e.setSelection([r.id])}}),m}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(650),r=n(1),s=n(75),a=n(25),l=n(26),c=n(101),d=n(2);function isChild(e,t){let n=!1;return e.walk(e=>{n||e===t&&(n=!0)}),n}t.default=class Distances extends i.Component{constructor(){super(...arguments),this.getLineFromGuideToGuide=(e,t,n)=>{if(t.axis!==n.axis)return null;const i=[],{axis:o}=t,r=c.getOrthogonalAxis(o),s=c.getGuideAbsoluteOffset(e,n),a=c.getGuideAbsoluteOffset(e,t);let l;const h=u(o);if(t.nodeId===e.root.id){const e=d.default.canvasStore.getCanvasVisibleRect();l=e[r]+e[h]/2}else{const n=c.getGuideNode(e,t);if(!n)return null;const i=e.convertFrameToCanvas(n);l=i[r]+i[h]/2}const p={[o]:a,[r]:l},g={[o]:s,[r]:l};return p&&g?(i.push({a:p,b:g,displayLength:!0}),i):null},this.getLinesFromGuideToRect=(e,t,n)=>{const i=[],{nodeId:o,axis:r}=t,s=c.getGuideAbsoluteOffset(e,t);if(!o||!s)return null;const a=u(r),l=h(r),d=c.getOrthogonalAxis(r),p=n[r],g=p+n[l],m=n[d]+n[a]/2,f={[r]:s,[d]:m};if(s<p){const e={[r]:p,[d]:m};i.push({a:f,b:e,displayLength:!0})}else if(s>g){const e={[r]:g,[d]:m};i.push({a:f,b:e,displayLength:!0})}else if(s>p&&s<g){const e={[r]:p,[d]:m};i.push({a:f,b:e,displayLength:!0});const t={[r]:g,[d]:m};i.push({a:f,b:t,displayLength:!0})}return i},this.getLinesFromRectToRect=(e,t,n,i)=>{if(!e||!n)return null;const o=r.Rect.intersects(i,t),s=[];if(r.Rect.containsRect(t,i))s.push(...g(t,i));else if(r.Rect.containsRect(i,t))s.push(...g(i,t));else if(e&&o&&isChild(e,n))s.push(...g(t,i));else if(e&&o&&isChild(n,e))s.push(...g(i,t));else if(o){const e=r.Rect.cornerPoints(i),n=r.Rect.cornerPoints(t);e.forEach((e,o)=>{const r=n[o];if(p(e,t)&&p(r,i)){const t=Math.min(e.x,r.x),n=Math.max(e.x,r.x),i=Math.min(e.y,r.y),a=Math.max(e.y,r.y),l={x:Math.min(e.x,r.x),y:Math.min(e.y,r.y)};1===o&&(l.x=n),2===o&&(l.x=n,l.y=a),3===o&&(l.y=a);let c=l.x!==n?l.x<n:l.x<t,d=l.y!==a?l.y<a:l.y<i;if(e.x!==l.x){const e=c;c=d,d=e}s.push({a:e,b:l,flipSide:c,displayLength:!0}),s.push({a:r,b:l,flipSide:d,displayLength:!0})}})}else{if(r.Rect.maxX(i)<t.x){const e=t.y+t.height/2,n={x:t.x,y:e},o={x:r.Rect.maxX(i),y:e};if(s.push({a:n,b:o,displayLength:!0}),r.Rect.maxY(i)<e){const e=Object.assign({},o,{y:r.Rect.maxY(i)});s.push({a:e,b:o,dashed:!0})}else if(i.y>e){const e=Object.assign({},o,{y:i.y});s.push({a:e,b:o,dashed:!0})}}else if(r.Rect.maxX(t)<i.x){const e=t.y+t.height/2,n={x:r.Rect.maxX(t),y:e},o={x:i.x,y:e};if(s.push({a:n,b:o,displayLength:!0}),r.Rect.maxY(i)<e){const e=Object.assign({},o,{y:r.Rect.maxY(i)});s.push({a:e,b:o,dashed:!0})}else if(i.y>e){const e=Object.assign({},o,{y:i.y});s.push({a:e,b:o,dashed:!0})}}if(r.Rect.maxY(i)<t.y){const e=t.x+t.width/2,n={x:e,y:t.y},o={x:e,y:r.Rect.maxY(i)};if(s.push({a:n,b:o,displayLength:!0}),r.Rect.maxX(i)<e){const e=Object.assign({},o,{x:r.Rect.maxX(i)});s.push({a:e,b:o,dashed:!0})}else if(i.x>e){const e=Object.assign({},o,{x:i.x});s.push({a:e,b:o,dashed:!0})}}else if(r.Rect.maxY(t)<i.y){const e=t.x+t.width/2,n={x:e,y:r.Rect.maxY(t)},o={x:e,y:i.y};if(s.push({a:n,b:o,displayLength:!0}),r.Rect.maxX(i)<e){const e=Object.assign({},o,{x:r.Rect.maxX(i)});s.push({a:e,b:o,dashed:!0})}else if(i.x>e){const e=Object.assign({},o,{x:i.x});s.push({a:e,b:o,dashed:!0})}}}return s},this.renderRotationOverlay=(e,t)=>e?i.createElement(s.default,{frame:r.Rect.multiply(e,t),backgroundColor:"",border:"1px dashed magenta",borderColor:"magenta",borderWidth:1}):null}render(){const{tree:e,zoom:t,selection:n,selectedGuide:s,highlightedGuide:c}=this.props;let{highlight:d}=this.props;if(n.length<1&&!s)return null;let u=null,h=!1,p=!1,g=null,m=null,f=null;if(null===d)if(s)d=s.nodeId;else{const t=n.map(t=>{const n=e.getNode(t);return e.getParentId(n)}),i=l.commonValue(t);i&&i!==e.root.id&&(d=i)}if((f=d?e.getNode(d):null)&&(p=a.isRotated(f),m=e.convertFrameToCanvas(f)),!m&&!c)return null;if(s)c?u=this.getLineFromGuideToGuide(e,s,c):m&&(u=this.getLinesFromGuideToRect(e,s,m));else{let t=null;if(1===n.length){if(!(t=e.getNode(n[0])))return null;h=a.isRotated(t)}(g=r.Rect.merge(...n.map(t=>{const n=e.getNode(t);return e.convertFrameToCanvas(n)})))&&c?u=this.getLinesFromGuideToRect(e,c,g):m&&(u=this.getLinesFromRectToRect(t,g,f,m))}return u?i.createElement("div",{style:{pointerEvents:"none"}},u.map(({a:e,b:n,displayLength:r,dashed:s})=>i.createElement(o.DistanceLine,Object.assign({key:`distance-(${e.x},${n.x})-(${e.y},${n.y})`},{a:e,b:n,zoom:t,displayLength:r,dashed:s}))),h&&this.renderRotationOverlay(g,t),p&&this.renderRotationOverlay(m,t)):null}};const u=e=>"x"===e?"height":"width",h=e=>"x"===e?"width":"height",p=(e,t)=>!r.Rect.containsPoint(t,e)&&(e.y>t.y&&e.y<r.Rect.maxY(t)||e.x>t.x&&e.x<r.Rect.maxX(t)),g=(e,t)=>{const n=[],i=r.Rect.positions(t),o=r.Rect.positions(e),s=r.Rect.containsRect(e,t)?i:r.Rect.positions(r.Rect.intersection(t,e)),a={x:i.minX,y:s.midY},l={x:o.minX,y:s.midY};n.push({a,b:l,displayLength:!0});const c={x:i.maxX,y:s.midY},d={x:o.maxX,y:s.midY};n.push({a:c,b:d,displayLength:!0});const u={x:s.midX,y:i.minY},h={x:s.midX,y:o.minY};n.push({a:u,b:h,displayLength:!0});const p={x:s.midX,y:i.maxY},g={x:s.midX,y:o.maxY};return n.push({a:p,b:g,displayLength:!0}),n}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(7),o=n(1),r=n(165),s=n(62),a=n(68),l=n(55),c=n(61),d=n(88);function scaleShadow(e,t){if(e)return e.map(e=>new r.BoxShadow(e.merge({x:o.roundedNumber(e.x*t,2),y:o.roundedNumber(e.y*t,2),blur:o.roundedNumber(e.blur*t,2),spread:o.roundedNumber(e.spread*t,2)}))).toList()}function scaledDashArray(e,t){const n=[],i=e.split(",");for(const r of i){const e=parseFloat(r);if(!o.isFiniteNumber(e))continue;const i=o.roundedNumber(e*t,2);n.push(i)}return n.join(", ")}t.collectScalableVectorStyles=function collectScalableVectorStyles(e){const t={};return e.walk(e=>{s.hasStroke(e)&&a.hasBoxShadow(e)&&(t[e.id]={strokeWidth:e.strokeWidth,strokeDashArray:e.strokeDashArray,strokeDashOffset:0,boxShadows:e.boxShadows},l.withRadius(e)&&(t[e.id].radius=e.radius),c.withRadiusPerCorner(e)&&(t[e.id].radiusTopLeft=e.radiusTopLeft,t[e.id].radiusTopRight=e.radiusTopRight,t[e.id].radiusBottomRight=e.radiusBottomRight,t[e.id].radiusBottomLeft=e.radiusBottomLeft),d.hasPath(e)&&(t[e.id].pathSegments=e.pathSegments))}),i.Map(t)},t.scaleVectorStyles=function scaleVectorStyles(e,t,n){t.forEach((t,i)=>{const r=e.getNode(i);if(!r)return;const s={strokeWidth:t.strokeWidth?o.roundedNumber(t.strokeWidth*n,2):void 0,strokeDashArray:t.strokeDashArray?scaledDashArray(t.strokeDashArray,n):void 0,strokeDashOffset:t.strokeDashOffset?o.roundedNumber(t.strokeDashOffset*n,2):void 0,boxShadows:scaleShadow(t.boxShadows,n)};void 0!==t.radius&&(s.radius=o.roundedNumber(t.radius*n,2)),void 0!==t.radiusTopLeft&&(s.radiusTopLeft=o.roundedNumber(t.radiusTopLeft*n,2),s.radiusTopRight=o.roundedNumber(t.radiusTopRight*n,2),s.radiusBottomRight=o.roundedNumber(t.radiusBottomRight*n,2),s.radiusBottomLeft=o.roundedNumber(t.radiusBottomLeft*n,2)),t.pathSegments&&o.withPath(r)&&(s.pathSegments=r.pathSegments.map((e,i)=>{const o=t.pathSegments.get(i).radius*n;return e.merge({radius:o})})),e.updateNode(r,s)})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=e=>{const t=[];return e.forEach((n,i)=>{for(let o=i+1;o<e.length;o++){const i=e[o];t.push([n,i])}}),t}},function(e,t,n){"use strict";var i=this&&this.__rest||function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(i=Object.getOwnPropertySymbols(e);o<i.length;o++)t.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(e,i[o])&&(n[i[o]]=e[i[o]])}return n};Object.defineProperty(t,"__esModule",{value:!0});const o=n(0),r=n(82),s=n(9),a=n(13),l=n(20),c=n(58),d=n(120),u=n(101),h=n(46),p=n(1),g=n(85),m=n(399),f=5;t.GuideMoveTool=class GuideMoveTool extends l.VekterTool{constructor(){super(...arguments),this.enum=c.Tools.Guide,this.startGuideSelector=null,this.axis="x",this.resizeCursor="ew-resize",this.hasBeenOnCanvas=!1,this.didCancel=!1,this.didUpdate=!1,this.mouseDidMove=!1,this.isGuideOnCanvas=(e,t)=>{const n=this.engine.canvasStore.getCanvasVisibleRect(),{zoom:i}=this.engine.canvasStore,o="x"===e?n.width:n.height;return t>n[e]+a.layout.rulerWidth/i&&t<n[e]+o},this.updateSnapLine=(e,t)=>{const n=g.isRootNode(t)?e.getGroundNodes():e.getSubtreeNodes(t.id);this.snappingLines=this.getOrthogonalLines(n),this.scope=t.id},this.getOrthogonalLines=e=>{const{tree:t,zoom:n}=this.engine,i=this.engine.canvasStore.getCanvasVisibleRect(),o=e.map(e=>t.convertFrameToCanvas(e)).filter(e=>r.Rect.intersects(e,i));return d.snappingData(o,n)},this.getSnapPosition=e=>{const t=this.engine;let n=null,i=null;const{zoom:o}=t.canvasStore,r=d.snap(this.snappingLines,o,e);n=r.snapLines.x,i=r.snapLines.y,"x"===this.axis?t.toolStore.setSnapLines(n,null):t.toolStore.setSnapLines(null,i);const s=r.point[this.axis];return p.isFiniteNumber(s)?s:null},this.handleCopy=()=>{if(!this.startGuideSelector)return;const e=u.getGuideNode(this.engine.tree,this.startGuideSelector);e&&(this.engine.altKey?this.createCopy(this.startGuideSelector,e):this.deleteCopy(this.startGuideSelector,e))},this.createCopy=(e,t)=>{if(u.containGuide(t,e))return;const n=u.getGuides(t,e.axis);this.engine.updateNode(t.id,{[u.getGuidesKey(e.axis)]:n.add(e.offset)})},this.deleteCopy=(e,t)=>{if(!u.containGuide(t,e))return;const n=u.getGuides(t,e.axis);this.engine.updateNode(t.id,{[u.getGuidesKey(e.axis)]:n.delete(e.offset)})},this.addGuide=(e,t,n)=>{const i=u.getGuides(e,t),o=u.getGuidesKey(t);this.engine.updateNode(e.id,{[o]:i.add(n)})}}start(){const e=this.engine,{mouse:t,mouseDown:n,mouseDownRaw:i}=e.mouseStore;if(!t||!n||!i)return;const{selectedGuide:o}=e.toolStore.state,{tree:r}=e;if(o)this.startGuideSelector=o,this.axis=o.axis;else if(i.x<a.layout.currentChromeMarginLeft+a.layout.rulerWidth)this.axis="x";else{if(!(i.y<a.layout.currentCanvasMarginTop+a.layout.rulerWidth))return void e.exitTool();this.axis="y"}this.startMousePos=t;const s=this.startGuideSelector?this.startGuideSelector.offset:Math.round(t[this.axis]),l=this.startGuideSelector&&u.getGuideNode(r,this.startGuideSelector)||r.root;e.toolStore.setSelectedGuide(),e.toolStore.setHighlightedGuide(),e.toolStore.setGhostGuide({nodeId:l.id,axis:this.axis,offset:s}),this.updateSnapLine(r,l),e.beginUndoGroup()}cancel(){this.didCancel=!0,this.engine.discardUndoGroup()}stop(){const e=this.engine,{tree:t,mouse:n}=e,{ghostGuide:i}=e.toolStore.state;if(this.didCancel){if(this.startGuideSelector){const e=u.getGuideNode(t,this.startGuideSelector);if(e){const{axis:t,offset:n}=this.startGuideSelector;this.addGuide(e,t,n)}}}else if(this.startGuideSelector||this.mouseDidMove){if(this.startGuideSelector&&!this.didUpdate)e.toolStore.setSelectedGuide(this.startGuideSelector);else if(i){const{axis:t,offset:n}=i,o=u.getGuideNode(e.tree,i);if(o){const r=u.getAbsoluteOffset(e.tree,o,t,n);this.isGuideOnCanvas(t,r)?(this.addGuide(o,t,n),e.toolStore.setSelectedGuide(i),this.startGuideSelector?s.triggerRulersMoveGuideEvent({guideSelector:`${o.id}-${t}-${n}`,method:"mouse"}):s.triggerRulersCreateGuideEvent({guideSelector:`${o.id}-${t}-${n}`,method:"drag"})):s.triggerRulersDeleteGuideEvent({guideSelector:`${o.id}-${t}-${n}`,method:"drag_out"})}}}else{const i=t.root,o=u.getOrthogonalAxis(this.axis),r=Math.round(n[o]);this.isGuideOnCanvas(o,r)&&(this.addGuide(i,o,r),e.toolStore.setSelectedGuide({nodeId:i.id,axis:o,offset:r}),s.triggerRulersCreateGuideEvent({guideSelector:`${i.id}-${o}-${r}`,method:"click"}))}e.clearCursor(),e.setTooltip(null),e.toolStore.setGhostGuide(),e.toolStore.setSnapLines(),e.endUndoGroup()}update(){const e=this.engine,{mouse:t,mouseDown:n}=e.mouseStore,{ghostGuide:i}=e.toolStore.state;if(!n||!t||!i)return void e.exitTool();const{zoom:o,tree:r}=e;p.Point.distance(this.startMousePos,t)*o>f&&(this.mouseDidMove=!0,this.resizeCursor="x"===this.axis?"ew-resize":"ns-resize",e.setCursor(this.resizeCursor)),this.handleCopy(),this.didUpdate=!0;let s=Math.round(t[this.axis]);const a=u.getValidGuideNodeAtPoint(r,t)||r.root;if(this.isGuideOnCanvas(this.axis,s)){this.hasBeenOnCanvas=!0,a.id!==this.scope&&this.updateSnapLine(r,a);const n=this.getSnapPosition(t);s=p.isFiniteNumber(n)?n:s,e.setTooltip(s.toString())}else this.hasBeenOnCanvas&&e.setCursor(h.removeCursor()),e.setTooltip(null);const l=u.getRelativeOffset(e.tree,a,this.axis,s);e.toolStore.setGhostGuide({nodeId:a.id,axis:this.axis,offset:l})}};t.GuideMove=class GuideMove extends o.Component{render(){const e=this.props,{altKey:t,myTool:n}=e,r=i(e,["altKey","myTool"]);return o.createElement("div",null,t?o.createElement(m.default,Object.assign({},r,{highlightedGuide:n.engine.toolStore.state.ghostGuide,selectedGuide:n.startGuideSelector})):null)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(23),o=n(7),r=n(0),s=n(1),a=n(46),l=n(254),c=n(39),d=n(20),u=n(4),h=n(16),p=n(34),g=n(25),m=n(27),f=n(400),y=n(262),v=n(90),b=n(19),k=n(5),S=n(11),C=n(203),x=n(202),w=n(141);function scaleShapeContainerDescendants(e,t,n,i,o){if(o)return;if(!u.isShapeContainerNode(t))return;const r=n.get(t);if(!r)return;const{shapeContainerDescendantScalableStyles:s}=r;s&&f.scaleVectorStyles(e,s,i)}function projectFrame(e,t){if(!e)return t;const n=s.Rect.cornerPoints(t).map(t=>v.default.convertPoint(e,t));return s.Rect.fromPoints(n)}t.ResizeTool=class ResizeTool extends d.VekterTool{constructor(){super(...arguments),this.enum=k.Tools.Resize,this.wantsAutoscrolling=!0,this.selectedNodes=o.Map(),this.contextNode=null,this.contextNodeStartMatrix=null,this.contextNodeStartMatrixInverse=null,this.onlyShapes=!0,this.parentDirectedNodeSelected=!1,this.displaySelectionBox=!0,this.shapeContainerShapeUpdates=(e,t)=>{const n=this.selectedNodes.get(e);if(!n)return;const{shapeContainerDescendantPaths:i,shapeContainerDescendantBasicShapes:o}=n;i&&o&&w.scaleShapeContainerDescendantShapes(this.engine,e,i,o,n.rect,t)},this.shapeUpdates=(e,t,n,i,o)=>{const r=this.selectedNodes.get(t);if(!r)return;const a=i.width>-1&&i.width<1?1:i.width,c=i.height>-1&&i.height<1?1:i.height,d=[n.x,n.x+n.width],u=[i.x,i.x+a],h=[n.y,n.y+n.height],p=[i.y,i.y+c],g=a/n.width,m=c/n.height,f=o?{x:0,y:0}:r.rect;r.descendantPaths&&r.descendantPaths.forEach((t,n)=>{const i=(o?t.pathSegments:S.convertPath(r.canvasMatrix.inverse(),[t])[0]).map(e=>new s.PathSegment(e.merge({x:l.default(e.x+f.x,d,u,!1)-f.x,y:l.default(e.y+f.y,h,p,!1)-f.y,handleOutX:e.handleOutX*g,handleOutY:e.handleOutY*m,handleInX:e.handleInX*g,handleInY:e.handleInY*m}))),a=o?{pathSegments:i,pathClosed:t.pathClosed}:{pathSegments:S.convertPath(r.canvasMatrix,[{pathSegments:i,pathClosed:t.pathClosed}])[0],pathClosed:t.pathClosed},c=e.getNode(n);if(!c)return;const y={pathSegments:S.convertPathToNode(e,c,[a])[0],pathClosed:c.pathClosed},v=c.updateForPath(y);this.engine.updateNode(c.id,v)}),r.descendantBasicShapes&&r.descendantBasicShapes.forEach((t,n)=>{if(null===t)return;const i=(o?t:t.map(e=>v.default.convertPoint(r.canvasMatrix.inverse(),e))).map(e=>({x:l.default(e.x+f.x,d,u,!1)-f.x,y:l.default(e.y+f.y,h,p,!1)-f.y})),a=o?i:i.map(e=>v.default.convertPoint(r.canvasMatrix,e)),c=e.getNode(n),g=a.map(e=>v.default.convertPoint(c.canvasMatrix().inverse(),e)),m=s.Rect.fromPoints(g),y=s.Rect.center(m),b=S.convertPointToParent(c,y),k={x:b.x-m.width/2,y:b.y-m.height/2,width:m.width,height:m.height};this.engine.updateNode(n,k)})},this.updateChildNodes=(e,t,n)=>{const{tree:i}=n,o=this.keepChildPositionFixed(),r=this.selectedNodes.get(e);let a={x:r.rect.x-t.x,y:r.rect.y-t.y};if(g.hasRotation(e)){const t=(new WebKitCSSMatrix).rotate(0,0,-e.rotation);a=v.default.convertPoint(t,a)}r.children.forEach((e,n)=>{const r=i.getNode(n);let l=e.rect,d=e.originalProps;o&&(l=s.Rect.offset(l,a),d=r.updateForRect(l,t)),c.hasAspectRatio(r)||delete d.aspectRatio,removeAutoAndFractionDimensionsFromUpdate(r,d),this.engine.updateNode(n,d)})},this.updateTooltip=e=>{const{tree:t,selection:n}=e,{shapeModeActive:i,setTooltip:o}=this.engine;let r;if(1===n.length){const e=t.getNode(n[0]);if(e instanceof u.TextNode&&e.autoSize)return void o(`${e.styledText.sizes(!1).first()}`);if(r=s.Rect.round(t.getRect(e),2),u.isShapeContainerNode(e)&&!i){if(!this.startRect)return;const e=0!==this.startRect.width?r.width/this.startRect.width:1,t=s.roundedNumber(e,3);return void o(`${r.width}  ${r.height} (${t})`)}}else{const e=t.getBoundingFrameForNodes(t.getNodes(n));r=s.Rect.pixelAligned(e)}o(`${r.width}  ${r.height}`)},this.anchorIndex=(e,t,n)=>n?4:8-(2*e+6*t),this.resizeDelta=(e,t,n,i,o,r)=>{const a=this.anchorIndex(n,i,o),l=Object.assign({},this.startRect),c=y.default.fromFrame(l)[a];t.width<0&&(t.width*=-1,n=Math.abs(n-1)),t.height<0&&(t.height*=-1,i=Math.abs(i-1));const d=this.anchorIndex(n,i,o),u=y.default.fromFrame(t)[d];let h=e;r&&(h=e.clone({rotation:0}));const p=v.default.convertPoint(h.transformMatrix(null,l),c),g=v.default.convertPoint(h.transformMatrix(null,t),u);return s.Point.subtract(p,g)},this.centeredAutoSizedContextNode=()=>{const e=this.contextNode;return(e instanceof u.TextNode||e instanceof u.ShapeContainerNode&&!this.engine.shapeModeActive)&&e.autoSize&&null===e.top&&null===e.bottom&&null===e.left&&null===e.right}}start(){this.snapper=new x.SnapTool(this.engine,this.engine.selection),this.engine.beginUndoGroup();const{selection:e,tree:t}=this.engine;this.updateCursor(this.engine),this.updateTooltip(this.engine);const n=[],i=t.withoutDescendants(t.getNodes(e));i.forEach(e=>{const i=t.getRect(e);let r;if(this.parentDirectedNodeSelected=this.parentDirectedNodeSelected||e.cache.parentDirected,m.hasShape(e)){const n=e.calculatedPaths(),i=S.convertPathToCanvas(t,e,n);r=b.default.boundingBox(i)}else this.onlyShapes=!1,r=t.convertFrameToCanvas(e);n.push(r);let s=o.Map();h.getChildren(e).forEach(e=>{const n=t.getRect(e),i=t.convertFrameToCanvas(e);let o={};p.isPinnable(e)&&(o=e.constraintValues()),s=s.set(e.id,{rect:n,canvasRect:i,originalProps:o})});const{descendantPaths:a,descendantBasicShapes:l}=S.collectDescendantShapesAndFlattenRotations(this.engine,e),{shapeContainerDescendantPaths:c,shapeContainerDescendantBasicShapes:d}=S.collectShapeContainerDescendantShapesAndFlattenRotations(this.engine,e),g=u.isShapeContainerNode(e)?f.collectScalableVectorStyles(e):void 0,y=t.getParent(e.id),v=y?y.canvasMatrix().inverse():null;this.selectedNodes=this.selectedNodes.set(e,{rect:i,canvasToParentMatrix:v,canvasMatrix:e.canvasMatrix(),children:s,descendantPaths:a,descendantBasicShapes:l,shapeContainerDescendantPaths:c,shapeContainerDescendantBasicShapes:d,shapeContainerDescendantScalableStyles:g})});const r=1===i.length,a=i[0];r&&(g.hasRotation(a)||u.isShapeContainerNode(a))?(this.contextNode=a,this.contextNodeStartMatrix=a.canvasMatrix(),this.contextNodeStartMatrixInverse=this.contextNodeStartMatrix.inverse(),this.startRect=t.getRect(this.contextNode)):this.startRect=s.Rect.merge(...n)}stop(){this.engine.setTooltip(null),this.engine.clearCursor(),this.engine.endUndoGroup(),this.snapper.stop()}keepChildPositionFixed(){const{contextNode:e,engine:t}=this,{cmdKey:n,shapeModeActive:i}=t,o=!!e&&u.isShapeContainerNode(e)&&i;return n||o}update(){const{mouseDown:e,tree:t,altKey:n,handle:o,selection:r,shapeModeActive:a}=this.engine;let{mouse:c}=this.engine;if(!e||!c)return void this.engine.exitTool();if("mouseMove"!==C.default(this.engine,this.engine.previousInputState))return;this.updateCursor(this.engine);const{startRect:d,contextNode:h}=this,p=this.keepChildPositionFixed(),g=n||this.centeredAutoSizedContextNode(),m=!this.parentDirectedNodeSelected,f=this.getAspectRatioLock(this.engine),b=this.getConstraint(this.engine,f,m),k=this.selectedNodes.keySeq().toArray(),S=[];if(k.forEach(e=>{if(!(e instanceof u.TextNode))return;if(e.autoSize)return;const{width:n,height:i}=e.styledText.calculateSize(e.width),o=t.convertFrameToCanvas(e,{x:0,y:0,width:n,height:i});S.push(o)}),p&&this.selectedNodes.valueSeq().forEach(e=>{e.children.forEach(e=>{S.push(e.canvasRect)})}),h&&h instanceof u.TextNode&&h.autoSize){if(b){const e=s.Line.perpendicular(b,c),t=s.Line.intersection(b,e);null!==t&&(c=t)}}else{const e=t.getTopLevelFrameNodes(k),n=Array.from(new Set(e));this.snapper.excludedNodes=r,c=this.snapper.snap(c,m,n,void 0,b,void 0,S)}const{fx:x,fy:w}=o;let T=d.width*x,P=d.height*w;this.contextNodeStartMatrixInverse?(i(h,"Context node does not exist"),c=v.default.convertPoint(this.contextNodeStartMatrixInverse,c)):(T+=d.x,P+=d.y);let E=c.x-T,F=c.y-P;g&&(E=2*Math.round(E),F=2*Math.round(F));let M=Object.assign({},this.startRect);if(M.height+=(2*w-1)*F,M.width+=(2*x-1)*E,M.width=Math.round(M.width),M.height=Math.round(M.height),f){const e=d.width/d.height;if(.5===x)M.width=M.height*e;else if(.5===w)M.height=M.width/e;else{const t=Math.sign(M.width),n=Math.sign(M.height),i=Math.abs(M.height*e),o=Math.abs(M.width/e);M.width=Math.min(i,Math.abs(M.width))*t,M.height=Math.min(o,Math.abs(M.height))*n}}if(M.width=Math.round(M.width),M.height=Math.round(M.height),null!==h){const e=u.isVectorNode(h)||u.isShapeContainerNode(h),n=this.resizeDelta(h,M,x,w,g,e);if(M=s.Rect.offset(M,n),h instanceof u.TextNode){const e=h.updateForRect(M,t.getParentRect(h),!0);this.engine.updateNode(h.id,e);const n=e.styledText;void 0!==n&&this.engine.documentSettings.setDefaultTextSize(+n.sizes(!1).first())}else if(u.isVectorNode(h)||u.isShapeContainerNode(h)&&h.sizeToFit&&!a){this.shapeUpdates(t,h,d,M,!1);const e=0!==d.width?M.width/d.width:1;scaleShapeContainerDescendants(t,h,this.selectedNodes,e,a)}else{const e=h.updateForRect(M,t.getParentRect(h));removeAutoAndFractionDimensionsFromUpdate(h,e),u.isShapeContainerNode(h)&&a&&(e.sizeToFit=!1),this.engine.updateNode(h.id,e),u.isShapeContainerNode(h)&&!a?this.shapeContainerShapeUpdates(h,M):this.updateChildNodes(h,M,this.engine);const n=0!==d.width?M.width/d.width:1;scaleShapeContainerDescendants(t,h,this.selectedNodes,n,a)}}else{const e=y.default.fromFrame(this.startRect),n=y.default.fromFrame(M),i=this.anchorIndex(x,w,g),o=s.Point.add(e[i],this.startRect),r=s.Point.add(n[i],M),c=s.Point.subtract(o,r);M=s.Rect.offset(M,c),this.selectedNodes.forEach((e,n)=>{if(u.isVectorNode(n)||u.isShapeContainerNode(n)&&n.sizeToFit&&!a){this.shapeUpdates(t,n,d,M,!0);const e=0!==d.width?M.width/d.width:1;scaleShapeContainerDescendants(t,n,this.selectedNodes,e,a)}else{const i=projectFrame(e.canvasToParentMatrix,this.startRect),o=projectFrame(e.canvasToParentMatrix,M),r=[i.x,i.x+i.width],c=[o.x,o.x+o.width],d=[i.y,i.y+i.height],h=[o.y,o.y+o.height],p=e.rect,g={x:l.default(p.x,r,c,!1),y:l.default(p.y,d,h,!1)},m={x:l.default(p.x+p.width,r,c,!1),y:l.default(p.y+p.height,d,h,!1)},f=s.Rect.fromTwoPoints(g,m),y=n.updateForRect(f,t.getParentRect(n));removeAutoAndFractionDimensionsFromUpdate(n,y),this.engine.updateNode(n.id,y),u.isShapeContainerNode(n)&&!a?this.shapeContainerShapeUpdates(n,y):this.updateChildNodes(n,f,this.engine);const v=0!==i.width?o.width/i.width:1;scaleShapeContainerDescendants(t,n,this.selectedNodes,v,a)}})}this.updateTooltip(this.engine)}updateCursor(e){const{handle:t,selection:n,tree:i}=e;let o;if(1===n.length){const e=i.getNode(n[0]);o=i.convertFramePointsToCanvas(e)}else{const e=n.reduce((e,t)=>{const n=i.getNode(t);if(!n)return e;const o=i.convertFrameToCanvas(n);return e?s.Rect.merge(e,o):o},void 0);e&&(o=y.default.fromFrame(e))}void 0!==o&&this.engine.setCursor(a.resizing(t,o))}getConstraint(e,t,n){if(!n)return;const{handle:i,selection:o}=e,{contextNode:r,startRect:a}=this;if(a&&(t||.5===i.fx||.5===i.fy||o.length>1)){if(r&&this.contextNodeStartMatrix){const e=v.default.convertPoint(this.contextNodeStartMatrix,{x:a.width/2,y:a.height/2}),t=v.default.convertPoint(this.contextNodeStartMatrix,{x:i.fx*a.width,y:i.fy*a.height});return s.Line(e,t)}{const e=s.Rect.center(a),t=s.Point(a.x+a.width*i.fx,a.y+a.height*i.fy);return s.Line(e,t)}}}getAspectRatioLock(e){const{tree:t,selection:n,shiftKey:i}=e;if(i)return!0;if(n.length>1)return!1;const o=n[0],r=t.getNode(o);return!!r&&(!(!u.isShapeContainerNode(r)||this.engine.shapeModeActive)||(c.hasAspectRatio(r)?s.isFiniteNumber(r.aspectRatio):u.isTextNode(r)&&r.autoSize))}};const T=x.default(class Resize extends r.Component{render(){return this.props.children}});function removeAutoAndFractionDimensionsFromUpdate(e,t){p.isPinnable(e)&&(e.widthType!==s.DimensionType.Auto&&e.widthType!==s.DimensionType.FractionOfFreeSpace||(delete t.width,delete t.widthType),e.heightType!==s.DimensionType.Auto&&e.heightType!==s.DimensionType.FractionOfFreeSpace||(delete t.height,delete t.heightType))}t.Resize=T},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(1),r=n(46),s=n(20),a=n(25),l=n(5);t.RotateTool=class RotateTool extends s.VekterTool{constructor(){super(...arguments),this.enum=l.Tools.Rotate,this.displaySelectionBox=!0}start(){const{selection:e,tree:t}=this.engine;this.engine.beginUndoGroup();const n=e[0],i=t.getNode(n);i&&a.hasRotation(i)?(this.selectedNode=i,this.normalizer=o.Point.rotationNormalizer(),this.normalizer(this.selectedNode.rotation),this.startRotation=this.selectedNode.rotation,this.engine.setTooltip(`${this.startRotation}`),this.updateCursor(this.engine)):this.engine.exitTool()}stop(){this.engine.setTooltip(null),this.engine.clearCursor(),this.engine.endUndoGroup()}update(){const{mouseDown:e,mouse:t,tree:n,shiftKey:i,altKey:r}=this.engine,s=this.engine.previousInputState;if(!e||!this.selectedNode)return void this.engine.exitTool();const a=t.x!==s.mouse.x||t.y!==s.mouse.y,l=r!==s.altKey||i!==s.shiftKey;if(a||l){const r=o.Rect.center(n.convertFrameToCanvas(this.selectedNode)),s=Math.atan2(e.y-r.y,e.x-r.x);let a=Math.atan2(t.y-r.y,t.x-r.x)-s;a=180*a/Math.PI;let l=this.startRotation+a;l=Math.round(this.normalizer(l)),i&&(l=15*Math.round(l/15)),this.engine.setTooltip(`${l}`),this.updateCursor(this.engine),this.engine.updateNode(this.selectedNode.id,{rotation:l})}}updateCursor(e){const{handle:t,selection:n,tree:i}=e,o=i.getNode(n[0]),s=i.convertFramePointsToCanvas(o);this.engine.setCursor(r.rotating(t,s))}};t.Rotate=class Rotate extends i.Component{render(){return null}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(75),r=n(1),s=n(3),a=n(74);t.default=function ParentHighlight({ids:e,zoom:t,tree:n}){if(0===e.length)return i.createElement("noscript",null);const l=e.map(e=>n.getNode(e)).map((e,l)=>{const c=n.convertRectToCanvasWithRotation(e),d=c.rotation,u=a.isUserComponent(e);return i.createElement(o.default,{key:l,borderColor:u?s.theme.componentTint:s.theme.tint,borderWidth:1,backgroundColor:"transparent",opacity:1,rotation:d,frame:r.Rect.inset(r.Rect.multiply(c,t),0)})});return i.createElement(i.Fragment,null,l)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(1),o=n(4),r=n(16);t.findShapeContainerInRange=function findShapeContainerInRange(e,t,n){const s=Object.assign({width:1,height:1},n);let a=[];if(t){const n=e.getNode(t);n&&r.hasChildren(n)&&(a=n.children.filter(o.isShapeContainerNode))}else a=e.getGroundNodesOfType(o.ShapeContainerNode);let l=1/0,c=null;for(let o=0,r=a.length;o<r;o++){const t=a[o],n=e.convertFrameToCanvas(t);if(!i.Rect.intersects(n,s)){if(!t.sizeToFit)continue;let e=!1;if(t.walk(t=>e=e||t.isSelected()),!e)continue}const r=i.Point.distance(i.Rect.center(n),i.Rect.center(s));r>=l||(l=r,c=t)}return c}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(9),r=n(24),s=n(1),a=n(1),l=n(20),c=n(22),d=n(16),u=n(205),h=n(117),p=n(40),g=n(5),m=n(204),f=n(408);class CreateCodeComponentBaseTool extends l.VekterTool{constructor(){super(...arguments),this.wantsAutoscrolling=!0,this.helper=new m.CreateToolHelper,this.oval=!1,this.drawingDidStart=!1,this.onDragStart=()=>{this.drawingDidStart=!0}}start(){this.helper.nodeClass=c.default,this.helper.highlightParent=!0,this.helper.dragStart=this.onDragStart,this.helper.start(this),this.engine.setCursor("crosshair")}stop(){this.helper.stop(this),this.engine.clearCursor(),this.snapper.stop()}update(){this.helper.update(this)}create(e,t,n,i,l){const{tree:m}=this.engine;if(0===(i=Object.assign({},i,{top:n.y,left:n.x,width:n.width,height:n.height,rotation:l})).width||0===i.height)return void this.engine.exitTool();this.engine.beginUndoGroup();let y,v=[];if(t){const e=m.getNode(t);if(e){const t=m.getRect(e),o=p.guessConstrainedFrame(n,t);i=Object.assign({},i,o),d.hasChildren(e)&&(v=e.children)}}else v=m.getGroundNodes();switch(this.enum){case g.Tools.CreateStackComponent:y=h.HardCodedCodeIdentifier.stack;break;case g.Tools.CreateScrollComponent:y=h.HardCodedCodeIdentifier.scroll;break;case g.Tools.CreatePageComponent:y=h.HardCodedCodeIdentifier.page;break;default:throw Error(`CreateCodeComponent can't handle tool: ${this.enum}`)}i.codeComponentIdentifier=y;const b=r.componentLoader.componentForIdentifier(y);if(b&&a.isReactDefinition(b)){if(i.codeComponentProps=u.defaultCodeComponentProps(b),b.identifier===h.HardCodedCodeIdentifier.stack){const e=n.width>n.height;f.applyStackDefaults(e,i.codeComponentProps)}switch(this.engine.createNode(c.default.name,i,t),this.engine.setSelection([e]),s.withChildInsertion(b.class)&&f.stackDefaultsDependOnChildren({siblingNodes:v,tree:m,rect:n,component:b,properties:i,reparenting:{engine:this.engine,id:e}}),this.engine.endUndoGroup(),this.engine.exitTool(),this.enum){case g.Tools.CreateStackComponent:o.triggerLayoutStackEvent({});break;case g.Tools.CreateScrollComponent:o.triggerInteractiveScrollCreateEvent({});break;case g.Tools.CreatePageComponent:o.triggerInteractivePageCreateEvent({})}}}}t.CreateCodeComponent=class CreateCodeComponent extends i.Component{render(){return i.createElement(m.Create,Object.assign({},this.props))}};t.CreateStackComponentTool=class CreateStackComponentTool extends CreateCodeComponentBaseTool{constructor(){super(...arguments),this.enum=g.Tools.CreateStackComponent}};t.CreateScrollComponentTool=class CreateScrollComponentTool extends CreateCodeComponentBaseTool{constructor(){super(...arguments),this.enum=g.Tools.CreateScrollComponent}};t.CreatePageComponentTool=class CreatePageComponentTool extends CreateCodeComponentBaseTool{constructor(){super(...arguments),this.enum=g.Tools.CreatePageComponent}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(1),o=n(4),r=n(117),s=n(401);function applyStackDefaults(e,t){t.direction=e?"horizontal":"vertical",t.distribution=e?"space-evenly":"start"}t.applyStackDefaults=applyStackDefaults,t.stackDefaultsDependOnChildren=function stackDefaultsDependOnChildren({siblingNodes:e,tree:t,rect:n,component:a,properties:l,reparenting:c}){const d=[];e.filter(e=>{const o=t.getRect(e);return i.Rect.containsRect(n,o)}).sort((e,n)=>{const i=t.getRect(e),o=t.getRect(n);return i.y-o.y||i.x-o.x}).forEach(e=>{const u=t.getRect(e);if(o.isDrawableNode(e)&&e.locked)return;const h=i.Rect.offset(u,i.Point.reverse(n));if(d.push(i.Rect.center(h)),c&&(c.engine.moveNode(e.id,c.id),c.engine.updateNode(e.id,Object.assign({},e.updateForRect(h,n),{top:null,left:null,bottom:null,right:null}))),a.identifier===r.HardCodedCodeIdentifier.stack&&d.length>1){const e=s.default(d),t=[],n=[];e.forEach(([e,i])=>{t.push(Math.abs(e.x-i.x)),n.push(Math.abs(e.y-i.y))}),applyStackDefaults(t.reduce((e,t)=>e+t,0)>n.reduce((e,t)=>e+t,0),l.codeComponentProps)}})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(1),r=n(3),s=n(140),a=n(4),l=n(32),c=n(5),d=n(75),u=n(108);t.PathSegmentSelectTool=class PathSegmentSelectTool{constructor(){this.enum=c.Tools.Unknown,this.selectionAtStart=[]}start(){this.pathEngine.selectionType!==l.PathSelectionType.Curves&&(this.selectionAtStart=[...this.pathEngine.segmentSelection])}stop(){}update(){const{mouseDown:e,mouse:t,tree:n,selection:i,shiftKey:r}=this.engine,l=this.engine.previousInputState,c=l.mouseDown,d=l.mouse,h=s.default(d,t),p=l.shiftKey!==r;if(!e&&c)this.pathEngine.switchToDefault();else if((h||p)&&e){let s=[];const l=o.Rect.fromTwoPoints(e,t);if(i.map(e=>n.getNode(e)).filter(e=>e instanceof a.PathNode).forEach(e=>{e.pathSegments.forEach((t,i)=>{const r=n.convertPointToCanvas(e,o.PathSegment.point(t));o.Rect.containsPoint(l,r)&&s.push({id:e.id,index:i})})}),r){const e=u.intersection(s,this.selectionAtStart,equals);s=u.union(s,this.selectionAtStart,equals),s=u.without(s,e,equals)}this.pathEngine.setSegmentSelection(s)}}};function equals(e,t){return e.id===t.id&&e.index===t.index}t.PathSegmentSelect=class PathSegmentSelect extends i.Component{render(){const{mouseDown:e,mouse:t,zoom:n}=this.props.pathTool.engine;if(!e||!t)return null;const s=o.Rect.fromTwoPoints(e,t);return i.createElement(d.default,{frame:o.Rect.multiply(s,n),backgroundColor:r.theme.selectionBox,borderColor:r.theme.selectionBoxOutline,borderWidth:1})}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(1),r=n(3),s=n(75);t.default=class ProjectedPoint extends i.Component{render(){const{tree:e,cmdKey:t,altKey:n,zoom:a}=this.props.pathTool.engine,{closestCurve:l,snapConstraint:c}=this.props.pathTool.pathEngine;if(!l||n||c)return null;const d=e.getNode(l.id);if(!d)return null;const u=t?l.projectedPoint:l.midPoint,h=o.Point.multiply(e.convertPointToCanvas(d,u,!0),a);return i.createElement(s.default,{frame:{x:h.x-4,y:h.y-4,width:8,height:8},backgroundColor:r.theme.segmentAnchorOutline,borderColor:"white",borderWidth:1,oval:!0})}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.Default=0]="Default",e[e.SegmentAddition=1]="SegmentAddition",e[e.SegmentMove=2]="SegmentMove",e[e.SegmentSelection=3]="SegmentSelection",e[e.SegmentHandleMove=4]="SegmentHandleMove",e[e.CurveBending=5]="CurveBending",e[e.Pan=6]="Pan",e[e.Zoom=7]="Zoom",e[e.ZoomSelect=8]="ZoomSelect"}(t.PathTool||(t.PathTool={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(1),r=n(20),s=n(5),a=n(61),l=n(74),c=n(413),d=n(203);t.RadiusTool=class RadiusTool extends r.VekterTool{constructor(){super(...arguments),this.enum=s.Tools.Radius,this.mouseHasChanged=!1}start(){this.engine.beginUndoGroup(),this.updateTooltip(),this.engine.setHighlight()}stop(){this.engine.endUndoGroup(),this.engine.setTooltip(null)}update(){const{mouseDown:e,tree:t,selection:n}=this.engine,{mouse:i}=this.engine;if(!e||!i)return void this.engine.exitTool();if("mouseMove"!==d.default(this.engine,this.engine.previousInputState))return;this.mouseHasChanged=!0;const r=t.getNode(n[0]),s=t.getRect(r),l=Math.min(s.width/2,s.height/2),c={x:l,y:l},u=t.convertPointToCanvas(r,{x:0,y:0}),h=t.convertPointToCanvas(r,c),p=o.Line(u,h),g=o.Line.perpendicular(p,i),m=o.Line.intersection(p,g);if(null===m)return;const f=o.Point.distance(u,m),y=o.Point.distance(h,m),v=o.Point.distance(u,h);let b=0;b=f>v&&y>v?f<y?0:1:f>v?1:y>v?0:f/v;const k=Math.round(b*l),S={radius:k};a.withRadiusPerCorner(r)&&r.radiusBottomLeft===r.radius&&r.radiusBottomRight===r.radius&&r.radiusTopLeft===r.radius&&r.radiusTopRight===r.radius&&(S.radiusBottomLeft=k,S.radiusBottomRight=k,S.radiusTopLeft=k,S.radiusTopRight=k),this.engine.updateNode(r.id,S),this.updateTooltip(k)}updateTooltip(e){const{selection:t,tree:n}=this.engine,i=n.getNode(t[0]);this.engine.setTooltip(`${void 0!==e?e:i.radius}`)}};t.Radius=class Radius extends i.Component{render(){const{selection:e,tree:t,zoom:n}=this.props,o=t.getNode(e[0]);return i.createElement(c.default,{key:"borderRadiusHandle",node:o,tree:t,isToolActive:this.props.myTool.mouseHasChanged,isComponent:l.isUserComponent(o),zoom:n})}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(1),r=n(2),s=n(5),a=n(3),l=n(61);t.default=class BorderRadiusHandle extends i.Component{constructor(){super(...arguments),this.onMouseDown=r.default.wrapMouseHandler(()=>{r.default.setToolEnum(s.Tools.Radius)})}render(){const{tree:e,node:t,zoom:n,isToolActive:r,isComponent:s,hidden:h}=this.props;if(l.withRadiusPerCorner(t)&&t.radiusPerCorner)return null;const p=e.getRect(t),g=o.Rect.multiply(p,n);if(g.width<32||g.height<32)return null;const m=t.radius,f=Math.min(p.width/2,p.height/2);let y=0;r||(y=10/(f*n));const v=Math.max(Math.min(m/f,1),y);let b={x:0,y:0},k={x:f,y:f};b=e.convertPointToCanvas(t,b,!0),k=e.convertPointToCanvas(t,k,!0),b.x*=n,b.y*=n,k.x*=n,k.y*=n;const S=k.x-b.x,C=k.y-b.y,x=b.x+S*v,w=b.y+C*v,T=Object.assign({},c,{border:`1px solid ${s?a.theme.componentTint:a.theme.tint}`,transform:`translate(${Math.round(x-4.5)}px, ${Math.round(w-4.5)}px) translateZ(0)`,opacity:h?0:1});return i.createElement("div",{style:T,onMouseDown:this.onMouseDown},i.createElement("div",{style:s?u:d}))}};const c={position:"absolute",width:9,height:9,borderRadius:5,backgroundColor:"white"},d={position:"absolute",width:3,height:3,backgroundColor:a.theme.tint,left:2,top:2,borderRadius:1.5},u=Object.assign({},d,{backgroundColor:a.theme.componentTint})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(1),o=n(118),r=n(91);class LinearGradientCoordinates{constructor(e){Object.assign(this,e)}}t.LinearGradientCoordinates=LinearGradientCoordinates;class RadialGradientCoordinates{constructor(e){Object.assign(this,e)}}t.RadialGradientCoordinates=RadialGradientCoordinates,t.gradientCoordinates=function gradientCoordinates(e,t,n){return o.isLinearGradient(n)?function linearGradientCoordinates(e,t,n){const o=e.getRect(t),r={x:o.width/2,y:o.height/2},s=e.convertPointToCanvas(t,r),a=n.angle*Math.PI/180,l={x:100*-Math.sin(a),y:100*Math.cos(a)},c=e.convertPointToCanvas(t,i.Point.add(r,l)),d=i.Line(s,c),u=i.Rect.cornerPoints(i.Rect.atOrigin(o)),h=Math.floor(n.angle/90)+3,p=u[h%4],g=e.convertPointToCanvas(t,p),m=u[(h+2)%4],f=e.convertPointToCanvas(t,m),y=i.Line.perpendicular(d,g),v=i.Line.intersection(y,d);if(!v)return null;const b=i.Point.subtract(s,v),k=i.Point.add(v,b,b),S=u[(h+1)%4],C=e.convertPointToCanvas(t,S),x=i.Line.perpendicular(y,C),w=i.Line.perpendicular(d,s),T=i.Line.intersection(x,w);if(!T)return null;const P={width:2*i.Point.distance(T,s),height:i.Point.distance(v,k)};return new LinearGradientCoordinates({start:v,end:k,center:s,startCorner:g,endCorner:f,size:P})}(e,t,n):r.isRadialGradient(n)?function radialGradientCoordinates(e,t,n){const i=e.getRect(t),o=n.centerAnchorX*i.width,r=n.centerAnchorY*i.height,s=n.widthFactor*i.width,a=n.heightFactor*i.height,l=s+o,c=r-a,d={width:2*s,height:2*a},u=e.convertPointToCanvas(t,{x:o,y:r}),h=e.convertPointToCanvas(t,{x:l,y:r}),p=e.convertPointToCanvas(t,{x:o,y:c}),{rotation:g}=e.convertRectToCanvasWithRotation(t);return new RadialGradientCoordinates({start:u,end:h,rotation:g,size:d,topCenter:p})}(e,t,n):null},t.gradientInRange=(e,t,n)=>{const{start:o,end:r}=e,s=i.Line(o,r),a=i.Line.perpendicular(s,t),l=i.Line.intersection(s,a);if(e instanceof RadialGradientCoordinates){if(i.Point.distance(t,e.topCenter)<n)return!0}if(!l)return!1;const c=i.Point.distance(t,l),d=i.Point.distance(t,o),u=i.Point.distance(t,r),h=i.Point.distance(o,r);if(d>h&&u<d){return Math.max(u,c)<n}if(u>h&&d<u){return Math.max(d,c)<n}return c<n}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(20),r=n(4),s=n(40),a=n(37),l=n(5),c=n(204),d=n(280),u=n(2),h=10;t.CreateTextTool=class CreateTextTool extends o.VekterTool{constructor(){super(...arguments),this.enum=l.Tools.CreateText,this.wantsAutoscrolling=!0,this.helper=new c.CreateToolHelper,this.create=(e,t,n,i,o)=>{const{tree:r}=this.engine,{x:l,y:c,width:h,height:p}=n;let g=void 0;const m=!this.isTextBox(n);if(m&&(n={x:l+h,y:c+p,width:0,height:0}),i=Object.assign({},i,{top:n.y,left:n.x,width:n.width,height:n.height}),m||(i.rotation=o),t){const e=r.getNode(t),o=r.getRect(e);if(m){const e=n.y,t=o.height/2,i=Math.abs(e-t)<2;!i&&e<t&&(n.y-=10),!i&&e>t&&(n.y+=6);const r=4;Math.abs(l-o.width/2)<r?(g="center",n.x-=h):l<r?g="left":o.width-l<r&&(g="right")}const a=s.guessConstrainedFrame(n,o,void 0,m);i=Object.assign({},i,a)}else m&&0!==r.getGroundNodes().length&&(i.top-=10);const f=Object.assign({},i,n,{autoSize:m});delete f.aspectRatio;let y=null;g&&(y=a.StyledTextDraft.createEmptyWithStyle(u.default.documentSettings.asStyle()),y=a.StyledTextDraft.setAlignment(y,g)),this.engine.beginUndoGroup(),this.engine.createText(y,t,f),this.engine.setSelection([e]),this.engine.setTool(new d.TextEditTool)}}start(){this.helper.nodeClass=r.TextNode,this.helper.highlightParent=!0,this.helper.start(this),this.engine.setCursor("text")}stop(){this.helper.stop(this),this.engine.clearCursor(),this.snapper.stop()}update(){const{mouse:e,mouseDown:t}=this.engine;this.pastMinimumDrag(e,t)?this.engine.setCursor("crosshair"):this.engine.setCursor("text"),this.helper.update(this)}pastMinimumDrag(e,t){return null!==e&&null!==t&&(Math.abs(e.x-t.x)>=h||Math.abs(e.y-t.y)>=h)}isTextBox(e){return e.width>=h||e.height>=h}};t.CreateText=class CreateText extends i.Component{render(){const e=this.props.myTool,{mouse:t,mouseDown:n}=e.engine;return e.helper.showTooltip=e.pastMinimumDrag(t,n),i.createElement(c.Create,Object.assign({},this.props))}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(9),r=n(20),s=n(89),a=n(5),l=n(204);class CreateShapeBaseTool extends r.VekterTool{constructor(){super(...arguments),this.wantsAutoscrolling=!0,this.type="rectangle",this.helper=new l.CreateToolHelper,this.create=(e,t,n,i,r)=>{0!==(i=Object.assign({},i,{y:n.y,x:n.x,width:n.width,height:n.height,rotation:r})).width&&0!==i.height?(this.engine.beginUndoGroup(),this.engine.createShape(this.type,t,i),this.engine.endUndoGroup(),this.engine.setSelection([e]),this.engine.exitTool(),o.triggerDrawingShapeCreateEvent({shape:this.type})):this.engine.exitTool()}}start(){let e=s.BasicShape.makeRectangle;switch(this.type){case"polygon":e=s.BasicShape.makePolygon;break;case"star":e=s.BasicShape.makeStar;break;case"oval":e=s.BasicShape.makeOval}this.helper.overlayShape=e,this.helper.supportsParentDirected=!1,this.helper.highlightParent=!0,this.helper.needsShapeContainer=!0,this.helper.start(this),this.engine.setCursor("crosshair")}stop(){this.helper.stop(this),this.engine.clearCursor(),this.snapper.stop()}update(){this.helper.update(this)}}t.CreateRectangleShapeTool=class CreateRectangleShapeTool extends CreateShapeBaseTool{constructor(){super(),this.enum=a.Tools.CreateRectangleShape,this.type="rectangle"}};t.CreateOvalShapeTool=class CreateOvalShapeTool extends CreateShapeBaseTool{constructor(){super(),this.enum=a.Tools.CreateOvalShape,this.type="oval"}};t.CreateStarShapeTool=class CreateStarShapeTool extends CreateShapeBaseTool{constructor(){super(),this.enum=a.Tools.CreateStarShape,this.type="star"}};t.CreatePolygonShapeTool=class CreatePolygonShapeTool extends CreateShapeBaseTool{constructor(){super(),this.enum=a.Tools.CreatePolygonShape,this.type="polygon"}};t.CreateShape=class CreateShape extends i.Component{render(){return i.createElement(l.Create,Object.assign({},this.props))}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(9),r=n(1),s=n(3),a=n(46),l=n(29),c=n(20),d=n(2),u=n(4),h=n(22),p=n(117),g=n(74),m=n(16),f=n(5),y=n(264),v=n(213);t.SlotConnectTool=class SlotConnectTool extends c.VekterTool{constructor(){super(...arguments),this.enum=f.Tools.SlotConnect,this.mouseHasBeenUp=!1,this.canDisconnect=!1,this.slotSelector=(e,t,n)=>{const i=Object.keys(t),o=[{label:e?"Connect to":"Disconnect",enabled:!1}];for(const r of i)o.push({label:n.slotTitleForKey(r),click:()=>{this.addSlotContentForKey(e,r,n)}});l.Menu.buildFromTemplate(o).popup(this.engine.mouseRaw)}}start(){const{tree:e,selection:t}=this.engine,n=t[0];if(!n)return;const i=e.getNode(n);i&&(this.canDisconnect=i.allSlotContent().length>0)}stop(){this.engine.clearCursor(),this.engine.setHighlight(null)}update(){const{tree:e,mouse:t,mouseDown:n,selection:i,previousInputState:s}=this.engine,l=s.mouseDown,c=i[0];if(!c)return this.exitTool();const g=e.getNode(c);if(!g||!h.isCodeComponentNode(g))return this.exitTool();if(0===Object.keys(g.slots()).length)return this.exitTool();const f=g.slotDictionary(),y=!!f&&(f.multi.length>0||[...f.multi,...f.single].length>1),v=y?"":a.disconnectCursor(),b=e.getAncestors(g.id),k=e.getNodesAtPoint(t);let S=k.find(t=>!(!m.hasChildren(t)||u.isVectorNode(t))&&-1===b.indexOf(t.id)&&null===e.getParent(t.id));m.findComponentIn(e,g,S)&&(S=void 0),this.engine.setCursor(0===k.length&&this.canDisconnect?v:S?a.addCursor():"");const C=null===n&&null!==l;if(C&&(this.mouseHasBeenUp||r.Point.distance(l,t)>4)){switch(g.codeComponentIdentifier){case p.HardCodedCodeIdentifier.scroll:o.triggerInteractiveScrollConnectEvent({source:"canvas"});break;case p.HardCodedCodeIdentifier.page:o.triggerInteractivePageConnectEvent({source:"canvas"})}const e=S?S.id:u.NullID;e?(this.engine.linkChangesTo(e,g.id),this.addSlotContent(e,g)):0!==k.length||y?this.exitTool():this.addSlotContent(u.NullID,g)}else this.mouseHasBeenUp=this.mouseHasBeenUp||C,d.default.setHighlight(S?S.id:null)}addSlotContent(e,t){const n=t.slots();if(!n)return void this.engine.exitTool();const i=Object.keys(n);if(i.length>1){if(!e){const n=t.singleSlotWithContent();if(n)return void this.addSlotContentForKey(e,n,t)}this.slotSelector(e,n,t)}else this.addSlotContentForKey(e,i[0],t)}addSlotContentForKey(e,t,n){const i=n.component();if(!i||!i.properties)return this.exitTool();const o=i.properties[t];if(!o)return this.exitTool();const s=y.deepClone(n.codeComponentProps)||{};if(o.type===r.ControlType.ComponentInstance){const n=e?[{enabled:!0,value:e,type:o.type}]:[];s[t]=n}else if(o.type===r.ControlType.Array&&o.propertyControl.type===r.ControlType.ComponentInstance){const n=s[t];if(e)if(n&&Array.isArray(n))n.push({enabled:!0,value:e,type:o.propertyControl.type});else{const n=[{enabled:!0,value:e,type:o.propertyControl.type}];s[t]=n}else n&&Array.isArray(n)?n.pop():s[t]=[]}this.engine.updateNode(n.id,{codeComponentProps:s}),this.exitTool()}exitTool(){this.engine.exitTool()}};t.SlotConnect=class SlotConnect extends i.Component{render(){const{tree:e,selection:t,highlight:n,mouse:o,zoom:r}=this.props.myTool.engine,a=t[0];if(!a)return null;const l=e.getNode(a);if(!l||!h.isCodeComponentNode(l))return null;const c=e.getRect(l),d=l.canvasMatrix(),u=v.startPoint(c,d,v.ArrowDirection.Right);let p=o,m={x:0,y:0};const f=n?e.getNode(n):null;if(f){const{end:t,offset:n}=v.arrowPoints(e,c,l.canvasMatrix(),e.getRect(f),f.canvasMatrix(),v.ArrowDirection.Right,v.topAncestor(e,l));p=t,m=n}return i.createElement(v.Arrow,{tintColor:g.isUserComponent(l)?s.theme.componentTint:s.theme.tint,active:!0,startX:u.x,startY:u.y,endX:p.x,endY:p.y,direction:v.ArrowDirection.Right,startOffsetX:m.x,startOffsetY:m.y,background:!0,showArrowHead:!1,zoom:r})}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(673),o=n(419);let r=null;t.getGlobalSocketIO=function getGlobalSocketIO(e){if(r){if(r.io.uri===e)return r;r.close(),r=null}return r=i(e,{query:{token:o.authorizationToken}})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.authorizationToken=function getAuthorizationTokenOnce(){const e=window.authorization_token;return delete window.authorization_token,e||""}()},function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))(function(o,r){function fulfilled(e){try{step(i.next(e))}catch(t){r(t)}}function rejected(e){try{step(i.throw(e))}catch(t){r(t)}}function step(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(fulfilled,rejected)}step((i=i.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const o=n(107),r=n(23),s=n(9),a=n(4),l=n(5),c=n(43),d=n(87),u=n(76);class Benchmark{constructor(e,t,n,i,o){this.name=e,this.version=t,this.engine=n,this.onComplete=i,this.displayResults=o,this.current=0,this.scheduled=[],this.reports=[],this.started=0,this.ended=0,this.runOne=()=>{if(this.ended)return;this.current>0&&(this.reports[this.current-1]=this.engine.getLastReport());const e=this.scheduled[this.current];if(this.current+=1,!e)return this.done();this.engine.runAtNextFrame(this.runOne),this.engine.wrapHandler(e)()}}step(e){return r(!this.started),this.scheduled.push(e),this}drag(e,t,n,i,o=25){this.step(()=>{this.engine.setMouseStore(e,t,!1)});for(let r=0;r<=o;r++)this.step(()=>{this.engine.setMouseStore(e+Math.round(n/o*r),t+Math.round(i/o*r),!0)});return this.step(()=>{this.engine.setMouseStore(e+n,t+i,!1)}),this}start(e=0){o.debug(`--- bench:starting ${this.name} steps: ${this.scheduled.length} ---`),this.started=Date.now(),setTimeout(this.runOne,e)}done(){if(this.ended)return;this.ended=Date.now();const e=this.ended-this.started,t=this.scheduled.length/(e/1e3);o.info(`--- bench:done ${this.name} duration: ${(e/1e3).toFixed(3)} seconds, fps: ${t} ---`),console.table(this.reports.map(e=>(delete(e=Object.assign({},e,{perf:0})).perf,e)));const n={durationMs:e,fps:t,name:this.name,version:this.version,windowHeight:window.innerHeight,windowWidth:window.innerWidth};this.onComplete(n),this.displayResults&&function report(e){const t=document.createElement("div");Object.assign(t.style,{position:"fixed",top:0,left:0,width:"100%",height:"100%","z-index":1e3,"background-color":"rgba(0,0,0,0.5)",display:"flex","align-items":"center","justify-content":"center","user-select":"text"});const{durationMs:n=0,fps:i=0}=e,o=`duration: ${(n/1e3).toFixed(2)}\nfps: ${i.toFixed(1)}`;t.innerText=o,document.body.appendChild(t),t.onclick=()=>{const e=document.createElement("textarea");e.value=o,document.body.appendChild(e),e.select(),document.execCommand("copy"),e.remove(),t.remove()};const r=s.createVekterPerformanceBenchmarkEvent({name:e.name,version:e.version,fps:e.fps,durationMs:e.durationMs});u.Metrics.pushEvent(r)}(n)}}function benchEmpty(e,t=!0){return i(this,void 0,void 0,function*(){return new Promise(n=>{const i=new Benchmark("empty",1,e,n,t);for(let e=0;e<60;e++)i.step(()=>{});i.start()})})}function benchZoom(e,t=!0){return i(this,void 0,void 0,function*(){return new Promise(n=>{const i=new Benchmark("zoom",2,e,n,t),o=[1,2,4,8,16,8,4,2,1,.5,.25,.125,.0625];for(const t of o)i.step(()=>{e.canvasStore.setZoom(t)});e.processWhenReady(()=>{e.zoomToFitAll(),e.canvasStore.setZoom(1),i.start(1e3)})})})}function benchCreate(e,t=!0){return i(this,void 0,void 0,function*(){return new Promise(n=>{const i=new Benchmark("create",1,e,n,t);i.step(()=>{e.load(new a.default),e.canvasStore.setZoom(1)}),i.step(()=>{e.setToolEnum(l.Tools.CreateFrame)}),i.drag(0,0,200,600),i.step(()=>{e.setToolEnum(l.Tools.CreateFrame)}),i.drag(10,10,180,580),i.step(()=>{e.setToolEnum(l.Tools.CreateFrame)}),i.drag(20,20,10,10,5),i.step(()=>{e.setToolEnum(l.Tools.CreateFrame)}),i.drag(40,20,10,10,5),i.step(()=>{e.setToolEnum(l.Tools.CreateFrame)}),i.drag(60,20,10,10,5),i.step(()=>{e.setToolEnum(l.Tools.CreateFrame)}),i.drag(80,20,10,10,5),i.step(()=>{e.setToolEnum(l.Tools.CreateText)}),i.step(()=>{e.setMouseStore(50,100,!1)}),i.step(()=>{e.setMouseStore(50,100,!0)}),i.step(()=>{e.setMouseStore(50,100,!1)}),i.step(()=>{const t=e.tree.root.find(e=>e instanceof d.default);let n=t.styledText;n=n.withUpdatedText("hello world!"),e.updateNode(t.id,{styledText:n})}),i.step(()=>{e.exitTool()}),i.step(()=>{e.setSelection([e.tree.root.children[0].id])});for(let t=0;t<20;t++)i.step(()=>{c.ContextAction.duplicateNodes(e,e.selection)});i.step(()=>{e.canvasStore.setZoom(.5)}),i.step(()=>{e.canvasStore.setZoom(.25)}),i.drag(6300,-100,-1300,800),i.drag(5200,300,-1e3,-100),i.step(()=>{e.canvasStore.scrollToCenter(e.mouse)}),i.drag(4200,200,-1e3,0),i.step(()=>{e.canvasStore.scrollToCenter(e.mouse)}),i.drag(3200,200,-3200,-500),i.step(()=>{e.canvasStore.scrollToCenter(e.mouse)});for(let t=0;t<10;t++)i.step(()=>{c.ContextAction.duplicateNodes(e,e.selection)});for(let t=0;t<50;t++)i.step(()=>{e.undo()});for(let t=0;t<10;t++)i.step(()=>{e.redo()});return i.start()})})}t.benchEmpty=benchEmpty,t.benchZoom=benchZoom,t.benchCreate=benchCreate,t.automatedPerformanceTests=function allowRunOnce(e){let t=!1;return(...n)=>i(this,void 0,void 0,function*(){if(!t)return t=!0,e(...n)})}(function runPerformanceTests(e,t){return i(this,void 0,void 0,function*(){const n=yield benchEmpty(t,!1),i=yield benchZoom(t,!1),o=yield benchCreate(t,!1),{userAgent:r,language:s}=navigator,a={screen:{width:window.screen.width,height:window.screen.height},language:s};e.emit("performanceTestsComplete",{userAgent:r,context:a,benchmarks:[n,i,o]})})})},function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))(function(o,r){function fulfilled(e){try{step(i.next(e))}catch(t){r(t)}}function rejected(e){try{step(i.throw(e))}catch(t){r(t)}}function step(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(fulfilled,rejected)}step((i=i.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const o=n(2),r=n(4),s=n(680);function serializeTree(e){return e.toJS()}function loadDocumentJSON(e){const t=[],n=s.safeLoadDocument(e,t);return t.forEach(e=>{console.warn("[repaired]",e)}),n}t.serializeDocument=function serializeDocument(){return serializeTree(o.default.tree)},t.serializeTree=serializeTree,t.snapshotDocument=function snapshotDocument(){return function remap(e){const{__class:t,width:n,height:i,top:o,bottom:r,left:s,right:a}=e;let{children:l}=e;return l?{__class:t,width:n,height:i,top:o,bottom:r,left:s,right:a,children:l=l.map(remap)}:e.styledText?{__class:t,width:n,height:i,top:o,bottom:r,left:s,right:a,text:e.styledText.blocks.map(e=>e.text)}:{__class:t,width:n,height:i,top:o,bottom:r,left:s,right:a}}(o.default.tree.toJS().root)},t.loadDocument=function loadDocument(e){let t=void 0;const n=new XMLHttpRequest;n.open("GET",e.toString(),!1);try{n.send(),t=JSON.parse(n.responseText)}catch(i){console.error(`Retrieving document ${e} failed. (${i})`)}return loadDocumentJSON(t)},t.loadDocumentAsync=function loadDocumentAsync(e){return i(this,void 0,void 0,function*(){return(yield fetch(e.toString())).json().then(e=>loadDocumentJSON(e)).catch(e=>(console.error(`Document loading failed: ${e}`),new r.default))})},t.loadDocumentJSON=loadDocumentJSON},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(4),r=n(116),s=n(34),a=n(49);t.GroundNodeWrapper=function GroundNodeWrapper({node:e,children:t}){return i.createElement("div",{style:l(e)},t)};const l=e=>{let t=0,n=0;return r.hasPosition(e)&&(t=e.y,n=e.x),s.isPinnable(e)&&(t=e.top?e.top:0,n=e.left?e.left:0),{position:"absolute",willChange:supportsWillChangeTransform(e)?"transform":void 0,transform:`translateX(${rounded(n,e)}px) translateY(${rounded(t,e)}px)`}};function supportsWillChangeTransform(e){return function isWithoutGradient(e){return!(!a.hasOptionalFill(e)||!1!==e.fillEnabled)||!a.hasFill(e)||"linear-gradient"!==e.fillType&&"radial-gradient"!==e.fillType}(e)}function rounded(e,t){return o.isTextNode(t)?e:Math.round(e)}},function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))(function(o,r){function fulfilled(e){try{step(i.next(e))}catch(t){r(t)}}function rejected(e){try{step(i.throw(e))}catch(t){r(t)}}function step(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(fulfilled,rejected)}step((i=i.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const o=n(0),r=n(169),s=n(9),a=n(1),l=n(215),c=n(46),d=n(44),u=n(2),h=n(398),p=n(171),g=n(58),m=n(420),f=n(741),y=n(170),v=n(70),b=n(35),k=n(101),S="N".charCodeAt(0),C="M".charCodeAt(0),x="Z".charCodeAt(0);t.CanvasEventTarget=class CanvasEventTarget extends o.PureComponent{constructor(){super(...arguments),this.element=null,this.clientMouseDown=null,this.keyDown=u.default.wrapKeyHandler(e=>{e.defaultPrevented||e.target===document.body&&(u.default.mouseStore.onKeyDown(e),e.defaultPrevented||e.altKey&&e.ctrlKey&&e.metaKey&&(e.keyCode===C&&m.benchCreate?(e.preventDefault(),m.benchCreate(u.default).catch(b.unhandledError)):e.keyCode===x&&m.benchZoom?(e.preventDefault(),m.benchZoom(u.default).catch(b.unhandledError)):e.keyCode===S&&f.crash&&(e.preventDefault(),f.crash())))}),this.keyPress=u.default.wrapKeyHandler(e=>{e.defaultPrevented||e.target===document.body&&u.default.mouseStore.onKeyPress(e)}),this.keyUp=u.default.wrapKeyHandler(e=>{e.defaultPrevented||e.target===document.body&&u.default.mouseStore.onKeyUp(e)}),this.onMouseDown=u.default.wrapMouseHandler(e=>{t.canvasMouseTarget.handleMouseDown(e,"mousedown"),u.default.selectionOutlineTracker.forceEnableSelectionOutline()}),this.onMouseMove=u.default.wrapMouseHandler(e=>{t.canvasMouseTarget.handleMouseMove(e),u.default.selectionOutlineTracker.forceEnableSelectionOutline()}),this.onMouseUp=u.default.wrapMouseHandler(e=>{t.canvasMouseTarget.handleMouseUp(e)}),this.onMouseEnter=u.default.wrapMouseHandler(()=>{u.default.mouseStore.setMouseOnCanvas(!0)}),this.onMouseLeave=u.default.wrapMouseHandler(()=>{u.default.mouseStore.setMouseOnCanvas(!1)}),this.onDoubleClick=u.default.wrapMouseHandler(e=>{const[n]=t.canvasMouseTarget.getPointsFromEvent(e.nativeEvent);if(function updateSelectionForDoubleClick(e){const{tree:t,zoom:n,selection:i,cmdKey:o,tool:r}=u.default;if(r.enum!==g.Tools.Highlight&&r.enum!==g.Tools.Move)return!1;const s=t.getNodesAtPoint(e,!1,n<4).filter(e=>p.default(e,u.default,i,o,!0)),a=t.getTopMostChildNode(s);return!(!a||-1!==i.indexOf(a.id))&&(u.default.setHighlight(null),u.default.setSelection([a.id]),!0)}(n))return;if(0===u.default.selection.length)return;const i=h.editActionForSelection(u.default,"mouse");i&&i()}),this.pushMetricsEvent=a.debounce(()=>s.triggerCanvasZoomEvent({source:"wheel"}),2e3),this.onWheel=u.default.wrapHandler(e=>{if(!this.element||!(e.target instanceof Node)||!this.element.contains(e.target)||u.default.mouseStore.middleMouseButtonDown)return;e.preventDefault(),e.stopPropagation();const t=y.isWindows()?e.altKey:e.ctrlKey,n=y.isWindows()?e.ctrlKey:e.metaKey,i=e.ctrlKey&&!u.default.mouseStore.ctrlKey;let{deltaX:o,deltaY:r}=e;switch(e.deltaMode){case 1:o*=16,r*=16;break;case 2:o*=1e3,r*=750}t||i||n?(r/=t?50:200,(i||y.isWindows())&&(r*=-1),this.changeMagnificationThrottled(r,{x:e.pageX,y:e.pageY})):u.default.canvasStore.scroll(o,r)}),this.didMagnifyThisFrame=!1,this.pendingMagnification=1,this.changeMagnificationThrottled=(e,t)=>{this.pendingMagnification*=1+e,this.didMagnifyThisFrame||(u.default.canvasStore.changeMagnification(this.pendingMagnification-1,t),this.didMagnifyThisFrame=!0,this.pendingMagnification=1),requestAnimationFrame(()=>{1!==this.pendingMagnification?(u.default.canvasStore.changeMagnification(this.pendingMagnification-1,t),this.didMagnifyThisFrame=!0,this.pendingMagnification=1):this.didMagnifyThisFrame=!1})},this.pointerEventPoints=new Map,this.lastPointerCount=0,this.onPointerDown=e=>{"touch"===e.pointerType&&this.pointerEventPoints.set(e.pointerId,a.Point(e.clientX,e.clientY))},this.onPointerUpOrCancel=e=>{this.pointerEventPoints.delete(e.pointerId),this.pointerEventPoints.size<1&&(this.lastPointerCount=0,this.pointerEventCenter=void 0),this.pointerEventPoints.size<2&&(this.pointerEventDistance=void 0)},this.onPointerMove=u.default.wrapHandler(e=>{if(!this.pointerEventPoints.has(e.pointerId))return;if(this.pointerEventPoints.set(e.pointerId,a.Point(e.clientX,e.clientY)),this.pointerEventPoints.size>2)return;const t=Array.from(this.pointerEventPoints.values()),n=2===t.length?a.Point.center(t[0],t[1]):t[0],i=2===t.length?a.Point.distance(t[0],t[1])/200:void 0;if(void 0!==i&&void 0!==this.pointerEventDistance&&this.changeMagnificationThrottled(i-this.pointerEventDistance,n),this.lastPointerCount===t.length&&void 0!==this.pointerEventCenter){const e=a.Point.subtract(this.pointerEventCenter,n);u.default.canvasStore.scroll(e.x,e.y)}this.lastPointerCount=t.length,this.pointerEventCenter=n,this.pointerEventDistance=i}),this.onTouchStart=e=>{this.applyZoomAndPan(e)},this.onTouchEnd=e=>{this.applyZoomAndPan(e)},this.onTouchMove=u.default.wrapHandler(e=>{e.preventDefault(),e.stopPropagation(),this.applyZoomAndPan(e)}),this.triggerFakeMouseUp=()=>{const e=document.createEvent("HTMLEvents");e.initEvent("mouseup",!0,!0);const t=r.findDOMNode(this);t&&t.dispatchEvent(e)},this.onWindowBlur=u.default.wrapHandler(e=>{this.triggerFakeMouseUp()}),this.setElement=e=>{this.element=e,e&&(u.default.canvasStore.setContainerSize(e.clientWidth,e.clientHeight),"PointerEvent"in window||(e.addEventListener("touchstart",this.onTouchStart),e.addEventListener("touchend",this.onTouchEnd),e.addEventListener("touchmove",this.onTouchMove)))},this.onWindowResize=u.default.wrapHandler(()=>{this.element&&u.default.canvasStore.setContainerSize(this.element.clientWidth,this.element.clientHeight)}),this.onMouseUpNativeWrapped=u.default.wrapHandler(e=>{this.triggerFakeMouseUp()}),this.onMouseUpNative=e=>{e.isTrusted&&e.target===document.documentElement&&this.onMouseUpNativeWrapped(e)},this.onContextMenu=u.default.wrapHandler(e=>{if(e.defaultPrevented)return;const[n]=t.canvasMouseTarget.getPointsFromEvent(e.nativeEvent);!function clearSelectionWhenClickedOnCanvas(e){const{tree:t,zoom:n}=u.default;0===t.getNodesAtPoint(e,!1,n<4).length&&u.default.clearSelection()}(n),function clearSelectedGuideWhenClickedOnCanvas(e){const{tree:t,zoom:n}=u.default,{selectedGuide:i}=u.default.toolStore.state;i&&k.getGuideNode(t,i)&&(k.closestGuideInRange(t,e,n)||u.default.toolStore.setSelectedGuide())}(n);const{highlightedGuide:i}=u.default.toolStore.state;i&&(u.default.toolStore.setSelectedGuide(i),u.default.toolStore.setHighlightedGuide(),u.default.clearSelection());const{selectedGuide:o}=u.default.toolStore.state;l.showContextMenu(a.Point(e.clientX,e.clientY),u.default.tree,u.default.selection,o)})}applyZoomAndPan(e){const{touches:t}=e;if(t.length<1||t.length>2)return this.lastTouchEvent=void 0,this.pointerEventCenter=void 0,void(this.pointerEventDistance=void 0);const n=a.Point(t[0].clientX,t[0].clientY),i=2===t.length?a.Point(t[1].clientX,t[1].clientY):void 0,o=i?a.Point.center(n,i):n,r=i?a.Point.distance(n,i)/200:void 0;if(this.lastTouchEvent&&this.lastTouchEvent.touches.length===t.length){const n=e.scale||r,i=this.lastTouchEvent.scale||this.pointerEventDistance;if(2===t.length&&void 0!==n&&void 0!==i&&this.changeMagnificationThrottled(n-i,o),void 0!==this.pointerEventCenter){const e=a.Point.subtract(this.pointerEventCenter,o);u.default.canvasStore.scroll(e.x,e.y)}}this.pointerEventCenter=o,this.pointerEventDistance=r,this.lastTouchEvent=e}componentDidMount(){window.addEventListener("blur",this.onWindowBlur),window.addEventListener("mouseup",this.onMouseUpNative),window.addEventListener("resize",this.onWindowResize),window.addEventListener("wheel",this.onWheel,{passive:!1}),document.addEventListener("keydown",this.keyDown),document.addEventListener("keypress",this.keyPress),document.addEventListener("keyup",this.keyUp)}componentWillUnmount(){window.removeEventListener("blur",this.onWindowBlur),window.removeEventListener("mouseup",this.onMouseUpNative),window.removeEventListener("resize",this.onWindowResize),window.removeEventListener("wheel",this.onWheel),document.removeEventListener("keydown",this.keyDown),document.removeEventListener("keypress",this.keyPress),document.removeEventListener("keyup",this.keyUp)}render(){const{cursor:e}=this.props,t={position:"absolute",top:0,left:0,right:0,bottom:0,background:"transparent",overflow:"clip",cursor:e,touchAction:"none"};let n="";return c.rotationCursors.forEach(i=>{-1!==e.indexOf(i)&&(t.cursor="",n=i)}),o.createElement("div",{id:"CanvasEventTarget",className:n,style:t,ref:this.setElement,onMouseMove:this.onMouseMove,onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp,onDoubleClick:this.onDoubleClick,onContextMenu:this.onContextMenu,onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,onPointerDown:this.onPointerDown,onPointerUp:this.onPointerUpOrCancel,onPointerCancel:this.onPointerUpOrCancel,onPointerMove:this.onPointerMove},this.props.children)}};const w=3;t.canvasMouseTarget=new class CanvasMouseTarget{constructor(){this.engine=u.default,this.clientPointForMouseMoveThreshold=null,this.isAutoscrolling=!1,this.handleDocumentElementMouseMove=this.engine.wrapMouseHandler(e=>{e.stopPropagation(),this.handleNativeMouseMove(e)}),this.handleNativeMouseMove=e=>{const[t,n]=this.getPointsFromEvent(e),i=this.engine.mouseStore;if(this.clientPointForMouseMoveThreshold){if(a.Point.distance(n,this.clientPointForMouseMoveThreshold)<w)return;this.clientPointForMouseMoveThreshold=null}const o=y.isWindows()?e.ctrlKey:e.metaKey,r=y.isWindows()?e.metaKey:e.ctrlKey;i.setMousePosition(t,n,e.altKey,o,e.shiftKey,r)},this.hasDocumentElementMouseMoveHandler=!1,this.previousMagnification=0,this.dispatchMagnificationEvent=this.engine.wrapHandler(e=>i(this,void 0,void 0,function*(){const t=this.engine.canvasStore;switch(e.type){case"magnificationBegan":this.previousMagnification=0,t.beginMagnification();case"magnificationChanged":{const n=e.magnification-this.previousMagnification;this.previousMagnification=e.magnification,t.changeMagnification(n,t.convertCanvasPointToContainer(this.engine.mouse));break}case"magnificationEnded":t.endMagnification()}}))}getPointsFromEvent(e){return[this.engine.canvasStore.convertContainerPointToCanvas({x:e.pageX,y:e.pageY}),{x:e.clientX,y:e.clientY}]}handleMouseDown(e,t){const n=d.default.isMiddleMouseClick(e);if(!d.default.isLeftMouseClick(e)&&!n)return;const i=this.engine.mouseStore,[o,r]=this.getPointsFromEvent(e.nativeEvent);this.clientPointForMouseMoveThreshold=r;const s=y.isWindows()?e.ctrlKey:e.metaKey,a=y.isWindows()?e.metaKey:e.ctrlKey;i.setMousePosition(o,r,e.altKey,s,e.shiftKey,a),"mousedown"===t?(i.setChromePointerEvents(!1),n?i.setMiddleButtonDown(!0):i.setMouseDown(!0)):(this.isAutoscrolling=!0,this.engine.canvasStore.beginAutoscrolling()),this.addDocumentElementMouseMoveHandler()}handleMouseUp(e){this.removeDocumentElementMouseMoveHandler(),this.clientPointForMouseMoveThreshold=null,this.isAutoscrolling&&this.engine.canvasStore.endAutoscrolling();const t=this.engine.mouseStore;(void 0===e.button||d.default.isLeftMouseClick(e))&&t.setMouseDown(!1),(void 0===e.button||d.default.isMiddleMouseClick(e))&&t.setMiddleButtonDown(!1),t.setChromePointerEvents(!0)}handleMouseMove(e){this.handleNativeMouseMove(e.nativeEvent)}addDocumentElementMouseMoveHandler(){this.hasDocumentElementMouseMoveHandler||(this.hasDocumentElementMouseMoveHandler=!0,document.documentElement.addEventListener("mousemove",this.handleDocumentElementMouseMove))}removeDocumentElementMouseMoveHandler(){this.hasDocumentElementMouseMoveHandler&&(document.documentElement.removeEventListener("mousemove",this.handleDocumentElementMouseMove),this.hasDocumentElementMouseMoveHandler=!1)}},v.GestureEventTarget.on(v.PostMessageChannel.toParentFrame).register(t.canvasMouseTarget).catch(b.unhandledError)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(685),r=n(5),s=n(25),a=n(2),l=n(74);t.Screens=class Screens extends i.PureComponent{render(){const{frameNodes:e,highlight:t,zoom:n,tool:c,selection:d}=this.props,u=[],h=c===r.Tools.Highlight||c===r.Tools.Move,p=c===r.Tools.SlotConnect,g=1===d.length?a.default.tree.getNode(d[0]):null,m=!!g&&l.isUserComponent(g);for(let r=0,a=e.length;r<a;r++){const a=e[r];s.hasRotation(a)&&0!==a.rotation||u.push(i.createElement(o.ScreenTitle,{key:a.id,node:a,isSelected:a.isSelected(),isHighlighted:a.id===t,singleSelectedNodeUserComponent:m,ignoreMouse:h,slotConnect:p,zoom:n}))}return u}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(1),o=n(49);t.reduceFill=function reduceFill(e,t){let n,r,s,a;if(o.hasFill(e)&&(n=e.fillColor,"image"===e.fillType&&e.fillImageResize&&-1===t.fillImageResize.indexOf(e.fillImageResize)&&t.fillImageResize.push(e.fillImageResize)),o.supportsGradient(e)){"linear-gradient"===e.fillType&&e.fillLinearGradient&&(n=void 0,s=Math.round(100*e.fillLinearGradient.alpha)),"radial-gradient"===e.fillType&&e.fillRadialGradient&&(n=void 0,s=Math.round(100*e.fillRadialGradient.alpha));const i=o.hasOptionalFill(e)&&!e.fillEnabled;i||void 0!==t.fillType?i||null===t.fillType||t.fillType===e.fillType||(t.fillType=null):t.fillType=e.fillType}else t.gradientFillSupported=!1;o.hasOptionalFill(e)&&(!1===t.fillEnabled&&(r=n,n=void 0,a=s,s=void 0),void 0===t.fillEnabled?t.fillEnabled=e.fillEnabled:null!==t.fillEnabled&&t.fillEnabled!==e.fillEnabled&&(t.fillEnabled=null)),n&&(s=Math.round(100*i.ConvertColor.getAlpha(n)),void 0===t.fillColor?t.fillColor=n:null!==t.fillColor&&t.fillColor!==n&&(t.fillColor=null)),r&&(a=Math.round(100*i.ConvertColor.getAlpha(r)),void 0===t.disabledFillColor?t.disabledFillColor=r:null!==t.disabledFillColor&&t.disabledFillColor!==r&&(t.disabledFillColor=null)),i.isFiniteNumber(s)&&(void 0===t.fillAlpha?t.fillAlpha=s:null!==t.fillAlpha&&t.fillAlpha!==s&&(t.fillAlpha=null)),i.isFiniteNumber(a)&&(void 0===t.disabledFillAlpha?t.disabledFillAlpha=a:null!==t.disabledFillAlpha&&t.disabledFillAlpha!==a&&(t.disabledFillAlpha=null))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(19),o=n(72),r=n(162),s=n(62),a=n(27);t.reduceStroke=function reduceStroke(e,t){if(!s.hasStroke(e))return;const n=o.Property.nonOptional(e.strokeEnabled);if(void 0===t.strokeEnabled?t.strokeEnabled=n:r.effectDisabledOrHidden(t.strokeEnabled,n)?t.strokeEnabled=-1:null!==t.strokeEnabled&&t.strokeEnabled!==n&&(t.strokeEnabled=null),a.hasShape(e)){const n=i.default.isClosed(e.calculatedPaths());void 0===t.pathsAreClosed?t.pathsAreClosed=n:null!==t.pathsAreClosed&&t.pathsAreClosed!==n&&(t.pathsAreClosed=null),e.strokeAlignment&&n&&-1===t.strokeAlignmentValues.indexOf(e.strokeAlignment)&&t.strokeAlignmentValues.push(e.strokeAlignment)}const{lineJoin:l,lineCap:c}=e;o.Property.isEnabled(n)?(l&&-1===t.lineJoinValues.indexOf(l)&&t.lineJoinValues.push(l),c&&-1===t.lineCapValues.indexOf(c)&&t.lineCapValues.push(c),void 0===t.strokeColor?(t.strokeColor=e.strokeColor,t.strokeWidth=e.strokeWidth,t.strokeMiterLimit=e.strokeMiterLimit,t.strokeDashArray=e.strokeDashArray,t.strokeDashOffset=e.strokeDashOffset):(null!==t.strokeColor&&t.strokeColor!==e.strokeColor&&(t.strokeColor=null),null!==t.strokeWidth&&t.strokeWidth!==e.strokeWidth&&(t.strokeWidth=null),null!==t.strokeMiterLimit&&t.strokeMiterLimit!==e.strokeMiterLimit&&(t.strokeMiterLimit=null),null!==t.strokeDashArray&&t.strokeDashArray!==e.strokeDashArray&&(t.strokeDashArray=null),null!==t.strokeDashOffset&&t.strokeDashOffset!==e.strokeDashOffset&&(t.strokeDashOffset=null))):o.Property.isDisabledVisible(n)&&(void 0===t.disabledStrokeColor?(t.disabledStrokeColor=e.strokeColor,t.disabledStrokeWidth=e.strokeWidth):(null!==t.disabledStrokeColor&&t.disabledStrokeColor!==e.strokeColor&&(t.disabledStrokeColor=null),null!==t.disabledStrokeWidth&&t.disabledStrokeWidth!==e.strokeWidth&&(t.disabledStrokeWidth=null)))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(81);function parseHTMLContent(e,t,n){const o=(new DOMParser).parseFromString(e,"text/html"),r=o.body.querySelector("[data-framer-styled-text]");if(r){const e=function parseSerializedContentState(e){try{const n=JSON.parse(e);return i.convertFromRaw(n)}catch(t){if(!(t instanceof SyntaxError))throw t}return null}(r.dataset.framerStyledText);if(e)return e}return function convertFromDocument(e,t,n){return function convertFromText(e,t=[]){let n=i.ContentState.createFromText(e);const o=new i.SelectionState({anchorKey:n.getFirstBlock().getKey(),anchorOffset:0,focusKey:n.getLastBlock().getKey(),focusOffset:n.getLastBlock().getLength()});return t.forEach(e=>n=i.Modifier.applyInlineStyle(n,o,e)),n}(t||e.body.textContent||"",n)}(o,t,n)}function writeContentToClipboard(e,t,n=window.getSelection){const o=n();if(o&&o.rangeCount>0){const n=JSON.stringify(i.convertToRaw(e)),r=o.getRangeAt(0).cloneContents(),s=document.createElement("div");s.dataset.framerStyledText=n,s.appendChild(r),t.setData("text/plain",s.textContent||""),t.setData("text/html",s.outerHTML)}}t.isFromInternalClipboard=function isFromInternalClipboard(e){return e.includes(" data-framer-styled-text=")},t.handleCopy=function handleCopy(e,t){const n=e.getSelection();if(n.isCollapsed())return!1;let o=e.getCurrentContent();const r=new i.SelectionState({anchorKey:n.getEndKey(),anchorOffset:n.getEndOffset(),focusKey:o.getLastBlock().getKey(),focusOffset:o.getLastBlock().getLength()});o=i.Modifier.removeRange(o,r,"forward");const s=new i.SelectionState({anchorKey:n.getStartKey(),anchorOffset:0,focusKey:n.getStartKey(),focusOffset:n.getStartOffset()});return writeContentToClipboard(o=i.Modifier.removeRange(o,s,"forward"),t),!0},t.applyHTMLToEditor=function applyHTMLToEditor(e,t,n){const o=parseHTMLContent(t,n,e.getCurrentInlineStyle().toArray());return o&&""!==o.getPlainText()?function applyFragmentToEditor(e,t){const n=i.Modifier.replaceWithFragment(e.getCurrentContent(),e.getSelection(),t.getBlockMap());return i.EditorState.push(e,n,"insert-fragment")}(e,o):e},t.parseHTMLContent=parseHTMLContent,t.writeContentToClipboard=writeContentToClipboard},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(9),o=n(15),r=n(14),s=n(421),a=n(265),l=n(166),c=n(40),d=n(220),u=n(5),h=n(699),p=n(76),g=n(177),m=n(291),f=n(2),y=o.getIpcRenderer();function createObjectHandler(e){return(t,n,o,r,s)=>{const a=f.default.tree,d=l.suggestedTopLevelFrame(a,[],r),u=function constraintsForDropAtPosition(e,t,n){const i=f.default.tree,o={x:Math.round(t.x-n.width/2),y:Math.round(t.y-n.height/2)};if(!e)return{left:o.x,top:o.y};const r=i.getNode(e),s=i.getRect(r),a=i.convertPointToNode(r,o),l={x:a.x,y:a.y,width:n.width,height:n.height},d=l.width/l.height;return c.guessConstrainedFrame(l,s,void 0,void 0,d)}(d,r,o),h=a.newId(),p=Object.assign({id:h,originalFilename:n,intrinsicWidth:o.width,intrinsicHeight:o.height,width:o.width,height:o.height},u);if("image"===e){p.clip=!1;const e=o;e.pixelWidth&&e.pixelHeight&&(p.fillImagePixelWidth=e.pixelWidth,p.fillImagePixelHeight=e.pixelHeight)}void 0!==s&&(p.colorable=s),"image"===e?(f.default.createImage(t,d,p),i.triggerImportPasteBitmapEvent({})):f.default.createSVG(t,d,p),f.default.setSelection([h])}}t.saveDocument=function saveDocument(){y.send(r.DocumentSave)},t.sendDocument=f.default.wrapHandler(()=>{f.default.serverStore.hasProject?(y.send(r.DocumentSaveDialogStart,s.serializeDocument()),a.documentClean()):y.send(r.DocumentSaveDialogStart,null)}),y.on(r.DocumentSave,t.sendDocument),y.on(r.DocumentSaveAs,t.sendDocument),y.on(r.DocumentInsertImage,f.default.wrapHandler(createObjectHandler("image"))),y.on(r.DocumentInsertSVG,f.default.wrapHandler(createObjectHandler("svg"))),y.on(r.DocumentSetProjectURL,f.default.wrapHandler(e=>{f.default.serverStore.setProjectURL(e)})),y.on(r.DocumentSetImageBaseURL,f.default.wrapHandler(e=>{f.default.serverStore.setImageBaseURL(e)})),y.on(r.DocumentLoadJSON,f.default.wrapHandler(e=>{const t=s.loadDocumentJSON(e);f.default.load(t),f.default.zoomToFitAll()})),y.on(r.ExportProgress,f.default.wrapHandler((e,t)=>{f.default.statusStore.setExportProgress(e,t)})),y.on(r.VekterUserDefaultsChange,f.default.wrapHandler(e=>{f.default.persistedUserDefaults.externalStateUpdate(e)})),y.on(r.ShowStoreView,f.default.wrapHandler(e=>{e?f.default.setLeftPanelContent(u.LeftPanelContent.Marketplace,()=>g.PublicStore.goToPackage(e.replace("framer-x://store/package/",""))):f.default.setLeftPanelContent(u.LeftPanelContent.Marketplace)})),y.on(r.ExportAction,f.default.wrapHandler(e=>{"exportSelection"===e?m.exportActionTarget.exportSelection():"exportAll"===e?m.exportActionTarget.exportAll():"exportCanvas"===e?m.exportActionTarget.exportCanvas():process.exit(1234)})),y.on(r.UpdatePreview,()=>{f.default.codeGenerator&&f.default.codeGenerator.updatePreview(),setTimeout(d.forceUpdatePreview,100)}),y.on(r.UpdatePreviewSettings,f.default.wrapHandler((e,t)=>{d.updateFrameNodePreviewSettings(e,t)})),y.on(r.SetPreviewSelectionLock,f.default.wrapHandler(e=>d.setPreviewSelectionLock(e))),y.on(r.TogglePreviewConsole,()=>d.togglePreviewInspector()),y.on(r.ServerStoreData,d.sendServerStoreData),y.on(r.PreviewLoaded,()=>{i.triggerPreviewShownEvent({})}),y.on(r.MetricsContext,(e,t,n)=>{p.Metrics.init({userId:e,appVersion:t,projectId:n})}),y.on(r.OrganizationInfo,f.default.wrapHandler(e=>{f.default.documentSettings.organization=e})),setTimeout(()=>{y.send(r.DocumentReady)},0),h.addMessageListener(f.default.wrapHandler(e=>{const t=e.data;!function isInstallMessage(e){return e.command&&"install"===e.command}(t)?t.appearance&&(f.default.documentSettings.hasDarkAppearance="dark"===t.appearance):y.send(r.PackageAdd,t.package)}))},function(e,t){e.exports=require("history")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(290),o=n(13),r=n(10),s=n(2),a=n(6),l=n(0),c=n(701),d=n(3),u=n(28);class InnerStore extends l.Component{constructor(e){super(e),this.getFeatures=()=>({disablePublishing:u.experiments.isOn("disablePublishing"),readOnlyMode:!1}),this.projectClient=new c.StoreProjectClient}static calculateState(){return{hasDarkAppearance:s.default.documentSettings.hasDarkAppearance}}onMainPanelOpen(){s.default.processWhenReady(()=>s.default.toolStore.setStoreMainPanelOpened(!0))}onMainPanelClose(){s.default.processWhenReady(()=>s.default.toolStore.setStoreMainPanelOpened(!1))}render(){const{visible:e,organization:t,isPrivate:n,history:r,command:s}=this.props,{hasDarkAppearance:a}=this.state,h=n?c.privateStoreService:c.publicStoreService,p=o.layout.toolbarWidth,g=!n&&u.experiments.isOn("sidebarStore");return l.createElement("div",{onContextMenu:e=>e.preventDefault(),className:d.framerChromeClassName,style:{boxSizing:"border-box",position:"fixed",top:o.layout.chromeMarginTop,left:p,bottom:o.layout.chromeMarginBottom,width:"calc(100% - "+p+"px)",display:e?"block":"none",pointerEvents:"none"}},g?l.createElement(i.SidebarStore,{onMainPanelOpen:this.onMainPanelOpen,onMainPanelClose:this.onMainPanelClose,command:s,hasDarkAppearance:a,projectClient:this.projectClient,projectState:c.projectStateService,storeClient:h,isPrivateStore:n}):l.createElement("div",{style:{boxSizing:"border-box",position:"absolute",top:0,left:0,bottom:0,right:0,display:e?"flex":"none",alignItems:"center",justifyContent:"center",pointerEvents:"auto",cursor:"default"}},l.createElement(i.EmbeddedStore,{organization:t,history:r,isPrivate:n,hasDarkAppearance:a,projectClient:this.projectClient,projectState:c.projectStateService,storeClient:h,features:this.getFeatures()})))}}InnerStore.engineChangeKeys=a.EngineChangeFlags.DocumentSettings,t.Store=r.default(InnerStore)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(1),r=n(704),s=n(52),a=n(63),l=n(3),c=n(4),d=n(215),u=n(41),h=n(16),p=n(2),g=n(12),m=n(132),f=n(176),y=n(109),v={position:"relative",display:"block",width:"100%",height:28},b={position:"absolute",width:"100%"};t.LayerPanelItem=class LayerPanelItem extends i.Component{constructor(){super(...arguments),this.state={isEditing:!1,nameDidChange:!1},this.onChange=p.default.wrapHandler((e,t)=>{let n=e.length>0?e:null;if(!t)return;const i=p.default.tree.getNode(this.props.nodeid);if(i){if(m.withTarget(i)&&i.isTarget){let e=g.isMaster(i);if(!e)for(const t of i.ancestors())if(e=g.isMaster(t))break;e&&(n=f.sanitizedVariableName(n))}p.default.updateNode(i.id,{name:n}),this.setState({isEditing:!1})}}),this.onBlur=p.default.wrapHandler((e,t)=>{t?this.setState({isEditing:!1}):this.onChange(e,!0)}),this.onMouseOver=p.default.wrapHandler(()=>{const{nodeid:e}=this.props;p.default.setHighlight(e)}),this.onMouseDown=p.default.wrapAtomicHandler(e=>{const{nodeid:t,onSelect:n}=this.props;n&&n(t,e)}),this.onClick=e=>{e.preventDefault(),e.stopPropagation()},this.onDoubleInputClick=p.default.wrapHandler(e=>{this.beginEditing(),e.preventDefault(),e.stopPropagation()}),this.onDoubleClick=p.default.wrapHandler(e=>{const t=p.default.tree.getNode(this.props.nodeid);t&&(c.isShapeContainerNode(t)&&!p.default.shapeModeActive&&p.default.setShapeModeActive(!0),e.preventDefault(),e.stopPropagation())}),this.onContextMenu=p.default.wrapHandler(e=>{let{selection:t}=p.default;const n=p.default.tree.getNode(this.props.nodeid);if(n){const{isEditing:i}=this.state;if(i)return;n.isSelected()||(p.default.setSelection([n.id]),t=[n.id]),d.showContextMenu(o.Point(e.clientX,e.clientY),p.default.tree,t),e.preventDefault()}}),this.lockAction=p.default.wrapHandler(e=>{const t=p.default.tree.getNode(this.props.nodeid);if(t){if(!u.hasLock(t))return;const n=!t.locked;p.default.updateNode(t.id,{locked:n}),e.preventDefault()}}),this.onMouseDownCollapseExpand=p.default.wrapHandler(e=>{const{collapsed:t,collapsedOverride:n,nodeid:i}=this.props;i&&(p.default.treeStore.setCollapseMode(i,!t,!n),e.stopPropagation())}),this.collapseIndicatorStyle=(e,t,n)=>{const{collapsed:i}=this.props,o={position:"absolute",left:t,width:20,height:"100%"},r=p.default.tree.getNode(this.props.nodeid),s=r&&c.isShapeContainerNode(r)&&!n;return r&&h.getChildren(r).length>0&&!s?o.background=`no-repeat 10px 50% ${l.theme.backgroundImage(`icon-triangle-${i?"right":"down"}${e?"-white":"-gray"}`)}`:o.display="none",o}}static getDerivedStateFromProps(e,t){const{nodeName:n}=e,i=n!==t.previousName,o=n;return Object.assign({},t,{nameDidChange:i,previousName:o})}beginEditing(){if(this.state.isEditing)return;const e=p.default.tree.getNode(this.props.nodeid);if(e){if(e.originalid&&!g.isReplica(e))return;this.setState({isEditing:!0})}}shouldComponentUpdate(e,t){const n=!y.default(this.props,e),i=!y.default(this.state,t);return n||i}render(){const{indent:e,beingDragged:t,hidden:n,shapeModeActive:o,locked:c,isMasterNode:d,isInstanceNode:u,nodeName:h,iconName:p,isUserComponent:g}=this.props;let{placeholder:m}=this.props;const{isEditing:f,nameDidChange:y}=this.state,x=this.props.selected&&!t,w=n&&!f&&!t,T=Object.assign({},v),P=18*(e-1),E=P+18+15,F=4+E,M=Object.assign({},b,{top:1,left:F,maxWidth:`calc(100% - ${F+4}px)`});let _=h||"";f||(""===_&&(_=m),m="");const O=f?"white":"transparent",I=f?S:k;let D=f?"black":x?l.theme.layerPanelSelectionText:l.theme.layerPanelText;w&&!f&&(D=x?l.theme.layerPanelSelectionDimmedText:l.theme.layerPanelDimmedText);const N=Object.assign({},C,{backgroundColor:O,border:I,color:D}),R=!t&&!f&&c,A=!t&&!f&&(d||u);if(!f){let e=0;R&&(e+=20),A&&(e+=50),M.maxWidth=`calc(100% - ${F+4+e}px)`}return i.createElement("div",{style:T,onMouseOver:this.onMouseOver,onMouseDown:this.onMouseDown,onClick:this.onClick,onDoubleClick:this.onDoubleClick,onContextMenu:this.onContextMenu},i.createElement("div",{draggable:!1,onMouseDown:this.onMouseDownCollapseExpand,style:this.collapseIndicatorStyle(x,P,o)}),0!==e&&i.createElement(r.LayerPanelIcon,{active:x,marginLeft:E-6,iconName:p,dimmed:w}),i.createElement("div",{style:M,onDoubleClick:this.onDoubleInputClick},i.createElement(a.TextInput,{type:a.TextInputType.Field,value:_,placeholder:m,onChange:this.onChange,onBlur:this.onBlur,enabled:f,blurOnEnter:!0,autoFocus:!0,className:`layerPanelPlaceholder${x?" active":""}${g?" component":""}`,style:N,keepValueState:!y&&f})),R&&i.createElement(s.Icon,{name:x?"layer-lock-selected":"layer-lock",active:c,width:23,height:23,onMouseDown:this.lockAction,style:{position:"absolute",top:2,right:0}}),A&&i.createElement("div",{style:componentLabelStyle(x,R)},d?"Master":"Instance"))}};const k="1px solid transparent",S=`1px solid ${l.theme.layerPanelSelection}`,C={height:22,margin:"2px 0 0 0",borderRadius:3,width:"100%",lineHeight:"1",padding:"0 0 2px 4px"};function componentLabelStyle(e,t){return{position:"absolute",fontSize:"9px",lineHeight:"27px",color:e?l.theme.layerPanelComponentLabelSelected:l.theme.layerPanelComponentLabel,right:t?24:10}}t.renameSelectedLayer=()=>{const e=document.querySelectorAll(".layerPanelPlaceholder.active");if(1===e.length){const t=new MouseEvent("dblclick",{view:window,bubbles:!0,cancelable:!0}),n=e[0].parentElement;n&&n.dispatchEvent(t)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(64),r=n(145),s=n(10),a=n(284),l=n(2),c=n(6);class ExportButton extends i.Component{static calculateState(){const{exportWork:e,exportProgress:t,lastExportMode:n}=l.default.statusStore;return{work:e,progress:t,lastExportMode:n}}render(){const{title:e,onClick:t,enabled:n,style:s,mode:a}=this.props,{work:l,progress:c,lastExportMode:u}=this.state,h=l===c,p=!h&&c>0&&u===a;return i.createElement(o.Button,{id:"export-button",title:h||u!==a?e:"Exporting",style:Object.assign({},d,s),enabled:h&&n,onClick:t},p&&i.createElement(r.ActivityIndicator,null))}}ExportButton.engineChangeKeys=c.EngineChangeFlags.ExportStatus,t.ExportButtonContainer=s.default(ExportButton),t.clickExportButton=function clickExportButton(){const e=document.querySelector("#export-button");e&&!e.disabled?e.click():a.default()},t.exportButtonVisible=function exportButtonVisible(){return null!==document.querySelector("#export-button")};const d={width:"100%",margin:"5px",padding:"0 0.6em",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(709),o=n(710);t.formatCode=function formatCode(e){return i.format(e,{parser:"typescript",plugins:[o],tabWidth:4,semi:!1,trailingComma:"es5"})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(435),r=n(63),s=n(3),a=n(64),l=n(714),c=n(2);t.TabContentCreationHeader=class TabContentCreationHeader extends i.Component{constructor(e){super(e),this.closeIfClickedOutside=e=>{this.isExpanded()&&(e.srcElement instanceof HTMLElement&&null!==e.srcElement.closest(".tabContentCreationHeader")||this.setExpanded(!1))},this.setType=e=>{const{createActionType:t}=this.props;t&&this.setState({type:t.types[e]})},this.setExpanded=(e=!0)=>{const{externalExpandedState:t}=this.props;t?t.setExpanded(e):this.setState({isExpanded:e})},this.isExpanded=()=>{const{externalExpandedState:e}=this.props;return e?e.isExpanded:this.state.isExpanded},this.collapsePanel=()=>this.setExpanded(!1),this.create=c.default.wrapHandler(()=>{this.isEnabled()&&(this.props.createAction(this.state.name,this.state.type),this.setState({name:""}),this.collapsePanel())}),this.onChangeName=e=>{this.setState({name:e})},this.isEnabled=()=>{const{createActionEnabled:e}=this.props;return!e||e(this.state.name)},this.state={isExpanded:!1,name:"",type:e.createActionType?e.createActionType.typeDefault:null}}componentDidMount(){document.addEventListener("mouseup",this.closeIfClickedOutside)}componentWillUnmount(){document.removeEventListener("mouseup",this.closeIfClickedOutside)}render(){const{title:e,createActionType:t,createActionTitle:n}=this.props,{name:s,type:c}=this.state;let f,y;return this.isExpanded()?f=i.createElement("div",{style:h,className:"tabContentCreationHeader"},i.createElement(o.default,{trapFocus:!0,blurOnUnmount:!0,allowTab:!0},i.createElement(r.TextInput,{type:r.TextInputType.Field,value:this.state.name,placeholder:"Name",onChange:this.onChangeName,className:"force-focus-border",autoFocus:!0,constantChange:!0,onEnter:this.create,onEscape:this.collapsePanel,style:{width:"100%"}}),t&&i.createElement(l.RadioButtons,{titles:t.types.map(e=>t.nameForType(e)),selectedIndex:t.types.indexOf(c),onSelect:this.setType,preventDefaultOnMouseDown:!0,style:{marginTop:12,width:"100%"}}),i.createElement(a.Button,{title:"string"==typeof n?n:n(s,c),primary:!0,onClick:this.create,enabled:this.isEnabled(),style:u}))):y=i.createElement(a.Button,{title:"New",onClick:this.setExpanded,style:m}),i.createElement("div",{style:d},i.createElement("div",{style:p},i.createElement("div",{style:g},e),y),f)}};const d={minHeight:36,position:"relative",flexShrink:0,bottom:0,backgroundColor:s.theme.tabContentAccessoryBackground,borderBottom:`1px solid ${s.theme.propertyPanelDivider}`,display:"flex",flexDirection:"column",width:"100%"},u={margin:0,marginTop:10,width:"100%",height:25,display:"block"},h={padding:"0px 15px 15px 15px"},p={padding:"6px 7px 7px 15px",width:"100%",display:"flex",alignItems:"center",justifyContent:"space-between",height:36},g={fontStyle:"normal",fontVariantCaps:"normal",fontWeight:500,fontStretch:"normal",fontSize:"11px",lineHeight:"11px",pointerEvents:"none",WebkitUserSelect:"none",height:"11px",color:s.theme.propertyPanelTitle,cursor:"default"},m={position:"absolute",padding:"6px 8px",lineHeight:"10px",fontWeight:400,top:6,right:7}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(2),r=n(170),s=new Map([[8,"backspace"],[9,"tab"],[13,"enter"],[16,"shift"],[18,"alt"],[17,"ctrl"],[32,"spacebar"],[27,"escape"],[37,"left"],[38,"up"],[39,"right"],[40,"down"],[46,"delete"],[91,"cmd"],[93,"cmd"]]),a=("N".charCodeAt(0),"M".charCodeAt(0),"Z".charCodeAt(0),["alt","ctrl","cmd","shift"]);t.default=class Keyboard extends i.Component{constructor(e,t){super(e,t),this.unmounting=!1,this.setFocusHelper=e=>{this.focusHelper=e,e&&!0===this.props.trapFocus&&this.focus()},this.setContainer=e=>{this.containerElement=e},this.keyDown=o.default.wrapKeyHandler(e=>{const{allowTab:t=!1}=this.props;this.updateModifierState(e,!0)&&e.preventDefault(),t||9!==e.keyCode||e.preventDefault()}),this.keyUp=o.default.wrapKeyHandler(e=>{e.nativeEvent.isTrusted?this.updateModifierState(e,!1):this.modifierState.forEach((e,t)=>this.setModifierState(t,!1))}),this.onWindowFocus=()=>{this.windowBlurred=!1},this.onWindowBlur=()=>{if(this.windowBlurred=!0,!this.focusHelper)return;const e=document.createEvent("HTMLEvents");e.initEvent("keyup",!0,!0),this.focusHelper.dispatchEvent(e)},this.onBlur=e=>{this.unmounting||!0===this.props.trapFocus&&this.followFocus(e.nativeEvent)},this.focus=()=>{if(!this.focusHelper)return;if(document.activeElement===this.focusHelper)return;this.focusHelper.focus();const e=location.hash;location.hash="#top",location.hash=e,"#top"===e&&history.back()},this.followFocus=e=>{null===e.relatedTarget?setTimeout(()=>{!0!==this.windowBlurred&&(null!==e.target&&e.target.removeEventListener("blur",this.followFocus),document.activeElement&&document.activeElement.getAttribute("data-keyboard")&&"true"===document.activeElement.getAttribute("data-focus-trap")?document.activeElement.addEventListener("blur",this.followFocus):this.props.trapFocus&&this.focus())},0):(null!==e.target&&e.target.removeEventListener("blur",this.followFocus),e.relatedTarget.addEventListener("blur",this.followFocus))},this.modifierState=new Map}componentWillMount(){window.addEventListener("blur",this.onWindowBlur),window.addEventListener("focus",this.onWindowFocus)}componentWillUnmount(){if(window.removeEventListener("blur",this.onWindowBlur),window.removeEventListener("focus",this.onWindowFocus),this.props.blurOnUnmount){this.unmounting=!0;const e=document.activeElement;e&&this.containerElement&&this.containerElement.contains(e)&&e.blur()}}render(){const{trapFocus:e,children:t}=this.props;return i.createElement("div",{className:"Keyboard",onKeyDown:this.keyDown,onKeyUp:this.keyUp,ref:this.setContainer},i.createElement("a",{ref:this.setFocusHelper,onBlur:this.onBlur,href:"#","data-keyboard":!0,"data-focus-trap":e}),t)}componentDidUpdate(e){!1===e.trapFocus&&!0===this.props.trapFocus&&this.focus()}updateModifierState(e,t){let n=s.get(e.keyCode),i=!1;return void 0!==n&&(r.isWindows()&&("ctrl"===n?n="cmd":"cmd"===n&&(n="ctrl")),i=this.setModifierState(n,t)),this.setModifierState("shift",e.shiftKey),this.setModifierState("alt",e.altKey),this.setModifierState("cmd",r.isWindows()?e.ctrlKey:e.metaKey),this.setModifierState("ctrl",r.isWindows()?e.metaKey:e.ctrlKey),i}setModifierState(e,t){const{onModifierChange:n,modifiers:i=a}=this.props;if(-1===i.indexOf(e))return!1;const o=this.modifierState.get(e);return this.modifierState.set(e,t),n&&t!==o&&n(e,t),!0}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(121),o={numeric:!0,sensitivity:"base"};class Folder{constructor(e,t){this.path=e,this.parent=t,this.folders=[],this.files=[],this.name=i.filename(e),this._expanded=Folder.expandedCache[e]||!1}walk(e,t=0,n=!0){!function folderSort(e){e.sort((e,t)=>e.name.localeCompare(t.name,void 0,o))}(this.folders),function fileSort(e){e.sort((e,t)=>e.sortName!==t.sortName?e.sortName.localeCompare(t.sortName,void 0,o):e.path.localeCompare(t.path,void 0,o))}(this.files);const i=n&&this.isExpanded();this.folders.forEach(n=>{e(n,t,i),n.walk(e,t+1,i)}),this.files.forEach(n=>e(n,t,i))}isEmpty(){return 0===this.folders.length&&0===this.files.length}isExpanded(){return!this.parent||this._expanded}toggleExpanded(){this._expanded=!this._expanded,Folder.expandedCache[this.path]=this._expanded}getSubFolder(e){return this.folders.find(t=>t.name===e)}createFolders(e){let t=this;return e.forEach(e=>{t=t.createOrGetFolder(e)}),t}createOrGetFolder(e){let t=this.getSubFolder(e);if(t)return t;const n=i.pathjoin(this.path,e);return t=new Folder(n,this),this.folders.push(t),t}addFile(e){this.files.indexOf(e)>=0||this.files.push(e)}remove(){if(!this.parent)return;const e=this.parent.folders;e.splice(e.indexOf(this),1)}removeFile(e){const t=this.getFolders(e.folders).reverse()[0];t&&t.files.splice(t.files.indexOf(e),1)}getFolder(e,t=0){const n=e[t];if(!n)return this;const i=this.folders.find(e=>e.name===n);return i?i.getFolder(e,t+1):void 0}getFolders(e){let t=this;const n=e.map(e=>{if(!t)return;const n=t.getSubFolder(e);return n?t=n:void 0});return n.unshift(this),n}reset(){this.folders.length=0,this.files.length=0}}Folder.expandedCache={},t.Folder=Folder},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(14),o=n(146),r=n(15),s=n(722),a=n(6),l=n(102),c=n(2);let d="";const u=new Map;function maybeResetErrors(){return d!==window.componentHash&&(l.log.debug("clearing errors"),u.clear(),d=window.componentHash,!0)}function updateFileMarkers(e,t){const n=o.Uri.file(e),i=o.editor.getModel(n);i&&updateModelMarkers(i,t)}function updateModelMarkers(e,t){const n=t.map(e=>({range:new o.Range(e.lineNumber,1,e.lineNumber,1),options:{isWholeLine:!0,className:"runtimeErrorLine"}})),i=e;i.__decorations=e.deltaDecorations(i.__decorations||[],n);const r=e.getLineCount();o.editor.setModelMarkers(e,"runtime",t.filter(e=>e.lineNumber>0&&e.lineNumber<=r).map(t=>{const n=e.getLineContent(t.lineNumber)||"",i=n.trim(),o=n.indexOf(i)+1;return{code:"runtime",severity:8,message:t.message,startLineNumber:t.lineNumber,startColumn:o,endLineNumber:t.lineNumber,endColumn:o+i.length}}))}function updateAllModelMarkers(){o.editor.getModels().forEach(e=>{const t=e.uri.path.slice(1);u.get(t)||updateModelMarkers(e,[])});for(const[e,t]of u)updateFileMarkers(e,t)}function errorHandler(e){let t=e.fileName;if(!t)return;t.startsWith("../code/")?t=t.slice("../code/".length):t.startsWith("./code/")?t=t.slice("./code/".length):t.startsWith("./")&&(t=t.slice("./".length)),maybeResetErrors();let n=u.get(t);n||(n=[],u.set(t,n)),n.find(t=>t.lineNumber===e.lineNumber&&t.message===e.message)||(n.push(e),updateFileMarkers(t,n))}function windowErrorHandler(e){errorHandler(s.translateErrorEvent(e))}t.updateModelErrors=function updateModelErrors(e){const t=e.uri.path.slice(1);updateModelMarkers(e,u.get(t)||[])},t.installErrorManager=function installErrorManager(){c.default.changes.observe(a.EngineChangeFlags.ToolStore,()=>{maybeResetErrors()&&setTimeout(updateAllModelMarkers,500)}),r.getIpcRenderer().on(i.PreviewErrors,e=>{e.forEach(e=>errorHandler(e))}),window.addEventListener("error",windowErrorHandler)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(1),r=n(24),s=n(2),a=n(143),l=n(47),c=n(139),d=n(77),u=n(287),h=n(221),p=n(735),g=n(736),m=n(737),f=n(738);t.ComponentsPanel=class ComponentsPanel extends i.Component{constructor(){super(...arguments),this.state={search:"",deletedPackages:[]},this.setInputField=e=>{this.searchElement=e},this.onSearchChange=e=>{this.setState({search:e})},this.onBlur=s.default.wrapHandler((e,t)=>{t&&s.default.exitTool()}),this.previouslyOutdatedPackages=[],this.deletePackage=s.default.wrapHandler(e=>{const{deletedPackages:t}=this.state;-1===t.indexOf(e)&&this.setState({deletedPackages:[...t,e]}),a.projectServerConnection.removePackage(e)}),this.previousLocalMasters=[]}searchOptions(e){var t;if(e)return{value:this.state.search,onSearch:this.onSearchChange,position:"bottom",placeholder:"Filter",detail:(t=this.props.viewType,i.createElement(l.SegmentedControl,{titles:["Show as List","Show as Grid"],icons:["icon-components-list","icon-components-grid"],selectedIndex:t===c.ComponentPanelViewType.List?0:1,onSelect:y,style:{marginRight:-1}}))}}componentDidMount(){this.searchElement&&this.searchElement.focus()}shouldComponentUpdate(e,t){if(!o.isEqual(this.state,t))return!0;const n=this.props;for(const r of Object.keys(e))if("tree"!==r&&!o.isEqual(n[r],e[r]))return!0;const i=e.tree.getLocalMasterComponents();return!o.isEqual(i,this.previousLocalMasters)&&(this.previousLocalMasters=i,!0)}render(){const{tree:e,viewType:t,projectURL:n,updatingPackages:o,outdatedPackages:s,componentHash:a,expandedPackages:l,expandedCategories:c}=this.props,{search:y}=this.state,b=e.getLocalMasterComponents();u.setPrerenderedComponentsVersion(a);const k=[],S=r.componentLoader.localPackageIdentifier();let C=[];S&&(C=r.componentLoader.componentsForPackage(S).filter(showInComponentsPanel));let x,w,T=filterComponentsBySearch([...b,...C],y);(T=sortComponents(T)).length>0&&k.push(i.createElement(f.PackagePanel,{key:"local-package",projectURL:n,viewType:t,masters:b,components:T,expandedPackages:l,expandedCategories:c,packageIdentifier:null})),function externalPackages(e,t,n,i,o){const s=r.componentLoader.packageIdentifiers(),a=[],l=[],c=[];for(const d of s){if(-1!==t.indexOf(d))continue;if(d===e||"framer"===d)continue;if(isDevice(d))continue;const s=n.find(e=>e.name===d);let u=r.componentLoader.componentsForPackage(d).filter(showInComponentsPanel);const h=r.componentLoader.packageDisplayName(d),p=o&&h&&-1!==h.toLowerCase().indexOf(o.toLowerCase());if(p||(u=filterComponentsBySearch(u,o)),u=sortComponents(u),o&&0===u.length&&!p)continue;const g={packageId:d,outdatedInfo:s,components:u};s?(a.push(g),addToOutdated(d,i)):hasBeenOutdated(d,i)?l.push(g):c.push(g)}return[...a,...l,...c]}(S,this.state.deletedPackages,s,this.previouslyOutdatedPackages,y).forEach(({packageId:e,outdatedInfo:r,components:s})=>{k.push(i.createElement(f.PackagePanel,{key:e,projectURL:n,viewType:t,components:s,expandedPackages:l,expandedCategories:c,packageIdentifier:e,masters:[],outdatedInfo:r,isUpdating:-1!==o.indexOf(e),deletePackage:this.deletePackage}))});let P=!0;return 0===k.length?(w=y.length>0?i.createElement(m.NoResultsState,null):i.createElement(g.EmptyState,null),P=y.length>0):x=i.createElement("div",{className:d.panelScroller,style:v},k),i.createElement(h.TabContent,{search:this.searchOptions(P),header:i.createElement(p.CreateComponentHeader,null),placeholder:w,className:"componentsPanel"},x)}};const y=s.default.wrapHandler(e=>{s.default.documentSettings.setComponentPanelViewType(0===e?c.ComponentPanelViewType.List:c.ComponentPanelViewType.Grid)});const v={flexGrow:1,overflow:"auto",overflowX:"hidden",overflowY:"overlay",WebkitOverflowScrolling:"touch",display:"flex",justifyContent:"flex-start",flexDirection:"row",flexWrap:"wrap",alignItems:"stretch",alignContent:"flex-start",marginBottom:-1,marginTop:-1};function hasBeenOutdated(e,t){return-1!==t.indexOf(e)}function addToOutdated(e,t){hasBeenOutdated(e,t)||t.push(e)}function isDevice(e){return e.startsWith("@framer/framer.device-")}function filterComponentsBySearch(e,t){const n=t.trim().toLocaleLowerCase();return n?e.filter(e=>e.name&&-1!==e.name.toLowerCase().indexOf(n)):e}function sortComponents(e){return e.sort((e,t)=>null===e.name?-1:null===t.name?1:e.name.toLowerCase()<t.name.toLowerCase()?-1:1)}function showInComponentsPanel(e){return(!r.isErrorDefinition(e)||"./canvas.tsx"!==e.file)&&("component"===e.type||"master"===e.type)}t.sortComponents=sortComponents,t.showInComponentsPanel=showInComponentsPanel},function(e,t,n){"use strict";function componentCategory(e){const{name:t,file:n}=e;if(null===t)return null;let[i,o]=t.split("/");if(!o&&n){const e=n.split("/");e.length>2&&(o=i,i=e[1])}return isNonEmptyString(i)&&isNonEmptyString(o)?i.trim():null}function isNonEmptyString(e){return!!e&&!!e.trim()}Object.defineProperty(t,"__esModule",{value:!0}),t.groupComponentsByCategory=function groupComponentsByCategory(e){const t={},n=[];for(const i of e){const e=componentCategory(i);e?(t[e]||(t[e]=[]),t[e].push(i)):n.push(i)}return{categorizedComponents:t,uncategorizedComponents:n}},t.componentCategory=componentCategory},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(10),r=n(743),s=n(5),a=n(6),l=n(2);class NodeLinksC extends i.Component{static calculateState(){let e=l.default.toolStore.state.tool;switch(e){case s.Tools.NavigationLink:case s.Tools.SlotConnect:break;default:e=null}return{tool:e,codeComponents:l.default.treeStore.codeComponents,linkNodes:l.default.treeStore.navigationLinkNodes}}render(){const{highlight:e,selection:t,zoom:n,background:o}=this.props,{codeComponents:s,linkNodes:a,tool:c}=this.state;return i.createElement(r.NodeLinks,{tree:l.default.tree,highlight:e,selection:t,zoom:n,background:o,tool:c,codeComponents:s,linkNodes:a})}}NodeLinksC.engineChangeKeys=a.EngineChangeFlags.Arrows|a.EngineChangeFlags.Tool,t.NodeLinksContainer=o.default(NodeLinksC)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(3),r=n(46),s=n(2);function mouseDownHandler(e){return s.default.wrapMouseHandler(()=>s.default.setResizeTool(e))}t.ResizeHandle=function ResizeHandle({frame:e,framePoint:n,framePoints:s,visibleMidPoint:l,isComponent:c,hidden:d}){const{fx:u,fy:h}=n,p=Math.round(u*(e.width-1)),g=Math.round(h*(e.height-1)),m=c?o.theme.layerPanelMasterOrReplica:o.theme.resizeHandleOutline,f=t.resizeHandlesStyle(p,g,m,{opacity:d?0:1,cursor:r.resizing(n,s)});return l||(.5===u&&(f.width=e.width,f.transform=`translate(0px, ${g-4.5}px) translateZ(0)`,f.border="none",f.backgroundColor="transparent"),.5===h&&(f.height=e.height,f.transform=`translate(${p-4.5}px, 0px) translateZ(0)`,f.border="none",f.backgroundColor="transparent")),i.createElement("div",{style:f,onMouseDown:mouseDownHandler(n),onMouseMove:a})};const a=s.default.wrapMouseHandler(e=>{s.default.setHighlight(),e.stopPropagation()});t.resizeHandlesStyle=(e,t,n,i)=>Object.assign({position:"absolute",backgroundColor:o.theme.resizeHandle,width:9,height:9,border:`${n} 1px solid`,borderRadius:8,transform:`translate(${e}px, ${t}px) translateZ(0) translateX(-5px) translateY(-5px)`,pointerEvents:"auto"},i)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(1),r=n(3),s=n(19),a=n(11);t.default=class ShapeHighlight extends i.Component{render(){const{tree:e,node:t,zoom:n,onContextMenu:l}=this.props,c=a.convertPathToCanvas(e,t,t.calculatedPaths(),n,!0),d=s.default.boundingBox(c);let{x:u,y:h}=d;const{width:p,height:g}=d;u=Math.round(u),h=Math.round(h);const m=o.toSVGPath(c,{x:-u,y:-h}),f={position:"absolute",left:u,top:h},y={position:"absolute",width:p,height:g,overflow:"visible",fill:"transparent",strokeWidth:1,stroke:r.theme.tint};return i.createElement("div",{className:"ShapeHighlight",style:f,onContextMenu:l},i.createElement("svg",{width:"100%",height:"100%",style:y,key:t.id+"overlay",strokeLinecap:t.lineCap,strokeLinejoin:t.lineJoin},i.createElement("path",{d:m})))}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(28),o=n(65),r=n(0),s=n(0),a=n(178),l=n(767),c=()=>{};function updateFieldHeight(e){for(e.rows=1;e.scrollHeight-e.offsetHeight>0&&e.rows<12;)e.rows=e.rows+1}function isValidValue(e){return e.trim().length>0}t.FeedbackCommentForm=s.forwardRef(({disabled:e=!1,defaultValue:t="",onSubmit:n=c,onCancel:o=c},d)=>{const[u,h]=s.useState(isValidValue(t)),p=s.useRef(null),g=s.useCallback(()=>{const e=p.current;e&&isValidValue(e.value)&&(n(e.value.trim()),e.value="")},[n]),m=s.useCallback(e=>{!function isSubmitKey(e){if("Enter"!==e.key||e.repeat)return;if(i.experiments.isOn("feedbackJustSendIt"))return!0;return e.metaKey||e.ctrlKey}(e)?"Escape"===e.key&&o():(e.preventDefault(),g())},[g,o]),f=s.useCallback(e=>{e.preventDefault(),g()},[g]);return s.useEffect(()=>{if(p.current){const e=p.current.value;p.current.setSelectionRange(e.length,e.length),p.current.focus()}},[]),s.useLayoutEffect(()=>{p.current&&updateFieldHeight(p.current)}),s.useImperativeHandle(d,()=>({focus:()=>p.current&&p.current.focus()}),[]),r.createElement("form",{className:l.container,onSubmit:f,style:{WebkitClipPath:a.Squircle.clipPathWithRadius(23,3)}},r.createElement("textarea",{ref:p,className:l.textarea,rows:1,disabled:e,defaultValue:t,placeholder:e?"Archived Thread":"Write Comment",onInput:e=>{const t=e.currentTarget;updateFieldHeight(t),h(isValidValue(t.value))},onKeyDown:m}),r.createElement("button",{className:l.submit,type:"submit",disabled:e||!u},"Post"))}),t.EditFeedbackCommentForm=s.forwardRef((e,n)=>r.createElement("div",{className:l.editing},r.createElement(t.FeedbackCommentForm,Object.assign({ref:n},e)))),t.FloatingFeedbackCommentForm=s.forwardRef((e,n)=>r.createElement(o.motion.div,{initial:{scale:.8},animate:{scale:1},className:l.floating,style:{transformOrigin:"0% 100%"}},r.createElement(t.FeedbackCommentForm,Object.assign({ref:n},e))))},function(e,t,n){"use strict";var i=this&&this.__rest||function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(i=Object.getOwnPropertySymbols(e);o<i.length;o++)t.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(e,i[o])&&(n[i[o]]=e[i[o]])}return n};Object.defineProperty(t,"__esModule",{value:!0});const o=n(0);t.FileDropZone=o.forwardRef((e,t)=>{var{children:n,onDragEnter:r,onDragLeave:s,onDrop:a}=e,l=i(e,["children","onDragEnter","onDragLeave","onDrop"]);const c=o.useRef(null),d=t||c;return function useFileDrop(e,t){const n=o.useRef(e);n.current=e;const i=o.useRef(0);o.useEffect(()=>{const e=t.current;if(e)return e.addEventListener("dragover",onDragOver),e.addEventListener("dragenter",onDragEnter),e.addEventListener("dragleave",onDragLeave),e.addEventListener("drop",onDrop),()=>{e.removeEventListener("dragover",onDragOver),e.removeEventListener("dragenter",onDragEnter),e.removeEventListener("dragleave",onDragLeave),e.removeEventListener("drop",onDrop)};function onDragOver(e){e.dataTransfer&&containsNativeFiles(e)&&(e.preventDefault(),e.stopPropagation(),e.dataTransfer.dropEffect="copy")}function onDragEnter(e){e.dataTransfer&&containsNativeFiles(e)&&(i.current+=1,e.preventDefault(),e.stopPropagation(),e.dataTransfer.dropEffect="copy",n.current.onDragEnter&&n.current.onDragEnter(e))}function onDragLeave(e){i.current=Math.max(0,i.current-1),0===i.current&&n.current.onDragLeave&&n.current.onDragLeave(e)}function onDrop(e){e.dataTransfer&&containsNativeFiles(e)&&(e.preventDefault(),e.stopPropagation(),n.current.onDragLeave&&n.current.onDragLeave(e),n.current.onDrop(e))}},[t])}({onDragEnter:r,onDragLeave:s,onDrop:a},d),o.createElement("div",Object.assign({ref:d},l),n)});const r="Files";function containsNativeFiles(e){return!!e.dataTransfer&&-1!==e.dataTransfer.types.indexOf(r)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(2),r=n(5),s=n(52);t.Tool=class Tool extends i.Component{constructor(){super(...arguments),this.onMouseDown=o.default.wrapHandler(e=>{const{onMouseDown:t}=this.props;t&&t(e)}),this.onClick=o.default.wrapMouseHandler(()=>{const{onMouseDown:e,tool:t}=this.props;!e&&t&&o.default.setToolEnum(t)}),this.onMouseEnter=o.default.wrapMouseHandler(e=>{const t=e.target;if(!t||!this.props.title)return;const n=t.closest(".toolItem");if(!n)return;const i=n.getBoundingClientRect(),s={x:i.left+i.width/2,y:i.top-14},{title:a,accelerator:l}=this.props;let c=a;l&&(c+=` (${l})`),o.default.setTooltip(c,s,r.ToolTipArrow.Bottom,!1)}),this.onMouseLeave=o.default.wrapMouseHandler(()=>{this.props.title&&o.default.setTooltip(null,null,r.ToolTipArrow.Bottom)})}render(){const{title:e,name:t,active:n,tool:o,selectedTool:r,innerRef:d}=this.props,u=n||void 0!==o&&o===r;return i.createElement("div",{className:"toolItem",ref:d,style:a,onClick:this.onClick,onMouseDown:this.onMouseDown,onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave},i.createElement(s.Icon,{name:t,active:!1,title:e,width:21,height:21,containsActive:!1,style:l}),u&&i.createElement("div",{style:c}))}};const a={position:"relative",fontSize:"11px",lineHeight:"35px",willChange:"transform",width:31,height:31,display:"flex",justifyContent:"center",alignItems:"center"},l={width:21,height:21,pointerEvents:"none",backgroundRepeat:"repeat"},c={position:"absolute",bottom:0,left:8,width:15,height:1,background:"#fff"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(1),r=n(2),s=n(58),a=n(5),l=n(796),c=n(52),d=n(445),u=n(44);function noop(){}t.ToolbarMenu=function ToolbarMenu({title:e,icon:t,items:n,enabled:h}){const[p,g]=i.useState(!1),m=i.useRef(null),f=i.useRef(null),y=r.default.wrapHandler(()=>{if(!f.current||!h)return;g(!0);const e=f.current.getBoundingClientRect(),t={x:e.left+e.width/2,y:e.top-14};r.default.setTooltip(null,null,a.ToolTipArrow.Bottom),r.default.toolStore.setPopupMenu({point:t,items:n})}),v=()=>{g(!1),requestAnimationFrame(r.default.wrapHandler(()=>r.default.toolStore.setPopupMenu(null)))};i.useEffect(()=>{!h&&p&&v()},[h,p]);const b=r.default.wrapMouseHandler(t=>{if(!f.current)return;const n=f.current.getBoundingClientRect(),i={x:n.left+n.width/2,y:n.top-14};r.default.setTooltip(e,i,a.ToolTipArrow.Bottom,!1)}),k=r.default.wrapMouseHandler(()=>{r.default.setTooltip(null,null,a.ToolTipArrow.Bottom)});return i.useEffect(()=>{function collapseIfNeeded(){!p||m.current&&!m.current.dragggedPassedThreshold?m.current=null:v()}function escape(e){u.default.isKey(e,u.default.Key.escape)&&(collapseIfNeeded(),e.preventDefault())}return window.addEventListener("mouseup",collapseIfNeeded),window.addEventListener("keydown",escape),()=>{window.removeEventListener("mouseup",collapseIfNeeded),window.removeEventListener("keydown",escape)}}),i.createElement(l.MouseTracker,{onDragStart:e=>{p?v():(m.current={point:e,dragggedPassedThreshold:!1},y())},onDrag:e=>{m.current&&(m.current.dragggedPassedThreshold||(m.current.dragggedPassedThreshold=o.Point.distance(m.current.point,e)>4))},onDragEnd:()=>{m.current&&m.current.dragggedPassedThreshold&&v()},onMouseEnter:b,onMouseLeave:k,delta:!0,style:{display:"flex",alignItems:"center",opacity:h?1:.5}},i.createElement(d.Tool,{title:"",name:t,selectedTool:s.Tools.Highlight,tool:s.Tools.CreateStackComponent,onMouseDown:noop,innerRef:f}),i.createElement(c.Icon,{name:"toolbar-chefron",active:!1,width:7,height:7,containsActive:!1,style:{marginRight:5,marginLeft:-4,transform:p?"":"rotate(180deg)",transition:"transform .1s",willChange:"transform"}}))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(4);t.getStyleSourceNodeFromVectorNodes=function getStyleSourceNodeFromVectorNodes(e){for(const t of e){if(!(t instanceof i.ShapeGroupNode))return t;{const e=getStyleSourceNodeFromVectorNodes(t.children);if(null!==e)return e}}return null}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(3),r={position:"relative",padding:"8px 10px 10px 10px",height:25,color:o.theme.propertyPanelTitle,fontSize:"11px",lineHeight:"1em",cursor:"default"},s={float:"right",paddingTop:2,color:o.theme.sectionHeaderPopUp,fontWeight:300,fontSize:"9px",lineHeight:"1em"},a=e=>({position:"relative",borderBottom:`1px solid ${o.theme.propertyPanelDivider}`,padding:"7px 10px 8px 22px",height:27,color:o.theme.toolSectionHeaderText,fontWeight:500,fontSize:"11px",lineHeight:"1em",cursor:"default",background:`no-repeat 10px 50% ${o.theme.backgroundImage(`icon-triangle-${e?"down":"right"}`)}`,textTransform:"capitalize"}),l={borderBottom:`1px solid ${o.theme.propertyPanelDivider}`,paddingBottom:6,paddingTop:2};t.FramerSizeRowContainer=class FramerSizeRowContainer extends i.Component{render(){return i.createElement("div",{style:l},this.props.children)}};t.FrameSizeCategoryRow=class FrameSizeCategoryRow extends i.Component{constructor(){super(...arguments),this.onClick=()=>{const{onClick:e,title:t,open:n}=this.props;e&&e(t,n)}}render(){const{title:e,open:t}=this.props;return i.createElement("div",{style:a(t),onClick:this.onClick},e)}};t.FrameSizeRow=class FrameSizeRow extends i.Component{constructor(){super(...arguments),this.onClick=()=>{const{onClick:e,size:t,type:n}=this.props;e&&t&&e(t,n)}}render(){const{title:e,size:t}=this.props,n=t?`${t.width}${t.height}`:"";return i.createElement("div",{style:r,onClick:this.onClick},e,i.createElement("span",{style:s},n))}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(52),r=n(3);t.default=class AlignmentRow extends i.PureComponent{constructor(){super(...arguments),this.left=()=>{this.props.alignAction("Left")},this.center=()=>{this.props.alignAction("Center")},this.right=()=>{this.props.alignAction("Right")},this.top=()=>{this.props.alignAction("Top")},this.middle=()=>{this.props.alignAction("Middle")},this.bottom=()=>{this.props.alignAction("Bottom")},this.vertical=()=>{this.props.distributeAction("Vertically")},this.horizontal=()=>{this.props.distributeAction("Horizontally")}}render(){const{alignActionsEnabled:e,distributeActionsEnabled:t}=this.props;return i.createElement("div",{style:s},i.createElement("div",{style:a},i.createElement(o.Icon,{style:l,name:"align-1-left",width:24,height:20,active:e,title:"Align Left",onClick:this.left}),i.createElement(o.Icon,{style:l,name:"align-2-center",width:24,height:20,active:e,title:"Align Center",onClick:this.center}),i.createElement(o.Icon,{style:l,name:"align-3-right",width:24,height:20,active:e,title:"Align Right",onClick:this.right}),i.createElement(o.Icon,{style:l,name:"align-4-top",width:24,height:20,active:e,title:"Align Top",onClick:this.top}),i.createElement(o.Icon,{style:l,name:"align-5-middle",width:24,height:20,active:e,title:"Align Middle",onClick:this.middle}),i.createElement(o.Icon,{style:l,name:"align-6-bottom",width:24,height:20,active:e,title:"Align Bottom",onClick:this.bottom}),i.createElement(o.Icon,{style:l,name:"align-7-vertical",width:24,height:20,active:t,title:"Distribute Horizontally",onClick:this.horizontal}),i.createElement(o.Icon,{style:l,name:"align-8-horizontal",width:24,height:20,active:t,title:"Distribute Vertically",onClick:this.vertical})))}};const s={width:"100%",backgroundColor:r.theme.propertyPanelHeaderBackground,borderBottom:`1px solid ${r.theme.propertyPanelDivider}`},a={width:"100%",height:36,display:"flex",justifyContent:"center",alignItems:"center"},l={marginLeft:1,marginRight:1}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(1),r=n(292),s=n(52),a=n(3),l=n(1),c=n(2);t.default=class NumberTicker extends i.Component{constructor(){super(...arguments),this.state={dragStart:null},this.isDragging=!1,this.autoIncrementing=!1,this.shiftKey=!1,this.cancelInterval=()=>{window.clearTimeout(this.intervalId)},this.increaseValue=c.default.wrapHandler(()=>{this.autoIncrementing=!0,this.stepValue(this.stepSize()),this.value=this.props.value||0,this.state.dragStart&&!this.isDragging&&(this.intervalId=window.setTimeout(this.increaseValue,50))}),this.decreaseValue=c.default.wrapHandler(()=>{this.autoIncrementing=!0,this.stepValue(-this.stepSize()),this.value=this.props.value||0,this.state.dragStart&&!this.isDragging&&(this.intervalId=window.setTimeout(this.decreaseValue,50))}),this.onDragStart=c.default.wrapHandler((e,t)=>{c.default.beginUndoGroup(),this.value=this.props.value||0,this.shiftKey=t,this.setState({dragStart:e}),e.y<.5?this.intervalId=window.setTimeout(this.increaseValue,250):this.intervalId=window.setTimeout(this.decreaseValue,250)}),this.onDrag=c.default.wrapHandler((e,t)=>{this.shiftKey=t;const{dragStart:n}=this.state;if(n&&(!this.isDragging&&l.Point.distance(e,n)>.1&&(this.isDragging=!0,this.cancelInterval()),this.isDragging)){this.setState(Object.assign({},this.state,{cursor:this.getCursor()}));const i=Math.round(-11*(e.y-n.y));let o=this.value+i*this.stepSize();t&&(o=10*Math.round(o/10)),this.updateValue(o)}}),this.onDragEnd=c.default.wrapHandler((e,t)=>{this.shiftKey=t,this.autoIncrementing||this.isDragging||e.x>=0&&e.x<=1&&e.y>=0&&e.y<=1&&(e.y<.5?this.stepValue(this.stepSize()):this.stepValue(-this.stepSize())),this.reset(),this.setState({dragStart:null}),c.default.endUndoGroup(),c.default.clearCursor()})}componentWillReceiveProps(e){!1===e.enabled&&!0===this.props.enabled&&(this.cancelInterval(),this.isDragging=!1,null!==this.state.dragStart&&(c.default.endUndoGroup(),c.default.clearCursor()),this.setState({dragStart:null}),this.shiftKey=!1)}componentWillUnmount(){this.reset(),null!==this.state.dragStart&&c.default.endUndoGroup()}updateValue(e){const{value:t,onChangeValue:n,maxValue:i,minValue:o}=this.props;let r=e;void 0!==i&&(r=Math.min(r,i)),void 0!==o&&(r=Math.max(r,o)),t!==r&&n(r)}stepSize(){const{step:e}=this.props,t=e||1;return this.shiftKey?10*t:t}stepValue(e){const{value:t}=this.props;this.updateValue((t||0)+e)}getCursor(){const{minValue:e,maxValue:t,value:n}=this.props;return void 0!==e&&e===n?"n-resize":void 0!==t&&t===n?"s-resize":"ns-resize"}reset(){this.autoIncrementing=!1,this.isDragging=!1,this.setState(Object.assign({},this.state,{cursor:void 0})),this.cancelInterval()}render(){const{visible:e,enabled:t,offset:n}=this.props;if(!t)return null;const o=this.isDragging?"":"inputButton";return i.createElement(r.default,{style:getStyle(this.isDragging,e,n),limit:!1,onDragStart:this.onDragStart,onDrag:this.onDrag,onDragEnd:this.onDragEnd,cursor:this.state.cursor},i.createElement(s.Icon,{className:o,active:!1,containsActive:!1,height:11,width:12,name:"ticker-up",style:this.isDragging?m:p}),i.createElement(s.Icon,{className:o,active:!1,containsActive:!1,height:11,width:12,name:"ticker-down",style:this.isDragging?f:g}))}};const d={position:"absolute",top:0,right:5,bottom:0,width:13,borderRadius:"0 3px 3px 0",backgroundColor:"transparent"},u=Object.assign({},d,{cursor:"ns-resize"}),h=Object.assign({},d,{visibility:"hidden"});function getStyle(e,t,n){if(!t)return h;let i=e?u:d;return o.isFiniteNumber(n)&&(i=Object.assign({},i,{right:(o.finiteNumber(d.right)||0)+n})),i}const p={marginTop:1,borderTopRightRadius:2,borderLeft:`1px solid ${a.theme.propertyPanelInputBorder}`},g={borderBottomRightRadius:2,borderLeft:`1px solid ${a.theme.propertyPanelInputBorder}`},m=Object.assign({},p,{backgroundColor:a.theme.propertyPanelInputBackground}),f=Object.assign({},g,{backgroundColor:a.theme.propertyPanelInputBackground})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=/^[\d.+\-*\/]+$/,o=/^(\d+(?:\.\d+)?|\.\d+|[-+\/*])+$/;t.evalMath=function evalMath(e){const t=e.replace(/\s/g,"");if(!i.test(t)||!o.test(t))return NaN;const n=t.split(/([^\d.])/).join(" ");try{const e=Function(`return ${n}`)();return"number"==typeof e?e:NaN}catch(r){}return NaN}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(3);t.IconState=class IconState extends i.PureComponent{render(){const{names:e,activeIndex:t,width:n,height:r,title:s,style:a,onClick:l,hideImage:c}=this.props,d=e.map(e=>o.theme.backgroundImage(e)).join(", "),u=e.map((e,i)=>i===t?"center center":`${2*n}px ${2*r}px`).join(", "),h=Object.assign({backgroundImage:void 0!==c&&c?void 0:d,backgroundPosition:u,backgroundRepeat:"no-repeat, no-repeat",overflow:"hidden",width:n,height:r},a);return i.createElement("div",{title:s,style:h,onClick:l})}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(169),r=n(435),s=n(3),a=n(13),l=n(44),c=n(2),d=n(147),u="popover-input";function stopPropagation(e){e.stopPropagation()}t.Popover=class Popover extends i.Component{constructor(){super(...arguments),this.shouldClose=!0,this.state={isContentDisplayed:!1},this.inputElement=null,this.setInputElement=e=>{this.inputElement=e},this.focusInput=()=>{window.setTimeout(()=>{this.inputElement&&this.inputElement.focus()},0)},this.close=()=>{if(!this.isOpen())return;const{externalOpenCloseAction:e,externalIsOpenState:t,onClose:n}=this.props;void 0!==e&&void 0!==t?e(!1):this.setState({isContentDisplayed:!1}),n&&n()},this.isOpen=()=>{const{externalIsOpenState:e}=this.props;return void 0!==e?e:this.state.isContentDisplayed},this.openCloseAction=()=>{if(!this.props.enabled)return;const{externalOpenCloseAction:e}=this.props,t=this.isOpen();if(t&&this.focusInput(),void 0!==e)e(!t);else{const e=!t;this.setState({isContentDisplayed:e})}const{onOpen:n,onClose:i}=this.props;n&&!t&&n(),i&&t&&i(),this.shouldClose=!0},this.onInputClick=e=>{e.preventDefault(),this.openCloseAction()},this.block=e=>{e.stopPropagation()},this.onInputKeyDown=e=>{const t=e.nativeEvent.target,n=38===e.keyCode,i=40===e.keyCode,o=32===e.keyCode;if((n||i||o)&&t.className===u)this.openCloseAction(),e.preventDefault();else if(l.default.isKey(e,l.default.Key.escape)&&t.className===u)t.blur();else{const{onInputKeyDown:t}=this.props;t&&t(e)}},this.onKeyDown=e=>{this.props.onKeyDown?this.props.onKeyDown(e):l.default.isKey(e,l.default.Key.escape)&&(this.close(),e.stopPropagation())},this.keyModifierChange=(e,t)=>{c.default.mouseStore.setModifierByName(e,t)},this.closePickerIfClickedOutside=e=>{const t=e.srcElement&&null!==e.srcElement.closest(".propertyPanel");(!1!==this.props.shouldCloseWhenClickedOutside||t)&&(this.shouldClose?this.close():this.shouldClose=!0)},this.shouldNotClose=()=>{this.shouldClose=!1}}componentWillReceiveProps(e){!1===e.externalIsOpenState&&!0===this.props.externalIsOpenState&&this.inputElement&&this.inputElement.focus()}componentDidUpdate(e,t){const{externalIsOpenState:n}=this.props;this.isOpen()&&(d.popoverPortal.updateOffset(),d.popoverPortal.setPopoverRef(this)),void 0!==n&&void 0!==e.externalIsOpenState?(n&&!e.externalIsOpenState&&document.addEventListener("mousedown",this.closePickerIfClickedOutside),!n&&e.externalIsOpenState&&document.removeEventListener("mousedown",this.closePickerIfClickedOutside)):(this.state.isContentDisplayed&&!t.isContentDisplayed&&document.addEventListener("mousedown",this.closePickerIfClickedOutside),!this.state.isContentDisplayed&&t.isContentDisplayed&&document.removeEventListener("mousedown",this.closePickerIfClickedOutside))}componentWillUnmount(){d.popoverPortal.popoverWillUnmount(this),document.removeEventListener("mousedown",this.closePickerIfClickedOutside);const{externalOpenCloseAction:e}=this.props;e&&setTimeout(()=>e(!1))}render(){const{enabled:e,preview:t,inputWidth:n,externalIsOpenState:l,onContentMouseDown:c,allowTab:m,style:f}=this.props,{isContentDisplayed:y}=this.state,v=void 0!==l?l:y,b=this.props.inputHeight||24,k=Object.assign({border:e?`1px solid ${s.theme.propertyPanelInputBorder}`:`1px solid ${s.theme.propertyPanelInputBorderInactive}`,height:b,margin:5,width:n||60,backgroundColor:s.theme.propertyPanelInputBackground,zIndex:v?100:1,borderRadius:3},f),S={zIndex:110,left:0,position:"absolute",width:a.layout.propertyPanelWidth};return i.createElement("div",{tabIndex:v?-1:0,ref:this.setInputElement,style:k,className:u,onMouseDownCapture:this.shouldNotClose,onClick:this.onInputClick,onKeyDown:this.onInputKeyDown},t,v&&d.popoverPortal.portalRef.current&&o.createPortal(i.createElement("div",{draggable:!1,onClick:this.block,onMouseDownCapture:this.shouldNotClose,style:S},i.createElement("div",{style:h,onMouseDown:stopPropagation,onKeyDown:this.onKeyDown},i.createElement(r.default,{trapFocus:!1,blurOnUnmount:!0,onModifierChange:this.keyModifierChange,allowTab:m},i.createElement("div",{style:g}),i.createElement("div",{style:p,onMouseDown:c,tabIndex:-1},this.props.children)))),d.popoverPortal.portalRef.current))}};const h={position:"absolute",backgroundColor:s.theme.popoverBackground,boxShadow:s.theme.popoverShadow,borderRadius:5,width:a.layout.propertyPanelWidth,height:"auto",bottom:d.popoverPortal.popoverBottom},p={borderRadius:h.borderRadius,width:"100%",height:"auto",overflow:"hidden",willChange:"transform",transform:"translateZ(1px)",maxHeight:400},g={position:"absolute",top:d.popoverPortal.popoverArrowTop,bottom:d.popoverPortal.popoverArrowBottom,left:d.popoverPortal.popoverArrowLeft,right:36,width:8,height:8,backgroundColor:s.theme.popoverBackground,transform:`translateX(-50%) rotate(${d.popoverPortal.popoverArrowRotation})`,borderTop:d.popoverPortal.popoverArrowBorder,borderLeft:d.popoverPortal.popoverArrowBorder}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(1),r=n(2),s=n(3),a=n(455),l=n(30),c=n(292),d=n(818),u=["RGB","HSL","HEX"];function square(e,t){return{position:"relative",marginTop:e?10:0,width:200,height:125,background:`linear-gradient(rgba(0,0,0,0), black), linear-gradient(to left, rgba(255,255,255,0), white), ${o.ConvertColor.toColorPickerSquare(t)}`,boxShadow:"inset 0 0 0 1px rgba(0,0,0,.1)",borderRadius:3,overflow:"hidden",willChange:"transform"}}t.ColorPickerInput=class ColorPickerInput extends i.Component{constructor(){super(...arguments),this.state={dragging:!1},this.currentHue=null,this.dragPosition=null,this.onRGBAInputChange=(e,t)=>{const n=o.ConvertColor.toRgb(this.props.color);let{r:i,g:r,b:s,a}=n;0===e&&(i=t),1===e&&(r=t),2===e&&(s=t),3===e&&(a=t/100);const l=o.ConvertColor.rgbaToString({r:i,g:r,b:s,a});l&&this.props.onChange(l)},this.onHSVAInputChange=(e,t)=>{const n=o.ConvertColor.toHSV(this.props.color);let{h:i,s:r,v:s,a}=n;0===e&&(i=t),1===e&&(r=Math.min(t,100)/100),2===e&&(s=Math.min(t,100)/100),3===e&&(a=t/100);const l=o.ConvertColor.hsvToHSLString({h:i,s:r,v:s,a});l&&this.props.onChange(l)},this.onSaturationBrightnessDrag=e=>{this.dragPosition=e,this.setState(Object.assign({},this.state,{dragging:!0}));const t=o.ConvertColor.getAlpha(this.props.color),n={h:this.currentHue||0,s:e.x,v:1-e.y,a:t},i=o.ConvertColor.hsvToHSLString(n);i&&this.props.onChange(i)},this.setColorModel=r.default.wrapHandler(e=>{r.default.persistedUserDefaults.colorModel=e}),this.onSaturationBrightnessDragEnd=r.default.wrapHandler(()=>{this.setState(Object.assign({},this.state,{dragging:!1})),r.default.endUndoGroup()}),this.onHueDrag=r.default.wrapHandler(e=>{const t=o.ConvertColor.toHSV(this.props.color),n=360*e.x;this.currentHue=n;const i=Object.assign({},t,{h:n}),r=o.ConvertColor.hsvToHSLString(i);0===t.s&&this.forceUpdate(),r&&this.props.onChange(r)}),this.onOpacityDrag=r.default.wrapHandler(e=>{const t=o.ConvertColor.toRgb(this.props.color),n=Object.assign({},t,{a:e.x}),i=o.ConvertColor.rgbaToString(n);i&&this.props.onChange(i)}),this.beginUndoGroup=r.default.wrapHandler(()=>{r.default.beginUndoGroup()}),this.endUndoGroup=r.default.wrapHandler(()=>{r.default.endUndoGroup()}),this.onChangeAlpha=r.default.wrapHandler(e=>{const t=o.ConvertColor.toRgb(this.props.color),n=Object.assign({},t,{a:e/100}),i=o.ConvertColor.rgbaToString(n);i&&this.props.onChange(i)}),this.onInputChange=r.default.wrapHandler(e=>{e!==this.inputValue()&&(o.ConvertColor.isValid(e)?(e.match(/^[a-fA-F0-9]+$/)&&(e="#"+e),0===e.indexOf("hsv")&&(e=o.Color.toHslString(o.Color(e))),this.props.onChange(e)):this.setState(this.state))}),this.inputValue=()=>{const{colorModel:e,color:t}=this.props;switch(e){case"HSL":return o.ConvertColor.toHslString(t);case"HEX":return o.ConvertColor.toHex(t);default:return o.ConvertColor.toRgbString(t)}}}render(){const{color:e,topMargin:t,autoFocus:n,enabled:r,children:s,style:p}=this.props,f=o.ConvertColor.toHSV(e),k=Math.round(100*f.a);this.currentHue&&(0===f.s||0===f.v||0===f.h&&360===this.currentHue||this.state.dragging)||(this.currentHue=Math.round(f.h));let S=1-f.v,C=f.s;return null!==this.dragPosition&&(S=this.dragPosition.y,C=this.dragPosition.x),this.state.dragging||null===this.dragPosition||(this.dragPosition=null),i.createElement("div",{style:Object.assign({},h,p)},i.createElement(c.default,{onDragStart:this.beginUndoGroup,onDrag:this.onSaturationBrightnessDrag,onDragEnd:this.onSaturationBrightnessDragEnd,style:square(t,this.currentHue)},i.createElement("div",{style:indicatorStyle(C,S)}),s),i.createElement("div",{style:{width:"100%",display:"flex",marginTop:10}},i.createElement("div",{style:{display:"flex",flexDirection:"column",flexGrow:1}},i.createElement(c.default,{onDragStart:this.beginUndoGroup,onDrag:this.onHueDrag,onDragEnd:this.endUndoGroup,style:g},i.createElement("div",{style:m},i.createElement("div",{style:indicatorStyle(this.currentHue/360)}))),i.createElement(c.default,{onDragStart:this.beginUndoGroup,onDrag:this.onOpacityDrag,onDragEnd:this.endUndoGroup,style:opacitySliderStyle(e)},i.createElement("div",{style:y}),i.createElement("div",{style:m},i.createElement("div",{style:indicatorStyle(f.a)})))),i.createElement(d.ColorPickerSampler,{onChange:this.onInputChange})),i.createElement("div",{style:{display:"flex",justifyContent:"space-between",marginTop:10}},i.createElement(a.default,{value:this.inputValue(),type:this.props.colorModel,typeOptions:u,onChangeValue:this.onInputChange,onChangeType:this.setColorModel,autoFocus:n,style:v,buttonStyle:b,enabled:r}),i.createElement(l.NumberInput,{value:k,onChange:this.onChangeAlpha,max:100,min:0,style:{width:60,margin:0},tickerOffset:-5,label:["%"],defaultValue:100,enabled:r})))}};const h={position:"relative",margin:"0 11px 10px 10px"},p={position:"relative",width:"100%",height:8,overflow:"visible",boxShadow:"inset 0 0 0 1px rgba(0,0,0,.1)",borderRadius:6},g=Object.assign({},p,{marginBottom:8,background:"linear-gradient(to right, #ff0000 0%, #ffff00 17%, #00ff00 33%, #00ffff 50%, #0000ff 67%, #ff00ff 83%, #ff0000 100%)"});function opacitySliderStyle(e){return Object.assign({},p,{background:`linear-gradient(to left, ${o.ConvertColor.setAlpha(e,1)}, ${o.ConvertColor.setAlpha(e,0)})`,backgroundRepeat:"no-repeat"})}const m={position:"absolute",height:"100%",top:0,left:4,right:4},f={position:"absolute",width:10,height:10,top:"50%",transform:"translateX(-50%) translateY(-50%)",borderRadius:5,boxShadow:"inset 0 0 0 2px white, inset 0 0 0 3px rgba(0,0,0,.1), 0 0 0 1px rgba(0,0,0,.1)"};function indicatorStyle(e,t=.5){return Object.assign({},f,{left:`${100*e}%`,top:`${100*t}%`})}const y={position:"absolute",width:"100%",height:"100%",background:s.theme.backgroundImage("pattern-checkboard"),backgroundRepeat:"repeat",borderRadius:10},v={width:130,padding:"2px 16px 3px 4px",margin:0},b={width:16,top:1,bottom:1,right:1,backgroundPosition:"4px center"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(63),r=n(3),s=n(29),a=n(44);t.default=class TypedInputField extends i.Component{constructor(){super(...arguments),this.textInput=null,this.onSelect=e=>{const t=e.target;this.props.onChangeType(t.value),null!==this.textInput&&this.textInput.focus()},this.showOptions=e=>{const{typeOptions:t,type:n,onChangeType:i}=this.props,o=t.map(e=>({label:e,click:()=>{i(e)},checked:e===n}));s.Menu.buildFromTemplate(o).popup({x:e.clientX,y:e.clientY}),this.textInput&&this.textInput.focus(),e.preventDefault()},this.setInputField=e=>{this.textInput=e},this.onKeyDown=e=>{a.default.isKey(e,a.default.Key.escape)&&(e.currentTarget.blur(),e.preventDefault())},this.focus=()=>{this.textInput&&this.textInput.focus()}}render(){const{value:e,onChangeValue:t,placeHolder:n,constantChange:s,style:a,buttonStyle:c,autoFocus:d,enabled:u}=this.props,h=void 0===u||!0===u,p=i.createElement("div",{style:Object.assign({position:"absolute",top:6,bottom:6,right:5,width:13,zIndex:6,borderLeft:`1px solid ${r.theme.propertyPanelInputBorder}`,backgroundImage:r.theme.backgroundImage(h?"icon-popover-arrow":"icon-popover-arrow-disabled"),backgroundRepeat:"no-repeat",backgroundPosition:" 3px 10px"},c),onMouseDown:h?this.showOptions:void 0});return i.createElement(o.TextInput,{value:e||"",onChange:t,ref:this.setInputField,style:Object.assign({},l,{color:h?r.theme.propertyPanelInputText:r.theme.propertyPanelInputTextInactive},a),placeholder:n,constantChange:s,detail:p,autoFocus:d,enabled:u})}};const l={position:"relative",padding:"2px 11px 3px 4px",backgroundColor:r.theme.propertyPanelInputBackground,borderRadius:3,width:60,margin:5,border:`1px solid ${r.theme.propertyPanelInputBorder}`}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(14),o=n(15),r=n(35);function decodeImageInfo(e){const t=[];return e.forEach(e=>{try{const i=JSON.parse(e);t.push(i)}catch(n){console.log("Could not parse JSON after image drop",n)}}),t}t.chooseImageDialog=function chooseImageDialog(e){Promise.resolve().then(()=>{const t=o.getIpcRenderer();t.once(i.ChooseImageDialog,t=>{e(decodeImageInfo(t))}),t.send(i.ChooseImageDialog)},r.unhandledError)},t.decodeImageInfo=decodeImageInfo},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(833),r=n(834),s=n(835),a=n(836),l=n(460),c=n(837),d=n(838),u=n(839),h=n(1),p=n(840),g=n(841),m=n(2),f=n(271),y=n(261);function validatePropertyValues(e,t){return t.filter(t=>f.isValidPropertyValue(e.type,t))}t.ComponentPropertyRow=class ComponentPropertyRow extends i.Component{constructor(){super(...arguments),this.onChange=m.default.wrapHandler(e=>{const{prop:t,property:n,nodes:i,external:o}=this.props;o?o.onChange(e):m.default.updateNodesForEach(i,i=>{if(y.isHidden(n,i))return;let o=e;return n.type===h.ControlType.ComponentInstance&&(o=[{enabled:!0,value:o}]),{codeComponentProps:Object.assign({},i.codeComponentProps,{[t]:o})}})}),this.onUpdate=m.default.wrapHandler(e=>{const{property:t,nodes:n,external:i}=this.props;i?i.onUpdate(e):m.default.updateNodesForEach(n,n=>{if(!y.isHidden(t,n))return{codeComponentProps:Object.assign({},n.codeComponentProps,e)}})})}render(){const e=this.props,{tree:t,property:n,external:m,nodes:v,prop:b}=e,{onChange:k,onUpdate:S}=this;if(function isHiddenRow(e,t){if(!e.hidden)return!1;for(let n=0,i=t.length;n<i;n++){const i=t[n],o=!y.isHidden(e,i);if(o)return!1}return!0}(n,v))return null;const C=m?m.checkbox:void 0,x=m?m.onContextMenu:void 0,w=m?validatePropertyValues(n,m.values):function valuesForProperty(e,t,n){const i=[];for(let o=0,r=t.length;o<r;o++){const r=t[o];if(y.isHidden(e,r))continue;const{codeComponentProps:s}=r;let a;switch(e.type){case h.ControlType.ComponentInstance:{const e=s[n];if(!e)break;const t=e[0];if(!t)break;a=t.value;break}case h.ControlType.FusedNumber:a=s;break;default:a=s[n]}f.isValidPropertyValue(e.type,a)&&i.push(a)}return i}(n,v,b),T=m?m.getReorderControl:void 0;switch(n.type){case h.ControlType.Boolean:return i.createElement(o.BooleanInputRow,{prop:b,property:n,values:w,checkbox:C,onChange:k,onContextMenu:x,getReorderControl:T});case h.ControlType.Number:return i.createElement(r.NumberInputRow,{prop:b,property:n,values:w,checkbox:C,onChange:k,onContextMenu:x,getReorderControl:T});case h.ControlType.String:return i.createElement(s.StringInputRow,{prop:b,property:n,values:w,checkbox:C,onChange:k,onContextMenu:x,getReorderControl:T});case h.ControlType.FusedNumber:return i.createElement(a.FusedNumberInputRow,{prop:b,nodes:v,property:n,values:w,checkbox:C,onUpdate:S,onContextMenu:x});case h.ControlType.Enum:return i.createElement(l.EnumInputRow,{prop:b,property:n,values:w,checkbox:C,onChange:k,onContextMenu:x,getReorderControl:T,codeComponentProps:1===v.length?v[0].codeComponentProps:null});case h.ControlType.SegmentedEnum:return i.createElement(c.SegmentedEnumInputRow,{prop:b,property:n,values:w,checkbox:C,onChange:k,onContextMenu:x,getReorderControl:T,codeComponentProps:1===v.length?v[0].codeComponentProps:null});case h.ControlType.Color:return i.createElement(d.ColorInputRow,{prop:b,property:n,values:w,checkbox:C,onChange:k,onContextMenu:x,getReorderControl:T});case h.ControlType.Image:return i.createElement(u.ImageInputRow,{prop:b,property:n,values:w,checkbox:C,onChange:k,onContextMenu:x,getReorderControl:T});case h.ControlType.File:return i.createElement(p.FileInputRow,{prop:b,property:n,values:w,checkbox:C,onChange:k,onContextMenu:x,getReorderControl:T});case h.ControlType.ComponentInstance:return i.createElement(g.ComponentInstanceRow,{tree:t,prop:b,nodes:v,property:n,values:w,checkbox:C,onChange:k,onContextMenu:x,getReorderControl:T});default:return null}}},t.validatePropertyValues=validatePropertyValues},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(3),r=n(30),s=`1px solid ${o.theme.propertyPanelInputBorder}`,a="none";t.default=class FusedNumberInputs extends i.Component{constructor(){super(...arguments),this.firstElement=null,this.state={focusedItem:-1},this.focus=()=>{null!==this.firstElement&&this.firstElement.focus()},this.onChange=(e,t,n)=>{this.props.onValueChange(n,e)},this.focusDidChange=(e,t)=>{const n=e?t:-1;this.setState({focusedItem:n}),this.props.onFocusChange&&this.props.onFocusChange(n)},this.borderRight=e=>{const{focusedItem:t}=this.state;switch(e){case 0:return 0===t?s:a;case 1:return 1===t?s:a;case 2:return 2===t?s:a;default:return s}},this.borderLeft=e=>{const{focusedItem:t}=this.state;switch(e){case 1:return 0!==t?s:a;case 2:return 1!==t?s:a;case 3:return 2!==t?s:a;default:return s}},this.itemWidth=e=>{const{focusedItem:t}=this.state;if(this.props.smallerWidth)switch(e){case 0:return 0===t?31:30;case 1:return 0===t?29:1===t?31:30;case 2:return 1===t?29:2===t?31:30;default:return 2===t?29:30}switch(e){case 0:return 0===t?33:32;case 1:return 0===t?31:1===t?33:32;case 2:return 1===t?32:2===t?34:33;default:return 2===t?32:33}},this.setFirstElement=e=>{this.firstElement=e}}render(){const{values:e,smallerWidth:t,minValues:n,enabled:o,defaultValues:s}=this.props,a=!o||o[3];return i.createElement("div",{style:t?c:l},i.createElement(r.NumberInput,{min:n?n[0]:0,value:e[0],defaultValue:s&&s[0],contextData:0,onChange:this.onChange,focusDidChange:this.focusDidChange,ref:this.setFirstElement,enabled:!o||o[0],tickerOffset:-5,style:{margin:0,width:this.itemWidth(0),borderRight:this.borderRight(0),borderLeft:this.borderLeft(0),borderRadius:"3px 0 0 3px"}}),i.createElement(r.NumberInput,{min:n?n[1]:0,value:e[1],defaultValue:s&&s[1],contextData:1,onChange:this.onChange,focusDidChange:this.focusDidChange,enabled:!o||o[1],tickerOffset:-5,style:{margin:0,width:this.itemWidth(1),borderRight:this.borderRight(1),borderLeft:this.borderLeft(1),borderRadius:0}}),i.createElement(r.NumberInput,{min:n?n[2]:0,value:e[2],defaultValue:s&&s[2],contextData:2,onChange:this.onChange,focusDidChange:this.focusDidChange,enabled:!o||o[2],tickerOffset:-5,style:{margin:0,width:this.itemWidth(2),borderRight:this.borderRight(2),borderLeft:this.borderLeft(2),borderRadius:0}}),i.createElement(r.NumberInput,{min:n?n[3]:0,value:a?e[3]:0,defaultValue:s&&s[3],contextData:3,onChange:this.onChange,focusDidChange:this.focusDidChange,enabled:a,tickerOffset:-5,style:{margin:0,width:this.itemWidth(3),borderLeft:this.borderLeft(3),borderRight:this.borderRight(3),borderRadius:"0 3px 3px 0"}}))}};const l={width:130,margin:5,display:"flex",alignItems:"stretch",alignContent:"stretch",flexDirection:"row"},c=Object.assign({},l,{width:120})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0);t.InputLabels=function InputLabels(e){const t=e.labels.map((e,t)=>i.createElement("div",{style:s,key:t},e));return i.createElement("div",{style:2===t.length?r:o,children:t})};const o={display:"flex",justifyContent:"space-around",flexDirection:"row",width:130,margin:"-2px 5px 3px"},r=Object.assign({},o,{justifyContent:"space-between",padding:"0 26px"}),s={font:"8px BlinkMacSystemFont, -apple-system",color:"#AAA",pointerEvents:"none",textTransform:"uppercase"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(8),r=n(79);function enumOptionTitles(e,t){if(!e.optionTitles)return;const{optionTitles:n}=e;if("function"!=typeof n)return n;try{const e=n(t);if(!Array.isArray(e))return;return e.filter(e=>"string"==typeof e)}catch(i){}}t.EnumInputRow=class EnumInputRow extends i.Component{render(){const{prop:e,property:t,checkbox:n,onContextMenu:s,controlOnly:a,getReorderControl:l,codeComponentProps:c,onChange:d}=this.props,{options:u}=t,h=Array.from(new Set(this.props.values)),p=enumOptionTitles(t,c),g=!!p&&p.length===u.length,m=i.createElement(r.PopupButton,{style:a?{width:60}:void 0},u.map((e,t)=>{const n=g&&p?p[t]:e,o=h.some(t=>t===e);return i.createElement(r.PopupButtonItem,{key:e,identifier:e,title:n,selected:o,onSelect:d})}));if(a)return m;const f=l?l(h[0],t):void 0,y=f?"":t.title||e;return i.createElement(o.default,{title:y,checkbox:n,onContextMenu:s},f,m)}},t.enumOptionTitles=enumOptionTitles},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(14),o=n(15),r=n(35);t.chooseFileDialog=function chooseFileDialog(e,t){Promise.resolve().then(()=>{const n=o.getIpcRenderer();n.once(i.ChooseFileDialog,e=>{t(e)}),n.send(i.ChooseFileDialog,e)},r.unhandledError)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(4),o=n(42),r=n(16);!function(e){function optionsForNode(e,t){return t.getGroundNodes().filter(n=>!(!i.isFrameNode(n)&&!i.isCodeComponentNode(n))&&(n.id!==e.id&&!r.findComponentIn(t,e,n))).reverse()}function optionTitles(e,t){return optionsForNode(e,t).map(e=>e.name||o.defaultName(e))}e.optionsForNode=optionsForNode,e.optionTitles=optionTitles,e.nodeForTitle=function nodeForTitle(e,t,n){return optionsForNode(n,t)[optionTitles(n,t).indexOf(e)]}}(t.Slot||(t.Slot={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(7),r=n(1),s=n(2),a=n(17),l=n(38),c=n(8),d=n(122),u=n(4),h=n(45),p=n(49),g=n(129),m=n(103),f=n(31),y=n(69),v=n(118),b=n(91),k=n(297),S=n(57),C=n(109);function fllImageURL(e,t){if("image"!==e)return;const n=t[0];return n&&p.hasFill(n)&&n.fillImage?`url("${r.imageUrlForAsset(n.fillImage,0)}")`:void 0}function transformBlendModesToDisplay(e){return e===l.PanelHeader.divider?e:e.split("-").map(m.capitalizeFirstLetter).join(" ")}t.FillPanel=class FillPanel extends i.Component{constructor(){super(...arguments),this.value=()=>{const{properties:e}=this.props,t=e.expandedSelectionForShapeStyles;if(e.gradientFillSupported&&t.length){const e=t[0];if(p.hasFill(e)){if("linear-gradient"===e.fillType)return e.fillLinearGradient||new v.LinearGradient;if("radial-gradient"===e.fillType)return e.fillRadialGradient||new b.RadialGradient}}return e.fillColor||""},this.currentType=()=>{const{properties:e}=this.props,t=e.expandedSelectionForShapeStyles;if(e.gradientFillSupported&&t.length){const e=t[0];if(p.hasFill(e))return e.fillType}},this.enableFill=s.default.wrapHandler(e=>{const t=this.props.properties.expandedSelectionForShapeStyles,n=h.traitFilter(t,p.hasOptionalFill);s.default.updateNodesDirect(n,{fillEnabled:e})}),this.onFillColorChange=s.default.wrapHandler((e,t=0)=>{const{properties:n}=this.props,i=n.expandedSelectionForShapeStyles,o=this.value();s.default.updateNodesForEach(i,i=>{if(p.hasFill(i)){const r={};if("string"==typeof o)r.fillColor=e,r.fillType="color";else if(v.isLinearGradient(o)||b.isRadialGradient(o)){const n=o.stops.update(t,t=>new S.GradientColorStop(t.merge({value:e})));r.fillLinearGradient=y.linearGradientUpdate(i,{stops:n}),r.fillRadialGradient=y.radialGradientUpdate(i,{stops:n}),r.fillType=v.isLinearGradient(o)?"linear-gradient":"radial-gradient"}return!1===n.fillEnabled&&p.hasOptionalFill(i)&&(r.fillEnabled=!0),r}})}),this.onFillAlphaChange=s.default.wrapHandler(e=>{const{properties:t}=this.props,n=t.expandedSelectionForShapeStyles;s.default.updateNodesForEach(n,n=>{if(p.hasFill(n)&&n.fillColor){const i={};if("color"===n.fillType&&n.fillColor){const t=r.ConvertColor.setAlpha(n.fillColor,e/100);i.fillColor=t}else p.hasActiveGradientFill(n)&&(i.fillLinearGradient=y.linearGradientUpdate(n,{alpha:e/100}),i.fillRadialGradient=y.radialGradientUpdate(n,{alpha:e/100}));return!1===t.fillEnabled&&p.hasOptionalFill(n)&&(i.fillEnabled=!0),i}})}),this.onChangeColorStops=s.default.wrapHandler(e=>{const{properties:t}=this.props,n=this.value();s.default.updateNodesForEach(t.expandedSelectionForShapeStyles,i=>{if(!p.hasFill(i))return;const o={fillLinearGradient:y.linearGradientUpdate(i,{stops:e}),fillRadialGradient:y.radialGradientUpdate(i,{stops:e}),fillType:v.isLinearGradient(n)?"linear-gradient":"radial-gradient"};return!1===t.fillEnabled&&(o.fillEnabled=!0),o})}),this.onChangeImageFill=s.default.wrapHandler(e=>{const{properties:t}=this.props;if(0===e.length)return;const n=h.traitFilter(t.expandedSelectionForShapeStyles,p.hasFill);s.default.updateNodesForEach(n,(n,i)=>{const o=e[i%e.length],{imageSize:r,imageName:s}=o,a={fillType:"image",fillImage:s,fillImagePixelWidth:r.pixelWidth,fillImagePixelHeight:r.pixelHeight};return!1===t.fillEnabled&&(a.fillEnabled=!0),u.isFrameNode(n)&&(a.intrinsicWidth=r.width,a.intrinsicHeight=r.height),a})}),this.onChangeImageResize=s.default.wrapHandler(e=>{const t=this.props.properties.expandedSelectionForShapeStyles,n=h.traitFilter(t,p.hasFill),i={fillImageResize:e};s.default.updateNodesDirect(n,i)}),this.onChangeFillType=s.default.wrapHandler(e=>{const t={fillType:e},n=this.props.properties.expandedSelectionForShapeStyles;!1===this.props.properties.fillEnabled&&(t.fillEnabled=!0),s.default.updateNodesForEach(n,n=>{if(p.hasFill(n)){if(!(p.hasActiveGradientFill(n)||"radial-gradient"!==e&&"linear-gradient"!==e||void 0!==n.fillLinearGradient&&void 0!==n.fillRadialGradient)){const e=n.fillColor||"black",i=r.ConvertColor.setAlpha(e,1),s=r.ConvertColor.toHSL(i),a=s.l<.5,l=i,c=r.ConvertColor.hslToString(Object.assign({},s,{l:s.l+(a?.33:-.33)})),d=o.List([new S.GradientColorStop({value:a?c:l,position:0}),new S.GradientColorStop({value:a?l:c,position:1})]);n.fillLinearGradient||(t.fillLinearGradient=y.linearGradientUpdate(n,{stops:d})),n.fillRadialGradient||(t.fillRadialGradient=y.radialGradientUpdate(n,{stops:d}))}return t}})}),this.onChangeBlending=s.default.wrapHandler(e=>{const{nodes:t}=this.props,n={blendingMode:transformToBlendMode(e)},i=h.traitFilter(t,g.withBlending);s.default.updateNodesDirect(i,n)}),this.onChangeExportIncludesFill=s.default.wrapHandler(e=>{const t=this.props.properties.expandedSelectionForShapeStyles,n=e===w.Include,i=h.traitFilter(t,f.hasExportIncludesBackground);s.default.updateNodesDirect(i,{exportIncludesBackground:n})})}render(){const{properties:e}=this.props,t=e.expandedSelectionForShapeStyles;if(void 0===e.fillEnabled&&void 0===e.fillType&&!0!==e.colorable)return null;let n,o;void 0!==e.fillEnabled&&(n={value:e.fillEnabled,onChange:this.enableFill,id:"fill"});const s=void 0===e.fillEnabled;if(e.blendingValues.length)o={selectedValues:e.blendingValues.map(transformBlendModesToDisplay),values:x,onSelect:this.onChangeBlending};else if(e.onlyNodesWithExportIncludesBackground&&!1!==e.fillEnabled){const{exportIncludesBackground:t}=e,n=[];!0!==t&&null!==t||n.push(w.Include),!1!==t&&null!==t||n.push(w.Exclude),o={selectedValues:n,values:T,onSelect:this.onChangeExportIncludesFill}}const u=this.currentType(),h=this.value();let p="image"!==u;y.isGradient(h)&&h.tokenVariables().length>0&&(p=!1),n&&this.previousFillCheckbox&&C.isShallowObjectEqual(n,this.previousFillCheckbox)?n=this.previousFillCheckbox:this.previousFillCheckbox=n,o&&this.previousSettings&&r.isEqual(o,this.previousSettings)?o=this.previousSettings:this.previousSettings=o;let g=d.trackingMetadata(t,"fillColor");g&&this.previousTracking&&C.isShallowObjectEqual(g,this.previousTracking)?g=this.previousTracking:this.previousTracking=g;let m=e.fillImageResize;return m&&this.previousFillImageResize&&r.isEqual(m,this.previousFillImageResize)?m=this.previousFillImageResize:this.previousFillImageResize=m,i.createElement(a.default,{nodes:t,withHeader:!0},i.createElement(l.PanelHeader,{title:"Fill",settings:o}),i.createElement(c.default,{checkbox:n},i.createElement(d.ColorPicker,{value:h,currentType:u,onChangeColor:this.onFillColorChange,inputWidth:s?60:void 0,onChangeFillType:this.onChangeFillType,onChangeColorStops:this.onChangeColorStops,imageURL:fllImageURL(u,e.expandedSelectionForShapeStyles),imageResize:m,onChangeImages:this.onChangeImageFill,onChangeImageResize:this.onChangeImageResize,trackingMetadata:g}),i.createElement(k.ColorAlphaControls,{color:"string"==typeof h?h:"",alpha:e.fillAlpha,onAlphaChange:this.onFillAlphaChange,enabled:p})))}};const x=["normal",l.PanelHeader.divider,"darken","multiply","color-burn",l.PanelHeader.divider,"lighten","screen","color-dodge",l.PanelHeader.divider,"overlay","soft-light","hard-light",l.PanelHeader.divider,"difference","exclusion",l.PanelHeader.divider,"hue","saturation","color","luminosity"].map(transformBlendModesToDisplay);function transformToBlendMode(e){return e.toLowerCase().replace(" ","-")}var w;!function(e){e.Include="Include in Export",e.Exclude="Exclude from Export"}(w||(w={}));const T=[w.Include,w.Exclude]},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(1),r=n(29),s=n(62),a=n(38),l=n(17),c=n(8),d=n(122),u=n(30),h=n(19),p=n(103),g=n(47),m=n(63),f=n(450),y=n(451),v=n(2),b=n(27),k=n(88),S="Remove";t.StrokePanel=class StrokePanel extends i.Component{constructor(){super(...arguments),this.state={mouseOverDashArray:!1},this.setElement=e=>{e instanceof m.TextInput&&(this.dashArray=e)},this.addStroke=()=>this.enableStroke(!0),this.enableStroke=v.default.wrapHandler(e=>{const t=e?1:-1,n=this.props.properties.expandedSelectionForShapeStyles;v.default.updateNodesForEach(n,e=>{if(!s.hasStroke(e))return;const n={strokeEnabled:t};return collectStrokeDefaults(e,n),n})}),this.removeStroke=v.default.wrapHandler(()=>{const e=this.props.properties.expandedSelectionForShapeStyles;v.default.updateNodesDirect(e,{strokeEnabled:void 0,strokeAlignment:void 0,strokeWidth:void 0,strokeColor:void 0,lineJoin:void 0,lineCap:void 0,strokeMiterLimit:void 0,strokeDashArray:void 0,strokeDashOffset:void 0})}),this.onStrokeColorChange=v.default.wrapHandler(e=>{const{properties:t}=this.props,n=t.expandedSelectionForShapeStyles;v.default.updateNodesForEach(n,n=>{if(!s.hasStroke(n))return;const i={strokeColor:e};return null!==t.borderEnabled&&(i.strokeEnabled=1),collectStrokeDefaults(n,i),i})}),this.onStrokeWidthChange=v.default.wrapHandler(e=>{const{properties:t}=this.props,n=t.expandedSelectionForShapeStyles;v.default.updateNodesForEach(n,n=>{if(!s.hasStroke(n))return;const i={strokeWidth:e};return null!==t.borderEnabled&&(i.strokeEnabled=1),collectStrokeDefaults(n,i),i})}),this.onStrokeAlignmentChange=v.default.wrapHandler(e=>{const t=e.toLowerCase(),n=this.props.properties.expandedSelectionForShapeStyles;v.default.updateNodesForEach(n,e=>{if(s.hasStroke(e)&&b.hasShape(e)&&h.default.isClosed(e.calculatedPaths()))return{strokeAlignment:t}})}),this.onContextMenu=e=>{const t=[{label:S,click:this.removeStroke}];r.Menu.buildFromTemplate(t).popup({x:e.clientX,y:e.clientY})},this.evalDashValue=e=>e.split(",").map(y.evalMath).map(e=>o.isFiniteNumber(e)?e:0),this.onDashArrayNumberChange=v.default.wrapHandler(e=>{const t=this.props.properties.expandedSelectionForShapeStyles;v.default.updateNodesDirect(t,{strokeDashArray:e.toString()})}),this.onDashArrayChange=v.default.wrapHandler(e=>{if(""===e&&null===this.props.properties.strokeDashArray)return;const t=this.props.properties.expandedSelectionForShapeStyles,n=this.evalDashValue(e).join(", ");v.default.updateNodesDirect(t,{strokeDashArray:n})}),this.onDashOffsetChange=v.default.wrapHandler((e,t)=>{const n=this.props.properties.expandedSelectionForShapeStyles;v.default.updateNodesDirect(n,{strokeDashOffset:e})}),this.onDashArrayArrow=e=>{const{strokeDashArray:t}=this.props.properties;if(!t)return;const n=this.evalDashValue(t);if(1!==n.length)return;let i=e.shiftKey?10:1;40===e.keyCode&&(i*=-1);const o=Math.max(n[0]+i,0);this.onDashArrayChange(o.toString()),e.preventDefault()},this.selectCap=v.default.wrapHandler(e=>{const t=this.props.properties.expandedSelectionForShapeStyles,n=function lineCapValue(e){switch(e){case 0:return"butt";case 1:return"round";default:return"square"}}(e);v.default.updateNodesDirect(t,{lineCap:n})}),this.selectJoin=v.default.wrapHandler(e=>{const t=this.props.properties.expandedSelectionForShapeStyles,n=function lineJoinValue(e){switch(e){case 0:return"miter";case 1:return"round";default:return"bevel"}}(e);v.default.updateNodesDirect(t,{lineJoin:n})}),this.onMiterChange=v.default.wrapHandler(e=>{const t=this.props.properties.expandedSelectionForShapeStyles;v.default.updateNodesDirect(t,{strokeMiterLimit:e})}),this.onMouseOver=()=>{this.setState({mouseOverDashArray:!0})},this.onMouseOut=()=>{this.setState({mouseOverDashArray:!1})}}render(){const{properties:e}=this.props,t=e.expandedSelectionForShapeStyles;if(!e.onlyShapeNodes)return null;let n,r,s,h=null,y=null;const{strokeEnabled:v,strokeDashArray:b}=e;if(0===v)n={action:this.addStroke};else{r={action:this.removeStroke,enabled:-1===v};const n={value:null===v?null:1===v,onChange:this.enableStroke,id:"strokeCheckbox"},a=o.isFiniteNumber(e.strokeWidth)?e.strokeWidth:e.disabledStrokeWidth,{mouseOverDashArray:l}=this.state;let k;const S=parseFloat(b||"");if(1===v&&o.isFiniteNumber(S)&&(k=i.createElement(f.default,{value:S,enabled:!0,visible:l,onChangeValue:this.onDashArrayNumberChange,step:1,minValue:0})),h=i.createElement(c.default,{checkbox:n},i.createElement(d.ColorPicker,{value:e.strokeColor||e.disabledStrokeColor||"",onChangeColor:this.onStrokeColorChange,trackingMetadata:d.trackingMetadata(t,"strokeColor")}),i.createElement(u.NumberInput,{value:a,onChange:this.onStrokeWidthChange,min:0,label:["Width","W"]}),i.createElement("div",{style:{position:"relative"}},i.createElement(m.TextInput,{type:m.TextInputType.Field,label:l&&1===v?[]:["Array","A"],detail:k,value:b||"",onChange:this.onDashArrayChange,onArrow:this.onDashArrayArrow,style:C,ref:this.setElement,onMouseOver:this.onMouseOver,onMouseOut:this.onMouseOut,enabled:1===v}))),1===v){const{lineJoinValues:t,lineCapValues:n}=e;e.strokeAlignmentValues.length>0&&(s={values:x,selectedValues:e.strokeAlignmentValues.map(p.capitalizeFirstLetter),onSelect:this.onStrokeAlignmentChange}),o.isFiniteNumber(S)&&(k=i.createElement(f.default,{value:S,enabled:!0,visible:l,onChangeValue:this.onDashArrayNumberChange,step:1,minValue:0})),y=[i.createElement(c.default,{title:"Cap",key:"cap-row"},i.createElement(g.SegmentedControl,{onSelect:this.selectCap,icons:w,titles:P,selectedIndex:lineCapIndex(n),style:{width:130}})),i.createElement(c.default,{title:"Join",key:"join-row"},i.createElement(g.SegmentedControl,{onSelect:this.selectJoin,icons:T,titles:E,selectedIndex:lineJoinIndex(t),style:{width:130}}))]}}const k=0===v;return i.createElement(l.default,{nodes:t,withHeader:!0,empty:k},i.createElement(a.PanelHeader,{title:"Stroke",addition:n,subtraction:r,settings:s,empty:k&&!this.props.isLastPanel}),h,y)}};const C={width:60,margin:5},x=["center","inside"].map(p.capitalizeFirstLetter),w=["icon-line-cap-butt","icon-line-cap-round","icon-line-cap-square"],T=["icon-line-join-miter","icon-line-join-round","icon-line-join-bevel"],P=["Butt","Round","Square"],E=["Miter","Round","Bevel"];function lineCapIndex(e){if(1!==e.length)return-1;switch(e[0]){case"butt":return 0;case"round":return 1;default:return 2}}function lineJoinIndex(e){if(1!==e.length)return-1;switch(e[0]){case"miter":return 0;case"round":return 1;default:return 2}}function collectStrokeDefaults(e,t){e.strokeAlignment||t.strokeAlignment||(t.strokeAlignment="center"),o.isFiniteNumber(e.strokeWidth)||o.isFiniteNumber(t.strokeWidth)||(t.strokeWidth=1),e.strokeColor||t.strokeColor||(t.strokeColor=k.hasPath(e)?"#09F":"#AAA"),e.lineJoin||t.lineJoin||(t.lineJoin="miter"),e.lineCap||t.lineCap||(t.lineCap="butt"),o.isFiniteNumber(e.strokeMiterLimit)||o.isFiniteNumber(t.strokeMiterLimit)||(t.strokeMiterLimit=4),e.strokeDashArray||t.strokeDashArray||(t.strokeDashArray="0"),o.isFiniteNumber(e.strokeDashOffset)||o.isFiniteNumber(t.strokeDashOffset)||(t.strokeDashOffset=0)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(2);t.updateStyledText=function updateStyledText(e,t,n){const o=i.default.tree;e.forEach(e=>{const r=e,s=t(r.styledText,n,r.cache.isEditable);if(r.autoSize){const t=o.getParentSize(e),n=s.calculateSize();i.default.updateNode(e.id,Object.assign({},r.updateForSize(n,t,!1),{styledText:s}))}else i.default.updateNode(e.id,{styledText:s})})},t.shouldUpdateDefaultStyle=function shouldUpdateDefaultStyle(e){if(1===e.length&&e[0].cache.isEditable)return!1;return!0}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(176),o=n(219),r=n(15),s=n(14),a=n(289);var l;!function(e){e[e.Empty=0]="Empty",e[e.Defaults=1]="Defaults"}(l=t.FileTemplate||(t.FileTemplate={})),t.createCodeOverrideFile=function createCodeOverrideFile(e,t,n,c=!0){let d;switch(n){case l.Empty:d=function overrideTemplate(e){return`import { Override } from "framer"\n\n    // Override Docs: https://framer.com/docs/overrides\n\n    export function ${e}(): Override {\n        return {\n            whileTap: {\n                scale: 0.6\n            }\n        }\n    }\n`}("Scale");break;case l.Defaults:d='import { Data, Override } from "framer"\n\nconst data = Data({\n    rotate: 0,\n    rotateY: 0,\n    toggle: true\n})\n\nexport function Hover(): Override {\n    return {\n        whileHover: { scale: 0.8 },\n    }\n}\n\nexport function Draggable(): Override {\n    return {\n        drag: true\n    }\n}\n\nexport function Rotate(): Override {\n    return {\n        animate: { rotate: data.rotate },\n        onTap() {\n            data.rotate = data.rotate + 90\n        }\n    }\n}\n\nexport function FlipInput(): Override {\n    return {\n        onTap() {\n            const toggle = data.toggle\n            data.rotateY = toggle ? 180 : 0\n            data.toggle = !toggle\n        }\n    }\n}\n\nexport function FlipOutput(): Override {\n    return {\n        animate: { rotateY: data.rotateY },\n    }\n}\n';break;default:return}const u=i.sanitizedVariableName(t)||"MyOverrides";if(e)a.CodeEditor.editFile(u+o.tsxExtension,d,c);else{const e=`code/${u}.tsx`;r.getIpcRenderer().send(s.CreateFileAtRelativePath,[e,d]),c&&r.getIpcRenderer().send(s.OpenRelativePathExternally,e)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(0),r=n(78),s=n(907),a=n(909);t.FeedbackItem=o.forwardRef(function FeedbackItem({Component:e="div",className:t,tint:n,title:c,avatar:d,timestamp:u,permalink:h,hasBadge:p=!1,onSelect:g,onContextMenu:m,children:f},y){const v=o.useCallback(e=>{g&&!e.defaultPrevented&&g()},[g]),b=o.useCallback(e=>{e.preventDefault();const t=e.currentTarget.getBoundingClientRect();m&&m({x:t.left,y:t.top})},[m]);let k=a.formatTimestamp(u);return h&&(k=i.createElement("a",{className:s.permalink,rel:"noopener noreferrer",target:"_blank",href:h},k)),i.createElement(e,{ref:y,className:r.cx(t,s.container,p&&s.hasBadge),style:{"--tint-color":n}},i.createElement("button",{className:s.button,onClick:v},i.createElement("article",{className:s.content},i.createElement("h1",{className:s.title},i.createElement("span",{className:s.author},c)," ",i.createElement("time",{className:s.timestamp},k),m&&i.createElement(l,{className:s.disclosureIcon,onClick:b})),f),i.createElement("aside",{className:s.avatar},d)))});const l=e=>i.createElement("svg",Object.assign({},e,{xmlns:"http://www.w3.org/2000/svg",width:"23",height:"23"}),i.createElement("path",{d:"M 11.5 0 C 17.851 0 23 5.149 23 11.5 C 23 17.851 17.851 23 11.5 23 C 5.149 23 0 17.851 0 11.5 C 0 5.149 5.149 0 11.5 0 Z",fill:"transparent"}),i.createElement("path",{d:"M 17.15 10 C 17.785 10 18.3 10.515 18.3 11.15 C 18.3 11.785 17.785 12.3 17.15 12.3 C 16.515 12.3 16 11.785 16 11.15 C 16 10.515 16.515 10 17.15 10 Z",fill:"var(--framerInternalUI-feedbackEllipsisColor)"}),i.createElement("path",{d:"M 7.15 10 C 7.785 10 8.3 10.515 8.3 11.15 C 8.3 11.785 7.785 12.3 7.15 12.3 C 6.515 12.3 6 11.785 6 11.15 C 6 10.515 6.515 10 7.15 10 Z",fill:"var(--framerInternalUI-feedbackEllipsisColor)"}),i.createElement("path",{d:"M 12.15 10 C 12.785 10 13.3 10.515 13.3 11.15 C 13.3 11.785 12.785 12.3 12.15 12.3 C 11.515 12.3 11 11.785 11 11.15 C 11 10.515 11.515 10 12.15 10 Z",fill:"var(--framerInternalUI-feedbackEllipsisColor)"}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(469),r=n(470),s=n(138);t.CommentAvatar=({author:e,isSpeechBubble:t,isReply:n})=>i.createElement(o.Avatar,{initials:e.initials||r.initials(e.name),alt:e.name,url:e.avatar||"",color:s.colorFromId(e.id),isSpeechBubble:t,isReply:n})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(0),r=n(78),s=n(910);t.Avatar=({initials:e,url:t,alt:n,color:a,isSpeechBubble:l=!1,isReply:c=!1})=>{const[d,u]=o.useState(!1),[h,p]=o.useState(!1),g=o.useCallback(()=>u(!0),[u]),m=o.useCallback(()=>p(!0),[p]);return i.createElement("span",{className:r.cx(s.container,d&&s.isLoaded,l&&s.isSpeechBubble,c&&s.isReply),"data-initials":e,style:{"--avatar-color":a}},t&&!c?i.createElement("img",{className:s.image,hidden:h,src:t,alt:n,onLoad:g,onError:m}):null)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.initials=function initials(e){return e.split(" ").map(e=>e[0]).join("")}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(918),r=n(3);t.FeedbackBlankSlate=({title:e,message:t})=>i.createElement("div",{className:o.container},i.createElement("div",{style:{height:20,width:20,background:`url("images/theme-${r.theme.activeTheme.name}/icon-empty-pin.svg") center center no-repeat`}}),i.createElement("h1",{className:o.title},e),i.createElement("p",{className:o.message},t))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(473)(null,{url:"http://localhost/"});const i=n(0),o=n(179),r=n(299),s=n(678),a=n(2);console.log=()=>{},a.default.ignoreDebounceCalls=!0;const l=i.createElement(r.ThemedContainer,{},i.createElement(s.Document));process.stdout.write(o.renderToString(l))},function(e,t){e.exports=require("jsdom-global")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t){e.exports=require("hsluv")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(227),o=n(302);!function(e){e.hueRotate=function hueRotate(e,t){return i.Color.toHslString(i.Color.hueRotate(i.Color(e),t))},e.setAlpha=function setAlpha(e,t){return i.Color.toRgbString(i.Color.alpha(i.Color(e),t))},e.getAlpha=function getAlpha(e){const t=o.stringToObject(e);return t?t.a:1},e.multiplyAlpha=function multiplyAlpha(e,t){return i.Color.toRgbString(i.Color.multiplyAlpha(i.Color(e),t))},e.toHex=function toHex(e){return i.Color.toHexString(i.Color(e)).toUpperCase()},e.toRgb=function toRgb(e){return i.Color.toRgb(i.Color(e))},e.toRgbString=function toRgbString(e){return i.Color.toRgbString(i.Color(e))},e.toHSV=function toHSV(e){return i.Color.toHsv(i.Color(e))},e.toHSL=function toHSL(e){return i.Color.toHsl(i.Color(e))},e.toHslString=function toHslString(e){return i.Color.toHslString(i.Color(e))},e.toHsvString=function toHsvString(e){return i.Color.toHsvString(i.Color(e))},e.hsvToHSLString=function hsvToHSLString(e){return i.Color.toHslString(i.Color(o.hsvToStr(e.h,e.s,e.v,e.a)))},e.hsvToString=function hsvToString(e){return o.hsvToStr(e.h,e.s,e.v)},e.rgbaToString=function rgbaToString(e){return i.Color.toRgbString(i.Color(e))},e.hslToString=function hslToString(e){return i.Color.toRgbString(i.Color(e))},e.toColorPickerSquare=function toColorPickerSquare(e){return i.Color.toRgbString(i.Color({h:e,s:1,l:.5,a:1}))},e.isValid=function isValid(e){return!1!==i.Color(e).isValid},e.equals=function equals(e,t){return"string"==typeof e&&(e=i.Color(e)),"string"==typeof t&&(t=i.Color(t)),i.Color.equal(e,t)},e.toHexOrRgbaString=function toHexOrRgbaString(e){const t=i.Color(e);return 1!==t.a?i.Color.toRgbString(t):i.Color.toHexString(t)}}(t.ConvertColor||(t.ConvertColor={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(124),o=n(18);t.ready=e=>{"loading"!==document.readyState?e():document.addEventListener("DOMContentLoaded",()=>setTimeout(e))},t.frameFromElement=e=>{const t=i.Rect.fromRect(e.getBoundingClientRect());return t.x=t.x+o.safeWindow.scrollX,t.y=t.y+o.safeWindow.scrollY,t},t.frameFromElements=e=>i.Rect.merge(...e.map(t.frameFromElement)),t.convertToPageFrame=(e,n)=>{const i=t.convertToPagePoint(e,n);return{x:i.x,y:i.y,width:e.width,height:e.height}},t.convertFromPageFrame=(e,n)=>{const i=t.convertFromPagePoint(e,n);return{x:i.x,y:i.y,width:e.width,height:e.height}},t.getPageFrame=e=>{const t=e.getBoundingClientRect();return{x:t.left+o.safeWindow.scrollX,y:t.top+o.safeWindow.scrollY,width:t.width,height:t.height}},t.fromEventForPage=e=>({x:e.pageX,y:e.pageY}),t.fromEventForClient=e=>({x:e.clientX,y:e.clientY}),t.convertToPagePoint=(e,n)=>{const i=t.getPageFrame(n);return{x:e.x+i.x,y:e.y+i.y}},t.convertFromPagePoint=(e,n)=>{const i=t.getPageFrame(n);return{x:e.x-i.x,y:e.y-i.y}},t.dispatchKeyDownEvent=(e,t={})=>{const n=new KeyboardEvent("keydown",Object.assign({bubbles:!0,keyCode:e},t)),i=document.activeElement;i&&i.dispatchEvent(n)},t.DOM={frameFromElement:t.frameFromElement,frameFromElements:t.frameFromElements,convertToPageFrame:t.convertToPageFrame,convertFromPageFrame:t.convertFromPageFrame,getPageFrame:t.getPageFrame,fromEventForPage:t.fromEventForPage,fromEventForClient:t.fromEventForClient,convertToPagePoint:t.convertToPagePoint,convertFromPagePoint:t.convertFromPagePoint}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.collectOverflowFromProps=function collectOverflowFromProps(e,t){e.overflow&&(t.overflow=e.overflow)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(59);t.collectTextColorFromProps=function collectTextColorFromProps(e,t){const{color:n}=e;"string"==typeof n?t.color=n:i.Color.isColorObject(n)&&(t.color=n.initialValue||i.Color.toRgbString(n))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i="calculatedPaths";t.withShape=function withShape(e){return i in e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(150),o=n(180);t.gradientForShape=function gradientForShape(e,t){return i.LinearGradient.isLinearGradient(t.fill)?o.elementPropertiesForLinearGradient(t.fill,e):i.RadialGradient.isRadialGradient(t.fill)?o.elementPropertiesForRadialGradient(t.fill,e):void 0}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(18);t.debounce=function debounce(e,t){let n;return(...o)=>{i.safeWindow.clearTimeout(n),n=i.safeWindow.setTimeout(e,t,...o)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(18);t.throttle=function throttle(e,t){let n,o=0;const r=(...t)=>{o=Date.now(),n=void 0,e(...t)};return(...s)=>{const a=Date.now(),l=t-(a-o);l<=0||l>t?(n&&(i.safeWindow.clearTimeout(n),n=void 0),o=a,e(...s)):n||(n=i.safeWindow.setTimeout(r,l,...s))}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isDesignDefinition=function isDesignDefinition(e){return"master"===e.type},t.isNonUserFacing=function isNonUserFacing(e){return"device"===e.type||"deviceSkin"===e.type||"deviceHand"===e.type},t.isOverride=function isOverride(e){return"override"===e.type},t.isAction=function isAction(e){return"action"===e.type},t.isReactDefinition=function isReactDefinition(e){return"master"!==e.type}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.Boolean="boolean",e.Number="number",e.String="string",e.FusedNumber="fusednumber",e.Enum="enum",e.SegmentedEnum="segmentedenum",e.Color="color",e.Image="image",e.File="file",e.ComponentInstance="componentinstance",e.Array="array",e.EventHandler="eventHandler"}(t.ControlType||(t.ControlType={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i="_isStylable";t.withStylable=function withStylable(e){return i in e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.annotateTypeOnStringify=function annotateTypeOnStringify(e,t){const n=e.prototype.toJSON;return e.prototype.toJSON=function(){const e=n?n.apply(this):this;return Object.assign({},e,{__type__:t})},e},t.isOfAnnotatedType=function isOfAnnotatedType(e,t){return e&&e.__type__&&e.__type__===t}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(7);t.PathSegmentRecord=i.Record({x:0,y:0,handleMirroring:"straight",handleOutX:0,handleOutY:0,handleInX:0,handleInY:0,radius:0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(1);function Line(e,t){return{a:e,b:t}}t.Line=Line,function(e){function intersection(e,t){const n=e.a.x,i=e.a.y,o=e.b.x,r=e.b.y,s=t.a.x,a=t.a.y,l=t.b.x,c=t.b.y,d=(n-o)*(a-c)-(i-r)*(s-l);return 0===d?null:{x:((s-l)*(n*r-i*o)-(n-o)*(s*c-a*l))/d,y:((a-c)*(n*r-i*o)-(i-r)*(s*c-a*l))/d}}e.intersection=intersection,e.isOrthogonal=e=>e.a.x===e.b.x||e.a.y===e.b.y,e.perpendicular=(t,n)=>{const o=t.a.x-t.b.x,r=t.a.y-t.b.y,s=i.Point(n.x-r,n.y+o);return e(s,n)},e.projectPoint=function projectPoint(t,n){return intersection(t,e.perpendicular(t,n))}}(Line||(Line={})),t.Line=Line},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(234),r=n(325),s=n(153),a={onMouseEnter:"mouseenter",onMouseLeave:"mouseleave"},l=Object.keys(a),c={panstart:["onPanStart"],pan:["onPan"],panend:["onPanEnd"],tapstart:["onTapStart","onMouseDown"],tap:["onTap","onClick"],tapend:["onTapEnd","onMouseUp"],mousewheelstart:["onMouseWheelStart"],mousewheel:["onMouseWheel"],mousewheelend:["onMouseWheelEnd"]},d=new Set(["tapstart","tap","tapend"]);t.WithEvents=function WithEvents(e){var t;const n=((t=class WithEventsHOC extends i.Component{constructor(){super(...arguments),this.shouldCancelTap=!1,this.activeEventListeners=new Map,this.hasFramerEventListener=!1,this.component=i.createRef()}get element(){return this.component.current&&this.component.current.element}componentDidMount(){this.addEventListeners()}componentDidUpdate(e){this.addEventListeners(e)}componentWillUnmount(){this.removeEventListeners()}addEventListeners(e){this.element&&!this.hasFramerEventListener?(this.element.addEventListener("FramerEvent",({detail:e})=>{const t=e.type,n=e.event;this.handleEvent(t,n)}),l.forEach(e=>this.addHoverEvent(e)),this.hasFramerEventListener=!0):this.element&&e?l.forEach(t=>this.checkHoverEvent(t,e)):this.element||(this.hasFramerEventListener=!1)}removeEventListeners(){l.forEach(e=>this.removeHoverEvent(e))}addHoverEvent(e){const t=this.props[e];if(this.element&&t){const n=e=>{const n=new o.FramerEvent(e);t(n)};this.activeEventListeners.set(e,n);const i=a[e];this.element.addEventListener(i,n)}}removeHoverEvent(e){const t=this.activeEventListeners.get(e);if(this.element&&t){const n=a[e];this.element.removeEventListener(n,t),this.activeEventListeners.delete(e)}}checkHoverEvent(e,t){t[e]!==this.props[e]&&(this.removeHoverEvent(e),this.addHoverEvent(e))}handleEvent(e,t){const n=c[e];n&&n.forEach(e=>{const n=this.props[e],i=this.shouldCancelTap&&d.has(e);n&&!i&&n(t)})}render(){return i.createElement(r.DraggingContext.Consumer,null,t=>(this.shouldCancelTap=t.dragging,i.createElement(e,Object.assign({},this.props,{ref:this.component}))))}}).defaultProps=Object.assign({},e.defaultProps),t);return s(n,e),n}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(18).safeWindow.requestAnimationFrame||(e=>{setTimeout(e,1/60)});t.raf=e=>i(e)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(323);t.EventEmitter=class EventEmitter{constructor(){this._emitter=new i.EventEmitter}eventNames(){return this._emitter.eventNames()}eventListeners(){const e={};for(const t of this._emitter.eventNames())e[t]=this._emitter.listeners(t);return e}on(e,t){this.addEventListener(e,t,!1,!1,this)}off(e,t){this.removeEventListeners(e,t)}once(e,t){this.addEventListener(e,t,!0,!1,this)}unique(e,t){this.addEventListener(e,t,!1,!0,this)}addEventListener(e,t,n,i,o){if(i)for(const r of this._emitter.eventNames())if(t===this._emitter.listeners(r))return;!0===n?this._emitter.once(e,t,o):this._emitter.addListener(e,t,o)}removeEventListeners(e,t){e?this._emitter.removeListener(e,t):this.removeAllEventListeners()}removeAllEventListeners(){this._emitter.removeAllListeners()}countEventListeners(e,t){if(e)return this._emitter.listeners(e).length;{let e=0;for(const t of this._emitter.eventNames())e+=this._emitter.listeners(t).length;return e}}emit(e,...t){this._emitter.emit(e,...t)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=.001,o=.01,r=10,s=Number.MIN_VALUE,a=1;function angularFrequency(e,t){return e*Math.sqrt(1-Math.pow(t,2))}!function(e){function computeDampingRatio(e,t,n=1){return t/(2*Math.sqrt(n*e))}e.computeDampingRatio=computeDampingRatio,e.computeDuration=function computeDuration(e,t,n=0,o=1){let r;const s=computeDampingRatio(e,t),a=Math.sqrt(e/o);if(!(s<1))return null;{const e=Math.sqrt(1-Math.pow(s,2)),t=-(n/(e*a)-s/e)/i;if(t<=0)return null;r=Math.log(t)/(s*a)}return r},e.computeDerivedCurveOptions=function computeDerivedCurveOptions(e,t,n=0,l=1){let c,d;e=Math.max(Math.min(e,a),s),t=Math.max(Math.min(t,r),o),e<1?(d=function(o){const r=o*e,s=r*t,a=r-n,l=angularFrequency(o,e),c=Math.exp(-s);return i-a/l*c},c=function(o){const r=o*e*t,s=r*n+n,a=Math.pow(e,2)*Math.pow(o,2)*t,l=Math.exp(-r),c=angularFrequency(Math.pow(o,2),e);return(-d(o)+i>0?-1:1)*((s-a)*l)/c}):(d=function(e){return Math.exp(-e*t)*((e-n)*t+1)-i},c=function(e){return Math.exp(-e*t)*((n-e)*Math.pow(t,2))});const u={tension:100,friction:10,velocity:n},h=function approximateRoot(e,t,n,i=12){let o=n;for(let r=1,s=i,a=1<=s;a?r<s:r>s;a?r++:r--)o-=e(o)/t(o);return o}(d,c,5/t);return isNaN(h)||(u.tension=Math.pow(h,2)*l,u.friction=2*e*Math.sqrt(l*u.tension)),u}}(t.SpringCurveValueConverter||(t.SpringCurveValueConverter={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(330),o=n(331),r=n(332),s=n(227),a=n(333),l=n(123),c=n(125),d={colorModel:l.ColorMixModelType.HUSL};class ValueInterpolation{constructor(e=d){this.interpolate=(e,t)=>([e,t]=c.Interpolation.handleUndefined(e,t),this.interPolationForValue(e).interpolate(e,t)),this.difference=(e,t)=>{return this.interPolationForValue(e).difference(e,t)},this.options=Object.assign({},d,e)}interPolationForValue(e){const t=typeof e;if("number"===t)return i.NumberInterpolation;if("boolean"===t||"function"===t)return r.NoInterpolation;if(s.Color.isColor(e))return a.ColorInterpolation(this.options.colorModel);if("object"===t){if(null===e)return r.NoInterpolation;const t=e.constructor;if(t&&c.isInterpolatable(t)){const n=t.interpolationFor(e,this);if(n&&n!==this&&n.constructor!==ValueInterpolation)return n}return o.ObjectInterpolation(this)}return console.warn(`No interpolation defined for ${e}`),r.NoInterpolation}}t.ValueInterpolation=ValueInterpolation,t.AnyInterpolation=new ValueInterpolation},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.AnimationDriver=class AnimationDriver{constructor(e,t,n){this.animator=e,this.updateCallback=t,this.finishedCallback=n,this.update=(e,t)=>{if(this.animator.isFinished())this.finish();else{const e=this.animator.next(t);this.updateCallback(e)}},this.animator.isReady()||console.warn("AnimationDriver initialized with animator that isn't ready")}finish(){this.finishedCallback&&this.finishedCallback(this.animator.isFinished())}isFinished(){return this.animator.isFinished()}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(18);t.optionalReactDOM=function optionalReactDOM(){if(void 0!==i.safeWindow&&i.safeWindow.ReactDOM)return i.safeWindow.ReactDOM}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(33),o=n(21),r=n(65),s=n(96),{getNumber:a}=i.Animatable;function getRotation(e,t){return"string"==typeof t&&(t=parseFloat(t)),s.isFiniteNumber(t)?t:a(e)}t.transformDefaults={z:0,rotation:0,rotationX:0,rotationY:0,rotationZ:0,scale:1,scaleX:1,scaleY:1,scaleZ:1,skew:0,skewX:0,skewY:0,originX:.5,originY:.5,originZ:0},t.collectTransformFromProps=function collectTransformFromProps(e,t,n){const i=n,s="number"==typeof t.x?`${t.x}px`:t.x,l="number"==typeof t.y?`${t.y}px`:t.y,c=a(e.z),d=a(e.scaleZ),u=a(e.originZ),h=getRotation(e.rotationZ,r.unwrapMotionValue(i.rotateZ)),p=getRotation(e.rotationX,r.unwrapMotionValue(i.rotateX)),g=getRotation(e.rotationY,r.unwrapMotionValue(i.rotateY)),m=a(e.scale),f=a(e.scaleX),y=a(e.scaleY),v=a(e.skew),b=a(e.skewX),k=a(e.skewY),S=getRotation(e.rotation,r.unwrapMotionValue(i.rotate)),C=o.RenderEnvironment.target===o.RenderTarget.export;n.transform=C||0!==c||1!==d||0!==u||0!==h||0!==p||0!==g?`\n            ${`translate3d(${s}, ${l}, ${c}px)`}\n            scale3d(${f*m}, ${y*m}, ${d})\n            skew(${v}deg,${v}deg)\n            skewX(${b}deg)\n            skewY(${k}deg)\n            translateZ(${u}px)\n            rotateX(${p}deg)\n            rotateY(${g}deg)\n            rotateZ(${(S+h).toFixed(4)}deg)\n            translateZ(${-u}px)`:`\n            ${`translate(${s}, ${l})`}\n            scale(${f*m}, ${y*m})\n            skew(${v}deg,${v}deg)\n            skewX(${b}deg)\n            skewY(${k}deg)\n            rotate(${S.toFixed(4)}deg)`;const x=`${100*a(e.originX)}% ${100*a(e.originY)}%`;n.transformOrigin=x,n.WebkitTransformOrigin=x}},function(e,t){e.exports=require("@emotion/is-prop-valid")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(507),o=n(232);t.hasLeftAndRight=function hasLeftAndRight(e){return!!e&&void 0!==e.left&&void 0!==e.right},t.hasTopAndBottom=function hasTopAndBottom(e){return!!e&&void 0!==e.top&&void 0!==e.bottom},t.getStyleForFrameProps=function getStyleForFrameProps(e){if(!e)return{};const t={};return!0===e.preserve3d?t.transformStyle="preserve-3d":!1===e.preserve3d&&(t.transformStyle="flat"),!0===e.backfaceVisible?t.backfaceVisibility="visible":!1===e.backfaceVisible&&(t.backfaceVisibility="hidden"),t.backfaceVisibility&&(t.WebkitBackfaceVisibility=t.backfaceVisibility),void 0!==e.perspective&&(t.perspective=t.WebkitPerspective=e.perspective),!0===e.center?(t.left="50%",t.top="50%"):"x"===e.center?t.left="50%":"y"===e.center&&(t.top="50%"),i.extractStyleFromProps(e,"size",t),i.extractStyleFromProps(e,"image",t),i.extractStyleFromProps(e,"width",t),i.extractStyleFromProps(e,"height",t),i.extractStyleFromProps(e,"top",t),i.extractStyleFromProps(e,"right",t),i.extractStyleFromProps(e,"bottom",t),i.extractStyleFromProps(e,"left",t),i.extractStyleFromProps(e,"position",t),i.extractStyleFromProps(e,"overflow",t),i.extractStyleFromProps(e,"opacity",t),e._border&&e._border.borderWidth||i.extractStyleFromProps(e,"border",t),i.extractStyleFromProps(e,"borderRadius",t),i.extractStyleFromProps(e,"radius",t,"borderRadius"),i.extractStyleFromProps(e,"color",t),i.extractStyleFromProps(e,"shadow",t,"boxShadow"),i.extractStyleFromProps(e,"x",t),i.extractStyleFromProps(e,"y",t),i.extractStyleFromProps(e,"z",t),i.extractStyleFromProps(e,"rotate",t),i.extractStyleFromProps(e,"rotateX",t),i.extractStyleFromProps(e,"rotateY",t),i.extractStyleFromProps(e,"rotateZ",t),i.extractStyleFromProps(e,"scale",t),i.extractStyleFromProps(e,"scaleX",t),i.extractStyleFromProps(e,"scaleY",t),i.extractStyleFromProps(e,"skew",t),i.extractStyleFromProps(e,"skewX",t),i.extractStyleFromProps(e,"skewY",t),i.extractStyleFromProps(e,"originX",t),i.extractStyleFromProps(e,"originY",t),i.extractStyleFromProps(e,"originZ",t),o.collectBackgroundFromProps(e,t),t}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.extractStyleFromProps=function extractStyleFromProps(e,t,n,i){void 0===i&&(i=t),void 0===e[t]||(n[i]=e[t])}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(509),o=n(510),r=n(59),s=(e,t)=>t&&"object"==typeof t?(i.invariant((e=>Boolean(e&&"object"==typeof e&&e.mix&&e.toValue))(t),"Motion styles must be numbers, strings, or an instance with a `toValue` and `mix` methods."),t.toValue()):(e=>"background"===e||e.endsWith("color")||e.endsWith("Color"))(e)&&"string"==typeof t&&r.Color.isColor(t)?r.Color(t).toValue():t,a=(e,t)=>{if(Array.isArray(t)){const n=t.length,i=[];for(let o=0;o<n;o++)i.push(s(e,t[o]));return i}return s(e,t)},l={size:{set:(e,t,n)=>{void 0===e.height&&(t.height=n),void 0===e.width&&(t.width=n)},type:o.px},image:{set:(e,t,n)=>{t.backgroundImage=n.startsWith("url(")?n:`url('${n}')`,void 0===e.backgroundSize&&(t.backgroundSize="cover")}},radius:{set:(e,t,n)=>{t.borderRadius=n},type:o.px},shadow:{set:(e,t,n)=>{t.boxShadow=n},type:o.complex}};t.transformValues=e=>{const t={};for(const n in e){const i=a(n,e[n]),o=l[n];if(o){const i=o.type&&"number"==typeof e[n]?o.type.transform(e[n]):e[n];o.set(e,t,i)}else t[n]=i}return t}},function(e,t){e.exports=require("hey-listen")},function(e,t){e.exports=require("style-value-types")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=new Set;let o;t.add=function add(e){i.has(e)||"undefined"==typeof document||(i.add(e),o||((o=document.createElement("style")).type="text/css",document.head&&document.head.appendChild(o)),o.appendChild(document.createTextNode(e)))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=(n(18),n(71)),r=n(59),s=n(310),a=n(314),l=n(233),c=n(226),d=n(21),u=n(53),h=n(33),p=n(1),g=n(341),m=n(156),f=n(337),y=n(336),v=n(180);function sizeSVG(e,t){const n=e.current;if(u.constraintsEnabled(t)||!n)return;const i=n.firstElementChild;if(!(i&&i instanceof SVGSVGElement))return;const{intrinsicWidth:o,intrinsicHeight:r,_constraints:s}=t;0===i.viewBox.baseVal.width&&0===i.viewBox.baseVal.height&&p.isFiniteNumber(o)&&p.isFiniteNumber(r)&&i.setAttribute("viewBox",`0 0 ${o} ${r}`),s&&s.aspectRatio?i.setAttribute("preserveAspectRatio",""):i.setAttribute("preserveAspectRatio","none"),i.setAttribute("width","100%"),i.setAttribute("height","100%")}t.SVG=function SVG(e){const t=u.useParentSize();return i.createElement(SVGComponent,Object.assign({},e,{parentSize:t}))};class SVGComponent extends o.Layer{constructor(){super(...arguments),this.container=i.createRef()}static frame(e){return u.calculateRect(e,e.parentSize||u.ParentSizeState.Unknown)}get frame(){return u.calculateRect(this.props,this.props.parentSize||u.ParentSizeState.Unknown)}componentDidMount(){sizeSVG(this.container,this.props)}componentDidUpdate(e){super.componentDidUpdate(e);const{fill:t}=this.props;if(p.BackgroundImage.isImageObject(t)&&p.BackgroundImage.isImageObject(e.fill)&&t.src!==e.fill.src){const e=f.elementForComponent(this);y.resetSetStyle(e,"fill",null,!1)}sizeSVG(this.container,this.props)}render(){const{id:e,visible:t,fill:n,rotation:o,svg:f,intrinsicHeight:y,intrinsicWidth:b,willChangeTransform:k,width:S,height:C}=this.props;if(!t||!e)return null;m.injectComponentCSSRules();const x=this.frame,w=x||{width:b||100,height:y||100},T={transform:`rotate(${h.Animatable.getNumber(o).toFixed(4)}deg)`,imageRendering:"pixelated",opacity:p.isFiniteNumber(this.props.opacity)?this.props.opacity:1},P={};if(x){Object.assign(T,{transform:`translate(${x.x}px, ${x.y}px) ${T.transform}`,width:`${x.width}px`,height:`${x.height}px`}),u.constraintsEnabled(this.props)&&(T.position="absolute");const e=x.width/(b||1),t=x.height/(y||1),{zoom:n}=d.RenderEnvironment,i=n>1?n:1;P.transform=`scale(${e*i}, ${t*i})`,P.transformOrigin="top left",P.zoom=1/i,b&&y&&(P.width=b,P.height=y)}else{const{left:e,right:t,top:n,bottom:i,center:o}=this.props;Object.assign(T,{left:e,right:t,top:n,bottom:i,width:S,height:C});let r="";!0===o?r="translate(-50%, -50%) ":"x"===o?r="translateX(-50%) ":"y"===o&&(r="translateY(-50%) "),T.transform=`${r}${T.transform}`,Object.assign(P,{left:0,top:0,bottom:0,right:0,position:"absolute"})}l.collectOpacityFromProps(this.props,T),c.collectFiltersFromProps(this.props,T),k&&(T.willChange="transform");let E=null;if("string"==typeof n||r.Color.isColorObject(n)){const e=r.Color.isColorObject(n)?n.initialValue||r.Color.toRgbString(n):n;T.fill=e,T.color=e}else if(s.LinearGradient.isLinearGradient(n)){const t=n,o=`${encodeURI(e||"")}g${s.LinearGradient.hash(t)}`;T.fill=`url(#${o})`;const r=v.elementPropertiesForLinearGradient(t,e);E=i.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%",style:{position:"absolute"}},i.createElement("linearGradient",{id:o,gradientTransform:`rotate(${r.angle}, 0.5, 0.5)`},r.stops.map((e,t)=>i.createElement("stop",{key:t,offset:e.position,stopColor:e.color,stopOpacity:e.alpha}))))}else if(a.RadialGradient.isRadialGradient(n)){const t=n,o=`${encodeURI(e||"")}g${a.RadialGradient.hash(t)}`;T.fill=`url(#${o})`;const r=v.elementPropertiesForRadialGradient(t,e);E=i.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%",style:{position:"absolute"}},i.createElement("radialGradient",{id:o,cy:t.centerAnchorY,cx:t.centerAnchorX,r:t.widthFactor},r.stops.map((e,t)=>i.createElement("stop",{key:t,offset:e.position,stopColor:e.color,stopOpacity:e.alpha}))))}else if(p.BackgroundImage.isImageObject(n)){const t=p.imagePatternPropsForFill(n,w,e);t&&(T.fill=`url(#${t.id})`,E=i.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"100%",height:"100%",style:{position:"absolute"}},i.createElement("defs",null,i.createElement(g.ImagePatternElement,Object.assign({},t)))))}return i.createElement("div",Object.assign({},{"data-framer-component-type":"SVG"},{id:e,style:T}),E,i.createElement("div",{key:p.BackgroundImage.isImageObject(n)?n.src:"",className:"svgContainer",style:P,ref:this.container,dangerouslySetInnerHTML:{__html:f}}))}}SVGComponent.supportsConstraints=!0,SVGComponent.defaultSVGProps={left:void 0,right:void 0,top:void 0,bottom:void 0,_constraints:{enabled:!0,aspectRatio:null},parentSize:u.ParentSizeState.Unknown,rotation:0,visible:!0,svg:"",shadows:[]},SVGComponent.defaultProps=Object.assign({},o.Layer.defaultProps,SVGComponent.defaultSVGProps)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(81),o=(n(18),n(0)),r=n(33),s=n(236),a=n(239),l=n(344),c=n(148),d=n(53),u=n(21),h=n(226),p=n(156),g=n(345),m=n(71),f=n(347);t.Text=function Text(e){const t=d.useParentSize();return o.createElement(TextComponent,Object.assign({},e,{parentSize:t}))};class TextComponent extends m.Layer{constructor(){super(...arguments),this.renderMain=e=>{const{font:t,fonts:n,visible:s,rotation:d,alignment:g,autoSize:m,clip:f,calculatedSize:y,opacity:v,willChangeTransform:b,id:k,_forwardedOverrides:S}=this.props,{zoom:C}=u.RenderEnvironment,x=this.frame;if(!s)return null;n&&a.fontStore.loadWebFontsFromSelectors(n),p.injectComponentCSSRules();const w=this.props.environment()===u.RenderTarget.canvas&&!e,T={wordWrap:"break-word",outline:"none",display:"inline-block",opacity:this.props.isEditable&&w?0:v,transform:`rotate(${r.Animatable.getNumber(d).toFixed(4)}deg)`},P={"data-framer-component-type":"Text"};if(x&&u.RenderTarget.hasRestrictions())Object.assign(T,{transform:`translate(${x.x}px, ${x.y}px) ${T.transform}`,width:m?"auto":`${x.width}px`,minWidth:`${x.width}px`,height:`${x.height}px`});else{const{left:e,right:t,top:n,bottom:i,width:o,height:r,center:s}=this.props;Object.assign(T,{left:e,right:t,top:n,bottom:i,width:m?"auto":o,minWidth:o,height:r});let a="";!0===s?a="translate(-50%, -50%) ":"x"===s?a="translateX(-50%) ":"y"===s&&(a="translateY(-50%) "),T.transform=`${a}${T.transform}`}h.collectFiltersFromProps(this.props,T),C>=8||c.collectTextShadowsForProps(this.props,T),1!==T.opacity&&void 0!==T.opacity||delete T.opacity,b&&(T.willChange="transform"),(f||!m&&x&&y.height>x.height)&&(T.overflow="hidden");let E=this.props.rawHTML,F=this.props.contentState,M=void 0;if(k&&S){"string"==typeof S[k]&&(M=S[k])}else M=this.props.text;return void 0!==M&&(E?E=function replaceHTMLWithText(e,t){return e.split('<span data-text="true">')[0]+'<span data-text="true">'+t+"</span></span>"}(E,M):F?F=function replaceContentStateWithText(e,t){const n=e.blocks[0]||{inlineStyleRanges:[]},i=t.length,o=[];return n.inlineStyleRanges.forEach(e=>{0===e.offset&&o.push(Object.assign({},e,{length:i}))}),{blocks:[Object.assign({},n,{text:t,inlineStyleRanges:o})],entityMap:{}}}(F,M):E=`<p style="font: ${t}">${M}</p>`),this.props.style&&Object.assign(T,this.props.style),E?(T.textAlign=g,T.whiteSpace="pre-wrap",T.wordWrap="break-word",T.lineHeight="1px",o.createElement("div",Object.assign({style:T},P,{dangerouslySetInnerHTML:{__html:E}}))):(this.editorState&&this.editorText===M||(this.editorText=M,this.editorState=this.editorStateForContentState(F)),o.createElement("div",Object.assign({style:T},P),o.createElement(i.Editor,{editorState:this.editorState,onChange:this.onChange,readOnly:!0,customStyleFn:l.draftStyleFunction,blockRendererFn:this.blockRendererFn,textAlignment:g})))},this.blockRendererFn=e=>f.draftBlockRendererFunction({editable:!1,alignment:this.props.alignment})(e),this.onChange=e=>{}}get frame(){return d.calculateRect(this.props,this.props.parentSize||d.ParentSizeState.Unknown,!1)}editorStateForContentState(e){return e?(e instanceof i.ContentState||(e=i.convertFromRaw(e)),i.EditorState.createWithContent(e)):i.EditorState.createEmpty()}componentWillReceiveProps(e){e.contentState!==this.props.contentState&&(this.editorState=this.editorStateForContentState(e.contentState))}render(){return o.createElement(g.ComponentContainerContext.Consumer,null,this.renderMain)}}TextComponent.supportsConstraints=!0,TextComponent.defaultTextProps={opacity:void 0,left:void 0,right:void 0,top:void 0,bottom:void 0,_constraints:{enabled:!0,aspectRatio:null},rotation:0,clip:!1,visible:!0,contentState:void 0,alignment:void 0,autoSize:!0,calculatedSize:{width:1,height:0},shadows:[],font:"16px "+s.deviceFont()},TextComponent.defaultProps=Object.assign({},m.Layer.defaultProps,TextComponent.defaultTextProps,{isEditable:!1,environment:u.RenderTarget.current})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(126),o=n(516);t.googleFontSelectorPrefix="GF;";t.GoogleFontSource=class GoogleFontSource{constructor(){this.name=i.TypefaceSourceNames.Google,this.typefaces=[],this.byFamily=new Map}parseSelector(e){if(!e.startsWith(t.googleFontSelectorPrefix))return null;const n=e.split("-");return 2!==n.length?null:{family:n[0].replace(t.googleFontSelectorPrefix,""),variant:n[1],source:this.name}}createTypeface(e){const t={family:e,fonts:[],source:this.name};return this.addTypeface(t),t}addTypeface(e){this.typefaces.push(e),this.byFamily.set(e.family,e)}loadWebFont(e,t,n){return o.loadWebFont(e,t,n)}importFonts(e){let t=[];return e.forEach(e=>{const n=e.variants.map(t=>({source:this.name,variant:t,family:e.family}));t=t.concat(n)}),t}}},function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))(function(o,r){function fulfilled(e){try{step(i.next(e))}catch(t){r(t)}}function rejected(e){try{step(i.throw(e))}catch(t){r(t)}}function step(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(fulfilled,rejected)}step((i=i.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const o=n(517),r=n(126);t.loadWebFont=function loadWebFont(e,t,n){const l=t&&t.length?`${e}:${t.join(",")}`:e,c=s.get(l);if(c)return c;const d=function loadWebFontNoCache(e,t){return i(this,void 0,void 0,function*(){yield new Promise((n,i)=>{o.load({active:()=>{n()},inactive:()=>{i()},fontactive:(e,n)=>{if(!t)return;const i=function fvdToVariant(e){return a.fontWeight[e[1]]+a.fontStyle[e[0]]||"regular"}(n),o={family:e,variant:i,source:r.TypefaceSourceNames.Google};t(o)},google:{families:[e]}})})})}(l,n);return s.set(l,d),d};const s=new Map;const a={fontStyle:{n:"",i:"italic",o:"oblique"},fontWeight:{1:"100",2:"200",3:"300",4:"",5:"500",6:"600",7:"700",8:"800",9:"900"}}},function(e,t){e.exports=require("webfontloader")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(126),o=n(342);t.LocalFontSource=class LocalFontSource{constructor(){this.name=i.TypefaceSourceNames.Local,this.typefaces=[],this.byFamily=new Map,this.typefaceAliasBySelector=new Map}createTypeface(e){const t={family:e,fonts:[],source:this.name};return this.addTypeface(t),t}addTypeface(e){this.typefaces.push(e),this.byFamily.set(e.family,e)}importFonts(){let e=[];for(const t of o.typefaces.keys()){const n=o.typefaces.get(t);if(!n)continue;const i=this.createTypeface(t);for(const e of n.keys()){const t=n.get(e);if(!t)continue;const{selector:o,weight:r}=t,s={variant:e,selector:o,weight:r,typeface:i,status:"loaded"};i.fonts.push(s)}e=e.concat(i.fonts)}for(const[t,n]of Object.entries(o.typefaceAliases))this.typefaceAliasBySelector.set(n,t);return e}getTypefaceAliasBySelector(e){return this.typefaceAliasBySelector.get(e)||null}getTypefaceSelectorByAlias(e){return o.typefaceAliases[e]||null}isTypefaceAlias(e){return!(!e||!e.match(/^__.*__$/))}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(240),r=n(71),s=n(348),a=n(321),l=n(148),c=n(520),d=n(341),u=n(349),h=n(318),p=n(59),g=n(521),m=n(21),f=n(21),y=n(150),v=n(104),b=n(180),k=n(309);n(18);class Vector extends r.Layer{render(){const{opacity:e,calculatedPath:t,insideStroke:n,shapeId:r,strokeEnabled:s,strokeClipId:S,strokeWidth:C,idAttribute:x,rect:w,shadows:T,strokeAlpha:P,name:E,includeTransform:F,isRootVectorNode:M,rotation:_,id:O,lineCap:I,lineJoin:D,strokeColor:N,strokeMiterLimit:R,strokeDashArray:A,strokeDashOffset:L,fill:B}=this.props;if(!O||!r||!S)return null;const{zoom:j,target:H}=f.RenderEnvironment,z=u.transformValues(w,_,M,F);let $,V,U,G,W=0;if("string"==typeof B||p.Color.isColorObject(B)){const e=p.Color.isColorObject(B)?B.initialValue||p.Color.toRgbString(B):B;"transparent"!==e&&($=e,W=p.ConvertColor.getAlpha($))}else y.LinearGradient.isLinearGradient(B)?($=`url(#${(U=b.elementPropertiesForLinearGradient(B,O)).id})`,W=1):y.RadialGradient.isRadialGradient(B)?($=`url(#${(G=b.elementPropertiesForRadialGradient(B,O)).id})`,W=1):v.BackgroundImage.isImageObject(B)&&(V=h.imagePatternPropsForFill(B,z,O))&&($=`url(#${V.id})`,W=1);let K;$===g.svgElementAttributeDefaults.fill&&($=void 0),void 0===$&&($="transparent"),void 0!==$&&"transparent"!==$&&0!==W||s||(W=1);let X,Y,q=null,Z=null,J=null;const Q=H===m.RenderTarget.export;0===z.rotation&&Q?X=z:(X={x:0,y:0},Y=o.transformString(z));const ee={d:a.toSVGPath(t,X,H),transform:Y},te={};s&&0!==C&&(te.strokeWidth=C,te.stroke=N,te.strokeLinecap=I,te.strokeLinejoin=D,"miter"===D&&(te.strokeMiterlimit=R),te.strokeDasharray=A,0!==L&&(te.strokeDashoffset=L));for(const i in g.svgElementAttributeDefaults)te[i]===g.svgElementAttributeDefaults[i]&&(te[i]=void 0);const ne=k.InternalID.forKey(r),ie=k.InternalID.forKey(S),oe=l.shadowForShape(T,w,ne,W,P,C,ie,te,j,H),re=H===m.RenderTarget.preview&&E||void 0;null!==oe.insetElement||null!==oe.outsetElement||n?(ee.id=ne.id,Z=i.createElement("path",Object.assign({},Object.assign({},ee))),(oe.needsStrokeClip||n)&&(q=i.createElement("clipPath",{id:ie.id},i.createElement("use",{xlinkHref:ne.link}))),null!==oe.insetElement&&s&&C&&C>0?(K=i.createElement("use",{xlinkHref:ne.link,fill:$,strokeOpacity:"0",name:re}),J=i.createElement("use",Object.assign({xlinkHref:ne.link,clipPath:ie.urlLink,fill:"transparent"},te,{strokeWidth:C}))):K=i.createElement("use",Object.assign({xlinkHref:ne.link,fill:$,clipPath:ie.urlLink},te,{strokeWidth:C,name:re}))):(ee.id=x,K=i.createElement("path",Object.assign({},Object.assign({},ee,{fill:$},te),{name:re})));const se=V?i.createElement(d.ImagePatternElement,Object.assign({},V)):void 0;let ae;U?ae=i.createElement(c.LinearGradientElement,Object.assign({},U)):G&&(ae=i.createElement(c.RadialGradientElement,Object.assign({},G)));let le=null;return(Z||q||oe.definition&&oe.definition.length||ae||se)&&(le=i.createElement("defs",null,Z,q,oe.definition,ae,se)),null===le&&null===oe.outsetElement&&null===oe.insetElement&&null===J?(K=i.createElement("path",Object.assign({},Object.assign({},ee,{fill:$,opacity:e},te),{name:re})),this.renderElement(K)):this.renderElement(i.createElement("g",{opacity:e},le,oe.outsetElement,K,oe.insetElement,J))}renderElement(e){const{isRootVectorNode:t,width:n,height:o,frame:r,willChangeTransform:a}=this.props;return t?i.createElement(s.SVGRoot,Object.assign({},{frame:r,width:n,height:o,willChangeTransform:a}),e):e}}Vector.defaultVectorProps={isRootVectorNode:!1,name:null,includeTransform:void 0,defaultFillColor:void 0,defaultStrokeColor:void 0,defaultStrokeWidth:void 0,defaultStrokeAlignment:"center",width:100,height:100,rotation:0,frame:{x:0,y:0,width:100,height:100},opacity:void 0,calculatedPath:[],shapeId:void 0,insideStroke:!1,strokeEnabled:!0,strokeClipId:void 0,strokeWidth:void 0,idAttribute:void 0,shadows:[],strokeAlpha:1,rect:{x:0,y:0,width:0,height:0},lineCap:"butt",strokeColor:"#0AF",lineJoin:"miter",strokeMiterLimit:4,strokeDashArray:"0",strokeDashOffset:0,fill:"rgba(0,170,255,0.5)"},Vector.defaultProps=Object.assign({},r.Layer.defaultProps,Vector.defaultVectorProps),t.Vector=Vector},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0);t.LinearGradientElement=class LinearGradientElement extends i.Component{render(){const{id:e,angle:t,stops:n}=this.props;return i.createElement("linearGradient",{id:e,gradientTransform:`rotate(${t}, 0.5, 0.5)`},n.map((e,t)=>i.createElement("stop",{key:t,offset:e.position,stopColor:e.color,stopOpacity:e.alpha})))}};t.RadialGradientElement=class RadialGradientElement extends i.Component{render(){const{centerAnchorX:e,centerAnchorY:t,id:n,widthFactor:o,heightFactor:r,stops:s}=this.props;return i.createElement("radialGradient",{id:n,cy:t,cx:e,r:o,gradientTransform:`translate(${e}, ${t}) scale(1 ${r/o}) translate(-${e}, -${t})`},s.map((e,t)=>i.createElement("stop",{key:t,offset:e.position,stopColor:e.color,stopOpacity:e.alpha})))}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.svgElementAttributeDefaults={stroke:"none",strokeWidth:1,strokeLinecap:"butt",strokeLinejoin:"miter",strokeMiterlimit:4,strokeDasharray:"0",strokeDashoffset:0,strokeOpacity:1,fill:"black",fillRule:"nonzero",fillOpacity:1}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(240),r=n(71),s=n(348),a=n(349),l=n(21),c=n(21);n(18);class VectorGroup extends r.Layer{render(){const{id:e,name:t,opacity:n,visible:r,targetName:s,defaultName:d,children:u,includeTransform:h,x:p,y:g,width:m,height:f,rotation:y,isRootVectorNode:v}=this.props;if(!r)return null;const{target:b}=c.RenderEnvironment,k={x:p,y:g,width:m,height:f},S=a.transformValues(k,y,v,h);let C=void 0;return b===l.RenderTarget.preview&&(C=s||(t||d)),this.renderElement(i.createElement("g",Object.assign({transform:o.transformString(S)},{id:e,name:C,opacity:n}),u))}renderElement(e){const{isRootVectorNode:t,width:n,height:o,frame:r,willChangeTransform:a}=this.props;return t?i.createElement(s.SVGRoot,Object.assign({},{frame:r,width:n,height:o,willChangeTransform:a}),e):e}}VectorGroup.defaultVectorGroupProps={name:void 0,opacity:void 0,visible:!0,x:0,y:0,rotation:0,width:100,height:100,targetName:void 0,defaultName:"",isRootVectorNode:!1,includeTransform:void 0,frame:{x:0,y:0,width:100,height:100}},VectorGroup.defaultProps=Object.assign({},r.Layer.defaultProps,VectorGroup.defaultVectorGroupProps),t.VectorGroup=VectorGroup},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(151),r=n(525),s=n(238),a=n(350),l=n(307);n(18);function addServerUrlToResourceProps(e){const t=e.__serverResources;if(t&&Array.isArray(t)){const n=e;e=Object.assign({},e);for(const i of t)if(Array.isArray(i)){const[t,o]=i;let r=e[t];if(!r)continue;n[t]===r&&(r=r.slice(),e[t]=r),r[o]=l.serverURL(r[o])}else if("string"==typeof i){const t=e[i];if(!t)continue;e[i]=l.serverURL(t)}}return e}function convertPresentationTree(e,t,n){const i=n&&n(e);if(i)return i;let o;return!function isCodeComponentContainerPresentation(e){return!!e.codeComponentIdentifier}(e)?e.children&&(o=e.children.map(e=>convertPresentationTree(e,t,n))):o=function convertCodeComponentContainer(e,t,n){const i=e.getComponentChildren?e.getComponentChildren():[],o=e.getComponentSlotChildren?e.getComponentSlotChildren():{};let r;const l=e.getCodeComponentProps?e.getCodeComponentProps():void 0;if(e.cache.codeComponentPresentation)r=e.cache.codeComponentPresentation,a.isShallowEqualArray(r.children,i)||(r.cache.reactElement=null,r.children=i),s.isEqual(r.props,l)||(r.cache.reactElement=null,r.cache.props=null,r.props=l);else{const{id:t,codeComponentIdentifier:n}=e;e.cache.codeComponentPresentation=r=new CodeComponentPresentation(t+n,n,l,i)}r.props.placeholders=e.cache.placeholders;const c=Object.keys(o);if(c.length){r.props=Object.assign({},r.props),r.props.__slotKeys=c;for(const e of c){const i=o[e].map(e=>convertPresentationTree(e,t,n));r.props[e]=i}}return[t(r,r.children.map(e=>convertPresentationTree(e,t,n)))]}(e,t,n),t(e,o)}t.addServerUrlToResourceProps=addServerUrlToResourceProps,t.renderPresentationTree=function renderPresentationTree(e,t){return convertPresentationTree(e,function reactConverter(e){return function(t,n){const s=t.cache;let a=s.props;a||(a=s.props=t.getProps());const l=s.canvasZoom,c=s.willChangeTransform;if((l||c)&&(a=Object.assign({},a,{canvasZoom:l,willChangeTransform:c})),a=addServerUrlToResourceProps(a),t instanceof CodeComponentPresentation){const e=o.componentLoader.componentForIdentifier(t.componentIdentifier);if(!e){const e=o.componentLoader.errorForIdentifier(t.componentIdentifier);return e?null:s.reactElement=i.createElement(r.ComponentContainerLoader,{key:"component-container-loader",error:e})}return o.isReactDefinition(e)?s.reactElement=i.createElement(e.class,a,n):null}{const o=e(t);return s.reactElement=i.createElement(o,a,n)}}}(t),e=>e.cache.reactElement)},t.convertPresentationTree=convertPresentationTree;class CodeComponentPresentation{constructor(e,t,n,i,o){this.id=e,this.componentIdentifier=t,this.props=n,this.children=i,this.codeOverrideIdentifier=o,this.cache={},this.getProps=()=>Object.assign({},this.props,{id:this.id,key:this.id}),this.rect=e=>({x:0,y:0,width:0,height:0})}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(346);n(18);t.ComponentContainerLoader=e=>{let t,n,r=o.PlaceholderType.Loading;if(e.error){r=o.PlaceholderType.Error;const{error:i,file:s}=e.error;t=s,n=i instanceof Error?i.message:i}return i.createElement(o.ComponentPlaceholder,{type:r,title:t,message:n})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(97),r=n(1);function contains3Dprops(e){return!!e&&("rotateX"in e||"rotateY"in e||"z"in e)}t.NavigationContainer=class NavigationContainer extends i.Component{constructor(){super(...arguments),this.unmounted=!1,this.state={visible:!0,containerPerspective:0,previousProps:null,origins:{}},this.onTransitionEnd=()=>{if(this.unmounted)return;const e=!this.props.hideAfterTransition&&this.state.visible,t=function needsPerspective(e){if(!e)return!1;const{rotateX:t,rotateY:n,z:i}=e;return!(!r.isFiniteNumber(t)||t%180==0)||!(!r.isFiniteNumber(n)||n%180==0)||!(!r.isFiniteNumber(i)||0===i)}(this.props.transitionProps)?1200:0;e===this.state.visible&&t===this.state.containerPerspective||this.setState({visible:e,containerPerspective:t})}}componentWillUnmount(){this.unmounted=!0}static getDerivedStateFromProps(e,t){if(r.isEqual(e,t.previousProps))return null;const n=Object.assign({},t,{previousProps:e});e.visible&&!e.hideAfterTransition&&(n.visible=!0),e.visible||(n.visible=!1);const i=contains3Dprops(e.transitionProps)||contains3Dprops(e.initialProps);return n.containerPerspective=i?1200:0,n.origins=function getOriginProps(e,t,n){const i=Object.assign({},e);return t&&(r.isFiniteNumber(t.originX)&&(i.originX=t.originX),r.isFiniteNumber(t.originY)&&(i.originY=t.originY),r.isFiniteNumber(t.originZ)&&(i.originZ=t.originZ)),n&&(r.isFiniteNumber(n.originX)&&(i.originX=n.originX),r.isFiniteNumber(n.originY)&&(i.originY=n.originY),r.isFiniteNumber(n.originZ)&&(i.originZ=n.originZ)),i}(t.origins,e.initialProps,e.transitionProps),n}componentDidUpdate(){(this.props.instant||!1===this.props.animation.type)&&this.onTransitionEnd()}render(){const{backdropColor:e,onTapBackdrop:t,backfaceVisible:n,hideAfterTransition:r,animation:a,instant:l,initialProps:c,transitionProps:d,position:u={top:0,right:0,bottom:0,left:0}}=this.props,{visible:h,containerPerspective:p,origins:g}=this.state,m=l?{type:!1}:a,f=Object.assign({},u);return void 0!==f.left&&void 0!==f.right||(f.width="auto"),void 0!==f.top&&void 0!==f.bottom||(f.height="auto"),i.createElement(o.FrameWithMotion,{width:"100%",height:"100%",style:{position:"absolute",transformStyle:"flat",background:"transparent",overflow:"hidden",perspective:p,visibility:h?"visible":"hidden"}},i.createElement(o.FrameWithMotion,{width:"100%",height:"100%",transition:m,initial:{opacity:l&&h?1:0},animate:{opacity:r?0:1},background:e||"transparent",onTap:t}),i.createElement(o.FrameWithMotion,Object.assign({},f,{initial:Object.assign({},s,g,c),animate:Object.assign({},s,g,d),transition:{default:m,originX:{type:!1},originY:{type:!1},originZ:{type:!1}},background:"transparent",backfaceVisible:n,"data-framer-component-type":"NavigationContainer",onAnimationComplete:this.onTransitionEnd}),this.props.children,r&&i.createElement(o.FrameWithMotion,{position:"absolute",top:0,left:0,width:"100%",height:"100%",backgroundColor:"transparent",style:{pointerEvents:"auto"}})))}};const s={x:0,y:0,z:0,rotate:0,rotateX:0,rotateY:0,rotateZ:0,scale:1,scaleX:1,scaleY:1,scaleZ:1,skew:0,skewX:0,skewY:0,originX:.5,originY:.5,originZ:0,opacity:1}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.navigatorMock=new class NavigatorMock{constructor(){this.warning=()=>{console.warn("The Navigator API is only available inside of Framer X. Get it at http://framer.com/download")},this.goBack=()=>this.warning(),this.instant=()=>this.warning(),this.fade=()=>this.warning(),this.push=()=>this.warning(),this.modal=()=>this.warning(),this.overlay=()=>this.warning(),this.flip=()=>this.warning(),this.customTransition=()=>this.warning()}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.Previous="@Previous"}(t.NavigateTo||(t.NavigateTo={})),function(e){e.push="push",e.instant="instant",e.fade="fade",e.modal="modal",e.overlay="overlay",e.flip="flip"}(t.NavigationTransitionType||(t.NavigationTransitionType={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(185);t.useNavigation=function useNavigation(){return i.useContext(o.NavigationContext)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i="childInsertion";t.withChildInsertion=function withChildInsertion(e){return i in e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i="childLayoutRects";t.providesChildLayout=function providesChildLayout(e){return i in e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i="freeSpace";function providesFreeSpace(e){return e&&i in e&&"function"==typeof e[i]}t.providesFreeSpace=providesFreeSpace,t.toFreeSpace=function toFreeSpace(e,t,n,i,o){return providesFreeSpace(e)&&n?e.freeSpace(t,n,i,o):null}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i="autoSize";function hasAutoSize(e){return e&&i in e&&"function"==typeof e[i]}t.hasAutoSize=hasAutoSize,t.toAutoSize=function toAutoSize(e,t,n,i){return hasAutoSize(e)?e.autoSize(t,n,i):null}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i="_cssExport";t.withCSSExport=function withCSSExport(e){return i in e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(182),o="paddingSize";function providesPaddingSize(e){return e&&o in e&&"function"==typeof e[o]}t.providesPaddingSize=providesPaddingSize,t.toPaddingSize=function toPaddingSize(e,t){return providesPaddingSize(e)?e.paddingSize(t):i.Size.zero}},function(e,t,n){"use strict";var i=this&&this.__rest||function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(i=Object.getOwnPropertySymbols(e);o<i.length;o++)t.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(e,i[o])&&(n[i[o]]=e[i[o]])}return n};Object.defineProperty(t,"__esModule",{value:!0});const o=n(0),r=n(1),s=n(352),a=n(18);class CanvasStore{constructor(){this.canvas={children:[]},this.listeners=[],this.ids=[]}static shared(e){if(e){const t=new CanvasStore;return t.setCanvas(e),t}return CanvasStore.__shared||(CanvasStore.__shared=new CanvasStore),CanvasStore.__shared}updateNode(e){const t=e.props.id;let n=this.canvas.children;n||(this.canvas.children=n=[]);let i=!1;for(let o=0;o<n.length;o++){if(n[o].props.id===t){i=!0,n[o]=e;break}}i||n.push(e),this.setCanvas(this.canvas)}setCanvas(e){e.children&&(this.canvas=e,this.listeners.forEach((t,n)=>{const i=this.ids[n],o=findNodeFor(e,i);t.setState({data:o})}))}registerListener(e,t){return this.listeners.push(e),this.ids.push(t),findNodeFor(this.canvas,t)}removeListener(e){const t=this.listeners.indexOf(e);t<0||(this.listeners.splice(t,1),this.ids.splice(t,1))}}CanvasStore.__shared=null,t.CanvasStore=CanvasStore;const l={Frame:r.Frame,Vector:r.Vector,VectorGroup:r.VectorGroup,SVG:r.SVG,Text:r.Text,ComponentContainer:r.ComponentContainer};function hasSelfInParentChain(e){const t=e.constructor;let n=e._reactInternalFiber;if(!n)return console.warn("_reactInternalFiber not found for:",e),!1;for(n=n.return;n;){const e=n.stateNode;if(e&&e.constructor===t)return!0;n=n.return}return!1}t.hasSelfInParentChain=hasSelfInParentChain;class DesignComponent extends o.Component{constructor(){super(...arguments),this.checkedParent=!1,this.parentError=!1}hasParentError(){return this.checkedParent||(this.checkedParent=!0,this.parentError=hasSelfInParentChain(this)),this.parentError}_typeForName(e){const t=l[e];if(t)return t;const n=r.componentLoader.componentForIdentifier(e);return n&&r.isReactDefinition(n)?n.class:r.Frame}_renderData(e,t,n){a.safeWindow.__checkBudget__();const{componentClass:r,name:s}=e;let{props:l,children:c}=e;l=Object.assign({},l,{_constraints:{enabled:!1}});const d=this._typeForName(r);if(!d)return null;if(n){const{style:e}=l,t=i(l,["style"]);l=Object.assign({},t,n,{_initialStyle:e})}if(!l.size&&l._sizeOfMasterOnCanvas&&(l.width||(l.width=l._sizeOfMasterOnCanvas.width),l.height||(l.height=l._sizeOfMasterOnCanvas.height)),s&&t.hasOwnProperty(s))if("Text"===r){t[s]&&(l=Object.assign({},l,{text:t[s]}))}else{const e=l.background,n={src:t[s],fit:e.fit};l=Object.assign({},l,{background:n})}const u=c&&c.map((e,n)=>this._renderData(e,t,void 0));return c=c?u:[],o.createElement(d,l,c)}render(){if(a.safeWindow.__checkBudget__(),this.hasParentError())return o.createElement("div",{style:c},o.createElement("p",{style:d},"Design Component cannot be nested in itself."));return this.state.data?this._renderData(this.state.data,this.props,this.props):o.createElement("div",{style:c},o.createElement("p",{style:d},"Unable to connect to canvas data store."))}}function isNode(e,t){const{name:n,props:i}=t;return i&&i.id===e||n===e}function findNodeFor(e,t){if(!e)return null;if(isNode(t,e))return e;const{children:n}=e;if(!n||!s.isArray(n))return null;for(const i of n)if(isNode(t,i))return i;for(const i of n){const e=findNodeFor(i,t);if(e)return e}return null}t.createDesignComponent=function createDesignComponent(e,t,n,i=200,o=200){var s;return(s=class extends DesignComponent{constructor(n,i){super(n,i);const o=e.registerListener(this,t);this.state={data:o}}static rect(e){const t=r.ConstraintValues.fromProperties(e);return r.ConstraintValues.toRect(t,e.parentSize||null,null)}static minSize(e,t){const n=r.ConstraintValues.fromProperties(e);return r.ConstraintValues.toMinSize(n,t||null)}static size(e,t,n){const i=r.ConstraintValues.fromProperties(e);return r.ConstraintValues.toSize(i,t||null,null,n)}componentWillUnmount(){e.removeListener(this)}}).displayName=`DesignComponent(${t})`,s.propertyControls=n,s.supportsConstraints=!0,s.defaultProps={_sizeOfMasterOnCanvas:{width:i,height:o}},s};const c={display:"flex",alignItems:"center",flexDirection:"column",justifyContent:"center",backgroundColor:"rgba(255, 0, 85, .1)",fontSize:"11px",lineHeight:"1.2em"},d={listStyle:"disc inside",margin:0,padding:0,paddingLeft:0,color:"rgba(255, 0, 85, .5)",textOverflow:"ellipsis",overflow:"hidden",textAlign:"left"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Palette={blue:"#0099FF",magenta:"#FF5AAA",red:"#EE4444",black:"#000",oil:"#222",metal:"#444",aluminum:"#666",ash:"#888",gray:"#AAA",platinum:"#BBB",silver:"#CCC",cloud:"#DDD",snow:"#EEE",white:"#FFF"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(539);t.componentLoader=i.componentLoader,t.ComponentLoaderInterface=i.ComponentLoaderInterface;var o=n(368);t.isErrorDefinition=o.isErrorDefinition;var r=n(370);t.isDesignDefinition=r.isDesignDefinition;var s=n(371);t.findMasters=s.findMasters;var a=n(588);t.ProjectBundleScriptsMap=a.ProjectBundleScriptsMap,t.ProjectBundleGlobalEnvironment=a.ProjectBundleGlobalEnvironment;var l=n(589);t.extractComponentDefinitionsFromScript=l.extractComponentDefinitionsFromScript},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(82),r=n(366),s=n(367),a=n(368),l=n(369),c=n(370),d=n(580),u=n(248),h=n(581),p=n(582),g=n(587),m=/[^a-zA-Z]/g;t.componentLoader=new class ComponentLoader{constructor(){this.state={localPackageIdentifier:l.localPackageFallbackIdentifier,packages:{},components:{},definitionsByPackage:{},visibleComponentIdentifiers:[],visiblePackageNames:[],visiblePackageFileNames:{},tokensByPackage:{}}}componentForIdentifier(e){return this.state.components[e]||null}componentsForPackage(e){return this.state.definitionsByPackage[e]||[]}componentIdentifiers(){return this.state.visibleComponentIdentifiers}errorForIdentifier(e){const{components:t,visiblePackageFileNames:n}=this.state,i=s.extractComponentNameFromIdentifier(e);for(const s in n){if(!n[s].includes(i))return r.createErrorDefinition(e,"Component file does not exist.",{fileDoesNotExist:!0});if(n[s].includes(i)&&!(i in t))return r.createErrorDefinition(e,"Component cannot be found.")}const o=t[i];return a.isErrorDefinition(o)?o:null}forEachComponent(e){for(const t of this.state.visibleComponentIdentifiers){const n=this.state.components[t];if(!a.isErrorDefinition(n)&&e(n))break}}forEachDesignComponents(e){this.forEachComponent(t=>{if(c.isDesignDefinition(t))return e(t)})}localPackageIdentifier(){return this.state.localPackageIdentifier}packageDisplayName(e){const t=this.state.packages[e];return t&&t.displayName}packageIdentifiers(){return this.state.visiblePackageNames}packageFileNames(e){return this.state.visiblePackageFileNames[e]}tokensForPackage(e){return this.state.tokensByPackage[e]}updateStateWithScripts(e,t,n={}){const o=e=>{if("react"===e)return i;if("react-dom"===e||"ReactDOM"===e)return d.optionalReactDOM();if("framer"===e)return t;if("framer/resource"===e)return{};throw Error(`Component loader: Can't require ${e}`)},r=window,s=document.head;if(!s)throw Error("assert: head is not present");const c={exports:{}};["vendors.js","index.js"].forEach(t=>{let n=e[t];if(!n){if("index.js"!==t||!e["vendors.js"])return;n=r.componentScript}const i=t.replace(m,"_"),a=`eval_${i}_script`,l=`bundle_script_${i}`,d=`function ${a}(module, exports, require) {\n${n}\n}\n${`//# sourceURL=${t}`}`;try{const e=s.querySelector(`.${l}`);e&&s.removeChild(e);const n=document.createElement("script");n.className=l,n.setAttribute("type","text/javascript"),n.textContent=d,s.appendChild(n),"index.js"===t&&(r.componentScript=d,r.componentSrc=n.src||location.toString()),r[a](c,c.exports,o)}catch(h){return void u.warn("An error occurred while reloading",h)}});let f=l.localPackageFallbackIdentifier;if(c.exports.__framer__){const{packageJson:e}=c.exports.__framer__;e&&e.name&&(f=e.name)}const y=h.collectPackages(c.exports),v=Object.assign({},n),b={},k=[],S=[],C={},x={};for(const i of Object.keys(y)){const e=y[i];e.depth<=1&&(S.push(i),C[i]=Object.keys(e.sourceModules));const t=p.collectEntities(e);b[i]=[];for(const n of Object.keys(t)){const o=t[n];a.isErrorDefinition(o)||(b[i].push(o),e.depth<=1&&k.push(n))}Object.assign(v,t),x[i]=g.collectTokens(e)}S.sort((e,t)=>y[e].displayName.localeCompare(y[t].displayName)),this.state={localPackageIdentifier:f,packages:y,components:v,definitionsByPackage:b,visibleComponentIdentifiers:k,visiblePackageNames:S,visiblePackageFileNames:C,tokensByPackage:x}}},o.componentLoader.componentForIdentifier=e=>t.componentLoader.componentForIdentifier(e),o.componentLoader.componentsForPackage=e=>t.componentLoader.componentsForPackage(e),o.componentLoader.componentIdentifiers=()=>t.componentLoader.componentIdentifiers(),o.componentLoader.errorForIdentifier=e=>t.componentLoader.errorForIdentifier(e),o.componentLoader.forEachComponent=e=>t.componentLoader.forEachComponent(e),o.componentLoader.forEachDesignComponents=e=>t.componentLoader.forEachDesignComponents(e),o.componentLoader.localPackageIdentifier=()=>t.componentLoader.localPackageIdentifier(),o.componentLoader.packageDisplayName=e=>t.componentLoader.packageDisplayName(e),o.componentLoader.packageIdentifiers=()=>t.componentLoader.packageIdentifiers(),o.componentLoader.packageFileNames=e=>t.componentLoader.packageFileNames(e),o.componentLoader.tokensForPackage=e=>t.componentLoader.tokensForPackage(e)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(353);t.Scroll=i.Scroll,t.ScrollProps=i.ScrollProps,t.ScrollEvents=i.ScrollEvents,t.ScrollConfig=i.ScrollConfig;var o=n(545);t.DeprecatedScroll=o.DeprecatedScroll,t.DeprecatedScrollProps=o.DeprecatedScrollProps,t.DeprecatedScrollEvents=o.DeprecatedScrollEvents,t.DeprecatedScrollProperties=o.DeprecatedScrollProperties;var r=n(358);t.Screen=r.Screen;var s=n(185);t.Navigation=s.Navigation;var a=n(357);t.Draggable=a.Draggable;var l=n(245);t.Device=l.Device;var c=n(558);t.Page=c.Page,t.PageEffect=c.PageEffect,t.PageEffectInfo=c.PageEffectInfo,t.PageProps=c.PageProps,t.PageProperties=c.PageProperties,t.PageEvents=c.PageEvents,t.PageAlignment=c.PageAlignment;var d=n(561);t.StackProperties=d.StackProperties,t.StackSpecificProps=d.StackSpecificProps,t.Stack=d.Stack;var u=n(247);t.calcChildLayoutRects=u.calcChildLayoutRects},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(354);function reportSize(e,t,n){if(!e)return;const i=[...e.children];let o=0,r=0;i.forEach(e=>{o=Math.max(o,e.scrollHeight+e.offsetTop),r=Math.max(r,e.scrollWidth+e.offsetLeft)}),t.width===r&&t.height===o||n({width:r,height:o})}t.useChildrenSize=function useChildrenSize(e,t={}){const{observe:n=!1,skipHook:r=!1,initial:s={width:0,height:0}}=t,[a,l]=i.useState(s);return o.useResizeObserver(e,()=>{reportSize(e.current,a,l)},{skipHook:r||!n,observeChildren:!0}),i.useEffect(()=>{r||n||reportSize(e.current,a,l)}),r?s:a}},function(e,t){e.exports=require("resize-observer-polyfill")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(354);function reportSize(e,t,n){if(!e)return;const i=e.offsetHeight,o=e.offsetWidth;t.width===o&&t.height===i||n({width:o,height:i})}t.useMeasureSize=function useMeasureSize(e,t={}){const{observe:n=!1,skipHook:r=!1,initial:s={width:0,height:0}}=t,[a,l]=i.useState(s);return o.useResizeObserver(e,()=>{reportSize(e.current,a,l)},{skipHook:r||!n}),i.useLayoutEffect(()=>{r||n||reportSize(e.current,a,l)}),r?s:a}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(357),o=n(0),r=n(1),s=n(355),a=n(546),l=n(186),c=n(53);class DeprecatedScroll extends o.Component{wrapHandlers(e,t){return t?(n,i)=>{e&&e(n,i),t(n,this)}:e}render(){return o.createElement(c.ConsumeParentSize,null,({size:e})=>{const t=c.deprecatedParentSize(e),n=Object.assign({},this.props,{parentSize:t});if(Object.keys(DeprecatedScroll.scrollProps).map(e=>{delete n[e]}),!this.props.children)return o.createElement(r.DeprecatedFrame,Object.assign({},n),o.createElement(i.Draggable,{width:n.width,height:n.height}));const d={top:0,left:0,bottom:0,right:0},{width:u,height:h}=r.DeprecatedFrame.rect(n),p=o.Children.map(this.props.children,e=>{if(null===e||"object"!=typeof e||"string"==typeof e.type)return e;const n=e.type;if(s.isRectProviding(n)){const i=n.rect(e.props,t);i&&(d.top=Math.min(r.Rect.minY(i),d.top),d.left=Math.min(r.Rect.minX(i),d.left),d.bottom=Math.max(r.Rect.maxY(i),d.bottom),d.right=Math.max(r.Rect.maxX(i),d.right))}const i={};return"vertical"===this.props.direction?i.width=u:"horizontal"===this.props.direction&&(i.height=h),o.cloneElement(e,i)}),{onScrollStart:g,onScroll:m,onScrollEnd:f,onScrollSessionStart:y,onScrollSessionEnd:v}=this.props,b=a.getObservableNumber(u),k=a.getObservableNumber(h),S=Math.max(d.right,b),C=Math.max(d.bottom,k),x={x:Math.min(0,b-S),y:Math.min(0,k-C),width:S+S-b,height:C+C-k},w={};return w.enabled=this.props.draggingEnabled,w.background="none",w.width=S,w.height=C,w.constraints=x,w.onMove=this.props.onMove,w.onDragSessionStart=this.wrapHandlers(this.props.onDragSessionStart,y),w.onDragSessionMove=this.props.onDragSessionMove,w.onDragSessionEnd=this.wrapHandlers(this.props.onDragSessionEnd,v),w.onDragAnimationStart=this.props.onDragAnimationStart,w.onDragAnimationEnd=this.props.onDragAnimationEnd,w.onDragDidMove=this.wrapHandlers(this.props.onDragDidMove,m),w.onDragDirectionLockStart=this.props.onDragDirectionLockStart,w.onDragStart=this.wrapHandlers(this.props.onDragStart,g),w.onDragEnd=this.wrapHandlers(this.props.onDragEnd,f),w.onDragWillMove=this.props.onDragWillMove,w.horizontal="vertical"!==this.props.direction,w.vertical="horizontal"!==this.props.direction,w.directionLock=this.props.directionLock,w.mouseWheel=!0,w.left=this.props.contentOffsetX,w.top=this.props.contentOffsetY,w.preserve3d=this.props.preserve3d,o.createElement(r.DeprecatedFrame,Object.assign({},n),o.createElement(i.Draggable,Object.assign({},w),p),o.createElement(l.EmptyState,{children:this.props.children,size:{width:b,height:k},title:"Connect to scrollable content"}))})}}DeprecatedScroll._isStylable=!0,DeprecatedScroll.supportsConstraints=!0,DeprecatedScroll.scrollProps={draggingEnabled:!0,direction:"vertical",directionLock:!0,mouseWheel:!0,contentOffsetX:null,contentOffsetY:null},DeprecatedScroll.defaultProps=Object.assign({},r.DeprecatedFrame.defaultProps,DeprecatedScroll.scrollProps,{overflow:"visible",background:"none",width:"100%",height:"100%"}),DeprecatedScroll.propertyControls={direction:{type:r.ControlType.SegmentedEnum,title:"Direction",options:["vertical","horizontal","both"]},directionLock:{type:r.ControlType.Boolean,title:"Lock",enabledTitle:"1 Axis",disabledTitle:"Off",hidden:e=>"both"!==e.direction}},t.DeprecatedScroll=DeprecatedScroll},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(33);t.getObservableNumber=function getObservableNumber(e,t=0){return e?i.isAnimatable(e)?e.get():e:t}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(243);t.PanGestureRecognizer=class PanGestureRecognizer extends i.GestureRecognizer{constructor(){super(...arguments),this.eventType="pan"}pointerSessionBegan(e,t){this.recognize(e,t)}pointerSessionMoved(e,t){this.recognize(e,t)}pointerSessionEnded(e,t){this.panend(t)}recognize(e,t){(Math.abs(t.delta.x)>0||Math.abs(t.delta.y)>0)&&(this.startEvent?this.pan(t):this.panstart(t))}reset(){this.startEvent=null,super.reset()}panstart(e){this.hasState(i.State.Possible)&&(void 0===e.isLeftMouseClick||e.isLeftMouseClick)&&(this.stateSwitch(i.State.Began),this.startEvent=e,this.handler&&this.startEvent.target&&this.handler.gestureBegan(this.eventType,e,this.startEvent.target))}pan(e){this.hasState(i.State.Began|i.State.Changed)&&this.startEvent&&(this.stateSwitch(i.State.Changed),this.handler&&this.startEvent.target&&this.handler.gestureChanged(this.eventType,e,this.startEvent.target))}panend(e){this.hasState(i.State.Began|i.State.Changed)&&this.startEvent&&(this.stateSwitch(i.State.Ended),this.handler&&this.startEvent.target&&this.handler.gestureEnded(this.eventType,e,this.startEvent.target))}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(243);t.TapGestureRecognizer=class TapGestureRecognizer extends i.GestureRecognizer{constructor(){super(...arguments),this.eventType="tap"}pointerSessionBegan(e,t){this.handler&&(void 0===t.isLeftMouseClick||t.isLeftMouseClick)&&this.handler.gestureBegan(this.eventType,t,null)}pointerSessionMoved(e,t){}pointerSessionEnded(e,t){this.isPrevented?this.stateSwitch(i.State.Failed):e.startEvent&&e.startEvent.target!==t.target?this.stateSwitch(i.State.Failed):(this.stateSwitch(i.State.Recognized),this.handler&&this.handler.gestureChanged(this.eventType,t,null)),this.handler&&this.handler.gestureEnded(this.eventType,t,null)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(243),o=n(1);t.MouseWheelGestureRecognizer=class MouseWheelGestureRecognizer extends i.GestureRecognizer{constructor(){super(...arguments),this.eventType="mousewheel",this.onMouseWheelEnd=o.debounce(e=>{this.handler&&this.startEvent&&(this.stateSwitch(i.State.Ended),this.handler.gestureEnded(this.eventType,e,this.startEvent.target),this.startEvent=null,this.reset())},300)}pointerSessionBegan(e,t){}pointerSessionMoved(e,t){}pointerSessionEnded(e,t){}mouseWheel(e,t){if(this.handler){if(this.hasState(i.State.Possible))return this.startEvent=t,this.stateSwitch(i.State.Began),void this.handler.gestureBegan(this.eventType,t,this.startEvent.target);this.hasState(i.State.Began|i.State.Changed)&&this.startEvent&&(this.stateSwitch(i.State.Changed),this.handler.gestureChanged(this.eventType,t,this.startEvent.target)),this.onMouseWheelEnd(t)}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(324),o=n(551),r=n(552);t.FramerEventListener=i.environment.isTouch()?o.TouchEventListener:r.MouseEventListener},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(244),r=n(18);t.TouchEventListener=class TouchEventListener extends i.Component{constructor(){super(...arguments),this.domTouchStart=e=>{r.safeWindow.addEventListener("touchmove",this.domTouchMove),r.safeWindow.addEventListener("touchend",this.domTouchEnd);const t=new o.FramerEvent(e,this.props.session);this.props.session.pointerDown(t)},this.domTouchMove=e=>{const t=new o.FramerEvent(e,this.props.session);this.props.session.pointerMove(t)},this.domTouchEnd=e=>{r.safeWindow.removeEventListener("touchmove",this.domTouchMove),r.safeWindow.removeEventListener("touchend",this.domTouchEnd);const t=new o.FramerEvent(e,this.props.session);this.props.session.pointerUp(t)}}render(){return this.props.children}componentDidMount(){r.safeWindow.addEventListener("touchstart",this.domTouchStart)}componentWillUnmount(){r.safeWindow.removeEventListener("touchstart",this.domTouchStart),r.safeWindow.removeEventListener("touchmove",this.domTouchMove),r.safeWindow.removeEventListener("touchend",this.domTouchEnd)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(234),r=n(18);t.MouseEventListener=class MouseEventListener extends i.Component{constructor(){super(...arguments),this.domMouseDown=e=>{r.safeWindow.addEventListener("mousemove",this.domMouseMove),r.safeWindow.addEventListener("mouseup",this.domMouseUp);const t=new o.FramerEvent(e,this.props.session);this.props.session.pointerDown(t)},this.domMouseMove=e=>{if(!(void 0===e.buttons?1===e.which:1===e.buttons))return void this.domMouseUp(e);const t=new o.FramerEvent(e,this.props.session);this.props.session.pointerMove(t)},this.domMouseUp=e=>{r.safeWindow.removeEventListener("mousemove",this.domMouseMove),r.safeWindow.removeEventListener("mouseup",this.domMouseUp);const t=new o.FramerEvent(e,this.props.session);this.props.session.pointerUp(t)},this.domMouseWheel=e=>{const t=new o.FramerEvent(e,this.props.session);this.props.session.mouseWheel(t)}}render(){return this.props.children}componentDidMount(){r.safeWindow.addEventListener("mousedown",this.domMouseDown),r.safeWindow.addEventListener("wheel",this.domMouseWheel)}componentWillUnmount(){r.safeWindow.removeEventListener("mousemove",this.domMouseMove),r.safeWindow.removeEventListener("mousedown",this.domMouseDown),r.safeWindow.removeEventListener("mouseup",this.domMouseUp),r.safeWindow.removeEventListener("wheel",this.domMouseWheel)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(151);t.DeviceRegistry=class DeviceRegistry{resolve(e){const t=i.componentLoader.componentForIdentifier(e);if(t&&"device"===t.type)return t.class}list(){const e={},t={};return i.componentLoader.componentIdentifiers().map(n=>{const o=i.componentLoader.componentForIdentifier(n);o&&"device"===o.type&&(e[o.identifier]=o.class.descriptor,o&&("device"===o.type?e[o.identifier]=o.class.descriptor:"device-skin"===o.type&&(t[o.identifier]=o.class.descriptor)))}),{devices:e,deviceSkins:t}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(358),r=n(1),s=n(236),a=n(18),l=n(65);var c;!function(e){e[e.Canvas=0]="Canvas",e[e.Screen=1]="Screen",e[e.Device=2]="Device"}(c=t.DeviceRendererMode||(t.DeviceRendererMode={}));class DeviceRenderer extends i.Component{constructor(){super(...arguments),this.screenTop=0,this.screenLeft=0,this.contentScale=1,this.isViewingOnMobile=s.isMobile(),this.transformDevicePoint=({x:e,y:t})=>({x:(e-this.screenLeft)/this.contentScale,y:(t-this.screenTop)/this.contentScale})}static getMode(e){return e.skin?c.Device:r.Size.isZero(e.screen)?c.Canvas:c.Screen}getScreenStyle(e,t,n,i,o){const r=this.calculateScreenRect(e,t,n,i),s=n?e.height:e.width,a=n?e.width:e.height;let l;if(o){l=`url("data:image/svg+xml;utf8,${encodeURIComponent(`<svg xmlns="http://www.w3.org/2000/svg" preserveAspectRatio="none" width="${s}" height="${a}"><g transform="${n?`translate(0 ${a}) rotate(-90)`:""}" x="0" y="0"> ${o}</g></svg>`)}")`}return{display:this.props.children?"block":"none",position:"absolute",top:r.top,left:r.left,width:r.width,height:r.height,overflow:"hidden",borderRadius:3,maskImage:l,maskRepeat:"no-repeat",maskPosition:"center",maskSize:"100% 100%",WebkitMaskImage:l,WebkitMaskRepeat:"no-repeat",WebkitMaskPosition:"center",WebkitMaskSize:"100% 100%"}}setScreenPosition({top:e,left:t}){this.screenTop="string"==typeof e?parseFloat(e):e||0,this.screenLeft="string"==typeof t?parseFloat(t):t||0}willRenderWithScale(e){a.safeWindow._bridge&&a.safeWindow._bridge("fixmeHackyNotePreviewContentScale",e)}render(){switch(DeviceRenderer.getMode(this.props)){case c.Canvas:return this.renderCanvasMode();case c.Screen:return this.renderScreenOnly();case c.Device:return this.renderSkinAndScreen(this.props.skin,this.props.hand)}}renderCanvasMode(){const{device:e,content:t,responsive:n,autoScale:s}=this.props;if(n)return this.willRenderWithScale(1),i.createElement(o.Screen,{width:e.width,height:e.height,scale:1},i.createElement(r.ProvideParentSize,{parentSize:t},this.props.children));this.contentScale=1;const a=t.width>e.width||t.height>e.height;((t.width<=e.width||t.height<=e.height)&&(!s||"both"===s||"up"===s)||a&&(!s||"both"===s||"down"===s))&&(this.contentScale=Math.min(e.width/t.width,e.height/t.height)),this.willRenderWithScale(this.contentScale);const c=this.getScreenStyle(t,e,!1,this.contentScale);return this.setScreenPosition(c),i.createElement("div",{style:c},i.createElement(o.Screen,{width:e.width,height:e.height,scale:this.contentScale},i.createElement(l.MotionPlugins,{transformPagePoint:this.transformDevicePoint},i.createElement(r.ProvideParentSize,{parentSize:t},this.props.children))))}renderScreenOnly(){const{screen:e,rotate:t,device:n,pixelRatio:r,svgScreenMask:s}=this.props,a=n.width/(t?e.height:e.width),c=n.height/(t?e.width:e.height),d=Math.min(a,c),u=t?e.height:e.width,h=t?e.width:e.height;this.willRenderWithScale(d*r);const p=this.getScreenStyle(e,n,t,d,this.isViewingOnMobile?void 0:s);return this.contentScale=d*r,this.setScreenPosition(p),i.createElement("div",{style:p},i.createElement(o.Screen,{width:u/r,height:h/r,scale:this.contentScale},i.createElement(l.MotionPlugins,{transformPagePoint:this.transformDevicePoint},this.props.children)))}renderSkinAndScreen(e,t){const{rotate:n,device:s,content:a,pixelRatio:c,svgScreenMask:d}=this.props;let u=2;if(this.isViewingOnMobile){if(!(a.height<220))return this.renderScreenOnly();u=1}const h=this.calculateSkinRectAndScreenScale(e,s,n,u/c),p={pointerEvents:"none",display:"block",position:"absolute",top:h.top,left:h.left,width:h.width,height:h.height,transform:n?"rotate(-90deg)":void 0},g=r.Size.defaultIfZero(s.width,s.height,this.props.screen),m=this.getScreenStyle(g,s,n,h.scale,d),f=[];if(!n&&null!==t){const e=t.width*h.scale,n=t.height*h.scale,o={pointerEvents:"none",display:"block",position:"absolute",width:e,height:n,top:(t.offset||0)+(this.props.device.height-n)/2,left:(this.props.device.width-e)/2};f.push(i.createElement("img",{key:"hand",src:t.image,style:o}))}this.willRenderWithScale(h.scale*c),this.contentScale=h.scale*c,this.setScreenPosition(m);const y=i.createElement("div",{key:"screen",style:m},i.createElement(o.Screen,{width:g.width/c,height:g.height/c,scale:this.contentScale},i.createElement(l.MotionPlugins,{transformPagePoint:this.transformDevicePoint},this.props.children))),v=i.createElement("img",{key:"device",src:e.image,style:p});return f.push(v,y),f}calculateSkinRectAndScreenScale(e,t,n,i){const o=t.width,r=t.height,{padding:s}=e;let{imageWidth:a,imageHeight:l}=e;if(n){const e=a;a=l,l=e}const c=(o-2*s)/a,d=(r-2*s)/l,u=Math.min(c,d,i),h=u*(n?l:a),p=u*(n?a:l);return{width:h,height:p,left:(o-h)/2,top:(r-p)/2,scale:u}}calculateScreenRect(e,t,n,i){const o=e.width,r=e.height,s=i*(n?r:o),a=i*(n?o:r);return{width:s,height:a,left:(t.width-s)/2,top:(t.height-a)/2}}}DeviceRenderer.defaultProps={skin:null,hand:null,device:r.Size.zero,screen:r.Size.zero,content:r.Size.zero,pixelRatio:1,rotate:!1,responsive:!1},t.DeviceRenderer=DeviceRenderer},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isWithPackage=function isWithPackage(e){return e&&"package"in e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";var i=this&&this.__rest||function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(i=Object.getOwnPropertySymbols(e);o<i.length;o++)t.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(e,i[o])&&(n[i[o]]=e[i[o]])}return n};Object.defineProperty(t,"__esModule",{value:!0});const o=n(0),r=n(559),s=n(1),a=n(186),l=n(21),c=n(106),d=n(353),u=n(65),h=n(181),p=n(560),g=n(246),m=n(155),f=n(53);var y;!function(e){e.Auto="auto",e.Stretch="stretch"}(y||(y={}));const v=[y.Auto,y.Stretch],b=v.map(e=>{switch(e){case y.Auto:return"Auto";case y.Stretch:return"Stretch"}}),k=["start","center","end"],S=k.map(e=>{switch(e){case"start":return"Start";case"center":return"Center";case"end":return"End"}}),C=k.map(e=>{switch(e){case"start":return"Left";case"center":return"Center";case"end":return"Right"}}),x=k.map(e=>{switch(e){case"start":return"Top";case"center":return"Center";case"end":return"Bottom"}}),w=["none","cube","coverflow","wheel","pile"],T=w.map(e=>{switch(e){case"none":return"None";case"cube":return"Cube";case"coverflow":return"Cover Flow";case"wheel":return"Wheel";case"pile":return"Pile"}});class Page extends o.Component{constructor(){super(...arguments),this.pages=[],this.propsBoundedCurrentPage=0,this.shouldReflectPropsBoundedCurrentPage=!1,this.currentContentPage=0,this.isScrolling=!0,this.scrollControls=u.animationControls(),this.containerRef=o.createRef(),this.state={containerSize:null},this.nearestPageIndex=(e,t,n,i)=>{const o=function(t){const i=n?t.x:t.y;return Math.abs(i+e)},r=function(e){const i=n?e.x:e.y;return Math.abs(i+t)};if(i){const e=[...this.pages].sort((e,t)=>r(e.rect)-r(t.rect));return this.pages.indexOf(e[0])}{const e=[...this.pages].sort((e,t)=>o(e.rect)-o(t.rect));if(1===e.length)return this.pages.indexOf(e[0]);const t=[e[0],e[1]].sort((e,t)=>r(e.rect)-r(t.rect));return this.pages.indexOf(t[0])}},this.onDragEnd=(e,t)=>{if(this.currentContentOffset.stop(),!this.isScrolling)return;this.isScrolling=!1;const{momentum:n,onChangePage:i}=this.props,{isHorizontalDirection:o}=this,r=this.currentContentOffset.get(),s=o?"x":"y",a=t.velocity[s];let l=this.nearestPageIndex(r,r,o,n);a&&p.inertia({from:r,velocity:a,modifyTarget:e=>(l=this.nearestPageIndex(r,e,o,n),i&&i(l,this.currentContentPage,this),e)}).start().stop();const c=this.offsetForPage(l);this.currentContentPage=l,this.scrollControls.start({[s]:c,transition:{type:"spring",from:this.currentContentOffset.get(),velocity:a,stiffness:500,damping:50}})},this.contentOffsetUpdated=()=>{this.applyEffects()},this.onDragStart=()=>{this.isScrolling=!0},this.onDirectionLock=e=>{const{direction:t}=this.props;("x"===e&&"horizontal"!==t||"y"===e&&"vertical"!==t)&&(this.isScrolling=!1)}}get isHorizontalDirection(){return"horizontal"===this.props.direction}get currentContentOffset(){return this.isHorizontalDirection?this.contentOffset.x:this.contentOffset.y}boundedCurrentPage(e){const t=o.Children.count(e.children),n=e.currentPage||0;return n>=0?Math.min(n,t-1):(n%t+t)%t}componentDidMount(){this.scrollControls.mount(),this.setContainerSize()}componentWillUnmount(){this.scrollControls.unmount()}componentWillUpdate(e){e.direction!==this.props.direction&&(this.contentOffset.x.set(0),this.contentOffset.y.set(0));const t=this.boundedCurrentPage(e||this.props);this.propsBoundedCurrentPage!==t&&(this.propsBoundedCurrentPage=t,this.shouldReflectPropsBoundedCurrentPage=!0)}setContainerSize(){if(this.containerRef.current){const e=this.containerRef.current.offsetWidth,t=this.containerRef.current.offsetHeight,n=this.state.containerSize;if(null===n||n&&(e!==n.width||t!==n.height)){const n={width:e,height:t};this.setState({containerSize:n})}}}componentDidUpdate(){this.setContainerSize(),(this.props.children&&0!==o.Children.count(this.props.children)||this.props.__fromCodeComponentNode)&&this.shouldReflectPropsBoundedCurrentPage&&(this.shouldReflectPropsBoundedCurrentPage=!1,this.currentContentPage!==this.propsBoundedCurrentPage&&l.RenderTarget.current()!==l.RenderTarget.canvas?(this.props.onChangePage&&this.props.onChangePage(this.propsBoundedCurrentPage,this.currentContentPage,this),this.updateOffsetForPage(this.propsBoundedCurrentPage,this.props.animateCurrentPageUpdate)):(this.updateOffsetForPage(this.propsBoundedCurrentPage),l.RenderTarget.current()===l.RenderTarget.canvas&&this.applyEffects()))}applyEffects(){this.pages.forEach((e,t)=>{const n=e.rect,i=this.effectValues(t,n);if(e.effectValues&&i)for(const o in i)h.isMotionValue(e.effectValues[o])&&e.effectValues[o].set(i[o])})}effectValues(e,t){const{direction:n,defaultEffect:i,effect:o,gap:r}=this.props,s=o||function defaultEffects(e){switch(e){case"cube":return cubeEffect;case"coverflow":return coverflowEffect;case"pile":return pileEffect;case"wheel":return wheelEffect;default:return null}}(i);if(!s)return null;let a,l;return l="horizontal"===n?(a=t.x+(this.contentOffset?this.contentOffset.x.get():0))/t.width:(a=t.y+(this.contentOffset?this.contentOffset.y.get():0))/t.height,s({offset:a,normalizedOffset:l,size:{width:t.width,height:t.height},index:e,direction:n,pageCount:this.pages.length,gap:r})}wrapHandler(e,t){if(!t)return e;return(...n)=>{e(...n),t(...n)}}offsetForPage(e){const t=this.pages.length,n=this.pages[Math.max(0,Math.min(t-1,e))];return n?this.isHorizontalDirection?-n.rect.x:-n.rect.y:0}updateOffsetForPage(e,t=!1){const n=this.offsetForPage(e);if(this.currentContentPage=e,t){const e=this.isHorizontalDirection?"x":"y";this.scrollControls.start({[e]:n,transition:{type:"spring",from:this.currentContentOffset.get(),velocity:this.currentContentOffset.getVelocity(),stiffness:500,damping:50}})}else this.currentContentOffset.set(n)}render(){const e=this.props,{direction:t,directionLock:n,contentWidth:p,contentHeight:v,children:b,gap:k,dragEnabled:S,wheelEnabled:C=!1,overflow:x,contentOffsetX:w,contentOffsetY:T,onChangePage:P,onDrag:E,onDragStart:F,onDragEnd:M,onScroll:_,onScrollEnd:O,onScrollStart:I,onDirectionLock:D,onUpdate:N}=e,R=i(e,["direction","directionLock","contentWidth","contentHeight","children","gap","dragEnabled","wheelEnabled","overflow","contentOffsetX","contentOffsetY","onChangePage","onDrag","onDragStart","onDragEnd","onScroll","onScrollEnd","onScrollStart","onDirectionLock","onUpdate"]);R.__fromCodeComponentNode&&!f.constraintsEnabled(m.unwrapFrameProps(R))&&(R.width="100%",R.height="100%",R._constraints={enabled:!0});const A=this.context.size;let L=f.calculateRect(m.unwrapFrameProps(this.props),A)||this.state.containerSize,B=!0;L||(s.isFiniteNumber(R.width)&&s.isFiniteNumber(R.height)?(L={width:R.width,height:R.height},B=!1):L=m.defaultFrameRect);const j=g.paddingFromProps(this.props),H={width:Math.max(0,L.width-j.left-j.right),height:Math.max(0,L.height-j.top-j.bottom)},z=this.isHorizontalDirection,$=o.Children.count(b);this.pages=[];let V=0,U=0;const G=z?p:v,W=(z?v:p)===y.Stretch?y.Stretch:this.props.alignment,K=o.Children.map(b,(e,t)=>{if(!c.isReactChild(e)||!c.isReactElement(e))return e;const n=m.unwrapFrameProps(e.props);void 0===n.width&&(n.width=m.defaultFrameRect.width),void 0===n.height&&(n.height=m.defaultFrameRect.height);const i=f.calculateSize(n,L||f.ParentSizeState.Unknown);if(!i)return e;const a=Object.assign({x:V,y:U},i);switch(G===y.Stretch&&(z?a.width=H.width:a.height=H.height),s.isFiniteNumber(p)&&(a.width=p),s.isFiniteNumber(v)&&(a.height=v),W){case"center":z?a.y=H.height/2-a.height/2:a.x=H.width/2-a.width/2;break;case"end":z?a.y=H.height-a.height:a.x=H.width-a.width;break;case y.Stretch:z?a.height=H.height:a.width=H.width}const l=t===$-1?0:k;z?V+=a.width+l:U+=a.height+l;const d={width:a.width,height:a.height,right:void 0,bottom:void 0,top:0,left:0,_constraints:{enabled:!0}};let h;const g=this.effectValues(t,a);if(g){h={};for(const e in g)h[e]=u.motionValue(g[e])}return this.pages.push({rect:a,effectValues:h}),o.createElement(r.PageContainer,Object.assign({key:t,effect:h},a),o.cloneElement(e,d))}),X=Math.max(0,z?V-H.width:U-H.height);if(this.pages.forEach(e=>{z?e.rect.x>X&&(e.rect.x=X):e.rect.y>X&&(e.rect.y=X)}),!this.contentOffset){this.contentOffset={x:h.isMotionValue(w)?w:u.motionValue(w||0),y:h.isMotionValue(T)?T:u.motionValue(T||0)},l.RenderEnvironment.target!==l.RenderTarget.canvas&&(this.contentOffset.x.onChange(this.contentOffsetUpdated),this.contentOffset.y.onChange(this.contentOffsetUpdated));const e=this.boundedCurrentPage(this.props);this.updateOffsetForPage(e)}(z?this.contentOffset.y:this.contentOffset.x).set(0);const Y=z?V:H.width,q=z?H.height:U,Z=o.Children.count(K),J=0===Z?m.defaultFrameRect.width:Y,Q=0===Z?m.defaultFrameRect.height:q;return o.createElement(s.FrameWithMotion,Object.assign({preserve3d:!1,perspective:1200,overflow:x},R,{ref:B?this.containerRef:null}),o.createElement(d.Scroll,{background:null,direction:t,directionLock:n,dragEnabled:S,wheelEnabled:C,width:H.width,height:H.height,left:j.left,top:j.top,preserve3d:!0,contentOffsetX:this.contentOffset.x,contentOffsetY:this.contentOffset.y,scrollAnimate:this.scrollControls,onDrag:E,onDragStart:this.wrapHandler(this.onDragStart,F),onDragEnd:this.wrapHandler(this.onDragEnd,M),onScroll:_,onScrollStart:I,onScrollEnd:O,onDirectionLock:this.wrapHandler(this.onDirectionLock,D),onUpdate:N,contentWidth:J,contentHeight:Q,overflow:"visible"},o.createElement(s.FrameWithMotion,{background:null,top:0,left:0,width:J,height:Q,preserve3d:!0},o.createElement(a.EmptyState,{children:b,size:{width:L.width||u.unwrapMotionValue(R.width),height:L.height||u.unwrapMotionValue(R.height)},insideUserCodeComponent:!this.props.__fromCodeComponentNode}),K)))}}function cubeEffect(e){const{normalizedOffset:t,direction:n}=e,i="horizontal"===n;return{originX:t<0?1:0,originY:t<0?1:0,rotateY:i?Math.min(Math.max(-90,90*t),90):0,rotateX:i?0:Math.min(Math.max(-90,-90*t),90),backfaceVisibility:"hidden",WebkitBackfaceVisibility:"hidden"}}function coverflowEffect(e){const{normalizedOffset:t,direction:n,size:i}=e,o="horizontal"===n;return{rotateY:o?Math.min(45,Math.max(-45,-45*t)):0,rotateX:o?0:Math.min(45,Math.max(-45,45*t)),originX:o?t<0?0:1:.5,originY:o?.5:t<0?0:1,x:o?t*-i.width/4:0,y:o?0:t*-i.height/4,z:-Math.abs(t),scale:1-Math.abs(t/10)}}function pileEffect(e){const{normalizedOffset:t,direction:n,size:i}=e,o="horizontal"===n;return{x:t<0&&o?Math.abs(t)*(i.width-8):0,y:t<0&&!o?Math.abs(t)*(i.height-8):0,scale:t<0?1-Math.abs(t)/50:1}}function wheelEffect(e){const{normalizedOffset:t,direction:n,size:i}=e,o="horizontal"===n,r=18*(o?i.width:i.height)/(2*Math.PI),s=o?0:-20*t,a=o?20*t:0,l=o?0:t*-i.height,c=o?t*-i.width:0;return{opacity:1-Math.abs(t)/4,transform:`translate(${c}px, ${l}px) translateZ(-${r}px) rotateX(${s}deg) rotateY(${a}deg) translateZ(${r}px)`}}Page._isStylable=!0,Page.supportsConstraints=!0,Page.contextType=f.ConstraintsContext,Page.pageProps={direction:"horizontal",contentWidth:y.Stretch,contentHeight:y.Stretch,alignment:"start",currentPage:0,animateCurrentPageUpdate:!0,gap:10,padding:0,momentum:!1,dragEnabled:!0,defaultEffect:"none",background:"transparent",overflow:"hidden"},Page.defaultProps=Object.assign({},Page.pageProps),Page.propertyControls={direction:{type:s.ControlType.SegmentedEnum,options:["horizontal","vertical"],title:"Direction"},directionLock:{type:s.ControlType.Boolean,title:"Lock",enabledTitle:"1 Axis",disabledTitle:"Off",defaultValue:!0},contentWidth:{type:s.ControlType.SegmentedEnum,options:v,optionTitles:b,title:"Width"},contentHeight:{type:s.ControlType.SegmentedEnum,options:v,optionTitles:b,title:"Height"},alignment:{type:s.ControlType.SegmentedEnum,options:k,optionTitles(e){if(!e)return S;return"horizontal"!==e.direction?C:x},title:"Align",hidden(e){const{direction:t,contentWidth:n,contentHeight:i}=e;return("horizontal"===t?i:n)===y.Stretch}},gap:{type:s.ControlType.Number,min:0,title:"Gap"},padding:{type:s.ControlType.FusedNumber,toggleKey:"paddingPerSide",toggleTitles:["Padding","Padding per side"],valueKeys:["paddingTop","paddingRight","paddingBottom","paddingLeft"],valueLabels:["T","R","B","L"],min:0,title:"Padding"},currentPage:{type:s.ControlType.Number,min:0,title:"Current",displayStepper:!0},momentum:{type:s.ControlType.Boolean,enabledTitle:"On",disabledTitle:"Off",title:"Momentum"},dragEnabled:{type:s.ControlType.Boolean,title:"Dragging",enabledTitle:"On",disabledTitle:"Off",defaultValue:!0},wheelEnabled:{type:s.ControlType.Boolean,title:"Wheel scroll",enabledTitle:"On",disabledTitle:"Off",defaultValue:!1},defaultEffect:{type:s.ControlType.Enum,options:w,optionTitles:T,title:"Effect"},children:{type:s.ControlType.Array,title:"Content",propertyControl:{type:s.ControlType.ComponentInstance,title:"Page"}},onChangePage:{type:s.ControlType.EventHandler},onScroll:{type:s.ControlType.EventHandler},onScrollStart:{type:s.ControlType.EventHandler},onScrollEnd:{type:s.ControlType.EventHandler}},t.Page=Page},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(1);t.PageContainer=function PageContainer({x:e,y:t,width:n,height:r,children:s,effect:a}){return i.createElement(o.FrameWithMotion,{left:e,top:t,width:n,height:r,background:"transparent",preserve3d:!0},i.createElement(o.FrameWithMotion,{width:"100%",height:"100%",preserve3d:!1,key:a?Object.keys(a).join(""):"",style:a,background:"transparent"},s))}},function(e,t){e.exports=require("popmotion")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(153),r=n(360),s=n(562);t.StackProperties=s.StackProperties;const a=n(563);t.DeprecatedStackProperties=a.DeprecatedStackProperties,t.StackSpecificProps=a.StackSpecificProps;const l=n(247);t.StackLayout=l;const c=n(53);function Stack(e){const t=c.useParentSize();if(e.__fromCodeComponentNode&&t!==c.ParentSizeState.Disabled){const n=c.deprecatedParentSize(t);let o=void 0,s=void 0;return null!==n&&(o=n.width,s=n.height),i.createElement(r.DeprecatedStack,Object.assign({width:o,height:s},e))}return i.createElement(s.Stack,Object.assign({},e))}t.Stack=Stack,o(Stack,r.DeprecatedStack),Stack.displayName="Stack"},function(e,t,n){"use strict";var i=this&&this.__rest||function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(i=Object.getOwnPropertySymbols(e);o<i.length;o++)t.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(e,i[o])&&(n[i[o]]=e[i[o]])}return n};Object.defineProperty(t,"__esModule",{value:!0});const o=n(0),r=n(1),s=n(106),a=n(246),l=n(53),c=n(155),d=n(339),u=n(156);function isFractionDimension(e){return"string"==typeof e&&e.endsWith("fr")}function fraction(e){const t=parseFloat(e);return r.isFiniteNumber(t)?t:0}function makePaddingString({top:e,left:t,bottom:n,right:i}){return`${e}px ${i}px ${n}px ${t}px`}function toJustifyOrAlignment(e){switch(e){case"start":return"flex-start";case"end":return"flex-end";default:return e}}t.Stack=function Stack(e){var{direction:t="vertical",distribution:n="start",alignment:h="center",gap:p=10,children:g,style:m,willChangeTransform:f,__fromCodeComponentNode:y}=e,v=i(e,["direction","distribution","alignment","gap","children","style","willChangeTransform","__fromCodeComponentNode"]);u.injectComponentCSSRules();const b=function toFlexDirection(e){switch(e){case"vertical":return"column";case"horizontal":return"row";default:return e}}(t),k=function isReverseDirection(e){switch(e){case"column-reverse":case"row-reverse":return!0;default:return!1}}(b),S=toJustifyOrAlignment(n),C=Object.assign({display:"flex",flexDirection:b,justifyContent:S,alignItems:toJustifyOrAlignment(h),padding:makePaddingString(a.paddingFromProps(v))},m);r.Layer.applyWillChange({props:{willChangeTransform:f}},C),y&&!l.constraintsEnabled(c.unwrapFrameProps(v))&&(v.width="100%",v.height="100%",v._constraints={enabled:!0});const{children:x,props:w}=d.processOverrideForwarding(v,g);g=x,v=w;const T=o.Children.count(g);let P="none";y||0!==T||(P="rgba(0, 170, 255, 0.3)");const E=function wrapInGapElement(e,t,n,i){if(!function isGapEnabled(e,t){return!!e&&(!t||-1===["space-between","space-around","space-evenly","stretch"].indexOf(t))}(t,i))return e;const r=function isVerticalDirection(e){return"column"===e||"column-reverse"===e}(n),s={display:"contents","--stack-gap-x":`${r?0:t}px`,"--stack-gap-y":`${r?t:0}px`};return o.createElement("div",{"data-framer-stack-gap":!0,style:s},e)}(function handleFraction(e,t){return o.Children.map(e,e=>{if(!s.isReactChild(e)||!s.isReactElement(e))return;const n="vertical"===t,i={};let r=!1;const{style:a,width:l,height:c}=e.props;let d=l,u=c;if(isFractionDimension(l)&&(r=!0,r=!0,n?d=`${100*fraction(l)}%`:(d=1,i.flexGrow=fraction(l),i.flexBasis=0),i.width=d),isFractionDimension(c)&&(r=!0,n?(u=1,i.flexGrow=fraction(c),i.flexBasis=0):u=`${100*fraction(c)}%`,i.height=u),!r)return e;const h=Object.assign({},a,i);return o.cloneElement(e,{width:d,height:u,style:h})})}(g,t),p,b,S),F=l.useProvideParentSize(E,l.ParentSizeState.Disabled);return o.createElement(r.FrameWithMotion,Object.assign({background:P},v,{"data-framer-component-type":"Stack","data-framer-stack-direction-reverse":k,style:C}),F)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";var i=this&&this.__rest||function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(i=Object.getOwnPropertySymbols(e);o<i.length;o++)t.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(e,i[o])&&(n[i[o]]=e[i[o]])}return n};Object.defineProperty(t,"__esModule",{value:!0});const o=n(0),r=n(1),s=n(185),a=n(153);t.WithNavigator=function WithNavigator(e,t,n,l,c){const d=class extends o.Component{render(){return o.createElement(s.NavigationContext.Consumer,null,s=>{const a=()=>{if("goBack"===t)return void s.goBack();if(!l)return;const e=l(),i=function transitionDirectionToSide(e){switch(e){case"left":return"right";case"right":return"left";case"up":return"bottom";case"down":return"top"}}(n);switch(t){case r.NavigationTransitionType.instant:s.instant(e);break;case r.NavigationTransitionType.fade:s.fade(e);break;case r.NavigationTransitionType.modal:s.modal(e,c);break;case r.NavigationTransitionType.push:s.push(e,{appearsFrom:i});break;case r.NavigationTransitionType.overlay:s.overlay(e,Object.assign({},c,{appearsFrom:i}));break;case r.NavigationTransitionType.flip:s.flip(e,{appearsFrom:i})}},d=this.props,{onTap:u}=d,h=i(d,["onTap"]);return h.onTap=u?(...e)=>{u.apply(this,e),a.apply(this,e)}:a,o.createElement(e,Object.assign({},h))})}};return a(d,e),d}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(245),o=e=>{var t;const n={title:`Framer Bezel ${e.selector}`,category:"Framer Bezel",selector:e.selector,kind:void 0===e.kind?"phone":e.kind,screen:{width:e.screenWidth,height:e.screenHeight},pixelRatio:e.pixelRatio||2,canRotate:void 0===e.canRotate||e.canRotate,skins:e.skins||{},hands:e.hands||{}};return(t=class extends i.Device{get svgScreenMask(){return e.svgScreenMask||super.svgScreenMask}}).descriptor=n,t};t.FramerAppleWatch38=o({selector:"Apple Watch 38mm",kind:"watch",screenWidth:272,screenHeight:340,bezelWidth:25,bezelHeight:50,canRotate:!1,skins:{"Space Black Steel - Black":{package:"@framer/framer.device-skin-apple-watch-38mm-black-steel"},Edition:{package:"@framer/framer.device-skin-apple-watch-38mm-edition"},"Rose Gold Aluminum - Midnight Blue":{package:"@framer/framer.device-skin-apple-watch-38mm-rose-gold-aluminum-midnight-blue"},"Silver Aluminum - Cocoa":{package:"@framer/framer.device-skin-apple-watch-38mm-silver-aluminum-cocoa"},"Silver Aluminum - Concrete":{package:"@framer/framer.device-skin-apple-watch-38mm-silver-aluminum-concrete"},"Silver Aluminum - Ocean Blue":{package:"@framer/framer.device-skin-apple-watch-38mm-silver-aluminum-ocean-blue"},"Silver Aluminum - Red":{package:"@framer/framer.device-skin-apple-watch-38mm-silver-aluminum-red"},"Silver Aluminum - Turquoise":{package:"@framer/framer.device-skin-apple-watch-38mm-silver-aluminum-turquoise"},"Silver Aluminum - White":{package:"@framer/framer.device-skin-apple-watch-38mm-silver-aluminum-white"},"Silver Aluminum - Yellow":{package:"@framer/framer.device-skin-apple-watch-38mm-silver-aluminum-yellow"},"Space Gray Aluminum - Black":{package:"@framer/framer.device-skin-apple-watch-38mm-space-gray-aluminum-black"},"Steel - White":{package:"@framer/framer.device-skin-apple-watch-38mm-steel-white"},"Nike Plus - Silver Aluminum - Flat Silver Volt":{package:"@framer/framer.device-skin-apple-watch-38mm-nike-plus-silver-aluminum-flat-silver-volt"},"Nike Plus - Silver Aluminum - Flat Silver White":{package:"@framer/framer.device-skin-apple-watch-38mm-nike-plus-silver-aluminum-flat-silver-white"},"Nike Plus - Space Gray Aluminum - Black Cool Gray":{package:"@framer/framer.device-skin-apple-watch-38mm-nike-plus-space-gray-aluminum-black-cool-gray"},"Nike Plus - Space Gray Aluminum - Black Volt":{package:"@framer/framer.device-skin-apple-watch-38mm-nike-plus-space-gray-aluminum-black-volt"}}}),t.FramerAppleWatch42=o({selector:"Apple Watch 42mm",kind:"watch",screenWidth:312,screenHeight:390,bezelWidth:25,bezelHeight:50,canRotate:!1,skins:{Edition:{package:"@framer/framer.device-skin-apple-watch-42mm-edition"},"Gold Aluminum - Cocoa":{package:"@framer/framer.device-skin-apple-watch-42mm-gold-aluminum"},"Rose Gold Aluminum - Midnight Blue":{package:"@framer/framer.device-skin-apple-watch-42mm-rose-gold-aluminum-midnight-blue"},"Silver Aluminum - Concrete":{package:"@framer/framer.device-skin-apple-watch-42mm-silver-aluminum-concrete"},"Silver Aluminum - Green":{package:"@framer/framer.device-skin-apple-watch-42mm-silver-aluminum-green"},"Silver Aluminum - Light Pink":{package:"@framer/framer.device-skin-apple-watch-42mm-silver-aluminum-light-pink"},"Silver Aluminum - Ocean Blue":{package:"@framer/framer.device-skin-apple-watch-42mm-silver-aluminum-ocean-blue"},"Silver Aluminum - Pink Sand":{package:"@framer/framer.device-skin-apple-watch-42mm-silver-aluminum-pink-sand"},"Silver Aluminum - Red":{package:"@framer/framer.device-skin-apple-watch-42mm-silver-aluminum-red"},"Silver Aluminum - Turquoise":{package:"@framer/framer.device-skin-apple-watch-42mm-silver-aluminum-turquoise"},"Silver Aluminum - White":{package:"@framer/framer.device-skin-apple-watch-42mm-silver-aluminum-white"},"Silver Aluminum - Yellow":{package:"@framer/framer.device-skin-apple-watch-42mm-silver-aluminum-yellow"},"Space Black - Steel Black":{package:"@framer/framer.device-skin-apple-watch-42mm-space-black-steel-black"},"Space Gray - Aluminum Black":{package:"@framer/framer.device-skin-apple-watch-42mm-space-gray-aluminum-black"},"Steel - White":{package:"@framer/framer.device-skin-apple-watch-42mm-steel-white"},"Nike Plus - Silver Aluminum - Flat Silver Volt":{package:"@framer/framer.device-skin-apple-watch-42mm-nike-plus-silver-aluminum-flat-silver-volt"},"Nike Plus - Silver Aluminum - Flat Silver White":{package:"@framer/framer.device-skin-apple-watch-42mm-nike-plus-silver-aluminum-flat-silver-white"},"Nike Plus - Space Gray Aluminum - Black Cool Gray":{package:"@framer/framer.device-skin-apple-watch-42mm-nike-plus-space-gray-aluminum-black-cool-gray"},"Nike Plus - Space Gray Aluminum - Black Volt":{package:"@framer/framer.device-skin-apple-watch-42mm-nike-plus-space-gray-aluminum-black-volt"}}}),t.FramerSonySmartWatch=o({selector:"Sony SmartWatch 3",kind:"watch",screenWidth:320,screenHeight:320,pixelRatio:1.5,canRotate:!1,skins:{White:{package:"@framer/framer.device-skin-sony-smartwatch-3-white"},Black:{package:"@framer/framer.device-skin-sony-smartwatch-3-black"}}}),t.FramerAppleIPhoneSE=o({selector:"Apple iPhone SE",screenWidth:640,screenHeight:1136,canRotate:!0,skins:{Gold:{package:"@framer/framer.device-skin-apple-iphone-se-gold"},Silver:{package:"@framer/framer.device-skin-apple-iphone-se-silver"},"Space Gray":{package:"@framer/framer.device-skin-apple-iphone-se-space-gray"},"Rose Gold":{package:"@framer/framer.device-skin-apple-iphone-se-rose-gold"}},hands:{"Hand 1":{package:"@framer/framer.device-hand-iphone-1",width:2098,height:3269},"Hand 2":{package:"@framer/framer.device-hand-iphone-2",width:2098,height:3269}}}),t.FramerAppleIPhone8=o({selector:"Apple iPhone 8",screenWidth:750,screenHeight:1334,skins:{"Space Gray":{package:"@framer/framer.device-skin-apple-iphone8-space-gray"},Silver:{package:"@framer/framer.device-skin-apple-iphone8-silver"},Gold:{package:"@framer/framer.device-skin-apple-iphone8-gold"}},hands:{"Hand 1":{package:"@framer/framer.device-hand-iphone-1"},"Hand 2":{package:"@framer/framer.device-hand-iphone-2"}}}),t.FramerAppleIPhone8Plus=o({selector:"Apple iPhone 8 Plus",screenWidth:1242,screenHeight:2208,pixelRatio:3,skins:{"Space Gray":{package:"@framer/framer.device-skin-apple-iphone8-plus-space-gray"},Silver:{package:"@framer/framer.device-skin-apple-iphone8-plus-silver"},Gold:{package:"@framer/framer.device-skin-apple-iphone8-plus-gold"}},hands:{"Hand 1":{package:"@framer/framer.device-hand-iphone-1",width:3949,height:6154,offset:-15},"Hand 2":{package:"@framer/framer.device-hand-iphone-2",width:3949,height:6154,offset:-15}}}),t.FramerAppleIPhoneX=o({selector:"Apple iPhone X",screenWidth:1125,screenHeight:2436,pixelRatio:3,skins:{"Space Gray":{package:"@framer/framer.device-skin-apple-iphone-x-space-gray"},Silver:{package:"@framer/framer.device-skin-apple-iphone-x-silver"}},svgScreenMask:"<path d='M 876 26 L 876 27 C 876 54.794 854.794 90 806 90 L 320 90 C 271.206 90 250 54.794 250 27 L 250 26 C 250 13.145 250 0 227 0 L 130 0 C 48.935 0 0 48.935 0 130 L 0 2306 C 0 2387.065 48.935 2436 130 2436 L 995 2436 C 1076.065 2436 1125 2387.065 1125 2306 L 1125 130 C 1125 48.935 1076.065 0 995 0 L 899 0 C 876 0 876 13.145 876 26 Z' fill='#000'></path>",hands:{"Hand 1":{package:"@framer/framer.device-hand-iphone-1",width:3567,height:5558,offset:-15},"Hand 2":{package:"@framer/framer.device-hand-iphone-2",width:3567,height:5558,offset:-15}}}),t.FramerAppleIPhoneXS=o({selector:"Apple iPhone XS",screenWidth:1125,screenHeight:2436,pixelRatio:3,skins:{"Space Gray":{package:"@framer/framer.device-skin-apple-iphone-xs-spacegrey"},Silver:{package:"@framer/framer.device-skin-apple-iphone-xs-silver"},Gold:{package:"@framer/framer.device-skin-apple-iphone-xs-gold"}},svgScreenMask:"<path fill='#000000' d='M876,26 L876,27 C876,54.7939392 854.793939,90 806,90 L320,90 C271.206061,90 250,54.7939392 250,27 L250,25.9999936 C250,13.1450152 249.999996,1.42108547e-14 227.000025,0 L130,0 C48.934969,0 0,48.934969 0,130 L0,2306 C0,2387.06503 48.934969,2436 130,2436 L995,2436 C1076.06503,2436 1125,2387.06503 1125,2306 L1125,130 C1125,48.934969 1076.06503,0 995,0 L899,0 C876,0 876,13.1450195 876,26 Z'/>",hands:{"Hand 1":{package:"@framer/framer.device-hand-iphone-1",width:3567,height:5558,offset:-15},"Hand 2":{package:"@framer/framer.device-hand-iphone-2",width:3567,height:5558,offset:-15}}}),t.FramerAppleIPhoneXR=o({selector:"Apple iPhone XR",screenWidth:828,screenHeight:1792,pixelRatio:2,skins:{Blue:{package:"@framer/framer.device-skin-apple-iphone-xr-blue"},Coral:{package:"@framer/framer.device-skin-apple-iphone-xr-coral"},Red:{package:"@framer/framer.device-skin-apple-iphone-xr-red"},Silver:{package:"@framer/framer.device-skin-apple-iphone-xr-silver"},"Space Gray":{package:"@framer/framer.device-skin-apple-iphone-xr-spacegrey"},Yellow:{package:"@framer/framer.device-skin-apple-iphone-xr-yellow"}},svgScreenMask:"<path fill='#000' d='M171,5.68434189e-14 C178.179702,5.68434189e-14 184,5.82029825 184,13 C184.671387,25.1625977 187.04912,32.8738094 190.811884,39.9095654 C195.256715,48.2206766 201.779323,54.7432852 210.090435,59.1881161 C218.401546,63.6329469 227.73588,66 243.926397,66 L584.073603,66 C600.26412,66 609.598454,63.6329469 617.909565,59.1881161 C626.220677,54.7432852 632.743285,48.2206766 637.188116,39.9095654 C640.95016,32.8751542 643.243408,25.0819092 644,13 C644,5.82029825 649.820298,5.68434189e-14 657,5.68434189e-14 L721.598764,0 C758.596792,5.68434189e-14 772.013171,3.85226286 785.539097,11.0860072 C799.065023,18.3197516 809.680248,28.9349774 816.913993,42.4609033 C824.147737,55.9868292 828,69.4032081 828,106.401236 L828,1685.59876 C828,1722.59679 824.147737,1736.01317 816.913993,1749.5391 C809.680248,1763.06502 799.065023,1773.68025 785.539097,1780.91399 C772.013171,1788.14774 758.596792,1792 721.598764,1792 L106.401236,1792 C69.4032081,1792 55.9868292,1788.14774 42.4609033,1780.91399 C28.9349774,1773.68025 18.3197516,1763.06502 11.0860072,1749.5391 C3.85226286,1736.01317 0,1722.59679 0,1685.59876 L0,106.401236 C0,69.4032081 3.85226286,55.9868292 11.0860072,42.4609033 C18.3197516,28.9349774 28.9349774,18.3197516 42.4609033,11.0860072 C55.9868292,3.85226286 69.4032081,5.68434189e-14 106.401236,5.68434189e-14 L171,5.68434189e-14 Z'/>",hands:{"Hand 1":{package:"@framer/framer.device-hand-iphone-1",width:2708,height:4220,offset:-15},"Hand 2":{package:"@framer/framer.device-hand-iphone-2",width:2708,height:4220,offset:-15}}}),t.FramerAppleIPhoneXSMax=o({selector:"Apple iPhone XS Max",screenWidth:1242,screenHeight:2688,pixelRatio:3,skins:{"Space Gray":{package:"@framer/framer.device-skin-apple-iphone-xs-max-spacegrey"},Silver:{package:"@framer/framer.device-skin-apple-iphone-xs-max-silver"},Gold:{package:"@framer/framer.device-skin-apple-iphone-xs-max-gold"}},svgScreenMask:"<path fill='#000000' d='M288,0 C297.941125,0 305.72957,8.05894469 306,18 C306.542114,37.9282227 309.576285,48.4396546 314.815379,58.2359082 C320.567513,68.9914638 329.008536,77.4324867 339.764092,83.1846208 C350.519647,88.9367548 362.090097,92 386.098193,92 L855.901807,92 C879.909903,92 891.480353,88.9367548 902.235908,83.1846208 C912.991464,77.4324867 921.432487,68.9914638 927.184621,58.2359082 C932.426286,48.434846 935.425964,37.958374 936,18 C936.285921,8.05895296 944.058875,0 954,0 L1092.01272,6.0596658e-15 C1144.16656,-3.52084034e-15 1163.07881,5.43029825 1182.14547,15.6272632 C1201.21214,25.8242281 1216.17577,40.7878597 1226.37274,59.8545263 C1236.5697,78.921193 1242,97.8334379 1242,149.987284 L1242,2538.01272 C1242,2590.16656 1236.5697,2609.07881 1226.37274,2628.14547 C1216.17577,2647.21214 1201.21214,2662.17577 1182.14547,2672.37274 C1163.07881,2682.5697 1144.16656,2688 1092.01272,2688 L149.987284,2688 C97.8334379,2688 78.921193,2682.5697 59.8545263,2672.37274 C40.7878597,2662.17577 25.8242281,2647.21214 15.6272632,2628.14547 C5.43029825,2609.07881 -5.4496192e-14,2590.16656 -6.08831961e-14,2538.01272 L4.0397772e-15,149.987284 C-2.34722689e-15,97.8334379 5.43029825,78.921193 15.6272632,59.8545263 C25.8242281,40.7878597 40.7878597,25.8242281 59.8545263,15.6272632 C78.921193,5.43029825 97.8334379,3.52084034e-15 149.987284,-6.0596658e-15 L288,-4.28410666e-15 Z'/>",hands:{"Hand 1":{package:"@framer/framer.device-hand-iphone-1",width:3949,height:6154,offset:-15},"Hand 2":{package:"@framer/framer.device-hand-iphone-2",width:3949,height:6154,offset:-15}}}),t.FramerGoogleNexus4=o({selector:"Google Nexus 4",screenWidth:768,screenHeight:1280,skins:{Phone:{package:"@framer/framer.device-skin-google-nexus-4"}},hands:{"Hand 1":{package:"@framer/framer.device-hand-iphone-1",width:2362,height:3681,offset:-52},"Hand 2":{package:"@framer/framer.device-hand-iphone-2",width:2362,height:3681,offset:-52}}}),t.FramerGoogleNexus5X=o({selector:"Google Nexus 5X",screenWidth:1080,screenHeight:1920,pixelRatio:3,skins:{Phone:{package:"@framer/framer.device-skin-google-nexus-5x"}},hands:{"Hand 1":{package:"@framer/framer.device-hand-iphone-1",width:3292,height:5130,offset:8},"Hand 2":{package:"@framer/framer.device-hand-iphone-2",width:3292,height:5130,offset:8}}}),t.FramerGoogleNexus6=o({selector:"Google Nexus 6",screenWidth:1440,screenHeight:2560,pixelRatio:3.5,skins:{Phone:{package:"@framer/framer.device-skin-google-nexus-6p"}},hands:{"Hand 1":{package:"@framer/framer.device-hand-iphone-1",width:4304,height:6707,offset:8},"Hand 2":{package:"@framer/framer.device-hand-iphone-2",width:4304,height:6707,offset:8}}}),t.FramerGooglePixel2=o({selector:"Google Pixel 2",screenWidth:1080,screenHeight:1920,pixelRatio:2.627,skins:{"Clearly White":{package:"@framer/framer.device-skin-google-pixel-2-clearly-white"},"Just Black":{package:"@framer/framer.device-skin-google-pixel-2-just-black"},"Kinda Blue":{package:"@framer/framer.device-skin-google-pixel-2-kinda-blue"}},hands:{"Hand 1":{package:"@framer/framer.device-hand-iphone-1",width:3316,height:5167},"Hand 2":{package:"@framer/framer.device-hand-iphone-2",width:3316,height:5167}}}),t.FramerGooglePixel2XL=o({selector:"Google Pixel 2 XL",screenWidth:1440,screenHeight:2880,pixelRatio:4,svgScreenMask:"<path d='M 0 84 C 0 37.608 37.608 0 84 0 L 1356 0 C 1402.392 0 1440 37.608 1440 84 L 1440 2796 C 1440 2842.392 1402.392 2880 1356 2880 L 84 2880 C 37.608 2880 0 2842.392 0 2796 Z' fill='#000'></path>",skins:{"Black and White":{package:"@framer/framer.device-skin-google-pixel-2-xl-black-and-white"},"Just Black":{package:"@framer/framer.device-skin-google-pixel-2-xl-just-black"}},hands:{"Hand 1":{package:"@framer/framer.device-hand-iphone-1",width:4530,height:7059},"Hand 2":{package:"@framer/framer.device-hand-iphone-2",width:4530,height:7059}}}),t.FramerGooglePixel3=o({selector:"Google Pixel 3",screenWidth:1080,screenHeight:2160,pixelRatio:2.627,svgScreenMask:"<rect width='1080' height='2160' fill='#000000' rx='45'/>",skins:{"Clearly White":{package:"@framer/framer.device-skin-google-pixel-3-clearlywhite"},"Just Black":{package:"@framer/framer.device-skin-google-pixel-3-justblack"},"Not Pink":{package:"@framer/framer.device-skin-google-pixel-3-notpink"}},hands:{"Hand 1":{package:"@framer/framer.device-hand-iphone-1",width:3316,height:5167},"Hand 2":{package:"@framer/framer.device-hand-iphone-2",width:3316,height:5167}}}),t.FramerGooglePixel3XL=o({selector:"Google Pixel 3XL",screenWidth:1440,screenHeight:2960,pixelRatio:3.5,svgScreenMask:"<path fill='#000000' d='M108,2.31946634e-07 L409.011687,1.55059141e-06 C439.939632,1.61701389e-06 465.011686,25.0720554 465.011686,56.000001 C465.011686,56.0002891 465.011686,56.0005772 465.011686,56.0008653 C465.011487,68.8875673 465.011388,78.9499079 465.011388,86.1878871 C465.011388,112.694005 475.444384,126.121845 486.431948,139.121281 C497.419513,152.120716 524.145044,170.83411 558.848058,170.83411 C665.879469,170.83411 865.259791,170.83411 879.942291,170.83411 C903.258059,170.83411 932.491466,162.064769 949.852489,143.266488 C967.213512,124.468207 976.173524,106.310104 976.173524,84.0828788 C976.173524,73.7219195 976.173524,63.3609603 976.173524,53.000001 L976.173524,53.000001 C976.173524,23.7289093 999.902432,1.06170877e-06 1029.17352,9.98686559e-07 L1331.02038,1.42108547e-14 C1391.21942,-1.2961176e-07 1440.02038,48.800962 1440.02038,109 L1440.02038,2905.00059 C1440.02038,2935.37625 1415.39605,2960.00059 1385.02038,2960.00059 L58,2960.00059 C25.9674845,2960.00059 3.92285176e-15,2934.0331 0,2902.00059 L-2.31946629e-07,108 C-2.31946636e-07,48.353247 48.3532468,1.09569308e-14 108,0 Z'/>",skins:{"Clearly White":{package:"@framer/framer.device-skin-google-pixel-3xl-clearlywhite"},"Just Black":{package:"@framer/framer.device-skin-google-pixel-3xl-justblack"},"Not Pink":{package:"@framer/framer.device-skin-google-pixel-3xl-notpink"}},hands:{"Hand 1":{package:"@framer/framer.device-hand-iphone-1",width:4530,height:7059},"Hand 2":{package:"@framer/framer.device-hand-iphone-2",width:4530,height:7059}}}),t.FramerHTCOneA9=o({selector:"HTC One A9",screenWidth:1080,screenHeight:1920,pixelRatio:3,skins:{Black:{package:"@framer/framer.device-skin-htc-one-a9-black"},White:{package:"@framer/framer.device-skin-htc-one-a9-white"}},hands:{"Hand 1":{package:"@framer/framer.device-hand-iphone-1",width:3436,height:5354},"Hand 2":{package:"@framer/framer.device-hand-iphone-2",width:3436,height:5354}}}),t.FramerMicrosoftLumia950=o({selector:"Microsoft Lumia 950",screenWidth:1440,screenHeight:2560,pixelRatio:4,skins:{Black:{package:"@framer/framer.device-skin-microsoft-lumia-950-black"},White:{package:"@framer/framer.device-skin-microsoft-lumia-950-white"}},hands:{"Hand 1":{package:"@framer/framer.device-hand-iphone-1",width:4494,height:7003,offset:-84},"Hand 2":{package:"@framer/framer.device-hand-iphone-2",width:4494,height:7003,offset:-84}}}),t.FramerSamsungNote5=o({selector:"Samsung Note 5",screenWidth:1440,screenHeight:2560,pixelRatio:4,skins:{Black:{package:"@framer/framer.device-skin-samsung-note-5-black"},Gold:{package:"@framer/framer.device-skin-samsung-note-5-gold"},Pink:{package:"@framer/framer.device-skin-samsung-note-5-pink"},"Silver Titanium":{package:"@framer/framer.device-skin-samsung-note-5-silver-titanium"},White:{package:"@framer/framer.device-skin-samsung-note-5-white"}},hands:{"Hand 1":{package:"@framer/framer.device-hand-iphone-1",width:4279,height:6668,offset:-84},"Hand 2":{package:"@framer/framer.device-hand-iphone-2",width:4279,height:6668,offset:-84}}}),t.FramerSamsungGalaxyS8=o({selector:"Samsung Galaxy S8",screenWidth:1440,screenHeight:2960,pixelRatio:4,svgScreenMask:"<path d='M 125 0 C 53.755 0 0 62.755 0 134 L 0 2826 C 0 2897.245 53.755 2960 125 2960 L 1315 2960 C 1386.245 2960 1440 2897.245 1440 2826 L 1440 134 C 1440 62.755 1386.245 0 1315 0 Z' fill='#000'></path>",skins:{"Artic Silver":{package:"@framer/framer.device-skin-samsung-s8-artic-silver"},"Coral Blue":{package:"@framer/framer.device-skin-samsung-s8-coral-blue"},"Maple Gold":{package:"@framer/framer.device-skin-samsung-s8-maple-gold"},"Midnight Black":{package:"@framer/framer.device-skin-samsung-s8-midnight-black"},"Orchid Gray":{package:"@framer/framer.device-skin-samsung-s8-orchid-gray"}},hands:{"Hand 1":{package:"@framer/framer.device-hand-iphone-1",width:4210,height:6560},"Hand 2":{package:"@framer/framer.device-hand-iphone-2",width:4210,height:6560}}}),t.FramerSamsungGalaxyS9=o({selector:"Samsung Galaxy S9",screenWidth:1440,screenHeight:2960,pixelRatio:4,svgScreenMask:"<path fill='#000000' d='M125.020384,0 C53.7756513,0 0.0203840029,62.7552673 0.0203840029,134 L0.0203840029,2826 C0.0203840029,2897.24473 53.7756513,2960 125.020384,2960 L1315.02038,2960 C1386.26512,2960 1440.02038,2897.24473 1440.02038,2826 L1440.02038,134 C1440.02038,62.7552673 1386.26512,0 1315.02038,0 L125.020384,0 Z'/>",skins:{"Burgundy Red":{package:"@framer/framer.device-skin-samsung-galaxy-s9-burgundyred"},"Coral Blue":{package:"@framer/framer.device-skin-samsung-galaxy-s9-coralblue"},"Lilac Purple":{package:"@framer/framer.device-skin-samsung-galaxy-s9-lilacpurple"},"Midnight Black":{package:"@framer/framer.device-skin-samsung-galaxy-s9-midnightblack"},"Sunrise Gold":{package:"@framer/framer.device-skin-samsung-galaxy-s9-sunrisegold"},"Titanium Gray":{package:"@framer/framer.device-skin-samsung-galaxy-s9-titaniumgray"}},hands:{"Hand 1":{package:"@framer/framer.device-hand-iphone-1",width:4210,height:6560},"Hand 2":{package:"@framer/framer.device-hand-iphone-2",width:4210,height:6560}}}),t.FramerAppleIPadAir=o({selector:"Apple iPad Air",kind:"tablet",screenWidth:1536,screenHeight:2048,skins:{Gold:{package:"@framer/framer.device-skin-apple-ipad-air-gold"},Silver:{package:"@framer/framer.device-skin-apple-ipad-air-silver"},"Space Gray":{package:"@framer/framer.device-skin-apple-ipad-air-space-gray"}}}),t.FramerAppleIPadMini=o({selector:"Apple iPad Mini",kind:"tablet",screenWidth:1536,screenHeight:2048,skins:{Gold:{package:"@framer/framer.device-skin-apple-ipad-mini-gold"},Silver:{package:"@framer/framer.device-skin-apple-ipad-mini-silver"},"Space Gray":{package:"@framer/framer.device-skin-apple-ipad-mini-space-gray"}}}),t.FramerAppleIPadPro=o({selector:"Apple iPad Pro",kind:"tablet",screenWidth:2048,screenHeight:2732,skins:{Gold:{package:"@framer/framer.device-skin-apple-ipad-pro-gold"},Silver:{package:"@framer/framer.device-skin-apple-ipad-pro-silver"},"Space Gray":{package:"@framer/framer.device-skin-apple-ipad-pro-space-gray"}}}),t.FramerGoogleNexusTablet=o({selector:"Google Nexus Tablet",kind:"tablet",screenWidth:1536,screenHeight:2048,skins:{Tablet:{package:"@framer/framer.device-skin-google-nexus-9"}}}),t.FramerMicrosoftSurfacePro3=o({selector:"Microsoft Surface Pro 3",kind:"tablet",screenWidth:2160,screenHeight:1440,pixelRatio:1.5,skins:{Surface:{package:"@framer/framer.device-skin-microsoft-surface-pro-3"}}}),t.FramerMicrosoftSurfacePro4=o({selector:"Microsoft Surface Pro 4",kind:"tablet",screenWidth:2736,screenHeight:1824,skins:{Surface:{package:"@framer/framer.device-skin-microsoft-surface-pro-4"}}}),t.FramerAppleIMac=o({selector:"Apple iMac",kind:"computer",screenWidth:5120,screenHeight:2880,canRotate:!1,skins:{iMac:{package:"@framer/framer.device-skin-apple-imac"}}}),t.FramerAppleThunderboltDisplay=o({selector:"Apple Thunderbolt Display",kind:"computer",screenWidth:2560,screenHeight:1440,pixelRatio:1,canRotate:!1,skins:{Display:{package:"@framer/framer.device-skin-apple-thunderbolt-display"}}}),t.FramerAppleMacBook=o({selector:"Apple MacBook",kind:"computer",screenWidth:2304,screenHeight:1440,canRotate:!1,skins:{MacBook:{package:"@framer/framer.device-skin-apple-macbook"}}}),t.FramerAppleMacBookAir=o({selector:"Apple MacBook Air",kind:"computer",screenWidth:1440,screenHeight:900,pixelRatio:1,canRotate:!1,skins:{"MacBook Air":{package:"@framer/framer.device-skin-apple-macbook-air"}}}),t.FramerAppleMacBookPro=o({selector:"Apple MacBook Pro",kind:"computer",screenWidth:2880,screenHeight:1800,canRotate:!1,skins:{"MacBook Pro":{package:"@framer/framer.device-skin-apple-macbook-pro"}}}),t.FramerDellXPS=o({selector:"Dell XPS",kind:"computer",screenWidth:3840,screenHeight:2160,canRotate:!1,skins:{Display:{package:"@framer/framer.device-skin-dell-xps"}}}),t.FramerMicrosoftSurfaceBook=o({selector:"Microsoft Surface Book",kind:"computer",screenWidth:3e3,screenHeight:2e3,canRotate:!1,skins:{"Surface Book":{package:"@framer/framer.device-skin-microsoft-surface-book"}}}),t.FramerSonyW850C=o({selector:"Sony W850C",kind:"tv",screenWidth:1280,screenHeight:720,pixelRatio:1,canRotate:!1,skins:{TV:{package:"@framer/framer.device-skin-sony-w850c"}}}),t.FramerStoreArtwork=o({selector:"Artwork",kind:"store",screenWidth:800,screenHeight:600,pixelRatio:1,canRotate:!1,skins:{}}),t.FramerStoreIcon=o({selector:"Icon",kind:"store",screenWidth:50,screenHeight:50,pixelRatio:1,canRotate:!1,skins:{}})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(361),o=n(363),r=n(33),s=n(33);function animate(e,t,n,o){const a=e;let l;l=s.isAnimatable(e)?e.get():r.Animatable.objectToValues(e);const c=new i.FramerAnimation(a,l,t,n,o);return c.play(),c}t.animate=animate,function(e){e.spring=function spring(t,n,i){return e(t,n,o.SpringAnimator,i)},e.bezier=function bezier(t,n,i){return e(t,n,o.BezierAnimator,i)},e.linear=function linear(t,n,i){return e.bezier(t,n,Object.assign({},i,{curve:o.Bezier.Linear}))},e.ease=function ease(t,n,i){return e.bezier(t,n,Object.assign({},i,{curve:o.Bezier.Ease}))},e.easeIn=function easeIn(t,n,i){return e.bezier(t,n,Object.assign({},i,{curve:o.Bezier.EaseIn}))},e.easeOut=function easeOut(t,n,i){return e.bezier(t,n,Object.assign({},i,{curve:o.Bezier.EaseOut}))},e.easeInOut=function easeInOut(t,n,i){return e.bezier(t,n,Object.assign({},i,{curve:o.Bezier.EaseInOut}))}}(animate=t.animate||(t.animate={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Defaults={delta:1/60,maxValues:1e4};t.PrecalculatedAnimator=class PrecalculatedAnimator{constructor(e){this.currentTime=0,this.options=Object.assign({},t.Defaults,e),this.animator=e.animator}preCalculate(){if(!this.animator.isReady())return;const{delta:e}=this.options;for(this.values=[];!this.animator.isFinished()&&this.values.length<this.options.maxValues;){let e=this.animator.next(this.options.delta);if("object"==typeof e&&e){const t=e;e=Object.assign({},t)}this.values.push(e)}this.totalTime=this.values.length*e}indexForTime(e){return Math.max(0,Math.min(this.values.length-1,Math.round(this.values.length*(e/this.totalTime))-1))}setFrom(e){this.animator.setFrom(e),this.preCalculate()}setTo(e){this.animator.setTo(e),this.preCalculate()}isReady(){return void 0!==this.values&&this.values.length>0&&this.totalTime>0}next(e){this.currentTime+=e;const t=this.indexForTime(this.currentTime);return this.values[t]}isFinished(){return 0===this.totalTime||this.currentTime>=this.totalTime}get endValue(){this.preCalculate();const e=this.indexForTime(this.totalTime);return this.values.length>0?this.values[e]:this.animator.next(0)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(569),r=Symbol("default");t.DataContext=i.createContext(r),t.createData=function createData(e,n){const r=new Map;return(s,a)=>{const l=i.useContext(t.DataContext);s=s||l;const c=i.useMemo(()=>(r.has(s)||r.set(s,o.createStore(a||e,n)),r.get(s)),[s]),[,d]=i.useState(c.getVersion());return i.useEffect(()=>c.subscribe(d),[c]),[c.get(),c.getActions()]}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createStore=function createStore(e,t){let n=e,i=0;const o=new Set,r=e=>e(i),s=()=>n,a=e=>{i++,n=e,o.forEach(r)},l=t?function bindActionsToStore(e,t,n){const i={};for(const o in n)i[o]=i=>t(n[o](e(),i));return i}(s,a,t):a;return{get:s,set:a,getVersion:()=>i,getActions:()=>l,subscribe:e=>(o.add(e),()=>o.delete(e))}}},function(e,t,n){"use strict";var i=this&&this.__rest||function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(i=Object.getOwnPropertySymbols(e);o<i.length;o++)t.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(e,i[o])&&(n[i[o]]=e[i[o]])}return n};Object.defineProperty(t,"__esModule",{value:!0});const o=n(0),r=n(0),s=n(365),a=n(571),l=n(153);t.WithOverride=function WithOverride(e,t){const n="function"==typeof t?e=>t(a.convertColorProps(e)):()=>t,c=function(t){r.useContext(s.DataObserverContext);const a=n(t),l=t,{style:c}=l,d=i(l,["style"]);return o.createElement(e,Object.assign({},d,a,{_initialStyle:c}))};return l(c,e),c}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(1),o=n(181);function convertColorObject(e){return"string"==typeof e||o.isMotionValue(e)?e:i.LinearGradient.isLinearGradient(e)?i.LinearGradient.toCSS(e):i.RadialGradient.isRadialGradient(e)?i.RadialGradient.toCSS(e):i.Color.isColorObject(e)?i.Color.toRgbString(e):e}t.convertColorProps=function convertColorProps(e){if(e.background||e.color){const t=Object.assign({},e);return e.background&&(t.background=convertColorObject(e.background)),e.color&&(t.color=convertColorObject(e.color)),t}return e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=Symbol();t.addActionControls=function addActionControls(e,t,n){const o={title:t,controls:n};e[i]=o},t.getActionControls=function getActionControls(e){return e[i]}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(154),o=n(574);function PropertyStore(e={},t=!1){return o.deprecationWarning("PropertyStore","1.0.0","Data() or ObservableObject()"),i.ObservableObject(e,t)}t.PropertyStore=PropertyStore,function(e){e.addObserver=function addObserver(e,t){return i.ObservableObject.addObserver(e,t)}}(PropertyStore=t.PropertyStore||(t.PropertyStore={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.deprecationWarning=function deprecationWarning(e,t,n){const i=`Deprecation warning: ${e} will be removed in version ${t}${n?`, use ${n} instead`:""}.`;console.warn(i)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.loadJSON=function loadJSON(e){return fetch(e,{mode:"cors"}).then(e=>e.json())}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(577);t.print=function print(...e){const t=e.map(e=>i.inspect(e)).join(", ");console.log(t)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(578),o=n(352);t.inspect=function inspect(e,t,n){if(void 0===t&&(t=5),void 0===n&&(n=0),null===e)return"null";if(void 0===e)return"undefined";if(o.isFunction(e.toInspect))return e.toInspect();if(o.isString(e))return`"${e}"`;if(o.isNumber(e))return`${e}`;if(o.isFunction(e)){let t=e.toString().slice("function ".length).replace(/\n/g,"").replace(/\s+/g," ");const i=50;return t.length>i&&n>0&&(t=`${t.slice(0,+i+1||void 0).trim()} }`),`<Function ${t}>`}if(o.isArray(e))return n>t?"[...]":`[${e.map(e=>inspect(e,t,(n||0)+1)).join(", ")}]`;if(o.isObject(e)){let o;const r=i.inspectObjectType(e);return/HTML\w+?Element/.test(r)?`<${r}>`:(o=n>t?"{...}":`{${Object.keys(e).map(i=>`${i}:${inspect(e[i],t,(n||0)+1)}`).join(", ")}}`,"Object"===r?o:`<${r} ${o}>`)}return`${e}`}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.inspectObjectType=function inspectObjectType(e){let t;if(null!==(null!==e.constructor?e.constructor.name:void 0)&&"Object"!==(null!==e.constructor?e.constructor.name:void 0))return e.constructor.name;const n=function(e){if(!e)return null;const t=/\[object (\w+)\]/.exec(e);return t?t[1]:null};return e.toString&&(t=n(e.toString()))?t:(null!==e.constructor?e.constructor.toString:void 0)&&(t=n(null!==e.constructor?e.constructor.toString():void 0))?t.replace("Constructor",""):"Object"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.version="1.0.18"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.optionalReactDOM=function optionalReactDOM(){if("undefined"!=typeof window)return window.ReactDOM?window.ReactDOM:void 0}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(369),o=n(248);function getPackageInfo(e,t){const n=e.__framer__;if(!n)return null;const{packageJson:r,dependencies:s,sourceModules:a}=n;let{name:l}=r;return 0!==t||l||(l=i.localPackageFallbackIdentifier),l?{depth:t,displayName:r.framer&&r.framer.displayName||l,exportsObject:e,name:l,componentsJson:r.framer&&r.framer.components,designJson:r.design,dependencies:s||{},sourceModules:a||{}}:(o.warn("Failed to identify package"),null)}t.collectPackages=function collectPackages(e){const t={},n=[{exportsObject:e,depth:0}],i=new Set;for(;n.length>0;){const{exportsObject:e,depth:o}=n.shift(),r=getPackageInfo(e,o);if(r){t[r.name]=r,i.add(r.name);for(const e of Object.keys(r.dependencies))i.has(e)||(i.add(e),n.push({exportsObject:r.dependencies[e](),depth:o+1}))}}return t}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(82),o=n(583),r=n(366),s=n(248),a=n(371),l=n(584);function loadSourceModule(e,t){let n;try{n=e.sourceModules[t]()||{}}catch(i){n={error:i}}if(n.error){const{error:i}=n,a=o.rewordCompileError(i.message);a&&(i.message=a),s.warn(`Error in file '${t}':`,i);const l=prefixIdentifier(e,t);return{[l]:r.createErrorDefinition(l,i,{depth:e.depth,packageIdentifier:e.name})}}return n.__info__?entitiesFromExports(n,n.__info__,{packageInfo:e,file:t,identifierPrefix:`${t}_`}):{}}function entitiesFromExports(e,t,n){const i={};for(const o of t){const t=e[o.name];if(!t){s.warn(`Entity '${o.name}' defined but not found in exports`);continue}const r=entityDefinitionFromInfo(o,t,n);i[r.identifier]=r}return i}function prefixIdentifier(e,t,n=""){return e.depth>0&&(n=`${e.name}/${n}`),`${n}${t}`}function entityDefinitionFromInfo(e,t,{identifierPrefix:n,packageInfo:o,file:r}){let s={};const a=t.userInterfaceName||e.name,c=i.getPropertyControls(t);return c&&(s=l.verifyPropertyControls(c)),e.children&&!s.children&&(s.children={title:"Content",type:i.ControlType.ComponentInstance}),{class:t,defaults:{},depth:o.depth,file:r||"",identifier:prefixIdentifier(o,a,n),name:t.userInterfaceName||a,packageIdentifier:o.name,properties:s,type:e.type}}t.collectEntities=function collectEntities(e){const t={},{componentsJson:n,depth:i,designJson:o,exportsObject:r,sourceModules:s}=e,l=Object.keys(s);if(l.length>0)for(const a of l)Object.assign(t,loadSourceModule(e,a));else if(n){const i={packageInfo:e};Object.assign(t,entitiesFromExports(r,n,i))}if(i>0&&o){const n=function mastersFromPackage(e,t){const n=[];return a.findMasters(e.root,t,n),n}(o,e.name);for(const o of n){const n=o.id;t[n]={class:o,depth:i,file:"design/document.json",identifier:n,name:o.name||"",packageIdentifier:e.name,properties:{},type:"master"}}}return t}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i="Module parse failed: ";t.rewordCompileError=function rewordCompileError(e){if(!e.startsWith(i))return e;const t=e.split("\n"),n=t[0];if(!n)return e;const o=t.slice(2);return n.slice(i.length)+"\n"+o.join("\n")}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(82),o=n(585),r=n(586),s={boolean:!0,number:!0,string:!0,fusednumber:!0,enum:!0,segmentedenum:!0,color:!0,image:!0,file:!0,componentinstance:!0,array:!0,eventHandler:!0};function getControlDescription(e){if("string"==typeof e)return isControlType(e)?{type:e}:void 0;const t=e.type;return"string"==typeof t&&isControlType(t)?e:void 0}function isControlType(e){return null!==s[e]&&void 0!==s[e]}function defaultControl(e){const t=toString(e.title),n=function toHiddenFunction(e){return"function"!=typeof e?void 0:e}(e.hidden);switch(e.type){case i.ControlType.Boolean:{const i=toString(e.disabledTitle),o=toString(e.enabledTitle),r=e.defaultValue,s=e.type;return{title:t,hidden:n,defaultValue:toBoolean(r),type:s,disabledTitle:i,enabledTitle:o}}case i.ControlType.Number:{const i=toNumber(e.min),o=toNumber(e.max),r=toString(e.unit),s=toNumber(e.step),a=toBoolean(e.displayStepper),{defaultValue:l,type:c}=e;return{title:t,hidden:n,defaultValue:toNumber(l),type:c,min:i,max:o,unit:r,step:s,displayStepper:a}}case i.ControlType.String:{const{type:i,defaultValue:o}=e;return{title:t,hidden:n,defaultValue:o,type:i,placeholder:toString(e.placeholder),obscured:toBoolean(e.obscured)}}case i.ControlType.FusedNumber:{const{type:i}=e,o=e,s=o.defaultValue,a=toString4(o.valueKeys),l=toString4(o.valueLabels),c=toNumber(o.min);let d=toString(o.toggleKey),u=toString2(o.toggleTitles);if(!d){if(!(d=toString(o.splitKey)))return null;r.deprecationWarning("splitKey option of FusedNumber control type","1.0.0","toggleKey")}if(!u){if(!(u=toString2(o.splitLabels)))return null;r.deprecationWarning("splitLabels option of FusedNumber control type","1.0.0","toggleTitles")}return d&&u&&a&&l?{title:t,hidden:n,defaultValue:toNumber(s),type:i,toggleKey:d,toggleTitles:u,valueKeys:a,valueLabels:l,min:c}:null}case i.ControlType.Enum:case i.ControlType.SegmentedEnum:{const{defaultValue:i,type:o}=e,r=toStringList(e.options);if(!r)return null;const s=toStringList(e.optionTitles)||toStringArrayFunction(e.optionTitles);return{title:t,hidden:n,defaultValue:toString(i),type:o,options:r,optionTitles:s}}case i.ControlType.Color:{const{type:i,defaultValue:o}=e;return{title:t,hidden:n,defaultValue:toString(o),type:i}}case i.ControlType.Image:{const{type:i}=e;return{title:t,hidden:n,type:i}}case i.ControlType.File:{const{type:i}=e,o=toStringList(e.allowedFileTypes);return o?{title:t,hidden:n,type:i,allowedFileTypes:o}:null}case i.ControlType.ComponentInstance:return{title:t,hidden:n,type:e.type};case i.ControlType.Array:if(!e.propertyControl||!e.propertyControl.type)return null;const o=defaultControl(e.propertyControl);if(!o)return null;if(o.type===i.ControlType.Array)return null;if(o.type===i.ControlType.EventHandler)return null;const s=toNumber(e.maxCount,1);return{title:t,hidden:n,type:e.type,propertyControl:o,maxCount:s,defaultValue:toArray(e.defaultValue,o.type)};case i.ControlType.EventHandler:return{title:t,hidden:n,type:e.type}}return null}function toBoolean(e){return!0===e||!1===e?e:void 0}function toNumber(e,t){return"number"==typeof e&&(!o.isFiniteNumber(t)||e>=t)?e:void 0}function toString(e){if("string"==typeof e)return e}function toStringList(e){if(e instanceof Array)return e.map(e=>toString(e)).filter(e=>e)}function toString2(e){if(!(e instanceof Array))return;const t=toString(e[0]),n=toString(e[1]);return t&&n?[t,n]:void 0}function toString4(e){if(!(e instanceof Array))return;const t=toString(e[0]),n=toString(e[1]),i=toString(e[2]),o=toString(e[3]);return t&&n&&i&&o?[t,n,i,o]:void 0}function toStringArrayFunction(e){if("function"==typeof e)return e}function toArray(e,t){if(Array.isArray(e))switch(t){case i.ControlType.Boolean:return e.filter(e=>!0===e||!1===e);case i.ControlType.Number:return e.filter(o.isFiniteNumber);case i.ControlType.String:case i.ControlType.Enum:case i.ControlType.SegmentedEnum:case i.ControlType.Color:return toStringList(e);default:return}}t.verifyPropertyControls=function verifyPropertyControls(e){const t={};for(const n in e){const i=getControlDescription(e[n]);if(!i)continue;const o=defaultControl(i);o&&(t[n]=o)}return t}},function(e,t,n){"use strict";function isFiniteNumber(e){return"number"==typeof e&&isFinite(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.isFiniteNumber=isFiniteNumber,t.finiteNumber=function finiteNumber(e){return isFiniteNumber(e)?e:void 0}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.deprecationWarning=function deprecationWarning(e,t,n){const i=`Deprecation warning: ${e} will be removed in version ${t}${n?`, use ${n} instead`:""}.`;console.warn(i)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.collectTokens=function collectTokens(e){const t={},{depth:n,designJson:i}=e;if(n>0&&i&&i.root&&i.root.tokens){const e=i.root.tokensIndex||Object.keys(i.root.tokens);for(const n of e)t[n]=i.root.tokens[n]}return t}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";function execAll(e,t){const n=[];for(;;){const i=e.exec(t);if(!i)break;n.push(i)}return n}Object.defineProperty(t,"__esModule",{value:!0}),t.extractComponentDefinitionsFromScript=function extractComponentDefinitionsFromScript(e){const t=execAll(/^exports\.__info__ = (.*)\;/gm,e),n=execAll(/^\/\*\*\*\/ \"(.*)\"\:$/gm,e),i=t.map(e=>({type:"info",index:e.index,text:e[1]})),o=n.map(e=>({type:"file",index:e.index,text:e[1]})),r=i.concat(o);r.sort((e,t)=>e.index-t.index);const s=[];let a=null;for(const d of r)if("file"!==d.type){if(a)try{const e=JSON.parse(d.text);a.infos.push(...e)}catch(c){}}else a={name:d.text,infos:[]},s.push(a);const l=new Map;for(const d of s){const e=d.name.replace("./code/","./"),t=d.infos.map(t=>({file:e,type:t.type,name:t.name,packageIdentifier:"",class:{},depth:0,identifier:e+"_"+t.name,properties:{}}));l.set(e,t)}return l}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(373);t.CanvasNodeCache=class CanvasNodeCache extends i.NodeCache{constructor(){super(...arguments),this.selected=!1,this.isEditable=!1,this.canvasZoom=0,this.willChangeTransform=!1,this.lastUpdate=-1,this.visible=!1,this.parentRect=null,this.parentMatrix=null,this.constraintProps=null,this.newConstraintProps=null,this.matrix=null,this.canvasRect=null,this.parentDirected=!1,this.parentDirectedRect=null,this.calculatedPaths=null,this.paperPath=null,this.bezier=null,this.reactElement=null,this.props=null,this.codeComponentPresentation=null,this.templateProperties=null,this.replicaInstances=null,this.json=null,this.placeholders=null}reset(){super.reset(),this.lastUpdate=-1,this.parentMatrix=null,this.parentRect=null,this.visible=!1,this.constraintProps=null,this.newConstraintProps=null,this.matrix=null,this.canvasRect=null,this.parentDirected=!1,this.parentDirectedRect=null,this.calculatedPaths=null,this.paperPath=null,this.bezier=null,this.reactElement=null,this.props=null,this.codeComponentPresentation=null}tree(){return this.latest.tree}}},function(e,t,n){"use strict";var i=this&&this.__rest||function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(i=Object.getOwnPropertySymbols(e);o<i.length;o++)t.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(e,i[o])&&(n[i[o]]=e[i[o]])}return n};Object.defineProperty(t,"__esModule",{value:!0});const o=n(7),r=n(4),s=n(49),a=n(98),l=n(31),c=n(383),d=n(161),u=n(116),h=n(34),p=n(159),g=n(66),m=n(129),f=n(113),y=n(128),v=n(25),b=n(1),k=n(39),S=n(72),C=n(69),x=n(57),w={"SFCompactDisplay-Regular|.SFCompactDisplay-Regular":"__SF-Compact-Display-Regular__","SFCompactDisplay-Ultralight|.SFCompactDisplay-Ultralight":"__SF-Compact-Display-Ultralight__","SFCompactDisplay-Thin|.SFCompactDisplay-Thin":"__SF-Compact-Display-Thin__","SFCompactDisplay-Light|.SFCompactDisplay-Light":"__SF-Compact-Display-Light__","SFCompactDisplay-Medium|.SFCompactDisplay-Medium":"__SF-Compact-Display-Medium__","SFCompactDisplay-Semibold|.SFCompactDisplay-Semibold":"__SF-Compact-Display-Semibold__","SFCompactDisplay-Heavy|.SFCompactDisplay-Heavy":"__SF-Compact-Display-Heavy__","SFCompactDisplay-Black|.SFCompactDisplay-Black":"__SF-Compact-Display-Black__",".SFNSText|SFUIText-Regular|.SFUIText":"__SF-UI-Text-Regular__",".SFNSText-Light|SFUIText-Light|.SFUIText-Light":"__SF-UI-Text-Light__",".SFNSText-Medium|SFUIText-Medium|.SFUIText-Medium":"__SF-UI-Text-Medium__",".SFNSText-Semibold|SFUIText-Semibold|.SFUIText-Semibold":"__SF-UI-Text-Semibold__",".SFNSText-Heavy|.SFUIText-Heavy":"__SF-UI-Text-Heavy__","SFCompactText-Regular|.SFCompactText-Regular":"__SF-Compact-Text-Regular__","SFCompactText-Light|.SFCompactText-Light":"__SF-Compact-Text-Light__","SFCompactText-Medium|.SFCompactText-Medium":"__SF-Compact-Text-Medium__","SFCompactText-Semibold|.SFCompactText-Semibold":"__SF-Compact-Text-Semibold__","SFCompactText-Heavy|.SFCompactText-Heavy":"__SF-Compact-Text-Heavy__",".SFNSDisplayCondensed-Regular|SFUIDisplayCondensed-Regular|.SFUIDisplayCondensed-Regular":"__SF-UI-Display-Condensed-Regular__",".SFNSDisplayCondensed-Ultralight|SFUIDisplayCondensed-Ultralight|.SFUIDisplayCondensed-Ultralight":"__SF-UI-Display-Condensed-Ultralight__",".SFNSDisplayCondensed-Thin|SFUIDisplayCondensed-Thin|.SFUIDisplayCondensed-Thin":"__SF-UI-Display-Condensed-Thin__",".SFNSDisplayCondensed-Light|SFUIDisplayCondensed-Light|.SFUIDisplayCondensed-Light":"__SF-UI-Display-Condensed-Light__",".SFNSDisplayCondensed-Medium|SFUIDisplayCondensed-Medium|.SFUIDisplayCondensed-Medium":"__SF-UI-Display-Condensed-Medium__",".SFNSDisplayCondensed-Semibold|SFUIDisplayCondensed-Semibold|.SFUIDisplayCondensed-Semibold":"__SF-UI-Display-Condensed-Semibold__",".SFNSDisplayCondensed-Heavy|SFUIDisplayCondensed-Heavy|.SFUIDisplayCondensed-Heavy":"__SF-UI-Display-Condensed-Heavy__",".SFNSDisplayCondensed-Black|.SFUIDisplayCondensed-Black":"__SF-UI-Display-Condensed-Black__",".SFNSDisplay|SFUIDisplay-Regular|.SFUIDisplay":"__SF-UI-Display-Regular__",".SFNSDisplay-Ultralight|SFUIDisplay-Ultralight|.SFUIDisplay-Ultralight":"__SF-UI-Display-Ultralight__",".SFNSDisplay-Thin|SFUIDisplay-Thin|.SFUIDisplay-Thin":"__SF-UI-Display-Thin__",".SFNSDisplay-Light|SFUIDisplay-Light|.SFUIDisplay-Light":"__SF-UI-Display-Light__",".SFNSDisplay-Medium|SFUIDisplay-Medium|.SFUIDisplay-Medium":"__SF-UI-Display-Medium__",".SFNSDisplay-Semibold|SFUIDisplay-Semibold|.SFUIDisplay-Semibold":"__SF-UI-Display-Semibold__",".SFNSDisplay-Heavy|SFUIDisplay-Heavy|.SFUIDisplay-Heavy":"__SF-UI-Display-Heavy__",".SFNSDisplay-Black|.SFUIDisplay-Black":"__SF-UI-Display-Black__",".SFNSTextCondensed-Regular|SFUITextCondensed-Regular|.SFUITextCondensed-Regular":"__SF-UI-Text-Condensed-Regular__",".SFNSTextCondensed-Light|SFUITextCondensed-Light|.SFUITextCondensed-Light":"__SF-UI-Text-Condensed-Light__",".SFNSTextCondensed-Medium|SFUITextCondensed-Medium|.SFUITextCondensed-Medium":"__SF-UI-Text-Condensed-Medium__",".SFNSTextCondensed-Semibold|SFUITextCondensed-Semibold|.SFUITextCondensed-Semibold":"__SF-UI-Text-Condensed-Semibold__",".SFNSTextCondensed-Heavy|.SFUITextCondensed-Heavy":"__SF-UI-Text-Condensed-Heavy__","SFCompactRounded-Regular|.SFCompactRounded-Regular":"__SF-Compact-Rounded-Regular__","SFCompactRounded-Ultralight|.SFCompactRounded-Ultralight":"__SF-Compact-Rounded-Ultralight__","SFCompactRounded-Thin|.SFCompactRounded-Thin":"__SF-Compact-Rounded-Thin__","SFCompactRounded-Light|.SFCompactRounded-Light":"__SF-Compact-Rounded-Light__","SFCompactRounded-Medium|.SFCompactRounded-Medium":"__SF-Compact-Rounded-Medium__","SFCompactRounded-Semibold|.SFCompactRounded-Semibold":"__SF-Compact-Rounded-Semibold__","SFCompactRounded-Heavy|.SFCompactRounded-Heavy":"__SF-Compact-Rounded-Heavy__","SFCompactRounded-Black|.SFCompactRounded-Black":"__SF-Compact-Rounded-Black__"},T={"google-pixel-quite-black":"google-pixel-2-just-black","google-nexus-4":"Custom","apple-iphone-7-plus-black":"apple-iphone-8-plus-space-gray","apple-iphone-7-black":"apple-iphone-8-space-gray","apple-iphone-5s-space-gray":"apple-iphone-se-space-gray","framer/FramerAppleIPhoneX":"framer/FramerAppleIPhoneXS","framer/FramerSamsungGalaxyS8":"framer/FramerSamsungGalaxyS9","framer/FramerGoogleNexus6":"framer/FramerGooglePixel2","framer/FramerHTCOneA9":"framer/FramerSamsungNote5","framer/FramerMicrosoftLumia950":"framer/FramerSamsungNote5"},P={blendingEnabled:!0,blendingMode:!0,blur:!0,brightness:!0,brightnessEnabled:!0,contrast:!0,contrastEnabled:!0,grayscale:!0,grayScaleEnabled:!0,hueRotate:!0,hueRotateEnabled:!0,invert:!0,invertEnabled:!0,saturate:!0,saturateEnabled:!0,sepia:!0,sepiaEnabled:!0};t.ignoredMigrations={TextNode:{aspectRatioLocked:!0,editable:!0},FrameNode:{originalFilename:!0,autoSize:!0},RootNode:{fillColor:!0,startPoint:!0},BooleanShapeNode:P,ShapeGroupNode:P,PathNode:P,RectangleShapeNode:P,OvalShapeNode:P,StarShapeNode:P,PolygonShapeNode:P},t.migrations={x:(e,t,n)=>{u.hasPosition(e)?e.x=t:h.isPinnable(e)&&!c.hasStyledText(e)&&(e.left=t)},y:(e,t,n)=>{u.hasPosition(e)?e.y=t:h.isPinnable(e)&&!c.hasStyledText(e)&&(e.top=t)},fillColorEnabled:(e,t)=>{s.hasOptionalFill(e)&&(e.fillEnabled=t)},fillType:(e,t)=>{if(s.hasFill(e))if("gradient"===t){if("radial-gradient"===e.fillType)return;e.fillType="linear-gradient"}else e.fillType=t},fillGradient:(e,t,n)=>{if(!s.hasFill(e)||null===t)return;if(!1===t.enabled)return;const i=n(t);i instanceof C.LinearGradient?(!0===t.enabled&&(e.fillType="linear-gradient"),e.fillLinearGradient=i):(e.fillType="radial-gradient",e.fillRadialGradient=i)},filtersEnabled:()=>{},blurEnabled:(e,t)=>{if(!g.withFilters(e)||null==t)return;let n=S.Property.disabledHidden;S.Property.isEnabledState(t)?n=t:!0===t?n=S.Property.enabled:!1===t&&(n=S.Property.disabledHidden),e.blurEnabled=n},blurType:(e,t)=>{g.withFilters(e)&&(e.blurType="object"===t?"layer":t)},borderEnabled:(e,t)=>{a.hasBorder(e)&&(e.borderEnabled=!0===t?1:!1===t?0:t)},exportOptions:(e,t,n)=>{Array.isArray(t)&&l.hasExport(e)&&(e.exportOptions=n(t.map(e=>("string"==typeof e.suffix&&(e.nameExtension=e.suffix,-1!==e.suffix.indexOf("/")&&(e.nameExtensionMode="Folder"),delete e.suffix),new r.ExportOptions(e)))))},styledText:(e,t,n)=>{if(!c.hasStyledText(e))return;const i=t,o=e=>{if(!e.startsWith("FONT:"))return e;const t=e.substr(5),n=w[t];return n?`FONT:${n}`:e};for(const r of i.blocks){for(const e of r.inlineStyleRanges)e.style=o(e.style);r.data.emptyStyle&&(r.data.emptyStyle=r.data.emptyStyle.map(o))}e.styledText=n(i)},deviceType:(e,t,n)=>{if(!d.hasDevice(e))return;let i=t;T[t]&&(i=T[t]),e.deviceType=n(i)},previewSettings:(e,t,n)=>{if(!y.hasPreviewSettings(e))return;let i=t;t&&"object"==typeof t&&t.deviceType&&(i=Object.assign({},t,{deviceType:T[t.deviceType]||t.deviceType})),e.previewSettings=n(i)},type:(e,t)=>{},exportEnabled:(e,t)=>{},image:(e,t,n)=>{s.hasFill(e)&&(e.fillImage=n(t))},imageBackgroundSize:(e,t,n)=>{},fillImageSize:(e,t,n)=>{s.hasFill(e)&&(e.fillImageResize=n(t))},pixelWidth:(e,t,n)=>{s.hasFill(e)&&(e.fillImagePixelWidth=n(t))},pixelHeight:(e,t,n)=>{s.hasFill(e)&&(e.fillImagePixelHeight=n(t))},codeComponentProps:(e,t)=>{p.hasCodeComponent(e)&&(t&&"object"==typeof t&&"string"==typeof t.children&&(t.children=[{enabled:!0,value:t.children,type:b.ControlType.ComponentInstance}]),e.codeComponentProps=t)},targetName:(e,t)=>{},templateid:(e,t)=>{e.originalid=t},aspectRatioLocked:(e,t)=>{},widthFactor:(e,t)=>{},heightFactor:(e,t)=>{},blendingEnabled:(e,t)=>{m.withBlending(e)&&(e.blendingEnabled=t)},blendingMode:(e,t)=>{m.withBlending(e)&&(e.blendingMode=t)},storeEnabled:(e,t)=>{},storeIdentifier:(e,t)=>{},codeFunctionIdentifier:(e,t)=>{f.hasCodeOverride(e)&&(e.codeOverrideIdentifier=t)},codeFunctionFile:(e,t)=>{f.hasCodeOverride(e)&&(e.codeOverrideFile=t)},codeFunctionName:(e,t)=>{f.hasCodeOverride(e)&&(e.codeOverrideName=t)},codeOverrideIdentifier:(e,t)=>{f.hasCodeOverride(e)&&(t&&!1===e.codeOverrideEnabled&&(e.codeOverrideEnabled=!0),e.codeOverrideIdentifier=t)},exportIncludesBackground:(e,t)=>{l.hasExportIncludesBackground(e)&&(e.exportIncludesBackground=t)},rotation:(e,t)=>{v.hasRotation(e)&&(e.rotation=t)},aspectRatio:(e,t)=>{k.hasAspectRatio(e)&&(e.aspectRatio=t)}},t.classMigrations={ArtboardNode:e=>(e.__class="FrameNode",e),RectangleNode:e=>(e.__class="FrameNode",e),OvalNode:e=>(e.__class="FrameNode",e.radius=50,e.radiusIsRelative=!0,e),VectorFrameNode:e=>(e.__class="FrameNode",e.fillEnabled=!1,e.clip=!1,e),ImageNode:e=>(e.__class="FrameNode",e.fillEnabled=!0,e.fillType="image",e),CanvasNode:e=>(e.__class="RootNode",e)},t.gradientMigration=e=>{if("start"in e&&"end"in e){const{start:t,end:n}=e,r=i(e,["start","end"]);let s=!1;return"angle"in r&&b.isFiniteNumber(r.angle)&&(s=!0,r.angle+=180,r.angle>=360&&(r.angle-=360)),Object.assign({},r,{stops:o.List([new x.GradientColorStop({value:s?n:t,position:0}),new x.GradientColorStop({value:s?t:n,position:1})])})}return e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(83),o=n(50),r=n(112),s=n(39),a=n(34),l=n(25),c=n(54),d=n(41),u=n(159),h=n(60),p=n(113),g=n(98),m=n(127),f=n(160),y=n(114),v=n(115),b=n(55),k=n(61),S=n(66),C=n(31),x=n(128),w=n(161);t.CodeComponentRecord=Object.assign({},i.nameDefaults,o.sizeDefaults,r.intrinsicSizeDefaults,s.aspectRatioDefaults,a.pinDefaults,h.opacityDefaults,l.rotationDefaults,c.visibilityDefaults,d.lockDefaults,u.codeComponentDefaults,p.codeOverrideDefaults,y.codeComponentFillDefaults,v.clipDefaults,g.borderDefaults,m.borderPerSideDefaults,b.relativeRadiusDefaults,k.radiusPerCornerDefaults,f.boxShadowDefaults,S.filterDefaults,C.withExportDefaults,x.previewSettingsDefaults,w.withDeviceDefaults)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(83),o=n(50),r=n(39),s=n(34),a=n(25),l=n(594),c=n(595),d=n(54),u=n(41),h=n(112),p=n(31),g=n(377),m=n(60),f=n(67),y=n(162),v=n(114);t.SVGRecord=Object.assign({},i.nameDefaults,o.sizeDefaults,r.aspectRatioDefaults,s.pinDefaults,v.svgFillDefaults,m.opacityDefaults,a.rotationDefaults,f.shadowDefaults,l.svgDefaults,c.originalFilenameDefaults,d.visibilityDefaults,u.lockDefaults,h.intrinsicSizeDefaults,y.effectsDefaults,p.withExportDefaults,g.colorableDefaults)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.svgDefaults={svg:""};const i="svg";t.hasSVG=function hasSVG(e){return i in e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.originalFilenameDefaults={originalFilename:""};const i="originalFilename";t.hasOriginalFilename=function hasOriginalFilename(e){return i in e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(378);t.StyledText=class StyledText{constructor(e,t){"string"==typeof e?this._text=e:void 0!==e&&(this._styledText=e),this._cached=t}get text(){if(void 0===this._text){if(this._cached){const e=this._cached.text();if(e)return e}this.revive(),this._text=void 0===this._styledText?"":this.styledTextToText(this._styledText)}return this._text}get styledText(){return this.revive(),void 0===this._styledText&&(this._styledText=void 0===this._text?this.emptyStyledText():this.textToStyledText(this._text)),this._styledText}cached(){return this._cached||null}revive(){const e=this._cached;e&&e._rawLoadedValue&&(this._styledText=this.reviveFromCached(e),this._cached=new i.StyledTextCache(e.html,e.width,e.size))}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(83),o=n(39),r=n(25),s=n(62),a=n(54),l=n(41),c=n(50),d=n(116),u=n(31),h=n(1),p=n(60),g=n(160),m=n(114);t.PathRecord=Object.assign({},i.nameDefaults,m.pathFillDefaults,r.rotationDefaults,o.aspectRatioDefaults,s.shapeStrokeDefaults,p.opacityDefaults,g.boxShadowDefaults,a.visibilityDefaults,l.lockDefaults,h.pathDefaults,c.pathSizeDefaults,d.positionDefaults,u.withExportDefaults)},function(e,t){e.exports=require("bezier-js")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(16),o=n(101);t.RootRecord=Object.assign({},i.basicChildrenDefaults,o.guidesDefaults)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i="tokenVariables";t.hasTokenVariables=function hasTokenVariables(e){return"object"==typeof e&&null!==e&&i in e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(7),o={enabled:!0,x:0,y:2,color:"rgba(0,0,0,0.25)",blur:5};t.ShadowRecord=i.Record(Object.assign({},o)),t.BoxShadowRecord=i.Record(Object.assign({},o,{inset:!1,spread:0}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getFilterBlurForBoxBlur=function getFilterBlurForBoxBlur(e){return Math.ceil(e/2.37997)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.collectShadowPropsForNode=function collectShadowPropsForNode(e,t){e.shadows&&(t.shadows=e.shadows.toArray().filter(e=>e.enabled))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(83),o=n(50),r=n(34),s=n(25),a=n(54),l=n(41),c=n(31),d=n(131),u=n(60),h=n(251),p=n(67),g=n(66),m=n(132),f=n(113);t.TextRecord=Object.assign({},i.nameDefaults,r.pinDefaults,o.sizeDefaults,s.rotationDefaults,u.opacityDefaults,p.shadowDefaults,h.styledTextDefaults,d.autoSizeDefaults,a.visibilityDefaults,l.lockDefaults,g.filterDefaults,c.withExportDefaults,m.targetDefaults,f.codeOverrideDefaults)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(606),o=n(73),r=n(607),s=n(133),a=n(4),l=n(613),c=n(614),d=n(112),u=n(69);c.default();t.PaperjsPathOperator=class PaperjsPathOperator{booleanJoin(e,t){if(t===o.PathBooleanType.Join)return[].concat(...e);const n=e.map(e=>i.convertWithPathsToPaperPathItem(e,!0));let s=n.shift();return n.forEach(e=>{if(s&&e)switch(t){case o.PathBooleanType.Unite:s=s.unite(e);break;case o.PathBooleanType.Exclude:s=s.exclude(e);break;case o.PathBooleanType.Intersect:s=s.intersect(e);break;case o.PathBooleanType.Subtract:s=s.subtract(e)}}),s?r.convertPaperPathItemToWithPaths(s):[]}containsPoint(e,t){let n;const o=e.cache;return o.paperPath?n=o.paperPath:(n=i.convertWithPathsToPaperPathItem(e.calculatedPaths()),o.paperPath=n),n.contains(new s.Point(t))}importSvg(e,t,n){let i,o=e;if(n&&n.colorable){const t=(new DOMParser).parseFromString(e,"image/svg+xml").rootElement;if(!t)throw new Error(`Unsupported SVG: ${e}}`);const r=t.getAttribute("fill"),a=!(r&&"none"===r.toLowerCase());if(a){if("linear-gradient"===n.fillType&&n.fillLinearGradient instanceof u.LinearGradient)i={fillType:"linear-gradient",fillLinearGradient:n.fillLinearGradient};else if("image"===n.fillType&&n.fillImage)i={fillType:"image",fillImage:n.fillImage,fillImageResize:n.fillImageResize,fillImagePixelWidth:n.fillImagePixelWidth,fillImagePixelHeight:n.fillImagePixelHeight};else if("color"===n.fillType&&n.fillColor){const e=new s.Color(n.fillColor).toCSS(!1);a&&t.setAttribute("style",`fill: ${e}; color: ${e}`);const i=t.getAttribute("stroke");i&&"currentcolor"===i.toLowerCase()&&t.setAttribute("stroke",e)}o=t}}let c=!1;const h=s.project.importSVG(o,{expandShapes:!0,insert:!1,size:t,onError:e=>{console.log("Error on importing SVG:",e),c=!0;const t=document&&document.getElementsByTagName("body");if(t&&t[0]){let e=t[0].lastElementChild;for(;e&&"svg"===e.tagName;)e.remove(),e=t[0].lastElementChild}}});if(c)return null;const p=r.convertPaperItemToNodes(h,[],null,new a.default,i),g=p[0];if(!g)return null;if(t){const e={width:g.width,height:g.height},i=n;i&&d.hasIntrinsicSize(i)&&(e.height=i.intrinsicHeight||e.height,e.width=i.intrinsicWidth||e.width);const o=t.width/e.width,r=t.height/e.height;1===o&&1===r||l.scaleMutableNodes(p.slice(1),o,r)}return(new a.default).insertNodes(p).getNode(g.id)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(133),o=n(133);function convertWithPathToPaperPath({pathSegments:e,pathClosed:t},n){const r=new i.Path({insert:!1,closed:t||n});return e.forEach(e=>{e&&r.add(new o.Segment({point:new o.Point(e.x,e.y),handleIn:new o.Point(e.handleInX,e.handleInY),handleOut:new o.Point(e.handleOutX,e.handleOutY)}))}),r}t.convertWithPathsToPaperPathItem=function convertWithPathsToPaperPathItem(e,t){const n=e.map(e=>convertWithPathToPaperPath(e,t));return 1===n.length?n[0]:new o.CompoundPath({insert:!1,children:n})},t.convertWithPathToPaperPath=convertWithPathToPaperPath},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(133),o=n(133),r=n(7),s=n(4),a=n(1),l=n(608),c=n(4),d=n(73),u=n(193),h=n(69),p=n(57),g={matrix:null};function convertPaperPathItemToWithPaths(e,t=g){if(e instanceof o.CompoundPath)return convertPaperCompoundPathToWithPaths(e,t);if(e instanceof i.Path)return[convertPaperPathToWithPath(e,t)];throw new Error("Unexpected path type")}function convertPaperPathToWithPath(e,t=g){null!==t.matrix&&e.segments.forEach(e=>{e.transform(t.matrix)});const n=e.segments.map(e=>{const{point:t,handleIn:n,handleOut:i}=e;return new a.PathSegment({x:t.x,y:t.y,handleInX:n.x,handleInY:n.y,handleOutX:i.x,handleOutY:i.y,handleMirroring:inferHandleMirroring(e)})});return{pathSegments:r.List(n),pathClosed:e.closed}}function convertPaperCompoundPathToWithPaths(e,t=g){let n=[];return e.children.forEach(e=>{e instanceof o.PathItem&&(n=n.concat(convertPaperPathItemToWithPaths(e,t)))}),n}function inferHandleMirroring(e){const{handleIn:t,handleOut:n}=e;return 0===t.x&&0===t.y&&0===n.x&&0===n.y?"straight":t.x===-n.x&&t.y===-n.y?"symmetric":"disconnected"}function convertPaperColorToString(e){if(e instanceof o.Color)return e.toCSS(!1);if(e)throw Error(`Paper.Color unexpectedly passed as a string: ${e}`);return"rgba(0,0,0,1)"}function convertPaperItemToNodes(e,t=[],n=null,i=new s.default,r){return e instanceof o.Group?convertPaperGroupToNodes(e,t,n,i,r):e instanceof o.PathItem?convertPaperPathItemToNodes(e,t,n,i,r):(console.warn(`Unhandled Paper item: ${e}`),t)}function convertPaperGroupToNodes(e,t=[],n=null,i=new s.default,o){const r=convertPaperItemBounds(e),a=n?n.id:c.NullID;let l;return l=a?new s.ShapeGroupNode(Object.assign({parentid:a},r)):new s.ShapeContainerNode({parentid:a,left:0,top:0,width:r.x+r.width,height:r.y+r.height,fillEnabled:!1}),t.push(l),e.children.forEach(e=>{convertPaperItemToNodes(e,t,l,i,o)}),t}function convertPaperPathItemToNodes(e,t=[],n=null,i=new s.default,o){const r=convertPaperPathItemToWithPaths(e),a=convertPaperPathItemAttributes(e),h=n?n.id:c.NullID;if(1===r.length){const[{pathSegments:e,pathClosed:i},c]=l.default(r[0]);u.isShapeGroupNode(n)&&(c.x-=n.x,c.y-=n.y);const d=new s.PathNode(Object.assign({parentid:h,pathSegments:e,pathClosed:i},a,o,c));t.push(d)}else if(r.length){const i=convertPaperItemBounds(e),c=i.x,p=i.y;u.isShapeGroupNode(n)&&(i.x-=n.x,i.y-=n.y);const g=new s.BooleanShapeNode(Object.assign({parentid:h,pathBoolean:d.PathBooleanType.Join},a,o,i));t.push(g),r.forEach(e=>{const[{pathSegments:n,pathClosed:i},r]=l.default(e);r.x-=c,r.y-=p;const a=new s.PathNode(Object.assign({parentid:g.id,pathSegments:n,pathClosed:i},r,o));t.push(a)})}return t}function convertPaperItemBounds(e){const{x:t,y:n,width:i,height:o}=e.bounds;return{x:t,y:n,width:i,height:o}}function convertPaperPathItemAttributes(e){const t=e.fillColor;let n,i,o="color";const s=t;if(s&&s.origin&&s.destination){const l=t.gradient;if(l){const t=l.stops[0],c=l.stops[l.stops.length-1],d=r.List([new p.GradientColorStop({value:convertPaperColorToString(t.color),position:0}),new p.GradientColorStop({value:convertPaperColorToString(c.color),position:1})]);let u,g=180;if(l.radial){const t=Math.max(e.bounds.width,1),n=Math.max(e.bounds.height,1),i=s.origin.x/t,r=s.origin.y/n,l={x:i,y:r},c={x:s.destination.x/t,y:s.destination.y/n},d=a.Point.distance(l,c),h=d,p=Math.abs(l.y-c.y)>Math.abs(l.x-c.x);o="radial-gradient",u={centerAnchorX:i,centerAnchorY:r,widthFactor:p?h:d,heightFactor:p?d:h}}else o="linear-gradient",g=(90+s.destination.subtract(s.origin).angle)%360;n=new h.LinearGradient({stops:d,angle:g}),i=new h.RadialGradient(Object.assign({stops:d},u))}}return{strokeEnabled:e.hasStroke()?1:0,strokeAlignment:"center",strokeWidth:e.strokeWidth,strokeColor:convertPaperColorToString(e.strokeColor),strokeMiterLimit:e.miterLimit,strokeDashArray:e.dashArray.join(","),strokeDashOffset:e.dashOffset,lineJoin:e.strokeJoin,lineCap:e.strokeCap,fillEnabled:e.hasFill(),fillColor:convertPaperColorToString(e.fillColor),fillType:o,fillLinearGradient:n,fillRadialGradient:i,opacity:e.opacity}}t.convertPaperPathItemToWithPaths=convertPaperPathItemToWithPaths,t.convertPaperPathToWithPath=convertPaperPathToWithPath,t.convertPaperCompoundPathToWithPaths=convertPaperCompoundPathToWithPaths,t.inferHandleMirroring=inferHandleMirroring,t.convertPaperColorToString=convertPaperColorToString,t.convertPaperItemToNodes=convertPaperItemToNodes,t.convertPaperGroupToNodes=convertPaperGroupToNodes,t.convertPaperPathItemToNodes=convertPaperPathItemToNodes,t.convertPaperItemBounds=convertPaperItemBounds,t.convertPaperPathItemAttributes=convertPaperPathItemAttributes},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(19);t.default=function normalizeWithPath(e){const t=i.default.boundingBox(e),n=e.pathSegments.map(e=>e.merge({x:e.x-t.x,y:e.y-t.y}));return[{pathClosed:e.pathClosed,pathSegments:n},t]}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(83),o=n(16),r=n(39),s=n(25),a=n(54),l=n(41),c=n(50),d=n(116),u=n(31),h=n(60);t.ShapeGroupRecord=Object.assign({},i.nameDefaults,o.instructionalChildrenDefaults,s.rotationDefaults,r.aspectRatioDefaults,h.opacityDefaults,a.visibilityDefaults,l.lockDefaults,c.sizeDefaults,d.positionDefaults,u.withExportDefaults)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(7),o=n(57),r={alpha:1,angle:180,stops:i.List([new o.GradientColorStop({value:"rgba(0,0,0,0)",position:0}),new o.GradientColorStop({value:"black",position:1})])};t.LinearGradientRecord=i.Record(r)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(1),o=n(91);t.RadialGradient=Object.assign(o.RadialGradient,i.RadialGradient)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(7),o=n(57),r={alpha:1,widthFactor:.5,heightFactor:.5,centerAnchorX:.5,centerAnchorY:.5,stops:i.List([new o.GradientColorStop({value:"rgba(0,0,0,0)",position:0}),new o.GradientColorStop({value:"black",position:1})])};t.RadialGradientRecord=i.Record(r)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(116),o=n(50),r=n(1);t.scaleMutableNodes=function scaleMutableNodes(e,t,n){1===t&&t===n||e.forEach(e=>{i.hasPosition(e)&&(e.x=e.x*t,e.y=e.y*n),o.hasSize(e)&&(e.width=e.width*t,e.height=e.height*n);const s=e;if(s&&s.pathSegments&&(s.pathSegments=s.pathSegments.map(e=>new r.PathSegment({x:e.x*t,y:e.y*n,handleMirroring:e.handleMirroring,handleOutX:e.handleOutX*t,handleOutY:e.handleOutY*n,handleInX:e.handleInX*t,handleInY:e.handleInY*n})),t===n)){const e=t;void 0!==s.strokeDashOffset&&(s.strokeDashOffset=s.strokeDashOffset*e),void 0!==s.strokeWidth&&(s.strokeWidth=s.strokeWidth*e),void 0!==s.strokeMiterLimit&&(s.strokeMiterLimit=s.strokeMiterLimit*e)}})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(133);t.default=function setupPaperWithoutView(){i.setup(""),i.project.view.remove()}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getNodesForNodeIDsOrNodes=(e,t)=>0===e.length?[]:"string"==typeof e[0]?t.withoutDescendants(t.getNodes(e)):e},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(83),o=n(50),r=n(112),s=n(161),a=n(39),l=n(34),c=n(25),d=n(98),u=n(127),h=n(16),p=n(54),g=n(41),m=n(31),f=n(60),y=n(160),v=n(113),b=n(119),k=n(128),S=n(55),C=n(61),x=n(115),w=n(162),T=n(114),P=n(12),E=n(132),F=n(101);t.FrameRecord=Object.assign({},i.nameDefaults,o.sizeDefaults,r.intrinsicSizeDefaults,h.basicChildrenDefaults,s.withDeviceDefaults,a.aspectRatioDefaults,l.pinDefaults,T.fillDefaults,f.opacityDefaults,c.rotationDefaults,x.clipDefaults,d.borderDefaults,u.borderPerSideDefaults,S.relativeRadiusDefaults,C.radiusPerCornerDefaults,y.boxShadowDefaults,p.visibilityDefaults,g.lockDefaults,w.effectsDefaults,m.withExportDefaults,P.templateDefaults,b.navigationLinkDefaults,v.codeOverrideDefaults,k.previewSettingsDefaults,E.targetDefaults,F.guidesDefaults)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(83),o=n(16),r=n(39),s=n(73),a=n(25),l=n(62),c=n(54),d=n(41),u=n(50),h=n(31),p=n(60),g=n(160),m=n(114);t.BooleanShapeRecord=Object.assign({},i.nameDefaults,o.instructionalChildrenDefaults,m.pathFillDefaults,s.pathBooleanDefaults,a.rotationDefaults,r.aspectRatioDefaults,l.shapeStrokeDefaults,p.opacityDefaults,g.boxShadowDefaults,c.visibilityDefaults,d.lockDefaults,u.sizeDefaults,h.withExportDefaults,{x:0,y:0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(198),o=n(55),r=n(61);t.RectangleShapeRecord=Object.assign({},i.ShapeNodeRecord,o.radiusDefaults,r.radiusPerCornerDefaults)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(198),o=n(191),r=n(55);t.StarShapeRecord=Object.assign({},i.ShapeNodeRecord,r.radiusDefaults,o.spikesDefaults)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(259),o=n(198),r=n(55);t.PolygonShapeRecord=Object.assign({},o.ShapeNodeRecord,r.radiusDefaults,i.polygonDefaults)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(83),o=n(50),r=n(34),s=n(16),a=n(54),l=n(41),c=n(60),d=n(31),u=n(114),h=n(131),p=n(382),g=n(55),m=n(61),f=n(119),y=n(128),v=n(161);t.ShapeContainerRecord=Object.assign({},i.nameDefaults,o.sizeDefaults,s.basicChildrenDefaults,r.pinDefaults,h.autoSizeDefaults,p.sizeToFitDefaults,a.visibilityDefaults,l.lockDefaults,c.opacityDefaults,u.shapeContainerFillDefaults,g.radiusDefaults,m.radiusPerCornerDefaults,f.navigationLinkDefaults,d.withExportDefaults,d.withExportIncludesBackgroundDefaults,y.previewSettingsDefaults,v.withDeviceDefaults)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(7);t.ExportOptionsRecord=i.Record(Object.assign({},{enabled:!0,type:"png",scale:1,nameExtension:"",nameExtensionMode:"Suffix"}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(27),o=n(62),r=n(1),s=8,a=2e4;t.SpatialCache=class SpatialCache{constructor(){this.index=[]}atX(e){return e+a>>s<<1}atY(e){return 1+(e+a>>s<<1)}rect(e,t){let n=e.convertRectToCanvasCached(t);return i.hasShape(t)&&o.hasStroke(t)&&1===t.strokeEnabled&&t.strokeWidth&&(n=r.Rect.inflate(n,t.strokeWidth/2)),n}add(e,t){const n=this.rect(e,t),i=this.atX(n.x),o=this.atX(n.x+n.width),r=this.atY(n.y),s=this.atY(n.y+n.height);for(let a=i;a<=o;a+=2)for(let e=r;e<=s;e+=2){let n=this.index[a+e];n||(n=this.index[a+e]=[]),n.push(t)}}getNodesInRect(e,t){const n=new Set,i=this.atX(t.x),o=this.atX(t.x+t.width),s=this.atY(t.y),a=this.atY(t.y+t.height);for(let l=i;l<=o;l+=2)for(let i=s;i<=a;i+=2){const o=this.index[l+i];if(o)for(let i=0,s=o.length;i<s;i++){const s=e.current(o[i]);if(!s)continue;if(n.has(s))continue;const a=this.rect(e,s);r.Rect.intersects(a,t)&&n.add(s)}}return Array.from(n)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function compareIndexArrays(e,t){let n=0;for(;n<e.length&&n<t.length;){if(e[n]<t[n])return-1;if(e[n]>t[n])return 1;n++}return n>=e.length&&n>=t.length?0:n>=e.length?-1:1}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.onlyIncludes=(e,t)=>{const n=t.map(e=>e.name);return e.reduce((e,t)=>e&&-1!==n.indexOf(t.constructor.name),!0)},t.doesNotInclude=(e,t)=>{const n=t.map(e=>e.name);return e.reduce((e,t)=>e&&-1===n.indexOf(t.constructor.name),!0)},t.isEqual=(e,t)=>null===e&&null===t||e&&t&&e.id===t.id},function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))(function(o,r){function fulfilled(e){try{step(i.next(e))}catch(t){r(t)}}function rejected(e){try{step(i.throw(e))}catch(t){r(t)}}function step(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(fulfilled,rejected)}step((i=i.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const o=n(70),r=n(6),s=n(7),a=n(28),l=n(1),c=n(137),d=n(35),u=n(168),h=n(58),p=n(627),g=s.List(),m="__transient-thread__";function mergeThreads(e,t){let n=!1;const i={};return e.forEach(e=>i[e.id]=e),t.forEach(e=>{const t=i[e.id];(!t||Number(t.updatedAt||u.getThreadTimestamp(t))<Number(e.updatedAt||u.getThreadTimestamp(e)))&&(n=!0,i[e.id]=e)}),n?function sortThreads(e){return e.sort((e,t)=>{const n=u.isUnread(e),i=u.isUnread(t);return n&&!i?-1:!n&&i?1:u.getThreadTimestamp(t)-u.getThreadTimestamp(e)}).toList()}(s.List(Object.values(i))):e}t.FeedbackStore=class FeedbackStore{constructor(e,t){if(this.addChanges=e,this.stateEmitter=new o.ServiceEventEmitter,this.pollInterval={Idle:3e4,Active:5e3,Thread:1e3},this._threads=s.List(),this._archived=null,this._currentUser=null,this._selectionState={tab:c.Tab.All,threadId:null,commentId:null,seenUntil:null},this._commentMetadata=new Map,this._isActive=!1,a.experiments.isOn("feedback")&&(this.feedbackService=o.FeedbackService.on(o.PostMessageChannel.toParentFrame).expect()),t){const e=t.filter(e=>e.archived);this._threads=s.List(t.filter(e=>!e.archived)),this._archived=e.length?s.List(e):null}}initialize(){return i(this,void 0,void 0,function*(){if(!a.experiments.isOn("feedback"))return;const[{threads:e},{user:t}]=yield Promise.all([this.feedbackService.getThreads({archived:!1}),this.feedbackService.getSessionIdentity()]);this.updateThreads(mergeThreads(s.List(),e.map(p.fromServiceThread))),this._currentUser=t,this.startPolling()})}documentDidLoad(e){a.experiments.isOn("feedback")&&o.FeedbackDocument.on(o.PostMessageChannel.toParentFrame).register({toggleFeedback:e.wrapHandler(({force:t})=>i(this,void 0,void 0,function*(){("boolean"==typeof t?t:!this.isActive)?e.setToolEnum(h.Tools.Comment):e.tool.enum===h.Tools.Comment&&e.exitTool()})),openThread:e.wrapHandler(({threadId:t,commentId:n})=>i(this,void 0,void 0,function*(){e.setToolEnum(h.Tools.Comment),this.setSelectedThread(t,n)})),feedbackStateStream:()=>this.stateEmitter}).catch(d.unhandledError)}get commentMetadata(){return this._commentMetadata}get selectionState(){return this._selectionState}setSelectedSidebarTab(e){this._selectionState.tab!==e&&(this._selectionState=Object.assign({},this._selectionState,{tab:e}),this.broadcastChanges())}get currentUser(){return this._currentUser}getThread(e){return this.threads.find(t=>t.id===e)||this.archivedThreads.find(t=>t.id===e)}get selectedThreadId(){return this._selectionState.threadId}get selectedThread(){return this._selectionState.threadId?this.getThread(this._selectionState.threadId):null}setSelectedThread(e,t){if(this.selectedThreadId===e)return;const n=this.selectedThread;n&&this.isTransientThread(n.id)&&this._removeThread(n.id);const i=this.getThread(e);if(!i)throw new Error(`Cannot find thread with id: ${e}`);this._selectionState=Object.assign({},this._selectionState,{threadId:e,commentId:t||null,seenUntil:i.seenUntil}),e&&this.updateSelectedTab(e),e&&!this.isTransientThread(e)&&this.markThreadAsSeen(e).catch(d.unhandledError),this.startPolling(),this.broadcastChanges()}updateSelectedTab(e){const t=this.getThread(e),n=this._selectionState.tab;t||this._archived?t.archived||n!==c.Tab.Archived?t.archived&&n!==c.Tab.Archived&&(this._selectionState=Object.assign({},this._selectionState,{tab:c.Tab.Archived})):this._selectionState=Object.assign({},this._selectionState,{tab:c.Tab.All}):this.loadArchivedThreads().then(()=>{this.selectedThreadId===e&&n===this._selectionState.tab&&this.updateSelectedTab(e)}).catch(d.unhandledError)}clearSelectedThread(){this.selectedThreadId&&(this._selectionState=Object.assign({},this._selectionState,{threadId:null,commentId:null,seenUntil:null}),this.startPolling(),this.broadcastChanges())}loadArchivedThreads(){return i(this,void 0,void 0,function*(){const{threads:e}=yield this.feedbackService.getThreads({archived:!0});this.updateArchived(mergeThreads(this.archivedThreads,e.map(p.fromServiceThread)))})}broadcastChanges(){this.addChanges(r.EngineChangeFlags.FeedbackStore)}openTransientThread(e){const t=this.createTransientThread(e);this._selectionState=Object.assign({},this._selectionState,{threadId:t.id}),this.broadcastChanges()}markThreadAsSeen(e){return i(this,void 0,void 0,function*(){this.updateThread(e,e=>Object.assign({},e,{seenUntil:new Date(u.getThreadTimestamp(e))}));const{thread:t}=yield this.feedbackService.markAsSeen({threadId:e});this.updateThreads(mergeThreads(this.threads,[p.fromServiceThread(t)]))})}createComment({threadId:e,text:t}){return i(this,void 0,void 0,function*(){const n=this.getThread(e);if(!n)throw new Error(`Unable to find thread in store: ${e}`);if(this.isTransientThread(n.id)){this._removeThread(e);const i=yield this.feedbackService.createThread({anchor:n.anchor,text:t});return this._selectionState=Object.assign({},this._selectionState,{threadId:null}),void this.updateThreads(mergeThreads(this.threads,[p.fromServiceThread(i.thread)]))}const{comment:i}=yield this.feedbackService.createComment({threadId:n.id,text:t});this.updateThread(e,e=>Object.assign({},e,{comments:[...e.comments,p.fromServiceComment(i)]}))})}setCommentEditable(e){const t=this._commentMetadata.get(e);t&&t.isEditing||(this._commentMetadata.set(e,Object.assign({},t,{isEditing:!0})),this.broadcastChanges())}clearCommentEditable(e){const t=this._commentMetadata.get(e);t&&t.isEditing&&(this._commentMetadata.set(e,Object.assign({},t,{isEditing:!1})),this.broadcastChanges())}updateComment({threadId:e,commentId:t,text:n}){return i(this,void 0,void 0,function*(){const{comment:i}=yield this.feedbackService.updateComment({id:t,threadId:e,text:n});this.updateThreadWithCommentResponse(e,i)})}deleteComment({threadId:e,commentId:t}){return i(this,void 0,void 0,function*(){const{comment:n}=yield this.feedbackService.deleteComment({id:t,threadId:e});this.updateThreadWithCommentResponse(e,n)})}updateThreadWithCommentResponse(e,t){const n=p.fromServiceComment(t),i=this.getThread(e);if(!i)throw new Error("Unable to find thread");const o=i.comments.slice();let r=!1;for(let s=0;s<o.length;s+=1){const e=o[s];if(e.id===n.id){l.isEqual(n,e)||(o[s]=Object.assign({},e,n),r=!0);break}}r&&this.updateThread(e,e=>Object.assign({},e,{comments:o}))}setThreadAnchor(e,t){return this.updateThread(e,e=>Object.assign({},e,{anchor:t}))}persistThreadAnchor(e){return i(this,void 0,void 0,function*(){if(m===e)return;const t=this.getThread(e);if(!t)return;const n=yield this.feedbackService.updateThread({id:e,anchor:t.anchor});this.updateThread(e,()=>p.fromServiceThread(n.thread))})}updateThread(e,t){const n=this.threads.findIndex(t=>t.id===e);if(n<0)return;this.updateThreads(this.threads.update(n,t));const i=this.threads.get(n);return i.id!==e&&this.selectedThreadId===e&&(this._selectionState=Object.assign({},this._selectionState,{threadId:i.id}),this.broadcastChanges()),i}archiveThread(e){return i(this,void 0,void 0,function*(){if(!this.getThread(e))return;const t=this.updateThread(e,e=>e.archived?e:Object.assign({},e,{archived:!0}));if(!t)return;this._removeThread(t.id),this.updateArchived(mergeThreads(this.archivedThreads,[t]));const{thread:n}=yield this.feedbackService.updateThread({id:e,archived:!0});this.updateArchived(mergeThreads(this.threads,[p.fromServiceThread(n)]))})}deleteThread(e){return i(this,void 0,void 0,function*(){if(!this.isTransientThread(e))throw new Error("NotImplemented: Cannot delete a thread");this._removeThread(e)})}_removeThread(e){const t=this.threads,n=this.threads.findIndex(t=>t.id===e);n<0||(this.updateThreads(t.delete(n)),this.selectedThreadId===e&&(this._selectionState=Object.assign({},this._selectionState,{threadId:null})),this.broadcastChanges())}get threads(){return this._threads}get archivedThreads(){return this._archived||g}updateThreads(e){this._threads!==e&&(this._threads=e,this.broadcastChanges())}updateArchived(e){this._threads!==e&&(this._archived=e,this.broadcastChanges())}isTransientThread(e){return e===m}createTransientThread(e){const t={comments:[],anchor:e,id:m,archived:!1,seenUntil:new Date("January 19, 2038"),updatedAt:null};return this.updateThread(t.id,()=>t)||this.updateThreads(mergeThreads(this.threads,[t])),this.broadcastChanges(),t}get isActive(){return this._isActive}set isActive(e){this.isActive!==e&&(this._isActive=e,this.startPolling(),this.stateEmitter.emit({isActive:e}),this.broadcastChanges())}get threadIdUnderMouse(){return this._threadIdUnderMouse}set threadIdUnderMouse(e){this._threadIdUnderMouse!==e&&(this._threadIdUnderMouse=e,this.broadcastChanges())}startPolling(){this.stopPolling();const e=()=>i(this,void 0,void 0,function*(){if(this.pollTimer){const{threads:e}=yield this.feedbackService.getThreads({archived:!1});this.updateThreads(mergeThreads(this.threads,e.map(p.fromServiceThread))),this.selectedThreadId&&(yield this.markThreadAsSeen(this.selectedThreadId))}this.pollTimer=window.setTimeout(e,this.currentPollInterval())});e().catch(e=>setTimeout(()=>{throw e}))}stopPolling(){clearTimeout(this.pollTimer)}currentPollInterval(){return this.isActive?this.selectedThreadId?this.pollInterval.Thread:this.pollInterval.Active:this.pollInterval.Idle}}},function(e,t,n){"use strict";function toServiceComment(e){return Object.assign({},e,{deletedBy:e.deletedBy?e.deletedBy:void 0,createdAt:serializeTimestamp(e.createdAt),updatedAt:serializeTimestamp(e.updatedAt)})}function fromServiceComment(e){const t=parseTimestamp(e.createdAt);if(!t)throw new Error("Unable to parse createdAt");return Object.assign({deletedBy:null},e,{createdAt:t,updatedAt:parseTimestamp(e.createdAt)})}function parseTimestamp(e){if(!e)return null;const t=Date.parse(e);return Number.isNaN(t)?null:new Date(t)}function serializeTimestamp(e){if(null!==e)return e.toUTCString()}Object.defineProperty(t,"__esModule",{value:!0}),t.toServiceThread=function toServiceThread(e){return Object.assign({},e,{comments:e.comments.map(toServiceComment),seenUntil:serializeTimestamp(e.seenUntil),updatedAt:serializeTimestamp(e.updatedAt)})},t.toServiceComment=toServiceComment,t.fromServiceThread=function fromServiceThread(e){return Object.assign({},e,{anchor:e.anchor,comments:e.comments.map(fromServiceComment),seenUntil:parseTimestamp(e.seenUntil),updatedAt:parseTimestamp(e.updatedAt)})},t.fromServiceComment=fromServiceComment},function(e,t,n){"use strict";var i=this&&this.__rest||function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(i=Object.getOwnPropertySymbols(e);o<i.length;o++)t.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(e,i[o])&&(n[i[o]]=e[i[o]])}return n};Object.defineProperty(t,"__esModule",{value:!0});const o=n(157),r=n(6),s=n(264);function toURL(e){return"string"==typeof e&&(e=new URL(e)),e}const a=encodeURIComponent("#&#");t.ServerStore=class ServerStore{constructor(e,t){this.addChanges=e,this.url=void 0,this.filename=void 0,this.running=!1,this.packages=[],this.outdated=[],this.hasOutdatedPackages=!1,this.packageErrors=[],this.packagesInfo={},this.tasks={},this.updatingPackages=[],this.isDocumentDirty=!1,this.recentlyInstalledPackages=[],this.hasRecentlyInstalledPackages=!1,this.availableLibraryVersions=[],this.builtInLibraryVersion=void 0,this.currentLibraryVersion=void 0,this.imageBaseURL=new URL("file:///"),this.documentURL=null,this.projectURL=null,this.hasProject=!1,this.location=window.location,this.history=window.history,t&&(this.location=t.location,this.history=t.history)}setImageBaseURL(e){`${this.imageBaseURL}`!==`${e}`&&(this.imageBaseURL=toURL(e),this.updateLocationHash(),this.addChanges(r.EngineChangeFlags.ServerStore))}setDocumentURL(e){`${this.documentURL}`!==`${e}`&&(this.documentURL=e?toURL(e):null,this.updateLocationHash(),this.addChanges(r.EngineChangeFlags.ServerStore))}setProjectURL(e){`${this.projectURL}`!==`${e}`&&(this.projectURL=toURL(e),this.updateLocationHash(),this.addChanges(r.EngineChangeFlags.ServerStore))}updateLocationHash(){const{origin:e,pathname:t}=this.location;if(!e)return;const n=this.documentURL?encodeURI(`${this.documentURL}`):"",i=encodeURI(`${this.imageBaseURL}`),o=this.projectURL?encodeURI(`${this.projectURL}`):"",r=`${e}${t}#${n}${a}${i}${a}${o}`;this.history.replaceState({},"",r)}setHasProject(){this.hasProject||(this.hasProject=!0,this.addChanges(r.EngineChangeFlags.ServerStore))}getPageMountURL(e){const{origin:t}=this.location;if(!t)return null;const n=this.projectURL?encodeURI(`${this.projectURL}`):"";return 0===n.length?null:`${`${n}_app/resources/Vekter`}/${e}${o.isDebugBuild?".debug":""}.html?projectURL=${n}&imageBaseURL=${n}`}stateForServer(){return{url:this.url,filename:this.filename,running:this.running,packages:[...this.packages],outdated:[...this.outdated],packageErrors:[...this.packageErrors],packagesInfo:s.deepClone(Object.assign({},this.packagesInfo)),tasks:s.deepClone(this.tasks),updatingPackages:[...this.updatingPackages],isDocumentDirty:this.isDocumentDirty,availableLibraryVersions:[...this.availableLibraryVersions],builtInLibraryVersion:this.builtInLibraryVersion,currentLibraryVersion:this.currentLibraryVersion}}setStateFromServer(e){let t=this.recentlyInstalledPackages,n=this.hasRecentlyInstalledPackages;if(this.running&&this.url){const i=this.packages,o=e.packages.filter(e=>!i.includes(e));o.length&&(n=!0,t=t.concat(o))}const{hasProject:o,imageBaseURL:s,documentURL:a}=e,l=i(e,["hasProject","imageBaseURL","documentURL"]),c=function getUpdatingPackages(e){const t=[],n=Object.keys(e);for(const i of n){const n=e[i];"upgrade"===n.name&&n.context&&n.context.packageName&&t.push(n.context.packageName)}return t}(e.tasks),d=e.outdated.length>0,u=Object.assign({},l,{recentlyInstalledPackages:t,hasRecentlyInstalledPackages:n,updatingPackages:c,hasOutdatedPackages:d});Object.assign(this,u),this.addChanges(r.EngineChangeFlags.ServerStore),!this.hasProject&&o&&(this.setDocumentURL(a||null),s&&this.setImageBaseURL(s),this.setHasProject())}removeFromRecentlyInstalledPackages(e){const t=this.recentlyInstalledPackages.filter(t=>t===e);t.length!==this.recentlyInstalledPackages.length&&(this.recentlyInstalledPackages=t,this.hasRecentlyInstalledPackages=t.length>0,this.addChanges(r.EngineChangeFlags.ServerStore))}clearRecentlyInstalledPackagesFlag(){!1!==this.hasRecentlyInstalledPackages&&(this.hasRecentlyInstalledPackages=!1,this.addChanges(r.EngineChangeFlags.ServerStore))}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(7),o=n(265),r=n(4),s=n(108),a=n(12),l=n(1),c=n(119),d=n(6),u=n(84),h=n(128),p=25;function resetNodeCache(e){const{tree:t}=e.history[e.historyIndex];return t.makeLatest(),t.clearSelectionCache(),t.updateCache(),t.didNonLinearMove(),e}function moveHistoryIndex(e,t){const{history:n}=e;let{historyIndex:i}=e;return(i+=t)>=0&&i<n.length?(o.documentChanged(),updateSelection(resetNodeCache(Object.assign({},e,{historyIndex:i})),n[i].selection)):e}function endUndoGroup(e){const{history:t,historyIndex:n,undoGroupIndices:i}=e,o=i.pop();if(void 0===o)return e;if(t.length<=o)return Object.assign({},e,{undoGroupIndices:i});const r=t[n],s=t.slice(0,o);return s.push(r),Object.assign({},e,{history:s,historyIndex:o,undoGroupIndices:i})}function updateSelection(e,t){const{tree:n,selection:i}=e.history[e.historyIndex];let o=[];t.forEach(e=>{const t=n.getNode(e);t&&(a.isHiddenMaster(t)?t.cache.selected=!1:o.push(e))});let c=e.collapseOverrides,d=!1;if(0===o.length)e=Object.assign({},e,{activeScreen:r.NullID});else{const t=function getCommonGroundNode(e,t){let n;for(const i of t){const t=e.getNode(i);if(!t)return null;const o=e.getGroundNodeFor(t);if(n){if(n.id!==o.id)return null}else n=o}return n}(n,o);if(t&&h.hasPreviewSettings(t)?e.activeScreen!==t.id&&(e=Object.assign({},e,{activeScreen:t.id})):e=Object.assign({},e,{activeScreen:r.NullID}),c.count()>0){const e=s.without(o,i),t=[];e.forEach(e=>{t.push(...n.getAncestors(e))}),t.forEach(e=>{!0===c.get(e)&&(c=c.delete(e),d=!0)})}}let u=e.highlight;u&&!n.getNode(u)&&(u=r.NullID);let p=e.activeScreen;p&&!n.getNode(p)&&(p=r.NullID);let g=i.length===o.length;for(let r=0,s=o.length;r<s;r++){const e=o[r],t=n.getNode(e);t.cache.selected||(g=!1,t.cache.selected=!0)}if(g)o=i;else{for(let e=0,t=i.length;e<t;e++){const t=i[e];if(o.indexOf(t)>=0)continue;const r=n.getNode(t);r&&(r.cache.selected=!1)}l.isShallowEqualArray(o,i)&&(o=i)}return g&&e.highlight===u&&e.activeScreen===p&&!d?e:(e.history[e.historyIndex]={tree:n,selection:o},Object.assign({},e,{highlight:u,activeScreen:p,collapseOverrides:c}))}const g=new class extends Set{has(e){return!0}};t.TreeStore=class TreeStore{constructor(e,t){this.addChanges=e,this.showAllArrows=!1,this.fileInEditor=null,this.selectionAsNodes=[],this.boundingBox={minX:0,minY:0,maxX:0,maxY:0},this.frameNodes=[],this.codeComponents=[],this.shapeContainerNodes=[],this.navigationLinkNodes=[],this.codeComponentArrows=[],this.linkNodeArrows=[],this.tree=new r.default,this.setTree(this.tree),this.setShowAllArrows(t)}getTree(){const e=this.state;return e.history[e.historyIndex].tree}getSelection(){const e=this.state;return e.history[e.historyIndex].selection}setTree(e){e.updateCache(),this.state={history:[{tree:e,selection:[]}],historyIndex:0,scheduledEndUndoGroupCount:0,undoGroupIndices:[],openVectorRoots:[],highlight:r.NullID,activeScreen:r.NullID,renameTarget:r.NullID,collapseOverrides:i.Map(),loadedEmptyTree:0===e.getGroundNodes().length},this.calculate(e,[])}calculateConnectedScreens(){const e=[],t=[];let n=g;if(!this.showAllArrows){n=new Set;const e=this.tree.get(this.state.activeScreen);if(e){const t=this.tree.getGroundNodeFor(e);t&&t.walk(e=>n.add(e.id))}const t=[];this.tree.getNodes(this.selection).forEach(e=>{if(n.has(e.id))return;const i=this.tree.getGroundNodeFor(e);i&&!n.has(i.id)&&t.push(i)}),t.length<=p?t.forEach(e=>{e.walk(e=>n.add(e.id))}):n.clear();const i=this.tree.get(this.state.highlight);i&&n.add(i.id)}for(const i of this.navigationLinkNodes){const e=i.navigationTarget;if(!e)continue;const o=this.tree.get(e);o&&(n.has(i.id)||n.has(e))&&t.push({fromNode:i,toNode:o})}for(const i of this.codeComponents){if(u.codeComponentWithChildInsertion(i)||!i.cache.visible)continue;const t=n.has(i.id),o=i.getSlotKeys();if(0===o.length)continue;const r=[];for(let e=0,s=o.length;e<s;e++){const s=o[e],a=i.codeComponentProps[s];if(!a||!Array.isArray(a))continue;const l=[];let c=!1;a.forEach(e=>{if(!e.enabled)return;const t=this.tree.get(e.value);t&&(l.push(t),c=c||n.has(t.id))}),(t||c)&&r.push(...l)}(t||r.length>0)&&e.push({fromNode:i,toNodes:r})}l.isShallowEqualArray(this.codeComponentArrows,e)&&l.isShallowEqualArray(this.linkNodeArrows,t)||(this.codeComponentArrows=e,this.linkNodeArrows=t,this.addChanges(d.EngineChangeFlags.Arrows))}updateSelectionAsNodes(e,t){const n=t.map(t=>e.getNode(t));l.isShallowEqualArray(this.selectionAsNodes,n)||(this.selectionAsNodes=n)}calculate(e,t){let n=d.EngineChangeFlags.TreeStore;if(this.selection!==t&&(this.selection=t,n|=d.EngineChangeFlags.Selection),this.tree===e)return n&d.EngineChangeFlags.Selection&&this.updateSelectionAsNodes(e,t),void this.addChanges(n);n|=d.EngineChangeFlags.Tree,this.tree=e,this.updateSelectionAsNodes(e,t);const i=e.getGroundNodes(e=>r.isFrameNode(e)||r.isCodeComponentNode(e)||r.isShapeContainerNode(e));l.isShallowEqualArray(this.frameNodes,i)||(this.frameNodes=i);const o=[],s=[],a=[];let u=1/0,h=1/0,p=-1/0,g=-1/0;e.root.walk(e=>{r.isShapeContainerNode(e)?s.push(e):r.isCodeComponentNode(e)&&o.push(e),c.hasNavigationLink(e)&&e.cache.visible&&a.push(e);const t=e.cache.canvasRect;if(t){const{x:e,y:n,width:i,height:o}=t;e<u&&(u=e),n<h&&(h=n),e+i>p&&(p=e+i),n+o>g&&(g=n+o)}}),this.boundingBox={minX:u,minY:h,maxX:p,maxY:g},this.codeComponents=o,this.navigationLinkNodes=a,l.isShallowEqualArray(this.shapeContainerNodes,s)||(this.shapeContainerNodes=s,n|=d.EngineChangeFlags.ShapeContainerNodes),this.addChanges(n)}commit(e,t){this.state=updateSelection(function stateWithNewTree(e,t){const{history:n,historyIndex:i,undoGroupIndices:o,collapseOverrides:r}=e;if(i>=0&&n[i].tree===t)return e;const s=n.slice(0,i+1),a={tree:t,selection:n[i].selection};s.push(a);const l=s.length-1,c=o.map(e=>Math.min(e,l));t.updateCache();const d=r.filter((e,n)=>void 0!==t.getNode(n)),u=d.count()!==r.count()?d:r;return Object.assign({},e,{history:s,historyIndex:l,undoGroupIndices:c,collapseOverrides:u})}(this.state,e),t),this.calculate(e,this.getSelection())}canUndo(){const{historyIndex:e}=this.state;return e>0}canRedo(){const{historyIndex:e,history:t}=this.state;return e+1<t.length}undo(){this.state=function undo(e){const{historyIndex:t,undoGroupIndices:n}=e,i=[...n].reverse().find(e=>e<=t);return void 0===i?moveHistoryIndex(e,-1):(i-t-1>0&&(console.warn("Unexpected open undo group, closing it."),n.pop()),Object.assign({},moveHistoryIndex(e,-1),{undoGroupIndices:n}))}(this.state),this.calculate(this.getTree(),this.getSelection())}redo(){this.state=function redo(e){return moveHistoryIndex(e,1)}(this.state),this.calculate(this.getTree(),this.getSelection())}beginUndoGroup(){this.state=function beginUndoGroup(e){const{history:t,historyIndex:n,undoGroupIndices:i}=e,o=t.slice(0,n+1);return i.push(n+1),Object.assign({},e,{history:o,historyIndex:n,undoGroupIndices:i})}(this.state),this.addChanges(d.EngineChangeFlags.TreeStore)}discardUndoGroup(){this.state=function discardUndoGroup(e){const{history:t,undoGroupIndices:n}=e,i=n[n.length-1];if(void 0===i)return e;if(t.length<=i)return Object.assign({},e,{undoGroupIndices:n});const o=i-1,r=t.slice(0,i);return updateSelection(resetNodeCache(Object.assign({},e,{history:r,historyIndex:o})),[])}(this.state),this.addChanges(d.EngineChangeFlags.TreeStore)}scheduleEndUndoGroup(){this.state=Object.assign({},this.state,{scheduledEndUndoGroupCount:this.state.scheduledEndUndoGroupCount+1})}performScheduledEndUndoGroups(){const{scheduledEndUndoGroupCount:e}=this.state;if(e){for(let t=0;t<e;t++)this.state=endUndoGroup(this.state);this.state=Object.assign({},this.state,{scheduledEndUndoGroupCount:0}),this.addChanges(d.EngineChangeFlags.TreeStore)}}clearUndoStack(){this.state=function clearUndoStack(e){return Object.assign({},e,{history:[e.history[e.historyIndex]],historyIndex:0,undoGroupIndices:[]})}(this.state),this.addChanges(d.EngineChangeFlags.TreeStore)}setHighlight(e){this.state.highlight!==e&&(this.state=Object.assign({},this.state,{highlight:e}),this.addChanges(d.EngineChangeFlags.TreeStore|d.EngineChangeFlags.Highlight))}setActiveScreen(e){this.state.activeScreen!==e&&(this.state=Object.assign({},this.state,{activeScreen:e}),this.addChanges(d.EngineChangeFlags.TreeStore|d.EngineChangeFlags.Highlight))}setRenameTarget(e){this.state.renameTarget!==e&&(this.state=Object.assign({},this.state,{renameTarget:e}),this.addChanges(d.EngineChangeFlags.TreeStore))}setCollapseMode(e,t,n){let i=this.state.collapseOverrides;n?i=i.set(e,t):i.has(e)&&(i=i.delete(e)),this.state.collapseOverrides!==i&&(this.state=Object.assign({},this.state,{collapseOverrides:i}),this.addChanges(d.EngineChangeFlags.TreeStore))}setShowAllArrows(e){this.showAllArrows!==e&&(this.showAllArrows=e,this.calculateConnectedScreens(),this.addChanges(d.EngineChangeFlags.TreeStore))}setFileInEditor(e){this.fileInEditor=e,this.addChanges(d.EngineChangeFlags.TreeStore)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(1),o=n(6),r=n(157),s=n(13),a=[.125,.25,.5,1,2,4,8,16,32],l=a[0],c=a[a.length-1];var d;!function(e){e[e.Immediate=0]="Immediate",e[e.Animated=1]="Animated",e[e.Live=2]="Live"}(d||(d={}));t.CanvasStore=class CanvasStore{constructor(e,t){this.addChanges=e,this.engine=t,this.isConfiguredForTest=!1,this.containerSize=i.Size(800,800),this.didSetContainerSizeOnce=!1,this.interactiveOffset=i.Point(0,0),this.interactiveZoom=1,this.isInteractive=!0,this.assertInteractive=r.isDebugBuild?()=>{this.isInteractive||console.warn("Canvas is live (non-interactive) and should not cause re-renders",new Error)}:()=>{},this.colorSamplerActive=!1,this.componentHash=null,this.userScriptBundle=null,this.convertContainerPointToCanvas=e=>{const{zoom:t,offset:n}=this;return{x:e.x/t+n.x,y:e.y/t+n.y}},this.convertContainerRectToCanvas=e=>{const{zoom:t,offset:n}=this;return{x:e.x/t+n.x,y:e.y/t+n.y,width:e.width/t,height:e.height/t}},this.resetCanvasToInteractive=(e=o.EngineChangeFlags.CanvasZoom|o.EngineChangeFlags.CanvasStore)=>{this.isInteractive=!0,this.liveZoom=void 0,this.liveOffset=void 0,this.liveAnimation=void 0,this.addChanges(e)},this.animateCanvas=()=>{const{engine:e,liveAnimation:t,containerSize:n}=this;if(!t){const{isInteractive:t,autoscrolling:n}=this;if(!t||!n)return;const o=Date.now();if(n.lastAnimationTick){const t=(o-n.lastAnimationTick)/1e3;if(t>0){const r=i.Point.multiply(n.velocity,t/this.zoom);if(0!==r.x||0!==r.y){const t=e.mouseStore,s=this.convertCanvasPointToContainer(t.mouse);this.updateCanvas(i.Point.add(this.offset,r),this.zoom),t.setMousePosition(this.convertContainerPointToCanvas(s),t.mouseRaw,t.altKey,t.cmdKey,t.shiftKey,t.ctrlKey),n.lastAnimationTick=o}}}else n.lastAnimationTick=o;return void e.runAtNextFrame(this.animateCanvasWrapped)}const{startTime:r,duration:s,startRect:a,endRect:l}=t,c=Math.min(1,(Date.now()-r)/s),d={x:a.x+c*(l.x-a.x),y:a.y+c*(l.y-a.y),width:a.width+c*(l.width-a.width),height:a.height+c*(l.height-a.height)};t.currentRect=d,this.liveZoom=n.width/d.width,this.liveOffset=i.Point(d.x,d.y),this.addChanges(o.EngineChangeFlags.CanvasLiveTransform),c>=1?e.runAtNextFrame(this.resetCanvasToInteractiveWrapped):e.runAtNextFrame(this.animateCanvasWrapped)},this.resetCanvasToInteractiveWrapped=this.engine.wrapHandler(this.resetCanvasToInteractive),this.animateCanvasWrapped=this.engine.wrapHandler(this.animateCanvas),this.autoscrollLevel=0,this.canDetectMagnificationPhase=!1,this.endMagnification=this.engine.wrapHandler(()=>{this.canDetectMagnificationPhase=!1,this.updateCanvas(this.offset,this.zoom)}),this.endMagnificationAfterInactiveDelay=this.engine.debounce(this.endMagnification,150)}get liveAnimationTargetZoom(){return this.liveAnimation?this.interactiveZoom:void 0}setComponentHash(e){this.componentHash=e,this.addChanges(o.EngineChangeFlags.CanvasStore|o.EngineChangeFlags.ComponentHash)}setColorSamplerActive(e){this.colorSamplerActive=e,this.addChanges(o.EngineChangeFlags.CanvasStore)}setContainerSize(e,t){const{width:n,height:r}=this.containerSize;if(this.containerSize={width:e||800,height:t||800},this.didSetContainerSizeOnce){const o=i.Point.divide(i.Point((n-e)/2,(r-t)/2),this.zoom);this.updateCanvas(i.Point.add(this.offset,o),this.zoom)}this.didSetContainerSizeOnce=!0,this.addChanges(o.EngineChangeFlags.CanvasStore)}getContainerCenter(){return i.Rect.center(this.getContainerInteractiveRect())}getContainerInteractiveRect(){const{containerSize:e}=this;if(!this.engine.chromeStore.state.chromeIsVisible||this.isConfiguredForTest)return Object.assign({x:0,y:0},e);const t={top:this.engine.toolStore.state.shapeModeActive?s.layout.shapeBarHeight:0,bottom:s.layout.statusBarHeight,left:s.layout.toolbarWidth+s.layout.currentTabContentWidth,right:s.layout.propertyPanelWidth};return{x:t.left,y:t.top,width:e.width-t.left-t.right,height:e.height-t.top-t.bottom}}getCanvasCenter(){return this.convertContainerPointToCanvas(this.getContainerCenter())}getCanvasVisibleRect(){const{containerSize:e,offset:t,zoom:n}=this,i=s.layout.currentChromeMarginLeft,o=s.layout.currentChromeMarginRight,r=s.layout.currentCanvasMarginTop,a=s.layout.currentChromeMarginBottom;return{x:t.x+i/n,y:t.y+r/n,width:(e.width-i-o)/n,height:(e.height-r-a)/n}}convertCanvasPointToContainer(e){const{offset:t,zoom:n}=this;return{x:(e.x-t.x)*n,y:(e.y-t.y)*n}}get offset(){return this.liveOffset||this.interactiveOffset}get zoom(){return this.liveZoom||this.interactiveZoom}updateCanvas(e,t,n=d.Immediate){const{interactiveOffset:r,interactiveZoom:s,containerSize:a,isConfiguredForTest:l}=this,c=n===d.Animated,u=n===d.Live,h=Math.max(t,1);if(e=i.Point(Math.round(e.x*h)/h,Math.round(e.y*h)/h),u){const n=this.isInteractive;return this.isInteractive=!1,this.liveOffset=e,this.liveZoom=t,this.liveAnimation=void 0,n||this.addChanges(o.EngineChangeFlags.CanvasZoom|o.EngineChangeFlags.CanvasStore),void this.addChanges(o.EngineChangeFlags.CanvasLiveTransform)}if(this.interactiveOffset!==e||this.interactiveZoom!==t)if(this.interactiveOffset=e,this.interactiveZoom=t,c&&!l){const n=this.liveAnimation?this.liveAnimation.currentRect:{x:r.x,y:r.y,width:a.width/s,height:a.height/s},i={x:e.x,y:e.y,width:a.width/t,height:a.height/t};let o=100;{let e=i.width/n.width;e<1&&(e=1/e),o*=e=Math.pow(.5*e,.1)}this.liveAnimation={duration:o,startTime:Date.now(),startRect:n,endRect:i,currentRect:n},this.isInteractive=!1,this.animateCanvas()}else{const e=s===t&&void 0===this.liveZoom;this.resetCanvasToInteractive(e?o.EngineChangeFlags.CanvasLiveTransform:void 0)}}testing_assign(e){Object.assign(this,e)}testing_configureForTest(e){this.isConfiguredForTest=e}scroll(e,t){const{offset:n,zoom:o}=this;this.updateCanvas(i.Point(n.x+e/o,n.y+t/o),o)}scrollToTopLeft(e,{animate:t=!1}={}){this.updateCanvas(e,this.zoom,t?d.Animated:d.Immediate)}scrollToCenter(e,{animate:t=!1}={}){const n=this.getCanvasCenter(),o=i.Point.subtract(e,n);this.scrollToTopLeft(i.Point.add(this.offset,o),{animate:t})}scrollToVisible(e,t){function deltaOnAxis(e,t,n){return e>0&&t>n?Math.min(e,t-n):e<0&&t<n?-Math.min(n-t,-e):0}t&&(t=i.Rect.intersects(e,t)?i.Rect.intersection(e,t):void 0);const n=this.convertContainerRectToCanvas(this.getContainerInteractiveRect());function deltaForRect(e){return{x:deltaOnAxis(i.Rect.minX(e)-i.Rect.minX(n),i.Rect.maxX(e)-i.Rect.minX(n),n.width),y:deltaOnAxis(i.Rect.minY(e)-i.Rect.minY(n),i.Rect.maxY(e)-i.Rect.minY(n),n.height)}}const o=deltaForRect(e);n.x+=o.x,n.y+=o.y;const r=t?deltaForRect(t):i.Point(0,0),s=i.Point.add(o,r);(Math.abs(s.x)>1||Math.abs(s.y)>1)&&this.updateCanvas(i.Point.add(this.offset,s),this.zoom)}beginAutoscrolling(){this.autoscrollLevel++}endAutoscrolling(){this.autoscrollLevel--}autoscrollIfNeeded(){if(this.autoscrollLevel<=0)return void(this.autoscrolling=void 0);const e=this.engine.mouseRaw,t=i.Rect.inset(this.getContainerInteractiveRect(),20);function overdragOnAxis(e,t,n){return e<t?e-t:e>n?e-n:0}const n={x:3*overdragOnAxis(e.x,i.Rect.minX(t),i.Rect.maxX(t)),y:3*overdragOnAxis(e.y,i.Rect.minY(t),i.Rect.maxY(t))};n.x||n.y?this.autoscrolling?this.autoscrolling.velocity=n:(this.autoscrolling={velocity:n},this.animateCanvas()):this.autoscrolling=void 0}constrainOffset(){}updateZoom(e){const t=Math.max(l,Math.min(c,e.zoom)),n=e.center||this.getCanvasCenter(),i=e.scrollToCenter?this.getContainerCenter():this.convertCanvasPointToContainer(n);this.updateCanvas({x:n.x-i.x/t,y:n.y-i.y/t},t,e.type)}setZoom(e,t={}){this.updateZoom({zoom:this.floorZoom(e),type:t.animated?d.Animated:d.Immediate})}zoomIn(e){this.updateZoom({zoom:this.zoomStep(!0),center:e,type:d.Animated})}zoomOut(e){this.updateZoom({zoom:this.zoomStep(!1),center:e,type:d.Animated})}zoomToCenter(e,t={}){let{zoom:n}=t;if(!n){const t=this.getContainerInteractiveRect(),i=t.height/e.height,o=t.width/e.width;n=Math.min(i,o),n=this.zoomStep(!1,n)}const{maxZoom:o}=t;o&&n>o&&(n=o),this.updateZoom({zoom:n,center:i.Rect.center(e),scrollToCenter:!0,type:!1===t.animated?d.Immediate:d.Animated})}zoomStep(e,t){let n=void 0!==t?t:this.zoom;return n=e?a.find(e=>e>n)||c:a.slice(0).reverse().find(e=>e<n)||l}floorZoom(e){return-1!==a.indexOf(e)?e:this.zoomStep(!1,e)}beginMagnification(){this.canDetectMagnificationPhase=!0}changeMagnification(e,t){let n=this.zoom*(1+e);n<l&&(n=l),n>c&&(n=c),n!==this.zoom&&(this.updateZoom({zoom:n,center:this.convertContainerPointToCanvas(t),type:d.Live}),this.canDetectMagnificationPhase||this.endMagnificationAfterInactiveDelay())}}},function(e,t,n){"use strict";var i=this&&this.__rest||function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(i=Object.getOwnPropertySymbols(e);o<i.length;o++)t.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(e,i[o])&&(n[i[o]]=e[i[o]])}return n};Object.defineProperty(t,"__esModule",{value:!0});const o=n(9),r=n(6);t.DebugStore=class DebugStore{constructor(e,t){this.addChanges=e,this.triggerUpdate=t,this.frames=[],this.lastUpdate=-1,this.longFrameCount=0,this._showPropertiesPanel=!0,this._showLeftPanel=!0,this._showArrows=!0,this._showTitles=!0,this.reportToConsole=()=>{const e=this.frames.slice(-60);console.table(e.map(e=>(delete(e=Object.assign({},e,{perf:0})).perf,e))),e.forEach(e=>{e.perf&&console.log("frame: "+e.update+" - "+e.totalTime+"ms",e.perf)})}}changed(){this.addChanges(r.EngineChangeFlags.DebugStore),this.triggerUpdate()}reset(){this._showPropertiesPanel=!0,this._showLeftPanel=!0,this._showArrows=!0,this._showTitles=!0,this.changed()}getLastReport(){return 0===this.frames.length?{}:this.frames[this.frames.length-1]}addFrameReport(e){if(e.update===this.lastUpdate)return this.frames[this.frames.length-1]=e,void console.warn("double frame: "+e.update+" - "+e.totalTime+"ms",e);if(this.lastUpdate=e.update,this.frames.length>100&&this.frames.shift(),this.frames.push(e),!e.documentWasHidden&&e.totalTime>350&&(console.log("long frame: "+e.update+" - "+e.totalTime+"ms",e),this.longFrameCount++,this.longFrameCount<=100)){const{documentWasHidden:t,perf:n}=e,r=i(e,["documentWasHidden","perf"]);o.triggerUiLongFrameEvent(Object.assign({},r))}}get showPropertiesPanel(){return this._showPropertiesPanel}set showPropertiesPanel(e){this._showPropertiesPanel=e,this.changed()}get showLeftPanel(){return this._showLeftPanel}set showLeftPanel(e){this._showLeftPanel=e,this.changed()}get showArrows(){return this._showArrows}set showArrows(e){this._showArrows=e,this.changed()}get showTitles(){return this._showTitles}set showTitles(e){this._showTitles=e,this.changed()}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(23),o=n(1),r=n(94),s=n(6),a=n(1),l=n(641),c=n(58),d=n(170);t.MouseStore=class MouseStore{constructor(e,t){this.addChanges=e,this.engine=t,this.mouse=o.Point(0,0),this.mouseRaw=o.Point(0,0),this.mouseDown=null,this.mouseDownRaw=null,this.mouseOnCanvas=!1,this.middleMouseButtonDown=null,this.middleMouseButtonDownRaw=null,this.cmdKey=!1,this.ctrlKey=!1,this.altKey=!1,this.shiftKey=!1,this.spacebar=!1,this.chromePointerEvents=!0,this.isDown=!1}setMouseDown(e){this.isDown=e,this.mouseDown=this.isDown?this.mouse:null,this.mouseDownRaw=this.isDown?this.mouseRaw:null,this.addChanges(s.EngineChangeFlags.MouseStore)}setMiddleButtonDown(e){this.isDown=e,this.middleMouseButtonDown=this.isDown?this.mouse:null,this.middleMouseButtonDownRaw=this.isDown?this.mouseRaw:null,this.addChanges(s.EngineChangeFlags.MouseStore)}setMousePosition(e,t,n,o,r,l){i(a.isFiniteNumber(e.x)),i(a.isFiniteNumber(e.y)),i(a.isFiniteNumber(t.x)),i(a.isFiniteNumber(t.y)),this.mouse=e,this.mouseRaw=t,this.altKey=n,this.cmdKey=o,this.shiftKey=r,this.ctrlKey=l,this.addChanges(s.EngineChangeFlags.MouseStore)}setRawMousePosition(e){this.mouseRaw=e,this.mouseDownRaw=this.isDown?e:null,this.addChanges(s.EngineChangeFlags.MouseStore)}setModifierByName(e,t){if("alt"===e||"altKey"===e){if(this.altKey===t)return;this.altKey=t}else if("cmd"===e||"cmdKey"===e){if(this.cmdKey===t)return;this.cmdKey=t}else{if("shift"!==e&&"shiftKey"!==e)return;if(this.shiftKey===t)return;this.shiftKey=t}this.addChanges(s.EngineChangeFlags.MouseStore)}setMouseOnCanvas(e){this.mouseOnCanvas=e,this.addChanges(s.EngineChangeFlags.MouseStore)}setChromePointerEvents(e){this.chromePointerEvents!==e&&(this.chromePointerEvents=e,this.addChanges(s.EngineChangeFlags.ChromePointerEvents))}setSpacebarDown(e){this.spacebar!==e&&(this.spacebar=e,this.addChanges(s.EngineChangeFlags.MouseStore))}setModifiers(e,t){32===e.keyCode&&this.setSpacebarDown(t);const n=d.isWindows()?!!e.ctrlKey:!!e.metaKey,i=d.isWindows()?!!e.metaKey:!!e.ctrlKey,o=!!e.altKey,r=!!e.shiftKey;let a=!1;this.cmdKey!==n&&(this.cmdKey=n,a=!0),this.ctrlKey!==i&&(this.ctrlKey=i,a=!0),this.altKey!==o&&(this.altKey=o,a=!0),this.shiftKey!==r&&(this.shiftKey=r,a=!0),a&&this.addChanges(s.EngineChangeFlags.MouseStore)}onKeyDown(e){if(r.dragSessionActive())return;this.setModifiers(e,!0);const t=this.engine,n=t.tool;(function isArrowKey(e){return e.keyCode>=37&&e.keyCode<=40})(e)||t.selectionOutlineTracker.forceEnableSelectionOutline();const i=String.fromCharCode(e.which),o=e.shiftKey||e.metaKey||e.ctrlKey;if("z"!==i&&""!==i&&"Z"!==i||o)n.onKeyDown&&(n.onKeyDown(e),e.defaultPrevented)||e.repeat||new l.ToolManagerMenu(t).onKeyDown(e);else{if(e.preventDefault(),e.stopPropagation(),e.repeat||(t.startZoom=t.zoom),n.enum===c.Tools.ZoomSelect)return;if(n.enum===c.Tools.Zoom)return;t.setToolEnum(c.Tools.Zoom)}}onKeyUp(e){this.setModifiers(e,!1);const t=this.engine.tool;!t.onKeyUp||(t.onKeyUp(e),e.defaultPrevented)}onKeyPress(e){const t=this.engine.tool;!t.onKeyPress||(t.onKeyPress(e),e.defaultPrevented)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.needsBoxSizingWarning=function needsBoxSizingWarning(e){"border-box"!==getComputedStyle(e).getPropertyValue("box-sizing")&&console.warn("useAutoSizeTransition requires box sizing to be border box")}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(393),r=10,s=50;function scrollDistance(e,t){if(e>s)return 0;return r*(t<.5?-1:1)*((s-e)/s)}function distanceToEdge(e,t){const n=Math.min(e,t-e);return Math.max(0,n)}t.useAutoScroll=function useAutoScroll(){const[e,t]=i.useState(null),n=i.useRef(null),r=i.useCallback(()=>{const t=n.current;if(!t||!e||t.cancelled)return;const{scrollX:i,scrollY:o}=t;(i||o)&&e.scrollBy(i,o),t.rafRef=requestAnimationFrame(r)},[e]),s=i.useCallback(e=>{t(function findScrollableAncestor(e){const{parentElement:t}=e;return t?function canScroll(e){const{overflow:t}=e.style;if("visible"===t||"hidden"===t)return!1;const n=e.scrollWidth>e.clientWidth,i=e.scrollHeight>e.clientHeight;return n||i}(t)?t:findScrollableAncestor(t):null}(e))},[]),a=i.useCallback(()=>{n.current&&(n.current.cancelled=!0)},[]);return{beginAutoScroll:s,endAutoScroll:i.useCallback(()=>{e&&e.removeEventListener("wheel",a),t(null);const i=n.current;i&&(window.cancelAnimationFrame(i.rafRef),n.current=null)},[e,a]),updateAutoScroll:i.useCallback(t=>{if(!e)return;const i=e.getBoundingClientRect();let s=0,l=0;if(o.pointInClientRect(t.client,i)){const e=t.client.x-i.left,n=t.client.y-i.top,o=e/i.width,r=n/i.height,a=distanceToEdge(e,i.width),c=distanceToEdge(n,i.height);s=scrollDistance(a,o),l=scrollDistance(c,r)}n.current?(n.current.scrollX=s,n.current.scrollY=l):(n.current={rafRef:requestAnimationFrame(r),scrollX:s,scrollY:l,cancelled:!1},e.addEventListener("wheel",a))},[e,r,a])}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i={input:!0,button:!0,textarea:!0,select:!0,option:!0,optgroup:!0,video:!0,audio:!0};function isInteractiveElement(e,t){return!!(t&&t instanceof HTMLElement)&&(!!function hasInteractiveTag(e){return Boolean(i[e.tagName.toLowerCase()])}(t)||(!!function hasDraggableAttribute(e){switch(e.getAttribute("draggable")){case"true":case"false":return!0;default:return!1}}(t)||t!==e&&isInteractiveElement(e,t.parentElement)))}t.allowDragging=function allowDragging(e){const{target:t,currentTarget:n}=e;return!(n instanceof HTMLElement&&isInteractiveElement(n,t))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0);t.useForceUpdate=function useForceUpdate(){const[e,t]=i.useState(0);return()=>t(e=>e+1)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(389),r=n(201);n(3).theme.addGlobalStyle(".hide-sortable-item > *",{display:"none !important"}),t.SortableItem=function SortableItem({index:e,sortIndex:t,visible:n,isRemovingItem:l,children:c,enabled:d,onDrag:u,onDragEnd:h,onDragStart:p,onDropAnimationEnd:g,dragProperties:m,dropAnimationProperties:f,customDragPreview:y}){const v=i.useRef(null),b=i.useRef(null),k=i.useRef(g);k.current=g;const S=i.useRef(!1);i.useLayoutEffect(()=>{const e=function getChildNode(e){return e.current instanceof HTMLDivElement&&e.current.firstChild instanceof HTMLDivElement?e.current.firstChild:null}(v);e&&(b.current=e)},[]);const C=i.useCallback(t=>{const n=document.activeElement;S.current=!!n&&n===b.current,p(t,e)},[e,p]),x=i.useCallback(()=>{const e=k.current;if(e&&e(),S.current){const e=b.current;e&&e.focus()}},[]),w=i.useCallback(()=>y(e),[y,e]);return r.useDraggable({ref:b,enabled:d,onDragStart:C,onDrag:u,onDragEnd:h,onDropAnimationEnd:x,dragProperties:m,dropAnimationProperties:f,customDragPreview:w}),o.usePositionTransition({dependencies:[e,t,l],ref:b}),i.createElement("div",Object.assign({},{[s]:"true"},{className:n?"":"hide-sortable-item",style:a,ref:v}),c)};const s="data-is-sortable-item";t.isSortableItemElement=function isSortableItemElement(e){return e instanceof HTMLDivElement&&e.hasAttribute(s)};const a={display:"contents"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.center=function center({x:e,y:t,width:n,height:i}){return{x:e+n/2,y:t+i/2}}}(t.Rect||(t.Rect={}))},function(e,t,n){"use strict";var i=this&&this.__rest||function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(i=Object.getOwnPropertySymbols(e);o<i.length;o++)t.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(e,i[o])&&(n[i[o]]=e[i[o]])}return n};Object.defineProperty(t,"__esModule",{value:!0});const o=n(0),r=n(201);t.Draggable=function Draggable(e){var{children:t,onDrag:n,onDragStart:s,onDragEnd:a,onDropAnimationStart:l,onDropAnimationEnd:c,dropAnimationProperties:d,dragProperties:u,movementThreshold:h,enabled:p,hideDragSource:g}=e,m=i(e,["children","onDrag","onDragStart","onDragEnd","onDropAnimationStart","onDropAnimationEnd","dropAnimationProperties","dragProperties","movementThreshold","enabled","hideDragSource"]);const f=o.useCallback(()=>o.createElement("div",Object.assign({},m),"function"==typeof t?t({isDragPreview:!0}):t),[t,m]),y=r.useDraggable({onDrag:n,onDragStart:s,onDragEnd:a,onDropAnimationStart:l,onDropAnimationEnd:c,dropAnimationProperties:d,dragProperties:u,movementThreshold:h,enabled:p,customDragPreview:f,hideDragSource:g});return o.createElement("div",Object.assign({},m,{ref:y}),"function"==typeof t?t({isDragPreview:!1}):t)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(23),o=n(9),r=n(5),s=n(43),a=n(170),l=n(398);class ToolManagerMenu{constructor(e){this.engine=e}static getKeyMap(){if(!this._keyMap){const e=ToolManagerMenu.prototype;this._keyMap={Escape:e.cancelTool,"Meta+Enter":e.createFrame,"Meta+Alt+Enter":e.createStack,Enter:e.editAction,F:e.frame,U:e.roundedFrame,L:e.link,S:e.stack,G:e.shapeContainerTool,T:e.text,P:[e.path,e.hintAddGraphicToDrawShape],V:[e.path,e.hintAddGraphicToDrawShape],O:[e.ovalShape,e.hintAddGraphicToDrawShape],R:[e.rectangle,e.hintAddGraphicToDrawShape]}}return this._keyMap}getKeyMap(){return ToolManagerMenu.getKeyMap()}onKeyDown(e){i(!this.event,"this instance can only be used once, for a single operation"),this.event=e,a.handleKeyDown(e,this)}text(){this.engine.setToolEnum(r.Tools.CreateText)}shapeContainerTool(){this.engine.setToolEnum(r.Tools.CreateShapeContainer)}hintAddGraphicToDrawShape(){this.engine.shapeModeActive}rectangle(){this.engine.shapeModeActive&&this.engine.setToolEnum(r.Tools.CreateRectangleShape)}ovalShape(){this.engine.shapeModeActive&&this.engine.setToolEnum(r.Tools.CreateOvalShape)}path(){this.engine.shapeModeActive&&(this.engine.setSelection([]),this.engine.setToolEnum(r.Tools.Path))}stack(){this.engine.setToolEnum(r.Tools.CreateStackComponent)}link(){this.engine.setToolEnum(r.Tools.NavigationLink)}roundedFrame(){this.engine.setToolEnum(r.Tools.CreateRoundedFrame)}frame(){this.engine.setToolEnum(r.Tools.CreateFrame)}editAction(){if(0===this.engine.selection.length)return;const e=l.editActionForSelection(this.engine,"keyboard");e&&(e(),this.event.preventDefault())}createFrame(){s.ContextAction.addFrame(this.engine,this.engine.treeStore.selectionAsNodes),o.triggerLayoutFrameEvent({source:"keyboard"}),this.event.preventDefault()}createStack(){s.ContextAction.addStack(this.engine,this.engine.treeStore.selectionAsNodes),this.event.preventDefault()}cancelTool(){this.engine.tool.enum!==r.Tools.Path&&(this.engine.cancelTool(),this.event.preventDefault(),this.event.stopPropagation())}}t.ToolManagerMenu=ToolManagerMenu},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(6),o=n(13),r={documentIsLoaded:!1,chromeIsVisible:!0};t.ChromeStore=class ChromeStore{constructor(e){this.addChanges=e,this.state=Object.assign({},r)}setChromeVisible(e){this.state=Object.assign({},this.state,{chromeIsVisible:e}),o.layout.chromeIsVisible=e,this.addChanges(i.EngineChangeFlags.ChromeStore)}setDocumentIsLoaded(e){this.state=Object.assign({},this.state,{documentIsLoaded:e}),this.addChanges(i.EngineChangeFlags.ChromeStore)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(14),o=n(7),r=n(1),s=n(15),a=n(6),l=n(644),c=n(57),d=n(28);function isValidKey(e){switch(e){case"showPixelGrid":case"displayAllLinks":case"displayRulers":case"useInternalEditor":case"editorFontSize":case"colorModel":case"colorPresets":case"gradientColorStopPresets":return!0;default:return handleUnknownUserDefaultKey(e)}}function handleUnknownUserDefaultKey(e){return console.log(`Unknown user default key: ${e}`),!1}t.PersistedUserDefaults=class PersistedUserDefaults{constructor(e){this.addChanges=e,this._showPixelGrid=!1,this._displayAllLinks=!1,this._displayRulers=!1,this._useInternalEditor=!0,this.editorDefaultFontSize=12,this._editorFontSize=this.editorDefaultFontSize,this._colorPresets=u,this._gradientColorStopPresets=h,this._colorModel="HEX",this.silentUpdate=!1;const t=window.VekterUserDefaults;t&&this.silentStateUpdate(t)}get showPixelGrid(){return this._showPixelGrid}set showPixelGrid(e){this._showPixelGrid=e,this.broadcastChanges()}get displayAllLinks(){return this._displayAllLinks}set displayAllLinks(e){this._displayAllLinks=e,this.broadcastChanges()}get displayRulers(){return d.experiments.isOn("rulers")&&this._displayRulers}set displayRulers(e){this._displayRulers=e,this.broadcastChanges()}get useInternalEditor(){return this._useInternalEditor}set useInternalEditor(e){this._useInternalEditor=e,this.broadcastChanges()}get editorFontSize(){return this._editorFontSize}set editorFontSize(e){e<9?e=9:e>40&&(e=40),this._editorFontSize!==e&&(this._editorFontSize=e,this.broadcastChanges())}editorFontSizeIncrease(){this.editorFontSize+=1}editorFontSizeDecrease(){this.editorFontSize-=1}editorFontSizeReset(){this.editorFontSize=this.editorDefaultFontSize}get colorPresets(){return this._colorPresets}set colorPresets(e){Array.isArray(e)&&(e=o.List(e)),this._colorPresets=e,this.broadcastChanges()}get gradientColorStopPresets(){return this._gradientColorStopPresets}set gradientColorStopPresets(e){Array.isArray(e)?this._gradientColorStopPresets=o.List(e.map(e=>o.List(e.map(e=>new c.GradientColorStop(e))))):this._gradientColorStopPresets=e,this.broadcastChanges()}get colorModel(){return this._colorModel}set colorModel(e){this._colorModel=e,this.broadcastChanges()}externalStateUpdate(e){this.silentStateUpdate(e),this.addChanges(a.EngineChangeFlags.UserDefaultsStore)}broadcastChanges(){if(this.silentUpdate)return;this.addChanges(a.EngineChangeFlags.UserDefaultsStore);const e=this.userDefaultState();window.VekterUserDefaults=e,s.getIpcRenderer().send(i.VekterUserDefaultsChange,e)}userDefaultState(){return{showPixelGrid:this.showPixelGrid,displayAllLinks:this.displayAllLinks,colorPresets:this.colorPresets.toJS(),gradientColorStopPresets:this.gradientColorStopPresets.toJS(),colorModel:this.colorModel,useInternalEditor:this.useInternalEditor,editorFontSize:this.editorFontSize,displayRulers:this.displayRulers}}silentStateUpdate(e){this.silentUpdate=!0,function containsDeprecatedGradientPresets(e){return p in e}(e)&&(e.gradientColorStopPresets=function convertDeprecatedGradientsToColorStops(e){return o.List(e.gradientPresets.map(({start:e,end:t})=>o.List([new c.GradientColorStop({value:t,position:0}),new c.GradientColorStop({value:e,position:1})])))}(e));const t=Object.keys(e);for(const n of t)isValidKey(n)&&this.setValue(n,e[n]);this.silentUpdate=!1}setValue(e,t){switch(e){case"showPixelGrid":case"displayAllLinks":case"displayRulers":case"useInternalEditor":(function isBoolean(e){return!0===e||!1===e})(t)&&(this[e]=t);break;case"editorFontSize":r.isFiniteNumber(t)&&(this[e]=t);break;case"colorModel":l.isColorModel(t)&&(this[e]=t);break;case"colorPresets":case"gradientColorStopPresets":(o.List.isList(t)||Array.isArray(t))&&(this[e]=t);break;default:handleUnknownUserDefaultKey(e)}}};const u=o.List(["#000000","#333333","#555555","#777777","#999999","#BBBBBB","#DDDDDD","#FFFFFF","#4455BB","#1199EE","#55CCFF","#22CCDD","#22AA99","#66BB66","#99CC66","#CCDD33","#7755CC","#BB66CC","#FF88AA","#EE4444","#FF7744","#FFAA22","#FFCC66","#FFEE66"]),h=o.List([["rgba(0,0,0,0)","#000000"],["rgba(0,0,0,0)","rgba(0,0,0,.75)"],["rgba(0,0,0,0)","rgba(0,0,0,.5)"],["rgba(0,0,0,0)","rgba(0,0,0,.25)"],["rgba(255,255,255,0)","rgba(255,255,255,.25)"],["rgba(255,255,255,0)","rgba(255,255,255,.5)"],["rgba(255,255,255,0)","rgba(255,255,255,.75)"],["rgba(255,255,255,0)","#FFFFFF"],["#728AE9","#151F8C"],["#1ED2FC","#015FDF"],["#8AF2FF","#1FA5FF"],["#3DF2F8","#06A5C2"],["#3BDFD2","#05745F"],["#9FE99F","#2C8B2C"],["#D2F29F","#5FA52C"],["#F2F85A","#A5C10D"],["#B28AF2","#3B1FA5"],["#E99FF2","#8C2CA5"],["#FFC3DF","#FF4C74"],["#FC7272","#DF1515"],["#FFB272","#FF3B15"],["#FFDF3D","#FF7406"],["#FFF29F","#FFA52C"],["#FFF29F","#FFE02C"]].map(([e,t])=>o.List([new c.GradientColorStop({value:e,position:0}),new c.GradientColorStop({value:t,position:1})]))),p="gradientPresets"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=["RGB","HSL","HEX"];t.isColorModel=function isColorModel(e){return i.some(t=>t===e)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(1),o=n(241);t.darkTheme=new class DarkTheme{constructor(){this.name="dark",this.tint="#09f",this.tintDark="#09f",this.componentTint="#85F",this.tabContentDivider="#000",this.statusBarBorder=this.tabContentDivider,this.propertyPanelBackgroundDivider=this.tabContentDivider,this.propertyPanelDivider=this.tabContentDivider,this.propertyPanelButtonBorderPrimary="#000",this.pinsFrameBorder="#444",this.colorSwatchBorder="#111",this.colorTokenSwatchBorder="rgba(255,255,255,0.15)",this.toolbarBackground="#111",this.toolbarIconIndicator="#09F",this.tabContentBackground="#181818",this.tabContentBackgroundHover="#111",this.tabContentAccessoryBackground="#222",this.toolSectionHeaderText="#fff",this.toolText="#999",this.toolTextActive="#09F",this.toolAccelerator="#444",this.scrollerThumbBackground="yellow",this.canvasBackground="#252525",this.rulerBackground="#181818",this.rulerBorderColor="#333",this.rulerTextColor="#555",this.guideColor="#00ADAD",this.guideHighlightColor="#09F",this.panelEmptyHeader="#FFF",this.panelEmptyText="#777",this.layerPanelRowOdd="#181818",this.layerPanelRowEven="#151515",this.layerPanelAccent="#09F",this.layerPanelText="#777777",this.layerPanelDimmedText=i.ConvertColor.multiplyAlpha(i.Color.toRgbString(i.Color(this.layerPanelText)),.5),this.layerPanelSelection="#09F",this.layerPanelSelectionText="#FFF",this.layerPanelSelectionDimmedText=i.ConvertColor.multiplyAlpha(i.Color.toRgbString(i.Color(this.layerPanelSelectionText)),.5),this.layerPanelFieldPlaceholderText="#999",this.layerPanelMasterOrReplica=this.componentTint,this.layerPanelComponentLabel="#555",this.layerPanelComponentLabelSelected="rgba(255,255,255,.5)",this.propertyPanelHeaderBackground="#222",this.propertyPanelBackground=this.tabContentBackground,this.propertyPanelTitle="#FFF",this.propertyPanelLabel="#777",this.propertyPanelLabelInactive="#CCC",this.propertyPanelInputBackground="#333",this.propertyPanelInputBorder="#000",this.propertyPanelInputBorderOverlay="#000",this.propertyPanelInputBorderInactive="#000",this.propertyPanelInputText="#FFF",this.propertyPanelInputTextInactive="#CCC",this.propertyPanelInputLabel="#777",this.propertyPanelInputLabelInactive="#555",this.propertyPanelButtonBackground=this.propertyPanelInputBackground,this.propertyPanelButtonBackgroundInactive="#222",this.propertyPanelButtonBackgroundPrimary=this.tint,this.propertyPanelButtonBackgroundPressed="#282828",this.propertyPanelButtonText=this.propertyPanelInputText,this.propertyPanelButtonTextInactive="#777",this.propertyPanelButtonTextPrimary="#FFF",this.propertyPanelHeaderBorder=this.propertyPanelInputBorder,this.propertyPanelSegmentDivider="#1F1F1F",this.constraintsReferenceFrame=this.pinsFrameBorder,this.colorTokenRowBackgroundActive="#222",this.colorTokenLabel="#555",this.colorTokenPlaceholderPreviewBackground="#222",this.colorTokenPlaceholderPreviewBorder="#444",this.codeExportPanelCSSText=o.darkSyntaxColors.gray,this.codeExportPanelCSSProp=o.darkSyntaxColors.lightBlue,this.codeExportPanelCSSValueNumber=o.darkSyntaxColors.orange,this.codeExportPanelCSSValueString=o.darkSyntaxColors.purple,this.sectionHeaderText=this.propertyPanelTitle,this.sectionHeaderPopUp="#666",this.searchPlaceholder="#777777",this.searchPlaceholderFocused="#FFF",this.focusRing="#09F",this.sliderKnobFill="#FFF",this.sliderKnobShadow="0 1px 0 1px rgba(0,0,0,0.2), 0 0 0 1px rgba(0,0,0,0.2)",this.sliderTrack="#444",this.sliderTrackHighlight="#09F",this.sliderTrackInactive="#333",this.checkboxBackground="#333",this.checkboxBackgroundPressed="#282828",this.checkboxBackgroundChecked="#09f",this.checkboxBorder="#000",this.checkboxBorderChecked="#000",this.checkboxBorderInnerChecked="#05f",this.checkboxBackgroundCheckedPressed=this.checkboxBorderChecked,this.checkboxIndicator="#FFF",this.popoverBackground="#191919",this.popoverShadow="0 5px 10px rgba(0,0,0,1), 0 0 0 1px rgba(0,0,0,0.5)",this.popoverArrowBorder="1px solid rgba(0,0,0,1)",this.popoverArrowBorderFlipped="1px solid rgba(0,0,0,1)",this.layerCreatePreview="#555",this.frameTitle="#666",this.frameOutline="rgba(119, 119, 119, 0.3)",this.framePreview="rgba(119, 119, 119, 0.1)",this.framePreviewOutline="rgba(119, 119, 119, 0.3)",this.selectionBox="rgba(119, 119, 119,0.1)",this.selectionBoxOutline="rgba(119, 119, 119, 0.3)",this.selectionBoxBackground="rgba(0, 153, 255, 0.3)",this.selectionBoxComponentBackground="rgba(136, 85, 255,0.2)",this.resizeBox="#09F",this.resizeHandle="#FFF",this.resizeHandleOutline="#09F",this.snapLine="#F5A",this.snapConstraint="#F5A",this.parentHighlight="#F5A",this.shapeContainerOutline="#333",this.segmentAnchor="#FFF",this.segmentAnchorOutline="#09F",this.pathCurvePreview="#FF55AA",this.navigationConnectionLine="rgba(120, 120, 120, 0.5)",this.textEditorOutline="#666",this.packageTitle="#FFF",this.packageTitleBackground="#222",this.packageTitleBorder="#000",this.packageTitleArrow="#666",this.packageIconBorder="transparent",this.packageIconBackground="black",this.packageTitleNewBadgeBackground="transparent",this.packageTitleNewBadgeBorder="hsla(204, 100%, 50%, 0.2)",this.packageTitleNewBadgeLabel="#09F",this.componentItemBackground="#121212",this.componentItemBorder="#000",this.componentItemLabel="#999",this.componentCategoryLabel="#AAA",this.componentsEmptyHeader="#FFF",this.componentsEmptyText="#777",this.componentsEmptyInactive="#777",this.componentsEmptyActive="#09f",this.error="#EE4444",this.errorText="white",this.statusBarBackground="#181818",this.statusBarText="#777",this.statusBarActiveText="#4197F7",this.statusBarUpdateItemActive="#4197F7",this.statusBarErrorItemActive="#F05",this.statusBarItemInactive="#777",this.webFrameBackground=this.tabContentBackground,this.webFrameTitle=this.componentsEmptyText,this.webFrameMessage=this.componentsEmptyText,this.tooltipBackground="rgba(120,120,120,0.7)",this.tooltipCaretBackground="rgba(120,120,120,0.72)",this.tooltipColor="white",this.feedbackSidebarBackground="#111",this.feedbackSidebarDivider="#000",this.feedbackTabBarBackground="#222",this.feedbackTabBarBorderBottom="#000",this.feedbackTabBarMenuSelected="#fff",this.feedbackTabBarMenuDefault="#555",this.feedbackTabBarButtonBackground="#333",this.feedbackTabBarButtonBorder="#000",this.feedbackTabBarButtonText="#FFF",this.feedbackTabBarThreadTitle="#FFF",this.feedbackPrimaryText="#FFF",this.feedbackSecondaryText="#777",this.feedbackItemHover="#000",this.feedbackEllipsisColor="#FFF",this.feedbackFormBackground="#222",this.feedbackFormPlaceholder="#777",this.feedbackFormButton="#777",this.feedbackFormDivider="#000",this.feedbackFormBorder="#000",this.feedbackFormInputBackground="rgba(0, 0, 0, 0.9)"}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0);t.EnginePerformance=class EnginePerformance{constructor(e=null){this._update=-1,this._nodeUpdated=0,this._cacheReset=0,this._cacheUpdated=0,this._canvasSetupElementCache=0,this._nodeGetProps=0,this._nodeCreateElement=0,this._nodeRender=0,this._layerPanelItem=0,this._reactCreateElement=0,this._reactRender=0,this.report=()=>{console.log("update: "+this._update+"\nnodes updated: "+this._nodeUpdated+"\ncaches reset: "+this._cacheReset+"\ncaches updated: "+this._cacheUpdated+"\ncanvas setupElementCache: "+this._canvasSetupElementCache+"\nnode getProps: "+this._nodeGetProps+"\nnode createElement: "+this._nodeCreateElement+"\nnode render: "+this._nodeRender+"\nreact createElement: "+this._reactCreateElement+"\nreact render: "+this._reactRender)},this.reporter=e}reportAndReset(e,t){this.reporter&&this.reporter(),this.reset(e)}reset(e=-1){this._update=e,this._nodeUpdated=0,this._cacheReset=0,this._cacheUpdated=0,this._canvasSetupElementCache=0,this._nodeGetProps=0,this._nodeCreateElement=0,this._nodeRender=0,this._layerPanelItem=0,this._reactCreateElement=0,this._reactRender=0}nodeUpdated(e=1){this._nodeUpdated+=e}cacheReset(){this._cacheReset+=1}cacheUpdated(){this._cacheUpdated+=1}canvasSetupElementCache(){this._canvasSetupElementCache+=1}nodeGetProps(){this._nodeGetProps+=1}nodeCreateElement(){this._nodeCreateElement+=1}nodeRender(){this._nodeRender+=1}layerPanelItem(){this._layerPanelItem+=1}install(e){window.perf=this,this.debugStore=e;const t=this,n=i.createElement;this.originalReactCreateElement=n,i.createElement=function(...e){return t._reactCreateElement+=1,n.apply(this,e)};const o=window.ReactDebugCurrentFiber;if(o){const e=o.setCurrentPhase;this.originalReactSetCurrentPhase=e,o.setCurrentPhase=function(n){return"render"===n&&(t._reactRender+=1),e(n)}}const r=window.dat;return r&&(this.gui=new r.GUI,this.gui.add(e,"showPropertiesPanel"),this.gui.add(e,"showLeftPanel"),this.gui.add(e,"showArrows"),this.gui.add(e,"showTitles"),this.gui.add(e,"reportToConsole")),this}uninstall(){window.perf=void 0,this.debugStore.reset(),i.createElement=this.originalReactCreateElement;const e=window.ReactDebugCurrentFiber;e&&(e.setCurrentPhase=this.originalReactSetCurrentPhase),this.gui&&this.gui.destroy()}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(5),o=n(6);t.SelectionOutlineTracker=class SelectionOutlineTracker{constructor(e,t){this.addChanges=e,this.wrapHandler=t,this.shouldDisableSelectionOutlineUntil=null,this.shouldIgnoreAfterCommit=!1,this.disableSelectionOutlineDuration=2e3,this.previouslySelectedNodes=[],this.queueSelectionOutlineTimer=e=>{this.clearSelectionOutlineTimer(),this.shouldDisableSelectionOutlineUntil=e+Date.now(),this.disableSelectionOutlineTimerId=window.setTimeout(this.wrapHandler(()=>{this.clearSelectionOutlineTimer(),this.addChanges(o.EngineChangeFlags.ToolStore)}),e)}}beforeCommit(e){this.previouslySelectedNodes=e}afterCommit(e){if(this.shouldIgnoreAfterCommit)this.shouldIgnoreAfterCommit=!1;else{if(e!==this.previouslySelectedNodes&&function shouldDisableSelectionOutlineAfterChange(e,t){if(e===t)return!1;const n={};e.forEach(e=>n[e.id]=e);for(const i of t){const e=n[i.id];if(i!==e&&i&&e)for(const t of Object.keys(i))if(i[t]!==e[t]&&!s.has(t)&&doesPropDisableSelectionOutline(t))return!0}return!1}(this.previouslySelectedNodes,e)){this.addChanges(o.EngineChangeFlags.SelectionOutline);const e=this.disableSelectionOutlineDuration;this.queueSelectionOutlineTimer(e)}this.shouldDisableSelectionOutlineUntil&&this.shouldDisableSelectionOutlineUntil<=Date.now()&&(this.clearSelectionOutlineTimer(),this.addChanges(o.EngineChangeFlags.SelectionOutline))}}forceEnableSelectionOutline(){this.clearSelectionOutlineTimer(),this.shouldIgnoreAfterCommit=!0}shouldShowSelectionOutlineForTool(e){return null===this.shouldDisableSelectionOutlineUntil&&!r.has(e)}clearSelectionOutlineTimer(){this.shouldDisableSelectionOutlineUntil=null,clearTimeout(this.disableSelectionOutlineTimerId)}};const r=new Set([i.Tools.Pan,i.Tools.SampleColor]),s=new Set(["children","name","cache","mutable","update","styledText","parentid"]),a=new Set(["widthType","width","height","autoSize"]);function doesPropDisableSelectionOutline(e){return!s.has(e)&&!a.has(e)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(649),o=n(87);function labelForNode(e,t,n){if(t.length>0&&-1===t.indexOf(e.id))return e.constructor.name;let i=" ",r="";e.replicaInfo?(i="!",r=" master="+e.replicaInfo.master):e.isMaster?i="@":e.originalid&&(i=".");let s="";e.name&&(s=" '"+e.name+"'");let a="";o.isTextNode(e)&&((a=e.styledText.text).length>20&&(a=a.slice(0,17)+"..."),a=" '"+a+"'");let l=`${e.constructor.name}${i}(${e.id}${s}${r})${a}`;for(const o in e){if("children"===o||"id"===o)continue;if(-1===n.indexOf(o))continue;l+=`\n ${o}: ${e[o]}`}return l}t.inspect=function inspect(e,t=[],n=[]){"string"==typeof t&&(t=[t]),"string"==typeof n&&(n=[n]);const o=function dataForNode(e,t,n){const i=e.children||[],o=t.length>0&&-1===t.indexOf(e.id),r=i.map(e=>dataForNode(e,o?t:[],n)).filter(e=>null!==e);return o&&0===r.length?null:{label:labelForNode(e,t,n),nodes:r}}(e.root,t,n);return o?i(o):"No data"}},function(e,t){e.exports=require("archy")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(1);function transform(e,t){return e?`translateX(-${t?100:0}%) translateX(${t?-4:4}px) translateY(-50%)`:`translateY(-${t?100:0}%) translateY(${t?-4:4}px) translateX(-50%)`}t.DistanceLine=function DistanceLine({a:e,b:t,zoom:n,dashed:r,displayLength:s,flipSide:a}){const l=o.Point.angle(e,t)<0?e:t,c=o.Point.angle(e,t)<0?t:e,d={position:"absolute",width:"1px",height:`${o.Point.distance(l,c)*n}px`,transformOrigin:"0 0",borderLeft:r?"1px dashed magenta":"1px solid magenta",transform:`translate(${Math.round(l.x*n)}px, ${Math.round(l.y*n)}px) translateZ(0) rotate(${o.Point.angle(l,c).toFixed(4)}deg)`},u=Math.round(o.Point.distance(l,c));if(0===u)return i.createElement("noscript",null);const h=i.createElement("div",{style:d});if(!s)return h;const p=l.x===c.x,g={position:"absolute",left:(l.x+c.x)/2*n,top:(l.y+c.y)/2*n,padding:"2px 4px",borderRadius:10,background:"magenta",color:"white",fontSize:"10px",lineHeight:"1em",transform:transform(p,!0===a)};return i.createElement(i.Fragment,null,h,i.createElement("div",{style:g},u))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(1),r=n(75);t.EqualDistanceFrames=class EqualDistanceFrames extends i.Component{render(){const{framesX:e,framesY:t,zoom:n}=this.props,l=[],c=[],d=s(e,!0),u=s(t,!1);return d.forEach((e,t)=>{const s=o.Rect.multiply(e,n),d="x"+t;c.push(a(s,e,!1,d)),l.push(i.createElement(r.default,{key:d,className:"fadeIn",backgroundColor:"magenta",frame:s,borderColor:"transparent",borderWidth:0}))}),u.map((e,t)=>{const s="y"+t,d=o.Rect.multiply(e,n);c.push(a(d,e,!0,s)),l.push(i.createElement(r.default,{key:s,className:"fadeIn",backgroundColor:"magenta",frame:d,borderColor:"transparent",borderWidth:0}))}),i.createElement(i.Fragment,null,i.createElement("div",{style:{opacity:.3}},l),c)}};const s=(e,t)=>{const n=[];return e.forEach(e=>{const i=n.find(n=>t?n.x===e.x&&o.Rect.maxX(n)===o.Rect.maxX(e):n.y===e.y&&o.Rect.maxY(n)===o.Rect.maxY(e));if(void 0!==i)if(t){const t=Math.max(o.Rect.maxY(i),o.Rect.maxY(e));i.y=Math.min(e.y,i.y),i.height=t-i.y}else{const t=Math.max(o.Rect.maxX(i),o.Rect.maxX(e));i.x=Math.min(e.x,i.x),i.width=t-i.x}else n.push(Object.assign({},e))}),n},a=(e,t,n,r)=>{let s=0,a=0;n?(s=o.Rect.maxX(e),a=e.y+e.height/2):(s=e.x+e.width/2,a=o.Rect.maxY(e));const l={position:"absolute",left:s,top:a,padding:"2px 4px",borderRadius:10,background:"magenta",color:"white",fontSize:"10px",lineHeight:"1em",transform:transform(n)};return i.createElement("div",{key:`dist-label${r}`,className:"fadeIn",style:l},n?t.height:t.width)};function transform(e){return e?"translateX(4px) translateY(-50%)":"translateY(4px) translateX(-50%)"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(653),r=n(3),s=n(1),a=n(2);t.default=class SnapConstraint extends i.Component{render(){const{snapConstraint:e,zoom:t}=this.props;if(null===e)return null;if(s.Line.isOrthogonal(e))return null;const{x:n,y:l,width:c,height:d}=a.default.canvasStore.getCanvasVisibleRect(),u=s.Line({x:n,y:l},{x:n+c,y:l}),h=s.Line({x:n,y:l+d},{x:n+c,y:l+d});let p=s.Line.intersection(e,u),g=s.Line.intersection(e,h);if(null===p||null===g){const t=s.Line({x:n,y:l},{x:n,y:l+d}),i=s.Line({x:n+c,y:l},{x:n+c,y:l+d});p=s.Line.intersection(e,t),g=s.Line.intersection(e,i)}return null===p||null===g?null:i.createElement(o.default,{key:"snapConstraint",a:p,b:g,zoom:t,stroke:r.theme.snapConstraint})}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(1);t.default=function SnapLine({a:e,b:t,zoom:n,stroke:r}){const s={position:"absolute",backgroundColor:r,width:"1px",height:`${o.Point.distance(e,t)*n}px`,transformOrigin:"0 0",transform:`translate(${Math.round(e.x*n)}px, ${Math.round(e.y*n)}px) translateZ(0) rotate(${o.Point.angle(e,t).toFixed(4)}deg)`};return i.createElement("div",{style:s,className:"fadeIn"})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(655),r=n(4),s=n(1);class FramePreviews extends i.Component{render(){const{tree:e,zoom:t}=this.props,n=e.getGroundNodesOfType(r.FrameNode,e=>0===e.rotation).map(t=>({frame:e.convertFrameToCanvas(t),deviceType:t.deviceType}));if(0===n.length)return null;n.reverse();const a=e.getGroundNodes().map(t=>e.convertFrameToCanvas(t)),l=n.reduce((e,t)=>{if(null===t.deviceType)return e;return FramePreviews.neighborFrames(t,100).forEach(t=>{a.find(e=>s.Rect.intersects(t.frame,e))||(e.push(t),a.push(t.frame))}),e},[]).map((n,r)=>{const{frame:s,deviceType:a}=n;return i.createElement(o.default,Object.assign({key:r},{frame:s,deviceType:a,tree:e,zoom:t}))});return i.createElement(i.Fragment,null,l)}}FramePreviews.neighborFrames=(e,t)=>{const n=e.frame;return[{x:n.x+n.width+t,y:n.y},{x:n.x,y:n.y+n.height+t}].map(t=>Object.assign({},e,{frame:Object.assign({},n,{x:Math.round(t.x),y:Math.round(t.y)})}))},t.default=FramePreviews},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(9),r=n(4),s=n(1),a=n(3),l=n(2);t.default=class FramePreview extends i.Component{constructor(e,t){super(e,t),this.onMouseDown=l.default.wrapMouseHandler(e=>{const{tree:t,deviceType:n}=this.props,i=t.newId(),a={id:i,deviceType:n},c=this.props.frame;0===t.getGroundNodes().length&&(c.x=0,c.y=0),a.left=c.x,a.top=c.y,a.width=c.width,a.height=c.height,a.clip=!0,l.default.createFrame(r.NullID,a),o.triggerLayoutFrameEvent({source:"suggestion"}),l.default.setSelection([i]),t.getGroundNodes(e=>{if(e instanceof r.FrameNode)return!1;const n=t.getRect(e);return s.Rect.intersects(n,c)}).forEach(e=>{const n=t.getRect(e),o=s.Rect.offset(n,s.Point.reverse(c));l.default.moveNode(e.id,i),l.default.updateNode(e.id,e.updateForRect(o,c))}),l.default.exitTool(),l.default.canvasStore.scrollToCenter(s.Rect.center(c)),e.stopPropagation()}),this.onMouseOver=l.default.wrapMouseHandler(()=>{this.setState({mouseOver:!0})}),this.onMouseOut=l.default.wrapMouseHandler(()=>{this.setState({mouseOver:!1})}),this.state={mouseOver:!1}}render(){const{frame:e,zoom:t}=this.props,n=s.Rect.multiply(e,t),o={position:"absolute",backgroundColor:a.theme.framePreview,border:`1px solid ${a.theme.framePreviewOutline}`,top:`${n.y}px`,left:`${n.x}px`,width:n.width,height:n.height,opacity:this.state.mouseOver?1:.5,cursor:"default"};return i.createElement("div",{className:"FramePreview",onMouseDown:this.onMouseDown,onMouseOver:this.onMouseOver,onMouseOut:this.onMouseOut,style:o})}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(1),r=n(3),s=n(19);t.default=class ShapeOutline extends i.Component{render(){const{paths:e,offset:t}=this.props,n=o.toSVGPath(e),a=s.default.boundingBox(e),l={position:"absolute",transform:`translate(${t.x+.5}px, ${t.y+.5}px)`,width:a.width,height:a.height,overflow:"visible",fill:"transparent",strokeWidth:1,stroke:r.theme.layerCreatePreview};return i.createElement("svg",{width:"100%",height:"100%",style:l,key:"shape-overlay"},i.createElement("path",{d:n}))}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(1),r=n(3),s=n(277);t.default=class IntersectionTangent extends i.Component{render(){const{intersectionTangent:e,zoom:t}=this.props;if(!e)return null;const n=new o.PathSegment(o.Point.multiply(e.a,t)),a=new o.PathSegment(o.Point.multiply(e.b,t));return i.createElement(s.default,{key:"curve-snap",strokeDasharray:"1 3",from:n,to:a,stroke:r.theme.snapLine})}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(32),r=n(11),s=n(277);t.default=class PathCurves extends i.Component{render(){const{tree:e,closestCurve:t,segmentSelection:n,snapConstraint:a,selectionType:l,zoom:c}=this.props;if(a)return null;const d=[];if(t&&!t.midPointInRange){const n=e.getNode(t.id);if(!n)return null;const o=r.convertPathToCanvas(e,n,n,c)[0],a=o.pathSegments.count(),l=t.segmentIndex+1===a?0:t.segmentIndex+1,u=o.pathSegments.get(t.segmentIndex),h=o.pathSegments.get(l),p=i.createElement(s.default,{key:"closest",from:u,to:h});d.push(p)}if(l===o.PathSelectionType.Curves){const t=r.groupPathSegmentSelectors(n),o=Object.keys(t);for(const n of o){const o=e.getNode(n),a=r.convertPathToCanvas(e,o,o,c)[0],l=a.pathSegments.count(),u=t[n];for(const e of u){const t=e+1===l?0:e+1,n=a.pathSegments.get(e),r=a.pathSegments.get(t),c=i.createElement(s.default,{key:o.id+"selected curve"+e,from:n,to:r});d.push(c)}}}return i.createElement("div",null,d)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(1),r=n(3),s=n(19),a=n(11),l=n(277);t.default=class PathCurvePreview extends i.Component{render(){const{tree:e,segmentSelection:t,segmentHovered:n,snap:c}=this.props.pathTool.pathEngine,{zoom:d,mouseOnCanvas:u}=this.props.pathTool.engine;if(!u)return null;const h=this.props.pathTool.pathEngine.snapConstraint||this.props.pathTool.pathEngine.snap.temporaryConstraint,p=t[0];if(!p||null===c.snappedMouse)return null;const g=e.getNode(p.id);if(!g)return null;const m=g.pathSegments.get(p.index);if(!m)return null;let f,y=a.convertSegmentToCanvas(e,g,m,d);if(s.default.isLastSegment(g.pathSegments,g.pathClosed,p.index)||(y=a.reverseSegment(y)),!h&&n){const t=function hoveredEndSegment(e,t,n,i){const o=n.getNode(e.id);if(!o)return null;const r=o.pathSegments.get(e.index);if(!s.default.isEndSegment(o.pathSegments,o.pathClosed,e.index))return null;if(o.id===t.id&&e.index===t.index)return null;let l=a.convertSegmentToCanvas(n,o,r,i);return s.default.isLastSegment(o.pathSegments,o.pathClosed,e.index)&&(l=a.reverseSegment(l)),l}(n,p,e,d);if(null===t)return null;f=t}if(void 0===f){const e=o.Point.multiply(c.snappedMouse,d);f=new o.PathSegment(e)}const v=o.isStraightCurve(y,f),b=h&&!n,k=i.createElement(l.default,{key:"curve-preview",from:y,to:f,stroke:b?r.theme.snapLine:void 0});return b&&!v?i.createElement("div",null,i.createElement(l.default,{key:"curve-preview-straight",from:new o.PathSegment(o.PathSegment.point(y)),to:f,stroke:r.theme.snapLine,strokeDasharray:"1 3"}),k):k}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(1),r=n(32),s=n(11),a=n(661);t.default=class PathSegmentAnchors extends i.Component{render(){const{tree:e,selection:t,pathTool:n,segmentSelection:l,cmdKey:c,zoom:d,segmentHandle:u,selectionType:h,snapConstraint:p}=this.props,g=s.groupPathSegmentSelectors(l),m=[];for(let s=0,f=t.length;s<f;s++){const f=t[s],y=e.getNode(f),v=g[f]||[];for(let t=0,s=y.pathSegments.count();t<s;t++){const g=y.pathSegments.get(t),b=e.convertPointToCanvas(y,o.PathSegment.point(g)),k=null===u&&-1!==v.indexOf(t)&&h===r.PathSelectionType.Segments,S=i.createElement(a.default,{key:f+"anchor"+t,tree:e,node:y,index:t,segmentHandle:u,point:o.Point.multiply(b,d),selected:k,pathTool:n,segmentSelection:l,selectionType:h,snapConstraint:p,isEnd:!y.pathClosed&&(0===t||t===s-1),cmdKey:c});m.push(S)}}return i.createElement("div",{style:{position:"absolute"}},m)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(1),r=n(3),s=n(46),a=n(32),l=n(274),c=n(278),d=n(275),u=n(11);function processMouseDown(e,t,n){const i=e.engine,o=e.pathEngine,{tree:r,cmdKey:s}=i,{segmentSelection:h,segmentHandle:p,selectionType:g,snapConstraint:m}=o,{node:f,index:y,isEnd:v}=t;if(m)return;if(e instanceof c.PathSegmentAdditionTool){const e=h[0];if(s)return;if(v){if(e.id!==f.id){const t=r.getNode(e.id);return u.joinPaths(r,i,t,e,f,{id:f.id,index:y}),o.setSegmentSelection([]),o.setPathTool(new l.PathDefaultTool),void n.stopPropagation()}if(canClosePath(y,e,f))return i.updateNode(f.id,f.updateForPath({pathClosed:!0})),o.setSegmentSelection([{id:f.id,index:y}]),o.setPathTool(new d.PathSegmentMoveTool),void n.stopPropagation()}}else if(!(e instanceof l.PathDefaultTool))return;const b=g===a.PathSelectionType.Segments;if(n.shiftKey&&b)o.toggleSegmentSelection([{id:f.id,index:y}]);else{const e=h.find(e=>e.id===f.id&&e.index===y);b&&void 0!==e&&!p||o.setSegmentSelection([{id:f.id,index:y}])}o.setSegmentHandle(null),o.setPathTool(new d.PathSegmentMoveTool)}t.processMouseDown=processMouseDown;function canClosePath(e,t,n){if(e===t.index)return!1;const i=n.pathSegments.count();if(2!==i)return i>2;const r=n.pathSegments.get(0),s=n.pathSegments.get(1);return!o.isStraightCurve(r,s)||!o.isStraightCurve(s,r)}t.default=class PathSegmentAnchor extends i.Component{constructor(){super(...arguments),this.state={constraintAnchor:!1},this.mouseDown=e=>{const t=this.props.pathTool;t.engine.process(()=>{processMouseDown(t,this.props,e)})},this.mouseOver=()=>{const e=this.props.pathTool;e.engine.process(()=>{const{snapConstraint:t}=this.props;(e instanceof l.PathDefaultTool||e instanceof c.PathSegmentAdditionTool)&&(t&&this.setState({constraintAnchor:!0}),e.pathEngine.setHoveredSegment({id:this.props.node.id,index:this.props.index}),e.pathEngine.setClosestCurve(null))})},this.mouseOut=()=>{this.state.constraintAnchor&&this.setState({constraintAnchor:!1})},this.mouseMove=e=>{const{pathTool:t}=this.props;(t instanceof l.PathDefaultTool||t instanceof c.PathSegmentAdditionTool)&&e.stopPropagation()},this.doubleClick=e=>{e.stopPropagation();const{node:t,index:n,pathTool:i,segmentSelection:r}=this.props;if(i instanceof c.PathSegmentAdditionTool){const e=r[0];if(e.id!==t.id&&e.index!==n)return}const s=t.pathSegments.update(n,e=>{switch(e.handleMirroring){case"straight":{const i=o.PathSegment.curveDefault(t.pathSegments.toArray(),n),r=o.Point.reverse(i),s={handleMirroring:"symmetric",handleOutX:i.x,handleOutY:i.y,handleInX:r.x,handleInY:r.y};return new o.PathSegment(e.merge(s))}default:return new o.PathSegment(e.merge({handleMirroring:"straight"}))}});i.engine.process(()=>{i.engine.updateNode(t.id,t.updateForPath({pathSegments:s}))})}}render(){const{selected:e,point:t,cmdKey:n,snapConstraint:o,isEnd:r,pathTool:a,node:l,index:d,segmentSelection:u}=this.props,m={position:"absolute",width:10,height:10,top:t.y-5,left:t.x-5,cursor:"default"};if(r&&(m.zIndex=2),a instanceof c.PathSegmentAdditionTool&&!o)if(r){const e=u[0];e&&(e.id!==l.id||canClosePath(d,e,l))&&(m.cursor=s.pathClosingCursor())}else n&&(m.cursor=s.pathExtensionCursor());const f=o&&this.state.constraintAnchor&&!e;return i.createElement("div",{style:m,onMouseDown:this.mouseDown,onMouseOver:this.mouseOver,onMouseOut:this.mouseOut,onMouseMove:this.mouseMove,onDoubleClick:this.doubleClick},i.createElement("div",{style:e?p:f?g:h}))}};const h={position:"absolute",border:`${r.theme.segmentAnchorOutline} 1px solid`,backgroundColor:r.theme.segmentAnchor,width:8,height:8,top:1,left:1,borderRadius:"50%"},p=Object.assign({},h,{border:"white 1px solid",backgroundColor:r.theme.segmentAnchorOutline,width:10,height:10,top:0,left:0}),g=Object.assign({},h,{border:`${r.theme.snapLine} 1px solid`})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(1),r=n(3),s=n(32),a=n(273),l=n(208),c=n(11),d=n(663),u=n(664);t.default=class PathSegmentHandles extends i.Component{render(){const{tree:e,selection:t,segmentSelection:n,closestCurve:o,pathTool:r,selectionType:d}=this.props;if(d===s.PathSelectionType.Curves)return null;if(!(r instanceof l.PathSegmentHandleMoveTool)&&this.props.pathTool.pathEngine.snapConstraint)return null;const u=r instanceof a.PathCurveBendTool,h=[],p=[];if(u&&o){const t=e.getNode(o.id);let n=o.segmentIndex+1;o.segmentIndex===t.pathSegments.count()-1&&(n=0),this.handles(t,[o.segmentIndex,n],h,p)}else{const i=c.groupPathSegmentSelectors(n);t.forEach(t=>{const n=e.getNode(t),o=i[t]||[];this.handles(n,o,h,p)})}return i.createElement("div",{style:{position:"absolute"}}," ",h," ",p," ")}handles(e,t,n,a){const{tree:c,zoom:h,pathTool:p,segmentHandle:g,altKey:m,segmentSelection:f}=this.props,y=this.props.pathTool.pathEngine.snapConstraint||this.props.pathTool.pathEngine.snap.temporaryConstraint,v=e.pathSegments.count();for(let b=0;b<v;b++){let v=-1===t.indexOf(b);if(p instanceof l.PathSegmentHandleMoveTool||!m||(v=!1),v)continue;const k=e.pathSegments.get(b);if("straight"===k.handleMirroring)continue;const S=c.convertPointToCanvas(e,o.PathSegment.point(k)),C=c.convertPointToCanvas(e,o.PathSegment.calculatedHandleOut(k)),x=c.convertPointToCanvas(e,o.PathSegment.calculatedHandleIn(k)),w=o.Point.multiply(C,h),T=o.Point.multiply(x,h),P=e.id+10*b,E=null!==g&&g.id===e.id&&g.index===b;if(0!==k.handleInX||0!==k.handleInY){const t=E&&null!==g&&g.handle===s.SegmentHandle.In,o=t&&null!==y;n.push(i.createElement(u.default,{key:P+1,zoom:h,pointA:x,pointB:S,stroke:o?r.theme.snapLine:void 0})),a.push(i.createElement(d.default,{key:P+3,selected:t,constrained:o,point:T,pathTool:p,selector:{id:e.id,index:b,handle:s.SegmentHandle.In},segmentSelection:f}))}if(0!==k.handleOutX||0!==k.handleOutY){const t=E&&null!==g&&g.handle===s.SegmentHandle.Out,o=t&&null!==y;n.push(i.createElement(u.default,{key:P,zoom:h,pointA:C,pointB:S,stroke:o?r.theme.snapLine:void 0})),a.push(i.createElement(d.default,{key:P+2,selected:t,constrained:o,point:w,pathTool:p,selector:{id:e.id,index:b,handle:s.SegmentHandle.Out},segmentSelection:f}))}}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(3),r=n(4),s=n(274),a=n(278),l=n(208);t.default=class PathSegmentHandle extends i.Component{constructor(){super(...arguments),this.mouseDown=()=>{const e=this.props.pathTool.engine,t=this.props.pathTool.pathEngine;e.process(()=>{const{selector:e,segmentSelection:n}=this.props;t.setSegmentHandle(e),t.setPathTool(new l.PathSegmentHandleMoveTool),void 0!==n.find(t=>e.id===t.id&&e.index===t.index)||t.setSegmentSelection([{id:e.id,index:e.index}])})},this.mouseOver=()=>{const e=this.props.pathTool.engine,t=this.props.pathTool.pathEngine;e.process(()=>{t.setHoveredSegment({id:r.InvalidID,index:0}),t.setClosestCurve(null)})},this.mouseMove=e=>{e.stopPropagation()},this.doubleClick=e=>{e.stopPropagation()}}render(){const{pathTool:e,point:t,selected:n,constrained:r}=this.props,l=n?10:8,c={position:"absolute",borderColor:n?o.theme.segmentAnchor:o.theme.segmentAnchorOutline,borderWidth:1,borderStyle:"solid",backgroundColor:n?r?o.theme.snapLine:o.theme.segmentAnchorOutline:o.theme.segmentAnchor,width:l,height:l,top:t.y-l/2,left:t.x-l/2,borderRadius:"50%",cursor:"auto"};return e instanceof s.PathDefaultTool||e instanceof a.PathSegmentAdditionTool||(c.pointerEvents="none"),i.createElement("div",{style:c,onMouseDown:this.mouseDown,onMouseOver:this.mouseOver,onMouseMove:this.mouseMove,onDoubleClick:this.doubleClick})}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(1),r=n(3);t.default=class VectorLine extends i.Component{render(){const e=o.Point.multiply(this.props.pointA,this.props.zoom),t=o.Point.multiply(this.props.pointB,this.props.zoom),n=o.Point.subtract(t,e),s=n,a=`M 0 0 C 0 0 ${s.x} ${s.y} ${n.x} ${n.y}`,l={position:"absolute",transform:`translate(${e.x}px, ${e.y}px)`,width:"100px",height:"100px",overflow:"visible"};let c=r.theme.pathCurvePreview;return this.props.stroke&&(c=this.props.stroke),i.createElement("svg",{width:"100%",height:"100%",style:l,strokeWidth:1,stroke:c,fill:"transparent",viewBox:"0 0 100 100"},i.createElement("path",{d:a}))}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(666);t.default=class PathShapes extends i.Component{render(){const{tree:e,selection:t,zoom:n}=this.props,r=[];for(let s=0,a=t.length;s<a;s++){const a=e.getNode(t[s]);r.push(i.createElement(o.default,{key:a.id+"shapeBg",node:a,tree:e,zoom:n}))}return i.createElement("div",null,r)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(1),r=n(27),s=n(19),a=n(11),l=n(93);t.default=class PathShape extends i.Component{render(){const{tree:e,node:t,zoom:n}=this.props,c=a.convertPathToCanvas(e,t,t,n),d=o.toSVGPath(c),u=s.default.boundingBox(c),h={position:"absolute",transform:`translate(${u.x}px, ${u.y}px)`},p=e.getParent(t.id),g=p&&r.hasShape(p),m=l.computeColor(t.strokeColor,t.tree()),f=g||n>4||1!==t.strokeEnabled||0===t.strokeWidth||t.strokeWidth&&t.strokeWidth>10||0===o.ConvertColor.getAlpha(m),y={position:"absolute",width:u.width,height:u.height,overflow:"visible",fill:"transparent",strokeWidth:1,stroke:f?"rgba(0,0,0,0.25)":"transparent"};return i.createElement("div",{style:h},i.createElement("svg",{width:"100%",height:"100%",style:y,key:t.id+"overlay",viewBox:`${u.x} ${u.y} ${u.width} ${u.height}`,strokeLinecap:t.lineCap,strokeLinejoin:t.lineJoin},i.createElement("path",{d})))}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(1),o=n(46),r=n(381),s=n(5),a=n(279);t.GradientAngleTool=class GradientAngleTool extends a.VekterGradientTool{constructor(){super(...arguments),this.enum=s.Tools.Unknown,this.mouseDidMovePastThreshold=!1}start(){this.engine.beginUndoGroup();const e=this.gradientEngine.gradientNode;e&&"linear-gradient"===e.fillType&&e.fillLinearGradient?this.startGradient=e.fillLinearGradient:this.engine.exitTool()}stop(){this.engine.setTooltip(null),this.engine.endUndoGroup(),this.engine.clearCursor()}update(){const{mouseDown:e,selection:t,mouse:n,tree:o,shiftKey:s,setTooltip:a,previousInputState:l}=this.engine,{gradientNode:c}=this.gradientEngine,d=l.mouse,u=l.shiftKey;if(!e||!d||!n)return void this.gradientEngine.setDefault();const h=n.x!==d.x||n.y!==d.y,p=s!==u,g=i.Point.distance(n,e);if(!this.mouseDidMovePastThreshold&&g>1&&(this.mouseDidMovePastThreshold=!0),this.mouseDidMovePastThreshold&&(h||p)){const l=i.Rect.center(o.convertFrameToCanvas(c)),d=Math.atan2(e.y-l.y,e.x-l.x);let u=Math.atan2(n.y-l.y,n.x-l.x)-d;u=180*u/Math.PI;let h=this.startGradient.angle+u;s&&(h=45*Math.round(h/45)),(h=Math.round(h))>=360?h-=360:h<0&&(h+=360),a(`${h}`),this.updateCursor();const p=new r.LinearGradient(this.startGradient.merge({angle:h}));this.engine.updateNodes(t,{fillLinearGradient:p,fillType:"linear-gradient"})}}updateCursor(){const{tree:e,mouse:t}=this.engine,n=i.Rect.center(e.convertFrameToCanvas(this.gradientEngine.gradientNode)),r=i.Point.angle(n,t);this.engine.setCursor(o.gradientRotate(r))}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(1),r=n(46),s=n(414);t.GradientHandles=class GradientHandles extends i.Component{constructor(){super(...arguments),this.radialGradientHeightFactorHandle=(e,t)=>{if(!(e instanceof s.RadialGradientCoordinates))return null;const n=o.Point.pixelAligned(o.Point.multiply(e.topCenter,t));return i.createElement("div",{style:{position:"absolute",top:n.y-4,left:n.x-4,width:9,height:9,borderRadius:"50%",backgroundColor:"white",boxShadow:"0 0 0 1px rgba(0,0,0,.1)",overflow:"hidden",pointerEvents:"auto"},onMouseDown:this.props.onHeightFactorStart})},this.rotationHandle=(e,t,n)=>{if(!(e instanceof s.LinearGradientCoordinates))return null;const{center:a,start:l,end:c}=e,d=0===t?l:c,u=o.Point.angle(a,d),h=u*Math.PI/180,p={x:10*-Math.sin(h),y:10*Math.cos(h)},g=o.Point.add(o.Point.multiply(d,n),p);return i.createElement("div",{key:u,style:{position:"absolute",top:g.y-9,left:g.x-9,width:19,height:19,borderRadius:"50%",cursor:r.gradientRotate(u)},onMouseDown:this.props.onRotate})},this.gradientDot=(e,t,n,r,s)=>{const a=0===r?e.start:e.end,l=o.Point.pixelAligned(o.Point.multiply(a,n)),c=r===s,d=c?15:11,u=c?8:6;return i.createElement("div",{style:{position:"absolute",top:l.y-u,left:l.x-u,width:d,height:d,borderRadius:"50%",backgroundColor:"white",boxShadow:"0 0 0 1px rgba(0,0,0,.1)",overflow:"hidden",pointerEvents:"auto"},onMouseDown:this.props.onSelectStop?this.props.onSelectStop.bind(this,r):void 0},i.createElement("div",{style:{position:"absolute",left:2,right:2,top:2,bottom:2,borderRadius:"50%",backgroundColor:o.ConvertColor.toHSL(t).l<=.9?"white":"#ccc",backgroundImage:`linear-gradient(${t}, ${t})`}}),i.createElement("div",{style:{position:"absolute",left:2,right:2,top:2,height:(d-4)/2,borderTopLeftRadius:"100%",borderTopRightRadius:"100%",transform:"rotate(-45deg)",transformOrigin:"50% 100%",backgroundColor:o.ConvertColor.setAlpha(t,1)}}),i.createElement("div",{style:{position:"absolute",width:"100%",height:"100%",borderRadius:"50%",boxShadow:"inset 0 0 0 2px white, inset 0 0 0 3px rgba(0,0,0,.1)"}}))},this.line=(e,t)=>{const{start:n,end:r}=e;return i.createElement("div",{style:{position:"absolute",backgroundColor:"white",width:1,height:o.Point.distance(n,r)*t,transformOrigin:"0 0",transform:`translate(${Math.round(n.x*t)}px, ${Math.round(n.y*t)}px) translateZ(0) rotate(${o.Point.angle(n,r).toFixed(4)}deg)`,boxShadow:"0 0 0 1px rgba(0,0,0,.1)"}})},this.outline=(e,t)=>{let n,r,a="";const{size:l}=e;if(e instanceof s.RadialGradientCoordinates)n=e.rotation,r=e.start,a="50%";else{const{start:t,end:i}=e;if(n=o.Point.angle(t,i),Math.round(n)%90==0)return null;r=e.center}return i.createElement("div",{style:{position:"absolute",transform:`rotate(${n}deg)`,borderRadius:a,width:Math.round(l.width*t),height:Math.round(l.height*t),top:Math.round((r.y-l.height/2)*t),left:Math.round((r.x-l.width/2)*t),boxShadow:"0 0 0 1px rgba(255,255,255,.25), inset 0 0 0 1px rgba(0,0,0,.1)"}})}}render(){const{tree:e,node:t,gradient:n,zoom:o,colorStopSelection:r}=this.props,a=s.gradientCoordinates(e,t,n);return a?i.createElement(i.Fragment,null,this.outline(a,o),this.line(a,o),this.rotationHandle(a,0,o),this.rotationHandle(a,1,o),this.radialGradientHeightFactorHandle(a,o),this.gradientDot(a,n.stops.get(0).value,o,0,r),this.gradientDot(a,n.stops.get(1).value,o,1,r)):null}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(7),o=n(1),r=n(91),s=n(5),a=n(279),l=n(120);t.RadialGradientMoveTool=class RadialGradientMoveTool extends a.VekterGradientTool{constructor(){super(...arguments),this.enum=s.Tools.Unknown,this.mouseDidMovePastThreshold=!1}start(){this.engine.beginUndoGroup();const e=this.gradientEngine.gradientNode;e&&"radial-gradient"===e.fillType&&e.fillRadialGradient?(this.startGradient=e.fillRadialGradient,this.snapData=function generateSnappingData(e,t){const n=o.Rect.atOrigin(e.getRect(t)),r=[...o.Rect.cornerPoints(n),o.Rect.center(n)],s=[],a=[];return r.map(n=>{const i=e.convertPointToCanvas(t,n);s.push(i.x),a.push(i.y)}),{x:i.Set(s),y:i.Set(a)}}(this.engine.tree,e)):this.engine.exitTool()}stop(){this.engine.toolStore.setSnapLines(),this.engine.endUndoGroup()}update(){const{mouseDown:e,selection:t,mouse:n,tree:i,shiftKey:s,previousInputState:a,zoom:c}=this.engine,{gradientNode:d}=this.gradientEngine,u=a.mouse,h=a.shiftKey;if(!(e&&u&&n&&d))return void this.gradientEngine.setDefault();const p=o.Point.distance(n,e);if(!this.mouseDidMovePastThreshold&&p>1&&(this.mouseDidMovePastThreshold=!0),!this.mouseDidMovePastThreshold)return;if(n.x===u.x&&n.y===u.y&&s===h)return;const{point:g,snapLines:m}=l.snap(this.snapData,c,n),f=Object.assign({},n);o.isFiniteNumber(g.x)&&(f.x=g.x),o.isFiniteNumber(g.y)&&(f.y=g.y),this.engine.toolStore.setSnapLines(m.x,m.y);const y=i.convertPointToNode(d,f),v=o.Rect.atOrigin(i.getRect(d)),b=o.roundedNumber(y.x/v.width,3),k=o.roundedNumber(y.y/v.height,3),S=new r.RadialGradient(this.startGradient.merge({centerAnchorX:b,centerAnchorY:k}));this.engine.updateNodes(t,{fillRadialGradient:S,fillType:"radial-gradient"})}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(1),o=n(91),r=n(5),s=n(279);t.RadialGradientResizeTool=class RadialGradientResizeTool extends s.VekterGradientTool{constructor(e){super(),this.enum=r.Tools.Unknown,this.mouseDidMovePastThreshold=!1,this.isHorizontal=!0,e&&(this.isHorizontal=e.isHorizontal)}start(){this.engine.beginUndoGroup();const e=this.gradientEngine.gradientNode;e&&"radial-gradient"===e.fillType&&e.fillRadialGradient?this.startGradient=e.fillRadialGradient:this.engine.exitTool()}stop(){this.engine.setTooltip(null),this.engine.endUndoGroup()}update(){const{mouseDown:e,selection:t,mouse:n,tree:r,shiftKey:s,previousInputState:l,zoom:c}=this.engine,{gradientNode:d}=this.gradientEngine,u=l.mouse,h=l.shiftKey;if(!(e&&u&&n&&d))return void this.gradientEngine.setDefault();const p=i.Point.distance(n,e);if(!this.mouseDidMovePastThreshold&&p>1&&(this.mouseDidMovePastThreshold=!0),!this.mouseDidMovePastThreshold)return;if(n.x===u.x&&n.y===u.y&&s===h)return;const g=r.getRect(d),m=r.convertPointToNode(d,n),f=g.width*this.startGradient.centerAnchorX,y=Math.abs(m.x-f),v=g.height*this.startGradient.centerAnchorY,b=Math.abs(m.y-v),k=this.isHorizontal?g.width:g.height,S=10/c/k,C=function snap(e,t){for(const n of a)if(Math.abs(e-n)<t)return n;return i.roundedNumber(e,3)}((this.isHorizontal?y:b)/k,S),x=this.isHorizontal?this.startGradient.widthFactor:this.startGradient.heightFactor,w=s?C/x:1,T={widthFactor:this.isHorizontal?C:this.startGradient.widthFactor*w,heightFactor:this.isHorizontal?this.startGradient.heightFactor*w:C},P=new o.RadialGradient(this.startGradient.merge(T));this.engine.updateNodes(t,{fillRadialGradient:P,fillType:"radial-gradient"}),this.engine.setTooltip(`${C}`)}};const a=[.25,.5,.75,1,1.5,2]},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(2),o=n(5),r=n(20),s=n(1),a=n(172),l=n(28),c=n(35),d=n(282),u=n(137);t.FeedbackTool=class FeedbackTool extends r.VekterTool{constructor(){super(...arguments),this.enum=o.Tools.Comment,this.wantsAutoscrolling=!0,this.keepActive=!1}start(){l.experiments.isOn("feedback")&&(i.default.feedbackStore.isActive=!0,i.default.setCursor("crosshair"))}stop(){this.keepActive||(i.default.feedbackStore.isActive=!1,this.engine.clearCursor())}update(){const{spacebarDown:e}=this.engine,{middleMouseButtonDownRaw:t}=this.engine.mouseStore;return e||t?(this.keepActive=!0,this.engine.setExit(()=>{this.engine.setExit(null),this.engine.setTool(this),this.keepActive=!1}),void this.engine.setTool(new a.PanTool)):i.default.mouseDown&&!this.mouseDown?(this.mouseDown=i.default.mouseDown,void this.onMouseDown()):!i.default.mouseDown&&this.mouseDown?(this.mouseDown=void 0,void this.onMouseUp()):void(i.default.mouseDown&&this.onMouseDownMove())}onMouseDown(){const e=i.default.feedbackStore.threadIdUnderMouse;this.draggingThreadId=e,this.draggingOffset=this.calcDraggingOffset()}onMouseDownMove(){if(this.isDragging)return void this.onDrag();const e=this.mouseDown;if(!e)return;const{zoom:t,mouse:n}=this.engine;s.Point.distance(n,e)*t<=5||(this.engine.feedbackStore.ignoreNextClick=!0,this.onDragStart())}onMouseUp(){const{feedbackStore:e}=this.engine;this.isDragging?this.onDragEnd():i.default.mouseOnCanvas&&e.isActive&&(e.selectedThread&&e.isTransientThread(e.selectedThread.id)&&e.threadIdUnderMouse!==e.selectedThread.id?e.deleteThread(e.selectedThread.id).catch(()=>{}):e.threadIdUnderMouse||e.openTransientThread(Object.assign({type:u.AnchorType.Canvas},this.engine.mouse)))}onDragStart(){this.isDragging=!0}onDrag(){const e=this.draggingThreadId,t=this.draggingOffset;if(!t||!e)return;const n=s.Point.subtract(i.default.mouse,t);this.engine.feedbackStore.setThreadAnchor(e,Object.assign({},n,{type:u.AnchorType.Canvas}))}onDragEnd(){const e=this.draggingThreadId;this.draggingThreadId=void 0,this.mouseDown=void 0,this.draggingOffset=void 0,this.isDragging=!1,e&&this.engine.feedbackStore.persistThreadAnchor(e).catch(c.unhandledError)}calcDraggingOffset(){const e=i.default.mouseDown;if(!e)return;const t=this.draggingThreadId;if(!t)return;const n=this.engine.feedbackStore.getThread(t);return n?s.Point.subtract(e,d.anchorToPoint(n.anchor)):void 0}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(1),o=n(81),r=n(214),s=n(4),a=n(12),l=n(132),c=n(143),d=n(253),u=n(93),h=n(51),p=n(85),g=n(1),m='// WARNING: this file is auto generated, any changes will be lost\nimport { createDesignComponent, CanvasStore } from "framer"\nconst canvas = CanvasStore.shared(); // CANVAS_DATA;\n',f="export const {name} = createDesignComponent<{props}>(canvas, {id}, {desc}, {width_height});\n",y="export const colors = Object.freeze({\n{fields}})\n",v="    /** {color} */\n    {name}: {value},\n";function codeConverter(e,t){let n;if(e instanceof s.CodeComponentNode)n=e.getProps();else{const t=e.cache;(n=t.props)||(n=t.props=e.getProps())}const i=d.safeName(e.name);if(e instanceof s.TextNode&&!n.rawHTML){const t=o.convertToRaw(e.styledText.styledText.getCurrentContent());n=Object.assign({},n,{contentState:t})}return{componentClass:e instanceof s.CanvasNode?r.componentForNode(e).name:e.componentIdentifier,props:n,children:t,name:i}}class MasterNodeEntry{constructor(e,t){this.node=e,this.seen=!0,this.name="",this.presentationTreeDirty=!0,this.codeDirty=!0,this.code="",this.updatePresentationTree(e,t)}update(e,t){this.seen=!0,this.node!==e&&this.updatePresentationTree(e,t)}updatePresentationTree(e,t){const n=d.safeComponentName(e.name);if(this.name!==n&&!this.name.startsWith(n+"_")){let e=n;for(let i=1;i<100&&this.name!==e&&t.hasName(e);i++)e=n+"_"+i;this.name=e}this.presentationTreeDirty=!0,this.presentationTree=i.convertPresentationTree(e,codeConverter);let{width:o,height:r}=this.presentationTree.props;const{_constraints:a}=this.presentationTree.props;a&&(void 0!==a.intrinsicWidth&&(o=a.intrinsicWidth),void 0!==a.intrinsicHeight&&(r=a.intrinsicHeight));const c=Object.assign({},this.presentationTree.props,{top:void 0,bottom:void 0,left:void 0,right:void 0,width:void 0,height:void 0,center:void 0});this.presentationTree.props=c;let u="";u+=null==o?"200":JSON.stringify(o),u+=",",u+=null==r?"200":JSON.stringify(r);const h=function propsTypeFor(e){let t="parentSize?:{width:number|string,height:number|string},width?:number|string,height?:number|string";const n=[];return e.walk(i=>{if(i!==e&&l.withTarget(i)&&i.isTarget&&i.name){const e=d.safeName(i.name);if(!e)return;i instanceof s.TextNode?(t+=","+e+"?:string",n.push(e+':"string"')):(t+=","+e+"?:string",n.push(e+':"image"'))}}),{propsType:"{"+t+"}",propsDesc:"{"+n.join(",")+"}"}}(e),p=template(f,{width_height:u,desc:h.propsDesc,id:JSON.stringify(d.idToReactId(e.id)),props:h.propsType,name:this.name});this.code!==p&&(this.codeDirty=!0,this.code=p)}}class ColorTokenNodeEntry{constructor(e){this.node=e,this.seen=!0,this.name="",this.codeDirty=!0,this.code="",this.updateCode(e)}update(e){this.seen=!0,this.node!==e&&this.updateCode(e)}updateCode(e){this.name=e.name||"";const t=g.Color(e.value),n=template(v,{name:JSON.stringify(this.name),value:JSON.stringify(h.tokenToCSSVariable(e,{excludeMetadata:!0})),color:1===t.a?g.Color.toHexString(t).toUpperCase():g.Color.toRgbString(t)});this.code!==n&&(this.codeDirty=!0,this.code=n)}}function template(e,t){return e.replace(/{([a-z0-9_]+)}/gi,(e,n)=>t[n]||e)}t.CodeGenerator=class CodeGenerator{constructor(e,t=c.projectServerConnection){this.engine=e,this.projectServerConnection=t,this.masterNodes=new Map,this.colorNodes=new Map,this.colorNodesIndex=new WeakMap,this.presentationTreeDirty=!0,this.codeDirty=!0,this.changedNodes=e=>{for(let t=0,n=e.length;t<n;t++){const n=e[t];a.isMaster(n)&&!a.isHiddenMaster(n)&&this.updateNode(n),p.isRootNode(n)&&this.updateAllColorNodes(n)}this.afterUpdates()},this.previousCanvas="",this.updatePreview=()=>{const e=JSON.stringify(i.CanvasStore.shared().canvas);this.previousCanvas!==e&&(this.previousCanvas=e,this.projectServerConnection.updateCanvasData(e))},this.schedulePreviewUpdate=this.engine.debounce(this.updatePreview,100),this.previousCode="",this.updateModule=()=>{const e=this.generateCode();this.previousCode!==e&&(this.previousCode=e,this.projectServerConnection.updateCanvasModule(e))},this.scheduleCodeUpdate=this.engine.debounce(this.updateModule,100)}hasName(e){let t=!1;return this.masterNodes.forEach(n=>{n.name===e&&(t=!0)}),t}generateCode(){const e=Array.from(this.masterNodes.values()).map(e=>e.code).sort();if(this.colorNodes.size){const t=this.colorNodesIndex,n=template(y,{fields:Array.from(this.colorNodes.values()).sort((e,n)=>t.get(e)-t.get(n)).map(e=>e.code).join("")});return`${m}${e.join("")}\n${n}`}return`${m}${e.join("")}`}updateTree(e){this.masterNodes.forEach(e=>e.seen=!1),this.colorNodes.forEach(e=>e.seen=!1),e.root.walk(e=>{a.isMaster(e)&&!a.isHiddenMaster(e)&&this.updateNode(e)}),this.masterNodes.forEach(e=>{e.seen||(this.masterNodes.delete(e.node.id),this.presentationTreeDirty=!0,this.codeDirty=!0)}),this.updateAllColorNodes(e.root),this.colorNodes.forEach(e=>{e.seen||(this.colorNodes.delete(e.node.id),this.codeDirty=!0)}),this.afterTreeUpdate()}updateNode(e){let t=this.masterNodes.get(e.id);t?(t.update(e,this),t.presentationTreeDirty&&(this.presentationTreeDirty=!0),t.codeDirty&&(this.codeDirty=!0)):(t=new MasterNodeEntry(e,this),this.masterNodes.set(e.id,t),this.presentationTreeDirty=!0,this.codeDirty=!0)}updateAllColorNodes(e){e.getTokensOfType(u.ColorTokenNode).forEach((e,t)=>{const n=this.updateColorNode(e);this.colorNodesIndex.set(n,t)})}updateColorNode(e){let t=this.colorNodes.get(e.id);return t?(t.update(e),t.codeDirty&&(this.codeDirty=!0)):(t=new ColorTokenNodeEntry(e),this.colorNodes.set(e.id,t),this.codeDirty=!0),t}afterTreeUpdate(){if(this.presentationTreeDirty){this.presentationTreeDirty=!1;const e=[];this.masterNodes.forEach(t=>{e.push(t.presentationTree),t.presentationTreeDirty=!1,t.codeDirty=!1}),this.colorNodes.forEach(e=>{e.codeDirty=!1}),i.CanvasStore.shared().setCanvas({children:e}),this.schedulePreviewUpdate()}this.codeDirty&&this.scheduleCodeUpdate()}afterUpdates(){if(this.presentationTreeDirty){this.presentationTreeDirty=!1;const e=i.CanvasStore.shared(),t=e.canvas.children||[];e.setCanvas({children:t.slice()}),this.masterNodes.forEach(t=>{t.presentationTreeDirty&&(e.updateNode(t.presentationTree),t.presentationTreeDirty=!1,t.codeDirty=!1)}),this.colorNodes.forEach(e=>{e.codeDirty=!1}),this.schedulePreviewUpdate()}this.codeDirty&&this.scheduleCodeUpdate()}}},function(e,t){e.exports=require("socket.io-client")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(675),o=window;let r="",s="";t.updateProjectBundleHash=function updateProjectBundleHash(e){const t=e["index.js"],n=e["vendors.js"];t&&(r=String(i.javaHash(t))),n&&(s=String(i.javaHash(n)));const a=`${r}_${s}`;return o.componentHash=a,a}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.javaHash=function javaHash(e){let t=0;if(0===e.length)return t;for(let n=0,i=e.length;n<i;n++)t=(t<<5)-t+e.charCodeAt(n)|0;return t}},function(e,t){e.exports=require("@framerjs/framer-tracking-client")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.appServices=new class AppServices{constructor(e=Object.assign({},window._framerServiceEndpoints)){this.endpoints=e}get apiBaseURL(){return(this.endpoints?this.endpoints.api:void 0)||"about:blank"}get publicStoreURL(){return(this.endpoints?this.endpoints.publicStore:void 0)||"about:blank"}get privateStoreURL(){return(this.endpoints?this.endpoints.privateStore:void 0)||"about:blank"}get trackingURL(){return(this.endpoints?this.endpoints.tracking:void 0)||"about:blank"}}},function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))(function(o,r){function fulfilled(e){try{step(i.next(e))}catch(t){r(t)}}function rejected(e){try{step(i.throw(e))}catch(t){r(t)}}function step(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(fulfilled,rejected)}step((i=i.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const o=n(0),r=n(9),s=n(1),a=n(679),l=n(2),c=n(421),d=n(681),u=n(1),h=n(4),p=n(20),g=n(5),m=n(936),f=n(6),y=n(938),v=n(35);window.__checkBudget__||(window.__checkBudget__=function __checkBudget__(){});class RecoveryTool{constructor(){this.enum=g.Tools.Unknown,this.startTime=Date.now()}start(){}update(){Date.now()-this.startTime<500||this.engine.setTool(p.newToolFor(g.Tools.Highlight))}stop(){}}t.RecoveryTool=RecoveryTool;t.Document=class Document extends o.Component{constructor(){super(...arguments),this.loadDocument=l.default.wrapHandler(()=>i(this,void 0,void 0,function*(){const e=l.default.serverStore.documentURL;if(r.triggerAppLaunchEvent({loadingTime:Date.now()-window["__app-start-time"]}),yield l.default.feedbackStore.initialize(),!e)return void l.default.didLoad();const t=yield c.loadDocumentAsync(e);l.default.load(t),l.default.zoomToFitAll({initial:!0}),a.missingFontCheck(t),m.isTutorial&&m.tutorialManager.start().catch(v.unhandledError)})),this.componentDidCatch=(e,t)=>{const n=t.componentStack.split("\n").filter(e=>0!==e.length).join("\n");console.warn(`Had Error: ${e.name} -- ${e.message}\n${n}\n`,e);const i=window.Raven;i&&i.captureException(e,{extra:t}),console.log("trying to recover ..."),l.default.tool=new RecoveryTool,l.default.tool.engine=l.default,l.default.state=3,l.default.inEventHandling=1;try{l.default.tree.makeLatest()}catch(o){}l.default.tree.clearCache(),l.default.setSelection([]),l.default.setHighlight(),l.default.inEventHandling=0,l.default.tree.editClosed=!0,l.default.setMouseStore(0,0),l.default.mouse=u.Point(0,0),l.default.mouseDown=null,l.default.mouseRaw=u.Point(0,0),l.default.mouseDownRaw=null;try{l.default.tree.verify()}catch(o){console.error("unable to recover with undo:",o);try{l.default.load(h.default.createWithRoot(l.default.tree.root.cloneWithIds()))}catch(o){throw console.error("unable to recover at all",o),Error("unable to recover")}}l.default.tree.updateCache(),l.default.state=1,this.forceUpdate(),l.default.documentSettings.crashMessage=e.message,setTimeout(l.default.wrapHandler(()=>{l.default.setMouseStore(0,0),l.default.zoomToFitAll()}),100)}}setURLsFromLocation(){const{imageBaseURL:e,documentURL:t,projectURL:n}=s.getConfigFromVekterURL(window.location.href);e&&""!==e&&l.default.serverStore.setImageBaseURL(e),t&&""!==t&&l.default.serverStore.setDocumentURL(t),n&&""!==n&&l.default.serverStore.setProjectURL(n),n||this.isInApp()||l.default.serverStore.setHasProject()}isInApp(){return void 0!==window._bridge}componentDidMount(){this.setURLsFromLocation(),this.loadDocumentWhenReady().catch(v.unhandledError)}loadDocumentWhenReady(){return i(this,void 0,void 0,function*(){if(yield y.setupServices(),l.default.serverStore.hasProject)return void setTimeout(()=>this.loadDocument(),0);const e=()=>{l.default.serverStore.hasProject&&(l.default.changes.removeObserver(e),setTimeout(()=>this.loadDocument(),0))};l.default.changes.observe(f.EngineChangeFlags.ServerStore,e)})}render(){return o.createElement(d.Document,null)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(4),o=n(1);t.missingFontCheck=function missingFontCheck(e){const t=[];return e.root.walk(e=>{e instanceof i.TextNode&&e.styledText.fonts(!1).forEach(e=>{o.fontStore.isSelectorLoaded(e)||t.push(e)})}),t.length>0&&console.warn(`Missing fonts: ${t.join(", ")}`),t}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(23),o=n(4),r=n(385),s=n(22),a=n(12),l=n(110),c=n(56),d=n(1);function detachReplica(e){e.originalid=null,e.replicaInfo=null}function repairReplica(e,t,n){const i=t.replicaInfo.master,o=e.get(i);return o?a.isMaster(o)?(t.originalid!==i&&(n.push(`${t.id}: design component master isn't originalid`),t.originalid=i),o):(n.push(`${t.id}: design component doesn't link to a master: ${i}`),detachReplica(t),null):(n.push(`${t.id}: design component has bad link: ${i}`),detachReplica(t),null)}t.safeLoadDocument=function safeLoadDocument(e,t){if(!d.isFiniteNumber(e.version))throw Error("Unable to read document.version");if(!e.root)throw Error("Unable to read document.root");if(e.version<o.default.minimumSerializationVersion)throw Error("Document version too low");if(e.version>r.CanvasTreeVersion)throw Error("Document version is too high");const n=o.CanvasNode.fromJS(e.root,t);if(!n)throw Error("Unable to create load document");const u=new Map;return n.walk(e=>{for(;u.has(e.id);)t.push(`${e.id}: duplicate id in document`),e.id=l.randomID();u.set(e.id,e)}),function repairTree(e,t,n){t.walk(t=>{i(t.isMutable),s.isCodeComponentNode(t)&&function repairComponentLinks(e,t,n,i){const o=Object.keys(n.codeComponentProps);for(const r of o){const o=n.codeComponentProps[r];if(!Array.isArray(o))continue;const a=[];for(let r=0,l=o.length;r<l;r++){const l=o[r];if(l.type!==d.ControlType.ComponentInstance)continue;const c=l.value;if(c===t.id){i.push(`${t.id}: code component links itself via ${n.id}`),a.push(r);continue}const u=e.get(c);u?u.walk(o=>{if(o===t)return i.push(`${t.id}: code component links itself via ${n.id} via ${c}`),void a.push(r);s.isCodeComponentNode(o)&&repairComponentLinks(e,t,o,i)}):(i.push(`${n.id}: code component has bad link at ${c}`),a.push(r))}for(;a.length>0;)o.splice(a.pop(),1)}}(e,t,t,n),a.isMaster(t)&&function repairMasterLinks(e,t,n,i){n.walk(o=>{if(o!==n&&a.hasTemplate(o)&&a.isReplica(o)){const r=repairReplica(e,o,i);if(!r)return;if(t===r)return i.push(`${t.id}: design component links itself via ${n.id}`),detachReplica(o),null;repairMasterLinks(e,t,r,i)}})}(e,t,t,n),a.isReplica(t)&&repairReplica(e,t,n)})}(u,n,t),c.TemplateHelper.treeDidLoad(o.default.createByAdoptingRoot(n)).didNonLinearMove()}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(23),r=n(2),s=n(682),a=n(780),l=n(95),c=n(291),d=n(86),u=n(935);t.Document=class Document extends i.Component{constructor(){super(...arguments),this.state={update:r.default.update},this.update=r.default.update,this.lastRender=-1,this.onContextMenu=e=>{e.preventDefault()}}componentWillMount(){r.default.reactComponent=this,r.default.selection=[],r.default.doToolProcessing(),this.state.update=this.update=r.default.update}shouldComponentUpdate(e,t,n){return t.update!==this.update&&(this.update=t.update,o(this.update===r.default.update,"engine must drive document.state correctly"),r.default.updateInputState(),r.default.doToolProcessing(),!0)}render(){o(this.update===r.default.update,"engine must drive document.state correctly"),r.default.beginRendering(),r.default.assertReactRendering();const e=d.getTokenCSSProperties(r.default.tree),t=i.createElement("div",{onContextMenu:this.onContextMenu},i.createElement(l.ActionResponder,{engine:r.default,target:c.documentActionTarget,global:!0},i.createElement(s.Canvas,null),i.createElement(a.Chrome,null)));return u.wrapInCustomProperties(t,e)}componentDidMount(){o(this.update===r.default.update,"engine must drive document.state correctly"),r.default.endRendering()}componentDidUpdate(){o(this.update===r.default.update,"engine must drive document.state correctly"),r.default.endRendering()}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(10),r=n(283),s=n(423),a=n(742),l=n(746),c=n(747),d=n(762),u=n(765),h=n(2),p=n(6),g=n(3),m=n(28),f=n(766),y=n(772),v=n(773),b=n(776);class Canvas extends i.PureComponent{constructor(){super(...arguments),this.hudBackgroundSurface=i.createRef(),this.canvasSurface=i.createRef(),this.gridSurface=i.createRef(),this.hudSurface=i.createRef(),this.textEditorSurface=i.createRef(),this.feedbackSurfaceWrapper=i.createRef(),this.feedbackSurface=i.createRef(),this.overCanvasDropZone=e=>{const t=this.hudSurface.current;t&&(t.style.pointerEvents=e?"none":null)}}static calculateState(){const{offset:e,zoom:t,isInteractive:n}=h.default.canvasStore,i=h.default.toolStore.state.mouseCursor,{tool:o,leftPanelContent:r}=h.default.toolStore.state,s=h.default.feedbackStore.isActive;return{canvasOffsetX:e.x,canvasOffsetY:e.y,zoom:t,isInteractive:n,cursor:i,tool:o,leftPanelContent:r,feedbackModeIsActive:s}}componentDidMount(){this.componentDidUpdate()}componentDidUpdate(){const e=this.hudBackgroundSurface.current,t=this.canvasSurface.current,n=this.gridSurface.current,i=this.hudSurface.current,o=this.textEditorSurface.current,r=this.feedbackSurfaceWrapper.current;if(!(e&&n&&i&&o))return;const{zoom:s,canvasOffsetX:a,canvasOffsetY:l,isInteractive:c}=this.state,d=a*s,u=l*s;for(const f of[t?t.style:null,o.style]){if(!f)continue;let e=Math.max(1,s);if(!c){e=parseInt(f.zoom||"1")||1;const t=h.default.canvasStore.liveAnimationTargetZoom;t&&t<s?e=Math.max(1,t):s>8?e=8:s>4&&e<4&&(!t||t<=4)?e=4:s<1&&(e=1)}e=Math.ceil(e),f.zoom=`${e}`,f.webkitTransform=(new WebKitCSSMatrix).scale(s/e).translate(-a,-l);const t=h.default.canvasStore.interactiveZoom,n=Math.min(Math.ceil(Math.pow(11,Math.pow(t,.1)))/(11*t),2);f.setProperty("--framerInternalCanvas-canvasPlaceholderContentScaleFactor",`${n}`)}for(const h of[e.style,i.style,r&&r.style]){if(!h)continue;const e=r&&h===r.style;(c||e)&&(h.webkitTransform=(new WebKitCSSMatrix).translate(-d,-u))}const p=n.style,g=fmod(d,s),m=fmod(u,s);p.webkitTransform=(new WebKitCSSMatrix).translate(-g,-m);for(const h of[e.style,i.style])h&&(c?(h.transition="opacity 0.3s",h.opacity="1"):(h.transitionTimingFunction="ease-in-out",h.transition="opacity 0.05s",h.opacity="0"))}render(){const{cursor:e,tool:t,leftPanelContent:n,feedbackModeIsActive:o}=this.state;return i.createElement(s.CanvasEventTarget,{cursor:e},i.createElement("div",{className:"hudBackgroundSurface",style:k,ref:this.hudBackgroundSurface},i.createElement(a.HUDBackground,null)),i.createElement(m.Experiment,{isNotOn:"sandboxCanvas"},i.createElement("div",{className:"canvasSurface",style:S,ref:this.canvasSurface},i.createElement(r.CanvasRenderer,null))),i.createElement(m.Experiment,{isOn:"sandboxCanvas"},i.createElement(b.IframeRenderer,null)),i.createElement("div",{className:"gridSurface",style:C,ref:this.gridSurface},i.createElement(l.Grid,null)),i.createElement(y.CanvasDropZone,null),i.createElement("div",{className:"hudSurface",style:k,ref:this.hudSurface},i.createElement(c.HUD,null)),i.createElement("div",{className:"textEditorSurface",style:S,ref:this.textEditorSurface},i.createElement(d.HUDTextEditor,null)),i.createElement(v.RulerWrapper,null),o&&i.createElement("div",{className:"feedbackSurfaceEventTarget",style:{position:"absolute",top:0,left:0,width:"100%",height:"100%"}},i.createElement("div",{className:"feedbackSurfaceWrapper",ref:this.feedbackSurfaceWrapper},i.createElement(f.FeedbackSurface,{ref:this.feedbackSurface,zoom:this.state.zoom}))),i.createElement(m.Experiment,{isNotOn:"bottomToolbar"},i.createElement("div",{className:g.framerChromeClassName},i.createElement(u.ZoomIndicator,{leftPanelContent:n,zoom:h.default.canvasStore.zoom,tool:t}))))}}Canvas.engineChangeKeys=p.EngineChangeFlags.CanvasLiveTransform|p.EngineChangeFlags.CanvasZoom|p.EngineChangeFlags.ToolStore|p.EngineChangeFlags.FeedbackStore;const k={position:"absolute",top:0,left:0,width:0,height:0},S=Object.assign({},k,{WebkitFontSmoothing:"antialiased"}),C={position:"absolute",top:0,left:0,bottom:-l.gridOverdraw,right:-l.gridOverdraw,background:"transparent"};function fmod(e,t){return e-Math.floor(e/t)*t}g.theme.addGlobalStyle(".framerInternalUI-canvasPlaceholder, .framerInternalUI-componentPlaceholder, .framerInternalUI-errorPlaceholder",{border:"calc(1px * var(--framerInternalCanvas-canvasPlaceholderContentScaleFactor, 1)) dashed currentColor",borderRadius:"calc(2px * var(--framerInternalCanvas-canvasPlaceholderContentScaleFactor, 1))",fontSize:"calc(12px * var(--framerInternalCanvas-canvasPlaceholderContentScaleFactor, 1))"}),g.theme.addGlobalStyle(".framerInternalUI-canvasPlaceholder",{color:"rgba(0, 153, 255, 1)",backgroundColor:"rgba(0, 153, 255, 0.3)",borderColor:"rgba(0, 153, 255, 0.15)"}),g.theme.addGlobalStyle(".framerInternalUI-componentPlaceholder",{color:"rgb(136, 85, 255)",backgroundColor:"rgba(137, 87, 255, 0.1)",borderColor:"rgba(137, 87, 255, 0.15)"}),g.theme.addGlobalStyle(".framerInternalUI-errorPlaceholder",{color:"rgb(255, 0, 85)",backgroundColor:"rgba(255, 0, 85, .1)",borderColor:"rgba(255, 0, 85, 0.15)",borderStyle:"solid"});const x=o.default(Canvas);t.Canvas=x},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});let i=null;function copyStrokeToChildren(e){const t=e.getAttribute("stroke-width");if(t){let n=e.firstElementChild;for(;n;)n.hasAttribute("stroke-width")||n.setAttribute("stroke-width",t),n=n.nextElementSibling}}t.repairStrokedSVGs=function repairStrokedSVGs(e){e&&window.MutationObserver&&-1!==navigator.appVersion.indexOf("AppleWebKit")&&-1===navigator.appVersion.indexOf("Chrome")&&(i||(i=new MutationObserver(e=>{for(const t of e)for(const e of t.addedNodes)if(e instanceof Element){switch(e.nodeName){case"SVG":case"svg":copyStrokeToChildren(e);continue}if(e.firstChild&&e.firstElementChild)for(const t of e.querySelectorAll("svg[stroke-width]"))t instanceof Element&&copyStrokeToChildren(t)}})),i.observe(e,{attributes:!1,childList:!0,subtree:!0}))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(283);t.default=class ExportContainer extends i.Component{render(){const{root:e}=this.props;return i.createElement("div",{id:"main"},o.createElement(e))}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(4),r=n(12),s=n(1),a=n(5),l=n(215),c=n(42),d=n(3),u=n(74),h=n(41),p=n(173),g=n(2),m=n(44);function getNodeFromEvent(e){return g.default.tree.get(e.currentTarget.getAttribute("data-node"))}const f=g.default.wrapMouseHandler(e=>{if(!m.default.isLeftMouseClick(e))return;const t=getNodeFromEvent(e);t&&(h.hasLock(t)&&t.locked||g.default.tool.enum===a.Tools.Highlight&&(e.shiftKey?g.default.toggleSelection([t.id]):t.isSelected()||g.default.setSelection([t.id]),g.default.setToolEnum(a.Tools.Move)))}),y=g.default.wrapMouseHandler(e=>{const t=getNodeFromEvent(e);t&&o.isShapeContainerNode(t)&&!g.default.shapeModeActive&&g.default.setShapeModeActive(!0)}),v=g.default.wrapMouseHandler(e=>{const t=getNodeFromEvent(e);t&&(h.hasLock(t)&&t.locked||g.default.tool.enum===a.Tools.Highlight&&(e.stopPropagation(),g.default.highlight!==t.id&&(t.isSelected()||g.default.setHighlight(t.id))))}),b=g.default.wrapHandler(e=>{if(e.defaultPrevented)return;const t=getNodeFromEvent(e);t&&(h.hasLock(t)&&t.locked||(t.isSelected()||g.default.setSelection([t.id]),l.showContextMenu(s.Point(e.clientX,e.clientY),g.default.tree,g.default.selection),e.preventDefault()))});t.ScreenTitle=class ScreenTitle extends i.PureComponent{render(){const{node:e,singleSelectedNodeUserComponent:t,isSelected:n,isHighlighted:o,ignoreMouse:a,slotConnect:l,zoom:d}=this.props;if(!e.visible)return null;if(n&&g.default.tool instanceof p.MoveTool&&null!==g.default.tool.commonParentDirectedAtStart)return null;const h=n||o;let m=u.isUserComponent(e)?C:h?S:k;l&&o&&t?m=C:u.isUserComponent(e)?m=C:h&&(m=S);const x=Math.ceil(Math.pow(11,Math.pow(d,.1))),w=x,T=s.Rect.multiply(g.default.tree.convertFrameToCanvas(e),d);let P=T.width-2,E=Math.ceil(Math.min(6*Math.pow(d,.5),Math.ceil(.666*x)));const F=Math.round(T.x+1+.4*Math.min(0,P-w));P<1.5*w&&(P=w,E=Math.floor(.6*E));const M=x+2*E,_=Object.assign({},m,{width:P,willChange:"transform",transform:`translate(${F}px, ${Math.round(T.y-M)}px)`,fontSize:x,lineHeight:"1",paddingTop:E,height:M,cursor:a?"default":void 0});let O=e.name||c.defaultName(e)||"";return r.isMaster(e)?O+="  Master":r.isReplica(e)&&(O+="  Instance"),i.createElement("div",{className:"ScreenTitle","data-node":e.id,onMouseDown:f,onMouseMove:v,onDoubleClick:y,onContextMenu:b,style:_},O)}};const k={position:"absolute",display:"block",overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis",color:d.theme.frameTitle},S=Object.assign({},k,{color:d.theme.tint}),C=Object.assign({},k,{color:d.theme.layerPanelMasterOrReplica})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(1),o=n(4),r=n(4),s=n(687),a=n(130),l=n(7),c=n(87),d=n(92),u=n(197),h=n(73),p=n(37),g=n(165),m=n(72),f=n(69),y=n(50),v=n(40),b=n(57);function sketchLayerToVekter(e,t){return s.default.isArtboard(e)?function sketchArtboardToVekter(e,t){const{tree:n}=t,{x:i,y:r,width:s,height:a}=e.frame,l={parentid:o.NullID,name:e.name,left:i,top:r,width:s,height:a};sketchVisibilityToVekter(e,l),e.hasBackgroundColor&&sketchFillToVekter({_class:"fill",fillType:0,isEnabled:!0,color:e.backgroundColor},l);const c=new d.default(l);n.insertNode(c);const u=copy(t,{parent:c});return e.layers.forEach(e=>sketchLayerToVekter(e,u)),c}(e,t):s.default.isShapeGroup(e)?function sketchShapeGroupToVekter(e,t){const{tree:n,parent:i,local:r,metadata:a}=t;if(!(e.layers.length>1))return function sketchSinglePathShapeGroupToVekter(e,t){const{local:n}=t,i=Object.assign({},n);e.style&&(i.groupStyle=e.style);i.frame=e.frame,i.rotation=e.rotation,i.name=e.name,i.visible=e.isVisible;const o=copy(t,{local:i});e.layers.map(e=>sketchLayerToVekter(e,o))}(e,t);for(const o of e.layers)if(!1===o.isClosed)return sketchNonBooleanShapeGroupToVekter(e,t);if(e.layers.length>1&&a&&a.flattenedShapes){const t=a.flattenedShapes[e.do_objectID];t&&(e=t)}const l=i?i.id:o.NullID,{x:c,y:d,width:p,height:g}=e.frame,m=function sketchShapeGroupToPathBoolean(e){if(0===e.layers.length)return h.PathBooleanType.Join;const t=e.layers[e.layers.length-1];if(t.booleanOperation===s.default.BooleanOperationTypeMap.Subtract)return h.PathBooleanType.Subtract;if(t.booleanOperation===s.default.BooleanOperationTypeMap.Union)return h.PathBooleanType.Unite;if(t.booleanOperation===s.default.BooleanOperationTypeMap.Intersect)return h.PathBooleanType.Intersect;if(t.booleanOperation===s.default.BooleanOperationTypeMap.Difference)return h.PathBooleanType.Exclude;return h.PathBooleanType.Join}(e),f={parentid:l,name:e.name,x:c,y:d,width:p,height:g,rotation:-(e.rotation||0),pathBoolean:m};sketchVisibilityToVekter(e,f),e.style&&(sketchFillToVekterFromStyle(e.style,f,a.bitmapInfo),sketchStrokeToVekter(e.style,f),sketchOpacityToVekter(e.style,f),sketchShadowsToVekter(e.style.shadows,f),sketchInnerShadowsToVekter(e.style.innerShadows,f));const y=new u.default(f);n.insertNode(y,l);const v=Object.assign({},r),b=copy(t,{parent:y,local:v});if(!(e.layers.slice(1).map(e=>e.booleanOperation).filter((e,t,n)=>n.indexOf(e)===t).length>1))return e.layers.filter(e=>!1!==e.isVisible).map(e=>sketchLayerToVekter(e,b)),y;const k=function groupSiblingsByBooleanOperation(e){const t=e.layers.reverse(),n=[];for(let i=0;i<t.length;i++){const e=t[i];0!==i?i!==t.length-1?t[i-1].booleanOperation===e.booleanOperation?n[n.length-1].push(e):n.push([e]):n[n.length-1].push(e):n.push([e])}return n}(e),S=[];return k.forEach((e,t)=>{const i={},o=function sketchBooleanOperationToPathBoolean(e){return e===s.default.BooleanOperationTypeMap.Subtract?h.PathBooleanType.Subtract:e===s.default.BooleanOperationTypeMap.Intersect?h.PathBooleanType.Intersect:e===s.default.BooleanOperationTypeMap.Union?h.PathBooleanType.Unite:e===s.default.BooleanOperationTypeMap.Difference?h.PathBooleanType.Exclude:void 0}(e[0].booleanOperation);o&&(i.pathBoolean=o);const r=new u.default(i);n.insertNode(r,0===t?y.id:S[t-1].id),S.push(r)}),k.forEach((e,n)=>{e.forEach(e=>{const i=Object.assign({},r);sketchLayerToVekter(e,copy(t,{parent:S[n],local:i}))})}),y}(e,t):s.default.isRectangle(e)&&!e.edited&&(!t.parent||t.parent instanceof d.default)?function sketchRectangleToVekter(e,t){const{tree:n,parent:i,local:r,metadata:a}=t,l=i?i.id:o.NullID,{x:c,y:u,width:h,height:p}=e.frame,g={parentid:l,name:e.name,left:c,top:u,width:h,height:p,rotation:-(e.rotation||0),fillEnabled:!1,clip:!1,visible:e.isVisible};sketchVisibilityToVekter(e,g);const f=Object.assign({},r);e.style&&(f.groupStyle=e.style,sketchOpacityToVekter(e.style,g),sketchShadowsToVekter(e.style.shadows,g),sketchInnerShadowsToVekter(e.style.innerShadows,g),sketchFillToVekterFromStyle(e.style,g,a.bitmapInfo),function sketchBorderToVekter(e,t){if(!e.borders||!e.borders[0])return t;Object.assign(t,{borderEnabled:e.borders[0].isEnabled?m.Property.enabled:void 0,borderWidth:e.borders[0].thickness,borderColor:sketchColorToVekter(e.borders[0].color),borderStyle:e.borders[0].fillType===s.default.FillTypeMap.Color?"solid":void 0})}(e.style,g));!0===e.hasClippingMask&&(g.clip=!0);g.radius=e.fixedRadius||0,g.radiusTopLeft=e.points[0].cornerRadius,g.radiusTopRight=e.points[1].cornerRadius,g.radiusBottomRight=e.points[2].cornerRadius,g.radiusBottomLeft=e.points[3].cornerRadius;const y=e.points.some(e=>e.cornerRadius!==g.radius);g.radiusPerCorner=y,applyConstrainedFrame(e.frame,i,g);const v=new d.default(g);return n.insertNode(v,l),v}(e,t):s.default.isLayerWithPath(e)?function sketchShapePathToVekter(e,t){const{tree:n,parent:r,local:c,metadata:d}=t,u=r?r.id:o.NullID,h={parentid:u,name:c.name?c.name:e.name,rotation:-((c.rotation?c.rotation:e.rotation)||0)};sketchVisibilityToVekter(e,h);const{width:p,height:g}=e.frame,m=Object.assign({},e.frame);c.frame&&(m.x=c.frame.x,m.y=c.frame.y);!function sketchFrameToVekterShape(e,t){const{x:n,y:i,width:o,height:r}=e;Object.assign(t,{x:n,y:i,width:o,height:r})}(m,h);const f=e.style||c.groupStyle;s.default.isStyle(f)&&(sketchFillToVekterFromStyle(f,h,d.bitmapInfo),sketchStrokeToVekter(f,h),sketchOpacityToVekter(f,h),sketchShadowsToVekter(f.shadows,h),sketchInnerShadowsToVekter(f.innerShadows,h));h.pathClosed=e.isClosed,h.pathSegments=l.List(e.points.map(e=>(function sketchPointToPathSegment(e,t=1,n=1){const o=parseSketchPointString(e.point,t,n);if(!o)throw new Error(`"${JSON.stringify(e,null," ")}" is not a valid Sketch.Point`);const{x:r,y:s}=o,a={radius:e.cornerRadius,x:r,y:s};if(e.hasCurveTo){const i=parseSketchPointString(e.curveTo,t,n);i&&(a.handleInX=i.x-r,a.handleInY=i.y-s)}if(e.hasCurveFrom){const i=parseSketchPointString(e.curveFrom,t,n);i&&(a.handleOutX=i.x-r,a.handleOutY=i.y-s)}return a.handleMirroring=function parseSketchCurveMode(e){switch(e){case 2:return"symmetric";case 3:case 4:return"disconnected"}return"straight"}(e.curveMode),new i.PathSegment(a)})(e,p,g))),h.visible=e.isVisible&&(void 0===c.visible||c.visible);const y=new a.default(h);return n.insertNode(y,u),y}(e,t):s.default.isText(e)?function sketchTextToVekter(e,t){const{tree:n,parent:i,metadata:r,local:a}=t,d=i?i.id:o.NullID;if(!r.texts)throw new Error("Encountered a text layer that has no metadata associated (zero text records)");const u=e.do_objectID,h=r.texts[u];if(!h)throw new Error(`Encountered a text layer that has no metadata associated (ID ${u})`);let m=h.text;const f=function getTextTransformAttribute(e){if(!e.style)return!1;const t=e.style.textStyle;if(t&&t.encodedAttributes)return t.encodedAttributes.MSAttributedStringTextTransformAttribute;return!1}(e);f===s.default.TextTransformAttribute.UpperCase?m=m.toUpperCase():f===s.default.TextTransformAttribute.LowerCase&&(m=m.toLowerCase());if(a&&a.overrideValues){const t=`${e.do_objectID}_stringValue`;for(const e of a.overrideValues)if(e.overrideName===t){m=e.value;break}}let y=new p.StyledTextDraft(m);const v={};for(const o of h.css){if(0===o.indexOf("/*"))continue;const[e,t]=o.split(": ");v[(b=e,b.replace(/-\w/g,e=>e[1].toUpperCase()))]=t.replace(/;$/g,"")}var b;const{fontSize:k,lineHeight:S}=v;if(k&&S&&k.endsWith("px")&&S.endsWith("px")){const e=parseInt(k.slice(0,-2),10),t=parseInt(S.slice(0,-2),10);v.lineHeight=t/e}switch(p.StyledTextDraft.getRawStylesFromCSS(v).map(e=>{const[t,n]=e.split(":");y=y.adjustStyle(`${t}:`,e=>n)}),v.textAlign){case"center":y=p.StyledTextDraft.setAlignment(y,"center");break;case"right":y=p.StyledTextDraft.setAlignment(y,"right");break;default:y=p.StyledTextDraft.setAlignment(y,"left")}const{width:C,height:x,x:w,y:T}=e.frame,P={parentid:d,name:e.name,styledText:y,width:C,height:x,left:w,top:T,autoSize:0===e.textBehaviour,rotation:-(e.rotation||0)};sketchVisibilityToVekter(e,P),sketchOpacityToVekter(e.style,P),function sketchTextShadowsToVekter(e,t){if(!e||0===e.length)return;t.shadows=t.shadows||l.List([]);for(const n of e)t.shadows=t.shadows.push(new g.Shadow({enabled:n.isEnabled,color:sketchColorToVekter(n.color),x:n.offsetX,y:n.offsetY,blur:n.blurRadius}))}(e.style&&e.style.shadows,P),sketchInnerShadowsToVekter(e.style&&e.style.innerShadows,P),applyConstrainedFrame(e.frame,i,P);const E=new c.default(P);return n.insertNode(E,d),E}(e,t):s.default.isGroup(e)?sketchGroupToVekter(e,t):s.default.isSymbolMaster(e)?function sketchSymbolMasterToVekter(e,t){const{tree:n,parent:i,local:r}=t,s=i?i.id:o.NullID,{width:a,height:l}=e.frame,c={parentid:s,name:e.name,left:0,top:0,width:a,height:l,rotation:-(e.rotation||0),fillEnabled:!1,clip:!1};sketchVisibilityToVekter(e,c);const u=new d.default(c);if(n.insertNode(u,s),e.layers){const n=Object.assign({},r);e.style&&(n.groupStyle=e.style);const i=copy(t,{parent:u,local:n});e.layers.forEach(e=>sketchLayerToVekter(e,i))}return u}(e,t):s.default.isSymbolInstance(e)?function sketchSymbolInstanceToVekter(e,t){const{metadata:n}=t;if(n&&n.detachedSymbols){const i=e.do_objectID,o=n.detachedSymbols[i];if(o)return sketchGroupToVekter(o,t);console.log(`Failed to resolve detached version of symbol ${i}`)}}(e,t):s.default.isBitmap(e)?function sketchBitmapToVekter(e,t){const{tree:n,parent:i,metadata:r}=t,s=i?i.id:o.NullID;if(!e.image||!e.image._ref)return void console.warn("Bitmap without an image. Skipping.",e);const a=e.image._ref,l=r.bitmapInfo[a];if(!l)return void console.log(`Failed to resolve bitmap with reference ${a}`);const{width:c,height:u,x:h,y:p}=e.frame,g={parentid:s,name:e.name,fillImage:l.filename,fillType:"image",width:c,height:u,left:h,top:p,clip:!1};sketchVisibilityToVekter(e,g),sketchOpacityToVekter(e.style,g),sketchShadowsToVekter(e.style&&e.style.shadows,g),sketchInnerShadowsToVekter(e.style&&e.style.innerShadows,g);const m=new d.default(g);return n.insertNode(m,s),m}(e,t):void console.warn("Unhandled Sketch layer:",e)}function sketchNonBooleanShapeGroupToVekter(e,t){const{tree:n,parent:i,local:r}=t,s=i?i.id:o.NullID,{x:a,y:l,width:c,height:d}=e.frame,u={parentid:s,name:e.name,x:a,y:l,width:c,height:d,rotation:-(e.rotation||0)};sketchVisibilityToVekter(e,u);const h=new o.ShapeGroupNode(u);n.insertNode(h,s);const p=Object.assign({},r);e.style&&(p.groupStyle=e.style);const g=copy(t,{parent:h,local:p});return e.layers.forEach(e=>sketchLayerToVekter(e,g)),h}function applyConstrainedFrame(e,t,n){if(e&&t&&y.hasSize(t)&&i.isFiniteNumber(t.width)&&i.isFiniteNumber(t.height)){const i=v.guessConstrainedFrame(e,{width:t.width,height:t.height},void 0,n.autoSize);Object.assign(n,i)}}function sketchGroupToVekter(e,t){const{tree:n,parent:i,local:r}=t,a=i?i.id:o.NullID,{x:l,y:c,width:u,height:h}=e.frame,p={parentid:a,name:e.name,left:l,top:c,width:u,height:h,rotation:-(e.rotation||0),fillEnabled:!1,clip:!1};sketchVisibilityToVekter(e,p);const g=Object.assign({},r);e.style&&(g.groupStyle=e.style,sketchOpacityToVekter(e.style,p),sketchShadowsToVekter(e.style.shadows,p),sketchInnerShadowsToVekter(e.style.innerShadows,p)),applyConstrainedFrame(e.frame,i,p);const m=new d.default(p);n.insertNode(m,a);const f=copy(t,{parent:m,local:g}),y=e.layers.filter(e=>!0===e.hasClippingMask&&s.default.isRectangle(e)&&!1===e.edited);if(0===y.length||y.length>1)return e.layers.forEach(e=>sketchLayerToVekter(e,f)),m;const v=y[0],b=e.layers.filter(e=>e.do_objectID!==v.do_objectID);try{const t=sketchLayerToVekter(v,f);if(t){const e=copy(f,{parent:t});b.forEach(t=>sketchLayerToVekter(t,e))}}catch(k){console.log("Could not process masked layer in group:",k),e.layers.forEach(e=>sketchLayerToVekter(e,f))}return m}function sketchColorToVekter(e){const t=e.alpha;return`rgba(${Math.round(255*e.red)},${Math.round(255*e.green)},${Math.round(255*e.blue)},${t})`}function sketchFillToVekterFromStyle(e,t,n={}){if(e.fills&&e.fills.length){sketchFillToVekter(e.fills[0],t,n)}}function sketchFillToVekter(e,t,n={}){if(0===e.fillType)t.fillEnabled=e.isEnabled,t.fillType="color",t.fillColor=sketchColorToVekter(e.color);else if(1===e.fillType&&e.gradient&&e.gradient.stops.length>1){const{from:n,to:o,gradientType:r}=e.gradient,a=parseSketchPointString(n),c=parseSketchPointString(o);if(void 0===a||void 0===c)throw Error(`Sketch gradient is without a parsable start or end point: ${n}|${o}`);const[d,u]=e.gradient.stops,h=sketchColorToVekter(d.color),p=sketchColorToVekter(u.color),g=l.List([new b.GradientColorStop({value:h,position:0}),new b.GradientColorStop({value:p,position:1})]);t.fillEnabled=e.isEnabled;let m,y=180;if(r===s.default.GradientTypeMap.Radial){const n=i.Point.distance(a,c),o=e.gradient.elipseLength?e.gradient.elipseLength*n:n,r=Math.abs(a.y-c.y)>Math.abs(a.x-c.x),s=r?o:n,l=r?n:o;m={centerAnchorX:a.x,centerAnchorY:a.y,widthFactor:s,heightFactor:l},t.fillType="radial-gradient"}else y=(90+function angleBetweenPoints(e,t){return 180*Math.atan2(t.y-e.y,t.x-e.x)/Math.PI}(a,c))%360,t.fillType="linear-gradient";t.fillLinearGradient=new f.LinearGradient({stops:g,angle:y}),t.fillRadialGradient=new f.RadialGradient(Object.assign({stops:g},m))}else if(4===e.fillType){const i=e.image&&e.image._ref,o=i&&n[i];if(!o)return void console.log(`Failed to resolve bitmap with reference ${i}`);switch(t.fillEnabled=e.isEnabled,t.fillType="image",t.fillImage=o.filename,e.patternFillType){case 2:t.fillImageResize="stretch";break;case 3:t.fillImageResize="fit";break;default:t.fillImageResize="fill"}t.fillImagePixelHeight=o.pixelHeight,t.fillImagePixelWidth=o.pixelWidth}}function sketchStrokeToVekter(e,t){if(e&&e.borders&&e.borders.length){const n=e.borders[0];t.strokeEnabled=n.isEnabled?1:0,t.strokeMiterLimit=e.miterLimit,t.strokeWidth=n.thickness,t.strokeColor=sketchColorToVekter(n.color),t.strokeAlignment=1===n.position?"inside":"center"}else t.strokeEnabled=0}function sketchOpacityToVekter(e,t){e&&e.contextSettings&&(t.opacity=e.contextSettings.opacity)}function sketchVisibilityToVekter(e,t){null===e.isVisible&&void 0===e.isVisible||(t.visible=!!e.isVisible)}function sketchShadowsToVekter(e,t){if(e&&0!==e.length){t.boxShadows=t.boxShadows||l.List([]);for(const n of e)t.boxShadows=t.boxShadows.push(new g.BoxShadow({enabled:n.isEnabled,color:sketchColorToVekter(n.color),x:n.offsetX,y:n.offsetY,blur:n.blurRadius,spread:n.spread||0,inset:!1}))}}function sketchInnerShadowsToVekter(e,t){if(e&&0!==e.length){t.boxShadows=t.boxShadows||l.List([]);for(const n of e)t.boxShadows=t.boxShadows.push(new g.BoxShadow({enabled:n.isEnabled,color:sketchColorToVekter(n.color),x:n.offsetX,y:n.offsetY,blur:n.blurRadius,spread:n.spread||0,inset:!0}))}}t.sketchToVekter=function sketchToVekter(e){if(!s.default.isPasteboardPluginData(e))throw new Error("Failed to parse Sketch pasteboard plugin data");const{version:t,layers:n,metadata:i}=e;if(parseFloat(t)<48.2)throw new Error("Not parsing Sketch data: version is below 48.2");const o=new r.default,a={nodes:[],parent:null,local:{},metadata:i,tree:o};return n.reverse().forEach(e=>sketchLayerToVekter(e,a)),o.commit()};const k=/s*{\s*(-?\d+(\.\d+(e-?\d+)?)?)\s*,\s*(-?\d+(\.\d+(e-?\d+)?)?)\s*}\s*/;function parseSketchPointString(e,t=1,n=1){const i=k.exec(e);if(i&&i.length>4){const e=parseFloat(i[1])*t;if(isNaN(e))throw Error(`"${i[1]}" is not a valid float value`);const o=parseFloat(i[4])*n;if(isNaN(o))throw Error(`"${i[4]}" is not a valid float value`);return{x:e,y:o}}}function copy(e,t){return Object.assign({},e,t)}},function(e,t,n){"use strict";var i;Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.isPasteboardPluginData=function isPasteboardPluginData(e){return"version"in e&&"layers"in e&&isArrayOf(e.layers,isLayer)};class SketchObject{}function isSketchObject(e){return e&&"_class"in e}e.SketchObject=SketchObject,e.isSketchObject=isSketchObject;function isLayer(e){return isArtboard(e)||isShapeGroup(e)||isShapePath(e)||isLayerWithPath(e)||isText(e)||isBitmap(e)||isGroup(e)||isSymbolMaster(e)||isSymbolInstance(e)}function isBitmap(e){return isFrame(e.frame)&&isSketchObject(e)&&"bitmap"===e._class}function isArtboard(e){return isFrame(e.frame)&&isSketchObject(e)&&"artboard"===e._class}function isGroup(e){return isFrame(e.frame)&&isSketchObject(e)&&"group"===e._class}function isShapeGroup(e){return isFrame(e.frame)&&isSketchObject(e)&&"shapeGroup"===e._class}function isSymbolMaster(e){return e&&"symbolMaster"===e._class}function isSymbolInstance(e){return e&&"symbolInstance"===e._class}function isText(e){return isFrame(e.frame)&&isSketchObject(e)&&"text"===e._class}function isShapePath(e){return isArrayOf(e.points,isPoint)&&isFrame(e.frame)&&isSketchObject(e)&&"shapePath"===e._class}function isLayerWithPath(e){return e&&isArrayOf(e.points,isPoint)&&isFrame(e.frame)&&isSketchObject(e)}function isFrame(e){return isSketchObject(e)&&"rect"===e._class}function isPoint(e){return isSketchObject(e)&&"curvePoint"===e._class}let t,n,i,o;function isArrayOf(e,t){return e&&e.reduce((e,n)=>{const i=e&&t(n);return i||console.log(`value ${JSON.stringify(n,null," ")} did not match ${t}`),i},!0)}e.Layer=class Layer extends SketchObject{},e.isLayer=isLayer,e.isBitmap=isBitmap,e.isArtboard=isArtboard,e.isGroup=isGroup,e.isShapeGroup=isShapeGroup,e.isSymbolMaster=isSymbolMaster,e.isSymbolInstance=isSymbolInstance,e.isText=isText,e.isShapePath=isShapePath,e.isLayerWithPath=isLayerWithPath,e.isRectangle=function isRectangle(e){return e&&isArrayOf(e.points,isPoint)&&isFrame(e.frame)&&isSketchObject(e)&&"rectangle"===e._class},e.isColor=function isColor(e){return isSketchObject(e)&&"color"===e._class},e.isFrame=isFrame,e.isPoint=isPoint,e.isStyle=function isStyle(e){return isSketchObject(e)&&"style"===e._class},function(e){e[e.Color=0]="Color",e[e.Gradient=1]="Gradient",e[e.Pattern=4]="Pattern",e[e.Noise=5]="Noise"}(t=e.FillTypeMap||(e.FillTypeMap={})),function(e){e[e.Subtract=1]="Subtract",e[e.Union=0]="Union",e[e.Intersect=2]="Intersect",e[e.Difference=3]="Difference"}(n=e.BooleanOperationTypeMap||(e.BooleanOperationTypeMap={})),function(e){e[e.Linear=0]="Linear",e[e.Radial=1]="Radial",e[e.Angular=2]="Angular"}(i=e.GradientTypeMap||(e.GradientTypeMap={})),function(e){e[e.UpperCase=1]="UpperCase",e[e.LowerCase=2]="LowerCase"}(o=e.TextTransformAttribute||(e.TextTransformAttribute={})),e.isArrayOf=isArrayOf}(i||(i={})),t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(1),o=n(72),r=n(98),s=n(162);t.reduceBorder=function reduceBorder(e,t){if(!r.hasBorder(e))return;const n=o.Property.nonOptional(e.borderEnabled);void 0===t.borderEnabled?t.borderEnabled=n:s.effectDisabledOrHidden(t.borderEnabled,n)?t.borderEnabled=-1:null!==t.borderEnabled&&t.borderEnabled!==n&&(t.borderEnabled=null);const{borderStyle:a,borderColor:l,borderWidth:c}=e;if(o.Property.isEnabled(n)){if(a&&-1===t.borderStyleValues.indexOf(a)&&t.borderStyleValues.push(a),l)if(void 0===t.borderColor)t.borderColor=l,t.borderAlpha=Math.round(100*i.ConvertColor.getAlpha(l)),t.borderWidth=e.borderWidth;else if(null!==t.borderColor&&t.borderColor!==l&&(t.borderColor=null),null!==t.borderWidth&&t.borderWidth!==c&&(t.borderWidth=null),null!==t.borderAlpha){const e=Math.round(100*i.ConvertColor.getAlpha(l));t.borderAlpha!==e&&(t.borderAlpha=null)}}else if(o.Property.isDisabledVisible(n)&&l)if(void 0===t.disabledBorderColor)t.disabledBorderColor=l,t.disabledBorderAlpha=Math.round(100*i.ConvertColor.getAlpha(l)),t.disabledBorderWidth=c;else if(null!==t.disabledBorderColor&&t.disabledBorderColor!==l&&(t.disabledBorderColor=null),null!==t.disabledBorderWidth&&t.disabledBorderWidth!==c&&(t.disabledBorderWidth=null),null!==t.disabledBorderAlpha){const e=Math.round(100*i.ConvertColor.getAlpha(l));t.disabledBorderAlpha!==e&&(t.disabledBorderAlpha=null)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(127);t.reduceBorderPerSide=function reduceBorderPerSide(e,t){i.hasBorderPerSide(e)&&(void 0===t.borderPerSide?(t.borderPerSide=e.borderPerSide,t.borderTop=e.borderTop,t.borderRight=e.borderRight,t.borderBottom=e.borderBottom,t.borderLeft=e.borderLeft):(null!==t.borderPerSide&&t.borderPerSide!==e.borderPerSide&&(t.borderPerSide=null),null!==t.borderTop&&t.borderTop!==e.borderTop&&(t.borderTop=null),null!==t.borderRight&&t.borderRight!==e.borderRight&&(t.borderRight=null),null!==t.borderBottom&&t.borderBottom!==e.borderBottom&&(t.borderBottom=null),null!==t.borderLeft&&t.borderLeft!==e.borderLeft&&(t.borderLeft=null)))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(31),o=n(144),r=n(7),s=n(217);function optionShouldBeEnabled(e,t){return e.enabled&&("svg"!==e.type||t)}t.reduceExport=function reduceExport(e,t){if(t.onlyNodesWithExportIncludesBackground=t.onlyNodesWithExportIncludesBackground&&i.hasExportIncludesBackground(e),i.hasExportIncludesBackground(e)&&(void 0===t.exportIncludesBackground?t.exportIncludesBackground=e.exportIncludesBackground:null!==t.exportIncludesBackground&&t.exportIncludesBackground!==e.exportIncludesBackground&&(t.exportIncludesBackground=null)),!i.hasExport(e))return;t.exportableNodes.push(e);const n=o.isExportableAsSVG(e);!t.canExportAsSVG&&n&&(t.canExportAsSVG=!0);const a=void 0===t.exportRows,l=[];let c=!1;if(function pairExportOptions(e,t,n){const i={},o={},r=[];e.forEach(e=>{-1===r.indexOf(e.id)&&r.push(e.id);let t=o[e.id];t||(t=o[e.id]=[]),t.push(e)}),t.forEach(e=>{const t=s.exportOptionId(e);-1===r.indexOf(t)&&r.push(t);let n=i[t];n||(n=i[t]=[]),n.push(e)}),r.sort().forEach(e=>{const t=i[e]||[],r=o[e]||[],s=Math.max(t.length,r.length);for(let i=0;i<s;i++)n(e,i,r[i]||null,t[i]||null)})}(t.exportRows||[],e.exportOptions,(e,t,i,o)=>{if(c=c||null!==o&&o.enabled,i)o?(i.enabled!==optionShouldBeEnabled(o,n)&&(i.enabled=null),i.nameExtension!==o.nameExtension&&(i.nameExtension=null)):!0===i.enabled&&(i.enabled=null),"svg"!==i.type||!0!==i.enabled||n||(i.enabled=null),l.push(i);else{if(!o)throw new Error("Callback called with two null values");{let i=optionShouldBeEnabled(o,n);i&&!a&&(i=null);const{type:r,scale:s,nameExtension:c,nameExtensionMode:d}=o;l.push({id:e,idOccurrence:t,enabled:i,type:r,scale:s,nameExtension:c,nameExtensionMode:d})}}}),t.exportRows=l,!1!==c){if(void 0===t.exportPreviewNode){let i=e.exportOptions.find(e=>optionShouldBeEnabled(e,n));if(i){"webp"!==i.type&&"html"!==i.type||(i=i.set("type","png"));const n=r.List([i]);t.exportPreviewNode={exportOptions:n,node:e}}}else t.exportPreviewNode=null;(n||1!==e.exportOptions.count()||"svg"!==e.exportOptions.first().type)&&t.exportCount++}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(4);function addToResult(e,t,n,o=!1){for(const r of e)t.has(r.id)||(t.add(r.id),i.isShapeGroupNode(r)||o&&i.isBooleanShapeNode(r)||n.push(r))}t.expandSelectionForShapeProperties=function expandSelectionForShapeProperties(e,t){const n=new Set,o=[],r=new Set,s=[],a=new Set,l=[];addToResult(t,n,o),addToResult(t,a,l,!0);for(const c of t){let t=null,d=null;if(i.isVectorNode(c)?(t=e.getAncestorOfType(c,i.BooleanShapeNode,!0,!0)||c,d=c.id):addToResult([c],r,s),null!==t)if(addToResult(e.getSubtreeNodes(t.id),n,o),i.isShapeGroupNode(t)){const n=[];e.forEach(e=>{if(i.isShapeGroupNode(e)||n.push(e),i.isBooleanShapeNode(e))return!1},t.id),addToResult(n,r,s)}else addToResult([t],r,s);null!==d&&addToResult(e.getSubtreeNodes(d),a,l,!0)}return[o,s,l]}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(4),o=n(119),r=n(1);function addToTargets(e,t){-1===e.indexOf(t)&&e.push(t)}t.reduceNavigationLink=function reduceNavigationLink(e,t,n){if(!o.hasNavigationLink(e))return;if(void 0===n.navigationTransitionBackdrop?n.navigationTransitionBackdrop=e.navigationTransitionBackdropColor:null!==n.navigationTransitionBackdrop&&n.navigationTransitionBackdrop!==e.navigationTransitionBackdropColor&&(n.navigationTransitionBackdrop=null),-1===n.navigationTransitionDirections.indexOf(e.navigationTransitionDirection)&&n.navigationTransitionDirections.push(e.navigationTransitionDirection),!e.navigationTarget)return void addToTargets(n.navigationTargets,null);if(e.navigationTarget===r.NavigateTo.Previous)return void addToTargets(n.navigationTargets,r.NavigateTo.Previous);const s=t.getNode(e.navigationTarget);s?t.getParent(s.id)!==i.NullID?addToTargets(n.navigationTargets,null):(addToTargets(n.navigationTargets,s.id),-1===n.navigationTransitions.indexOf(e.navigationTransition)&&n.navigationTransitions.push(e.navigationTransition)):addToTargets(n.navigationTargets,null)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(129);t.reduceBlending=function reduceBlending(e,t){i.withBlending(e)&&-1===t.blendingValues.indexOf(e.blendingMode)&&t.blendingValues.push(e.blendingMode)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(1),o=n(37);t.reduceText=function reduceText(e,n,r){if(!e)return null;let s=[],a=[];const l=[],c=[];let d,u,h,p=[],g=[];n.forEach(e=>{const t=e.styledText,n=e.cache.isEditable;if(t instanceof o.StyledTextDraft){s=[...s,...t.sizes(n).toArray()],a=[...a,...t.letterSpacings(n).toArray()],l.push(t.lineHeight()),c.push(t.alignment()),p=[...p,...t.colors(n).toArray()];const e=t.fonts(n);g=[...g,...e.size>0?e.toArray():[i.draftStyles.font.default]]}}),new Set(s).size<2&&(d=Math.round(parseFloat(s[0])),Number.isFinite(d)||(d=i.draftStyles.size.default)),new Set(a).size<2&&(u=t.parseValue(a[0])),new Set(l).size<2&&(h=Number(t.parseValue(l[0]).toFixed(4)));let m,f="";new Set(p).size<2&&(f=p[0]||i.draftStyles.color.default),1===new Set(c).size&&(m=c[0]),g=Array.from(new Set(g)),r.textProperties={size:d,letterSpacing:u,lineHeight:h,align:m,color:f,fonts:g}},t.parseValue=e=>{const t=parseFloat(e);return Number.isNaN(t)?0:t}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=/framer\.com/;let o=null,r=null;function disableElement(e){if("about:blank"!==e.src){if(i.test(e.src))return;e.src="about:blank"}"vekter-placeholder"!==e.className&&(e.className="vekter-placeholder")}t.disableMedia=function disableMedia(e){if(e&&window.MutationObserver){o||(o=new MutationObserver(e=>{for(const t of e){const e=t.target;e instanceof Element&&disableElement(e)}})),r||(r=new MutationObserver(e=>{for(const t of e)for(const e of t.addedNodes)if(e instanceof Element){switch(e.nodeName){case"VIDEO":case"AUDIO":disableElement(e),o.observe(e,{attributes:!0,childList:!1,subtree:!1})}if(e.firstChild&&e.firstElementChild)for(const t of e.querySelectorAll("video,audio"))t instanceof Element&&(disableElement(t),o.observe(t,{attributes:!0,childList:!1,subtree:!1}))}})),r.observe(e,{attributes:!1,childList:!0,subtree:!0});for(const t of e.querySelectorAll("video,audio"))t instanceof Element&&(disableElement(t),o.observe(t,{attributes:!0,childList:!1,subtree:!1}))}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(2),o=n(24),r=n(29),s=n(12),a=n(56),l=n(43),c=n(15),d=n(14),u=n(218);function showOnCanvasHandler(e){if(e)return i.default.wrapHandler(()=>{const t=i.default.getNode(e);t&&(i.default.setSelection([e]),l.ContextAction.showNodeOnCanvas(i.default,t))})}function deleteEnabled(e){if(!e)return!1;const t=i.default.getNode(e);return!!t&&(s.isMaster(t)&&!a.TemplateHelper.hasReplicas(i.default.tree,t))}function deleteHandler(e){if(e)return i.default.wrapHandler(()=>{deleteEnabled(e)&&i.default.deleteNode(e)})}function codeActionHandler(e,t){if(e)return()=>{const n=o.componentLoader.componentForIdentifier(e);n&&(t?function copyCodeAction(e){const t=`node_modules/${e.packageIdentifier}/code/${e.file}`;c.getIpcRenderer().send(d.CopyFileContentsAtRelativePath,t)}(n):function editCodeAction(e){u.openCodeComponentFile(i.default.persistedUserDefaults.useInternalEditor,e.file)}(n))}}t.componentContextMenuHandler=function componentContextMenuHandler({id:e,isExternalPackage:t,isCodeComponentNode:n=!1}){return i.default.wrapHandler(i=>{i.preventDefault(),r.Menu.buildFromTemplate([{label:"Show on Canvas",enabled:!n&&!t,click:showOnCanvasHandler(e)},{type:"separator"},{label:t?"Copy Code":"Edit Code",enabled:n,click:codeActionHandler(e,t)},{label:"Delete",visible:!n&&!t,enabled:deleteEnabled(e),click:deleteHandler(e)}]).popup({x:i.clientX,y:i.clientY})})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(3),r=n(13),s=n(428),a=n(6),l=n(9),c=n(121),d=n(711),u=n(717),h=n(725),p=n(2),g=n(188);t.CodeEditorManager=class CodeEditorManager extends i.Component{constructor(e){super(e),this.onToolStoreChange=()=>{const e=this.restoreCurrentFile(),t=this.state.currentFile!==e,{codeFileCreationHeaderIsExpanded:n}=p.default.toolStore.state,i=this.state.headerIsExpanded!==n;if(!t&&!i)return;const o=Object.assign({},this.state,{headerIsExpanded:n});e&&(o.currentFile=e),this.setState(o)},this.onComponentHashChange=()=>{this.didUpdateCurrentFile(this.state.currentFile)},this.onKeyDown=e=>{const{currentFile:t}=this.state;t&&t.hasEdits()&&e.metaKey&&"s"===e.key&&(t.sync(s.saveDocument),e.preventDefault(),e.stopPropagation())},this.onFilesChanged=()=>{this.setState({fileManagerUpdate:h.fileManager.update})},this.selectFile=e=>{const t=Object.assign({},this.state,{selectedFiles:[]});e?(t.selectedFiles.push(e.path),e instanceof c.EditableFile&&(this.didUpdateCurrentFile(e),t.currentFile=e)):(t.currentFile=null,this.currentEditingComponent=null,this.didUpdateCurrentFile(null)),this.setState(t)},this.setCurrent=e=>{this.didUpdateCurrentFile(e),this.setState({currentFile:e,selectedFiles:[e.path]})},this.createFile=e=>{const t=c.createComponentFile(e);if(!t)return;const n=h.fileManager.create(t.path,t.content);this.didUpdateCurrentFile(n),l.triggerEditorCreateFileEvent({filehash:u.hashFileName(n.model)}),this.selectFile(n)},this.saveCurrent=()=>{const{currentFile:e}=this.state;e&&(e.isDisposed()||(this.didUpdateCurrentFile(e),e.sync()))},this.currentEditingComponent=null;const t=this.restoreCurrentFile(),n=t?[t.path]:[];this.state={fileManagerUpdate:h.fileManager.update,currentFile:t,selectedFiles:n,headerIsExpanded:p.default.toolStore.state.codeFileCreationHeaderIsExpanded}}componentWillMount(){h.fileManager.addOnchangeHandler(this.onFilesChanged),document.addEventListener("keydown",this.onKeyDown),document.addEventListener("blur",this.saveCurrent),p.default.changes.observe(a.EngineChangeFlags.ToolStore,this.onToolStoreChange),p.default.changes.observe(a.EngineChangeFlags.ComponentHash,this.onComponentHashChange)}componentWillUnmount(){h.fileManager.removeOnChangeHandler(this.onFilesChanged),document.removeEventListener("keydown",this.onKeyDown),document.removeEventListener("blur",this.saveCurrent),p.default.changes.removeObserver(this.onToolStoreChange),p.default.changes.removeObserver(this.onComponentHashChange)}restoreCurrentFile(){const e=p.default.toolStore.currentEditorFile;if(!e)return null;const t=h.fileManager.get(e);return t||null}didUpdateCurrentFile(e){const t=e?e.path:null,n=e?e.path:null;p.default.processWhenReady(()=>{p.default.toolStore.setCurrentEditingFile(t),p.default.treeStore.setFileInEditor(n)})}sendCurrentEditingComponent(){const{currentFile:e}=this.state;e&&(this.currentEditingComponent=null,this.didUpdateCurrentFile(e))}shouldComponentUpdate(e,t){return!g.isEqual(this.state,t)}render(){const{currentFile:e,selectedFiles:t,headerIsExpanded:n}=this.state,{className:s}=this.props;return i.createElement(i.Fragment,null,i.createElement("div",{className:s},i.createElement(d.FileBrowser,{fileManager:h.fileManager,selectedFiles:t,selectFile:this.selectFile,create:this.createFile,headerIsExpanded:n,setHeaderExpanded:m})),e&&i.createElement("div",{className:"editor",style:{position:"fixed",top:0,left:r.layout.chromeMarginLeft,bottom:r.layout.chromeMarginBottom,right:0,background:o.theme.propertyPanelBackground}},i.createElement(u.MonacoEditor,{files:h.fileManager,file:e,setCurrent:this.setCurrent,viewStateManager:p.default.toolStore})))}};const m=p.default.wrapHandler(e=>{p.default.setCodeFileCreationHeaderIsExpanded(e)})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(7);t.PreviewSettingsDefaults={deviceType:void 0,deviceDescriptor:void 0,skin:void 0,hand:void 0,zoom:-1,rotate:!1,bezel:!1,responsive:!1,touch:!1},t.PreviewSettingsRecord=i.Record(t.PreviewSettingsDefaults);t.PreviewSettings=class PreviewSettings extends t.PreviewSettingsRecord{toJS(){const e=super.toJS();return e.__class=this.constructor.name,e}toJSON(){return this.toJS()}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=new Map;let o=1001;window.addEventListener("message",function receiveMessage(e){i.forEach(t=>{t(e)})},!1),t.addMessageListener=function addMessageListener(e){const t=`${o++}`;return i.set(t,e),t},t.removeMessageListener=function removeMessageListener(e){i.delete(e)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(9),o=n(290),r=n(2),s=n(5),a=n(429),l=n(0),c=n(430),d=a.createMemoryHistory();class PublicStore extends l.Component{constructor(){super(...arguments),this.triggerBrowseEvent=()=>{i.triggerStoreBrowseEvent({store:"public"})},this.state={}}static setCurrentCommand(e){PublicStore.delayedCommand=e}static executeDelayedCommand(){PublicStore.delayedCommand&&(PublicStore.setCurrentCommand(PublicStore.delayedCommand),PublicStore.delayedCommand=void 0)}static goToPage(e){d.push(e),r.default.processWhenReady(()=>r.default.setLeftPanelContent(s.LeftPanelContent.Marketplace))}static goToPageBrowse(){PublicStore.goToPage(o.hrefIndex())}static goToPageRecent(){PublicStore.goToPage(o.hrefRecents()),PublicStore.setCurrentCommand({type:"show_recent"})}static goToPageFavorites(){PublicStore.goToPage(o.hrefFavorites()),PublicStore.setCurrentCommand({type:"show_favorites"})}static goToPagePublished(){PublicStore.goToPage(o.hrefPublished()),PublicStore.setCurrentCommand({type:"show_published"})}static goToPackage(e){PublicStore.goToPage(o.hrefPackage(e)),PublicStore.setCurrentCommand({type:"select_package",packageName:e})}getSnapshotBeforeUpdate(e){return!e.visible&&this.props.visible&&this.triggerBrowseEvent(),null}componentDidUpdate(){}componentDidMount(){PublicStore.setCurrentCommand=e=>this.setState({currentCommand:e}),PublicStore.executeDelayedCommand(),this.triggerBrowseEvent()}render(){return l.createElement(c.Store,{isPrivate:!1,visible:this.props.visible,history:d,command:this.state.currentCommand})}}t.PublicStore=PublicStore},function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))(function(o,r){function fulfilled(e){try{step(i.next(e))}catch(t){r(t)}}function rejected(e){try{step(i.throw(e))}catch(t){r(t)}}function step(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(fulfilled,rejected)}step((i=i.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const o=n(2),r=n(5),s=n(14),a=n(15),l=n(143),c=n(70);t.projectStateService=c.ProjectState.on(l.projectServerConnection).expect(),t.privateStoreService=c.PrivateStoreClient.on(l.projectServerConnection).expect(),t.publicStoreService=c.PublicStoreClient.on(l.projectServerConnection).expect();const d=c.ProjectPackage.on(l.projectServerConnection).expect(),u=o.default.wrapHandler(e=>{o.default.documentSettings.expandComponentPanelPackage(e,{shouldCollapseOthers:!0}),o.default.toolStore.setLeftPanelContent(r.LeftPanelContent.Components),o.default.serverStore.removeFromRecentlyInstalledPackages(e)});t.StoreProjectClient=class StoreProjectClient{constructor(){const e=o.default.serverStore.projectURL;if(!e)throw new Error("Cannot initialize VekterProjectClient if engine.serverStore.projectURL is null");this.projectServerURL=e.toString()}uploadFile(e){return i(this,void 0,void 0,function*(){return d.uploadDesignAsset(e)})}uploadReadme(e){return i(this,void 0,void 0,function*(){return d.uploadReadme({readme:e})})}fetchReadme(){return i(this,void 0,void 0,function*(){const{readme:e}=yield d.fetchReadme();return e})}fetchPackageJson(){return i(this,void 0,void 0,function*(){const{package:e}=yield d.fetchPackageJson();return e})}getImages(){return i(this,void 0,void 0,function*(){const e=(new Date).getTime();return{icon:`${this.projectServerURL}metadata/icon.png?${e}`,artwork:`${this.projectServerURL}metadata/artwork.png?${e}`}})}openUrl(e){a.getIpcRenderer().send(s.ApplicationOpenURL,e)}showReadmeEditor(){a.getIpcRenderer().send(s.ApplicationOpenREADME)}showFilePicker(e){a.getIpcRenderer().send(s.ChooseMetadataImageDialog,{filename:e})}showInstalledPackage(e){u(e)}showMetadataFolder(){a.getIpcRenderer().send(s.ApplicationOpenMetadataFolder)}installPackage(e){return d.addPackageDependency(e)}publishPackage(e){return d.publishPackage(e)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(9),o=n(290),r=n(2),s=n(429),a=n(0),l=n(430),c=n(5),d=s.createMemoryHistory();t.CompanyStore=class CompanyStore extends a.Component{constructor(){super(...arguments),this.triggerBrowseEvent=()=>{this.props.organization&&this.props.organization.features.privateStore?i.triggerStoreBrowseEvent({store:"private"}):i.triggerStoreVisitedPrivateStoreUpsellEvent({})}}static goToPackage(e){d.push(o.hrefPackage(e)),r.default.processWhenReady(()=>r.default.setLeftPanelContent(c.LeftPanelContent.Organization))}getSnapshotBeforeUpdate(e){return!e.visible&&this.props.visible&&this.triggerBrowseEvent(),null}componentDidUpdate(){}componentDidMount(){this.triggerBrowseEvent()}render(){return a.createElement(l.Store,{isPrivate:!0,visible:this.props.visible,history:d,organization:this.props.organization||void 0})}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(23),o=n(2),r=n(4),s=n(175),a=n(95);let l;function getMenuContext(){if(l)return l;const e=o.default.tree,t=o.default.selection,n=e.getNodes(t),i=e.withoutDescendants(n),a=e.getGroundNodes();return{tree:e,selection:t,nodes:n,groundNodes:a,withoutDescendants:i,alignmentEnabled:s.ContextAlignment.alignEnabled(e,i),distributionEnabled:s.ContextAlignment.distributeEnabled(i),singleNode:1===n.length?n[0]:null,onlyTextNodes:n.length>0&&void 0===n.find(e=>!r.isTextNode(e)),onlyShapeNodes:n.length>0&&void 0===n.find(e=>!r.isVectorNode(e))}}a.beforeValidatingActions(()=>{i(void 0===l),l=getMenuContext()}),a.afterValidatingActions(()=>{l=void 0}),t.getMenuContext=getMenuContext},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(52),r={position:"absolute",display:"block",width:15,height:28,WebkitAppRegion:"no-drag"};t.LayerPanelIcon=i.memo(({iconName:e,marginLeft:t,active:n,dimmed:s})=>{const a=Object.assign({},r,{opacity:s?.5:1,left:`${t-6}px`});return i.createElement(o.Icon,{name:e,active:n,width:15,height:28,style:a})})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ready=e=>{switch(document.readyState){case"loading":document.addEventListener("DOMContentLoaded",()=>{window.setTimeout(e)});break;case"interactive":case"complete":e()}},t.dispatchKeyDownEvent=(e,t={})=>{const n=new KeyboardEvent("keydown",Object.assign({bubbles:!0,keyCode:e},t)),i=document.activeElement;i&&i.dispatchEvent(n)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SpinnerIconDataUrl="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAApNJREFUSA2tlUtLlFEYgEe7mtFFQ8NLFBG1SJAwahtiLVy5ceVSEPQH1LZf0Lp9FO1bdYNyI7gyBFcS2kAzilYq3sfxeYZ55Zv6FGfohWfOd97vnPd23u9MXeZoaeb1Q7gPHXAFzsAS5GACxiEPqVKXqs1kmtAPQi+cAtedToz1PJ8ExxPwDl7CAlRImoN7rBiF86ABHTiGAzMIh8n3O+ifwWc4EL0n5TGTYQijvjNSxbUadozInUeGZ3nuh1WYgpIkM+hGMwYajAgdrfUn+AaLoLTCAxiAOxCZxL4RdB+gZMjxEjwHo4hS8Jh5DR9hz0mKaNizegoNEI7Wee6FXJTISG6AUgDr+QImoAiHie+mwZJow/PRps4uwnsnRj8Epqc4voVJJ8eULOtW4BFYYjPpgjc+3IWI2sh/wFeoVl6xYQ48dDGLfjOwc/ygQqz595hUMVouS9QHBm4l6k3HWpnBLqicgVrlCxujSbR1Swd+UDpQYRS/oVaZZ2MWwlZBB9Zdxf+QTYw8SRgq6sAvz7vH6JULEB9USVHFjzZskgPRQR4ayxoXXIdaHdg9HrB2rErByWxZERnYtrWUzD0esDbtTmXPhzXwHrKLxEUbYGbVyDkWWwkdadfqbPmwDXZSCyh2VAf8BM/nOOJH5Y0QopMt2I5U/KO4DZZJB47XwEX+ex0mGroMV8sLwp56gyuGwiyW4SZ4c8bt2cZzO7jBNeqtsRHbeZ1g9krsMbhfYPv/c5gecA+4yAVuitFszE5Hjva872OMdXagF19JIoOYWyozMTI3J0tmA6gLvXPfO1cc/XOqOLe/HbjwD8yCXRD3VNJROEgatiRZMJsKsbZHia3nAdphtq8fkiWyXJbBe8uM1aXKPouNnz2Bm1kwAAAAAElFTkSuQmCC"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SpinnerIconLargeDataUrl="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8CAYAAAA6/NlyAAAABGdBTUEAALGPC/xhBQAAC+5JREFUaAXVm2tsVMcVx/furvHaBr9DcUwpSSGiViolUCUxKYVGfVC+VLQFVVGRSqWWqiiU97ME+MAbgfoBVfQLUvIhErRSojZ9SKhBVA1qqqiBpmrj4JS2LuZR2xi/jXe3v//xndu92BivWYN3pPE875nzn/+ZM3Pnrr3IOIXdu3cniouL6xA/e2Bg4OPxeHx6Op2uJE6mrpgYI/ZEo9Fu0rZkMtnked6/Y7HYB9XV1RdWrlzZS33Og5dLiceOHSvv7+//HDLnp1KpOQCIkwqYB5AIYDWeygoxlQGsvAfgGP0jRNUnqf8rz54tLCz87fr161vVKRchJ4CPHDlSh8JLUXQuSklxD2XROSqQBkx1AkgIAVaFgiaGRJii6sez1t8H+TZ1r27btu1dvzzm5L4A792790kU+yaji01RJXlOUQPsGBaoewHWsxn9jHrqMifsAuXjAP8T6ZjCmADv37+/AhP9FgCeJzrGQsyoXgxnAxiwAmFyyNsEOvlinDazHNLflJSUHF6zZs0NPZBNyBowrD7F4C8R5Xj0vCmoVANLUZS0erGVDeDBx8OWIMCSQzDxvjyNI2e3aevWrefUMNqQFeBDhw4tYa2+iPCoNBAwBQ0mxVRmIgKGyPbjoS9iDRfp0kS8UlRU1Ikj6tEzbW1txTw+hX619JtJ1TzyzyInIXnqQ7vJHczamBrbxlM7/Q9t2bLlpPKjCaMCfOLEiYKWlpbvMNBnUYQxzFQNtPIC6hRk0F7y7wDyHcD9GbPrG40irs/JkycTV69efY7yIuQsQn4Zeck3oOQDC1K9IuF1tsCXRzPWPQGzn5bCyA8ROssBdSlKaDBjmroByr+cNGnSG2wjxiDK3Fc4fPhwCTK/jZAVWJYtIYZzPsPA0uYm4AJ9V23fvr1lpEFHBCxmMbstCJoFYyT/Z5K1BEZjWmb8Fm0/w3u2jTTYWNv27dv3COP/gDG/hoxJRJtnpYzrJkAW8B5MvzgS0/GRlGhvb1+BwMeIjJWScI0kpPYYadvt27d/zKw2jiTnftuQL2+8B8Z/DtPHyX+MaF5cyH35YnpeT0/PXsob/bohyaDmQ6ojERzUlxBQryZkpl0XQKaoly03FhQUvLxz585xBevGVbpp06b3YXoZY8sJOqBqsryIQLVl6P49VQ4XhgXMTD4p8xGtPGQRQQJqVaTnmcl969atuzmc0PGsA/R1nOEKxvgFUfprrTmzFmAx/SPOCi8Mp0fmLFn7gQMHynhgD7NVSBpaI+rADP9x8+bNPx1O2IOuQ9ejjLkUxqWnw+JI7MT8F+3YseNapl6uMagD6NcpFIrcQYIHGUamDvSXysrKRr3nBULHKdPb27sdvd6TeAALS2Ys5w1tN3WhEAKMN3yCWZlHDzNdv2dKE0i8yZbzk1WrVt0OSXiIBbbMXg4s3wfsdfQLNHFsA2Ip6/n5oIFMCDDmuoQ6eeEU+SQzNKDOCEhTPv4w1qzGHyn4JvtdgZSa9DWWNQGK1G3NfD4AfPTo0Vk0PKZG35Qt5QGx+/uNGzf+M/PBiZTnPH0BHV9D1QCPn9ckPMtan+/0DTrw4v55gGr7CTyz8rCtm4c33QMTNU0kEkewwh6Ao7K9SzvvLdZfcnob4IMHD06hYo4qZc48JFYtUv4dM9juHpio6dq1a6/B5glipseWukDxvqDTmgoGmE5P+y34rGREkboUaTfhjNryIQBMp7BOol4pddQUPr2iFkDcN4TBmfSnVVCgk16HZNZi+y/yhMrnQ+A1sQP9f02Uy1a0N6zBYuSrwhAFkA7j06lMZkYYTrImdITLq4DevyI6ImWp5rlJn+FlqDg6ZcqUmSAKOmSgG+jq6mrIKOdFtqKi4i0UlVWaOWcoXXDz5s36KBt3LejtkIyt67ycVKTj32G/P+OBvMhyMOrGUs+BIa6I0mJYa1rp3CgYq2kIBSGjwyWleRrOobdbx5YCUOkTcRxTFTEJ0ySBZWs/zvpGcKJMDmQ1EBXiRO3HIlBWO0e0TwaseWc1uDB58uT/uny+pWynH0GezFn4hE3OS+DrVFFAg9ZuCBcv9zm5lwoJfUAFsLSJWTecsAk0oSzO1lMgX+UaXdrc3Jx3DsvpzjG5A1yGUHU+w0pjuh0YNriH8zHdtWuXvcICTKYcigLch73rdBWKNTU1OpDkZYBJkdgsZjPYFfBmueUeMrb3ZqYcOhJ5iRalwaFXpled/gKtgJm/Is/VSQfd7odCX19fJRU5+y4bEv4ACrz07OKVUSPpwk9Mv8IHhV3y0tp+akhDjgsvXaGO+Rj27NkjD53izmsnqWKEJZrGEdvRq4V9S1c4Ol6qTbORxtN9guyYv8OaoIf0B3De+fPn9Z4QIrGuri4VBWgzd1eGVKAVpScMz9Cnloek85iHxVA9/E984cKFkblz53pVVVXe7NmzJS+6bNmydLy0tLSptbVVtxxybTYQ2QinrxifWmZS8aFV5skf35yDPRgMEaLH9bLApaO6doXVJszZAqDNYwNaZ89P5gnOQE0IlFXG+eRqEaAxReqNU3tbwIUPee/Vvkx4/NSpU3mzH6Ovh++ZxGcgb/r06R5fEgOm+YmEXTkbYBb332B5QKwC1CImLcAFDQ0Nnwmmb4JnTp8+ncAzG0iWaVTAUVkYo3hoWezgTYdemgH6D0Cb8wK4nbrUgbqn9GFa+YkcuKyINjU1FbHXeuXl5UYktx9SOQq7SdoH7+kcCBbwu0Q5q7TPrlvLuvV7xvWbqClfFEtgN8aBySJrNsqnIXtjwmsHP7uwmRAIbvyaYPmKWNb6dcB0ZctH70/B8lRXN9FSbZ944mLWb7BmnY5MhNi19au6ALAKrNnzJKI+iOzR+sakG80vT0TTxqnGsMAKzFim7HF+iCmKbUXWccCuMIYA+yx/KFa1jgVcZq4Ay0Xkv8hs6SZhQgR5Zbafylu3bplOYhg9jWXlubXpQ9/Qe30IsFAA9A8w2ivALspd0yTw1bj60OfHh4mcQ0YVABPEGAAtol8EJ6WTojdt2rSuO/UbYvPqwNe2GWBc4lhWnQ9aXyN0Qd/Y2dn5dubaUJ8HFRhXDqmKWOycLEBTvCGJMDNJttrW4X7NY17sTkXPnDnTvnjx4n5A1kqAz7SlsCy2ywFes2DBgv+cPXvWbhfulDFeZS0pwqOATZBG8MAentnDOWmHMQJht2PDhg36aeKQMMSkXQ9+PHIRwME5WqDdPu33qaK8hK9yVe6Z8U71Kz3GmMG4hQKHU4qy70a037q1W1lZ2a1vTHfTZViTdp3lAS9fvvwVgD8iZrVdyYQc4+rHTOtIpmvR93P1Czw3vku17TCu1mtZR0eHDkPSwUwXlrWLpPWSwDru48evV6Wfe/bOdETA6qxZ5Zj2AsKmCjAeXM5Lgyo11lVPuE3awIb/Qa5+B+JPuCa7Cib1+TaN7zDAAuqDMeDcbvTU1tZeX758uau/E6uV7wlYvTTwpUuXniP7uJtZB1jtQkuwgVBEH7KuwEYz8Ua2jk1jNTY2lrIOS2G1lInW56A0gIxJyvr9iSbeWBRwdOrgJxk3RmJWeiqMCvBg10iE9VqH0Ke1T2sgn3Hbs0W3+qGMvtmkAWuTQL9rlFsodwKiGwvodwd5biZielnH6YAnkQBMKSL0awTtgdoN0qxT3cSkeS5Je1CvvNpxVtez+bFNVoClCD+PeJRkPmh0H2bKCCDRGJbJqww7+pohhbQGbAJULyBKhUkKq0zfCCbr+lk9bQFgsSk5AikL03PUJXnPvbJ69Wp98R91uKuXvpsEPOAVmHoTJf+lPr7y1v1u+bvJulc9mIwQHKN+hhHkea6jvr7+o2zBarysGc5UUi8UAK+jTluTMStTFnCiSNCJx5gT26p3DIv14RjmmaBe7ZKrvqpHdjenqGa2zCEnqEy9RsrfF2AnWL+QAdgsylNZj8Z6LgBLvkwbc27nF/lygFmZr9MvM80JYCcQhfTfaLWUpxHLYERvL1kxzDOyCm1BtzCKNv5LrTVX25z0zClgCXTB38oq8dKlmKT+maOIqB+t6r/UbOOm7wDA+qnvZ53KTHt48+ni/rjjXvupGyfb9H8EoZWUgTuYFQAAAABJRU5ErkJggg=="},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(14),o=n(15),r=n(35);!function(e){e.showSaveDialog=function showSaveDialog(e,t){Promise.resolve().then(()=>{const n=o.getIpcRenderer();n.once(i.ShowSaveDialog,e=>{t(e)}),n.send(i.ShowSaveDialog,e)},r.unhandledError)}}(t.dialog||(t.dialog={}))},function(e,t){e.exports=require("prettier/standalone")},function(e,t){e.exports=require("prettier/parser-typescript")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(3),r=n(219),s=n(221),a=n(77),l=n(434),c=n(64),d=n(121),u=n(715),h=n(716);t.FileBrowser=function FileBrowser({fileManager:e,selectedFiles:t,selectFile:n,create:o,headerIsExpanded:y,setHeaderExpanded:v}){const b=[];let k;return e.root.walk((o,r,s)=>{b.push(i.createElement(u.FileBrowserItem,{key:o.path,fileManager:e,item:o,selectFile:n,active:t.some(e=>e===o.path),indention:r,visible:s}))}),b.length&&(k=i.createElement("div",{className:a.panelScroller,style:p,onClick:()=>n(null)},i.createElement("div",{style:g},b))),i.createElement(s.TabContent,{header:i.createElement(l.TabContentCreationHeader,{title:"Code",createAction:o,createActionTitle:e=>{const{extension:t}=d.nameAndExtensionFor(e);return d.hasValidExtension(t)&&t!==r.tsxExtension?"Create New File":"Create New Component"},createActionEnabled:isValidName(e),externalExpandedState:{isExpanded:y,setExpanded:v}}),placeholder:i.createElement(h.EmptyState,{fileManager:e}),footer:i.createElement("div",{style:m},i.createElement(c.Button,{title:"API Documentation",onClick:openDocumentation,style:f}))},k)};const p={position:"absolute",top:0,left:0,right:0,bottom:0,overflow:"auto",overflowX:"hidden",overflowY:"overlay",WebkitOverflowScrolling:"touch"},g={minHeight:"100%",width:"100%",display:"flex",alignItems:"flex-start",flexDirection:"column",backgroundImage:o.theme.layerPanelRowBackgroundImage},m={position:"relative",width:"100%",padding:10,backgroundColor:o.theme.tabContentAccessoryBackground,borderTop:`1px solid ${o.theme.propertyPanelDivider}`},f={display:"block",padding:"6px 8px",width:"100%",lineHeight:"10px"};function openDocumentation(){window.open("https://www.framer.com/api")}function isValidName(e){return t=>{const{extension:n}=d.nameAndExtensionFor(t),i=n?t:t+r.tsxExtension;return t.length>0&&d.hasValidExtension(i)&&!e.has(i)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(52),r=n(63),s=n(3);class TabContentSearch extends i.Component{render(){const{value:e,onSearch:t,detail:n,position:s="top",placeholder:d="Search"}=this.props;return i.createElement("div",{style:a(s)},i.createElement(o.Icon,{name:"components-search",width:10,height:10,active:!1,style:{marginRight:8}}),i.createElement(r.TextInput,{value:e,onChange:t,constantChange:!0,placeholder:d,className:"searchPlaceholder",containerStyle:l,style:c}),n)}}TabContentSearch.height=37,t.TabContentSearch=TabContentSearch;const a=e=>{const t={height:TabContentSearch.height,width:"100%",position:"relative",backgroundColor:s.theme.tabContentAccessoryBackground,flexShrink:0,display:"flex",alignItems:"center",padding:"0 8px 0 14px"};return"top"===e?t.borderBottom=`1px solid ${s.theme.propertyPanelDivider}`:t.borderTop=`1px solid ${s.theme.propertyPanelDivider}`,t},l={width:100,flexGrow:1},c={width:"100%"}},function(e,t,n){},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(3);t.RadioButtons=class RadioButtons extends i.Component{render(){const{titles:e,style:t,selectedIndex:n,onSelect:o,preventDefaultOnMouseDown:r}=this.props,s=[];return e.forEach((e,t)=>{s.push(i.createElement(RadioButton,{title:e,index:t,key:t,selected:t===n,onSelect:o,preventDefaultOnMouseDown:r}))}),i.createElement("div",{style:t},s)}};class RadioButton extends i.Component{constructor(){super(...arguments),this.onChange=()=>{this.props.onSelect(this.props.index)},this.onMouseDown=e=>{this.props.preventDefaultOnMouseDown&&e.preventDefault()}}render(){const{title:e,selected:t,onSelect:n}=this.props,o=`radio-${e}`;return i.createElement("div",{style:r,onMouseDown:this.onMouseDown},i.createElement("input",{key:o,id:o,type:"radio",checked:t,name:e,value:e,onChange:this.onChange}),i.createElement("label",{key:o+"2",htmlFor:o,style:s},e))}}const r={position:"relative",display:"block",fontSize:"11px",color:o.theme.propertyPanelTitle},s={position:"absolute",marginTop:2}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(52),r=n(121),s=n(3),a=n(1),l=n(29),c=n(15),d=n(14),u=n(216),h=n(63),p=n(436),g=n(222),m=(e,t)=>{l.Menu.buildFromTemplate(e).popup({x:t.x,y:t.y})};function stopPropagation(e){e.stopPropagation()}t.FileBrowserItem=class FileBrowserItem extends i.Component{constructor(){super(...arguments),this.state={isEditing:!1,name:""},this.onClick=e=>{e.stopPropagation();const{item:t,selectFile:n}=this.props;n(t)},this.startRename=()=>{if(!this.canRename())return;const{name:e}=r.nameAndExtensionFor(this.props.item.name);this.setState({isEditing:!0,name:e})},this.canRename=()=>this.props.item instanceof r.EditableFile,this.onContextMenu=e=>{if(this.state.isEditing)return;const{item:t}=this.props,n=t instanceof r.EditableFile,i=[{label:"Copy Code",click:()=>t instanceof r.EditableFile&&u.default.copyCSS(t.model.getValue()),enabled:t instanceof r.EditableFile},{label:"Reveal in Finder",click:()=>c.getIpcRenderer().send(d.RevealInFinder,"code/"+this.props.item.path)},{type:"separator"},{label:"Rename",click:this.startRename,enabled:this.canRename(),visible:n},{label:"Delete",click:()=>this.props.fileManager.remove(this.props.item),enabled:t instanceof r.EditableFile,visible:n}];m(i,a.Point(e.clientX,e.clientY)),e.preventDefault()},this.onTextFieldChange=(e,t)=>{t&&this.rename(e)},this.onTextFieldBlur=(e,t)=>{t?this.setState({isEditing:!1,name:""}):this.rename(e)},this.toggleCollapse=()=>{const{item:e,fileManager:t}=this.props;e instanceof p.Folder&&(e.toggleExpanded(),t.somethingUpdated())}}rename(e){this.setState({isEditing:!1,name:""});const{item:t,selectFile:n}=this.props;e!==t.name&&this.state.isEditing&&(t instanceof r.EditableFile&&t.isDisposed()||(e=r.restoreExtension(e,t.name))!==t.name&&n(this.props.fileManager.rename(t,r.pathjoin(r.dirname(t.path),e))))}render(){const{item:e,active:t,indention:n,visible:a}=this.props,{isEditing:l,name:c}=this.state;if(!a)return null;const d=`1px solid ${s.theme.layerPanelSelection}`,u=l?"white":"transparent",m=l?d:"1px solid transparent",b=l?"black":t?s.theme.layerPanelSelectionText:s.theme.layerPanelText,k=18*n,S=k+15+6,C=S-6,x=Object.assign({},y,{backgroundColor:u,border:m,color:b,left:C,maxWidth:`calc(100% - ${C}px)`});let w;return e instanceof r.EditableFile?(w="code-"+(e.type||"generic"),e.hasErrors()&&(w+="-error")):w="code-folder",i.createElement("div",{className:"file-browser-item",onClick:this.onClick,onDoubleClick:this.startRename,onContextMenu:this.onContextMenu,style:{position:"relative",width:"100%",height:28,display:"flex",alignItems:"center",padding:"0 6px",backgroundColor:t?s.theme.layerPanelSelection:"transparent",color:t?s.theme.layerPanelSelectionText:s.theme.layerPanelText,cursor:"normal"}},e instanceof p.Folder&&i.createElement("div",{onMouseDown:this.toggleCollapse,onClick:stopPropagation,style:indentationIndicatorWrapper(k)},g.collapseIndicator(!e.isExpanded(),{active:t,style:{marginLeft:5,height:"100%"}})),i.createElement(o.Icon,{name:w,active:t,width:15,height:28,style:Object.assign({},v,{left:S})}),i.createElement("div",{style:f},i.createElement(h.TextInput,{type:h.TextInputType.Field,value:l?c:e.name,placeholder:"Name",onChange:this.onTextFieldChange,onBlur:this.onTextFieldBlur,enabled:l,blurOnEnter:!0,autoFocus:!0,className:`layerPanelPlaceholder${t?" active":""}`,style:x})))}};const f={position:"absolute",top:1,left:24,bottom:1,right:4},y={height:22,margin:"2px 0 0 0",borderRadius:3,width:"100%",lineHeight:"1",padding:"0 0 2px 4px"},v={position:"absolute",display:"block",width:15,height:28,WebkitAppRegion:"no-drag"};function indentationIndicatorWrapper(e){return{position:"absolute",left:e,width:20,height:"100%",zIndex:1}}},function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))(function(o,r){function fulfilled(e){try{step(i.next(e))}catch(t){r(t)}}function rejected(e){try{step(i.throw(e))}catch(t){r(t)}}function step(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(fulfilled,rejected)}step((i=i.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const o=n(0),r=n(223),s=n(145),a=n(3);t.EmptyState=class EmptyState extends o.Component{constructor(){super(...arguments),this.state={error:null,loading:!1},this.codeEditorEmptyStates=[{icon:"nux-code",header:"Code",text:["Create and edit all your",o.createElement("br",{key:"1"}),"code components here."],actionText:"Get Examples",action:()=>this.getExamples()}],this.getExamples=()=>i(this,void 0,void 0,function*(){const e=this.props.fileManager.sync;if(e){this.setState({loading:!0});try{yield e.createExampleFiles()}catch(t){this.setState({error:t.message})}}else this.setState({error:"Missing way to get files"})})}render(){const{error:e,loading:t}=this.state;if(e)return o.createElement("div",{style:l},o.createElement("p",{style:c},"Error loading examples: ",e));const{fileManager:n}=this.props;return t||n.isLoading?o.createElement(s.ActivityIndicator,null):o.createElement(r.PanelEmptyState,{steps:this.codeEditorEmptyStates})}};const l={width:"100%",display:"flex",alignItems:"center",justifyContent:"center"},c={fontWeight:300,fontSize:"11px",lineHeight:1.6,textAlign:"center",color:a.theme.componentsEmptyText,cursor:"default",margin:2,padding:"0 10px",width:208}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(718),r=n(146),s=n(719),a=n(428),l=n(109),c=n(6),d=n(9),u=n(29),h=n(720),p=n(721),g=n(437),m=n(102),f=n(2),y=n(35),v=n(723);function lineHeightForFontSize(e){return e+7}let b=!0;function hashFileName(e){return o("-!-salt-x-"+e.uri.fsPath)}r.editor.setTheme(window.hasDarkAppearance?s.dark:s.light),f.default.changes.observe(c.EngineChangeFlags.DocumentSettings,()=>{const e=f.default.documentSettings.hasDarkAppearance;r.editor.setTheme(e?s.dark:s.light)}),t.hashFileName=hashFileName;t.MonacoEditor=class MonacoEditor extends i.Component{constructor(){super(...arguments),this.editorDiv=null,this.editor=null,this.start=Date.now(),this.safariMouseWorkaroundX=0,this.safariMouseWorkaroundY=0,this.safariMouseMoveWorkaround=e=>{if("mousemove"!==e.type)return;const t=e.clientX,n=e.clientY;e.metaKey&&this.safariMouseWorkaroundX===t&&this.safariMouseWorkaroundY===n&&(e.preventDefault(),e.stopImmediatePropagation()),this.safariMouseWorkaroundX=t,this.safariMouseWorkaroundY=n},this.save=()=>{const{file:e,viewStateManager:t}=this.props;this.editor&&t.addEditorViewState(e.path,this.editor.saveViewState()),e.hasEdits()&&e.sync()},this.restoreEditorViewState=()=>{const{viewStateManager:e,file:t}=this.props;if(!this.editor)return;const n=e.getEditorViewState(t.path);n&&this.editor.restoreViewState(n)},this.openCodeEditor=({resource:e,options:t},n)=>{const i=e.path.startsWith("/")?e.path.slice(1):e.path,o=this.props.files.get(i);return o?(this.editorSetModel(o.model),n.setSelection(t.selection),n.revealLine(t.selection.startLineNumber),n.focus(),this.props.setCurrent(o),{getControl:()=>n}):null},this.setEditorDiv=e=>{if(this.editor&&(this.editor.dispose(),this.editor=null),this.editorDiv=e,!e)return window.removeEventListener("resize",this.layout),void f.default.changes.removeObserver(this.configurationChanged);window.addEventListener("resize",this.layout),f.default.changes.observe(c.EngineChangeFlags.UserDefaultsStore,this.configurationChanged),p.startEditorActivityCounter();const t={};try{const e=window.require("vs/editor/standalone/browser/standaloneServices").StaticServices.codeEditorService.get();e.openCodeEditor=this.openCodeEditor,t.codeEditorService=e}catch(l){m.log.warn("[monaco] unable to find StaticServices",l)}const n=f.default.persistedUserDefaults.editorFontSize,i=this.editor=r.editor.create(e,{extraEditorClassName:v.monacoEditor,contextmenu:!1,language:"javascript",minimap:{enabled:!1},fontFamily:"Input Mono, Menlo, monospace",fontSize:n,lineHeight:lineHeightForFontSize(n),lineNumbersMinChars:5,disableMonospaceOptimizations:!0,folding:!1,roundedSelection:!1,lineDecorationsWidth:28,iconsInSuggestions:!0,wordWrap:"bounded",wordWrapColumn:120,scrollbar:{useShadows:!1,verticalScrollbarSize:6,horizontalScrollbarSize:6}},t),o=i.getContribution("editor.linkDetector");o&&(o.openerService.open=e=>window.open(e.toString())),i.onDidChangeModel(()=>{i.changeViewZones(e=>{e.addZone({afterLineNumber:0,heightInPx:20,domNode:document.createElement("div")})});const e=i.getModel();e&&g.updateModelErrors(e),h.addErrorLineMarginOverlay(i),p.signalEditorActivity()}),i.onDidChangeModelContent(()=>{this.props.file.markAsEdited(),p.signalEditorActivity()}),i.onKeyDown(e=>{p.signalEditorActivity();const{file:t}=this.props;if(e.metaKey&&"s"===e.browserEvent.key){if(!t.hasEdits())return;t.sync(a.saveDocument),e.preventDefault(),e.stopPropagation()}if("Escape"===e.browserEvent.key){if(document.querySelector(".editor-widget.suggest-widget.visible"))return;const e=i.getAction("editor.action.triggerSuggest");e&&e.run().then(null,y.unhandledError)}if(e.metaKey&&191===e.browserEvent.keyCode&&i){const t=i.getAction("editor.action.commentLine");e.preventDefault(),e.stopPropagation(),t.run().then(null,y.unhandledError)}}),i.onMouseDown(e=>{p.signalEditorActivity()}),i.onContextMenu(e=>{const t=i.getAction("editor.action.goToDeclaration"),n=i.getAction("editor.action.changeAll"),o=i.getAction("editor.action.referenceSearch.trigger"),r=i.getAction("editor.action.clipboardCutAction"),s=i.getAction("editor.action.clipboardCopyAction"),a=[];[t,n,o,null,r,s].forEach(e=>e?a.push({label:e.label,click:()=>e.run()}):a.push({type:"separator"})),u.Menu.buildFromTemplate(a).popup({x:e.event.posx,y:e.event.posy}),e.event.preventDefault(),e.event.stopPropagation()});const s=this.props.file.model;b&&(b=!1,this.workaroundFirstRenderErrorLines(s)),this.editorSetModel(s)},this.configurationChanged=()=>{if(!this.editor)return;const e=f.default.persistedUserDefaults.editorFontSize;if(this.editor.getConfiguration().fontInfo.fontSize===e)return;const t=lineHeightForFontSize(e);this.editor.updateOptions({fontSize:e,lineHeight:t})},this.layout=()=>{this.editor&&this.editor.layout()}}componentDidMount(){-1!==navigator.appVersion.indexOf("AppleWebKit")&&-1===navigator.appVersion.indexOf("Chrome")&&(window.addEventListener("mousemove",this.safariMouseMoveWorkaround,!0),this.editor&&(this.restoreEditorViewState(),this.editor.focus()))}componentWillUnmount(){if(window.removeEventListener("mousemove",this.safariMouseMoveWorkaround),!this.editor)return;const e=this.editor.getModel();if(!e)return;this.save();const t=Math.round((Date.now()-this.start)/1e3);d.triggerEditorCloseFileEvent({filehash:hashFileName(e),seconds:t})}editorSetModel(e){if(!this.editor)return;const t=this.editor.getModel();if(t){const e=Math.round((Date.now()-this.start)/1e3);d.triggerEditorCloseFileEvent({filehash:hashFileName(t),seconds:e})}const n=e;this.start=Date.now(),d.triggerEditorOpenFileEvent({filehash:hashFileName(n)}),this.editor.setModel(n)}workaroundFirstRenderErrorLines(e){const t=["typescript","runtime"].map(t=>{const n=r.editor.getModelMarkers({resource:e.uri,owner:t});return r.editor.setModelMarkers(e,t,[]),{owner:t,markers:n}});setTimeout(()=>{t.forEach(({owner:t,markers:n})=>{r.editor.setModelMarkers(e,t,n)})},100)}shouldComponentUpdate(e,t){return!l.default(this.props,e)&&(this.save(),!0)}componentDidUpdate(){this.restoreEditorViewState()}render(){const{file:e}=this.props,t=e.model;return this.editor&&t!==this.editor.getModel()&&(this.editorSetModel(this.props.file.model),this.editor.focus()),i.createElement("div",{className:"editor",ref:this.setEditorDiv,style:{position:"absolute",width:"100%",height:"100%"}})}}},function(e,t){e.exports=require("md5")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(146),o=n(241);function makeTheme(e,t,n,o){return i.editor.defineTheme(e,{base:t,inherit:!0,rules:[{token:"",foreground:n.default},{token:"identifier",foreground:n.default},{token:"variable",foreground:n.default},{token:"type",foreground:n.default},{token:"metatag",foreground:n.default},{token:"meta",foreground:n.default},{token:"key",foreground:n.default},{token:"delimiter",foreground:n.default},{token:"meta.object-literal.key",foreground:n.default},{token:"storage.type.function.arrow",foreground:n.default},{token:"annotation",foreground:n.grayFade},{token:"comment",foreground:n.grayFade},{token:"punctuation.definition.comment",foreground:n.grayFade},{token:"prolog",foreground:n.grayFade},{token:"doctype",foreground:n.grayFade},{token:"cdata",foreground:n.grayFade},{token:"regex",foreground:n.grayFade},{token:"important",foreground:n.grayFade},{token:"punctuation",foreground:n.gray},{token:"meta.brace",foreground:n.gray},{token:"keyword.operator",foreground:n.gray},{token:"string",foreground:n.purple},{token:"punctuation.definition.string",foreground:n.purple},{token:"string.value.json",foreground:n.purple},{token:"selector",foreground:n.purple},{token:"metatag",foreground:n.purple},{token:"attribute",foreground:n.purple},{token:"char",foreground:n.purple},{token:"builtin",foreground:n.purple},{token:"inserted",foreground:n.purple},{token:"punctuation.definition.template-expression",foreground:n.purpleFade},{token:"atrule",foreground:n.blue},{token:"attr-value",foreground:n.blue},{token:"keyword",foreground:n.blue},{token:"variable.other.property",foreground:n.blue},{token:"entity",foreground:n.lightBlue},{token:"variable.other.object",foreground:n.lightBlue},{token:"support.type.primitive",foreground:n.lightBlue},{token:"string.key.json",foreground:n.lightBlue},{token:"storage",foreground:n.teal},{token:"variable.language.this.tsx",foreground:n.pink},{token:"boolean",foreground:n.orange},{token:"class-name",foreground:n.orange},{token:"constant.language",foreground:n.orange},{token:"property",foreground:n.orange},{token:"tag",foreground:n.orange},{token:"number",foreground:n.orange},{token:"constant",foreground:n.orange},{token:"meta.delimiter",foreground:n.orange},{token:"symbol",foreground:n.orange},{token:"deleted",foreground:n.orange},{token:"entity.name.type",foreground:n.yellow},{token:"entity.name.function",foreground:n.yellow},{token:"entity.name.type.interface",foreground:n.yellow},{token:"entity.name.type.module",foreground:n.yellow},{token:"entity.other.inherited-class",foreground:n.yellow},{token:"support.class",foreground:n.yellow},{token:"emphasis",fontStyle:"italic"},{token:"strong",fontStyle:"bold"}],colors:o}),e}function stripHashtags(e){const t=Object.assign({},e);for(const n of Object.keys(t)){const e=t[n];t[n]=e.slice(1)}return t}t.light=makeTheme("framer-light","vs",stripHashtags(o.lightSyntaxColors),{"editor.background":"#FDFDFD","editorIndentGuide.background":"#FDFDFD","editorLineNumber.foreground":"#D5D5D5","editorLineNumber.activeForeground":"#999999","editorIndentGuide.activeBackground":"#DDDDDD","editor.lineHighlightBackground":"#FAFAFA","editor.selectionBackground":"#E5E5E5","editor.wordHighlightBackground":"#E5E5E5","editor.wordHighlightStrongBackground":"#E5E5E5","editorBracketMatch.background":"#E5E5E5","editorSuggestWidget.selectedBackground":"#EEEEEE","editorSuggestWidget.foreground":"#777777","editorSuggestWidget.highlightForeground":"#666666","editor.findMatchHighlightBackground":"#E6F1FE","editor.findMatchBackground":"#ADD6FF"}),t.dark=makeTheme("framer-dark","vs-dark",stripHashtags(o.darkSyntaxColors),{"editor.background":"#181818","editorIndentGuide.background":"#181818","editorLineNumber.foreground":"#333333","editorLineNumber.activeForeground":"#777777","editorIndentGuide.activeBackground":"#333333","editor.lineHighlightBackground":"#151515","editor.selectionBackground":"#444444","editor.wordHighlightBackground":"#333333","editor.wordHighlightStrongBackground":"#333333","editorBracketMatch.background":"#444444","editorSuggestWidget.selectedBackground":"#333333","editorSuggestWidget.foreground":"#999999","editorSuggestWidget.highlightForeground":"#EEEEEE","editor.findMatchHighlightBackground":"#2E343A"})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=window.require("vs/editor/browser/view/viewOverlays").MarginViewOverlays,o=window.require("vs/editor/browser/view/dynamicViewOverlay").DynamicViewOverlay;class ErrorLineMarginOverlay extends o{constructor(e){super(),this._context=e,this.errorLines=new Set,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),super.dispose()}onConfigurationChanged(){return!0}onDecorationsChanged(){return!0}onFlushed(){return!0}onLinesChanged(){return!0}onLinesDeleted(){return!0}onLinesInserted(){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(){return!0}prepareRender(e){this.errorLines.clear(),e.getDecorationsInViewport().forEach(e=>{e.options.isWholeLine&&"runtimeErrorLine"===e.options.className&&this.errorLines.add(e.range.startLineNumber)})}render(e,t){return this.errorLines.has(t)?"<div class='runtimeErrorLine' style='position:absolute;width:100%;height:100%'></div>":""}}t.addErrorLineMarginOverlay=function addErrorLineMarginOverlay(e){const t=e;try{const e=t._modelData.view;if(e.viewParts.find(e=>e instanceof ErrorLineMarginOverlay))return;const o=e.viewParts.find(e=>e instanceof i),r=new ErrorLineMarginOverlay(e._context);o._dynamicOverlays.unshift(r)}catch(n){console.warn("failed to add error line margin overlay, feature disabled",n)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(9),o=5e3;let r=!1,s=0,a=0;t.signalEditorActivity=function signalEditorActivity(){s=Date.now()},t.startEditorActivityCounter=function startEditorActivityCounter(){r||(r=!0,setInterval(()=>{(Date.now()-s)/1e3>30||(a+=o/1e3)<60||(a-=60,i.triggerEditorActive6030Event({}))},o))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});let i=null,o=null,r=null,s=null;const a="//# framerSourceMap=",l={},c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";for(let d=0;d<c.length;d++)l[c.charCodeAt(d)]=d;function errorFromFramerComponentScript(e,t,n,i,o){const r=function getComponentMappings(e){if(s&&s.script===e)return s;s={script:e,maps:[]};let t=0,n=1;for(;;){const i=e.indexOf("\n",t);if(i<0)return s;if("#"===e[t+2]&&"f"===e[t+4]){const o=e.slice(t,i);if(o.startsWith(a)){const e=o.slice(a.length);s.maps.push({encoded:e,line:n+1,map:void 0})}}n+=1,t=i+1}}(e);let c;for(const s of r.maps){if(s.line>t)break;c=s}if(!c)return{functionName:i,lineNumber:t,colNumber:n,fileName:o,userCode:!1};c.map||(c.map=JSON.parse(atob(c.encoded)));const d=c.map;if(!d)throw Error("assert");o=d.sources[0]||d.file||o;const u=t-c.line,[h,p]=function translateUsingMappings(e,t,n){let i=0,o=0,r=0,s=0,a=0,c=0,d=0;for(let u=0,h=e.length;u<h;u++){const h=e.charCodeAt(u);if(44===h)a=0;else if(59===h){if(i>=t)return[r+1,s+1];i+=1,o=0,a=0}else{const e=l[h];if(void 0===e)continue;if(d|=(31&e)<<c,32&e){c+=5;continue}const u=1&d;d>>=1;const p=u?-d:d;if(0===a){if(o+=p,i>=t&&o>n)return[r+1,s+1]}else 1===a||(2===a?r+=p:3===a&&(s+=p));a++,d=0,c=0}}return[-1,0]}(d.mappings,u,n);return h>=0&&(t=h,n=p),{functionName:i,lineNumber:t,colNumber:n,fileName:o,userCode:!0}}function parseStackElement(e){const t=function parseStackElementInfo(e){const t={functionName:"",fileName:"",lineNumber:0,colNumber:0};let n=/^\s*([^@]+)@(.*):(\d+):(\d+)$/.exec(e);return n?(t.functionName=n[1].trim(),t.fileName=n[2].trim(),t.lineNumber=parseInt(n[3]),t.colNumber=parseInt(n[4]),t):(n=/^\s*at ([^(]+)\((.*):(\d+):(\d+)\)$/.exec(e))?(t.functionName=n[1].trim(),t.fileName=n[2].trim(),t.lineNumber=parseInt(n[3]),t.colNumber=parseInt(n[4]),t):(n=/^\s*at (.*):(\d+):(\d+)$/.exec(e))?(t.fileName=n[1].trim(),t.lineNumber=parseInt(n[2]),t.colNumber=parseInt(n[3]),t):(n=/^\sat (.*)$/.exec(e))?(t.functionName=n[1].trim(),t):(t.functionName=e.trim(),t)}(e),{lineNumber:n,colNumber:i,functionName:s}=t;let{fileName:a}=t;if(function isComponentBuildFile(e){return e===r||"index/build.js"===e||"undefined"===e}(a)){const e=o;if("string"==typeof e){const t=errorFromFramerComponentScript(e,n,i,s,a);if(t)return(a=t.fileName).startsWith("../code/")?a=a.slice("../code/".length):a.startsWith("./code")?a=a.slice("./code".length):a.startsWith("./")&&(a=a.slice("./".length)),Object.assign({},t,{fileName:a})}}return{functionName:s,fileName:a,lineNumber:n,colNumber:i,userCode:!1}}function parseStack(e){return e?(function updateErrorGlobals(){const e=window;i=String(e.componentHash||""),o=e.componentScript||null,r=e.componentSrc||null}(),e.split("\n").map(parseStackElement).filter(e=>e)):null}function parseError(e,t){let n=e.name?e.name+": "+e.message:e.message;n=n.split("\n")[0].trim();const i=parseStack(e.stack);if(i&&i.length>0){const e=i.find(e=>e.userCode)||i[0];return{message:n,fileName:e.fileName,lineNumber:e.lineNumber,colNumber:e.colNumber,stack:i}}if(t){return{message:n,fileName:t.filename,lineNumber:t.lineno,colNumber:t.colno}}return{message:n,fileName:"",lineNumber:-1,colNumber:-1}}t.errorFromFramerComponentScript=errorFromFramerComponentScript,t.parseStackElement=parseStackElement,t.parseStack=parseStack,t.parseError=parseError,t.translateErrorEvent=function translateErrorEvent(e){return e.error?parseError(e.error,e):{message:"",fileName:"",lineNumber:-1,colNumber:-1}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.monacoEditor="monacoEditor_m11188tw",n(724)},function(e,t,n){},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(146),o=n(6),r=n(726),s=n(727),a=n(728),l=n(433),c=n(729),d=n(437),u=n(102),h=n(2),p=n(121),g=n(35),m=new s.MonacoModelFactory;t.fileManager=new r.FileManager(m);const f=new a.SimpleFileSync(t.fileManager);h.default.changes.observe(o.EngineChangeFlags.ServerStore,()=>{const{projectURL:e}=h.default.serverStore;if(e){const t=e.toString();if(c.installTextmateGrammars(new URL("/_app/resources/Vekter/",e).toString()).catch(g.unhandledError),f.serverURL===t)return;f.connect(t,2e3)}else f.disconnect()}),h.default.changes.observe(o.EngineChangeFlags.ToolStore,()=>{const e=h.default.toolStore.takeEditorCommand();if(!e)return null;const{name:n,content:i,useExisting:o}=e,r=!o;let s=t.fileManager.get(n);s&&(o||void 0===i)?(h.default.toolStore.isCodeEditorOpen()||r)&&h.default.toolStore.setCurrentEditingFile(s.path):void 0!==i&&(s=t.fileManager.create(n,l.formatCode(i)),(h.default.toolStore.isCodeEditorOpen()||r)&&h.default.toolStore.setCurrentEditingFile(s.path))}),h.default.changes.observe(o.EngineChangeFlags.ServerStore,()=>{t.fileManager.packageJsonDepedencies=h.default.serverStore.packages}),h.default.changes.observe(o.EngineChangeFlags.ComponentHash,()=>p.updateFileTypes(t.fileManager)),d.installErrorManager();const y=/Cannot find module '([^']*)'/;const v=i.editor.setModelMarkers;i.editor.setModelMarkers=function(e,n,o){o=function filterImportErrors(e){const n=m.hasLibrary("react"),i=m.hasLibrary("framer");return n&&i?e:0===e.length?e:(u.loggingAtDebug()&&u.log.debug("[monaco] filtering imports:",{hasReact:n,hasFramer:i},e),e.filter(e=>{const o=y.exec(e.message);if(!o)return!0;const r=o[1];return!r||("react"===r?n:"framer"===r?i:!r.startsWith("../../")&&!t.fileManager.hasModule(r))}))}(o),v(e,n,o);const r=t.fileManager.get(e.uri.path.slice(1));if(r){const n=i.editor.getModelMarkers({resource:e.uri}).length>0;r.hasErrors()!==n&&(r.setHasErrors(n),t.fileManager.somethingUpdated()),r.backgroundSyncSoon()}};const b=new Map;if(location.toString().startsWith("file:")){let e="monaco/dev";try{e=window.require.getConfig().paths.vs.slice(0,-3)}catch(x){}const t=window.MonacoEnvironment||{};window.MonacoEnvironment=t,t.getWorkerUrl=function(t,n){const i=t+"-"+n;let o=b.get(i);if(o)return o;const r=new URL("/_app/resources/Vekter/"+e,h.default.serverStore.projectURL).toString(),s=new Blob([`self.MonacoEnvironment={baseUrl:"${r}"};importScripts("${r+"/vs/base/worker/workerMain.js"}");`],{type:"text/javascript"});return o=URL.createObjectURL(s),b.set(i,o),o}}const k=i.languages.typescript,S={noEmit:!0,target:k.ScriptTarget.ES2018,allowJs:!0,allowNonTsExtensions:!0,allowSyntheticDefaultImports:!0,alwaysStrict:!0,jsx:k.JsxEmit.React,moduleResolution:k.ModuleResolutionKind.NodeJs,module:k.ModuleKind.CommonJS,resolveJsonModule:!0,typeRoots:["node_modules/@types"]};k.typescriptDefaults.setCompilerOptions(S),k.javascriptDefaults.setCompilerOptions(S),k.typescriptDefaults.setEagerModelSync(!0),k.javascriptDefaults.setEagerModelSync(!0);const C={provideDocumentFormattingEdits(e){try{const t=l.formatCode(e.getValue());return[{range:e.getFullModelRange(),text:t}]}catch(x){return[]}}};i.languages.registerDocumentFormattingEditProvider("javascript",C),i.languages.registerDocumentFormattingEditProvider("typescript",C),k.typescriptDefaults.addExtraLib('\ndeclare module "framer/resource" {\n    /**\n     * A helper function for generating urls to files in the current Framer\n     * project or package. When used from within a code component it will\n     * ensure the path is correct regardless of the render environment.\n     *\n     * ```\nimport { Frame } from "framer"\nimport { url } from "framer/resource"\n\nexport function MyComponent() {\n  return <Frame image={url("./code/images/background.png")} size="100%" />\n}\n```\n     *\n     * @param src - Takes any number of path segments as arguments and will\n     *              join them together.\n     * @returns An absolute url string.\n     */\n    export function url(...src: string[]): string\n}\n',"framer/resource")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(121),o=n(436);t.FileManager=class FileManager{constructor(e){this.factory=e,this.update=0,this.isLoading=!0,this.packageJsonDepedencies=[],this.handlers=[],this.files=[],this.sync=null,this.root=new o.Folder(".")}setSync(e){return this.sync=e,this.files}create(e,t=""){e=this.getUniqueFileName(e);const n=new i.EditableFile(this,e,t);return this.files.push(n),n.sync(),this.root.createFolders(n.folders).addFile(n),n}add(e){return this.files.push(e),this.localChanged(e),this.root.createFolders(e.folders).addFile(e),e}rename(e,t){if(!(e instanceof i.EditableFile))return e;if(e.path===t)return e;const n=e.sync();this.remove(e);const o=this.create(t,n);return this.localChanged(o),o}remove(e){if(e instanceof o.Folder)return;e.dispose();const t=this.files.indexOf(e);-1!==t&&(this.files.splice(t,1),this.root.removeFile(e),this.localChanged(e))}get(e){return this.files.find(t=>t.path===e)}has(e){return!!this.get(e)}hasModule(e){return e.startsWith("./")?(e=e.slice("./".length)+".",!!this.files.find(t=>t.path.startsWith(e)&&-1===t.path.indexOf(".",e.length))):this.packageJsonDepedencies.indexOf(e)>=0}list(){const e={numeric:!0,sensitivity:"base"};return this.files.sort((t,n)=>t.folderSortName!==n.folderSortName?t.folderSortName?n.folderSortName?t.folderSortName.localeCompare(n.folderSortName,void 0,e):-1:1:t.sortName!==n.sortName?t.sortName.localeCompare(n.sortName,void 0,e):t.path.localeCompare(n.path,void 0,e))}getFolder(e){return this.root.getFolder(e.split("/"))}createFolder(e){return this.root.createFolders(e.split("/"))}removeFolder(e){const t=this.getFolder(e);t&&t.remove()}localChanged(e){this.update+=1,e.latestLocalUpdate=this.update,this.sync&&this.sync.changed(e),this.handlers.forEach(e=>e())}remoteChanged(e){this.update+=1,e.latestRemoteUpdate=this.update,this.handlers.forEach(e=>e())}somethingUpdated(){this.update+=1,this.handlers.forEach(e=>e())}addOnchangeHandler(e){this.handlers.push(e)}removeOnChangeHandler(e){const t=this.handlers.indexOf(e);t<0||this.handlers.splice(t,1)}recreateRootFolder(){this.root.reset(),this.files.forEach(e=>{this.root.createFolders(e.folders).addFile(e)}),i.updateFileTypes(this)}updateFolderForFile(e){e&&this.root.createFolders(e.folders).addFile(e)}getUniqueFileName(e){if(!this.has(e))return e;let t,n=1;const{name:o,extension:r}=i.nameAndExtensionFor(e);do{t=o+"_"+String(n++)+r}while(this.has(t));return t}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(146),o=n(102),r=()=>null;class Library{constructor(e,t,n){this.content=e,this.d1=t,this.d2=n}dispose(){this.d1.dispose(),this.d2.dispose()}}t.MonacoModelFactory=class MonacoModelFactory{constructor(){this.libraries=new Map}create(e,t){return i.editor.createModel(t,void 0,i.Uri.file(e))}setValue(e,t){e.pushEditOperations([],[{range:e.getFullModelRange(),text:t}],r)}addLibrary(e,t){const n=this.libraries.get(e);if(n&&n.content===t)return;let r;r="canvas.tsx"===e?`file:///${e}`:e.endsWith(".d.ts")?`file:///node_modules/@types/${e}`:`file:///node_modules/@types/${e}/index.d.ts`,o.log.info("[monaco] addLibrary:",r);try{n&&(o.log.info("[monaco] dispose existing: ",r),n.dispose());const a=i.languages.typescript.typescriptDefaults.addExtraLib(t,r),l=i.languages.typescript.javascriptDefaults.addExtraLib(t,r);this.libraries.set(e,new Library(t,a,l))}catch(s){o.log.warn("[monaco] error loading library",e,s)}}hasLibrary(e){return this.libraries.has(e)}}},function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))(function(o,r){function fulfilled(e){try{step(i.next(e))}catch(t){r(t)}}function rejected(e){try{step(i.throw(e))}catch(t){r(t)}}function step(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(fulfilled,rejected)}step((i=i.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const o=n(169),r=n(121),s=n(102),a=n(418),l=n(23),c=n(419);function throwOnErrorStatus(e){return e.status>=200&&e.status<300?Promise.resolve(e):Promise.reject(new Error(e.statusText))}function getResponseJSON(e){return e.json()}function batch(e){o.unstable_batchedUpdates(e)}const d=30;t.SimpleFileSync=class SimpleFileSync{constructor(e){this.manager=e,this.serverURL=null,this.socket=null,this.fullSyncInterval=null,this.todo=[],this.files=[],this.files=e.setSync(this)}changed(e){this.todo.push(e),this.serverURL&&Promise.resolve().then(()=>{this.syncLocal()}).catch(e=>s.log.warn("[sync] error:",e))}syncLocal(){const e=new Set;this.todo.forEach(t=>{e.has(t.path)||(e.add(t.path),t.isDisposed()?(l(!this.manager.get(t.path)),this.deleteFile(t)):t.locallyChanged()&&(l(this.manager.get(t.path)),this.saveFile(t)))}),this.todo.length=0}syncRemoteFile(e){const{path:t,content:n,dir:i}=e;if(i)return;if("string"!=typeof n)return;if("canvas.tsx"===t)return void this.manager.factory.addLibrary("canvas.tsx",n);if("_TutorialSteps.tsx"===t&&!window.showTutorialSteps)return;let o=this.manager.get(t);return o?(o.locallyChanged()||o.setContent(n),this.manager.remoteChanged(o)):(o=new r.EditableFile(this.manager,t,n),this.files.push(o),this.manager.remoteChanged(o)),o}syncRemoteDir(e){const{path:t,dir:n}=e;n&&this.manager.createFolder(t)}syncRemote(e){const t=this.manager.update;this.manager.isLoading=!1,e.files.forEach(e=>{s.log.info("[sync] add/update file:",e.path),this.syncRemoteFile(e)}),this.files.forEach((e,n)=>{e.latestRemoteUpdate>t||(this.files.splice(n,1),s.log.info("[sync] remove file:",e.path),this.manager.remoteChanged(e))}),this.manager.recreateRootFolder(),e.files.forEach(e=>{this.syncRemoteDir(e)})}syncDependencies(e){e.forEach(e=>{this.manager.factory.addLibrary(e.module,e.content)})}connect(e,t=0){this.serverURL&&this.disconnect(),this.serverURL=e,t>0?setTimeout(()=>{this.connect(e)},t):(s.log.info("[sync] connecting to:",e),this.loadAll(),this.fullSyncInterval=setInterval(()=>{this.loadAll(),this.loadDependencies()},1e3*d),this.socket=a.getGlobalSocketIO(e),this.socket.once("state",e=>{s.log.info("[sync] connected, server.doneFirstInstall:",e.doneFirstInstall),e.doneFirstInstall&&this.loadDependencies(),this.socket.on("reload",()=>{s.log.info("[sync] reload"),this.loadDependencies()})}),this.socket.on("codechange",({path:e,event:t})=>{switch(e.startsWith("code/")&&(e=e.slice("code/".length)),s.log.debug("[sync] change:",t,e),t){case"added":this.remoteAddedFile(e);break;case"changed":this.remoteChangedFile(e);break;case"deleted":this.remoteDeletedFile(e)}}))}disconnect(){this.serverURL=null,this.fullSyncInterval&&(clearInterval(this.fullSyncInterval),this.fullSyncInterval=null),this.socket&&(this.socket=null)}remoteAddedFile(e){const t=this.manager.get(e);t&&t.locallyChanged()?t.remoteInSync():this.load(e)}remoteChangedFile(e){const t=this.manager.get(e);t&&(t.locallyChanged()?t.remoteInSync():this.load(e))}remoteDeletedFile(e){const t=this.manager.get(e);t?this.manager.remove(t):this.manager.getFolder(e)&&this.manager.removeFolder(e)}load(e){if(!this.serverURL)return;const t=JSON.stringify({path:e});this.fetch("_file",{method:"POST",headers:{"Content-Type":"application/json"},body:t}).then(throwOnErrorStatus).then(getResponseJSON).then(e=>{s.log.info("[sync] load:",e.path),batch(()=>{if(e.dir)this.syncRemoteDir(e),this.manager.somethingUpdated();else{const t=this.syncRemoteFile(e);this.manager.updateFolderForFile(t)}})}).catch(e=>{s.log.warn("[sync] loading failed:",e)})}loadAll(){this.serverURL&&this.fetch("_files").then(throwOnErrorStatus).then(getResponseJSON).then(e=>{s.log.info("[sync] full sync:",e.files?e.files.length:-1),Array.isArray(e.files)&&batch(()=>{this.syncRemote(e)})}).catch(e=>{s.log.warn("[sync] loading failed:",e)})}loadDependencies(){this.serverURL&&this.fetch("_dependencies").then(throwOnErrorStatus).then(getResponseJSON).then(e=>{s.log.info("[sync] dependencies:",Array.isArray(e)?e.length:-1),Array.isArray(e)&&batch(()=>{this.syncDependencies(e)})}).catch(e=>{s.log.warn("[sync] loading failed:",e)})}saveFile(e){if(!this.serverURL)return;const t=JSON.stringify({path:e.path,content:e.content});this.fetch("_save_file",{method:"POST",headers:{"Content-Type":"application/json"},body:t}).then(throwOnErrorStatus).then(getResponseJSON).then(()=>{e.didSave()}).catch(e=>{s.log.warn("[sync] saving failed:",e)})}deleteFile(e){if(!this.serverURL)return;const t=JSON.stringify({path:e.path});this.fetch("_delete_file",{method:"POST",headers:{"Content-Type":"application/json"},body:t}).then(throwOnErrorStatus).then(getResponseJSON).catch(e=>{s.log.warn("[sync] deleting failed:",e)})}createExampleFiles(){return i(this,void 0,void 0,function*(){if(!this.serverURL)throw Error("No backend initialized");return this.fetch("_create_code_example_files",{method:"POST"}).then(throwOnErrorStatus).then(getResponseJSON).then(e=>{if(s.log.info("[sync] create code examples:",e.files?e.files.length:-1),!Array.isArray(e.files))throw Error("Backend error: no files returned");batch(()=>{this.syncRemote(e)})}).catch(e=>{throw s.log.warn("[sync] create code examples failed:",e),Error(`Backend error: ${e.message}`)})})}fetch(e,t){return i(this,void 0,void 0,function*(){return t||(t={}),t.headers||(t.headers={}),t.headers.Authorization=`token ${c.authorizationToken}`,u(`${this.serverURL}${e}`,t)})}};const u=fetch},function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))(function(o,r){function fulfilled(e){try{step(i.next(e))}catch(t){r(t)}}function rejected(e){try{step(i.throw(e))}catch(t){r(t)}}function step(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(fulfilled,rejected)}step((i=i.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const o=n(146),r=n(730),s=n(731),a=n(102),l=n(732);class TokenizerState{constructor(e){this.ruleStack=e}clone(){return new TokenizerState(this.ruleStack)}equals(e){return e&&e instanceof TokenizerState&&(e===this||e.ruleStack.equals(this.ruleStack))}}let c=!1;t.installTextmateGrammars=function installTextmateGrammars(e){return i(this,void 0,void 0,function*(){if(c)return;c=!0,yield s.loadWASM(new URL("onigasm.wasm",e).toString());const t=new r.Registry({getGrammarDefinition(){return i(this,void 0,void 0,function*(){return{format:"plist",content:l.default}})}}),n=yield t.loadGrammar("typescript"),d={getInitialState:()=>new TokenizerState(r.INITIAL),tokenize(e,t){const i=n.tokenizeLine(e,t.ruleStack);return{endState:new TokenizerState(i.ruleStack),tokens:i.tokens.map(e=>Object.assign({},e,{scopes:e.scopes[e.scopes.length-1]}))}}};o.languages.setTokensProvider("typescript",d),o.languages.setTokensProvider("javascript",d);const u=o.languages.setTokensProvider;o.languages.setTokensProvider=function(e,t){return"typescript"===e||"javascript"===e?{dispose(){}}:u(e,t)};const h=o.languages.setMonarchTokensProvider;o.languages.setMonarchTokensProvider=function(e,t){return"typescript"===e||"javascript"===e?{dispose(){}}:h(e,t)},a.log.info("[grammar] installed typescript and javascript textmate grammar")})}},function(e,t){e.exports=require("monaco-textmate")},function(e,t){e.exports=require("onigasm")},function(e,t,n){"use strict";n.r(t),t.default='<?xml version="1.0" encoding="UTF-8"?>\n<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">\n<plist version="1.0">\n  <dict>\n    <key>name</key>\n    <string>TypeScriptReact</string>\n    <key>scopeName</key>\n    <string>source.tsx</string>\n    <key>fileTypes</key>\n    <array>\n      <string>tsx</string>\n    </array>\n    <key>uuid</key>\n    <string>805375ec-d614-41f5-8993-5843fe63ea82</string>\n    <key>patterns</key>\n    <array>\n      <dict>\n        <key>include</key>\n        <string>#directives</string>\n      </dict>\n      <dict>\n        <key>include</key>\n        <string>#statements</string>\n      </dict>\n      <dict>\n        <key>name</key>\n        <string>comment.line.shebang.ts</string>\n        <key>match</key>\n        <string>\\A(#!).*(?=$)</string>\n        <key>captures</key>\n        <dict>\n          <key>1</key>\n          <dict>\n            <key>name</key>\n            <string>punctuation.definition.comment.ts</string>\n          </dict>\n        </dict>\n      </dict>\n    </array>\n    <key>repository</key>\n    <dict>\n      <key>statements</key>\n      <dict>\n        <key>patterns</key>\n        <array>\n          <dict>\n            <key>include</key>\n            <string>#string</string>\n          </dict>\n          <dict>\n            <key>include</key>\n            <string>#template</string>\n          </dict>\n          <dict>\n            <key>include</key>\n            <string>#comment</string>\n          </dict>\n          <dict>\n            <key>include</key>\n            <string>#declaration</string>\n          </dict>\n          <dict>\n            <key>include</key>\n            <string>#control-statement</string>\n          </dict>\n          <dict>\n            <key>include</key>\n            <string>#after-operator-block-as-object-literal</string>\n          </dict>\n          <dict>\n            <key>include</key>\n            <string>#decl-block</string>\n          </dict>\n          <dict>\n            <key>include</key>\n            <string>#label</string>\n          </dict>\n          <dict>\n            <key>include</key>\n            <string>#expression</string>\n          </dict>\n          <dict>\n            <key>include</key>\n            <string>#punctuation-semicolon</string>\n          </dict>\n        </array>\n      </dict>\n      <key>declaration</key>\n      <dict>\n        <key>patterns</key>\n        <array>\n          <dict>\n            <key>include</key>\n            <string>#decorator</string>\n          </dict>\n          <dict>\n            <key>include</key>\n            <string>#var-expr</string>\n          </dict>\n          <dict>\n            <key>include</key>\n            <string>#function-declaration</string>\n          </dict>\n          <dict>\n            <key>include</key>\n            <string>#class-declaration</string>\n          </dict>\n          <dict>\n            <key>include</key>\n            <string>#interface-declaration</string>\n          </dict>\n          <dict>\n            <key>include</key>\n            <string>#enum-declaration</string>\n          </dict>\n          <dict>\n            <key>include</key>\n            <string>#namespace-declaration</string>\n          </dict>\n          <dict>\n            <key>include</key>\n            <string>#type-alias-declaration</string>\n          </dict>\n          <dict>\n            <key>include</key>\n            <string>#import-equals-declaration</string>\n          </dict>\n          <dict>\n            <key>include</key>\n            <string>#import-declaration</string>\n          </dict>\n          <dict>\n            <key>include</key>\n            <string>#export-declaration</string>\n          </dict>\n        </array>\n      </dict>\n      <key>control-statement</key>\n      <dict>\n        <key>patterns</key>\n        <array>\n          <dict>\n            <key>include</key>\n            <string>#switch-statement</string>\n          </dict>\n          <dict>\n            <key>include</key>\n            <string>#for-loop</string>\n          </dict>\n          <dict>\n            <key>name</key>\n            <string>keyword.control.trycatch.tsx</string>\n            <key>match</key>\n            <string>(?&lt;![_$[:alnum:]])(?:(?&lt;=\\.\\.\\.)|(?&lt;!\\.))(catch|finally|throw|try)(?![_$[:alnum:]])(?:(?=\\.\\.\\.)|(?!\\.))</string>\n          </dict>\n          <dict>\n            <key>match</key>\n            <string>(?&lt;![_$[:alnum:]])(?:(?&lt;=\\.\\.\\.)|(?&lt;!\\.))(break|continue|goto)\\s+([_$[:alpha:]][_$[:alnum:]]*)(?![_$[:alnum:]])(?:(?=\\.\\.\\.)|(?!\\.))</string>\n            <key>captures</key>\n            <dict>\n              <key>1</key>\n              <dict>\n                <key>name</key>\n                <string>keyword.control.loop.tsx</string>\n              </dict>\n              <key>2</key>\n              <dict>\n                <key>name</key>\n                <string>entity.name.label.tsx</string>\n              </dict>\n            </dict>\n          </dict>\n          <dict>\n            <key>name</key>\n            <string>keyword.control.loop.tsx</string>\n            <key>match</key>\n            <string>(?&lt;![_$[:alnum:]])(?:(?&lt;=\\.\\.\\.)|(?&lt;!\\.))(break|continue|do|goto|while)(?![_$[:alnum:]])(?:(?=\\.\\.\\.)|(?!\\.))</string>\n          </dict>\n          <dict>\n            <key>name</key>\n            <string>keyword.control.flow.tsx</string>\n            <key>match</key>\n            <string>(?&lt;![_$[:alnum:]])(?:(?&lt;=\\.\\.\\.)|(?&lt;!\\.))(return)(?![_$[:alnum:]])(?:(?=\\.\\.\\.)|(?!\\.))</string>\n          </dict>\n          <dict>\n            <key>name</key>\n            <string>keyword.control.switch.tsx</string>\n            <key>match</key>\n            <string>(?&lt;![_$[:alnum:]])(?:(?&lt;=\\.\\.\\.)|(?&lt;!\\.))(case|default|switch)(?![_$[:alnum:]])(?:(?=\\.\\.\\.)|(?!\\.))</string>\n          </dict>\n          <dict>\n            <key>name</key>\n            <string>keyword.control.conditional.tsx</string>\n            <key>match</key>\n            <string>(?&lt;![_$[:alnum:]])(?:(?&lt;=\\.\\.\\.)|(?&lt;!\\.))(else|if)(?![_$[:alnum:]])(?:(?=\\.\\.\\.)|(?!\\.))</string>\n          </dict>\n          <dict>\n            <key>name</key>\n            <string>keyword.control.with.tsx</string>\n            <key>match</key>\n            <string>(?&lt;![_$[:alnum:]])(?:(?&lt;=\\.\\.\\.)|(?&lt;!\\.))(with)(?![_$[:alnum:]])(?:(?=\\.\\.\\.)|(?!\\.))</string>\n          </dict>\n          <dict>\n            <key>name</key>\n            <string>keyword.other.debugger.tsx</string>\n            <key>match</key>\n            <string>(?&lt;![_$[:alnum:]])(?:(?&lt;=\\.\\.\\.)|(?&lt;!\\.))(debugger)(?![_$[:alnum:]])(?:(?=\\.\\.\\.)|(?!\\.))</string>\n          </dict>\n          <dict>\n            <key>name</key>\n            <string>storage.modifier.tsx</string>\n            <key>match</key>\n            <string>(?&lt;![_$[:alnum:]])(?:(?&lt;=\\.\\.\\.)|(?&lt;!\\.))(declare)(?![_$[:alnum:]])(?:(?=\\.\\.\\.)|(?!\\.))</string>\n          </dict>\n        </array>\n      </dict>\n      <key>label</key>\n      <dict>\n        <key>patterns</key>\n        <array>\n          <dict>\n            <key>begin</key>\n            <string>([_$[:alpha:]][_$[:alnum:]]*)\\s*(:)(?=\\s*\\{)</string>\n            <key>beginCaptures</key>\n            <dict>\n              <key>1</key>\n              <dict>\n                <key>name</key>\n                <string>entity.name.label.tsx</string>\n              </dict>\n              <key>2</key>\n              <dict>\n                <key>name</key>\n                <string>punctuation.separator.label.tsx</string>\n              </dict>\n            </dict>\n            <key>end</key>\n            <string>(?&lt;=\\})</string>\n            <key>patterns</key>\n            <array>\n              <dict>\n                <key>include</key>\n                <string>#decl-block</string>\n              </dict>\n            </array>\n          </dict>\n          <dict>\n            <key>match</key>\n            <string>([_$[:alpha:]][_$[:alnum:]]*)\\s*(:)</string>\n            <key>captures</key>\n            <dict>\n              <key>1</key>\n              <dict>\n                <key>name</key>\n                <string>entity.name.label.tsx</string>\n              </dict>\n              <key>2</key>\n              <dict>\n                <key>name</key>\n                <string>punctuation.separator.label.tsx</string>\n              </dict>\n            </dict>\n          </dict>\n        </array>\n      </dict>\n      <key>expression</key>\n      <dict>\n        <key>patterns</key>\n        <array>\n          <dict>\n            <key>include</key>\n            <string>#expressionWithoutIdentifiers</string>\n          </dict>\n          <dict>\n            <key>include</key>\n            <string>#identifiers</string>\n          </dict>\n          <dict>\n            <key>include</key>\n            <string>#expressionPunctuations</string>\n          </dict>\n        </array>\n      </dict>\n      <key>expressionWithoutIdentifiers</key>\n      <dict>\n        <key>patterns</key>\n        <array>\n          <dict>\n            <key>include</key>\n            <string>#jsx</string>\n          </dict>\n          <dict>\n            <key>include</key>\n            <string>#string</string>\n          </dict>\n          <dict>\n            <key>include</key>\n            <string>#regex</string>\n          </dict>\n          <dict>\n            <key>include</key>\n            <string>#template</string>\n          </dict>\n          <dict>\n            <key>include</key>\n            <string>#comment</string>\n          </dict>\n          <dict>\n            <key>include</key>\n            <string>#function-expression</string>\n          </dict>\n          <dict>\n            <key>include</key>\n            <string>#class-expression</string>\n          </dict>\n          <dict>\n            <key>include</key>\n            <string>#arrow-function</string>\n          </dict>\n          <dict>\n            <key>include</key>\n            <string>#paren-expression-possibly-arrow</string>\n          </dict>\n          <dict>\n            <key>include</key>\n            <string>#cast</string>\n          </dict>\n          <dict>\n            <key>include</key>\n            <string>#ternary-expression</string>\n          </dict>\n          <dict>\n            <key>include</key>\n            <string>#new-expr</string>\n          </dict>\n          <dict>\n            <key>include</key>\n            <string>#instanceof-expr</string>\n          </dict>\n          <dict>\n            <key>include</key>\n            <string>#object-literal</string>\n          </dict>\n          <dict>\n            <key>include</key>\n            <string>#expression-operators</string>\n          </dict>\n          <dict>\n            <key>include</key>\n            <string>#function-call</string>\n          </dict>\n          <dict>\n            <key>include</key>\n            <string>#literal</string>\n          </dict>\n          <dict>\n            <key>include</key>\n            <string>#support-objects</string>\n          </dict>\n          <dict>\n            <key>include</key>\n            <string>#paren-expression</string>\n          </dict>\n        </array>\n      </dict>\n      <key>expressionPunctuations</key>\n      <dict>\n        <key>patterns</key>\n        <array>\n          <dict>\n            <key>include</key>\n            <string>#punctuation-comma</string>\n          </dict>\n          <dict>\n            <key>include</key>\n            <string>#punctuation-accessor</string>\n          </dict>\n        </array>\n      </dict>\n      <key>decorator</key>\n      <dict>\n        <key>name</key>\n        <string>meta.decorator.tsx</string>\n        <key>begin</key>\n        <string>(?&lt;![_$[:alnum:]])(?:(?&lt;=\\.\\.\\.)|(?&lt;!\\.))\\@</string>\n        <key>beginCaptures</key>\n        <dict>\n          <key>0</key>\n          <dict>\n            <key>name</key>\n            <string>punctuation.decorator.tsx</string>\n          </dict>\n        </dict>\n        <key>end</key>\n        <string>(?=\\s)</string>\n        <key>patterns</key>\n        <array>\n          <dict>\n            <key>include</key>\n            <string>#expression</string>\n          </dict>\n        </array>\n      </dict>\n      <key>var-expr</key>\n      <dict>\n        <key>name</key>\n        <string>meta.var.expr.tsx</string>\n        <key>begin</key>\n        <string>(?&lt;![_$[:alnum:]])(?:(?&lt;=\\.\\.\\.)|(?&lt;!\\.))(?:(\\bexport)\\s+)?\\b(var|let|const(?!\\s+enum\\b))(?![_$[:alnum:]])(?:(?=\\.\\.\\.)|(?!\\.))</string>\n        <key>beginCaptures</key>\n        <dict>\n          <key>1</key>\n          <dict>\n            <key>name</key>\n            <string>keyword.control.export.tsx</string>\n          </dict>\n          <key>2</key>\n          <dict>\n            <key>name</key>\n            <string>storage.type.tsx</string>\n          </dict>\n        </dict>\n        <key>end</key>\n        <string>(?=$|^|;|}|(\\s+(of|in)\\s+))</string>\n        <key>patterns</key>\n        <array>\n          <dict>\n            <key>include</key>\n            <string>#destructuring-variable</string>\n          </dict>\n          <dict>\n            <key>include</key>\n            <string>#var-single-variable</string>\n          </dict>\n          <dict>\n            <key>include</key>\n            <string>#variable-initializer</string>\n          </dict>\n          <dict>\n            <key>include</key>\n            <string>#comment</string>\n          </dict>\n          <dict>\n            <key>begin</key>\n            <string>(,)\\s*(?!\\S)</string>\n            <key>beginCaptures</key>\n            <dict>\n              <key>1</key>\n              <dict>\n                <key>name</key>\n                <string>punctuation.separator.comma.tsx</string>\n              </dict>\n            </dict>\n            <key>end</key>\n            <string>(?&lt;!,)((?==|;|}|(\\s+(of|in)\\s+)|^\\s*$))|((?&lt;=\\S)(?=\\s*$))</string>\n            <key>patterns</key>\n            <array>\n              <dict>\n                <key>include</key>\n                <string>#comment</string>\n              </dict>\n              <dict>\n                <key>include</key>\n                <string>#destructuring-variable</string>\n              </dict>\n              <dict>\n                <key>include</key>\n                <string>#var-single-variable</string>\n              </dict>\n              <dict>\n                <key>include</key>\n                <string>#punctuation-comma</string>\n              </dict>\n            </array>\n          </dict>\n          <dict>\n            <key>include</key>\n            <string>#punctuation-comma</string>\n          </dict>\n        </array>\n      </dict>\n      <key>var-single-variable</key>\n      <dict>\n        <key>patterns</key>\n        <array>\n          <dict>\n            <key>name</key>\n            <string>meta.var-single-variable.expr.tsx</string>\n            <key>begin</key>\n            <string>(?x)([_$[:alpha:]][_$[:alnum:]]*)(?=\\s*\n# function assignment |\n(=\\s*(\n  ((async\\s+)?(\n    (function\\s*[(&lt;*]) |\n    (function\\s+) |\n    ([_$[:alpha:]][_$[:alnum:]]*\\s*=&gt;)\n  )) |\n  ((async\\s*)?(\n    ([\\(]\\s*([\\{\\[]\\s*)?$) |\n    # sure shot arrow functions even if =&gt; is on new line\n(\n  (&lt;\\s*([_$[:alpha:]]|(\\{([^\\{\\}]|(\\{[^\\{\\}]*\\}))*\\})|(\\(([^\\(\\)]|(\\([^\\(\\)]*\\)))*\\))|(\\[([^\\[\\]]|(\\[[^\\[\\]]*\\]))*\\]))([^=&lt;&gt;]|=[^&lt;]|\\&lt;\\s*([_$[:alpha:]]|(\\{([^\\{\\}]|(\\{[^\\{\\}]*\\}))*\\})|(\\(([^\\(\\)]|(\\([^\\(\\)]*\\)))*\\))|(\\[([^\\[\\]]|(\\[[^\\[\\]]*\\]))*\\]))([^=&lt;&gt;]|=[^&lt;])*\\&gt;)*&gt;\\s*)?\n  [(]\\s*\n  (\n    ([)]\\s*:) |                                                                                       # ():\n    ((\\.\\.\\.\\s*)?[_$[:alpha:]][_$[:alnum:]]*\\s*:)                                                                  # [(]param: | [(]...param:\n  )\n) |\n(\n  [&lt;]\\s*[_$[:alpha:]][_$[:alnum:]]*\\s+extends\\s*[^=&gt;]                                                              # &lt; typeparam extends\n) |\n# arrow function possible to detect only with =&gt; on same line\n(\n  (&lt;\\s*([_$[:alpha:]]|(\\{([^\\{\\}]|(\\{[^\\{\\}]*\\}))*\\})|(\\(([^\\(\\)]|(\\([^\\(\\)]*\\)))*\\))|(\\[([^\\[\\]]|(\\[[^\\[\\]]*\\]))*\\]))([^=&lt;&gt;]|=[^&lt;]|\\&lt;\\s*([_$[:alpha:]]|(\\{([^\\{\\}]|(\\{[^\\{\\}]*\\}))*\\})|(\\(([^\\(\\)]|(\\([^\\(\\)]*\\)))*\\))|(\\[([^\\[\\]]|(\\[[^\\[\\]]*\\]))*\\]))([^=&lt;&gt;]|=[^&lt;])*\\&gt;)*&gt;\\s*)?                                                                                 # typeparameters\n  \\(\\s*(([_$[:alpha:]]|(\\{([^\\{\\}]|(\\{[^\\{\\}]*\\}))*\\})|(\\[([^\\[\\]]|(\\[[^\\[\\]]*\\]))*\\])|(\\.\\.\\.\\s*[_$[:alpha:]]))([^()]|(\\(([^\\(\\)]|(\\([^\\(\\)]*\\)))*\\)))*)?\\)   # parameters\n  (\\s*:\\s*([^&lt;&gt;\\(\\)]|\\&lt;[^&lt;&gt;]+\\&gt;|\\([^\\(\\)]+\\))+)?                                                                        # return type\n  \\s*=&gt;                                                                                               # arrow operator\n)\n  ))\n)) |\n# typeannotation is fn type: &lt; | () | (... | (param: | (param, | (param? | (param= | (param) =&gt;\n(:\\s*(\n  (&lt;) |\n  ([(]\\s*(\n    ([)]) |\n    (\\.\\.\\.) |\n    ([_$[:alnum:]]+\\s*(\n      ([:,?=])|\n      ([)]\\s*=&gt;)\n    ))\n  ))\n)) |\n(:\\s*([\\(]\\s*([\\{\\[]\\s*)?$)) |\n(:\\s*(=&gt;|(\\(([^\\(\\)]|(\\([^\\(\\)]*\\)))*\\))|(&lt;[^&lt;&gt;]*&gt;)|[^&lt;&gt;(),=])+=\\s*(\n  ((async\\s+)?(\n    (function\\s*[(&lt;*]) |\n    (function\\s+) |\n    ([_$[:alpha:]][_$[:alnum:]]*\\s*=&gt;)\n  )) |\n  ((async\\s*)?(\n    ([\\(]\\s*([\\{\\[]\\s*)?$) |\n    # sure shot arrow functions even if =&gt; is on new line\n(\n  (&lt;\\s*([_$[:alpha:]]|(\\{([^\\{\\}]|(\\{[^\\{\\}]*\\}))*\\})|(\\(([^\\(\\)]|(\\([^\\(\\)]*\\)))*\\))|(\\[([^\\[\\]]|(\\[[^\\[\\]]*\\]))*\\]))([^=&lt;&gt;]|=[^&lt;]|\\&lt;\\s*([_$[:alpha:]]|(\\{([^\\{\\}]|(\\{[^\\{\\}]*\\}))*\\})|(\\(([^\\(\\)]|(\\([^\\(\\)]*\\)))*\\))|(\\[([^\\[\\]]|(\\[[^\\[\\]]*\\]))*\\]))([^=&lt;&gt;]|=[^&lt;])*\\&gt;)*&gt;\\s*)?\n  [(]\\s*\n  (\n    ([)]\\s*:) |                                                                                       # ():\n    ((\\.\\.\\.\\s*)?[_$[:alpha:]][_$[:alnum:]]*\\s*:)                                                                  # [(]param: | [(]...param:\n  )\n) |\n(\n  [&lt;]\\s*[_$[:alpha:]][_$[:alnum:]]*\\s+extends\\s*[^=&gt;]                                                              # &lt; typeparam extends\n) |\n# arrow function possible to detect only with =&gt; on same line\n(\n  (&lt;\\s*([_$[:alpha:]]|(\\{([^\\{\\}]|(\\{[^\\{\\}]*\\}))*\\})|(\\(([^\\(\\)]|(\\([^\\(\\)]*\\)))*\\))|(\\[([^\\[\\]]|(\\[[^\\[\\]]*\\]))*\\]))([^=&lt;&gt;]|=[^&lt;]|\\&lt;\\s*([_$[:alpha:]]|(\\{([^\\{\\}]|(\\{[^\\{\\}]*\\}))*\\})|(\\(([^\\(\\)]|(\\([^\\(\\)]*\\)))*\\))|(\\[([^\\[\\]]|(\\[[^\\[\\]]*\\]))*\\]))([^=&lt;&gt;]|=[^&lt;])*\\&gt;)*&gt;\\s*)?                                                                                 # typeparameters\n  \\(\\s*(([_$[:alpha:]]|(\\{([^\\{\\}]|(\\{[^\\{\\}]*\\}))*\\})|(\\[([^\\[\\]]|(\\[[^\\[\\]]*\\]))*\\])|(\\.\\.\\.\\s*[_$[:alpha:]]))([^()]|(\\(([^\\(\\)]|(\\([^\\(\\)]*\\)))*\\)))*)?\\)   # parameters\n  (\\s*:\\s*([^&lt;&gt;\\(\\)]|\\&lt;[^&lt;&gt;]+\\&gt;|\\([^\\(\\)]+\\))+)?                                                                        # return type\n  \\s*=&gt;                                                                                               # arrow operator\n)\n  ))\n)))</string>\n            <key>beginCaptures</key>\n            <dict>\n              <key>1</key>\n              <dict>\n                <key>name</key>\n                <string>meta.definition.variable.tsx entity.name.function.tsx</string>\n              </dict>\n            </dict>\n            <key>end</key>\n            <string>(?=$|^|[;,=}]|(\\s+(of|in)\\s+))</string>\n            <key>patterns</key>\n            <array>\n              <dict>\n                <key>include</key>\n                <string>#var-single-variable-type-annotation</string>\n              </dict>\n            </array>\n          </dict>\n          <dict>\n            <key>name</key>\n            <string>meta.var-single-variable.expr.tsx</string>\n            <key>begin</key>\n            <string>([[:upper:]][_$[:digit:][:upper:]]*)(?![_$[:alnum:]])</string>\n            <key>beginCaptures</key>\n            <dict>\n              <key>1</key>\n              <dict>\n                <key>name</key>\n                <string>meta.definition.variable.tsx variable.other.constant.tsx</string>\n              </dict>\n            </dict>\n            <key>end</key>\n            <string>(?=$|^|[;,=}]|(\\s+(of|in)\\s+))</string>\n            <key>patterns</key>\n            <array>\n              <dict>\n                <key>include</key>\n                <string>#var-single-variable-type-annotation</string>\n              </dict>\n            </array>\n          </dict>\n          <dict>\n            <key>name</key>\n            <string>meta.var-single-variable.expr.tsx</string>\n            <key>begin</key>\n            <string>([_$[:alpha:]][_$[:alnum:]]*)</string>\n            <key>beginCaptures</key>\n            <dict>\n              <key>1</key>\n              <dict>\n                <key>name</key>\n                <string>meta.definition.variable.tsx variable.other.readwrite.tsx</string>\n              </dict>\n            </dict>\n            <key>end</key>\n            <string>(?=$|^|[;,=}]|(\\s+(of|in)\\s+))</string>\n            <key>patterns</key>\n            <array>\n              <dict>\n                <key>include</key>\n                <string>#var-single-variable-type-annotation</string>\n              </dict>\n            </array>\n          </dict>\n        </array>\n      </dict>\n      <key>var-single-variable-type-annotation</key>\n      <dict>\n        <key>patterns</key>\n        <array>\n          <dict>\n            <key>include</key>\n            <string>#type-annotation</string>\n          </dict>\n          <dict>\n            <key>include</key>\n            <string>#string</string>\n          </dict>\n          <dict>\n            <key>include</key>\n            <string>#comment</string>\n          </dict>\n        </array>\n      </dict>\n      <key>destructuring-variable</key>\n      <dict>\n        <key>patterns</key>\n        <array>\n          <dict>\n            <key>name</key>\n            <string>meta.object-binding-pattern-variable.tsx</string>\n            <key>begin</key>\n            <string>(?&lt;!=|:|^of|[^\\._$[:alnum:]]of|^in|[^\\._$[:alnum:]]in)\\s*(?=\\{)</string>\n            <key>end</key>\n            <string>(?=$|^|[;,=}]|(\\s+(of|in)\\s+))</string>\n            <key>patterns</key>\n            <array>\n              <dict>\n                <key>include</key>\n                <string>#object-binding-pattern</string>\n              </dict>\n              <dict>\n                <key>include</key>\n                <string>#type-annotation</string>\n              </dict>\n              <dict>\n                <key>include</key>\n                <string>#comment</string>\n              </dict>\n            </array>\n          </dict>\n          <dict>\n            <key>name</key>\n            <string>meta.array-binding-pattern-variable.tsx</string>\n            <key>begin</key>\n            <string>(?&lt;!=|:|^of|[^\\._$[:alnum:]]of|^in|[^\\._$[:alnum:]]in)\\s*(?=\\[)</string>\n            <key>end</key>\n            <string>(?=$|^|[;,=}]|(\\s+(of|in)\\s+))</string>\n            <key>patterns</key>\n            <array>\n              <dict>\n                <key>include</key>\n                <string>#array-binding-pattern</string>\n              </dict>\n              <dict>\n                <key>include</key>\n                <string>#type-annotation</string>\n              </dict>\n              <dict>\n                <key>include</key>\n                <string>#comment</string>\n              </dict>\n            </array>\n          </dict>\n        </array>\n      </dict>\n      <key>object-binding-element</key>\n      <dict>\n        <key>patterns</key>\n        <array>\n          <dict>\n            <key>include</key>\n            <string>#comment</string>\n          </dict>\n          <dict>\n            <key>begin</key>\n            <string>(?x)(?=((\\b(?&lt;!\\$)0(x|X)[0-9a-fA-F][0-9a-fA-F_]*\\b(?!\\$))|(\\b(?&lt;!\\$)0(b|B)[01][01_]*\\b(?!\\$))|(\\b(?&lt;!\\$)0(o|O)?[0-7][0-7_]*\\b(?!\\$))|((?&lt;!\\$)(?:\n  (?:\\b[0-9][0-9_]*(\\.)[0-9][0-9_]*[eE][+-]?[0-9][0-9_]*\\b)| # 1.1E+3\n  (?:\\b[0-9][0-9_]*(\\.)[eE][+-]?[0-9][0-9_]*\\b)|             # 1.E+3\n  (?:\\B(\\.)[0-9][0-9_]*[eE][+-]?[0-9][0-9_]*\\b)|             # .1E+3\n  (?:\\b[0-9][0-9_]*[eE][+-]?[0-9][0-9_]*\\b)|                 # 1E+3\n  (?:\\b[0-9][0-9_]*(\\.)[0-9][0-9_]*\\b)|                      # 1.1\n  (?:\\b[0-9][0-9_]*(\\.)\\B)|                                  # 1.\n  (?:\\B(\\.)[0-9][0-9_]*\\b)|                                  # .1\n  (?:\\b[0-9][0-9_]*\\b(?!\\.))                                 # 1\n)(?!\\$))|([_$[:alpha:]][_$[:alnum:]]*)|(\\\'([^\\\'\\\\]|\\\\\\\'|\\\\)*\\\')|(\\"([^\\"\\\\]|\\\\\\"|\\\\)*\\")|(\\[([^\\[\\]]|\\[[^\\[\\]]*\\])+\\]))\\s*(:))</string>\n            <key>end</key>\n            <string>(?=,|\\})</string>\n            <key>patterns</key>\n            <array>\n              <dict>\n                <key>include</key>\n                <string>#object-binding-element-propertyName</string>\n              </dict>\n              <dict>\n                <key>include</key>\n                <string>#binding-element</string>\n              </dict>\n            </array>\n          </dict>\n          <dict>\n            <key>include</key>\n            <string>#object-binding-pattern</string>\n          </dict>\n          <dict>\n            <key>include</key>\n            <string>#destructuring-variable-rest</string>\n          </dict>\n          <dict>\n            <key>include</key>\n            <string>#variable-initializer</string>\n          </dict>\n          <dict>\n            <key>include</key>\n            <string>#punctuation-comma</string>\n          </dict>\n        </array>\n      </dict>\n      <key>object-binding-element-propertyName</key>\n      <dict>\n        <key>begin</key>\n        <string>(?x)(?=((\\b(?&lt;!\\$)0(x|X)[0-9a-fA-F][0-9a-fA-F_]*\\b(?!\\$))|(\\b(?&lt;!\\$)0(b|B)[01][01_]*\\b(?!\\$))|(\\b(?&lt;!\\$)0(o|O)?[0-7][0-7_]*\\b(?!\\$))|((?&lt;!\\$)(?:\n  (?:\\b[0-9][0-9_]*(\\.)[0-9][0-9_]*[eE][+-]?[0-9][0-9_]*\\b)| # 1.1E+3\n  (?:\\b[0-9][0-9_]*(\\.)[eE][+-]?[0-9][0-9_]*\\b)|             # 1.E+3\n  (?:\\B(\\.)[0-9][0-9_]*[eE][+-]?[0-9][0-9_]*\\b)|             # .1E+3\n  (?:\\b[0-9][0-9_]*[eE][+-]?[0-9][0-9_]*\\b)|                 # 1E+3\n  (?:\\b[0-9][0-9_]*(\\.)[0-9][0-9_]*\\b)|                      # 1.1\n  (?:\\b[0-9][0-9_]*(\\.)\\B)|                                  # 1.\n  (?:\\B(\\.)[0-9][0-9_]*\\b)|                                  # .1\n  (?:\\b[0-9][0-9_]*\\b(?!\\.))                                 # 1\n)(?!\\$))|([_$[:alpha:]][_$[:alnum:]]*)|(\\\'([^\\\'\\\\]|\\\\\\\'|\\\\)*\\\')|(\\"([^\\"\\\\]|\\\\\\"|\\\\)*\\")|(\\[([^\\[\\]]|\\[[^\\[\\]]*\\])+\\]))\\s*(:))</string>\n        <key>end</key>\n        <string>(:)</string>\n        <key>endCaptures</key>\n        <dict>\n          <key>0</key>\n          <dict>\n            <key>name</key>\n            <string>punctuation.destructuring.tsx</string>\n          </dict>\n        </dict>\n        <key>patterns</key>\n        <array>\n          <dict>\n            <key>include</key>\n            <string>#string</string>\n          </dict>\n          <dict>\n            <key>include</key>\n            <string>#array-literal</string>\n          </dict>\n          <dict>\n            <key>include</key>\n            <string>#numeric-literal</string>\n          </dict>\n          <dict>\n            <key>name</key>\n            <string>variable.object.property.tsx</string>\n            <key>match</key>\n            <string>([_$[:alpha:]][_$[:alnum:]]*)</string>\n          </dict>\n        </array>\n      </dict>\n      <key>binding-element</key>\n      <dict>\n        <key>patterns</key>\n        <array>\n          <dict>\n            <key>include</key>\n            <string>#comment</string>\n          </dict>\n          <dict>\n            <key>include</key>\n            <string>#string</string>\n          </dict>\n          <dict>\n            <key>include</key>\n            <string>#object-binding-pattern</string>\n          </dict>\n          <dict>\n            <key>include</key>\n            <string>#array-binding-pattern</string>\n          </dict>\n          <dict>\n            <key>include</key>\n            <string>#destructuring-variable-rest</string>\n          </dict>\n          <dict>\n            <key>include</key>\n            <string>#variable-initializer</string>\n          </dict>\n        </array>\n      </dict>\n      <key>destructuring-variable-rest</key>\n      <dict>\n        <key>match</key>\n        <string>(?:(\\.\\.\\.)\\s*)?([_$[:alpha:]][_$[:alnum:]]*)</string>\n        <key>captures</key>\n        <dict>\n          <key>1</key>\n          <dict>\n            <key>name</key>\n            <string>keyword.operator.rest.tsx</string>\n          </dict>\n          <key>2</key>\n          <dict>\n            <key>name</key>\n            <string>meta.definition.variable.tsx variable.other.readwrite.tsx</string>\n          </dict>\n        </dict>\n      </dict>\n      <key>object-binding-pattern</key>\n      <dict>\n        <key>begin</key>\n        <string>(?:(\\.\\.\\.)\\s*)?(\\{)</string>\n        <key>beginCaptures</key>\n        <dict>\n          <key>1</key>\n          <dict>\n            <key>name</key>\n            <string>keyword.operator.rest.tsx</string>\n          </dict>\n          <key>2</key>\n          <dict>\n            <key>name</key>\n            <string>punctuation.definition.binding-pattern.object.tsx</string>\n          </dict>\n        </dict>\n        <key>end</key>\n        <string>\\}</string>\n        <key>endCaptures</key>\n        <dict>\n          <key>0</key>\n          <dict>\n            <key>name</key>\n            <string>punctuation.definition.binding-pattern.object.tsx</string>\n          </dict>\n        </dict>\n        <key>patterns</key>\n        <array>\n          <dict>\n            <key>include</key>\n            <string>#object-binding-element</string>\n          </dict>\n        </array>\n      </dict>\n      <key>array-binding-pattern</key>\n      <dict>\n        <key>begin</key>\n        <string>(?:(\\.\\.\\.)\\s*)?(\\[)</string>\n        <key>beginCaptures</key>\n        <dict>\n          <key>1</key>\n          <dict>\n            <key>name</key>\n            <string>keyword.operator.rest.tsx</string>\n          </dict>\n          <key>2</key>\n          <dict>\n            <key>name</key>\n            <string>punctuation.definition.binding-pattern.array.tsx</string>\n          </dict>\n        </dict>\n        <key>end</key>\n        <string>\\]</string>\n        <key>endCaptures</key>\n        <dict>\n          <key>0</key>\n          <dict>\n            <key>name</key>\n            <string>punctuation.definition.binding-pattern.array.tsx</string>\n          </dict>\n        </dict>\n        <key>patterns</key>\n        <array>\n          <dict>\n            <key>include</key>\n            <string>#binding-element</string>\n          </dict>\n          <dict>\n            <key>include</key>\n            <string>#punctuation-comma</string>\n          </dict>\n        </array>\n      </dict>\n      <key>parameter-name</key>\n      <dict>\n        <key>patterns</key>\n        <array>\n          <dict>\n            <key>match</key>\n            <string>(?&lt;![_$[:alnum:]])(?:(?&lt;=\\.\\.\\.)|(?&lt;!\\.))(public|protected|private|readonly)\\s+(?=(public|protected|private|readonly)\\s+)</string>\n            <key>captures</key>\n            <dict>\n              <key>1</key>\n              <dict>\n                <key>name</key>\n                <string>storage.modifier.tsx</string>\n              </dict>\n            </dict>\n          </dict>\n          <dict>\n            <key>match</key>\n            <string>(?x)(?:(?&lt;![_$[:alnum:]])(?:(?&lt;=\\.\\.\\.)|(?&lt;!\\.))(public|private|protected|readonly)\\s+)?(?:(\\.\\.\\.)\\s*)?(?&lt;!=|:)(?&lt;![_$[:alnum:]])(?:(?&lt;=\\.\\.\\.)|(?&lt;!\\.))(?:(this)|([_$[:alpha:]][_$[:alnum:]]*))(?![_$[:alnum:]])(?:(?=\\.\\.\\.)|(?!\\.))\\s*(\\??)(?=\\s*\n# function assignment |\n(=\\s*(\n  ((async\\s+)?(\n    (function\\s*[(&lt;*]) |\n    (function\\s+) |\n    ([_$[:alpha:]][_$[:alnum:]]*\\s*=&gt;)\n  )) |\n  ((async\\s*)?(\n    ([\\(]\\s*([\\{\\[]\\s*)?$) |\n    # sure shot arrow functions even if =&gt; is on new line\n(\n  (&lt;\\s*([_$[:alpha:]]|(\\{([^\\{\\}]|(\\{[^\\{\\}]*\\}))*\\})|(\\(([^\\(\\)]|(\\([^\\(\\)]*\\)))*\\))|(\\[([^\\[\\]]|(\\[[^\\[\\]]*\\]))*\\]))([^=&lt;&gt;]|=[^&lt;]|\\&lt;\\s*([_$[:alpha:]]|(\\{([^\\{\\}]|(\\{[^\\{\\}]*\\}))*\\})|(\\(([^\\(\\)]|(\\([^\\(\\)]*\\)))*\\))|(\\[([^\\[\\]]|(\\[[^\\[\\]]*\\]))*\\]))([^=&lt;&gt;]|=[^&lt;])*\\&gt;)*&gt;\\s*)?\n  [(]\\s*\n  (\n    ([)]\\s*:) |                                                                                       # ():\n    ((\\.\\.\\.\\s*)?[_$[:alpha:]][_$[:alnum:]]*\\s*:)                                                                  # [(]param: | [(]...param:\n  )\n) |\n(\n  [&lt;]\\s*[_$[:alpha:]][_$[:alnum:]]*\\s+extends\\s*[^=&gt;]                                                              # &lt; typeparam extends\n) |\n# arrow function possible to detect only with =&gt; on same line\n(\n  (&lt;\\s*([_$[:alpha:]]|(\\{([^\\{\\}]|(\\{[^\\{\\}]*\\}))*\\})|(\\(([^\\(\\)]|(\\([^\\(\\)]*\\)))*\\))|(\\[([^\\[\\]]|(\\[[^\\[\\]]*\\]))*\\]))([^=&lt;&gt;]|=[^&lt;]|\\&lt;\\s*([_$[:alpha:]]|(\\{([^\\{\\}]|(\\{[^\\{\\}]*\\}))*\\})|(\\(([^\\(\\)]|(\\([^\\(\\)]*\\)))*\\))|(\\[([^\\[\\]]|(\\[[^\\[\\]]*\\]))*\\]))([^=&lt;&gt;]|=[^&lt;])*\\&gt;)*&gt;\\s*)?                                                                                 # typeparameters\n  \\(\\s*(([_$[:alpha:]]|(\\{([^\\{\\}]|(\\{[^\\{\\}]*\\}))*\\})|(\\[([^\\[\\]]|(\\[[^\\[\\]]*\\]))*\\])|(\\.\\.\\.\\s*[_$[:alpha:]]))([^()]|(\\(([^\\(\\)]|(\\([^\\(\\)]*\\)))*\\)))*)?\\)   # parameters\n  (\\s*:\\s*([^&lt;&gt;\\(\\)]|\\&lt;[^&lt;&gt;]+\\&gt;|\\([^\\(\\)]+\\))+)?                                                                        # return type\n  \\s*=&gt;                                                                                               # arrow operator\n)\n  ))\n)) |\n# typeannotation is fn type: &lt; | () | (... | (param: | (param, | (param? | (param= | (param) =&gt;\n(:\\s*(\n  (&lt;) |\n  ([(]\\s*(\n    ([)]) |\n    (\\.\\.\\.) |\n    ([_$[:alnum:]]+\\s*(\n      ([:,?=])|\n      ([)]\\s*=&gt;)\n    ))\n  ))\n)) |\n(:\\s*([\\(]\\s*([\\{\\[]\\s*)?$)) |\n(:\\s*(=&gt;|(\\(([^\\(\\)]|(\\([^\\(\\)]*\\)))*\\))|(&lt;[^&lt;&gt;]*&gt;)|[^&lt;&gt;(),=])+=\\s*(\n  ((async\\s+)?(\n    (function\\s*[(&lt;*]) |\n    (function\\s+) |\n    ([_$[:alpha:]][_$[:alnum:]]*\\s*=&gt;)\n  )) |\n  ((async\\s*)?(\n    ([\\(]\\s*([\\{\\[]\\s*)?$) |\n    # sure shot arrow functions even if =&gt; is on new line\n(\n  (&lt;\\s*([_$[:alpha:]]|(\\{([^\\{\\}]|(\\{[^\\{\\}]*\\}))*\\})|(\\(([^\\(\\)]|(\\([^\\(\\)]*\\)))*\\))|(\\[([^\\[\\]]|(\\[[^\\[\\]]*\\]))*\\]))([^=&lt;&gt;]|=[^&lt;]|\\&lt;\\s*([_$[:alpha:]]|(\\{([^\\{\\}]|(\\{[^\\{\\}]*\\}))*\\})|(\\(([^\\(\\)]|(\\([^\\(\\)]*\\)))*\\))|(\\[([^\\[\\]]|(\\[[^\\[\\]]*\\]))*\\]))([^=&lt;&gt;]|=[^&lt;])*\\&gt;)*&gt;\\s*)?\n  [(]\\s*\n  (\n    ([)]\\s*:) |                                                                                       # ():\n    ((\\.\\.\\.\\s*)?[_$[:alpha:]][_$[:alnum:]]*\\s*:)                                                                  # [(]param: | [(]...param:\n  )\n) |\n(\n  [&lt;]\\s*[_$[:alpha:]][_$[:alnum:]]*\\s+extends\\s*[^=&gt;]                                                              # &lt; typeparam extends\n) |\n# arrow function possible to detect only with =&gt; on same line\n(\n  (&lt;\\s*([_$[:alpha:]]|(\\{([^\\{\\}]|(\\{[^\\{\\}]*\\}))*\\})|(\\(([^\\(\\)]|(\\([^\\(\\)]*\\)))*\\))|(\\[([^\\[\\]]|(\\[[^\\[\\]]*\\]))*\\]))([^=&lt;&gt;]|=[^&lt;]|\\&lt;\\s*([_$[:alpha:]]|(\\{([^\\{\\}]|(\\{[^\\{\\}]*\\}))*\\})|(\\(([^\\(\\)]|(\\([^\\(\\)]*\\)))*\\))|(\\[([^\\[\\]]|(\\[[^\\[\\]]*\\]))*\\]))([^=&lt;&gt;]|=[^&lt;])*\\&gt;)*&gt;\\s*)?                                                                                 # typeparameters\n  \\(\\s*(([_$[:alpha:]]|(\\{([^\\{\\}]|(\\{[^\\{\\}]*\\}))*\\})|(\\[([^\\[\\]]|(\\[[^\\[\\]]*\\]))*\\])|(\\.\\.\\.\\s*[_$[:alpha:]]))([^()]|(\\(([^\\(\\)]|(\\([^\\(\\)]*\\)))*\\)))*)?\\)   # parameters\n  (\\s*:\\s*([^&lt;&gt;\\(\\)]|\\&lt;[^&lt;&gt;]+\\&gt;|\\([^\\(\\)]+\\))+)?                                                                        # return type\n  \\s*=&gt;                                                                                               # arrow operator\n)\n  ))\n)))</string>\n            <key>captures</key>\n            <dict>\n              <key>1</key>\n              <dict>\n                <key>name</key>\n                <string>storage.modifier.tsx</string>\n              </dict>\n              <key>2</key>\n              <dict>\n                <key>name</key>\n                <string>keyword.operator.rest.tsx</string>\n              </dict>\n              <key>3</key>\n              <dict>\n                <key>name</key>\n                <string>entity.name.function.tsx variable.language.this.tsx</string>\n              </dict>\n              <key>4</key>\n              <dict>\n                <key>name</key>\n                <string>entity.name.function.tsx</string>\n              </dict>\n              <key>5</key>\n              <dict>\n                <key>name</key>\n                <string>keyword.operator.optional.tsx</string>\n              </dict>\n            </dict>\n          </dict>\n          <dict>\n            <key>match</key>\n            <string>(?x)(?:(?&lt;![_$[:alnum:]])(?:(?&lt;=\\.\\.\\.)|(?&lt;!\\.))(public|private|protected|readonly)\\s+)?(?:(\\.\\.\\.)\\s*)?(?&lt;!=|:)(?&lt;![_$[:alnum:]])(?:(?&lt;=\\.\\.\\.)|(?&lt;!\\.))(?:(this)|([_$[:alpha:]][_$[:alnum:]]*))(?![_$[:alnum:]])(?:(?=\\.\\.\\.)|(?!\\.))\\s*(\\??)</string>\n            <key>captures</key>\n            <dict>\n              <key>1</key>\n              <dict>\n                <key>name</key>\n                <string>storage.modifier.tsx</string>\n              </dict>\n              <key>2</key>\n              <dict>\n                <key>name</key>\n                <string>keyword.operator.rest.tsx</string>\n              </dict>\n              <key>3</key>\n              <dict>\n                <key>name</key>\n                <string>variable.parameter.tsx variable.language.this.tsx</string>\n              </dict>\n              <key>4</key>\n              <dict>\n                <key>name</key>\n                <string>variable.parameter.tsx</string>\n              </dict>\n              <key>5</key>\n              <dict>\n                <key>name</key>\n                <string>keyword.operator.optional.tsx</string>\n              </dict>\n            </dict>\n          </dict>\n        </array>\n      </dict>\n      <key>destructuring-parameter</key>\n      <dict>\n        <key>patterns</key>\n        <array>\n          <dict>\n            <key>name</key>\n            <string>meta.parameter.object-binding-pattern.tsx</string>\n            <key>begin</key>\n            <string>(?&lt;!=|:)\\s*(\\{)</string>\n            <key>beginCaptures</key>\n            <dict>\n              <key>1</key>\n              <dict>\n                <key>name</key>\n                <string>punctuation.definition.binding-pattern.object.tsx</string>\n              </dict>\n            </dict>\n            <key>end</key>\n            <string>\\}</string>\n            <key>endCaptures</key>\n            <dict>\n              <key>0</key>\n              <dict>\n                <key>name</key>\n                <string>punctuation.definition.binding-pattern.object.tsx</string>\n              </dict>\n            </dict>\n            <key>patterns</key>\n            <array>\n              <dict>\n                <key>include</key>\n                <string>#parameter-object-binding-element</string>\n              </dict>\n            </array>\n          </dict>\n          <dict>\n            <key>name</key>\n            <string>meta.paramter.array-binding-pattern.tsx</string>\n            <key>begin</key>\n            <string>(?&lt;!=|:)\\s*(\\[)</string>\n            <key>beginCaptures</key>\n            <dict>\n              <key>1</key>\n              <dict>\n                <key>name</key>\n                <string>punctuation.definition.binding-pattern.array.tsx</string>\n              </dict>\n            </dict>\n            <key>end</key>\n            <string>\\]</string>\n            <key>endCaptures</key>\n            <dict>\n              <key>0</key>\n              <dict>\n                <key>name</key>\n                <string>punctuation.definition.binding-pattern.array.tsx</string>\n              </dict>\n            </dict>\n            <key>patterns</key>\n            <array>\n              <dict>\n                <key>include</key>\n                <string>#parameter-binding-element</string>\n              </dict>\n              <dict>\n                <key>include</key>\n                <string>#punctuation-comma</string>\n              </dict>\n            </array>\n          </dict>\n        </array>\n      </dict>\n      <key>parameter-object-binding-element</key>\n      <dict>\n        <key>patterns</key>\n        <array>\n          <dict>\n            <key>include</key>\n            <string>#comment</string>\n          </dict>\n          <dict>\n            <key>begin</key>\n            <string>(?x)(?=((\\b(?&lt;!\\$)0(x|X)[0-9a-fA-F][0-9a-fA-F_]*\\b(?!\\$))|(\\b(?&lt;!\\$)0(b|B)[01][01_]*\\b(?!\\$))|(\\b(?&lt;!\\$)0(o|O)?[0-7][0-7_]*\\b(?!\\$))|((?&lt;!\\$)(?:\n  (?:\\b[0-9][0-9_]*(\\.)[0-9][0-9_]*[eE][+-]?[0-9][0-9_]*\\b)| # 1.1E+3\n  (?:\\b[0-9][0-9_]*(\\.)[eE][+-]?[0-9][0-9_]*\\b)|             # 1.E+3\n  (?:\\B(\\.)[0-9][0-9_]*[eE][+-]?[0-9][0-9_]*\\b)|             # .1E+3\n  (?:\\b[0-9][0-9_]*[eE][+-]?[0-9][0-9_]*\\b)|                 # 1E+3\n  (?:\\b[0-9][0-9_]*(\\.)[0-9][0-9_]*\\b)|                      # 1.1\n  (?:\\b[0-9][0-9_]*(\\.)\\B)|                                  # 1.\n  (?:\\B(\\.)[0-9][0-9_]*\\b)|                                  # .1\n  (?:\\b[0-9][0-9_]*\\b(?!\\.))                                 # 1\n)(?!\\$))|([_$[:alpha:]][_$[:alnum:]]*)|(\\\'([^\\\'\\\\]|\\\\\\\'|\\\\)*\\\')|(\\"([^\\"\\\\]|\\\\\\"|\\\\)*\\")|(\\[([^\\[\\]]|\\[[^\\[\\]]*\\])+\\]))\\s*(:))</string>\n            <key>end</key>\n            <string>(?=,|\\})</string>\n            <key>patterns</key>\n            <array>\n              <dict>\n                <key>include</key>\n                <string>#object-binding-element-propertyName</string>\n              </dict>\n              <dict>\n                <key>include</key>\n                <string>#parameter-binding-element</string>\n              </dict>\n            </array>\n          </dict>\n          <dict>\n            <key>include</key>\n            <string>#parameter-object-binding-pattern</string>\n          </dict>\n          <dict>\n            <key>include</key>\n            <string>#destructuring-parameter-rest</string>\n          </dict>\n          <dict>\n            <key>include</key>\n            <string>#variable-initializer</string>\n          </dict>\n          <dict>\n            <key>include</key>\n            <string>#punctuation-comma</string>\n          </dict>\n        </array>\n      </dict>\n      <key>parameter-binding-element</key>\n      <dict>\n        <key>patterns</key>\n        <array>\n          <dict>\n            <key>include</key>\n            <string>#comment</string>\n          </dict>\n          <dict>\n            <key>include</key>\n            <string>#string</string>\n          </dict>\n          <dict>\n            <key>include</key>\n            <string>#parameter-object-binding-pattern</string>\n          </dict>\n          <dict>\n            <key>include</key>\n            <string>#parameter-array-binding-pattern</string>\n          </dict>\n          <dict>\n            <key>include</key>\n            <string>#destructuring-parameter-rest</string>\n          </dict>\n          <dict>\n            <key>include</key>\n            <string>#variable-initializer</string>\n          </dict>\n        </array>\n      </dict>\n      <key>destructuring-parameter-rest</key>\n      <dict>\n        <key>match</key>\n        <string>(?:(\\.\\.\\.)\\s*)?([_$[:alpha:]][_$[:alnum:]]*)</string>\n        <key>captures</key>\n        <dict>\n          <key>1</key>\n          <dict>\n            <key>name</key>\n            <string>keyword.operator.rest.tsx</string>\n          </dict>\n          <key>2</key>\n          <dict>\n            <key>name</key>\n            <string>variable.parameter.tsx</string>\n          </dict>\n        </dict>\n      </dict>\n      <key>parameter-object-binding-pattern</key>\n      <dict>\n        <key>begin</key>\n        <string>(?:(\\.\\.\\.)\\s*)?(\\{)</string>\n        <key>beginCaptures</key>\n        <dict>\n          <key>1</key>\n          <dict>\n            <key>name</key>\n            <string>keyword.operator.rest.tsx</string>\n          </dict>\n          <key>2</key>\n          <dict>\n            <key>name</key>\n            <string>punctuation.definition.binding-pattern.object.tsx</string>\n          </dict>\n        </dict>\n        <key>end</key>\n        <string>\\}</string>\n        <key>endCaptures</key>\n        <dict>\n          <key>0</key>\n          <dict>\n            <key>name</key>\n            <string>punctuation.definition.binding-pattern.object.tsx</string>\n          </dict>\n        </dict>\n        <key>patterns</key>\n        <array>\n          <dict>\n            <key>include</key>\n            <string>#parameter-object-binding-element</string>\n          </dict>\n        </array>\n      </dict>\n      <key>parameter-array-binding-pattern</key>\n      <dict>\n        <key>begin</key>\n        <string>(?:(\\.\\.\\.)\\s*)?(\\[)</string>\n        <key>beginCaptures</key>\n        <dict>\n          <key>1</key>\n          <dict>\n            <key>name</key>\n            <string>keyword.operator.rest.tsx</string>\n          </dict>\n          <key>2</key>\n          <dict>\n            <key>name</key>\n            <string>punctuation.definition.binding-pattern.array.tsx</string>\n          </dict>\n        </dict>\n        <key>end</key>\n        <string>\\]</string>\n        <key>endCaptures</key>\n        <dict>\n          <key>0</key>\n          <dict>\n            <key>name</key>\n            <string>punctuation.definition.binding-pattern.array.tsx</string>\n          </dict>\n        </dict>\n        <key>patterns</key>\n        <array>\n          <dict>\n            <key>include</key>\n            <string>#parameter-binding-element</string>\n          </dict>\n          <dict>\n            <key>include</key>\n            <string>#punctuation-comma</string>\n          </dict>\n        </array>\n      </dict>\n      <key>field-declaration</key>\n      <dict>\n        <key>name</key>\n        <string>meta.field.declaration.tsx</string>\n        <key>begin</key>\n        <string>(?x)(?&lt;!\\()(?:(?&lt;![_$[:alnum:]])(?:(?&lt;=\\.\\.\\.)|(?&lt;!\\.))(readonly)\\s+)?(?=\\s*((\\b(?&lt;!\\$)0(x|X)[0-9a-fA-F][0-9a-fA-F_]*\\b(?!\\$))|(\\b(?&lt;!\\$)0(b|B)[01][01_]*\\b(?!\\$))|(\\b(?&lt;!\\$)0(o|O)?[0-7][0-7_]*\\b(?!\\$))|((?&lt;!\\$)(?:\n  (?:\\b[0-9][0-9_]*(\\.)[0-9][0-9_]*[eE][+-]?[0-9][0-9_]*\\b)| # 1.1E+3\n  (?:\\b[0-9][0-9_]*(\\.)[eE][+-]?[0-9][0-9_]*\\b)|             # 1.E+3\n  (?:\\B(\\.)[0-9][0-9_]*[eE][+-]?[0-9][0-9_]*\\b)|             # .1E+3\n  (?:\\b[0-9][0-9_]*[eE][+-]?[0-9][0-9_]*\\b)|                 # 1E+3\n  (?:\\b[0-9][0-9_]*(\\.)[0-9][0-9_]*\\b)|                      # 1.1\n  (?:\\b[0-9][0-9_]*(\\.)\\B)|                                  # 1.\n  (?:\\B(\\.)[0-9][0-9_]*\\b)|                                  # .1\n  (?:\\b[0-9][0-9_]*\\b(?!\\.))                                 # 1\n)(?!\\$))|([_$[:alpha:]][_$[:alnum:]]*)|(\\\'([^\\\'\\\\]|\\\\\\\'|\\\\)*\\\')|(\\"([^\\"\\\\]|\\\\\\"|\\\\)*\\")|(\\[([^\\[\\]]|\\[[^\\[\\]]*\\])+\\]))\\s*(\\?\\s*)?(=|:))</string>\n        <key>beginCaptures</key>\n        <dict>\n          <key>1</key>\n          <dict>\n            <key>name</key>\n            <string>storage.modifier.tsx</string>\n          </dict>\n        </dict>\n        <key>end</key>\n        <string>(?x)(?=\\}|;|,|$|(^(?!\\s*((\\b(?&lt;!\\$)0(x|X)[0-9a-fA-F][0-9a-fA-F_]*\\b(?!\\$))|(\\b(?&lt;!\\$)0(b|B)[01][01_]*\\b(?!\\$))|(\\b(?&lt;!\\$)0(o|O)?[0-7][0-7_]*\\b(?!\\$))|((?&lt;!\\$)(?:\n  (?:\\b[0-9][0-9_]*(\\.)[0-9][0-9_]*[eE][+-]?[0-9][0-9_]*\\b)| # 1.1E+3\n  (?:\\b[0-9][0-9_]*(\\.)[eE][+-]?[0-9][0-9_]*\\b)|             # 1.E+3\n  (?:\\B(\\.)[0-9][0-9_]*[eE][+-]?[0-9][0-9_]*\\b)|             # .1E+3\n  (?:\\b[0-9][0-9_]*[eE][+-]?[0-9][0-9_]*\\b)|                 # 1E+3\n  (?:\\b[0-9][0-9_]*(\\.)[0-9][0-9_]*\\b)|                      # 1.1\n  (?:\\b[0-9][0-9_]*(\\.)\\B)|                                  # 1.\n  (?:\\B(\\.)[0-9][0-9_]*\\b)|                                  # .1\n  (?:\\b[0-9][0-9_]*\\b(?!\\.))                                 # 1\n)(?!\\$))|([_$[:alpha:]][_$[:alnum:]]*)|(\\\'([^\\\'\\\\]|\\\\\\\'|\\\\)*\\\')|(\\"([^\\"\\\\]|\\\\\\"|\\\\)*\\")|(\\[([^\\[\\]]|\\[[^\\[\\]]*\\])+\\]))\\s*(\\?\\s*)?(=|:))))|(?&lt;=\\})</string>\n        <key>patterns</key>\n        <array>\n          <dict>\n            <key>include</key>\n            <string>#variable-initializer</string>\n          </dict>\n          <dict>\n            <key>begin</key>\n            <string>(?x)(?=((\\b(?&lt;!\\$)0(x|X)[0-9a-fA-F][0-9a-fA-F_]*\\b(?!\\$))|(\\b(?&lt;!\\$)0(b|B)[01][01_]*\\b(?!\\$))|(\\b(?&lt;!\\$)0(o|O)?[0-7][0-7_]*\\b(?!\\$))|((?&lt;!\\$)(?:\n  (?:\\b[0-9][0-9_]*(\\.)[0-9][0-9_]*[eE][+-]?[0-9][0-9_]*\\b)| # 1.1E+3\n  (?:\\b[0-9][0-9_]*(\\.)[eE][+-]?[0-9][0-9_]*\\b)|             # 1.E+3\n  (?:\\B(\\.)[0-9][0-9_]*[eE][+-]?[0-9][0-9_]*\\b)|             # .1E+3\n  (?:\\b[0-9][0-9_]*[eE][+-]?[0-9][0-9_]*\\b)|                 # 1E+3\n  (?:\\b[0-9][0-9_]*(\\.)[0-9][0-9_]*\\b)|                      # 1.1\n  (?:\\b[0-9][0-9_]*(\\.)\\B)|                                  # 1.\n  (?:\\B(\\.)[0-9][0-9_]*\\b)|                                  # .1\n  (?:\\b[0-9][0-9_]*\\b(?!\\.))                                 # 1\n)(?!\\$))|([_$[:alpha:]][_$[:alnum:]]*)|(\\\'([^\\\'\\\\]|\\\\\\\'|\\\\)*\\\')|(\\"([^\\"\\\\]|\\\\\\"|\\\\)*\\")|(\\[([^\\[\\]]|\\[[^\\[\\]]*\\])+\\]))\\s*(\\?\\s*)?(=|:))</string>\n            <key>end</key>\n            <string>(?x)(?=[};,=]|$|(^(?!\\s*((\\b(?&lt;!\\$)0(x|X)[0-9a-fA-F][0-9a-fA-F_]*\\b(?!\\$))|(\\b(?&lt;!\\$)0(b|B)[01][01_]*\\b(?!\\$))|(\\b(?&lt;!\\$)0(o|O)?[0-7][0-7_]*\\b(?!\\$))|((?&lt;!\\$)(?:\n  (?:\\b[0-9][0-9_]*(\\.)[0-9][0-9_]*[eE][+-]?[0-9][0-9_]*\\b)| # 1.1E+3\n  (?:\\b[0-9][0-9_]*(\\.)[eE][+-]?[0-9][0-9_]*\\b)|             # 1.E+3\n  (?:\\B(\\.)[0-9][0-9_]*[eE][+-]?[0-9][0-9_]*\\b)|             # .1E+3\n  (?:\\b[0-9][0-9_]*[eE][+-]?[0-9][0-9_]*\\b)|                 # 1E+3\n  (?:\\b[0-9][0-9_]*(\\.)[0-9][0-9_]*\\b)|                      # 1.1\n  (?:\\b[0-9][0-9_]*(\\.)\\B)|                                  # 1.\n  (?:\\B(\\.)[0-9][0-9_]*\\b)|                                  # .1\n  (?:\\b[0-9][0-9_]*\\b(?!\\.))                                 # 1\n)(?!\\$))|([_$[:alpha:]][_$[:alnum:]]*)|(\\\'([^\\\'\\\\]|\\\\\\\'|\\\\)*\\\')|(\\"([^\\"\\\\]|\\\\\\"|\\\\)*\\")|(\\[([^\\[\\]]|\\[[^\\[\\]]*\\])+\\]))\\s*(\\?\\s*)?(=|:))))|(?&lt;=\\})</string>\n            <key>patterns</key>\n            <array>\n              <dict>\n                <key>include</key>\n                <string>#type-annotation</string>\n              </dict>\n              <dict>\n                <key>include</key>\n                <string>#string</string>\n              </dict>\n              <dict>\n                <key>include</key>\n                <string>#array-literal</string>\n              </dict>\n              <dict>\n                <key>include</key>\n                <string>#numeric-literal</string>\n              </dict>\n              <dict>\n                <key>include</key>\n                <string>#comment</string>\n              </dict>\n              <dict>\n                <key>match</key>\n                <string>(?x)([_$[:alpha:]][_$[:alnum:]]*)(\\?)?(?=(\\?\\s*)?\\s*\n# function assignment |\n(=\\s*(\n  ((async\\s+)?(\n    (function\\s*[(&lt;*]) |\n    (function\\s+) |\n    ([_$[:alpha:]][_$[:alnum:]]*\\s*=&gt;)\n  )) |\n  ((async\\s*)?(\n    ([\\(]\\s*([\\{\\[]\\s*)?$) |\n    # sure shot arrow functions even if =&gt; is on new line\n(\n  (&lt;\\s*([_$[:alpha:]]|(\\{([^\\{\\}]|(\\{[^\\{\\}]*\\}))*\\})|(\\(([^\\(\\)]|(\\([^\\(\\)]*\\)))*\\))|(\\[([^\\[\\]]|(\\[[^\\[\\]]*\\]))*\\]))([^=&lt;&gt;]|=[^&lt;]|\\&lt;\\s*([_$[:alpha:]]|(\\{([^\\{\\}]|(\\{[^\\{\\}]*\\}))*\\})|(\\(([^\\(\\)]|(\\([^\\(\\)]*\\)))*\\))|(\\[([^\\[\\]]|(\\[[^\\[\\]]*\\]))*\\]))([^=&lt;&gt;]|=[^&lt;])*\\&gt;)*&gt;\\s*)?\n  [(]\\s*\n  (\n    ([)]\\s*:) |                                                                                       # ():\n    ((\\.\\.\\.\\s*)?[_$[:alpha:]][_$[:alnum:]]*\\s*:)                                                                  # [(]param: | [(]...param:\n  )\n) |\n(\n  [&lt;]\\s*[_$[:alpha:]][_$[:alnum:]]*\\s+extends\\s*[^=&gt;]                                                              # &lt; typeparam extends\n) |\n# arrow function possible to detect only with =&gt; on same line\n(\n  (&lt;\\s*([_$[:alpha:]]|(\\{([^\\{\\}]|(\\{[^\\{\\}]*\\}))*\\})|(\\(([^\\(\\)]|(\\([^\\(\\)]*\\)))*\\))|(\\[([^\\[\\]]|(\\[[^\\[\\]]*\\]))*\\]))([^=&lt;&gt;]|=[^&lt;]|\\&lt;\\s*([_$[:alpha:]]|(\\{([^\\{\\}]|(\\{[^\\{\\}]*\\}))*\\})|(\\(([^\\(\\)]|(\\([^\\(\\)]*\\)))*\\))|(\\[([^\\[\\]]|(\\[[^\\[\\]]*\\]))*\\]))([^=&lt;&gt;]|=[^&lt;])*\\&gt;)*&gt;\\s*)?                                                                                 # typeparameters\n  \\(\\s*(([_$[:alpha:]]|(\\{([^\\{\\}]|(\\{[^\\{\\}]*\\}))*\\})|(\\[([^\\[\\]]|(\\[[^\\[\\]]*\\]))*\\])|(\\.\\.\\.\\s*[_$[:alpha:]]))([^()]|(\\(([^\\(\\)]|(\\([^\\(\\)]*\\)))*\\)))*)?\\)   # parameters\n  (\\s*:\\s*([^&lt;&gt;\\(\\)]|\\&lt;[^&lt;&gt;]+\\&gt;|\\([^\\(\\)]+\\))+)?                                                                        # return type\n  \\s*=&gt;                                                                                               # arrow operator\n)\n  ))\n)) |\n# typeannotation is fn type: &lt; | () | (... | (param: | (param, | (param? | (param= | (param) =&gt;\n(:\\s*(\n  (&lt;) |\n  ([(]\\s*(\n    ([)]) |\n    (\\.\\.\\.) |\n    ([_$[:alnum:]]+\\s*(\n      ([:,?=])|\n      ([)]\\s*=&gt;)\n    ))\n  ))\n)) |\n(:\\s*([\\(]\\s*([\\{\\[]\\s*)?$)) |\n(:\\s*(=&gt;|(\\(([^\\(\\)]|(\\([^\\(\\)]*\\)))*\\))|(&lt;[^&lt;&gt;]*&gt;)|[^&lt;&gt;(),=])+=\\s*(\n  ((async\\s+)?(\n    (function\\s*[(&lt;*]) |\n    (function\\s+) |\n    ([_$[:alpha:]][_$[:alnum:]]*\\s*=&gt;)\n  )) |\n  ((async\\s*)?(\n    ([\\(]\\s*([\\{\\[]\\s*)?$) |\n    # sure shot arrow functions even if =&gt; is on new line\n(\n  (&lt;\\s*([_$[:alpha:]]|(\\{([^\\{\\}]|(\\{[^\\{\\}]*\\}))*\\})|(\\(([^\\(\\)]|(\\([^\\(\\)]*\\)))*\\))|(\\[([^\\[\\]]|(\\[[^\\[\\]]*\\]))*\\]))([^=&lt;&gt;]|=[^&lt;]|\\&lt;\\s*([_$[:alpha:]]|(\\{([^\\{\\}]|(\\{[^\\{\\}]*\\}))*\\})|(\\(([^\\(\\)]|(\\([^\\(\\)]*\\)))*\\))|(\\[([^\\[\\]]|(\\[[^\\[\\]]*\\]))*\\]))([^=&lt;&gt;]|=[^&lt;])*\\&gt;)*&gt;\\s*)?\n  [(]\\s*\n  (\n    ([)]\\s*:) |                                                                                       # ():\n    ((\\.\\.\\.\\s*)?[_$[:alpha:]][_$[:alnum:]]*\\s*:)                                                                  # [(]param: | [(]...param:\n  )\n) |\n(\n  [&lt;]\\s*[_$[:alpha:]][_$[:alnum:]]*\\s+extends\\s*[^=&gt;]                                                              # &lt; typeparam extends\n) |\n# arrow function possible to detect only with =&gt; on same line\n(\n  (&lt;\\s*([_$[:alpha:]]|(\\{([^\\{\\}]|(\\{[^\\{\\}]*\\}))*\\})|(\\(([^\\(\\)]|(\\([^\\(\\)]*\\)))*\\))|(\\[([^\\[\\]]|(\\[[^\\[\\]]*\\]))*\\]))([^=&lt;&gt;]|=[^&lt;]|\\&lt;\\s*([_$[:alpha:]]|(\\{([^\\{\\}]|(\\{[^\\{\\}]*\\}))*\\})|(\\(([^\\(\\)]|(\\([^\\(\\)]*\\)))*\\))|(\\[([^\\[\\]]|(\\[[^\\[\\]]*\\]))*\\]))([^=&lt;&gt;]|=[^&lt;])*\\&gt;)*&gt;\\s*)?                                                                                 # typeparameters\n  \\(\\s*(([_$[:alpha:]]|(\\{([^\\{\\}]|(\\{[^\\{\\}]*\\}))*\\})|(\\[([^\\[\\]]|(\\[[^\\[\\]]*\\]))*\\])|(\\.\\.\\.\\s*[_$[:alpha:]]))([^()]|(\\(([^\\(\\)]|(\\([^\\(\\)]*\\)))*\\)))*)?\\)   # parameters\n  (\\s*:\\s*([^&lt;&gt;\\(\\)]|\\&lt;[^&lt;&gt;]+\\&gt;|\\([^\\(\\)]+\\))+)?                                                                        # return type\n  \\s*=&gt;                                                                                               # arrow operator\n)\n  ))\n)))</string>\n                <key>captures</key>\n                <dict>\n                  <key>1</key>\n                  <dict>\n                    <key>name</key>\n                    <string>meta.definition.property.tsx entity.name.function.tsx</string>\n                  </dict>\n                  <key>2</key>\n                  <dict>\n                    <key>name</key>\n                    <string>keyword.operator.optional.tsx</string>\n                  </dict>\n                </dict>\n              </dict>\n              <dict>\n                <key>name</key>\n                <string>meta.definition.property.tsx variable.object.property.tsx</string>\n                <key>match</key>\n                <string>[_$[:alpha:]][_$[:alnum:]]*</string>\n              </dict>\n              <dict>\n                <key>name</key>\n                <string>keyword.operator.optional.tsx</string>\n                <key>match</key>\n                <string>\\?</string>\n              </dict>\n            </array>\n          </dict>\n        </array>\n      </dict>\n      <key>variable-initializer</key>\n      <dict>\n        <key>patterns</key>\n        <array>\n          <dict>\n            <key>begin</key>\n            <string>(?&lt;!=|!)(=)(?!=)(?=\\s*\\S)</string>\n            <key>beginCaptures</key>\n            <dict>\n              <key>1</key>\n              <dict>\n                <key>name</key>\n                <string>keyword.operator.assignment.tsx</string>\n              </dict>\n            </dict>\n            <key>end</key>\n            <string>(?=$|^|[,);}\\]])</string>\n            <key>patterns</key>\n            <array>\n              <dict>\n                <key>include</key>\n                <string>#expression</string>\n              </dict>\n            </array>\n          </dict>\n          <dict>\n            <key>begin</key>\n            <string>(?&lt;!=|!)(=)(?!=)</string>\n            <key>beginCaptures</key>\n            <dict>\n              <key>1</key>\n              <dict>\n                <key>name</key>\n                <string>keyword.operator.assignment.tsx</string>\n              </dict>\n            </dict>\n            <key>end</key>\n            <string>(?=[,);}\\]])|(?=^\\s*$)|(?&lt;=\\S)(?&lt;!=)(?=\\s*$)</string>\n            <key>patterns</key>\n            <array>\n              <dict>\n                <key>include</key>\n                <string>#expression</string>\n              </dict>\n            </array>\n          </dict>\n        </array>\n      </dict>\n      <key>function-declaration</key>\n      <dict>\n        <key>name</key>\n        <string>meta.function.tsx</string>\n        <key>begin</key>\n        <string>(?&lt;![_$[:alnum:]])(?:(?&lt;=\\.\\.\\.)|(?&lt;!\\.))(?:(export)\\s+)?(?:(async)\\s+)?(function\\b)(?:\\s*(\\*))?(?:(?:\\s+|(?&lt;=\\*))([_$[:alpha:]][_$[:alnum:]]*))?\\s*</string>\n        <key>beginCaptures</key>\n        <dict>\n          <key>1</key>\n          <dict>\n            <key>name</key>\n            <string>keyword.control.export.tsx</string>\n          </dict>\n          <key>2</key>\n          <dict>\n            <key>name</key>\n            <string>storage.modifier.async.tsx</string>\n          </dict>\n          <key>3</key>\n          <dict>\n            <key>name</key>\n            <string>storage.type.function.tsx</string>\n          </dict>\n          <key>4</key>\n          <dict>\n            <key>name</key>\n            <string>keyword.generator.asterisk.tsx</string>\n          </dict>\n          <key>5</key>\n          <dict>\n            <key>name</key>\n            <string>meta.definition.function.tsx entity.name.function.tsx</string>\n          </dict>\n        </dict>\n        <key>end</key>\n        <string>(?=$|^|;)|(?&lt;=\\})</string>\n        <key>patterns</key>\n        <array>\n          <dict>\n            <key>include</key>\n            <string>#function-name</string>\n          </dict>\n          <dict>\n            <key>include</key>\n            <string>#function-body</string>\n          </dict>\n        </array>\n      </dict>\n      <key>function-expression</key>\n      <dict>\n        <key>name</key>\n        <string>meta.function.expression.tsx</string>\n        <key>begin</key>\n        <string>(?&lt;![_$[:alnum:]])(?:(?&lt;=\\.\\.\\.)|(?&lt;!\\.))(?:(async)\\s+)?(function\\b)(?:\\s*(\\*))?(?:(?:\\s+|(?&lt;=\\*))([_$[:alpha:]][_$[:alnum:]]*))?\\s*</string>\n        <key>beginCaptures</key>\n        <dict>\n          <key>1</key>\n          <dict>\n            <key>name</key>\n            <string>storage.modifier.async.tsx</string>\n          </dict>\n          <key>2</key>\n          <dict>\n            <key>name</key>\n            <string>storage.type.function.tsx</string>\n          </dict>\n          <key>3</key>\n          <dict>\n            <key>name</key>\n            <string>keyword.generator.asterisk.tsx</string>\n          </dict>\n          <key>4</key>\n          <dict>\n            <key>name</key>\n            <string>meta.definition.function.tsx entity.name.function.tsx</string>\n          </dict>\n        </dict>\n        <key>end</key>\n        <string>(?&lt;=\\})</string>\n        <key>patterns</key>\n        <array>\n          <dict>\n            <key>include</key>\n            <string>#function-name</string>\n          </dict>\n          <dict>\n            <key>include</key>\n            <string>#function-body</string>\n          </dict>\n        </array>\n      </dict>\n      <key>function-name</key>\n      <dict>\n        <key>name</key>\n        <string>meta.definition.function.tsx entity.name.function.tsx</string>\n        <key>match</key>\n        <string>[_$[:alpha:]][_$[:alnum:]]*</string>\n      </dict>\n      <key>function-body</key>\n      <dict>\n        <key>patterns</key>\n        <array>\n          <dict>\n            <key>include</key>\n            <string>#comment</string>\n          </dict>\n          <dict>\n            <key>include</key>\n            <string>#type-parameters</string>\n          </dict>\n          <dict>\n            <key>include</key>\n            <string>#function-parameters</string>\n          </dict>\n          <dict>\n            <key>include</key>\n            <string>#return-type</string>\n          </dict>\n          <dict>\n            <key>include</key>\n            <string>#decl-block</string>\n          </dict>\n          <dict>\n            <key>name</key>\n            <string>keyword.generator.asterisk.tsx</string>\n            <key>match</key>\n            <string>\\*</string>\n          </dict>\n        </array>\n      </dict>\n      <key>method-declaration</key>\n      <dict>\n        <key>patterns</key>\n        <array>\n          <dict>\n            <key>name</key>\n            <string>meta.method.declaration.tsx</string>\n            <key>begin</key>\n            <string>(?x)(?&lt;![_$[:alnum:]])(?:(?&lt;=\\.\\.\\.)|(?&lt;!\\.))(?:\\b(public|private|protected)\\s+)?(?:\\b(abstract)\\s+)?(?:\\b(async)\\s+)?\\s*\\b(constructor)\\b(?!:)(?![_$[:alnum:]])(?:(?=\\.\\.\\.)|(?!\\.))</string>\n            <key>beginCaptures</key>\n            <dict>\n              <key>1</key>\n              <dict>\n                <key>name</key>\n                <string>storage.modifier.tsx</string>\n              </dict>\n              <key>2</key>\n              <dict>\n                <key>name</key>\n                <string>storage.modifier.tsx</string>\n              </dict>\n              <key>3</key>\n              <dict>\n                <key>name</key>\n                <string>storage.modifier.async.tsx</string>\n              </dict>\n              <key>4</key>\n              <dict>\n                <key>name</key>\n                <string>storage.type.tsx</string>\n              </dict>\n            </dict>\n            <key>end</key>\n            <string>(?=\\}|;|,|$)|(?&lt;=\\})</string>\n            <key>patterns</key>\n            <array>\n              <dict>\n                <key>include</key>\n                <string>#method-declaration-name</string>\n              </dict>\n              <dict>\n                <key>include</key>\n                <string>#function-body</string>\n              </dict>\n            </array>\n          </dict>\n          <dict>\n            <key>name</key>\n            <string>meta.method.declaration.tsx</string>\n            <key>begin</key>\n            <string>(?x)(?&lt;![_$[:alnum:]])(?:(?&lt;=\\.\\.\\.)|(?&lt;!\\.))(?:\\b(public|private|protected)\\s+)?(?:\\b(abstract)\\s+)?(?:\\b(async)\\s+)?(?:(?:\\s*\\b(new)\\b(?!:)(?![_$[:alnum:]])(?:(?=\\.\\.\\.)|(?!\\.)))|(?:(\\*)\\s*)?)(?=\\s*[\\(\\&lt;])</string>\n            <key>beginCaptures</key>\n            <dict>\n              <key>1</key>\n              <dict>\n                <key>name</key>\n                <string>storage.modifier.tsx</string>\n              </dict>\n              <key>2</key>\n              <dict>\n                <key>name</key>\n                <string>storage.modifier.tsx</string>\n              </dict>\n              <key>3</key>\n              <dict>\n                <key>name</key>\n                <string>storage.modifier.async.tsx</string>\n              </dict>\n              <key>4</key>\n              <dict>\n                <key>name</key>\n                <string>keyword.operator.new.tsx</string>\n              </dict>\n              <key>5</key>\n              <dict>\n                <key>name</key>\n                <string>keyword.generator.asterisk.tsx</string>\n              </dict>\n            </dict>\n            <key>end</key>\n            <string>(?=\\}|;|,|$)|(?&lt;=\\})</string>\n            <key>patterns</key>\n            <array>\n              <dict>\n                <key>include</key>\n                <string>#method-declaration-name</string>\n              </dict>\n              <dict>\n                <key>include</key>\n                <string>#function-body</string>\n              </dict>\n            </array>\n          </dict>\n          <dict>\n            <key>name</key>\n            <string>meta.method.declaration.tsx</string>\n            <key>begin</key>\n            <string>(?x)(?&lt;![_$[:alnum:]])(?:(?&lt;=\\.\\.\\.)|(?&lt;!\\.))(?:\\b(public|private|protected)\\s+)?(?:\\b(abstract)\\s+)?(?:\\b(async)\\s+)?(?:\\b(get|set)\\s+)?(?:(\\*)\\s*)?(?=\\s*(((\\b(?&lt;!\\$)0(x|X)[0-9a-fA-F][0-9a-fA-F_]*\\b(?!\\$))|(\\b(?&lt;!\\$)0(b|B)[01][01_]*\\b(?!\\$))|(\\b(?&lt;!\\$)0(o|O)?[0-7][0-7_]*\\b(?!\\$))|((?&lt;!\\$)(?:\n  (?:\\b[0-9][0-9_]*(\\.)[0-9][0-9_]*[eE][+-]?[0-9][0-9_]*\\b)| # 1.1E+3\n  (?:\\b[0-9][0-9_]*(\\.)[eE][+-]?[0-9][0-9_]*\\b)|             # 1.E+3\n  (?:\\B(\\.)[0-9][0-9_]*[eE][+-]?[0-9][0-9_]*\\b)|             # .1E+3\n  (?:\\b[0-9][0-9_]*[eE][+-]?[0-9][0-9_]*\\b)|                 # 1E+3\n  (?:\\b[0-9][0-9_]*(\\.)[0-9][0-9_]*\\b)|                      # 1.1\n  (?:\\b[0-9][0-9_]*(\\.)\\B)|                                  # 1.\n  (?:\\B(\\.)[0-9][0-9_]*\\b)|                                  # .1\n  (?:\\b[0-9][0-9_]*\\b(?!\\.))                                 # 1\n)(?!\\$))|([_$[:alpha:]][_$[:alnum:]]*)|(\\\'([^\\\'\\\\]|\\\\\\\'|\\\\)*\\\')|(\\"([^\\"\\\\]|\\\\\\"|\\\\)*\\")|(\\[([^\\[\\]]|\\[[^\\[\\]]*\\])+\\]))\\s*(\\??))\\s*[\\(\\&lt;])</string>\n            <key>beginCaptures</key>\n            <dict>\n              <key>1</key>\n              <dict>\n                <key>name</key>\n                <string>storage.modifier.tsx</string>\n              </dict>\n              <key>2</key>\n              <dict>\n                <key>name</key>\n                <string>storage.modifier.tsx</string>\n              </dict>\n              <key>3</key>\n              <dict>\n                <key>name</key>\n                <string>storage.modifier.async.tsx</string>\n              </dict>\n              <key>4</key>\n              <dict>\n                <key>name</key>\n                <string>storage.type.property.tsx</string>\n              </dict>\n              <key>5</key>\n              <dict>\n                <key>name</key>\n                <string>keyword.generator.asterisk.tsx</string>\n              </dict>\n            </dict>\n            <key>end</key>\n            <string>(?=\\}|;|,|$)|(?&lt;=\\})</string>\n            <key>patterns</key>\n            <array>\n              <dict>\n                <key>include</key>\n                <string>#method-declaration-name</string>\n              </dict>\n              <dict>\n                <key>include</key>\n                <string>#function-body</string>\n              </dict>\n            </array>\n          </dict>\n        </array>\n      </dict>\n      <key>object-literal-method-declaration</key>\n      <dict>\n        <key>name</key>\n        <string>meta.method.declaration.tsx</string>\n        <key>begin</key>\n        <string>(?x)(?&lt;![_$[:alnum:]])(?:(?&lt;=\\.\\.\\.)|(?&lt;!\\.))(?:\\b(async)\\s+)?(?:\\b(get|set)\\s+)?(?:(\\*)\\s*)?(?=\\s*(((\\b(?&lt;!\\$)0(x|X)[0-9a-fA-F][0-9a-fA-F_]*\\b(?!\\$))|(\\b(?&lt;!\\$)0(b|B)[01][01_]*\\b(?!\\$))|(\\b(?&lt;!\\$)0(o|O)?[0-7][0-7_]*\\b(?!\\$))|((?&lt;!\\$)(?:\n  (?:\\b[0-9][0-9_]*(\\.)[0-9][0-9_]*[eE][+-]?[0-9][0-9_]*\\b)| # 1.1E+3\n  (?:\\b[0-9][0-9_]*(\\.)[eE][+-]?[0-9][0-9_]*\\b)|             # 1.E+3\n  (?:\\B(\\.)[0-9][0-9_]*[eE][+-]?[0-9][0-9_]*\\b)|             # .1E+3\n  (?:\\b[0-9][0-9_]*[eE][+-]?[0-9][0-9_]*\\b)|                 # 1E+3\n  (?:\\b[0-9][0-9_]*(\\.)[0-9][0-9_]*\\b)|                      # 1.1\n  (?:\\b[0-9][0-9_]*(\\.)\\B)|                                  # 1.\n  (?:\\B(\\.)[0-9][0-9_]*\\b)|                                  # .1\n  (?:\\b[0-9][0-9_]*\\b(?!\\.))                                 # 1\n)(?!\\$))|([_$[:alpha:]][_$[:alnum:]]*)|(\\\'([^\\\'\\\\]|\\\\\\\'|\\\\)*\\\')|(\\"([^\\"\\\\]|\\\\\\"|\\\\)*\\")|(\\[([^\\[\\]]|\\[[^\\[\\]]*\\])+\\]))\\s*(\\??))\\s*[\\(\\&lt;])</string>\n        <key>beginCaptures</key>\n        <dict>\n          <key>1</key>\n          <dict>\n            <key>name</key>\n            <string>storage.modifier.async.tsx</string>\n          </dict>\n          <key>2</key>\n          <dict>\n            <key>name</key>\n            <string>storage.type.property.tsx</string>\n          </dict>\n          <key>3</key>\n          <dict>\n            <key>name</key>\n            <string>keyword.generator.asterisk.tsx</string>\n          </dict>\n        </dict>\n        <key>end</key>\n        <string>(?=\\}|;|,)|(?&lt;=\\})</string>\n        <key>patterns</key>\n        <array>\n          <dict>\n            <key>include</key>\n            <string>#method-declaration-name</string>\n          </dict>\n          <dict>\n            <key>include</key>\n            <string>#function-body</string>\n          </dict>\n          <dict>\n            <key>begin</key>\n            <string>(?x)(?&lt;![_$[:alnum:]])(?:(?&lt;=\\.\\.\\.)|(?&lt;!\\.))(?:\\b(async)\\s+)?(?:\\b(get|set)\\s+)?(?:(\\*)\\s*)?(?=\\s*(((\\b(?&lt;!\\$)0(x|X)[0-9a-fA-F][0-9a-fA-F_]*\\b(?!\\$))|(\\b(?&lt;!\\$)0(b|B)[01][01_]*\\b(?!\\$))|(\\b(?&lt;!\\$)0(o|O)?[0-7][0-7_]*\\b(?!\\$))|((?&lt;!\\$)(?:\n  (?:\\b[0-9][0-9_]*(\\.)[0-9][0-9_]*[eE][+-]?[0-9][0-9_]*\\b)| # 1.1E+3\n  (?:\\b[0-9][0-9_]*(\\.)[eE][+-]?[0-9][0-9_]*\\b)|             # 1.E+3\n  (?:\\B(\\.)[0-9][0-9_]*[eE][+-]?[0-9][0-9_]*\\b)|             # .1E+3\n  (?:\\b[0-9][0-9_]*[eE][+-]?[0-9][0-9_]*\\b)|                 # 1E+3\n  (?:\\b[0-9][0-9_]*(\\.)[0-9][0-9_]*\\b)|                      # 1.1\n  (?:\\b[0-9][0-9_]*(\\.)\\B)|                                  # 1.\n  (?:\\B(\\.)[0-9][0-9_]*\\b)|                                  # .1\n  (?:\\b[0-9][0-9_]*\\b(?!\\.))                                 # 1\n)(?!\\$))|([_$[:alpha:]][_$[:alnum:]]*)|(\\\'([^\\\'\\\\]|\\\\\\\'|\\\\)*\\\')|(\\"([^\\"\\\\]|\\\\\\"|\\\\)*\\")|(\\[([^\\[\\]]|\\[[^\\[\\]]*\\])+\\]))\\s*(\\??))\\s*[\\(\\&lt;])</string>\n            <key>beginCaptures</key>\n            <dict>\n              <key>1</key>\n              <dict>\n                <key>name</key>\n                <string>storage.modifier.async.tsx</string>\n              </dict>\n              <key>2</key>\n              <dict>\n                <key>name</key>\n                <string>storage.type.property.tsx</string>\n              </dict>\n              <key>3</key>\n              <dict>\n                <key>name</key>\n                <string>keyword.generator.asterisk.tsx</string>\n              </dict>\n            </dict>\n            <key>end</key>\n            <string>(?=\\(|\\&lt;)</string>\n            <key>patterns</key>\n            <array>\n              <dict>\n                <key>include</key>\n                <string>#method-declaration-name</string>\n              </dict>\n            </array>\n          </dict>\n        </array>\n      </dict>\n      <key>method-declaration-name</key>\n      <dict>\n        <key>begin</key>\n        <string>(?x)(?=((\\b(?&lt;!\\$)0(x|X)[0-9a-fA-F][0-9a-fA-F_]*\\b(?!\\$))|(\\b(?&lt;!\\$)0(b|B)[01][01_]*\\b(?!\\$))|(\\b(?&lt;!\\$)0(o|O)?[0-7][0-7_]*\\b(?!\\$))|((?&lt;!\\$)(?:\n  (?:\\b[0-9][0-9_]*(\\.)[0-9][0-9_]*[eE][+-]?[0-9][0-9_]*\\b)| # 1.1E+3\n  (?:\\b[0-9][0-9_]*(\\.)[eE][+-]?[0-9][0-9_]*\\b)|             # 1.E+3\n  (?:\\B(\\.)[0-9][0-9_]*[eE][+-]?[0-9][0-9_]*\\b)|             # .1E+3\n  (?:\\b[0-9][0-9_]*[eE][+-]?[0-9][0-9_]*\\b)|                 # 1E+3\n  (?:\\b[0-9][0-9_]*(\\.)[0-9][0-9_]*\\b)|                      # 1.1\n  (?:\\b[0-9][0-9_]*(\\.)\\B)|                                  # 1.\n  (?:\\B(\\.)[0-9][0-9_]*\\b)|                                  # .1\n  (?:\\b[0-9][0-9_]*\\b(?!\\.))                                 # 1\n)(?!\\$))|([_$[:alpha:]][_$[:alnum:]]*)|(\\\'([^\\\'\\\\]|\\\\\\\'|\\\\)*\\\')|(\\"([^\\"\\\\]|\\\\\\"|\\\\)*\\")|(\\[([^\\[\\]]|\\[[^\\[\\]]*\\])+\\]))\\s*(\\??)\\s*[\\(\\&lt;])</string>\n        <key>end</key>\n        <string>(?=\\(|\\&lt;)</string>\n        <key>patterns</key>\n        <array>\n          <dict>\n            <key>include</key>\n            <string>#string</string>\n          </dict>\n          <dict>\n            <key>include</key>\n            <string>#array-literal</string>\n          </dict>\n          <dict>\n            <key>include</key>\n            <string>#numeric-literal</string>\n          </dict>\n          <dict>\n            <key>name</key>\n            <string>meta.definition.method.tsx entity.name.function.tsx</string>\n            <key>match</key>\n            <string>[_$[:alpha:]][_$[:alnum:]]*</string>\n          </dict>\n          <dict>\n            <key>name</key>\n            <string>keyword.operator.optional.tsx</string>\n            <key>match</key>\n            <string>\\?</string>\n          </dict>\n        </array>\n      </dict>\n      <key>arrow-function</key>\n      <dict>\n        <key>patterns</key>\n        <array>\n          <dict>\n            <key>name</key>\n            <string>meta.arrow.tsx</string>\n            <key>match</key>\n            <string>(?:(?&lt;![_$[:alnum:]])(?:(?&lt;=\\.\\.\\.)|(?&lt;!\\.))(\\basync)\\s+)?([_$[:alpha:]][_$[:alnum:]]*)\\s*(?==&gt;)</string>\n            <key>captures</key>\n            <dict>\n              <key>1</key>\n              <dict>\n                <key>name</key>\n                <string>storage.modifier.async.tsx</string>\n              </dict>\n              <key>2</key>\n              <dict>\n                <key>name</key>\n                <string>variable.parameter.tsx</string>\n              </dict>\n            </dict>\n          </dict>\n          <dict>\n            <key>name</key>\n            <string>meta.arrow.tsx</string>\n            <key>begin</key>\n            <string>(?x) (?:\n  (?&lt;![_$[:alnum:]])(?:(?&lt;=\\.\\.\\.)|(?&lt;!\\.))(\\basync)\n)? ((?&lt;![})!\\]])\\s*\n  (?=\n    # sure shot arrow functions even if =&gt; is on new line\n(\n  (&lt;\\s*([_$[:alpha:]]|(\\{([^\\{\\}]|(\\{[^\\{\\}]*\\}))*\\})|(\\(([^\\(\\)]|(\\([^\\(\\)]*\\)))*\\))|(\\[([^\\[\\]]|(\\[[^\\[\\]]*\\]))*\\]))([^=&lt;&gt;]|=[^&lt;]|\\&lt;\\s*([_$[:alpha:]]|(\\{([^\\{\\}]|(\\{[^\\{\\}]*\\}))*\\})|(\\(([^\\(\\)]|(\\([^\\(\\)]*\\)))*\\))|(\\[([^\\[\\]]|(\\[[^\\[\\]]*\\]))*\\]))([^=&lt;&gt;]|=[^&lt;])*\\&gt;)*&gt;\\s*)?\n  [(]\\s*\n  (\n    ([)]\\s*:) |                                                                                       # ():\n    ((\\.\\.\\.\\s*)?[_$[:alpha:]][_$[:alnum:]]*\\s*:)                                                                  # [(]param: | [(]...param:\n  )\n) |\n(\n  [&lt;]\\s*[_$[:alpha:]][_$[:alnum:]]*\\s+extends\\s*[^=&gt;]                                                              # &lt; typeparam extends\n) |\n# arrow function possible to detect only with =&gt; on same line\n(\n  (&lt;\\s*([_$[:alpha:]]|(\\{([^\\{\\}]|(\\{[^\\{\\}]*\\}))*\\})|(\\(([^\\(\\)]|(\\([^\\(\\)]*\\)))*\\))|(\\[([^\\[\\]]|(\\[[^\\[\\]]*\\]))*\\]))([^=&lt;&gt;]|=[^&lt;]|\\&lt;\\s*([_$[:alpha:]]|(\\{([^\\{\\}]|(\\{[^\\{\\}]*\\}))*\\})|(\\(([^\\(\\)]|(\\([^\\(\\)]*\\)))*\\))|(\\[([^\\[\\]]|(\\[[^\\[\\]]*\\]))*\\]))([^=&lt;&gt;]|=[^&lt;])*\\&gt;)*&gt;\\s*)?                                                                                 # typeparameters\n  \\(\\s*(([_$[:alpha:]]|(\\{([^\\{\\}]|(\\{[^\\{\\}]*\\}))*\\})|(\\[([^\\[\\]]|(\\[[^\\[\\]]*\\]))*\\])|(\\.\\.\\.\\s*[_$[:alpha:]]))([^()]|(\\(([^\\(\\)]|(\\([^\\(\\)]*\\)))*\\)))*)?\\)   # parameters\n  (\\s*:\\s*([^&lt;&gt;\\(\\)]|\\&lt;[^&lt;&gt;]+\\&gt;|\\([^\\(\\)]+\\))+)?                                                                        # return type\n  \\s*=&gt;                                                                                               # arrow operator\n)\n  )\n)</string>\n            <key>beginCaptures</key>\n            <dict>\n              <key>1</key>\n              <dict>\n                <key>name</key>\n                <string>storage.modifier.async.tsx</string>\n              </dict>\n            </dict>\n            <key>end</key>\n            <string>(?==&gt;|\\{|(^\\s*(export|function|class|interface|let|var|const|import|enum|namespace|module|type|abstract|declare)\\s+))</string>\n            <key>patterns</key>\n            <array>\n              <dict>\n                <key>include</key>\n                <string>#comment</string>\n              </dict>\n              <dict>\n                <key>include</key>\n                <string>#type-parameters</string>\n              </dict>\n              <dict>\n                <key>include</key>\n                <string>#function-parameters</string>\n              </dict>\n              <dict>\n                <key>include</key>\n                <string>#arrow-return-type</string>\n              </dict>\n            </array>\n          </dict>\n          <dict>\n            <key>name</key>\n            <string>meta.arrow.tsx</string>\n            <key>begin</key>\n            <string>=&gt;</string>\n            <key>beginCaptures</key>\n            <dict>\n              <key>0</key>\n              <dict>\n                <key>name</key>\n                <string>storage.type.function.arrow.tsx</string>\n              </dict>\n            </dict>\n            <key>end</key>\n            <string>(?&lt;=\\}|\\S)(?&lt;!=&gt;)|((?!\\{)(?=\\S))</string>\n            <key>patterns</key>\n            <array>\n              <dict>\n                <key>include</key>\n                <string>#decl-block</string>\n              </dict>\n              <dict>\n                <key>include</key>\n                <string>#expression</string>\n              </dict>\n            </array>\n          </dict>\n        </array>\n      </dict>\n      <key>indexer-declaration</key>\n      <dict>\n        <key>name</key>\n        <string>meta.indexer.declaration.tsx</string>\n        <key>begin</key>\n        <string>(?:(?&lt;![_$[:alnum:]])(?:(?&lt;=\\.\\.\\.)|(?&lt;!\\.))(readonly)\\s*)?\\s*(\\[)\\s*([_$[:alpha:]][_$[:alnum:]]*)\\s*(?=:)</string>\n        <key>beginCaptures</key>\n        <dict>\n          <key>1</key>\n          <dict>\n            <key>name</key>\n            <string>storage.modifier.tsx</string>\n          </dict>\n          <key>2</key>\n          <dict>\n            <key>name</key>\n            <string>meta.brace.square.tsx</string>\n          </dict>\n          <key>3</key>\n          <dict>\n            <key>name</key>\n            <string>variable.parameter.tsx</string>\n          </dict>\n        </dict>\n        <key>end</key>\n        <string>(\\])\\s*(\\?\\s*)?|$</string>\n        <key>endCaptures</key>\n        <dict>\n          <key>1</key>\n          <dict>\n            <key>name</key>\n            <string>meta.brace.square.tsx</string>\n          </dict>\n          <key>2</key>\n          <dict>\n            <key>name</key>\n            <string>keyword.operator.optional.tsx</string>\n          </dict>\n        </dict>\n        <key>patterns</key>\n        <array>\n          <dict>\n            <key>include</key>\n            <string>#type-annotation</string>\n          </dict>\n        </array>\n      </dict>\n      <key>indexer-mapped-type-declaration</key>\n      <dict>\n        <key>name</key>\n        <string>meta.indexer.mappedtype.declaration.tsx</string>\n        <key>begin</key>\n        <string>(?:(?&lt;![_$[:alnum:]])(?:(?&lt;=\\.\\.\\.)|(?&lt;!\\.))([+-])?(readonly)\\s*)?\\s*(\\[)\\s*([_$[:alpha:]][_$[:alnum:]]*)\\s+(in)\\s+</string>\n        <key>beginCaptures</key>\n        <dict>\n          <key>1</key>\n          <dict>\n            <key>name</key>\n            <string>keyword.operator.type.modifier.tsx</string>\n          </dict>\n          <key>2</key>\n          <dict>\n            <key>name</key>\n            <string>storage.modifier.tsx</string>\n          </dict>\n          <key>3</key>\n          <dict>\n            <key>name</key>\n            <string>meta.brace.square.tsx</string>\n          </dict>\n          <key>4</key>\n          <dict>\n            <key>name</key>\n            <string>entity.name.type.tsx</string>\n          </dict>\n          <key>5</key>\n          <dict>\n            <key>name</key>\n            <string>keyword.operator.expression.in.tsx</string>\n          </dict>\n        </dict>\n        <key>end</key>\n        <string>(\\])([+-])?\\s*(\\?\\s*)?|$</string>\n        <key>endCaptures</key>\n        <dict>\n          <key>1</key>\n          <dict>\n            <key>name</key>\n            <string>meta.brace.square.tsx</string>\n          </dict>\n          <key>2</key>\n          <dict>\n            <key>name</key>\n            <string>keyword.operator.type.modifier.tsx</string>\n          </dict>\n          <key>3</key>\n          <dict>\n            <key>name</key>\n            <string>keyword.operator.optional.tsx</string>\n          </dict>\n        </dict>\n        <key>patterns</key>\n        <array>\n          <dict>\n            <key>include</key>\n            <string>#type</string>\n          </dict>\n        </array>\n      </dict>\n      <key>function-parameters</key>\n      <dict>\n        <key>name</key>\n        <string>meta.parameters.tsx</string>\n        <key>begin</key>\n        <string>\\(</string>\n        <key>beginCaptures</key>\n        <dict>\n          <key>0</key>\n          <dict>\n            <key>name</key>\n            <string>punctuation.definition.parameters.begin.tsx</string>\n          </dict>\n        </dict>\n        <key>end</key>\n        <string>\\)</string>\n        <key>endCaptures</key>\n        <dict>\n          <key>0</key>\n          <dict>\n            <key>name</key>\n            <string>punctuation.definition.parameters.end.tsx</string>\n          </dict>\n        </dict>\n        <key>patterns</key>\n        <array>\n          <dict>\n            <key>include</key>\n            <string>#function-parameters-body</string>\n          </dict>\n        </array>\n      </dict>\n      <key>function-parameters-body</key>\n      <dict>\n        <key>patterns</key>\n        <array>\n          <dict>\n            <key>include</key>\n            <string>#comment</string>\n          </dict>\n          <dict>\n            <key>include</key>\n            <string>#decorator</string>\n          </dict>\n          <dict>\n            <key>include</key>\n            <string>#destructuring-parameter</string>\n          </dict>\n          <dict>\n            <key>include</key>\n            <string>#parameter-name</string>\n          </dict>\n          <dict>\n            <key>include</key>\n            <string>#type-annotation</string>\n          </dict>\n          <dict>\n            <key>include</key>\n            <string>#variable-initializer</string>\n          </dict>\n          <dict>\n            <key>name</key>\n            <string>punctuation.separator.parameter.tsx</string>\n            <key>match</key>\n            <string>,</string>\n          </dict>\n        </array>\n      </dict>\n      <key>class-declaration</key>\n      <dict>\n        <key>name</key>\n        <string>meta.class.tsx</string>\n        <key>begin</key>\n        <string>(?&lt;![_$[:alnum:]])(?:(?&lt;=\\.\\.\\.)|(?&lt;!\\.))(?:(export)\\s+)?\\b(?:(abstract)\\s+)?\\b(class)\\b(?=\\s+|/[/*])</string>\n        <key>beginCaptures</key>\n        <dict>\n          <key>1</key>\n          <dict>\n            <key>name</key>\n            <string>keyword.control.export.tsx</string>\n          </dict>\n          <key>2</key>\n          <dict>\n            <key>name</key>\n            <string>storage.modifier.tsx</string>\n          </dict>\n          <key>3</key>\n          <dict>\n            <key>name</key>\n            <string>storage.type.class.tsx</string>\n          </dict>\n        </dict>\n        <key>end</key>\n        <string>(?&lt;=\\})</string>\n        <key>patterns</key>\n        <array>\n          <dict>\n            <key>include</key>\n            <string>#class-declaration-or-expression-patterns</string>\n          </dict>\n        </array>\n      </dict>\n      <key>class-expression</key>\n      <dict>\n        <key>name</key>\n        <string>meta.class.tsx</string>\n        <key>begin</key>\n        <string>(?&lt;![_$[:alnum:]])(?:(?&lt;=\\.\\.\\.)|(?&lt;!\\.))(class)\\b(?=\\s+|[&lt;{]|\\/[\\/*])</string>\n        <key>beginCaptures</key>\n        <dict>\n          <key>1</key>\n          <dict>\n            <key>name</key>\n            <string>storage.type.class.tsx</string>\n          </dict>\n        </dict>\n        <key>end</key>\n        <string>(?&lt;=\\})</string>\n        <key>patterns</key>\n        <array>\n          <dict>\n            <key>include</key>\n            <string>#class-declaration-or-expression-patterns</string>\n          </dict>\n        </array>\n      </dict>\n      <key>class-declaration-or-expression-patterns</key>\n      <dict>\n        <key>patterns</key>\n        <array>\n          <dict>\n            <key>include</key>\n            <string>#comment</string>\n          </dict>\n          <dict>\n            <key>include</key>\n            <string>#class-or-interface-heritage</string>\n          </dict>\n          <dict>\n            <key>match</key>\n            <string>[_$[:alpha:]][_$[:alnum:]]*</string>\n            <key>captures</key>\n            <dict>\n              <key>0</key>\n              <dict>\n                <key>name</key>\n                <string>entity.name.type.class.tsx</string>\n              </dict>\n            </dict>\n          </dict>\n          <dict>\n            <key>include</key>\n            <string>#type-parameters</string>\n          </dict>\n          <dict>\n            <key>include</key>\n            <string>#class-or-interface-body</string>\n          </dict>\n        </array>\n      </dict>\n      <key>interface-declaration</key>\n      <dict>\n        <key>name</key>\n        <string>meta.interface.tsx</string>\n        <key>begin</key>\n        <string>(?&lt;![_$[:alnum:]])(?:(?&lt;=\\.\\.\\.)|(?&lt;!\\.))(?:(export)\\s+)?\\b(?:(abstract)\\s+)?\\b(interface)\\b(?=\\s+|/[/*])</string>\n        <key>beginCaptures</key>\n        <dict>\n          <key>1</key>\n          <dict>\n            <key>name</key>\n            <string>keyword.control.export.tsx</string>\n          </dict>\n          <key>2</key>\n          <dict>\n            <key>name</key>\n            <string>storage.modifier.tsx</string>\n          </dict>\n          <key>3</key>\n          <dict>\n            <key>name</key>\n            <string>storage.type.interface.tsx</string>\n          </dict>\n        </dict>\n        <key>end</key>\n        <string>(?&lt;=\\})</string>\n        <key>patterns</key>\n        <array>\n          <dict>\n            <key>include</key>\n            <string>#comment</string>\n          </dict>\n          <dict>\n            <key>include</key>\n            <string>#class-or-interface-heritage</string>\n          </dict>\n          <dict>\n            <key>match</key>\n            <string>[_$[:alpha:]][_$[:alnum:]]*</string>\n            <key>captures</key>\n            <dict>\n              <key>0</key>\n              <dict>\n                <key>name</key>\n                <string>entity.name.type.interface.tsx</string>\n              </dict>\n            </dict>\n          </dict>\n          <dict>\n            <key>include</key>\n            <string>#type-parameters</string>\n          </dict>\n          <dict>\n            <key>include</key>\n            <string>#class-or-interface-body</string>\n          </dict>\n        </array>\n      </dict>\n      <key>class-or-interface-heritage</key>\n      <dict>\n        <key>begin</key>\n        <string>(?&lt;![_$[:alnum:]])(?:(?&lt;=\\.\\.\\.)|(?&lt;!\\.))(?:\\b(extends|implements)\\b)(?![_$[:alnum:]])(?:(?=\\.\\.\\.)|(?!\\.))</string>\n        <key>beginCaptures</key>\n        <dict>\n          <key>1</key>\n          <dict>\n            <key>name</key>\n            <string>storage.modifier.tsx</string>\n          </dict>\n        </dict>\n        <key>end</key>\n        <string>(?=\\{)</string>\n        <key>patterns</key>\n        <array>\n          <dict>\n            <key>include</key>\n            <string>#comment</string>\n          </dict>\n          <dict>\n            <key>include</key>\n            <string>#class-or-interface-heritage</string>\n          </dict>\n          <dict>\n            <key>include</key>\n            <string>#type-parameters</string>\n          </dict>\n          <dict>\n            <key>include</key>\n            <string>#expressionWithoutIdentifiers</string>\n          </dict>\n          <dict>\n            <key>match</key>\n            <string>([_$[:alpha:]][_$[:alnum:]]*)\\s*(?:(\\.)|(\\?\\.(?!\\s*[[:digit:]])))(?=\\s*[_$[:alpha:]][_$[:alnum:]]*(\\s*\\??\\.\\s*[_$[:alpha:]][_$[:alnum:]]*)*\\s*)</string>\n            <key>captures</key>\n            <dict>\n              <key>1</key>\n              <dict>\n                <key>name</key>\n                <string>entity.name.type.module.tsx</string>\n              </dict>\n              <key>2</key>\n              <dict>\n                <key>name</key>\n                <string>punctuation.accessor.tsx</string>\n              </dict>\n              <key>3</key>\n              <dict>\n                <key>name</key>\n                <string>punctuation.accessor.optional.tsx</string>\n              </dict>\n            </dict>\n          </dict>\n          <dict>\n            <key>match</key>\n            <string>([_$[:alpha:]][_$[:alnum:]]*)</string>\n            <key>captures</key>\n            <dict>\n              <key>1</key>\n              <dict>\n                <key>name</key>\n                <string>entity.other.inherited-class.tsx</string>\n              </dict>\n            </dict>\n          </dict>\n          <dict>\n            <key>include</key>\n            <string>#expressionPunctuations</string>\n          </dict>\n        </array>\n      </dict>\n      <key>class-or-interface-body</key>\n      <dict>\n        <key>begin</key>\n        <string>\\{</string>\n        <key>beginCaptures</key>\n        <dict>\n          <key>0</key>\n          <dict>\n            <key>name</key>\n            <string>punctuation.definition.block.tsx</string>\n          </dict>\n        </dict>\n        <key>end</key>\n        <string>\\}</string>\n        <key>endCaptures</key>\n        <dict>\n          <key>0</key>\n          <dict>\n            <key>name</key>\n            <string>punctuation.definition.block.tsx</string>\n          </dict>\n        </dict>\n        <key>patterns</key>\n        <array>\n          <dict>\n            <key>include</key>\n            <string>#comment</string>\n          </dict>\n          <dict>\n            <key>include</key>\n            <string>#decorator</string>\n          </dict>\n          <dict>\n            <key>include</key>\n            <string>#method-declaration</string>\n          </dict>\n          <dict>\n            <key>include</key>\n            <string>#indexer-declaration</string>\n          </dict>\n          <dict>\n            <key>include</key>\n            <string>#field-declaration</string>\n          </dict>\n          <dict>\n            <key>include</key>\n            <string>#string</string>\n          </dict>\n          <dict>\n            <key>include</key>\n            <string>#type-annotation</string>\n          </dict>\n          <dict>\n            <key>include</key>\n            <string>#variable-initializer</string>\n          </dict>\n          <dict>\n            <key>include</key>\n            <string>#access-modifier</string>\n          </dict>\n          <dict>\n            <key>include</key>\n            <string>#property-accessor</string>\n          </dict>\n          <dict>\n            <key>include</key>\n            <string>#async-modifier</string>\n          </dict>\n          <dict>\n            <key>include</key>\n            <string>#after-operator-block-as-object-literal</string>\n          </dict>\n          <dict>\n            <key>include</key>\n            <string>#decl-block</string>\n          </dict>\n          <dict>\n            <key>include</key>\n            <string>#expression</string>\n          </dict>\n          <dict>\n            <key>include</key>\n            <string>#punctuation-comma</string>\n          </dict>\n          <dict>\n            <key>include</key>\n            <string>#punctuation-semicolon</string>\n          </dict>\n        </array>\n      </dict>\n      <key>access-modifier</key>\n      <dict>\n        <key>name</key>\n        <string>storage.modifier.tsx</string>\n        <key>match</key>\n        <string>(?&lt;![_$[:alnum:]])(?:(?&lt;=\\.\\.\\.)|(?&lt;!\\.))(abstract|public|protected|private|readonly|static)(?![_$[:alnum:]])(?:(?=\\.\\.\\.)|(?!\\.))</string>\n      </dict>\n      <key>property-accessor</key>\n      <dict>\n        <key>name</key>\n        <string>storage.type.property.tsx</string>\n        <key>match</key>\n        <string>(?&lt;![_$[:alnum:]])(?:(?&lt;=\\.\\.\\.)|(?&lt;!\\.))(get|set)(?![_$[:alnum:]])(?:(?=\\.\\.\\.)|(?!\\.))</string>\n      </dict>\n      <key>async-modifier</key>\n      <dict>\n        <key>name</key>\n        <string>storage.modifier.async.tsx</string>\n        <key>match</key>\n        <string>(?&lt;![_$[:alnum:]])(?:(?&lt;=\\.\\.\\.)|(?&lt;!\\.))(async)(?![_$[:alnum:]])(?:(?=\\.\\.\\.)|(?!\\.))</string>\n      </dict>\n      <key>enum-declaration</key>\n      <dict>\n        <key>name</key>\n        <string>meta.enum.declaration.tsx</string>\n        <key>begin</key>\n        <string>(?&lt;![_$[:alnum:]])(?:(?&lt;=\\.\\.\\.)|(?&lt;!\\.))(?:(\\bexport)\\s+)?(?:\\b(const)\\s+)?\\b(enum)\\s+([_$[:alpha:]][_$[:alnum:]]*)</string>\n        <key>beginCaptures</key>\n        <dict>\n          <key>1</key>\n          <dict>\n            <key>name</key>\n            <string>keyword.control.export.tsx</string>\n          </dict>\n          <key>2</key>\n          <dict>\n            <key>name</key>\n            <string>storage.modifier.tsx</string>\n          </dict>\n          <key>3</key>\n          <dict>\n            <key>name</key>\n            <string>storage.type.enum.tsx</string>\n          </dict>\n          <key>4</key>\n          <dict>\n            <key>name</key>\n            <string>entity.name.type.enum.tsx</string>\n          </dict>\n        </dict>\n        <key>end</key>\n        <string>(?&lt;=\\})</string>\n        <key>patterns</key>\n        <array>\n          <dict>\n            <key>include</key>\n            <string>#comment</string>\n          </dict>\n          <dict>\n            <key>begin</key>\n            <string>\\{</string>\n            <key>beginCaptures</key>\n            <dict>\n              <key>0</key>\n              <dict>\n                <key>name</key>\n                <string>punctuation.definition.block.tsx</string>\n              </dict>\n            </dict>\n            <key>end</key>\n            <string>\\}</string>\n            <key>endCaptures</key>\n            <dict>\n              <key>0</key>\n              <dict>\n                <key>name</key>\n                <string>punctuation.definition.block.tsx</string>\n              </dict>\n            </dict>\n            <key>patterns</key>\n            <array>\n              <dict>\n                <key>include</key>\n                <string>#comment</string>\n              </dict>\n              <dict>\n                <key>begin</key>\n                <string>([_$[:alpha:]][_$[:alnum:]]*)</string>\n                <key>beginCaptures</key>\n                <dict>\n                  <key>0</key>\n                  <dict>\n                    <key>name</key>\n                    <string>variable.other.enummember.tsx</string>\n                  </dict>\n                </dict>\n                <key>end</key>\n                <string>(?=,|\\}|$)</string>\n                <key>patterns</key>\n                <array>\n                  <dict>\n                    <key>include</key>\n                    <string>#comment</string>\n                  </dict>\n                  <dict>\n                    <key>include</key>\n                    <string>#variable-initializer</string>\n                  </dict>\n                </array>\n              </dict>\n              <dict>\n                <key>begin</key>\n                <string>(?=((\\\'([^\\\'\\\\]|\\\\\\\'|\\\\)*\\\')|(\\"([^\\"\\\\]|\\\\\\"|\\\\)*\\")|(\\[([^\\[\\]]|\\[[^\\[\\]]*\\])+\\])))</string>\n                <key>end</key>\n                <string>(?=,|\\}|$)</string>\n                <key>patterns</key>\n                <array>\n                  <dict>\n                    <key>include</key>\n                    <string>#string</string>\n                  </dict>\n                  <dict>\n                    <key>include</key>\n                    <string>#array-literal</string>\n                  </dict>\n                  <dict>\n                    <key>include</key>\n                    <string>#comment</string>\n                  </dict>\n                  <dict>\n                    <key>include</key>\n                    <string>#variable-initializer</string>\n                  </dict>\n                </array>\n              </dict>\n              <dict>\n                <key>include</key>\n                <string>#punctuation-comma</string>\n              </dict>\n            </array>\n          </dict>\n        </array>\n      </dict>\n      <key>namespace-declaration</key>\n      <dict>\n        <key>name</key>\n        <string>meta.namespace.declaration.tsx</string>\n        <key>begin</key>\n        <string>(?:(?&lt;![_$[:alnum:]])(?:(?&lt;=\\.\\.\\.)|(?&lt;!\\.))(?:(\\bexport)\\s+)?\\b(namespace|module)\\s+(?=[_$[:alpha:]"\'`]))</string>\n        <key>beginCaptures</key>\n        <dict>\n          <key>1</key>\n          <dict>\n            <key>name</key>\n            <string>keyword.control.export.tsx</string>\n          </dict>\n          <key>2</key>\n          <dict>\n            <key>name</key>\n            <string>storage.type.namespace.tsx</string>\n          </dict>\n        </dict>\n        <key>end</key>\n        <string>(?&lt;=\\})|(?=;|\\babstract\\b|\\basync\\b|\\bclass\\b|\\bconst\\b|\\bdeclare\\b|\\benum\\b|\\bexport\\b|\\bfunction\\b|\\bimport\\b|\\binterface\\b|\\blet\\b|\\bmodule\\b|\\bnamespace\\b|\\breturn\\b|\\btype\\b|\\bvar\\b)</string>\n        <key>patterns</key>\n        <array>\n          <dict>\n            <key>include</key>\n            <string>#comment</string>\n          </dict>\n          <dict>\n            <key>include</key>\n            <string>#string</string>\n          </dict>\n          <dict>\n            <key>name</key>\n            <string>entity.name.type.module.tsx</string>\n            <key>match</key>\n            <string>([_$[:alpha:]][_$[:alnum:]]*)</string>\n          </dict>\n          <dict>\n            <key>include</key>\n            <string>#punctuation-accessor</string>\n          </dict>\n          <dict>\n            <key>include</key>\n            <string>#decl-block</string>\n          </dict>\n        </array>\n      </dict>\n      <key>type-alias-declaration</key>\n      <dict>\n        <key>name</key>\n        <string>meta.type.declaration.tsx</string>\n        <key>begin</key>\n        <string>(?&lt;![_$[:alnum:]])(?:(?&lt;=\\.\\.\\.)|(?&lt;!\\.))(?:(\\bexport)\\s+)?\\b(type)\\b\\s+([_$[:alpha:]][_$[:alnum:]]*)\\s*</string>\n        <key>beginCaptures</key>\n        <dict>\n          <key>1</key>\n          <dict>\n            <key>name</key>\n            <string>keyword.control.export.tsx</string>\n          </dict>\n          <key>2</key>\n          <dict>\n            <key>name</key>\n            <string>storage.type.type.tsx</string>\n          </dict>\n          <key>3</key>\n          <dict>\n            <key>name</key>\n            <string>entity.name.type.alias.tsx</string>\n          </dict>\n        </dict>\n        <key>end</key>\n        <string>(?=\\}|;|\\babstract\\b|\\basync\\b|\\bclass\\b|\\bconst\\b|\\bdeclare\\b|\\benum\\b|\\bexport\\b|\\bfunction\\b|\\bimport\\b|\\binterface\\b|\\blet\\b|\\bmodule\\b|\\bnamespace\\b|\\breturn\\b|\\btype\\b|\\bvar\\b)</string>\n        <key>patterns</key>\n        <array>\n          <dict>\n            <key>include</key>\n            <string>#comment</string>\n          </dict>\n          <dict>\n            <key>include</key>\n            <string>#type-parameters</string>\n          </dict>\n          <dict>\n            <key>begin</key>\n            <string>(=)\\s*</string>\n            <key>beginCaptures</key>\n            <dict>\n              <key>1</key>\n              <dict>\n                <key>name</key>\n                <string>keyword.operator.assignment.tsx</string>\n              </dict>\n            </dict>\n            <key>end</key>\n            <string>(?=\\}|;|\\babstract\\b|\\basync\\b|\\bclass\\b|\\bconst\\b|\\bdeclare\\b|\\benum\\b|\\bexport\\b|\\bfunction\\b|\\bimport\\b|\\binterface\\b|\\blet\\b|\\bmodule\\b|\\bnamespace\\b|\\breturn\\b|\\btype\\b|\\bvar\\b)</string>\n            <key>patterns</key>\n            <array>\n              <dict>\n                <key>include</key>\n                <string>#type</string>\n              </dict>\n            </array>\n          </dict>\n        </array>\n      </dict>\n      <key>import-equals-declaration</key>\n      <dict>\n        <key>patterns</key>\n        <array>\n          <dict>\n            <key>name</key>\n            <string>meta.import-equals.external.tsx</string>\n            <key>begin</key>\n            <string>(?&lt;![_$[:alnum:]])(?:(?&lt;=\\.\\.\\.)|(?&lt;!\\.))(?:(\\bexport)\\s+)?\\b(import)\\s+([_$[:alpha:]][_$[:alnum:]]*)\\s*(=)\\s*(require)\\s*(\\()</string>\n            <key>beginCaptures</key>\n            <dict>\n              <key>1</key>\n              <dict>\n                <key>name</key>\n                <string>keyword.control.export.tsx</string>\n              </dict>\n              <key>2</key>\n              <dict>\n                <key>name</key>\n                <string>keyword.control.import.tsx</string>\n              </dict>\n              <key>3</key>\n              <dict>\n                <key>name</key>\n                <string>variable.other.readwrite.alias.tsx</string>\n              </dict>\n              <key>4</key>\n              <dict>\n                <key>name</key>\n                <string>keyword.operator.assignment.tsx</string>\n              </dict>\n              <key>5</key>\n              <dict>\n                <key>name</key>\n                <string>keyword.control.require.tsx</string>\n              </dict>\n              <key>6</key>\n              <dict>\n                <key>name</key>\n                <string>meta.brace.round.tsx</string>\n              </dict>\n            </dict>\n            <key>end</key>\n            <string>\\)</string>\n            <key>endCaptures</key>\n            <dict>\n              <key>0</key>\n              <dict>\n                <key>name</key>\n                <string>meta.brace.round.tsx</string>\n              </dict>\n            </dict>\n            <key>patterns</key>\n            <array>\n              <dict>\n                <key>include</key>\n                <string>#comment</string>\n              </dict>\n              <dict>\n                <key>include</key>\n                <string>#string</string>\n              </dict>\n            </array>\n          </dict>\n          <dict>\n            <key>name</key>\n            <string>meta.import-equals.internal.tsx</string>\n            <key>begin</key>\n            <string>(?&lt;![_$[:alnum:]])(?:(?&lt;=\\.\\.\\.)|(?&lt;!\\.))(?:(\\bexport)\\s+)?\\b(import)\\s+([_$[:alpha:]][_$[:alnum:]]*)\\s*(=)\\s*(?!require\\b)</string>\n            <key>beginCaptures</key>\n            <dict>\n              <key>1</key>\n              <dict>\n                <key>name</key>\n                <string>keyword.control.export.tsx</string>\n              </dict>\n              <key>2</key>\n              <dict>\n                <key>name</key>\n                <string>keyword.control.import.tsx</string>\n              </dict>\n              <key>3</key>\n              <dict>\n                <key>name</key>\n                <string>variable.other.readwrite.alias.tsx</string>\n              </dict>\n              <key>4</key>\n              <dict>\n                <key>name</key>\n                <string>keyword.operator.assignment.tsx</string>\n              </dict>\n            </dict>\n            <key>end</key>\n            <string>(?=;|$|^)</string>\n            <key>patterns</key>\n            <array>\n              <dict>\n                <key>include</key>\n                <string>#comment</string>\n              </dict>\n              <dict>\n                <key>match</key>\n                <string>([_$[:alpha:]][_$[:alnum:]]*)\\s*(?:(\\.)|(\\?\\.(?!\\s*[[:digit:]])))</string>\n                <key>captures</key>\n                <dict>\n                  <key>1</key>\n                  <dict>\n                    <key>name</key>\n                    <string>entity.name.type.module.tsx</string>\n                  </dict>\n                  <key>2</key>\n                  <dict>\n                    <key>name</key>\n                    <string>punctuation.accessor.tsx</string>\n                  </dict>\n                  <key>3</key>\n                  <dict>\n                    <key>name</key>\n                    <string>punctuation.accessor.optional.tsx</string>\n                  </dict>\n                </dict>\n              </dict>\n              <dict>\n                <key>name</key>\n                <string>variable.other.readwrite.tsx</string>\n                <key>match</key>\n                <string>([_$[:alpha:]][_$[:alnum:]]*)</string>\n              </dict>\n            </array>\n          </dict>\n        </array>\n      </dict>\n      <key>import-declaration</key>\n      <dict>\n        <key>name</key>\n        <string>meta.import.tsx</string>\n        <key>begin</key>\n        <string>(?&lt;![_$[:alnum:]])(?:(?&lt;=\\.\\.\\.)|(?&lt;!\\.))(?:(\\bexport)\\s+)?\\b(import)(?!\\s*[:\\(])(?![_$[:alnum:]])(?:(?=\\.\\.\\.)|(?!\\.))</string>\n        <key>beginCaptures</key>\n        <dict>\n          <key>1</key>\n          <dict>\n            <key>name</key>\n            <string>keyword.control.export.tsx</string>\n          </dict>\n          <key>2</key>\n          <dict>\n            <key>name</key>\n            <string>keyword.control.import.tsx</string>\n          </dict>\n        </dict>\n        <key>end</key>\n        <string>(?&lt;!^import|[^\\._$[:alnum:]]import)(?=;|$|^)</string>\n        <key>patterns</key>\n        <array>\n          <dict>\n            <key>include</key>\n            <string>#comment</string>\n          </dict>\n          <dict>\n            <key>include</key>\n            <string>#string</string>\n          </dict>\n          <dict>\n            <key>begin</key>\n            <string>(?&lt;=^import|[^\\._$[:alnum:]]import)(?!\\s*["\'])</string>\n            <key>end</key>\n            <string>\\bfrom\\b</string>\n            <key>endCaptures</key>\n            <dict>\n              <key>0</key>\n              <dict>\n                <key>name</key>\n                <string>keyword.control.from.tsx</string>\n              </dict>\n            </dict>\n            <key>patterns</key>\n            <array>\n              <dict>\n                <key>include</key>\n                <string>#import-export-declaration</string>\n              </dict>\n            </array>\n          </dict>\n          <dict>\n            <key>include</key>\n            <string>#import-export-declaration</string>\n          </dict>\n        </array>\n      </dict>\n      <key>export-declaration</key>\n      <dict>\n        <key>patterns</key>\n        <array>\n          <dict>\n            <key>match</key>\n            <string>(?&lt;![_$[:alnum:]])(?:(?&lt;=\\.\\.\\.)|(?&lt;!\\.))(export)\\s+(as)\\s+(namespace)\\s+([_$[:alpha:]][_$[:alnum:]]*)</string>\n            <key>captures</key>\n            <dict>\n              <key>1</key>\n              <dict>\n                <key>name</key>\n                <string>keyword.control.export.tsx</string>\n              </dict>\n              <key>2</key>\n              <dict>\n                <key>name</key>\n                <string>keyword.control.as.tsx</string>\n              </dict>\n              <key>3</key>\n              <dict>\n                <key>name</key>\n                <string>storage.type.namespace.tsx</string>\n              </dict>\n              <key>4</key>\n              <dict>\n                <key>name</key>\n                <string>entity.name.type.module.tsx</string>\n              </dict>\n            </dict>\n          </dict>\n          <dict>\n            <key>name</key>\n            <string>meta.export.default.tsx</string>\n            <key>begin</key>\n            <string>(?&lt;![_$[:alnum:]])(?:(?&lt;=\\.\\.\\.)|(?&lt;!\\.))(export)(?:(?:\\s*(=))|(?:\\s+(default)(?=\\s+)))</string>\n            <key>beginCaptures</key>\n            <dict>\n              <key>1</key>\n              <dict>\n                <key>name</key>\n                <string>keyword.control.export.tsx</string>\n              </dict>\n              <key>2</key>\n              <dict>\n                <key>name</key>\n                <string>keyword.operator.assignment.tsx</string>\n              </dict>\n              <key>3</key>\n              <dict>\n                <key>name</key>\n                <string>keyword.control.default.tsx</string>\n              </dict>\n            </dict>\n            <key>end</key>\n            <string>(?=$|;|\\babstract\\b|\\basync\\b|\\bclass\\b|\\bconst\\b|\\bdeclare\\b|\\benum\\b|\\bexport\\b|\\bfunction\\b|\\bimport\\b|\\binterface\\b|\\blet\\b|\\bmodule\\b|\\bnamespace\\b|\\breturn\\b|\\btype\\b|\\bvar\\b)</string>\n            <key>patterns</key>\n            <array>\n              <dict>\n                <key>include</key>\n                <string>#expression</string>\n              </dict>\n            </array>\n          </dict>\n          <dict>\n            <key>name</key>\n            <string>meta.export.tsx</string>\n            <key>begin</key>\n            <string>(?&lt;![_$[:alnum:]])(?:(?&lt;=\\.\\.\\.)|(?&lt;!\\.))(export)(?!\\s*:)(?![_$[:alnum:]])(?:(?=\\.\\.\\.)|(?!\\.))</string>\n            <key>beginCaptures</key>\n            <dict>\n              <key>0</key>\n              <dict>\n                <key>name</key>\n                <string>keyword.control.export.tsx</string>\n              </dict>\n            </dict>\n            <key>end</key>\n            <string>(?=$|;|\\babstract\\b|\\basync\\b|\\bclass\\b|\\bconst\\b|\\bdeclare\\b|\\benum\\b|\\bexport\\b|\\bfunction\\b|\\bimport\\b|\\binterface\\b|\\blet\\b|\\bmodule\\b|\\bnamespace\\b|\\breturn\\b|\\btype\\b|\\bvar\\b)</string>\n            <key>patterns</key>\n            <array>\n              <dict>\n                <key>include</key>\n                <string>#import-export-declaration</string>\n              </dict>\n            </array>\n          </dict>\n        </array>\n      </dict>\n      <key>import-export-declaration</key>\n      <dict>\n        <key>patterns</key>\n        <array>\n          <dict>\n            <key>include</key>\n            <string>#comment</string>\n          </dict>\n          <dict>\n            <key>include</key>\n            <string>#string</string>\n          </dict>\n          <dict>\n            <key>include</key>\n            <string>#import-export-block</string>\n          </dict>\n          <dict>\n            <key>name</key>\n            <string>keyword.control.from.tsx</string>\n            <key>match</key>\n            <string>\\bfrom\\b</string>\n          </dict>\n          <dict>\n            <key>include</key>\n            <string>#import-export-clause</string>\n          </dict>\n        </array>\n      </dict>\n      <key>import-export-block</key>\n      <dict>\n        <key>name</key>\n        <string>meta.block.tsx</string>\n        <key>begin</key>\n        <string>\\{</string>\n        <key>beginCaptures</key>\n        <dict>\n          <key>0</key>\n          <dict>\n            <key>name</key>\n            <string>punctuation.definition.block.tsx</string>\n          </dict>\n        </dict>\n        <key>end</key>\n        <string>\\}</string>\n        <key>endCaptures</key>\n        <dict>\n          <key>0</key>\n          <dict>\n            <key>name</key>\n            <string>punctuation.definition.block.tsx</string>\n          </dict>\n        </dict>\n        <key>patterns</key>\n        <array>\n          <dict>\n            <key>include</key>\n            <string>#import-export-clause</string>\n          </dict>\n        </array>\n      </dict>\n      <key>import-export-clause</key>\n      <dict>\n        <key>patterns</key>\n        <array>\n          <dict>\n            <key>include</key>\n            <string>#comment</string>\n          </dict>\n          <dict>\n            <key>match</key>\n            <string>(?&lt;![_$[:alnum:]])(?:(?&lt;=\\.\\.\\.)|(?&lt;!\\.))(?:(\\bdefault)|(\\*)|(\\b[_$[:alpha:]][_$[:alnum:]]*))\\s+(as)\\s+(?:(\\bdefault(?![_$[:alnum:]])(?:(?=\\.\\.\\.)|(?!\\.)))|(\\b[_$[:alpha:]][_$[:alnum:]]*))</string>\n            <key>captures</key>\n            <dict>\n              <key>1</key>\n              <dict>\n                <key>name</key>\n                <string>keyword.control.default.tsx</string>\n              </dict>\n              <key>2</key>\n              <dict>\n                <key>name</key>\n                <string>constant.language.import-export-all.tsx</string>\n              </dict>\n              <key>3</key>\n              <dict>\n                <key>name</key>\n                <string>variable.other.readwrite.tsx</string>\n              </dict>\n              <key>4</key>\n              <dict>\n                <key>name</key>\n                <string>keyword.control.as.tsx</string>\n              </dict>\n              <key>5</key>\n              <dict>\n                <key>name</key>\n                <string>keyword.control.default.tsx</string>\n              </dict>\n              <key>6</key>\n              <dict>\n                <key>name</key>\n                <string>variable.other.readwrite.alias.tsx</string>\n              </dict>\n            </dict>\n          </dict>\n          <dict>\n            <key>include</key>\n            <string>#punctuation-comma</string>\n          </dict>\n          <dict>\n            <key>name</key>\n            <string>constant.language.import-export-all.tsx</string>\n            <key>match</key>\n            <string>\\*</string>\n          </dict>\n          <dict>\n            <key>name</key>\n            <string>keyword.control.default.tsx</string>\n            <key>match</key>\n            <string>\\b(default)\\b</string>\n          </dict>\n          <dict>\n            <key>name</key>\n            <string>variable.other.readwrite.alias.tsx</string>\n            <key>match</key>\n            <string>([_$[:alpha:]][_$[:alnum:]]*)</string>\n          </dict>\n        </array>\n      </dict>\n      <key>switch-statement</key>\n      <dict>\n        <key>name</key>\n        <string>switch-statement.expr.tsx</string>\n        <key>begin</key>\n        <string>(?&lt;![_$[:alnum:]])(?:(?&lt;=\\.\\.\\.)|(?&lt;!\\.))(?=\\bswitch\\s*\\()</string>\n        <key>end</key>\n        <string>\\}</string>\n        <key>endCaptures</key>\n        <dict>\n          <key>0</key>\n          <dict>\n            <key>name</key>\n            <string>punctuation.definition.block.tsx</string>\n          </dict>\n        </dict>\n        <key>patterns</key>\n        <array>\n          <dict>\n            <key>name</key>\n            <string>switch-expression.expr.tsx</string>\n            <key>begin</key>\n            <string>(?&lt;![_$[:alnum:]])(?:(?&lt;=\\.\\.\\.)|(?&lt;!\\.))(switch)\\s*(\\()</string>\n            <key>beginCaptures</key>\n            <dict>\n              <key>1</key>\n              <dict>\n                <key>name</key>\n                <string>keyword.control.switch.tsx</string>\n              </dict>\n              <key>2</key>\n              <dict>\n                <key>name</key>\n                <string>meta.brace.round.tsx</string>\n              </dict>\n            </dict>\n            <key>end</key>\n            <string>\\)</string>\n            <key>endCaptures</key>\n            <dict>\n              <key>0</key>\n              <dict>\n                <key>name</key>\n                <string>meta.brace.round.tsx</string>\n              </dict>\n            </dict>\n            <key>patterns</key>\n            <array>\n              <dict>\n                <key>include</key>\n                <string>#expression</string>\n              </dict>\n            </array>\n          </dict>\n          <dict>\n            <key>name</key>\n            <string>switch-block.expr.tsx</string>\n            <key>begin</key>\n            <string>\\{</string>\n            <key>beginCaptures</key>\n            <dict>\n              <key>0</key>\n              <dict>\n                <key>name</key>\n                <string>punctuation.definition.block.tsx</string>\n              </dict>\n            </dict>\n            <key>end</key>\n            <string>(?=\\})</string>\n            <key>patterns</key>\n            <array>\n              <dict>\n                <key>name</key>\n                <string>case-clause.expr.tsx</string>\n                <key>begin</key>\n                <string>(?&lt;![_$[:alnum:]])(?:(?&lt;=\\.\\.\\.)|(?&lt;!\\.))(case|default(?=:))(?![_$[:alnum:]])(?:(?=\\.\\.\\.)|(?!\\.))</string>\n                <key>beginCaptures</key>\n                <dict>\n                  <key>1</key>\n                  <dict>\n                    <key>name</key>\n                    <string>keyword.control.switch.tsx</string>\n                  </dict>\n                </dict>\n                <key>end</key>\n                <string>(?=:)</string>\n                <key>patterns</key>\n                <array>\n                  <dict>\n                    <key>include</key>\n                    <string>#expression</string>\n                  </dict>\n                </array>\n              </dict>\n              <dict>\n                <key>begin</key>\n                <string>(:)\\s*(\\{)</string>\n                <key>beginCaptures</key>\n                <dict>\n                  <key>1</key>\n                  <dict>\n                    <key>name</key>\n                    <string>case-clause.expr.tsx punctuation.definition.section.case-statement.tsx</string>\n                  </dict>\n                  <key>2</key>\n                  <dict>\n                    <key>name</key>\n                    <string>meta.block.tsx punctuation.definition.block.tsx</string>\n                  </dict>\n                </dict>\n                <key>end</key>\n                <string>\\}</string>\n                <key>endCaptures</key>\n                <dict>\n                  <key>0</key>\n                  <dict>\n                    <key>name</key>\n                    <string>meta.block.tsx punctuation.definition.block.tsx</string>\n                  </dict>\n                </dict>\n                <key>contentName</key>\n                <string>meta.block.tsx</string>\n                <key>patterns</key>\n                <array>\n                  <dict>\n                    <key>include</key>\n                    <string>#statements</string>\n                  </dict>\n                </array>\n              </dict>\n              <dict>\n                <key>match</key>\n                <string>(:)</string>\n                <key>captures</key>\n                <dict>\n                  <key>0</key>\n                  <dict>\n                    <key>name</key>\n                    <string>case-clause.expr.tsx punctuation.definition.section.case-statement.tsx</string>\n                  </dict>\n                </dict>\n              </dict>\n              <dict>\n                <key>include</key>\n                <string>#statements</string>\n              </dict>\n            </array>\n          </dict>\n        </array>\n      </dict>\n      <key>for-loop</key>\n      <dict>\n        <key>begin</key>\n        <string>(?&lt;![_$[:alnum:]])(?:(?&lt;=\\.\\.\\.)|(?&lt;!\\.))for(?=((\\s+|(\\s*\\/\\*([^\\*]|(\\*[^\\/]))*\\*\\/\\s*))await)?\\s*(\\/\\*([^\\*]|(\\*[^\\/]))*\\*\\/\\s*)?(\\())</string>\n        <key>beginCaptures</key>\n        <dict>\n          <key>0</key>\n          <dict>\n            <key>name</key>\n            <string>keyword.control.loop.tsx</string>\n          </dict>\n        </dict>\n        <key>end</key>\n        <string>(?&lt;=\\))</string>\n        <key>patterns</key>\n        <array>\n          <dict>\n            <key>include</key>\n            <string>#comment</string>\n          </dict>\n          <dict>\n            <key>name</key>\n            <string>keyword.control.loop.tsx</string>\n            <key>match</key>\n            <string>await</string>\n          </dict>\n          <dict>\n            <key>begin</key>\n            <string>\\(</string>\n            <key>beginCaptures</key>\n            <dict>\n              <key>0</key>\n              <dict>\n                <key>name</key>\n                <string>meta.brace.round.tsx</string>\n              </dict>\n            </dict>\n            <key>end</key>\n            <string>\\)</string>\n            <key>endCaptures</key>\n            <dict>\n              <key>0</key>\n              <dict>\n                <key>name</key>\n                <string>meta.brace.round.tsx</string>\n              </dict>\n            </dict>\n            <key>patterns</key>\n            <array>\n              <dict>\n                <key>include</key>\n                <string>#var-expr</string>\n              </dict>\n              <dict>\n                <key>include</key>\n                <string>#expression</string>\n              </dict>\n              <dict>\n                <key>include</key>\n                <string>#punctuation-semicolon</string>\n              </dict>\n            </array>\n          </dict>\n        </array>\n      </dict>\n      <key>decl-block</key>\n      <dict>\n        <key>name</key>\n        <string>meta.block.tsx</string>\n        <key>begin</key>\n        <string>\\{</string>\n        <key>beginCaptures</key>\n        <dict>\n          <key>0</key>\n          <dict>\n            <key>name</key>\n            <string>punctuation.definition.block.tsx</string>\n          </dict>\n        </dict>\n        <key>end</key>\n        <string>\\}</string>\n        <key>endCaptures</key>\n        <dict>\n          <key>0</key>\n          <dict>\n            <key>name</key>\n            <string>punctuation.definition.block.tsx</string>\n          </dict>\n        </dict>\n        <key>patterns</key>\n        <array>\n          <dict>\n            <key>include</key>\n            <string>#statements</string>\n          </dict>\n        </array>\n      </dict>\n      <key>after-operator-block-as-object-literal</key>\n      <dict>\n        <key>name</key>\n        <string>meta.objectliteral.tsx</string>\n        <key>begin</key>\n        <string>(?&lt;!\\+\\+|--)(?&lt;=[:=(,\\[?+!&gt;]|^await|[^\\._$[:alnum:]]await|^return|[^\\._$[:alnum:]]return|^yield|[^\\._$[:alnum:]]yield|^throw|[^\\._$[:alnum:]]throw|^in|[^\\._$[:alnum:]]in|^of|[^\\._$[:alnum:]]of|^typeof|[^\\._$[:alnum:]]typeof|&amp;&amp;|\\|\\||\\*)\\s*(\\{)</string>\n        <key>beginCaptures</key>\n        <dict>\n          <key>1</key>\n          <dict>\n            <key>name</key>\n            <string>punctuation.definition.block.tsx</string>\n          </dict>\n        </dict>\n        <key>end</key>\n        <string>\\}</string>\n        <key>endCaptures</key>\n        <dict>\n          <key>0</key>\n          <dict>\n            <key>name</key>\n            <string>punctuation.definition.block.tsx</string>\n          </dict>\n        </dict>\n        <key>patterns</key>\n        <array>\n          <dict>\n            <key>include</key>\n            <string>#object-member</string>\n          </dict>\n        </array>\n      </dict>\n      <key>object-literal</key>\n      <dict>\n        <key>name</key>\n        <string>meta.objectliteral.tsx</string>\n        <key>begin</key>\n        <string>\\{</string>\n        <key>beginCaptures</key>\n        <dict>\n          <key>0</key>\n          <dict>\n            <key>name</key>\n            <string>punctuation.definition.block.tsx</string>\n          </dict>\n        </dict>\n        <key>end</key>\n        <string>\\}</string>\n        <key>endCaptures</key>\n        <dict>\n          <key>0</key>\n          <dict>\n            <key>name</key>\n            <string>punctuation.definition.block.tsx</string>\n          </dict>\n        </dict>\n        <key>patterns</key>\n        <array>\n          <dict>\n            <key>include</key>\n            <string>#object-member</string>\n          </dict>\n        </array>\n      </dict>\n      <key>object-member</key>\n      <dict>\n        <key>patterns</key>\n        <array>\n          <dict>\n            <key>include</key>\n            <string>#comment</string>\n          </dict>\n          <dict>\n            <key>include</key>\n            <string>#object-literal-method-declaration</string>\n          </dict>\n          <dict>\n            <key>name</key>\n            <string>meta.object.member.tsx meta.object-literal.key.tsx</string>\n            <key>begin</key>\n            <string>(?=\\[)</string>\n            <key>end</key>\n            <string>(?=:)|((?&lt;=[\\]])(?=\\s*[\\(\\&lt;]))</string>\n            <key>patterns</key>\n            <array>\n              <dict>\n                <key>include</key>\n                <string>#array-literal</string>\n              </dict>\n            </array>\n          </dict>\n          <dict>\n            <key>name</key>\n            <string>meta.object.member.tsx meta.object-literal.key.tsx</string>\n            <key>begin</key>\n            <string>(?=[\\\'\\"])</string>\n            <key>end</key>\n            <string>(?=:)|((?&lt;=[\\\'\\"])(?=\\s*[\\(\\&lt;]))</string>\n            <key>patterns</key>\n            <array>\n              <dict>\n                <key>include</key>\n                <string>#string</string>\n              </dict>\n            </array>\n          </dict>\n          <dict>\n            <key>name</key>\n            <string>meta.method.declaration.tsx</string>\n            <key>begin</key>\n            <string>(?&lt;=[\\]\\\'\\"])(?=\\s*[\\(\\&lt;])</string>\n            <key>end</key>\n            <string>(?=\\}|;|,)|(?&lt;=\\})</string>\n            <key>patterns</key>\n            <array>\n              <dict>\n                <key>include</key>\n                <string>#function-body</string>\n              </dict>\n            </array>\n          </dict>\n          <dict>\n            <key>name</key>\n            <string>meta.object.member.tsx</string>\n            <key>match</key>\n            <string>(?![_$[:alpha:]])([[:digit:]]+)\\s*(?=:)</string>\n            <key>captures</key>\n            <dict>\n              <key>0</key>\n              <dict>\n                <key>name</key>\n                <string>meta.object-literal.key.tsx</string>\n              </dict>\n              <key>1</key>\n              <dict>\n                <key>name</key>\n                <string>constant.numeric.decimal.tsx</string>\n              </dict>\n            </dict>\n          </dict>\n          <dict>\n            <key>name</key>\n            <string>meta.object.member.tsx</string>\n            <key>match</key>\n            <string>(?x)(?:([_$[:alpha:]][_$[:alnum:]]*)\\s*(?=:\\s*(\n  ((async\\s+)?(\n    (function\\s*[(&lt;*]) |\n    (function\\s+) |\n    ([_$[:alpha:]][_$[:alnum:]]*\\s*=&gt;)\n  )) |\n  ((async\\s*)?(\n    ([\\(]\\s*([\\{\\[]\\s*)?$) |\n    # sure shot arrow functions even if =&gt; is on new line\n(\n  (&lt;\\s*([_$[:alpha:]]|(\\{([^\\{\\}]|(\\{[^\\{\\}]*\\}))*\\})|(\\(([^\\(\\)]|(\\([^\\(\\)]*\\)))*\\))|(\\[([^\\[\\]]|(\\[[^\\[\\]]*\\]))*\\]))([^=&lt;&gt;]|=[^&lt;]|\\&lt;\\s*([_$[:alpha:]]|(\\{([^\\{\\}]|(\\{[^\\{\\}]*\\}))*\\})|(\\(([^\\(\\)]|(\\([^\\(\\)]*\\)))*\\))|(\\[([^\\[\\]]|(\\[[^\\[\\]]*\\]))*\\]))([^=&lt;&gt;]|=[^&lt;])*\\&gt;)*&gt;\\s*)?\n  [(]\\s*\n  (\n    ([)]\\s*:) |                                                                                       # ():\n    ((\\.\\.\\.\\s*)?[_$[:alpha:]][_$[:alnum:]]*\\s*:)                                                                  # [(]param: | [(]...param:\n  )\n) |\n(\n  [&lt;]\\s*[_$[:alpha:]][_$[:alnum:]]*\\s+extends\\s*[^=&gt;]                                                              # &lt; typeparam extends\n) |\n# arrow function possible to detect only with =&gt; on same line\n(\n  (&lt;\\s*([_$[:alpha:]]|(\\{([^\\{\\}]|(\\{[^\\{\\}]*\\}))*\\})|(\\(([^\\(\\)]|(\\([^\\(\\)]*\\)))*\\))|(\\[([^\\[\\]]|(\\[[^\\[\\]]*\\]))*\\]))([^=&lt;&gt;]|=[^&lt;]|\\&lt;\\s*([_$[:alpha:]]|(\\{([^\\{\\}]|(\\{[^\\{\\}]*\\}))*\\})|(\\(([^\\(\\)]|(\\([^\\(\\)]*\\)))*\\))|(\\[([^\\[\\]]|(\\[[^\\[\\]]*\\]))*\\]))([^=&lt;&gt;]|=[^&lt;])*\\&gt;)*&gt;\\s*)?                                                                                 # typeparameters\n  \\(\\s*(([_$[:alpha:]]|(\\{([^\\{\\}]|(\\{[^\\{\\}]*\\}))*\\})|(\\[([^\\[\\]]|(\\[[^\\[\\]]*\\]))*\\])|(\\.\\.\\.\\s*[_$[:alpha:]]))([^()]|(\\(([^\\(\\)]|(\\([^\\(\\)]*\\)))*\\)))*)?\\)   # parameters\n  (\\s*:\\s*([^&lt;&gt;\\(\\)]|\\&lt;[^&lt;&gt;]+\\&gt;|\\([^\\(\\)]+\\))+)?                                                                        # return type\n  \\s*=&gt;                                                                                               # arrow operator\n)\n  ))\n)))</string>\n            <key>captures</key>\n            <dict>\n              <key>0</key>\n              <dict>\n                <key>name</key>\n                <string>meta.object-literal.key.tsx</string>\n              </dict>\n              <key>1</key>\n              <dict>\n                <key>name</key>\n                <string>entity.name.function.tsx</string>\n              </dict>\n            </dict>\n          </dict>\n          <dict>\n            <key>name</key>\n            <string>meta.object.member.tsx</string>\n            <key>match</key>\n            <string>(?:[_$[:alpha:]][_$[:alnum:]]*)\\s*(?=:)</string>\n            <key>captures</key>\n            <dict>\n              <key>0</key>\n              <dict>\n                <key>name</key>\n                <string>meta.object-literal.key.tsx</string>\n              </dict>\n            </dict>\n          </dict>\n          <dict>\n            <key>name</key>\n            <string>meta.object.member.tsx</string>\n            <key>begin</key>\n            <string>\\.\\.\\.</string>\n            <key>beginCaptures</key>\n            <dict>\n              <key>0</key>\n              <dict>\n                <key>name</key>\n                <string>keyword.operator.spread.tsx</string>\n              </dict>\n            </dict>\n            <key>end</key>\n            <string>(?=,|\\})</string>\n            <key>patterns</key>\n            <array>\n              <dict>\n                <key>include</key>\n                <string>#expression</string>\n              </dict>\n            </array>\n          </dict>\n          <dict>\n            <key>name</key>\n            <string>meta.object.member.tsx</string>\n            <key>match</key>\n            <string>([_$[:alpha:]][_$[:alnum:]]*)\\s*(?=,|\\}|$)</string>\n            <key>captures</key>\n            <dict>\n              <key>1</key>\n              <dict>\n                <key>name</key>\n                <string>variable.other.readwrite.tsx</string>\n              </dict>\n            </dict>\n          </dict>\n          <dict>\n            <key>name</key>\n            <string>meta.object.member.tsx</string>\n            <key>begin</key>\n            <string>(?=[_$[:alpha:]][_$[:alnum:]]*\\s*=)</string>\n            <key>end</key>\n            <string>(?=,|\\}|$)</string>\n            <key>patterns</key>\n            <array>\n              <dict>\n                <key>include</key>\n                <string>#expression</string>\n              </dict>\n            </array>\n          </dict>\n          <dict>\n            <key>name</key>\n            <string>meta.object.member.tsx</string>\n            <key>begin</key>\n            <string>:</string>\n            <key>beginCaptures</key>\n            <dict>\n              <key>0</key>\n              <dict>\n                <key>name</key>\n                <string>meta.object-literal.key.tsx punctuation.separator.key-value.tsx</string>\n              </dict>\n            </dict>\n            <key>end</key>\n            <string>(?=,|\\})</string>\n            <key>patterns</key>\n            <array>\n              <dict>\n                <key>begin</key>\n                <string>(?&lt;=:)\\s*(async)?(?=\\s*(&lt;\\s*([_$[:alpha:]]|(\\{([^\\{\\}]|(\\{[^\\{\\}]*\\}))*\\})|(\\(([^\\(\\)]|(\\([^\\(\\)]*\\)))*\\))|(\\[([^\\[\\]]|(\\[[^\\[\\]]*\\]))*\\]))([^=&lt;&gt;]|=[^&lt;]|\\&lt;\\s*([_$[:alpha:]]|(\\{([^\\{\\}]|(\\{[^\\{\\}]*\\}))*\\})|(\\(([^\\(\\)]|(\\([^\\(\\)]*\\)))*\\))|(\\[([^\\[\\]]|(\\[[^\\[\\]]*\\]))*\\]))([^=&lt;&gt;]|=[^&lt;])*\\&gt;)*&gt;\\s*)\\(\\s*([\\{\\[]\\s*)?$)</string>\n                <key>beginCaptures</key>\n                <dict>\n                  <key>1</key>\n                  <dict>\n                    <key>name</key>\n                    <string>storage.modifier.async.tsx</string>\n                  </dict>\n                </dict>\n                <key>end</key>\n                <string>(?&lt;=\\))</string>\n                <key>patterns</key>\n                <array>\n                  <dict>\n                    <key>include</key>\n                    <string>#type-parameters</string>\n                  </dict>\n                  <dict>\n                    <key>begin</key>\n                    <string>\\(</string>\n                    <key>beginCaptures</key>\n                    <dict>\n                      <key>0</key>\n                      <dict>\n                        <key>name</key>\n                        <string>meta.brace.round.tsx</string>\n                      </dict>\n                    </dict>\n                    <key>end</key>\n                    <string>\\)</string>\n                    <key>endCaptures</key>\n                    <dict>\n                      <key>0</key>\n                      <dict>\n                        <key>name</key>\n                        <string>meta.brace.round.tsx</string>\n                      </dict>\n                    </dict>\n                    <key>patterns</key>\n                    <array>\n                      <dict>\n                        <key>include</key>\n                        <string>#expression-inside-possibly-arrow-parens</string>\n                      </dict>\n                    </array>\n                  </dict>\n                </array>\n              </dict>\n              <dict>\n                <key>begin</key>\n                <string>(?&lt;=:)\\s*(async)?\\s*(\\()(?=\\s*([\\{\\[]\\s*)?$)</string>\n                <key>beginCaptures</key>\n                <dict>\n                  <key>1</key>\n                  <dict>\n                    <key>name</key>\n                    <string>storage.modifier.async.tsx</string>\n                  </dict>\n                  <key>2</key>\n                  <dict>\n                    <key>name</key>\n                    <string>meta.brace.round.tsx</string>\n                  </dict>\n                </dict>\n                <key>end</key>\n                <string>\\)</string>\n                <key>endCaptures</key>\n                <dict>\n                  <key>0</key>\n                  <dict>\n                    <key>name</key>\n                    <string>meta.brace.round.tsx</string>\n                  </dict>\n                </dict>\n                <key>patterns</key>\n                <array>\n                  <dict>\n                    <key>include</key>\n                    <string>#expression-inside-possibly-arrow-parens</string>\n                  </dict>\n                </array>\n              </dict>\n              <dict>\n                <key>include</key>\n                <string>#expression</string>\n              </dict>\n            </array>\n          </dict>\n          <dict>\n            <key>include</key>\n            <string>#punctuation-comma</string>\n          </dict>\n        </array>\n      </dict>\n      <key>ternary-expression</key>\n      <dict>\n        <key>begin</key>\n        <string>(?!\\?\\.\\s*[^[:digit:]])(\\?)</string>\n        <key>beginCaptures</key>\n        <dict>\n          <key>1</key>\n          <dict>\n            <key>name</key>\n            <string>keyword.operator.ternary.tsx</string>\n          </dict>\n        </dict>\n        <key>end</key>\n        <string>\\s*(:)</string>\n        <key>endCaptures</key>\n        <dict>\n          <key>1</key>\n          <dict>\n            <key>name</key>\n            <string>keyword.operator.ternary.tsx</string>\n          </dict>\n        </dict>\n        <key>patterns</key>\n        <array>\n          <dict>\n            <key>include</key>\n            <string>#expression</string>\n          </dict>\n        </array>\n      </dict>\n      <key>function-call</key>\n      <dict>\n        <key>begin</key>\n        <string>(?=(([_$[:alpha:]][_$[:alnum:]]*\\s*\\??\\.\\s*)*|(\\??\\.\\s*)?)([_$[:alpha:]][_$[:alnum:]]*)\\s*(\\?\\.\\s*)?(&lt;\\s*(((keyof|infer)\\s+)|(([_$[:alpha:]][_$[:alnum:]]*|(\\{([^\\{\\}]|(\\{[^\\{\\}]*\\}))*\\})|(\\(([^\\(\\)]|(\\([^\\(\\)]*\\)))*\\))|(\\[([^\\[\\]]|(\\[[^\\[\\]]*\\]))*\\])|(\\\'[^\\\']*\\\')|(\\"[^\\"]*\\")|(\\`[^\\`]*\\`))(?=\\s*([\\&lt;\\&gt;\\,\\.\\[=]|&amp;(?!&amp;)|\\|(?!\\|)))))([^&lt;&gt;\\(]|(\\(([^\\(\\)]|(\\([^\\(\\)]*\\)))*\\))|(?&lt;==)\\&gt;|\\&lt;\\s*(((keyof|infer)\\s+)|(([_$[:alpha:]][_$[:alnum:]]*|(\\{([^\\{\\}]|(\\{[^\\{\\}]*\\}))*\\})|(\\(([^\\(\\)]|(\\([^\\(\\)]*\\)))*\\))|(\\[([^\\[\\]]|(\\[[^\\[\\]]*\\]))*\\])|(\\\'[^\\\']*\\\')|(\\"[^\\"]*\\")|(\\`[^\\`]*\\`))(?=\\s*([\\&lt;\\&gt;\\,\\.\\[=]|&amp;(?!&amp;)|\\|(?!\\|)))))([^&lt;&gt;\\(]|(\\(([^\\(\\)]|(\\([^\\(\\)]*\\)))*\\))|(?&lt;==)\\&gt;)*(?!=)\\&gt;)*(?!=)&gt;\\s*)?\\()</string>\n        <key>end</key>\n        <string>(?&lt;=\\))(?!(([_$[:alpha:]][_$[:alnum:]]*\\s*\\??\\.\\s*)*|(\\??\\.\\s*)?)([_$[:alpha:]][_$[:alnum:]]*)\\s*(\\?\\.\\s*)?(&lt;\\s*(((keyof|infer)\\s+)|(([_$[:alpha:]][_$[:alnum:]]*|(\\{([^\\{\\}]|(\\{[^\\{\\}]*\\}))*\\})|(\\(([^\\(\\)]|(\\([^\\(\\)]*\\)))*\\))|(\\[([^\\[\\]]|(\\[[^\\[\\]]*\\]))*\\])|(\\\'[^\\\']*\\\')|(\\"[^\\"]*\\")|(\\`[^\\`]*\\`))(?=\\s*([\\&lt;\\&gt;\\,\\.\\[=]|&amp;(?!&amp;)|\\|(?!\\|)))))([^&lt;&gt;\\(]|(\\(([^\\(\\)]|(\\([^\\(\\)]*\\)))*\\))|(?&lt;==)\\&gt;|\\&lt;\\s*(((keyof|infer)\\s+)|(([_$[:alpha:]][_$[:alnum:]]*|(\\{([^\\{\\}]|(\\{[^\\{\\}]*\\}))*\\})|(\\(([^\\(\\)]|(\\([^\\(\\)]*\\)))*\\))|(\\[([^\\[\\]]|(\\[[^\\[\\]]*\\]))*\\])|(\\\'[^\\\']*\\\')|(\\"[^\\"]*\\")|(\\`[^\\`]*\\`))(?=\\s*([\\&lt;\\&gt;\\,\\.\\[=]|&amp;(?!&amp;)|\\|(?!\\|)))))([^&lt;&gt;\\(]|(\\(([^\\(\\)]|(\\([^\\(\\)]*\\)))*\\))|(?&lt;==)\\&gt;)*(?!=)\\&gt;)*(?!=)&gt;\\s*)?\\()</string>\n        <key>patterns</key>\n        <array>\n          <dict>\n            <key>name</key>\n            <string>meta.function-call.tsx</string>\n            <key>begin</key>\n            <string>(?=(([_$[:alpha:]][_$[:alnum:]]*\\s*\\??\\.\\s*)*|(\\??\\.\\s*)?)([_$[:alpha:]][_$[:alnum:]]*))</string>\n            <key>end</key>\n            <string>(?=\\s*(\\?\\.\\s*)?(&lt;\\s*(((keyof|infer)\\s+)|(([_$[:alpha:]][_$[:alnum:]]*|(\\{([^\\{\\}]|(\\{[^\\{\\}]*\\}))*\\})|(\\(([^\\(\\)]|(\\([^\\(\\)]*\\)))*\\))|(\\[([^\\[\\]]|(\\[[^\\[\\]]*\\]))*\\])|(\\\'[^\\\']*\\\')|(\\"[^\\"]*\\")|(\\`[^\\`]*\\`))(?=\\s*([\\&lt;\\&gt;\\,\\.\\[=]|&amp;(?!&amp;)|\\|(?!\\|)))))([^&lt;&gt;\\(]|(\\(([^\\(\\)]|(\\([^\\(\\)]*\\)))*\\))|(?&lt;==)\\&gt;|\\&lt;\\s*(((keyof|infer)\\s+)|(([_$[:alpha:]][_$[:alnum:]]*|(\\{([^\\{\\}]|(\\{[^\\{\\}]*\\}))*\\})|(\\(([^\\(\\)]|(\\([^\\(\\)]*\\)))*\\))|(\\[([^\\[\\]]|(\\[[^\\[\\]]*\\]))*\\])|(\\\'[^\\\']*\\\')|(\\"[^\\"]*\\")|(\\`[^\\`]*\\`))(?=\\s*([\\&lt;\\&gt;\\,\\.\\[=]|&amp;(?!&amp;)|\\|(?!\\|)))))([^&lt;&gt;\\(]|(\\(([^\\(\\)]|(\\([^\\(\\)]*\\)))*\\))|(?&lt;==)\\&gt;)*(?!=)\\&gt;)*(?!=)&gt;\\s*)?\\()</string>\n            <key>patterns</key>\n            <array>\n              <dict>\n                <key>include</key>\n                <string>#literal</string>\n              </dict>\n              <dict>\n                <key>include</key>\n                <string>#support-objects</string>\n              </dict>\n              <dict>\n                <key>include</key>\n                <string>#object-identifiers</string>\n              </dict>\n              <dict>\n                <key>include</key>\n                <string>#punctuation-accessor</string>\n              </dict>\n              <dict>\n                <key>name</key>\n                <string>keyword.operator.expression.import.tsx</string>\n                <key>match</key>\n                <string>(?:(?&lt;![_$[:alnum:]])(?:(?&lt;=\\.\\.\\.)|(?&lt;!\\.))import(?=\\s*[\\(]\\s*[\\"\\\'\\`]))</string>\n              </dict>\n              <dict>\n                <key>name</key>\n                <string>entity.name.function.tsx</string>\n                <key>match</key>\n                <string>([_$[:alpha:]][_$[:alnum:]]*)</string>\n              </dict>\n            </array>\n          </dict>\n          <dict>\n            <key>include</key>\n            <string>#comment</string>\n          </dict>\n          <dict>\n            <key>name</key>\n            <string>meta.function-call.tsx punctuation.accessor.optional.tsx</string>\n            <key>match</key>\n            <string>\\?\\.</string>\n          </dict>\n          <dict>\n            <key>include</key>\n            <string>#type-arguments</string>\n          </dict>\n          <dict>\n            <key>include</key>\n            <string>#paren-expression</string>\n          </dict>\n        </array>\n      </dict>\n      <key>new-expr</key>\n      <dict>\n        <key>name</key>\n        <string>new.expr.tsx</string>\n        <key>begin</key>\n        <string>(?&lt;![_$[:alnum:]])(?:(?&lt;=\\.\\.\\.)|(?&lt;!\\.))(new)(?![_$[:alnum:]])(?:(?=\\.\\.\\.)|(?!\\.))</string>\n        <key>beginCaptures</key>\n        <dict>\n          <key>1</key>\n          <dict>\n            <key>name</key>\n            <string>keyword.operator.new.tsx</string>\n          </dict>\n        </dict>\n        <key>end</key>\n        <string>(?&lt;=\\))|(?=[;),}\\]:]|\\|\\||\\&amp;\\&amp;|$|((?&lt;![_$[:alnum:]])(?:(?&lt;=\\.\\.\\.)|(?&lt;!\\.))new(?![_$[:alnum:]])(?:(?=\\.\\.\\.)|(?!\\.)))|((?&lt;![_$[:alnum:]])(?:(?&lt;=\\.\\.\\.)|(?&lt;!\\.))function((\\s+[_$[:alpha:]][_$[:alnum:]]*)|(\\s*[\\(]))))</string>\n        <key>patterns</key>\n        <array>\n          <dict>\n            <key>include</key>\n            <string>#paren-expression</string>\n          </dict>\n          <dict>\n            <key>include</key>\n            <string>#class-declaration</string>\n          </dict>\n          <dict>\n            <key>include</key>\n            <string>#type</string>\n          </dict>\n        </array>\n      </dict>\n      <key>instanceof-expr</key>\n      <dict>\n        <key>begin</key>\n        <string>(?&lt;![_$[:alnum:]])(?:(?&lt;=\\.\\.\\.)|(?&lt;!\\.))(instanceof)(?![_$[:alnum:]])(?:(?=\\.\\.\\.)|(?!\\.))</string>\n        <key>beginCaptures</key>\n        <dict>\n          <key>1</key>\n          <dict>\n            <key>name</key>\n            <string>keyword.operator.expression.instanceof.tsx</string>\n          </dict>\n        </dict>\n        <key>end</key>\n        <string>(?&lt;=\\))|(?=[;),}\\]:?]|\\|\\||\\&amp;\\&amp;|$|((?&lt;![_$[:alnum:]])(?:(?&lt;=\\.\\.\\.)|(?&lt;!\\.))function((\\s+[_$[:alpha:]][_$[:alnum:]]*)|(\\s*[\\(]))))</string>\n        <key>patterns</key>\n        <array>\n          <dict>\n            <key>include</key>\n            <string>#type</string>\n          </dict>\n        </array>\n      </dict>\n      <key>paren-expression-possibly-arrow</key>\n      <dict>\n        <key>patterns</key>\n        <array>\n          <dict>\n            <key>begin</key>\n            <string>(?&lt;=[(=,])\\s*(async)?(?=\\s*((&lt;\\s*([_$[:alpha:]]|(\\{([^\\{\\}]|(\\{[^\\{\\}]*\\}))*\\})|(\\(([^\\(\\)]|(\\([^\\(\\)]*\\)))*\\))|(\\[([^\\[\\]]|(\\[[^\\[\\]]*\\]))*\\]))([^=&lt;&gt;]|=[^&lt;]|\\&lt;\\s*([_$[:alpha:]]|(\\{([^\\{\\}]|(\\{[^\\{\\}]*\\}))*\\})|(\\(([^\\(\\)]|(\\([^\\(\\)]*\\)))*\\))|(\\[([^\\[\\]]|(\\[[^\\[\\]]*\\]))*\\]))([^=&lt;&gt;]|=[^&lt;])*\\&gt;)*&gt;\\s*))?\\(\\s*[\\{\\[]\\s*$)</string>\n            <key>beginCaptures</key>\n            <dict>\n              <key>1</key>\n              <dict>\n                <key>name</key>\n                <string>storage.modifier.async.tsx</string>\n              </dict>\n            </dict>\n            <key>end</key>\n            <string>(?&lt;=\\))</string>\n            <key>patterns</key>\n            <array>\n              <dict>\n                <key>include</key>\n                <string>#paren-expression-possibly-arrow-with-typeparameters</string>\n              </dict>\n            </array>\n          </dict>\n          <dict>\n            <key>begin</key>\n            <string>(?&lt;=[(=,]|=&gt;)\\s*(async)?(?=\\s*((&lt;\\s*([_$[:alpha:]]|(\\{([^\\{\\}]|(\\{[^\\{\\}]*\\}))*\\})|(\\(([^\\(\\)]|(\\([^\\(\\)]*\\)))*\\))|(\\[([^\\[\\]]|(\\[[^\\[\\]]*\\]))*\\]))([^=&lt;&gt;]|=[^&lt;]|\\&lt;\\s*([_$[:alpha:]]|(\\{([^\\{\\}]|(\\{[^\\{\\}]*\\}))*\\})|(\\(([^\\(\\)]|(\\([^\\(\\)]*\\)))*\\))|(\\[([^\\[\\]]|(\\[[^\\[\\]]*\\]))*\\]))([^=&lt;&gt;]|=[^&lt;])*\\&gt;)*&gt;\\s*))?\\(\\s*$)</string>\n            <key>beginCaptures</key>\n            <dict>\n              <key>1</key>\n              <dict>\n                <key>name</key>\n                <string>storage.modifier.async.tsx</string>\n              </dict>\n            </dict>\n            <key>end</key>\n            <string>(?&lt;=\\))</string>\n            <key>patterns</key>\n            <array>\n              <dict>\n                <key>include</key>\n                <string>#paren-expression-possibly-arrow-with-typeparameters</string>\n              </dict>\n            </array>\n          </dict>\n          <dict>\n            <key>include</key>\n            <string>#possibly-arrow-return-type</string>\n          </dict>\n        </array>\n      </dict>\n      <key>paren-expression-possibly-arrow-with-typeparameters</key>\n      <dict>\n        <key>patterns</key>\n        <array>\n          <dict>\n            <key>include</key>\n            <string>#type-parameters</string>\n          </dict>\n          <dict>\n            <key>begin</key>\n            <string>\\(</string>\n            <key>beginCaptures</key>\n            <dict>\n              <key>0</key>\n              <dict>\n                <key>name</key>\n                <string>meta.brace.round.tsx</string>\n              </dict>\n            </dict>\n            <key>end</key>\n            <string>\\)</string>\n            <key>endCaptures</key>\n            <dict>\n              <key>0</key>\n              <dict>\n                <key>name</key>\n                <string>meta.brace.round.tsx</string>\n              </dict>\n            </dict>\n            <key>patterns</key>\n            <array>\n              <dict>\n                <key>include</key>\n                <string>#expression-inside-possibly-arrow-parens</string>\n              </dict>\n            </array>\n          </dict>\n        </array>\n      </dict>\n      <key>expression-inside-possibly-arrow-parens</key>\n      <dict>\n        <key>patterns</key>\n        <array>\n          <dict>\n            <key>include</key>\n            <string>#expressionWithoutIdentifiers</string>\n          </dict>\n          <dict>\n            <key>include</key>\n            <string>#function-parameters-body</string>\n          </dict>\n          <dict>\n            <key>include</key>\n            <string>#identifiers</string>\n          </dict>\n          <dict>\n            <key>include</key>\n            <string>#expressionPunctuations</string>\n          </dict>\n        </array>\n      </dict>\n      <key>paren-expression</key>\n      <dict>\n        <key>begin</key>\n        <string>\\(</string>\n        <key>beginCaptures</key>\n        <dict>\n          <key>0</key>\n          <dict>\n            <key>name</key>\n            <string>meta.brace.round.tsx</string>\n          </dict>\n        </dict>\n        <key>end</key>\n        <string>\\)</string>\n        <key>endCaptures</key>\n        <dict>\n          <key>0</key>\n          <dict>\n            <key>name</key>\n            <string>meta.brace.round.tsx</string>\n          </dict>\n        </dict>\n        <key>patterns</key>\n        <array>\n          <dict>\n            <key>include</key>\n            <string>#expression</string>\n          </dict>\n        </array>\n      </dict>\n      <key>cast</key>\n      <dict>\n        <key>patterns</key>\n        <array>\n          <dict>\n            <key>include</key>\n            <string>#jsx</string>\n          </dict>\n        </array>\n      </dict>\n      <key>expression-operators</key>\n      <dict>\n        <key>patterns</key>\n        <array>\n          <dict>\n            <key>name</key>\n            <string>keyword.control.flow.tsx</string>\n            <key>match</key>\n            <string>(?&lt;![_$[:alnum:]])(?:(?&lt;=\\.\\.\\.)|(?&lt;!\\.))(await)(?![_$[:alnum:]])(?:(?=\\.\\.\\.)|(?!\\.))</string>\n          </dict>\n          <dict>\n            <key>begin</key>\n            <string>(?&lt;![_$[:alnum:]])(?:(?&lt;=\\.\\.\\.)|(?&lt;!\\.))(yield)(?![_$[:alnum:]])(?:(?=\\.\\.\\.)|(?!\\.))(?=\\s*\\/\\*([^\\*]|(\\*[^\\/]))*\\*\\/\\s*\\*)</string>\n            <key>beginCaptures</key>\n            <dict>\n              <key>1</key>\n              <dict>\n                <key>name</key>\n                <string>keyword.control.flow.tsx</string>\n              </dict>\n            </dict>\n            <key>end</key>\n            <string>\\*</string>\n            <key>endCaptures</key>\n            <dict>\n              <key>0</key>\n              <dict>\n                <key>name</key>\n                <string>keyword.generator.asterisk.tsx</string>\n              </dict>\n            </dict>\n            <key>patterns</key>\n            <array>\n              <dict>\n                <key>include</key>\n                <string>#comment</string>\n              </dict>\n            </array>\n          </dict>\n          <dict>\n            <key>match</key>\n            <string>(?&lt;![_$[:alnum:]])(?:(?&lt;=\\.\\.\\.)|(?&lt;!\\.))(yield)(?![_$[:alnum:]])(?:(?=\\.\\.\\.)|(?!\\.))(?:\\s*(\\*))?</string>\n            <key>captures</key>\n            <dict>\n              <key>1</key>\n              <dict>\n                <key>name</key>\n                <string>keyword.control.flow.tsx</string>\n              </dict>\n              <key>2</key>\n              <dict>\n                <key>name</key>\n                <string>keyword.generator.asterisk.tsx</string>\n              </dict>\n            </dict>\n          </dict>\n          <dict>\n            <key>name</key>\n            <string>keyword.operator.expression.delete.tsx</string>\n            <key>match</key>\n            <string>(?&lt;![_$[:alnum:]])(?:(?&lt;=\\.\\.\\.)|(?&lt;!\\.))delete(?![_$[:alnum:]])(?:(?=\\.\\.\\.)|(?!\\.))</string>\n          </dict>\n          <dict>\n            <key>name</key>\n            <string>keyword.operator.expression.in.tsx</string>\n            <key>match</key>\n            <string>(?&lt;![_$[:alnum:]])(?:(?&lt;=\\.\\.\\.)|(?&lt;!\\.))in(?![_$[:alnum:]])(?:(?=\\.\\.\\.)|(?!\\.))(?!\\()</string>\n          </dict>\n          <dict>\n            <key>name</key>\n            <string>keyword.operator.expression.of.tsx</string>\n            <key>match</key>\n            <string>(?&lt;![_$[:alnum:]])(?:(?&lt;=\\.\\.\\.)|(?&lt;!\\.))of(?![_$[:alnum:]])(?:(?=\\.\\.\\.)|(?!\\.))(?!\\()</string>\n          </dict>\n          <dict>\n            <key>name</key>\n            <string>keyword.operator.expression.instanceof.tsx</string>\n            <key>match</key>\n            <string>(?&lt;![_$[:alnum:]])(?:(?&lt;=\\.\\.\\.)|(?&lt;!\\.))instanceof(?![_$[:alnum:]])(?:(?=\\.\\.\\.)|(?!\\.))</string>\n          </dict>\n          <dict>\n            <key>name</key>\n            <string>keyword.operator.new.tsx</string>\n            <key>match</key>\n            <string>(?&lt;![_$[:alnum:]])(?:(?&lt;=\\.\\.\\.)|(?&lt;!\\.))new(?![_$[:alnum:]])(?:(?=\\.\\.\\.)|(?!\\.))</string>\n          </dict>\n          <dict>\n            <key>include</key>\n            <string>#typeof-operator</string>\n          </dict>\n          <dict>\n            <key>name</key>\n            <string>keyword.operator.expression.void.tsx</string>\n            <key>match</key>\n            <string>(?&lt;![_$[:alnum:]])(?:(?&lt;=\\.\\.\\.)|(?&lt;!\\.))void(?![_$[:alnum:]])(?:(?=\\.\\.\\.)|(?!\\.))</string>\n          </dict>\n          <dict>\n            <key>begin</key>\n            <string>(?&lt;![_$[:alnum:]])(?:(?&lt;=\\.\\.\\.)|(?&lt;!\\.))(as)\\s+</string>\n            <key>beginCaptures</key>\n            <dict>\n              <key>1</key>\n              <dict>\n                <key>name</key>\n                <string>keyword.control.as.tsx</string>\n              </dict>\n            </dict>\n            <key>end</key>\n            <string>(?=$|^|[;,:})\\]]|((?&lt;![_$[:alnum:]])(?:(?&lt;=\\.\\.\\.)|(?&lt;!\\.))(as)\\s+))</string>\n            <key>patterns</key>\n            <array>\n              <dict>\n                <key>include</key>\n                <string>#type</string>\n              </dict>\n            </array>\n          </dict>\n          <dict>\n            <key>name</key>\n            <string>keyword.operator.spread.tsx</string>\n            <key>match</key>\n            <string>\\.\\.\\.</string>\n          </dict>\n          <dict>\n            <key>name</key>\n            <string>keyword.operator.assignment.compound.tsx</string>\n            <key>match</key>\n            <string>\\*=|(?&lt;!\\()/=|%=|\\+=|\\-=</string>\n          </dict>\n          <dict>\n            <key>name</key>\n            <string>keyword.operator.assignment.compound.bitwise.tsx</string>\n            <key>match</key>\n            <string>\\&amp;=|\\^=|&lt;&lt;=|&gt;&gt;=|&gt;&gt;&gt;=|\\|=</string>\n          </dict>\n          <dict>\n            <key>name</key>\n            <string>keyword.operator.bitwise.shift.tsx</string>\n            <key>match</key>\n            <string>&lt;&lt;|&gt;&gt;&gt;|&gt;&gt;</string>\n          </dict>\n          <dict>\n            <key>name</key>\n            <string>keyword.operator.comparison.tsx</string>\n            <key>match</key>\n            <string>===|!==|==|!=</string>\n          </dict>\n          <dict>\n            <key>name</key>\n            <string>keyword.operator.relational.tsx</string>\n            <key>match</key>\n            <string>&lt;=|&gt;=|&lt;&gt;|&lt;|&gt;</string>\n          </dict>\n          <dict>\n            <key>name</key>\n            <string>keyword.operator.logical.tsx</string>\n            <key>match</key>\n            <string>\\!|&amp;&amp;|\\|\\|</string>\n          </dict>\n          <dict>\n            <key>name</key>\n            <string>keyword.operator.bitwise.tsx</string>\n            <key>match</key>\n            <string>\\&amp;|~|\\^|\\|</string>\n          </dict>\n          <dict>\n            <key>name</key>\n            <string>keyword.operator.assignment.tsx</string>\n            <key>match</key>\n            <string>\\=</string>\n          </dict>\n          <dict>\n            <key>name</key>\n            <string>keyword.operator.decrement.tsx</string>\n            <key>match</key>\n            <string>--</string>\n          </dict>\n          <dict>\n            <key>name</key>\n            <string>keyword.operator.increment.tsx</string>\n            <key>match</key>\n            <string>\\+\\+</string>\n          </dict>\n          <dict>\n            <key>name</key>\n            <string>keyword.operator.arithmetic.tsx</string>\n            <key>match</key>\n            <string>%|\\*|/|-|\\+</string>\n          </dict>\n          <dict>\n            <key>match</key>\n            <string>(?&lt;=[_$[:alnum:])\\]])\\s*(/)(?![/*])</string>\n            <key>captures</key>\n            <dict>\n              <key>1</key>\n              <dict>\n                <key>name</key>\n                <string>keyword.operator.arithmetic.tsx</string>\n              </dict>\n            </dict>\n          </dict>\n        </array>\n      </dict>\n      <key>typeof-operator</key>\n      <dict>\n        <key>name</key>\n        <string>keyword.operator.expression.typeof.tsx</string>\n        <key>match</key>\n        <string>(?&lt;![_$[:alnum:]])(?:(?&lt;=\\.\\.\\.)|(?&lt;!\\.))typeof(?![_$[:alnum:]])(?:(?=\\.\\.\\.)|(?!\\.))</string>\n      </dict>\n      <key>literal</key>\n      <dict>\n        <key>patterns</key>\n        <array>\n          <dict>\n            <key>include</key>\n            <string>#numeric-literal</string>\n          </dict>\n          <dict>\n            <key>include</key>\n            <string>#boolean-literal</string>\n          </dict>\n          <dict>\n            <key>include</key>\n            <string>#null-literal</string>\n          </dict>\n          <dict>\n            <key>include</key>\n            <string>#undefined-literal</string>\n          </dict>\n          <dict>\n            <key>include</key>\n            <string>#numericConstant-literal</string>\n          </dict>\n          <dict>\n            <key>include</key>\n            <string>#array-literal</string>\n          </dict>\n          <dict>\n            <key>include</key>\n            <string>#this-literal</string>\n          </dict>\n          <dict>\n            <key>include</key>\n            <string>#super-literal</string>\n          </dict>\n        </array>\n      </dict>\n      <key>array-literal</key>\n      <dict>\n        <key>name</key>\n        <string>meta.array.literal.tsx</string>\n        <key>begin</key>\n        <string>\\s*(\\[)</string>\n        <key>beginCaptures</key>\n        <dict>\n          <key>1</key>\n          <dict>\n            <key>name</key>\n            <string>meta.brace.square.tsx</string>\n          </dict>\n        </dict>\n        <key>end</key>\n        <string>\\]</string>\n        <key>endCaptures</key>\n        <dict>\n          <key>0</key>\n          <dict>\n            <key>name</key>\n            <string>meta.brace.square.tsx</string>\n          </dict>\n        </dict>\n        <key>patterns</key>\n        <array>\n          <dict>\n            <key>include</key>\n            <string>#expression</string>\n          </dict>\n          <dict>\n            <key>include</key>\n            <string>#punctuation-comma</string>\n          </dict>\n        </array>\n      </dict>\n      <key>numeric-literal</key>\n      <dict>\n        <key>patterns</key>\n        <array>\n          <dict>\n            <key>name</key>\n            <string>constant.numeric.hex.tsx</string>\n            <key>match</key>\n            <string>\\b(?&lt;!\\$)0(x|X)[0-9a-fA-F][0-9a-fA-F_]*\\b(?!\\$)</string>\n          </dict>\n          <dict>\n            <key>name</key>\n            <string>constant.numeric.binary.tsx</string>\n            <key>match</key>\n            <string>\\b(?&lt;!\\$)0(b|B)[01][01_]*\\b(?!\\$)</string>\n          </dict>\n          <dict>\n            <key>name</key>\n            <string>constant.numeric.octal.tsx</string>\n            <key>match</key>\n            <string>\\b(?&lt;!\\$)0(o|O)?[0-7][0-7_]*\\b(?!\\$)</string>\n          </dict>\n          <dict>\n            <key>match</key>\n            <string>(?x)\n(?&lt;!\\$)(?:\n  (?:\\b[0-9][0-9_]*(\\.)[0-9][0-9_]*[eE][+-]?[0-9][0-9_]*\\b)| # 1.1E+3\n  (?:\\b[0-9][0-9_]*(\\.)[eE][+-]?[0-9][0-9_]*\\b)|             # 1.E+3\n  (?:\\B(\\.)[0-9][0-9_]*[eE][+-]?[0-9][0-9_]*\\b)|             # .1E+3\n  (?:\\b[0-9][0-9_]*[eE][+-]?[0-9][0-9_]*\\b)|                 # 1E+3\n  (?:\\b[0-9][0-9_]*(\\.)[0-9][0-9_]*\\b)|                      # 1.1\n  (?:\\b[0-9][0-9_]*(\\.)\\B)|                                  # 1.\n  (?:\\B(\\.)[0-9][0-9_]*\\b)|                                  # .1\n  (?:\\b[0-9][0-9_]*\\b(?!\\.))                                 # 1\n)(?!\\$)</string>\n            <key>captures</key>\n            <dict>\n              <key>0</key>\n              <dict>\n                <key>name</key>\n                <string>constant.numeric.decimal.tsx</string>\n              </dict>\n              <key>1</key>\n              <dict>\n                <key>name</key>\n                <string>meta.delimiter.decimal.period.tsx</string>\n              </dict>\n              <key>2</key>\n              <dict>\n                <key>name</key>\n                <string>meta.delimiter.decimal.period.tsx</string>\n              </dict>\n              <key>3</key>\n              <dict>\n                <key>name</key>\n                <string>meta.delimiter.decimal.period.tsx</string>\n              </dict>\n              <key>4</key>\n              <dict>\n                <key>name</key>\n                <string>meta.delimiter.decimal.period.tsx</string>\n              </dict>\n              <key>5</key>\n              <dict>\n                <key>name</key>\n                <string>meta.delimiter.decimal.period.tsx</string>\n              </dict>\n              <key>6</key>\n              <dict>\n                <key>name</key>\n                <string>meta.delimiter.decimal.period.tsx</string>\n              </dict>\n            </dict>\n          </dict>\n        </array>\n      </dict>\n      <key>boolean-literal</key>\n      <dict>\n        <key>patterns</key>\n        <array>\n          <dict>\n            <key>name</key>\n            <string>constant.language.boolean.true.tsx</string>\n            <key>match</key>\n            <string>(?&lt;![_$[:alnum:]])(?:(?&lt;=\\.\\.\\.)|(?&lt;!\\.))true(?![_$[:alnum:]])(?:(?=\\.\\.\\.)|(?!\\.))</string>\n          </dict>\n          <dict>\n            <key>name</key>\n            <string>constant.language.boolean.false.tsx</string>\n            <key>match</key>\n            <string>(?&lt;![_$[:alnum:]])(?:(?&lt;=\\.\\.\\.)|(?&lt;!\\.))false(?![_$[:alnum:]])(?:(?=\\.\\.\\.)|(?!\\.))</string>\n          </dict>\n        </array>\n      </dict>\n      <key>null-literal</key>\n      <dict>\n        <key>name</key>\n        <string>constant.language.null.tsx</string>\n        <key>match</key>\n        <string>(?&lt;![_$[:alnum:]])(?:(?&lt;=\\.\\.\\.)|(?&lt;!\\.))null(?![_$[:alnum:]])(?:(?=\\.\\.\\.)|(?!\\.))</string>\n      </dict>\n      <key>this-literal</key>\n      <dict>\n        <key>name</key>\n        <string>variable.language.this.tsx</string>\n        <key>match</key>\n        <string>(?&lt;![_$[:alnum:]])(?:(?&lt;=\\.\\.\\.)|(?&lt;!\\.))this\\b(?!\\$)</string>\n      </dict>\n      <key>super-literal</key>\n      <dict>\n        <key>name</key>\n        <string>variable.language.super.tsx</string>\n        <key>match</key>\n        <string>(?&lt;![_$[:alnum:]])(?:(?&lt;=\\.\\.\\.)|(?&lt;!\\.))super\\b(?!\\$)</string>\n      </dict>\n      <key>undefined-literal</key>\n      <dict>\n        <key>name</key>\n        <string>constant.language.undefined.tsx</string>\n        <key>match</key>\n        <string>(?&lt;![_$[:alnum:]])(?:(?&lt;=\\.\\.\\.)|(?&lt;!\\.))undefined(?![_$[:alnum:]])(?:(?=\\.\\.\\.)|(?!\\.))</string>\n      </dict>\n      <key>numericConstant-literal</key>\n      <dict>\n        <key>patterns</key>\n        <array>\n          <dict>\n            <key>name</key>\n            <string>constant.language.nan.tsx</string>\n            <key>match</key>\n            <string>(?&lt;![_$[:alnum:]])(?:(?&lt;=\\.\\.\\.)|(?&lt;!\\.))NaN(?![_$[:alnum:]])(?:(?=\\.\\.\\.)|(?!\\.))</string>\n          </dict>\n          <dict>\n            <key>name</key>\n            <string>constant.language.infinity.tsx</string>\n            <key>match</key>\n            <string>(?&lt;![_$[:alnum:]])(?:(?&lt;=\\.\\.\\.)|(?&lt;!\\.))Infinity(?![_$[:alnum:]])(?:(?=\\.\\.\\.)|(?!\\.))</string>\n          </dict>\n        </array>\n      </dict>\n      <key>support-objects</key>\n      <dict>\n        <key>patterns</key>\n        <array>\n          <dict>\n            <key>name</key>\n            <string>variable.language.arguments.tsx</string>\n            <key>match</key>\n            <string>(?&lt;![_$[:alnum:]])(?:(?&lt;=\\.\\.\\.)|(?&lt;!\\.))(arguments)\\b(?!\\$)</string>\n          </dict>\n          <dict>\n            <key>name</key>\n            <string>support.class.builtin.tsx</string>\n            <key>match</key>\n            <string>(?x)(?&lt;![_$[:alnum:]])(?:(?&lt;=\\.\\.\\.)|(?&lt;!\\.))(Array|ArrayBuffer|Atomics|Boolean|DataView|Date|Float32Array|Float64Array|Function|Generator\n  |GeneratorFunction|Int8Array|Int16Array|Int32Array|Intl|Map|Number|Object|Proxy\n  |Reflect|RegExp|Set|SharedArrayBuffer|SIMD|String|Symbol|TypedArray\n  |Uint8Array|Uint16Array|Uint32Array|Uint8ClampedArray|WeakMap|WeakSet)\\b(?!\\$)</string>\n          </dict>\n          <dict>\n            <key>name</key>\n            <string>support.class.error.tsx</string>\n            <key>match</key>\n            <string>(?&lt;![_$[:alnum:]])(?:(?&lt;=\\.\\.\\.)|(?&lt;!\\.))((Eval|Internal|Range|Reference|Syntax|Type|URI)?Error)\\b(?!\\$)</string>\n          </dict>\n          <dict>\n            <key>name</key>\n            <string>support.class.promise.tsx</string>\n            <key>match</key>\n            <string>(?&lt;![_$[:alnum:]])(?:(?&lt;=\\.\\.\\.)|(?&lt;!\\.))(Promise)\\b(?!\\$)</string>\n          </dict>\n          <dict>\n            <key>name</key>\n            <string>support.function.tsx</string>\n            <key>match</key>\n            <string>(?x)(?&lt;![_$[:alnum:]])(?:(?&lt;=\\.\\.\\.)|(?&lt;!\\.))(clear(Interval|Timeout)|decodeURI|decodeURIComponent|encodeURI|encodeURIComponent|escape|eval|\n  isFinite|isNaN|parseFloat|parseInt|require|set(Interval|Timeout)|super|unescape|uneval)(?=\\s*\\()</string>\n          </dict>\n          <dict>\n            <key>match</key>\n            <string>(?x)(?&lt;![_$[:alnum:]])(?:(?&lt;=\\.\\.\\.)|(?&lt;!\\.))(Math)(?:\\s*(?:(\\.)|(\\?\\.(?!\\s*[[:digit:]])))\\s*(?:\n  (abs|acos|acosh|asin|asinh|atan|atan2|atanh|cbrt|ceil|clz32|cos|cosh|exp|\n  expm1|floor|fround|hypot|imul|log|log10|log1p|log2|max|min|pow|random|\n  round|sign|sin|sinh|sqrt|tan|tanh|trunc)\n  |\n  (E|LN10|LN2|LOG10E|LOG2E|PI|SQRT1_2|SQRT2)))?\\b(?!\\$)</string>\n            <key>captures</key>\n            <dict>\n              <key>1</key>\n              <dict>\n                <key>name</key>\n                <string>support.constant.math.tsx</string>\n              </dict>\n              <key>2</key>\n              <dict>\n                <key>name</key>\n                <string>punctuation.accessor.tsx</string>\n              </dict>\n              <key>3</key>\n              <dict>\n                <key>name</key>\n                <string>punctuation.accessor.optional.tsx</string>\n              </dict>\n              <key>4</key>\n              <dict>\n                <key>name</key>\n                <string>support.function.math.tsx</string>\n              </dict>\n              <key>5</key>\n              <dict>\n                <key>name</key>\n                <string>support.constant.property.math.tsx</string>\n              </dict>\n            </dict>\n          </dict>\n          <dict>\n            <key>match</key>\n            <string>(?x)(?&lt;![_$[:alnum:]])(?:(?&lt;=\\.\\.\\.)|(?&lt;!\\.))(console)(?:\\s*(?:(\\.)|(\\?\\.(?!\\s*[[:digit:]])))\\s*(\n  assert|clear|count|debug|dir|error|group|groupCollapsed|groupEnd|info|log\n  |profile|profileEnd|table|time|timeEnd|timeStamp|trace|warn))?\\b(?!\\$)</string>\n            <key>captures</key>\n            <dict>\n              <key>1</key>\n              <dict>\n                <key>name</key>\n                <string>support.class.console.tsx</string>\n              </dict>\n              <key>2</key>\n              <dict>\n                <key>name</key>\n                <string>punctuation.accessor.tsx</string>\n              </dict>\n              <key>3</key>\n              <dict>\n                <key>name</key>\n                <string>punctuation.accessor.optional.tsx</string>\n              </dict>\n              <key>4</key>\n              <dict>\n                <key>name</key>\n                <string>support.function.console.tsx</string>\n              </dict>\n            </dict>\n          </dict>\n          <dict>\n            <key>match</key>\n            <string>(?&lt;![_$[:alnum:]])(?:(?&lt;=\\.\\.\\.)|(?&lt;!\\.))(JSON)(?:\\s*(?:(\\.)|(\\?\\.(?!\\s*[[:digit:]])))\\s*(parse|stringify))?\\b(?!\\$)</string>\n            <key>captures</key>\n            <dict>\n              <key>1</key>\n              <dict>\n                <key>name</key>\n                <string>support.constant.json.tsx</string>\n              </dict>\n              <key>2</key>\n              <dict>\n                <key>name</key>\n                <string>punctuation.accessor.tsx</string>\n              </dict>\n              <key>3</key>\n              <dict>\n                <key>name</key>\n                <string>punctuation.accessor.optional.tsx</string>\n              </dict>\n              <key>4</key>\n              <dict>\n                <key>name</key>\n                <string>support.function.json.tsx</string>\n              </dict>\n            </dict>\n          </dict>\n          <dict>\n            <key>match</key>\n            <string>(?&lt;![_$[:alnum:]])(?:(?&lt;=\\.\\.\\.)|(?&lt;!\\.))(import)\\s*(?:(\\.)|(\\?\\.(?!\\s*[[:digit:]])))\\s*(meta)\\b(?!\\$)</string>\n            <key>captures</key>\n            <dict>\n              <key>1</key>\n              <dict>\n                <key>name</key>\n                <string>keyword.control.import.tsx</string>\n              </dict>\n              <key>2</key>\n              <dict>\n                <key>name</key>\n                <string>punctuation.accessor.tsx</string>\n              </dict>\n              <key>3</key>\n              <dict>\n                <key>name</key>\n                <string>punctuation.accessor.optional.tsx</string>\n              </dict>\n              <key>4</key>\n              <dict>\n                <key>name</key>\n                <string>support.variable.property.importmeta.tsx</string>\n              </dict>\n            </dict>\n          </dict>\n          <dict>\n            <key>match</key>\n            <string>(?&lt;![_$[:alnum:]])(?:(?&lt;=\\.\\.\\.)|(?&lt;!\\.))(new)\\s*(?:(\\.)|(\\?\\.(?!\\s*[[:digit:]])))\\s*(target)\\b(?!\\$)</string>\n            <key>captures</key>\n            <dict>\n              <key>1</key>\n              <dict>\n                <key>name</key>\n                <string>keyword.operator.new.tsx</string>\n              </dict>\n              <key>2</key>\n              <dict>\n                <key>name</key>\n                <string>punctuation.accessor.tsx</string>\n              </dict>\n              <key>3</key>\n              <dict>\n                <key>name</key>\n                <string>punctuation.accessor.optional.tsx</string>\n              </dict>\n              <key>4</key>\n              <dict>\n                <key>name</key>\n                <string>support.variable.property.target.tsx</string>\n              </dict>\n            </dict>\n          </dict>\n          <dict>\n            <key>match</key>\n            <string>(?x) (?:(\\.)|(\\?\\.(?!\\s*[[:digit:]]))) \\s* (?:\n  (constructor|length|prototype|__proto__)\n  |\n  (EPSILON|MAX_SAFE_INTEGER|MAX_VALUE|MIN_SAFE_INTEGER|MIN_VALUE|NEGATIVE_INFINITY|POSITIVE_INFINITY))\\b(?!\\$)</string>\n            <key>captures</key>\n            <dict>\n              <key>1</key>\n              <dict>\n                <key>name</key>\n                <string>punctuation.accessor.tsx</string>\n              </dict>\n              <key>2</key>\n              <dict>\n                <key>name</key>\n                <string>punctuation.accessor.optional.tsx</string>\n              </dict>\n              <key>3</key>\n              <dict>\n                <key>name</key>\n                <string>support.variable.property.tsx</string>\n              </dict>\n              <key>4</key>\n              <dict>\n                <key>name</key>\n                <string>support.constant.tsx</string>\n              </dict>\n            </dict>\n          </dict>\n          <dict>\n            <key>match</key>\n            <string>(?x) (?&lt;![_$[:alnum:]])(?:(?&lt;=\\.\\.\\.)|(?&lt;!\\.)) \\b (?:\n  (document|event|navigator|performance|screen|window)\n  |\n  (AnalyserNode|ArrayBufferView|Attr|AudioBuffer|AudioBufferSourceNode|AudioContext|AudioDestinationNode|AudioListener\n  |AudioNode|AudioParam|BatteryManager|BeforeUnloadEvent|BiquadFilterNode|Blob|BufferSource|ByteString|CSS|CSSConditionRule\n  |CSSCounterStyleRule|CSSGroupingRule|CSSMatrix|CSSMediaRule|CSSPageRule|CSSPrimitiveValue|CSSRule|CSSRuleList|CSSStyleDeclaration\n  |CSSStyleRule|CSSStyleSheet|CSSSupportsRule|CSSValue|CSSValueList|CanvasGradient|CanvasImageSource|CanvasPattern\n  |CanvasRenderingContext2D|ChannelMergerNode|ChannelSplitterNode|CharacterData|ChromeWorker|CloseEvent|Comment|CompositionEvent\n  |Console|ConvolverNode|Coordinates|Credential|CredentialsContainer|Crypto|CryptoKey|CustomEvent|DOMError|DOMException\n  |DOMHighResTimeStamp|DOMImplementation|DOMString|DOMStringList|DOMStringMap|DOMTimeStamp|DOMTokenList|DataTransfer\n  |DataTransferItem|DataTransferItemList|DedicatedWorkerGlobalScope|DelayNode|DeviceProximityEvent|DirectoryEntry\n  |DirectoryEntrySync|DirectoryReader|DirectoryReaderSync|Document|DocumentFragment|DocumentTouch|DocumentType|DragEvent\n  |DynamicsCompressorNode|Element|Entry|EntrySync|ErrorEvent|Event|EventListener|EventSource|EventTarget|FederatedCredential\n  |FetchEvent|File|FileEntry|FileEntrySync|FileException|FileList|FileReader|FileReaderSync|FileSystem|FileSystemSync\n  |FontFace|FormData|GainNode|Gamepad|GamepadButton|GamepadEvent|Geolocation|GlobalEventHandlers|HTMLAnchorElement\n  |HTMLAreaElement|HTMLAudioElement|HTMLBRElement|HTMLBaseElement|HTMLBodyElement|HTMLButtonElement|HTMLCanvasElement\n  |HTMLCollection|HTMLContentElement|HTMLDListElement|HTMLDataElement|HTMLDataListElement|HTMLDialogElement|HTMLDivElement\n  |HTMLDocument|HTMLElement|HTMLEmbedElement|HTMLFieldSetElement|HTMLFontElement|HTMLFormControlsCollection|HTMLFormElement\n  |HTMLHRElement|HTMLHeadElement|HTMLHeadingElement|HTMLHtmlElement|HTMLIFrameElement|HTMLImageElement|HTMLInputElement\n  |HTMLKeygenElement|HTMLLIElement|HTMLLabelElement|HTMLLegendElement|HTMLLinkElement|HTMLMapElement|HTMLMediaElement\n  |HTMLMetaElement|HTMLMeterElement|HTMLModElement|HTMLOListElement|HTMLObjectElement|HTMLOptGroupElement|HTMLOptionElement\n  |HTMLOptionsCollection|HTMLOutputElement|HTMLParagraphElement|HTMLParamElement|HTMLPreElement|HTMLProgressElement\n  |HTMLQuoteElement|HTMLScriptElement|HTMLSelectElement|HTMLShadowElement|HTMLSourceElement|HTMLSpanElement|HTMLStyleElement\n  |HTMLTableCaptionElement|HTMLTableCellElement|HTMLTableColElement|HTMLTableDataCellElement|HTMLTableElement|HTMLTableHeaderCellElement\n  |HTMLTableRowElement|HTMLTableSectionElement|HTMLTextAreaElement|HTMLTimeElement|HTMLTitleElement|HTMLTrackElement\n  |HTMLUListElement|HTMLUnknownElement|HTMLVideoElement|HashChangeEvent|History|IDBCursor|IDBCursorWithValue|IDBDatabase\n  |IDBEnvironment|IDBFactory|IDBIndex|IDBKeyRange|IDBMutableFile|IDBObjectStore|IDBOpenDBRequest|IDBRequest|IDBTransaction\n  |IDBVersionChangeEvent|IIRFilterNode|IdentityManager|ImageBitmap|ImageBitmapFactories|ImageData|Index|InputDeviceCapabilities\n  |InputEvent|InstallEvent|InstallTrigger|KeyboardEvent|LinkStyle|LocalFileSystem|LocalFileSystemSync|Location|MIDIAccess\n  |MIDIConnectionEvent|MIDIInput|MIDIInputMap|MIDIOutputMap|MediaElementAudioSourceNode|MediaError|MediaKeyMessageEvent\n  |MediaKeySession|MediaKeyStatusMap|MediaKeySystemAccess|MediaKeySystemConfiguration|MediaKeys|MediaRecorder|MediaStream\n  |MediaStreamAudioDestinationNode|MediaStreamAudioSourceNode|MessageChannel|MessageEvent|MessagePort|MouseEvent\n  |MutationObserver|MutationRecord|NamedNodeMap|Navigator|NavigatorConcurrentHardware|NavigatorGeolocation|NavigatorID\n  |NavigatorLanguage|NavigatorOnLine|Node|NodeFilter|NodeIterator|NodeList|NonDocumentTypeChildNode|Notification\n  |OfflineAudioCompletionEvent|OfflineAudioContext|OscillatorNode|PageTransitionEvent|PannerNode|ParentNode|PasswordCredential\n  |Path2D|PaymentAddress|PaymentRequest|PaymentResponse|Performance|PerformanceEntry|PerformanceFrameTiming|PerformanceMark\n  |PerformanceMeasure|PerformanceNavigation|PerformanceNavigationTiming|PerformanceObserver|PerformanceObserverEntryList\n  |PerformanceResourceTiming|PerformanceTiming|PeriodicSyncEvent|PeriodicWave|Plugin|Point|PointerEvent|PopStateEvent\n  |PortCollection|Position|PositionError|PositionOptions|PresentationConnectionClosedEvent|PresentationConnectionList\n  |PresentationReceiver|ProcessingInstruction|ProgressEvent|PromiseRejectionEvent|PushEvent|PushRegistrationManager\n  |RTCCertificate|RTCConfiguration|RTCPeerConnection|RTCSessionDescriptionCallback|RTCStatsReport|RadioNodeList|RandomSource\n  |Range|ReadableByteStream|RenderingContext|SVGAElement|SVGAngle|SVGAnimateColorElement|SVGAnimateElement|SVGAnimateMotionElement\n  |SVGAnimateTransformElement|SVGAnimatedAngle|SVGAnimatedBoolean|SVGAnimatedEnumeration|SVGAnimatedInteger|SVGAnimatedLength\n  |SVGAnimatedLengthList|SVGAnimatedNumber|SVGAnimatedNumberList|SVGAnimatedPoints|SVGAnimatedPreserveAspectRatio\n  |SVGAnimatedRect|SVGAnimatedString|SVGAnimatedTransformList|SVGAnimationElement|SVGCircleElement|SVGClipPathElement\n  |SVGCursorElement|SVGDefsElement|SVGDescElement|SVGElement|SVGEllipseElement|SVGEvent|SVGFilterElement|SVGFontElement\n  |SVGFontFaceElement|SVGFontFaceFormatElement|SVGFontFaceNameElement|SVGFontFaceSrcElement|SVGFontFaceUriElement\n  |SVGForeignObjectElement|SVGGElement|SVGGlyphElement|SVGGradientElement|SVGHKernElement|SVGImageElement|SVGLength\n  |SVGLengthList|SVGLineElement|SVGLinearGradientElement|SVGMPathElement|SVGMaskElement|SVGMatrix|SVGMissingGlyphElement\n  |SVGNumber|SVGNumberList|SVGPathElement|SVGPatternElement|SVGPoint|SVGPolygonElement|SVGPolylineElement|SVGPreserveAspectRatio\n  |SVGRadialGradientElement|SVGRect|SVGRectElement|SVGSVGElement|SVGScriptElement|SVGSetElement|SVGStopElement|SVGStringList\n  |SVGStylable|SVGStyleElement|SVGSwitchElement|SVGSymbolElement|SVGTRefElement|SVGTSpanElement|SVGTests|SVGTextElement\n  |SVGTextPositioningElement|SVGTitleElement|SVGTransform|SVGTransformList|SVGTransformable|SVGUseElement|SVGVKernElement\n  |SVGViewElement|ServiceWorker|ServiceWorkerContainer|ServiceWorkerGlobalScope|ServiceWorkerRegistration|ServiceWorkerState\n  |ShadowRoot|SharedWorker|SharedWorkerGlobalScope|SourceBufferList|StereoPannerNode|Storage|StorageEvent|StyleSheet\n  |StyleSheetList|SubtleCrypto|SyncEvent|Text|TextMetrics|TimeEvent|TimeRanges|Touch|TouchEvent|TouchList|Transferable\n  |TreeWalker|UIEvent|USVString|VRDisplayCapabilities|ValidityState|WaveShaperNode|WebGL|WebGLActiveInfo|WebGLBuffer\n  |WebGLContextEvent|WebGLFramebuffer|WebGLProgram|WebGLRenderbuffer|WebGLRenderingContext|WebGLShader|WebGLShaderPrecisionFormat\n  |WebGLTexture|WebGLTimerQueryEXT|WebGLTransformFeedback|WebGLUniformLocation|WebGLVertexArrayObject|WebGLVertexArrayObjectOES\n  |WebSocket|WebSockets|WebVTT|WheelEvent|Window|WindowBase64|WindowEventHandlers|WindowTimers|Worker|WorkerGlobalScope\n  |WorkerLocation|WorkerNavigator|XMLHttpRequest|XMLHttpRequestEventTarget|XMLSerializer|XPathExpression|XPathResult\n  |XSLTProcessor))\\b(?!\\$)</string>\n            <key>captures</key>\n            <dict>\n              <key>1</key>\n              <dict>\n                <key>name</key>\n                <string>support.variable.dom.tsx</string>\n              </dict>\n              <key>2</key>\n              <dict>\n                <key>name</key>\n                <string>support.class.dom.tsx</string>\n              </dict>\n            </dict>\n          </dict>\n          <dict>\n            <key>match</key>\n            <string>(?x) (?:(\\.)|(\\?\\.(?!\\s*[[:digit:]]))) \\s* (?:\n  (ATTRIBUTE_NODE|CDATA_SECTION_NODE|COMMENT_NODE|DOCUMENT_FRAGMENT_NODE|DOCUMENT_NODE|DOCUMENT_TYPE_NODE\n  |DOMSTRING_SIZE_ERR|ELEMENT_NODE|ENTITY_NODE|ENTITY_REFERENCE_NODE|HIERARCHY_REQUEST_ERR|INDEX_SIZE_ERR\n  |INUSE_ATTRIBUTE_ERR|INVALID_CHARACTER_ERR|NO_DATA_ALLOWED_ERR|NO_MODIFICATION_ALLOWED_ERR|NOT_FOUND_ERR\n  |NOT_SUPPORTED_ERR|NOTATION_NODE|PROCESSING_INSTRUCTION_NODE|TEXT_NODE|WRONG_DOCUMENT_ERR)\n  |\n  (_content|[xyz]|abbr|above|accept|acceptCharset|accessKey|action|align|[av]Link(?:color)?|all|alt|anchors|appCodeName\n  |appCore|applets|appMinorVersion|appName|appVersion|archive|areas|arguments|attributes|availHeight|availLeft|availTop\n  |availWidth|axis|background|backgroundColor|backgroundImage|below|bgColor|body|border|borderBottomWidth|borderColor\n  |borderLeftWidth|borderRightWidth|borderStyle|borderTopWidth|borderWidth|bottom|bufferDepth|callee|caller|caption\n  |cellPadding|cells|cellSpacing|ch|characterSet|charset|checked|childNodes|chOff|cite|classes|className|clear\n  |clientInformation|clip|clipBoardData|closed|code|codeBase|codeType|color|colorDepth|cols|colSpan|compact|complete\n  |components|content|controllers|cookie|cookieEnabled|cords|cpuClass|crypto|current|data|dateTime|declare|defaultCharset\n  |defaultChecked|defaultSelected|defaultStatus|defaultValue|defaultView|defer|description|dialogArguments|dialogHeight\n  |dialogLeft|dialogTop|dialogWidth|dir|directories|disabled|display|docmain|doctype|documentElement|elements|embeds\n  |enabledPlugin|encoding|enctype|entities|event|expando|external|face|fgColor|filename|firstChild|fontFamily|fontSize\n  |fontWeight|form|formName|forms|frame|frameBorder|frameElement|frames|hasFocus|hash|headers|height|history|host\n  |hostname|href|hreflang|hspace|htmlFor|httpEquiv|id|ids|ignoreCase|images|implementation|index|innerHeight|innerWidth\n  |input|isMap|label|lang|language|lastChild|lastIndex|lastMatch|lastModified|lastParen|layer[sXY]|left|leftContext\n  |lineHeight|link|linkColor|links|listStyleType|localName|location|locationbar|longDesc|lowsrc|lowSrc|marginBottom\n  |marginHeight|marginLeft|marginRight|marginTop|marginWidth|maxLength|media|menubar|method|mimeTypes|multiline|multiple\n  |name|nameProp|namespaces|namespaceURI|next|nextSibling|nodeName|nodeType|nodeValue|noHref|noResize|noShade|notationName\n  |notations|noWrap|object|offscreenBuffering|onLine|onreadystatechange|opener|opsProfile|options|oscpu|outerHeight\n  |outerWidth|ownerDocument|paddingBottom|paddingLeft|paddingRight|paddingTop|page[XY]|page[XY]Offset|parent|parentLayer\n  |parentNode|parentWindow|pathname|personalbar|pixelDepth|pkcs11|platform|plugins|port|prefix|previous|previousDibling\n  |product|productSub|profile|profileend|prompt|prompter|protocol|publicId|readOnly|readyState|referrer|rel|responseText\n  |responseXML|rev|right|rightContext|rowIndex|rows|rowSpan|rules|scheme|scope|screen[XY]|screenLeft|screenTop|scripts\n  |scrollbars|scrolling|sectionRowIndex|security|securityPolicy|selected|selectedIndex|selection|self|shape|siblingAbove\n  |siblingBelow|size|source|specified|standby|start|status|statusbar|statusText|style|styleSheets|suffixes|summary\n  |systemId|systemLanguage|tagName|tags|target|tBodies|text|textAlign|textDecoration|textIndent|textTransform|tFoot|tHead\n  |title|toolbar|top|type|undefined|uniqueID|updateInterval|URL|URLUnencoded|useMap|userAgent|userLanguage|userProfile\n  |vAlign|value|valueType|vendor|vendorSub|version|visibility|vspace|whiteSpace|width|X[MS]LDocument|zIndex))\\b(?!\\$|\\s*(&lt;\\s*([_$[:alpha:]]|(\\{([^\\{\\}]|(\\{[^\\{\\}]*\\}))*\\})|(\\(([^\\(\\)]|(\\([^\\(\\)]*\\)))*\\))|(\\[([^\\[\\]]|(\\[[^\\[\\]]*\\]))*\\]))([^=&lt;&gt;]|=[^&lt;]|\\&lt;\\s*([_$[:alpha:]]|(\\{([^\\{\\}]|(\\{[^\\{\\}]*\\}))*\\})|(\\(([^\\(\\)]|(\\([^\\(\\)]*\\)))*\\))|(\\[([^\\[\\]]|(\\[[^\\[\\]]*\\]))*\\]))([^=&lt;&gt;]|=[^&lt;])*\\&gt;)*&gt;\\s*)?\\()</string>\n            <key>captures</key>\n            <dict>\n              <key>1</key>\n              <dict>\n                <key>name</key>\n                <string>punctuation.accessor.tsx</string>\n              </dict>\n              <key>2</key>\n              <dict>\n                <key>name</key>\n                <string>punctuation.accessor.optional.tsx</string>\n              </dict>\n              <key>3</key>\n              <dict>\n                <key>name</key>\n                <string>support.constant.dom.tsx</string>\n              </dict>\n              <key>4</key>\n              <dict>\n                <key>name</key>\n                <string>support.variable.property.dom.tsx</string>\n              </dict>\n            </dict>\n          </dict>\n          <dict>\n            <key>name</key>\n            <string>support.class.node.tsx</string>\n            <key>match</key>\n            <string>(?x)(?&lt;![_$[:alnum:]])(?:(?&lt;=\\.\\.\\.)|(?&lt;!\\.))(Buffer|EventEmitter|Server|Pipe|Socket|REPLServer|ReadStream|WriteStream|Stream\n  |Inflate|Deflate|InflateRaw|DeflateRaw|GZip|GUnzip|Unzip|Zip)\\b(?!\\$)</string>\n          </dict>\n          <dict>\n            <key>match</key>\n            <string>(?x)(?&lt;![_$[:alnum:]])(?:(?&lt;=\\.\\.\\.)|(?&lt;!\\.))(process)(?:(?:(\\.)|(\\?\\.(?!\\s*[[:digit:]])))(?:\n  (arch|argv|config|connected|env|execArgv|execPath|exitCode|mainModule|pid|platform|release|stderr|stdin|stdout|title|version|versions)\n  |\n  (abort|chdir|cwd|disconnect|exit|[sg]ete?[gu]id|send|[sg]etgroups|initgroups|kill|memoryUsage|nextTick|umask|uptime|hrtime)\n))?\\b(?!\\$)</string>\n            <key>captures</key>\n            <dict>\n              <key>1</key>\n              <dict>\n                <key>name</key>\n                <string>support.variable.object.process.tsx</string>\n              </dict>\n              <key>2</key>\n              <dict>\n                <key>name</key>\n                <string>punctuation.accessor.tsx</string>\n              </dict>\n              <key>3</key>\n              <dict>\n                <key>name</key>\n                <string>punctuation.accessor.optional.tsx</string>\n              </dict>\n              <key>4</key>\n              <dict>\n                <key>name</key>\n                <string>support.variable.property.process.tsx</string>\n              </dict>\n              <key>5</key>\n              <dict>\n                <key>name</key>\n                <string>support.function.process.tsx</string>\n              </dict>\n            </dict>\n          </dict>\n          <dict>\n            <key>match</key>\n            <string>(?&lt;![_$[:alnum:]])(?:(?&lt;=\\.\\.\\.)|(?&lt;!\\.))(?:(exports)|(module)(?:(?:(\\.)|(\\?\\.(?!\\s*[[:digit:]])))(exports|id|filename|loaded|parent|children))?)\\b(?!\\$)</string>\n            <key>captures</key>\n            <dict>\n              <key>1</key>\n              <dict>\n                <key>name</key>\n                <string>support.type.object.module.tsx</string>\n              </dict>\n              <key>2</key>\n              <dict>\n                <key>name</key>\n                <string>support.type.object.module.tsx</string>\n              </dict>\n              <key>3</key>\n              <dict>\n                <key>name</key>\n                <string>punctuation.accessor.tsx</string>\n              </dict>\n              <key>4</key>\n              <dict>\n                <key>name</key>\n                <string>punctuation.accessor.optional.tsx</string>\n              </dict>\n              <key>5</key>\n              <dict>\n                <key>name</key>\n                <string>support.type.object.module.tsx</string>\n              </dict>\n            </dict>\n          </dict>\n          <dict>\n            <key>name</key>\n            <string>support.variable.object.node.tsx</string>\n            <key>match</key>\n            <string>(?&lt;![_$[:alnum:]])(?:(?&lt;=\\.\\.\\.)|(?&lt;!\\.))(global|GLOBAL|root|__dirname|__filename)\\b(?!\\$)</string>\n          </dict>\n          <dict>\n            <key>match</key>\n            <string>(?x) (?:(\\.)|(\\?\\.(?!\\s*[[:digit:]]))) \\s*\n(?:\n (on(?:Rowsinserted|Rowsdelete|Rowenter|Rowexit|Resize|Resizestart|Resizeend|Reset|\n   Readystatechange|Mouseout|Mouseover|Mousedown|Mouseup|Mousemove|\n   Before(?:cut|deactivate|unload|update|paste|print|editfocus|activate)|\n   Blur|Scrolltop|Submit|Select|Selectstart|Selectionchange|Hover|Help|\n   Change|Contextmenu|Controlselect|Cut|Cellchange|Clock|Close|Deactivate|\n   Datasetchanged|Datasetcomplete|Dataavailable|Drop|Drag|Dragstart|Dragover|\n   Dragdrop|Dragenter|Dragend|Dragleave|Dblclick|Unload|Paste|Propertychange|Error|\n   Errorupdate|Keydown|Keyup|Keypress|Focus|Load|Activate|Afterupdate|Afterprint|Abort)\n ) |\n (shift|showModelessDialog|showModalDialog|showHelp|scroll|scrollX|scrollByPages|\n   scrollByLines|scrollY|scrollTo|stop|strike|sizeToContent|sidebar|signText|sort|\n   sup|sub|substr|substring|splice|split|send|set(?:Milliseconds|Seconds|Minutes|Hours|\n   Month|Year|FullYear|Date|UTC(?:Milliseconds|Seconds|Minutes|Hours|Month|FullYear|Date)|\n   Time|Hotkeys|Cursor|ZOptions|Active|Resizable|RequestHeader)|search|slice|\n   savePreferences|small|home|handleEvent|navigate|char|charCodeAt|charAt|concat|\n   contextual|confirm|compile|clear|captureEvents|call|createStyleSheet|createPopup|\n   createEventObject|to(?:GMTString|UTCString|String|Source|UpperCase|LowerCase|LocaleString)|\n   test|taint|taintEnabled|indexOf|italics|disableExternalCapture|dump|detachEvent|unshift|\n   untaint|unwatch|updateCommands|join|javaEnabled|pop|push|plugins.refresh|paddings|parse|\n   print|prompt|preference|enableExternalCapture|exec|execScript|valueOf|UTC|find|file|\n   fileModifiedDate|fileSize|fileCreatedDate|fileUpdatedDate|fixed|fontsize|fontcolor|\n   forward|fromCharCode|watch|link|load|lastIndexOf|anchor|attachEvent|atob|apply|alert|\n   abort|routeEvents|resize|resizeBy|resizeTo|recalc|returnValue|replace|reverse|reload|\n   releaseCapture|releaseEvents|go|get(?:Milliseconds|Seconds|Minutes|Hours|Month|Day|Year|FullYear|\n   Time|Date|TimezoneOffset|UTC(?:Milliseconds|Seconds|Minutes|Hours|Day|Month|FullYear|Date)|\n   Attention|Selection|ResponseHeader|AllResponseHeaders)|moveBy|moveBelow|moveTo|\n   moveToAbsolute|moveAbove|mergeAttributes|match|margins|btoa|big|bold|borderWidths|blink|back\n ) |\n (acceptNode|add|addEventListener|addTextTrack|adoptNode|after|animate|append|\n   appendChild|appendData|before|blur|canPlayType|captureStream|\n   caretPositionFromPoint|caretRangeFromPoint|checkValidity|clear|click|\n   cloneContents|cloneNode|cloneRange|close|closest|collapse|\n   compareBoundaryPoints|compareDocumentPosition|comparePoint|contains|\n   convertPointFromNode|convertQuadFromNode|convertRectFromNode|createAttribute|\n   createAttributeNS|createCaption|createCDATASection|createComment|\n   createContextualFragment|createDocument|createDocumentFragment|\n   createDocumentType|createElement|createElementNS|createEntityReference|\n   createEvent|createExpression|createHTMLDocument|createNodeIterator|\n   createNSResolver|createProcessingInstruction|createRange|createShadowRoot|\n   createTBody|createTextNode|createTFoot|createTHead|createTreeWalker|delete|\n   deleteCaption|deleteCell|deleteContents|deleteData|deleteRow|deleteTFoot|\n   deleteTHead|detach|disconnect|dispatchEvent|elementFromPoint|elementsFromPoint|\n   enableStyleSheetsForSet|entries|evaluate|execCommand|exitFullscreen|\n   exitPointerLock|expand|extractContents|fastSeek|firstChild|focus|forEach|get|\n   getAll|getAnimations|getAttribute|getAttributeNames|getAttributeNode|\n   getAttributeNodeNS|getAttributeNS|getBoundingClientRect|getBoxQuads|\n   getClientRects|getContext|getDestinationInsertionPoints|getElementById|\n   getElementsByClassName|getElementsByName|getElementsByTagName|\n   getElementsByTagNameNS|getItem|getNamedItem|getSelection|getStartDate|\n   getVideoPlaybackQuality|has|hasAttribute|hasAttributeNS|hasAttributes|\n   hasChildNodes|hasFeature|hasFocus|importNode|initEvent|insertAdjacentElement|\n   insertAdjacentHTML|insertAdjacentText|insertBefore|insertCell|insertData|\n   insertNode|insertRow|intersectsNode|isDefaultNamespace|isEqualNode|\n   isPointInRange|isSameNode|item|key|keys|lastChild|load|lookupNamespaceURI|\n   lookupPrefix|matches|move|moveAttribute|moveAttributeNode|moveChild|\n   moveNamedItem|namedItem|nextNode|nextSibling|normalize|observe|open|\n   parentNode|pause|play|postMessage|prepend|preventDefault|previousNode|\n   previousSibling|probablySupportsContext|queryCommandEnabled|\n   queryCommandIndeterm|queryCommandState|queryCommandSupported|queryCommandValue|\n   querySelector|querySelectorAll|registerContentHandler|registerElement|\n   registerProtocolHandler|releaseCapture|releaseEvents|remove|removeAttribute|\n   removeAttributeNode|removeAttributeNS|removeChild|removeEventListener|\n   removeItem|replace|replaceChild|replaceData|replaceWith|reportValidity|\n   requestFullscreen|requestPointerLock|reset|scroll|scrollBy|scrollIntoView|\n   scrollTo|seekToNextFrame|select|selectNode|selectNodeContents|set|setAttribute|\n   setAttributeNode|setAttributeNodeNS|setAttributeNS|setCapture|\n   setCustomValidity|setEnd|setEndAfter|setEndBefore|setItem|setNamedItem|\n   setRangeText|setSelectionRange|setSinkId|setStart|setStartAfter|setStartBefore|\n   slice|splitText|stepDown|stepUp|stopImmediatePropagation|stopPropagation|\n   submit|substringData|supports|surroundContents|takeRecords|terminate|toBlob|\n   toDataURL|toggle|toString|values|write|writeln\n ) |\n (all|catch|finally|race|reject|resolve|then\n )\n)(?=\\s*\\()</string>\n            <key>captures</key>\n            <dict>\n              <key>1</key>\n              <dict>\n                <key>name</key>\n                <string>punctuation.accessor.tsx</string>\n              </dict>\n              <key>2</key>\n              <dict>\n                <key>name</key>\n                <string>punctuation.accessor.optional.tsx</string>\n              </dict>\n              <key>3</key>\n              <dict>\n                <key>name</key>\n                <string>support.function.event-handler.tsx</string>\n              </dict>\n              <key>4</key>\n              <dict>\n                <key>name</key>\n                <string>support.function.tsx</string>\n              </dict>\n              <key>5</key>\n              <dict>\n                <key>name</key>\n                <string>support.function.dom.tsx</string>\n              </dict>\n              <key>6</key>\n              <dict>\n                <key>name</key>\n                <string>support.function.promise.tsx</string>\n              </dict>\n            </dict>\n          </dict>\n        </array>\n      </dict>\n      <key>identifiers</key>\n      <dict>\n        <key>patterns</key>\n        <array>\n          <dict>\n            <key>include</key>\n            <string>#object-identifiers</string>\n          </dict>\n          <dict>\n            <key>match</key>\n            <string>(?x)(?:(?:(\\.)|(\\?\\.(?!\\s*[[:digit:]])))\\s*)?([_$[:alpha:]][_$[:alnum:]]*)(?=\\s*=\\s*(\n  ((async\\s+)?(\n    (function\\s*[(&lt;*]) |\n    (function\\s+) |\n    ([_$[:alpha:]][_$[:alnum:]]*\\s*=&gt;)\n  )) |\n  ((async\\s*)?(\n    ([\\(]\\s*([\\{\\[]\\s*)?$) |\n    # sure shot arrow functions even if =&gt; is on new line\n(\n  (&lt;\\s*([_$[:alpha:]]|(\\{([^\\{\\}]|(\\{[^\\{\\}]*\\}))*\\})|(\\(([^\\(\\)]|(\\([^\\(\\)]*\\)))*\\))|(\\[([^\\[\\]]|(\\[[^\\[\\]]*\\]))*\\]))([^=&lt;&gt;]|=[^&lt;]|\\&lt;\\s*([_$[:alpha:]]|(\\{([^\\{\\}]|(\\{[^\\{\\}]*\\}))*\\})|(\\(([^\\(\\)]|(\\([^\\(\\)]*\\)))*\\))|(\\[([^\\[\\]]|(\\[[^\\[\\]]*\\]))*\\]))([^=&lt;&gt;]|=[^&lt;])*\\&gt;)*&gt;\\s*)?\n  [(]\\s*\n  (\n    ([)]\\s*:) |                                                                                       # ():\n    ((\\.\\.\\.\\s*)?[_$[:alpha:]][_$[:alnum:]]*\\s*:)                                                                  # [(]param: | [(]...param:\n  )\n) |\n(\n  [&lt;]\\s*[_$[:alpha:]][_$[:alnum:]]*\\s+extends\\s*[^=&gt;]                                                              # &lt; typeparam extends\n) |\n# arrow function possible to detect only with =&gt; on same line\n(\n  (&lt;\\s*([_$[:alpha:]]|(\\{([^\\{\\}]|(\\{[^\\{\\}]*\\}))*\\})|(\\(([^\\(\\)]|(\\([^\\(\\)]*\\)))*\\))|(\\[([^\\[\\]]|(\\[[^\\[\\]]*\\]))*\\]))([^=&lt;&gt;]|=[^&lt;]|\\&lt;\\s*([_$[:alpha:]]|(\\{([^\\{\\}]|(\\{[^\\{\\}]*\\}))*\\})|(\\(([^\\(\\)]|(\\([^\\(\\)]*\\)))*\\))|(\\[([^\\[\\]]|(\\[[^\\[\\]]*\\]))*\\]))([^=&lt;&gt;]|=[^&lt;])*\\&gt;)*&gt;\\s*)?                                                                                 # typeparameters\n  \\(\\s*(([_$[:alpha:]]|(\\{([^\\{\\}]|(\\{[^\\{\\}]*\\}))*\\})|(\\[([^\\[\\]]|(\\[[^\\[\\]]*\\]))*\\])|(\\.\\.\\.\\s*[_$[:alpha:]]))([^()]|(\\(([^\\(\\)]|(\\([^\\(\\)]*\\)))*\\)))*)?\\)   # parameters\n  (\\s*:\\s*([^&lt;&gt;\\(\\)]|\\&lt;[^&lt;&gt;]+\\&gt;|\\([^\\(\\)]+\\))+)?                                                                        # return type\n  \\s*=&gt;                                                                                               # arrow operator\n)\n  ))\n))</string>\n            <key>captures</key>\n            <dict>\n              <key>1</key>\n              <dict>\n                <key>name</key>\n                <string>punctuation.accessor.tsx</string>\n              </dict>\n              <key>2</key>\n              <dict>\n                <key>name</key>\n                <string>punctuation.accessor.optional.tsx</string>\n              </dict>\n              <key>3</key>\n              <dict>\n                <key>name</key>\n                <string>entity.name.function.tsx</string>\n              </dict>\n            </dict>\n          </dict>\n          <dict>\n            <key>match</key>\n            <string>(?:(\\.)|(\\?\\.(?!\\s*[[:digit:]])))\\s*([[:upper:]][_$[:digit:][:upper:]]*)(?![_$[:alnum:]])</string>\n            <key>captures</key>\n            <dict>\n              <key>1</key>\n              <dict>\n                <key>name</key>\n                <string>punctuation.accessor.tsx</string>\n              </dict>\n              <key>2</key>\n              <dict>\n                <key>name</key>\n                <string>punctuation.accessor.optional.tsx</string>\n              </dict>\n              <key>3</key>\n              <dict>\n                <key>name</key>\n                <string>variable.other.constant.property.tsx</string>\n              </dict>\n            </dict>\n          </dict>\n          <dict>\n            <key>match</key>\n            <string>(?:(\\.)|(\\?\\.(?!\\s*[[:digit:]])))\\s*([_$[:alpha:]][_$[:alnum:]]*)</string>\n            <key>captures</key>\n            <dict>\n              <key>1</key>\n              <dict>\n                <key>name</key>\n                <string>punctuation.accessor.tsx</string>\n              </dict>\n              <key>2</key>\n              <dict>\n                <key>name</key>\n                <string>punctuation.accessor.optional.tsx</string>\n              </dict>\n              <key>3</key>\n              <dict>\n                <key>name</key>\n                <string>variable.other.property.tsx</string>\n              </dict>\n            </dict>\n          </dict>\n          <dict>\n            <key>name</key>\n            <string>variable.other.constant.tsx</string>\n            <key>match</key>\n            <string>([[:upper:]][_$[:digit:][:upper:]]*)(?![_$[:alnum:]])</string>\n          </dict>\n          <dict>\n            <key>name</key>\n            <string>variable.other.readwrite.tsx</string>\n            <key>match</key>\n            <string>[_$[:alpha:]][_$[:alnum:]]*</string>\n          </dict>\n        </array>\n      </dict>\n      <key>object-identifiers</key>\n      <dict>\n        <key>patterns</key>\n        <array>\n          <dict>\n            <key>name</key>\n            <string>support.class.tsx</string>\n            <key>match</key>\n            <string>([_$[:alpha:]][_$[:alnum:]]*)(?=\\s*\\??\\.\\s*prototype\\b(?!\\$))</string>\n          </dict>\n          <dict>\n            <key>match</key>\n            <string>(?x)(?:(\\.)|(\\?\\.(?!\\s*[[:digit:]])))\\s*(?:\n  ([[:upper:]][_$[:digit:][:upper:]]*) |\n  ([_$[:alpha:]][_$[:alnum:]]*)\n)(?=\\s*\\??\\.\\s*[_$[:alpha:]][_$[:alnum:]]*)</string>\n            <key>captures</key>\n            <dict>\n              <key>1</key>\n              <dict>\n                <key>name</key>\n                <string>punctuation.accessor.tsx</string>\n              </dict>\n              <key>2</key>\n              <dict>\n                <key>name</key>\n                <string>punctuation.accessor.optional.tsx</string>\n              </dict>\n              <key>3</key>\n              <dict>\n                <key>name</key>\n                <string>variable.other.constant.object.property.tsx</string>\n              </dict>\n              <key>4</key>\n              <dict>\n                <key>name</key>\n                <string>variable.other.object.property.tsx</string>\n              </dict>\n            </dict>\n          </dict>\n          <dict>\n            <key>match</key>\n            <string>(?x)(?:\n  ([[:upper:]][_$[:digit:][:upper:]]*) |\n  ([_$[:alpha:]][_$[:alnum:]]*)\n)(?=\\s*\\??\\.\\s*[_$[:alpha:]][_$[:alnum:]]*)</string>\n            <key>captures</key>\n            <dict>\n              <key>1</key>\n              <dict>\n                <key>name</key>\n                <string>variable.other.constant.object.tsx</string>\n              </dict>\n              <key>2</key>\n              <dict>\n                <key>name</key>\n                <string>variable.other.object.tsx</string>\n              </dict>\n            </dict>\n          </dict>\n        </array>\n      </dict>\n      <key>type-annotation</key>\n      <dict>\n        <key>patterns</key>\n        <array>\n          <dict>\n            <key>name</key>\n            <string>meta.type.annotation.tsx</string>\n            <key>begin</key>\n            <string>(:)(?=\\s*\\S)</string>\n            <key>beginCaptures</key>\n            <dict>\n              <key>1</key>\n              <dict>\n                <key>name</key>\n                <string>keyword.operator.type.annotation.tsx</string>\n              </dict>\n            </dict>\n            <key>end</key>\n            <string>(?&lt;![:|&amp;])((?=$|^|[,);\\}\\]]|//)|(?==[^&gt;])|((?&lt;=[\\}&gt;\\]\\)]|[_$[:alpha:]])\\s*(?=\\{)))</string>\n            <key>patterns</key>\n            <array>\n              <dict>\n                <key>include</key>\n                <string>#type</string>\n              </dict>\n            </array>\n          </dict>\n          <dict>\n            <key>name</key>\n            <string>meta.type.annotation.tsx</string>\n            <key>begin</key>\n            <string>(:)</string>\n            <key>beginCaptures</key>\n            <dict>\n              <key>1</key>\n              <dict>\n                <key>name</key>\n                <string>keyword.operator.type.annotation.tsx</string>\n              </dict>\n            </dict>\n            <key>end</key>\n            <string>(?&lt;![:|&amp;])((?=[,);\\}\\]]|//)|(?==[^&gt;])|(?=^\\s*$)|((?&lt;=\\S)(?=\\s*$))|((?&lt;=[\\}&gt;\\]\\)]|[_$[:alpha:]])\\s*(?=\\{)))</string>\n            <key>patterns</key>\n            <array>\n              <dict>\n                <key>include</key>\n                <string>#type</string>\n              </dict>\n            </array>\n          </dict>\n        </array>\n      </dict>\n      <key>return-type</key>\n      <dict>\n        <key>patterns</key>\n        <array>\n          <dict>\n            <key>name</key>\n            <string>meta.return.type.tsx</string>\n            <key>begin</key>\n            <string>(?&lt;=\\))\\s*(:)(?=\\s*\\S)</string>\n            <key>beginCaptures</key>\n            <dict>\n              <key>1</key>\n              <dict>\n                <key>name</key>\n                <string>keyword.operator.type.annotation.tsx</string>\n              </dict>\n            </dict>\n            <key>end</key>\n            <string>(?&lt;![:|&amp;])(?=$|^|[{};,]|//)</string>\n            <key>patterns</key>\n            <array>\n              <dict>\n                <key>include</key>\n                <string>#return-type-core</string>\n              </dict>\n            </array>\n          </dict>\n          <dict>\n            <key>name</key>\n            <string>meta.return.type.tsx</string>\n            <key>begin</key>\n            <string>(?&lt;=\\))\\s*(:)</string>\n            <key>beginCaptures</key>\n            <dict>\n              <key>1</key>\n              <dict>\n                <key>name</key>\n                <string>keyword.operator.type.annotation.tsx</string>\n              </dict>\n            </dict>\n            <key>end</key>\n            <string>(?&lt;![:|&amp;])((?=[{};,]|//|^\\s*$)|((?&lt;=\\S)(?=\\s*$)))</string>\n            <key>patterns</key>\n            <array>\n              <dict>\n                <key>include</key>\n                <string>#return-type-core</string>\n              </dict>\n            </array>\n          </dict>\n        </array>\n      </dict>\n      <key>return-type-core</key>\n      <dict>\n        <key>patterns</key>\n        <array>\n          <dict>\n            <key>include</key>\n            <string>#comment</string>\n          </dict>\n          <dict>\n            <key>begin</key>\n            <string>(?&lt;=[:|&amp;])(?=\\s*\\{)</string>\n            <key>end</key>\n            <string>(?&lt;=\\})</string>\n            <key>patterns</key>\n            <array>\n              <dict>\n                <key>include</key>\n                <string>#type-object</string>\n              </dict>\n            </array>\n          </dict>\n          <dict>\n            <key>include</key>\n            <string>#type-predicate-operator</string>\n          </dict>\n          <dict>\n            <key>include</key>\n            <string>#type</string>\n          </dict>\n        </array>\n      </dict>\n      <key>arrow-return-type</key>\n      <dict>\n        <key>name</key>\n        <string>meta.return.type.arrow.tsx</string>\n        <key>begin</key>\n        <string>(?&lt;=\\))\\s*(:)</string>\n        <key>beginCaptures</key>\n        <dict>\n          <key>1</key>\n          <dict>\n            <key>name</key>\n            <string>keyword.operator.type.annotation.tsx</string>\n          </dict>\n        </dict>\n        <key>end</key>\n        <string>(?==&gt;|\\{|(^\\s*(export|function|class|interface|let|var|const|import|enum|namespace|module|type|abstract|declare)\\s+))</string>\n        <key>patterns</key>\n        <array>\n          <dict>\n            <key>include</key>\n            <string>#arrow-return-type-body</string>\n          </dict>\n        </array>\n      </dict>\n      <key>possibly-arrow-return-type</key>\n      <dict>\n        <key>begin</key>\n        <string>(?&lt;=\\))\\s*(:)(?=\\s*([^&lt;&gt;\\(\\)]|\\&lt;[^&lt;&gt;]+\\&gt;|\\([^\\(\\)]+\\))+\\s*=&gt;)</string>\n        <key>beginCaptures</key>\n        <dict>\n          <key>1</key>\n          <dict>\n            <key>name</key>\n            <string>meta.arrow.tsx meta.return.type.arrow.tsx keyword.operator.type.annotation.tsx</string>\n          </dict>\n        </dict>\n        <key>end</key>\n        <string>(?==&gt;|\\{|(^\\s*(export|function|class|interface|let|var|const|import|enum|namespace|module|type|abstract|declare)\\s+))</string>\n        <key>contentName</key>\n        <string>meta.arrow.tsx meta.return.type.arrow.tsx</string>\n        <key>patterns</key>\n        <array>\n          <dict>\n            <key>include</key>\n            <string>#arrow-return-type-body</string>\n          </dict>\n        </array>\n      </dict>\n      <key>arrow-return-type-body</key>\n      <dict>\n        <key>patterns</key>\n        <array>\n          <dict>\n            <key>begin</key>\n            <string>(?&lt;=[:])(?=\\s*\\{)</string>\n            <key>end</key>\n            <string>(?&lt;=\\})</string>\n            <key>patterns</key>\n            <array>\n              <dict>\n                <key>include</key>\n                <string>#type-object</string>\n              </dict>\n            </array>\n          </dict>\n          <dict>\n            <key>include</key>\n            <string>#type-predicate-operator</string>\n          </dict>\n          <dict>\n            <key>include</key>\n            <string>#type</string>\n          </dict>\n        </array>\n      </dict>\n      <key>type-parameters</key>\n      <dict>\n        <key>name</key>\n        <string>meta.type.parameters.tsx</string>\n        <key>begin</key>\n        <string>(&lt;)</string>\n        <key>beginCaptures</key>\n        <dict>\n          <key>1</key>\n          <dict>\n            <key>name</key>\n            <string>punctuation.definition.typeparameters.begin.tsx</string>\n          </dict>\n        </dict>\n        <key>end</key>\n        <string>(&gt;)</string>\n        <key>endCaptures</key>\n        <dict>\n          <key>1</key>\n          <dict>\n            <key>name</key>\n            <string>punctuation.definition.typeparameters.end.tsx</string>\n          </dict>\n        </dict>\n        <key>patterns</key>\n        <array>\n          <dict>\n            <key>include</key>\n            <string>#comment</string>\n          </dict>\n          <dict>\n            <key>name</key>\n            <string>storage.modifier.tsx</string>\n            <key>match</key>\n            <string>(?&lt;![_$[:alnum:]])(?:(?&lt;=\\.\\.\\.)|(?&lt;!\\.))(extends)(?![_$[:alnum:]])(?:(?=\\.\\.\\.)|(?!\\.))</string>\n          </dict>\n          <dict>\n            <key>include</key>\n            <string>#type</string>\n          </dict>\n          <dict>\n            <key>include</key>\n            <string>#punctuation-comma</string>\n          </dict>\n        </array>\n      </dict>\n      <key>type-arguments</key>\n      <dict>\n        <key>name</key>\n        <string>meta.type.parameters.tsx</string>\n        <key>begin</key>\n        <string>\\&lt;</string>\n        <key>beginCaptures</key>\n        <dict>\n          <key>0</key>\n          <dict>\n            <key>name</key>\n            <string>punctuation.definition.typeparameters.begin.tsx</string>\n          </dict>\n        </dict>\n        <key>end</key>\n        <string>\\&gt;</string>\n        <key>endCaptures</key>\n        <dict>\n          <key>0</key>\n          <dict>\n            <key>name</key>\n            <string>punctuation.definition.typeparameters.end.tsx</string>\n          </dict>\n        </dict>\n        <key>patterns</key>\n        <array>\n          <dict>\n            <key>include</key>\n            <string>#type</string>\n          </dict>\n          <dict>\n            <key>include</key>\n            <string>#punctuation-comma</string>\n          </dict>\n        </array>\n      </dict>\n      <key>type</key>\n      <dict>\n        <key>patterns</key>\n        <array>\n          <dict>\n            <key>include</key>\n            <string>#comment</string>\n          </dict>\n          <dict>\n            <key>include</key>\n            <string>#string</string>\n          </dict>\n          <dict>\n            <key>include</key>\n            <string>#numeric-literal</string>\n          </dict>\n          <dict>\n            <key>include</key>\n            <string>#type-primitive</string>\n          </dict>\n          <dict>\n            <key>include</key>\n            <string>#type-builtin-literals</string>\n          </dict>\n          <dict>\n            <key>include</key>\n            <string>#type-parameters</string>\n          </dict>\n          <dict>\n            <key>include</key>\n            <string>#type-tuple</string>\n          </dict>\n          <dict>\n            <key>include</key>\n            <string>#type-object</string>\n          </dict>\n          <dict>\n            <key>include</key>\n            <string>#type-conditional</string>\n          </dict>\n          <dict>\n            <key>include</key>\n            <string>#type-operators</string>\n          </dict>\n          <dict>\n            <key>include</key>\n            <string>#type-fn-type-parameters</string>\n          </dict>\n          <dict>\n            <key>include</key>\n            <string>#type-paren-or-function-parameters</string>\n          </dict>\n          <dict>\n            <key>include</key>\n            <string>#type-function-return-type</string>\n          </dict>\n          <dict>\n            <key>include</key>\n            <string>#type-name</string>\n          </dict>\n        </array>\n      </dict>\n      <key>type-primitive</key>\n      <dict>\n        <key>name</key>\n        <string>support.type.primitive.tsx</string>\n        <key>match</key>\n        <string>(?&lt;![_$[:alnum:]])(?:(?&lt;=\\.\\.\\.)|(?&lt;!\\.))(string|number|boolean|symbol|any|void|never)(?![_$[:alnum:]])(?:(?=\\.\\.\\.)|(?!\\.))</string>\n      </dict>\n      <key>type-builtin-literals</key>\n      <dict>\n        <key>name</key>\n        <string>support.type.builtin.tsx</string>\n        <key>match</key>\n        <string>(?&lt;![_$[:alnum:]])(?:(?&lt;=\\.\\.\\.)|(?&lt;!\\.))(this|true|false|undefined|null|object)(?![_$[:alnum:]])(?:(?=\\.\\.\\.)|(?!\\.))</string>\n      </dict>\n      <key>type-tuple</key>\n      <dict>\n        <key>name</key>\n        <string>meta.type.tuple.tsx</string>\n        <key>begin</key>\n        <string>\\[</string>\n        <key>beginCaptures</key>\n        <dict>\n          <key>0</key>\n          <dict>\n            <key>name</key>\n            <string>meta.brace.square.tsx</string>\n          </dict>\n        </dict>\n        <key>end</key>\n        <string>\\]</string>\n        <key>endCaptures</key>\n        <dict>\n          <key>0</key>\n          <dict>\n            <key>name</key>\n            <string>meta.brace.square.tsx</string>\n          </dict>\n        </dict>\n        <key>patterns</key>\n        <array>\n          <dict>\n            <key>include</key>\n            <string>#type</string>\n          </dict>\n          <dict>\n            <key>include</key>\n            <string>#punctuation-comma</string>\n          </dict>\n        </array>\n      </dict>\n      <key>type-object</key>\n      <dict>\n        <key>name</key>\n        <string>meta.object.type.tsx</string>\n        <key>begin</key>\n        <string>\\{</string>\n        <key>beginCaptures</key>\n        <dict>\n          <key>0</key>\n          <dict>\n            <key>name</key>\n            <string>punctuation.definition.block.tsx</string>\n          </dict>\n        </dict>\n        <key>end</key>\n        <string>\\}</string>\n        <key>endCaptures</key>\n        <dict>\n          <key>0</key>\n          <dict>\n            <key>name</key>\n            <string>punctuation.definition.block.tsx</string>\n          </dict>\n        </dict>\n        <key>patterns</key>\n        <array>\n          <dict>\n            <key>include</key>\n            <string>#comment</string>\n          </dict>\n          <dict>\n            <key>include</key>\n            <string>#method-declaration</string>\n          </dict>\n          <dict>\n            <key>include</key>\n            <string>#indexer-declaration</string>\n          </dict>\n          <dict>\n            <key>include</key>\n            <string>#indexer-mapped-type-declaration</string>\n          </dict>\n          <dict>\n            <key>include</key>\n            <string>#field-declaration</string>\n          </dict>\n          <dict>\n            <key>include</key>\n            <string>#type-annotation</string>\n          </dict>\n          <dict>\n            <key>begin</key>\n            <string>\\.\\.\\.</string>\n            <key>beginCaptures</key>\n            <dict>\n              <key>0</key>\n              <dict>\n                <key>name</key>\n                <string>keyword.operator.spread.tsx</string>\n              </dict>\n            </dict>\n            <key>end</key>\n            <string>(?=\\}|;|,|$)|(?&lt;=\\})</string>\n            <key>patterns</key>\n            <array>\n              <dict>\n                <key>include</key>\n                <string>#type</string>\n              </dict>\n            </array>\n          </dict>\n          <dict>\n            <key>include</key>\n            <string>#punctuation-comma</string>\n          </dict>\n          <dict>\n            <key>include</key>\n            <string>#punctuation-semicolon</string>\n          </dict>\n          <dict>\n            <key>include</key>\n            <string>#type</string>\n          </dict>\n        </array>\n      </dict>\n      <key>type-conditional</key>\n      <dict>\n        <key>patterns</key>\n        <array>\n          <dict>\n            <key>begin</key>\n            <string>(?&lt;![_$[:alnum:]])(?:(?&lt;=\\.\\.\\.)|(?&lt;!\\.))(extends)\\s+</string>\n            <key>beginCaptures</key>\n            <dict>\n              <key>1</key>\n              <dict>\n                <key>name</key>\n                <string>storage.modifier.tsx</string>\n              </dict>\n            </dict>\n            <key>end</key>\n            <string>(?&lt;=:)</string>\n            <key>patterns</key>\n            <array>\n              <dict>\n                <key>begin</key>\n                <string>\\?</string>\n                <key>beginCaptures</key>\n                <dict>\n                  <key>0</key>\n                  <dict>\n                    <key>name</key>\n                    <string>keyword.operator.ternary.tsx</string>\n                  </dict>\n                </dict>\n                <key>end</key>\n                <string>:</string>\n                <key>endCaptures</key>\n                <dict>\n                  <key>0</key>\n                  <dict>\n                    <key>name</key>\n                    <string>keyword.operator.ternary.tsx</string>\n                  </dict>\n                </dict>\n                <key>patterns</key>\n                <array>\n                  <dict>\n                    <key>include</key>\n                    <string>#type</string>\n                  </dict>\n                </array>\n              </dict>\n              <dict>\n                <key>include</key>\n                <string>#type</string>\n              </dict>\n            </array>\n          </dict>\n        </array>\n      </dict>\n      <key>type-paren-or-function-parameters</key>\n      <dict>\n        <key>name</key>\n        <string>meta.type.paren.cover.tsx</string>\n        <key>begin</key>\n        <string>\\(</string>\n        <key>beginCaptures</key>\n        <dict>\n          <key>0</key>\n          <dict>\n            <key>name</key>\n            <string>meta.brace.round.tsx</string>\n          </dict>\n        </dict>\n        <key>end</key>\n        <string>\\)</string>\n        <key>endCaptures</key>\n        <dict>\n          <key>0</key>\n          <dict>\n            <key>name</key>\n            <string>meta.brace.round.tsx</string>\n          </dict>\n        </dict>\n        <key>patterns</key>\n        <array>\n          <dict>\n            <key>include</key>\n            <string>#destructuring-parameter</string>\n          </dict>\n          <dict>\n            <key>match</key>\n            <string>(?x)(?:(?&lt;![_$[:alnum:]])(?:(?&lt;=\\.\\.\\.)|(?&lt;!\\.))(public|private|protected|readonly)\\s+)?(?:(\\.\\.\\.)\\s*)?(?&lt;!=|:)(?&lt;![_$[:alnum:]])(?:(?&lt;=\\.\\.\\.)|(?&lt;!\\.))(?:(this)|([_$[:alpha:]][_$[:alnum:]]*))\\s*(\\??)(?=\\s*(:\\s*(\n  (&lt;) |\n  ([(]\\s*(\n    ([)]) |\n    (\\.\\.\\.) |\n    ([_$[:alnum:]]+\\s*(\n      ([:,?=])|\n      ([)]\\s*=&gt;)\n    ))\n  ))\n)) |\n(:\\s*([\\(]\\s*([\\{\\[]\\s*)?$)))</string>\n            <key>captures</key>\n            <dict>\n              <key>1</key>\n              <dict>\n                <key>name</key>\n                <string>storage.modifier.tsx</string>\n              </dict>\n              <key>2</key>\n              <dict>\n                <key>name</key>\n                <string>keyword.operator.rest.tsx</string>\n              </dict>\n              <key>3</key>\n              <dict>\n                <key>name</key>\n                <string>entity.name.function.tsx variable.language.this.tsx</string>\n              </dict>\n              <key>4</key>\n              <dict>\n                <key>name</key>\n                <string>entity.name.function.tsx</string>\n              </dict>\n              <key>5</key>\n              <dict>\n                <key>name</key>\n                <string>keyword.operator.optional.tsx</string>\n              </dict>\n            </dict>\n          </dict>\n          <dict>\n            <key>match</key>\n            <string>(?x)(?:(?&lt;![_$[:alnum:]])(?:(?&lt;=\\.\\.\\.)|(?&lt;!\\.))(public|private|protected|readonly)\\s+)?(?:(\\.\\.\\.)\\s*)?(?&lt;!=|:)(?&lt;![_$[:alnum:]])(?:(?&lt;=\\.\\.\\.)|(?&lt;!\\.))(?:(this)|([_$[:alpha:]][_$[:alnum:]]*))\\s*(\\??)(?=:)</string>\n            <key>captures</key>\n            <dict>\n              <key>1</key>\n              <dict>\n                <key>name</key>\n                <string>storage.modifier.tsx</string>\n              </dict>\n              <key>2</key>\n              <dict>\n                <key>name</key>\n                <string>keyword.operator.rest.tsx</string>\n              </dict>\n              <key>3</key>\n              <dict>\n                <key>name</key>\n                <string>variable.parameter.tsx variable.language.this.tsx</string>\n              </dict>\n              <key>4</key>\n              <dict>\n                <key>name</key>\n                <string>variable.parameter.tsx</string>\n              </dict>\n              <key>5</key>\n              <dict>\n                <key>name</key>\n                <string>keyword.operator.optional.tsx</string>\n              </dict>\n            </dict>\n          </dict>\n          <dict>\n            <key>include</key>\n            <string>#type-annotation</string>\n          </dict>\n          <dict>\n            <key>name</key>\n            <string>punctuation.separator.parameter.tsx</string>\n            <key>match</key>\n            <string>,</string>\n          </dict>\n          <dict>\n            <key>include</key>\n            <string>#type</string>\n          </dict>\n        </array>\n      </dict>\n      <key>type-fn-type-parameters</key>\n      <dict>\n        <key>patterns</key>\n        <array>\n          <dict>\n            <key>name</key>\n            <string>meta.type.constructor.tsx</string>\n            <key>match</key>\n            <string>(?&lt;![_$[:alnum:]])(?:(?&lt;=\\.\\.\\.)|(?&lt;!\\.))(new)\\b(?=\\s*\\&lt;)</string>\n            <key>captures</key>\n            <dict>\n              <key>1</key>\n              <dict>\n                <key>name</key>\n                <string>keyword.control.new.tsx</string>\n              </dict>\n            </dict>\n          </dict>\n          <dict>\n            <key>name</key>\n            <string>meta.type.constructor.tsx</string>\n            <key>begin</key>\n            <string>(?&lt;![_$[:alnum:]])(?:(?&lt;=\\.\\.\\.)|(?&lt;!\\.))(new)\\b\\s*(?=\\()</string>\n            <key>beginCaptures</key>\n            <dict>\n              <key>1</key>\n              <dict>\n                <key>name</key>\n                <string>keyword.control.new.tsx</string>\n              </dict>\n            </dict>\n            <key>end</key>\n            <string>(?&lt;=\\))</string>\n            <key>patterns</key>\n            <array>\n              <dict>\n                <key>include</key>\n                <string>#function-parameters</string>\n              </dict>\n            </array>\n          </dict>\n          <dict>\n            <key>name</key>\n            <string>meta.type.function.tsx</string>\n            <key>begin</key>\n            <string>(?x)(\n  (?=\n    [(]\\s*(\n      ([)]) |\n      (\\.\\.\\.) |\n      ([_$[:alnum:]]+\\s*(\n        ([:,?=])|\n        ([)]\\s*=&gt;)\n      ))\n    )\n  )\n)</string>\n            <key>end</key>\n            <string>(?&lt;=\\))</string>\n            <key>patterns</key>\n            <array>\n              <dict>\n                <key>include</key>\n                <string>#function-parameters</string>\n              </dict>\n            </array>\n          </dict>\n        </array>\n      </dict>\n      <key>type-function-return-type</key>\n      <dict>\n        <key>patterns</key>\n        <array>\n          <dict>\n            <key>name</key>\n            <string>meta.type.function.return.tsx</string>\n            <key>begin</key>\n            <string>(=&gt;)(?=\\s*\\S)</string>\n            <key>beginCaptures</key>\n            <dict>\n              <key>1</key>\n              <dict>\n                <key>name</key>\n                <string>storage.type.function.arrow.tsx</string>\n              </dict>\n            </dict>\n            <key>end</key>\n            <string>(?&lt;!=&gt;)(?&lt;![|&amp;])(?=[,\\]\\)\\{\\}=;&gt;:\\?]|//|$)</string>\n            <key>patterns</key>\n            <array>\n              <dict>\n                <key>include</key>\n                <string>#type-function-return-type-core</string>\n              </dict>\n            </array>\n          </dict>\n          <dict>\n            <key>name</key>\n            <string>meta.type.function.return.tsx</string>\n            <key>begin</key>\n            <string>=&gt;</string>\n            <key>beginCaptures</key>\n            <dict>\n              <key>0</key>\n              <dict>\n                <key>name</key>\n                <string>storage.type.function.arrow.tsx</string>\n              </dict>\n            </dict>\n            <key>end</key>\n            <string>(?&lt;!=&gt;)(?&lt;![|&amp;])((?=[,\\]\\)\\{\\}=;:\\?&gt;]|//|^\\s*$)|((?&lt;=\\S)(?=\\s*$)))</string>\n            <key>patterns</key>\n            <array>\n              <dict>\n                <key>include</key>\n                <string>#type-function-return-type-core</string>\n              </dict>\n            </array>\n          </dict>\n        </array>\n      </dict>\n      <key>type-function-return-type-core</key>\n      <dict>\n        <key>patterns</key>\n        <array>\n          <dict>\n            <key>include</key>\n            <string>#comment</string>\n          </dict>\n          <dict>\n            <key>begin</key>\n            <string>(?&lt;==&gt;)(?=\\s*\\{)</string>\n            <key>end</key>\n            <string>(?&lt;=\\})</string>\n            <key>patterns</key>\n            <array>\n              <dict>\n                <key>include</key>\n                <string>#type-object</string>\n              </dict>\n            </array>\n          </dict>\n          <dict>\n            <key>include</key>\n            <string>#type-predicate-operator</string>\n          </dict>\n          <dict>\n            <key>include</key>\n            <string>#type</string>\n          </dict>\n        </array>\n      </dict>\n      <key>type-operators</key>\n      <dict>\n        <key>patterns</key>\n        <array>\n          <dict>\n            <key>include</key>\n            <string>#typeof-operator</string>\n          </dict>\n          <dict>\n            <key>begin</key>\n            <string>(?:([&amp;|])|(=(?!&gt;)))(?=\\s*\\{)</string>\n            <key>beginCaptures</key>\n            <dict>\n              <key>1</key>\n              <dict>\n                <key>name</key>\n                <string>keyword.operator.type.tsx</string>\n              </dict>\n              <key>2</key>\n              <dict>\n                <key>name</key>\n                <string>keyword.operator.assignment.tsx</string>\n              </dict>\n            </dict>\n            <key>end</key>\n            <string>(?&lt;=\\})</string>\n            <key>patterns</key>\n            <array>\n              <dict>\n                <key>include</key>\n                <string>#type-object</string>\n              </dict>\n            </array>\n          </dict>\n          <dict>\n            <key>begin</key>\n            <string>([&amp;|])|(=(?!&gt;))</string>\n            <key>beginCaptures</key>\n            <dict>\n              <key>1</key>\n              <dict>\n                <key>name</key>\n                <string>keyword.operator.type.tsx</string>\n              </dict>\n              <key>2</key>\n              <dict>\n                <key>name</key>\n                <string>keyword.operator.assignment.tsx</string>\n              </dict>\n            </dict>\n            <key>end</key>\n            <string>(?=\\S)</string>\n          </dict>\n          <dict>\n            <key>name</key>\n            <string>keyword.operator.expression.keyof.tsx</string>\n            <key>match</key>\n            <string>(?&lt;![_$[:alnum:]])(?:(?&lt;=\\.\\.\\.)|(?&lt;!\\.))keyof(?![_$[:alnum:]])(?:(?=\\.\\.\\.)|(?!\\.))</string>\n          </dict>\n          <dict>\n            <key>name</key>\n            <string>keyword.operator.ternary.tsx</string>\n            <key>match</key>\n            <string>(\\?|\\:)</string>\n          </dict>\n          <dict>\n            <key>name</key>\n            <string>keyword.operator.expression.infer.tsx</string>\n            <key>match</key>\n            <string>(?&lt;![_$[:alnum:]])(?:(?&lt;=\\.\\.\\.)|(?&lt;!\\.))infer(?=\\s+[_$[:alpha:]])</string>\n          </dict>\n          <dict>\n            <key>name</key>\n            <string>keyword.operator.expression.import.tsx</string>\n            <key>match</key>\n            <string>(?&lt;![_$[:alnum:]])(?:(?&lt;=\\.\\.\\.)|(?&lt;!\\.))import(?=\\s*\\()</string>\n          </dict>\n        </array>\n      </dict>\n      <key>type-predicate-operator</key>\n      <dict>\n        <key>name</key>\n        <string>keyword.operator.expression.is.tsx</string>\n        <key>match</key>\n        <string>(?&lt;![_$[:alnum:]])(?:(?&lt;=\\.\\.\\.)|(?&lt;!\\.))is(?![_$[:alnum:]])(?:(?=\\.\\.\\.)|(?!\\.))</string>\n      </dict>\n      <key>type-name</key>\n      <dict>\n        <key>patterns</key>\n        <array>\n          <dict>\n            <key>match</key>\n            <string>([_$[:alpha:]][_$[:alnum:]]*)\\s*(?:(\\.)|(\\?\\.(?!\\s*[[:digit:]])))</string>\n            <key>captures</key>\n            <dict>\n              <key>1</key>\n              <dict>\n                <key>name</key>\n                <string>entity.name.type.module.tsx</string>\n              </dict>\n              <key>2</key>\n              <dict>\n                <key>name</key>\n                <string>punctuation.accessor.tsx</string>\n              </dict>\n              <key>3</key>\n              <dict>\n                <key>name</key>\n                <string>punctuation.accessor.optional.tsx</string>\n              </dict>\n            </dict>\n          </dict>\n          <dict>\n            <key>name</key>\n            <string>entity.name.type.tsx</string>\n            <key>match</key>\n            <string>[_$[:alpha:]][_$[:alnum:]]*</string>\n          </dict>\n        </array>\n      </dict>\n      <key>punctuation-comma</key>\n      <dict>\n        <key>name</key>\n        <string>punctuation.separator.comma.tsx</string>\n        <key>match</key>\n        <string>,</string>\n      </dict>\n      <key>punctuation-semicolon</key>\n      <dict>\n        <key>name</key>\n        <string>punctuation.terminator.statement.tsx</string>\n        <key>match</key>\n        <string>;</string>\n      </dict>\n      <key>punctuation-accessor</key>\n      <dict>\n        <key>match</key>\n        <string>(?:(\\.)|(\\?\\.(?!\\s*[[:digit:]])))</string>\n        <key>captures</key>\n        <dict>\n          <key>1</key>\n          <dict>\n            <key>name</key>\n            <string>punctuation.accessor.tsx</string>\n          </dict>\n          <key>2</key>\n          <dict>\n            <key>name</key>\n            <string>punctuation.accessor.optional.tsx</string>\n          </dict>\n        </dict>\n      </dict>\n      <key>string</key>\n      <dict>\n        <key>patterns</key>\n        <array>\n          <dict>\n            <key>include</key>\n            <string>#qstring-single</string>\n          </dict>\n          <dict>\n            <key>include</key>\n            <string>#qstring-double</string>\n          </dict>\n        </array>\n      </dict>\n      <key>qstring-double</key>\n      <dict>\n        <key>name</key>\n        <string>string.quoted.double.tsx</string>\n        <key>begin</key>\n        <string>"</string>\n        <key>beginCaptures</key>\n        <dict>\n          <key>0</key>\n          <dict>\n            <key>name</key>\n            <string>punctuation.definition.string.begin.tsx</string>\n          </dict>\n        </dict>\n        <key>end</key>\n        <string>(")|((?:[^\\\\\\n])$)</string>\n        <key>endCaptures</key>\n        <dict>\n          <key>1</key>\n          <dict>\n            <key>name</key>\n            <string>punctuation.definition.string.end.tsx</string>\n          </dict>\n          <key>2</key>\n          <dict>\n            <key>name</key>\n            <string>invalid.illegal.newline.tsx</string>\n          </dict>\n        </dict>\n        <key>patterns</key>\n        <array>\n          <dict>\n            <key>include</key>\n            <string>#string-character-escape</string>\n          </dict>\n        </array>\n      </dict>\n      <key>qstring-single</key>\n      <dict>\n        <key>name</key>\n        <string>string.quoted.single.tsx</string>\n        <key>begin</key>\n        <string>\'</string>\n        <key>beginCaptures</key>\n        <dict>\n          <key>0</key>\n          <dict>\n            <key>name</key>\n            <string>punctuation.definition.string.begin.tsx</string>\n          </dict>\n        </dict>\n        <key>end</key>\n        <string>(\\\')|((?:[^\\\\\\n])$)</string>\n        <key>endCaptures</key>\n        <dict>\n          <key>1</key>\n          <dict>\n            <key>name</key>\n            <string>punctuation.definition.string.end.tsx</string>\n          </dict>\n          <key>2</key>\n          <dict>\n            <key>name</key>\n            <string>invalid.illegal.newline.tsx</string>\n          </dict>\n        </dict>\n        <key>patterns</key>\n        <array>\n          <dict>\n            <key>include</key>\n            <string>#string-character-escape</string>\n          </dict>\n        </array>\n      </dict>\n      <key>string-character-escape</key>\n      <dict>\n        <key>name</key>\n        <string>constant.character.escape.tsx</string>\n        <key>match</key>\n        <string>\\\\(x[0-9A-Fa-f]{2}|[0-2][0-7]{0,2}|3[0-6][0-7]?|37[0-7]?|[4-7][0-7]?|.|$)</string>\n      </dict>\n      <key>template</key>\n      <dict>\n        <key>patterns</key>\n        <array>\n          <dict>\n            <key>name</key>\n            <string>string.template.tsx</string>\n            <key>begin</key>\n            <string>([_$[:alpha:]][_$[:alnum:]]*)\\s*(?=(&lt;\\s*(((keyof|infer)\\s+)|(([_$[:alpha:]][_$[:alnum:]]*|(\\{([^\\{\\}]|(\\{[^\\{\\}]*\\}))*\\})|(\\(([^\\(\\)]|(\\([^\\(\\)]*\\)))*\\))|(\\[([^\\[\\]]|(\\[[^\\[\\]]*\\]))*\\])|(\\\'[^\\\']*\\\')|(\\"[^\\"]*\\")|(\\`[^\\`]*\\`))(?=\\s*([\\&lt;\\&gt;\\,\\.\\[=]|&amp;(?!&amp;)|\\|(?!\\|)))))([^&lt;&gt;\\(]|(\\(([^\\(\\)]|(\\([^\\(\\)]*\\)))*\\))|(?&lt;==)\\&gt;|\\&lt;\\s*(((keyof|infer)\\s+)|(([_$[:alpha:]][_$[:alnum:]]*|(\\{([^\\{\\}]|(\\{[^\\{\\}]*\\}))*\\})|(\\(([^\\(\\)]|(\\([^\\(\\)]*\\)))*\\))|(\\[([^\\[\\]]|(\\[[^\\[\\]]*\\]))*\\])|(\\\'[^\\\']*\\\')|(\\"[^\\"]*\\")|(\\`[^\\`]*\\`))(?=\\s*([\\&lt;\\&gt;\\,\\.\\[=]|&amp;(?!&amp;)|\\|(?!\\|)))))([^&lt;&gt;\\(]|(\\(([^\\(\\)]|(\\([^\\(\\)]*\\)))*\\))|(?&lt;==)\\&gt;)*(?!=)\\&gt;)*(?!=)&gt;\\s*)`)</string>\n            <key>beginCaptures</key>\n            <dict>\n              <key>1</key>\n              <dict>\n                <key>name</key>\n                <string>entity.name.function.tagged-template.tsx</string>\n              </dict>\n            </dict>\n            <key>end</key>\n            <string>(?=`)</string>\n            <key>patterns</key>\n            <array>\n              <dict>\n                <key>include</key>\n                <string>#type-arguments</string>\n              </dict>\n            </array>\n          </dict>\n          <dict>\n            <key>name</key>\n            <string>string.template.tsx</string>\n            <key>begin</key>\n            <string>([_$[:alpha:]][_$[:alnum:]]*)?(`)</string>\n            <key>beginCaptures</key>\n            <dict>\n              <key>1</key>\n              <dict>\n                <key>name</key>\n                <string>entity.name.function.tagged-template.tsx</string>\n              </dict>\n              <key>2</key>\n              <dict>\n                <key>name</key>\n                <string>punctuation.definition.string.template.begin.tsx</string>\n              </dict>\n            </dict>\n            <key>end</key>\n            <string>`</string>\n            <key>endCaptures</key>\n            <dict>\n              <key>0</key>\n              <dict>\n                <key>name</key>\n                <string>punctuation.definition.string.template.end.tsx</string>\n              </dict>\n            </dict>\n            <key>patterns</key>\n            <array>\n              <dict>\n                <key>include</key>\n                <string>#template-substitution-element</string>\n              </dict>\n              <dict>\n                <key>include</key>\n                <string>#string-character-escape</string>\n              </dict>\n            </array>\n          </dict>\n        </array>\n      </dict>\n      <key>template-substitution-element</key>\n      <dict>\n        <key>name</key>\n        <string>meta.template.expression.tsx</string>\n        <key>begin</key>\n        <string>\\$\\{</string>\n        <key>beginCaptures</key>\n        <dict>\n          <key>0</key>\n          <dict>\n            <key>name</key>\n            <string>punctuation.definition.template-expression.begin.tsx</string>\n          </dict>\n        </dict>\n        <key>end</key>\n        <string>\\}</string>\n        <key>endCaptures</key>\n        <dict>\n          <key>0</key>\n          <dict>\n            <key>name</key>\n            <string>punctuation.definition.template-expression.end.tsx</string>\n          </dict>\n        </dict>\n        <key>patterns</key>\n        <array>\n          <dict>\n            <key>include</key>\n            <string>#expression</string>\n          </dict>\n        </array>\n        <key>contentName</key>\n        <string>meta.embedded.line.tsx</string>\n      </dict>\n      <key>regex</key>\n      <dict>\n        <key>patterns</key>\n        <array>\n          <dict>\n            <key>name</key>\n            <string>string.regexp.tsx</string>\n            <key>begin</key>\n            <string>(?&lt;!\\+\\+|--)(?&lt;=[=(:,\\[?+!]|^return|[^\\._$[:alnum:]]return|^case|[^\\._$[:alnum:]]case|=&gt;|&amp;&amp;|\\|\\||\\*\\/)\\s*(\\/)(?![\\/*])(?=(?:[^\\/\\\\\\[]|\\\\.|\\[([^\\]\\\\]|\\\\.)+\\])+\\/[gimsuy]*(?!\\s*[a-zA-Z0-9_$]))</string>\n            <key>beginCaptures</key>\n            <dict>\n              <key>1</key>\n              <dict>\n                <key>name</key>\n                <string>punctuation.definition.string.begin.tsx</string>\n              </dict>\n            </dict>\n            <key>end</key>\n            <string>(/)([gimsuy]*)</string>\n            <key>endCaptures</key>\n            <dict>\n              <key>1</key>\n              <dict>\n                <key>name</key>\n                <string>punctuation.definition.string.end.tsx</string>\n              </dict>\n              <key>2</key>\n              <dict>\n                <key>name</key>\n                <string>keyword.other.tsx</string>\n              </dict>\n            </dict>\n            <key>patterns</key>\n            <array>\n              <dict>\n                <key>include</key>\n                <string>#regexp</string>\n              </dict>\n            </array>\n          </dict>\n          <dict>\n            <key>name</key>\n            <string>string.regexp.tsx</string>\n            <key>begin</key>\n            <string>(?&lt;![_$[:alnum:])\\]]|\\+\\+|--)\\/(?![\\/*])(?=(?:[^\\/\\\\\\[]|\\\\.|\\[([^\\]\\\\]|\\\\.)+\\])+\\/[gimsuy]*(?!\\s*[a-zA-Z0-9_$]))</string>\n            <key>beginCaptures</key>\n            <dict>\n              <key>0</key>\n              <dict>\n                <key>name</key>\n                <string>punctuation.definition.string.begin.tsx</string>\n              </dict>\n            </dict>\n            <key>end</key>\n            <string>(/)([gimsuy]*)</string>\n            <key>endCaptures</key>\n            <dict>\n              <key>1</key>\n              <dict>\n                <key>name</key>\n                <string>punctuation.definition.string.end.tsx</string>\n              </dict>\n              <key>2</key>\n              <dict>\n                <key>name</key>\n                <string>keyword.other.tsx</string>\n              </dict>\n            </dict>\n            <key>patterns</key>\n            <array>\n              <dict>\n                <key>include</key>\n                <string>#regexp</string>\n              </dict>\n            </array>\n          </dict>\n        </array>\n      </dict>\n      <key>regexp</key>\n      <dict>\n        <key>patterns</key>\n        <array>\n          <dict>\n            <key>name</key>\n            <string>keyword.control.anchor.regexp</string>\n            <key>match</key>\n            <string>\\\\[bB]|\\^|\\$</string>\n          </dict>\n          <dict>\n            <key>match</key>\n            <string>\\\\[1-9]\\d*|\\\\k&lt;([a-zA-Z_$][\\w$]*)&gt;</string>\n            <key>captures</key>\n            <dict>\n              <key>0</key>\n              <dict>\n                <key>name</key>\n                <string>keyword.other.back-reference.regexp</string>\n              </dict>\n              <key>1</key>\n              <dict>\n                <key>name</key>\n                <string>variable.other.regexp</string>\n              </dict>\n            </dict>\n          </dict>\n          <dict>\n            <key>name</key>\n            <string>keyword.operator.quantifier.regexp</string>\n            <key>match</key>\n            <string>[?+*]|\\{(\\d+,\\d+|\\d+,|,\\d+|\\d+)\\}\\??</string>\n          </dict>\n          <dict>\n            <key>name</key>\n            <string>keyword.operator.or.regexp</string>\n            <key>match</key>\n            <string>\\|</string>\n          </dict>\n          <dict>\n            <key>name</key>\n            <string>meta.group.assertion.regexp</string>\n            <key>begin</key>\n            <string>(\\()((\\?=)|(\\?!)|(\\?&lt;=)|(\\?&lt;!))</string>\n            <key>beginCaptures</key>\n            <dict>\n              <key>1</key>\n              <dict>\n                <key>name</key>\n                <string>punctuation.definition.group.regexp</string>\n              </dict>\n              <key>2</key>\n              <dict>\n                <key>name</key>\n                <string>punctuation.definition.group.assertion.regexp</string>\n              </dict>\n              <key>3</key>\n              <dict>\n                <key>name</key>\n                <string>meta.assertion.look-ahead.regexp</string>\n              </dict>\n              <key>4</key>\n              <dict>\n                <key>name</key>\n                <string>meta.assertion.negative-look-ahead.regexp</string>\n              </dict>\n              <key>5</key>\n              <dict>\n                <key>name</key>\n                <string>meta.assertion.look-behind.regexp</string>\n              </dict>\n              <key>6</key>\n              <dict>\n                <key>name</key>\n                <string>meta.assertion.negative-look-behind.regexp</string>\n              </dict>\n            </dict>\n            <key>end</key>\n            <string>(\\))</string>\n            <key>endCaptures</key>\n            <dict>\n              <key>1</key>\n              <dict>\n                <key>name</key>\n                <string>punctuation.definition.group.regexp</string>\n              </dict>\n            </dict>\n            <key>patterns</key>\n            <array>\n              <dict>\n                <key>include</key>\n                <string>#regexp</string>\n              </dict>\n            </array>\n          </dict>\n          <dict>\n            <key>name</key>\n            <string>meta.group.regexp</string>\n            <key>begin</key>\n            <string>\\((?:(\\?:)|(?:\\?&lt;([a-zA-Z_$][\\w$]*)&gt;))?</string>\n            <key>beginCaptures</key>\n            <dict>\n              <key>0</key>\n              <dict>\n                <key>name</key>\n                <string>punctuation.definition.group.regexp</string>\n              </dict>\n              <key>1</key>\n              <dict>\n                <key>name</key>\n                <string>punctuation.definition.group.no-capture.regexp</string>\n              </dict>\n              <key>2</key>\n              <dict>\n                <key>name</key>\n                <string>variable.other.regexp</string>\n              </dict>\n            </dict>\n            <key>end</key>\n            <string>\\)</string>\n            <key>endCaptures</key>\n            <dict>\n              <key>0</key>\n              <dict>\n                <key>name</key>\n                <string>punctuation.definition.group.regexp</string>\n              </dict>\n            </dict>\n            <key>patterns</key>\n            <array>\n              <dict>\n                <key>include</key>\n                <string>#regexp</string>\n              </dict>\n            </array>\n          </dict>\n          <dict>\n            <key>name</key>\n            <string>constant.other.character-class.set.regexp</string>\n            <key>begin</key>\n            <string>(\\[)(\\^)?</string>\n            <key>beginCaptures</key>\n            <dict>\n              <key>1</key>\n              <dict>\n                <key>name</key>\n                <string>punctuation.definition.character-class.regexp</string>\n              </dict>\n              <key>2</key>\n              <dict>\n                <key>name</key>\n                <string>keyword.operator.negation.regexp</string>\n              </dict>\n            </dict>\n            <key>end</key>\n            <string>(\\])</string>\n            <key>endCaptures</key>\n            <dict>\n              <key>1</key>\n              <dict>\n                <key>name</key>\n                <string>punctuation.definition.character-class.regexp</string>\n              </dict>\n            </dict>\n            <key>patterns</key>\n            <array>\n              <dict>\n                <key>name</key>\n                <string>constant.other.character-class.range.regexp</string>\n                <key>match</key>\n                <string>(?:.|(\\\\(?:[0-7]{3}|x[0-9A-Fa-f]{2}|u[0-9A-Fa-f]{4}))|(\\\\c[A-Z])|(\\\\.))\\-(?:[^\\]\\\\]|(\\\\(?:[0-7]{3}|x[0-9A-Fa-f]{2}|u[0-9A-Fa-f]{4}))|(\\\\c[A-Z])|(\\\\.))</string>\n                <key>captures</key>\n                <dict>\n                  <key>1</key>\n                  <dict>\n                    <key>name</key>\n                    <string>constant.character.numeric.regexp</string>\n                  </dict>\n                  <key>2</key>\n                  <dict>\n                    <key>name</key>\n                    <string>constant.character.control.regexp</string>\n                  </dict>\n                  <key>3</key>\n                  <dict>\n                    <key>name</key>\n                    <string>constant.character.escape.backslash.regexp</string>\n                  </dict>\n                  <key>4</key>\n                  <dict>\n                    <key>name</key>\n                    <string>constant.character.numeric.regexp</string>\n                  </dict>\n                  <key>5</key>\n                  <dict>\n                    <key>name</key>\n                    <string>constant.character.control.regexp</string>\n                  </dict>\n                  <key>6</key>\n                  <dict>\n                    <key>name</key>\n                    <string>constant.character.escape.backslash.regexp</string>\n                  </dict>\n                </dict>\n              </dict>\n              <dict>\n                <key>include</key>\n                <string>#regex-character-class</string>\n              </dict>\n            </array>\n          </dict>\n          <dict>\n            <key>include</key>\n            <string>#regex-character-class</string>\n          </dict>\n        </array>\n      </dict>\n      <key>regex-character-class</key>\n      <dict>\n        <key>patterns</key>\n        <array>\n          <dict>\n            <key>name</key>\n            <string>constant.other.character-class.regexp</string>\n            <key>match</key>\n            <string>\\\\[wWsSdDtrnvf]|\\.</string>\n          </dict>\n          <dict>\n            <key>name</key>\n            <string>constant.character.numeric.regexp</string>\n            <key>match</key>\n            <string>\\\\([0-7]{3}|x[0-9A-Fa-f]{2}|u[0-9A-Fa-f]{4})</string>\n          </dict>\n          <dict>\n            <key>name</key>\n            <string>constant.character.control.regexp</string>\n            <key>match</key>\n            <string>\\\\c[A-Z]</string>\n          </dict>\n          <dict>\n            <key>name</key>\n            <string>constant.character.escape.backslash.regexp</string>\n            <key>match</key>\n            <string>\\\\.</string>\n          </dict>\n        </array>\n      </dict>\n      <key>comment</key>\n      <dict>\n        <key>patterns</key>\n        <array>\n          <dict>\n            <key>name</key>\n            <string>comment.block.documentation.tsx</string>\n            <key>begin</key>\n            <string>/\\*\\*(?!/)</string>\n            <key>beginCaptures</key>\n            <dict>\n              <key>0</key>\n              <dict>\n                <key>name</key>\n                <string>punctuation.definition.comment.tsx</string>\n              </dict>\n            </dict>\n            <key>end</key>\n            <string>\\*/</string>\n            <key>endCaptures</key>\n            <dict>\n              <key>0</key>\n              <dict>\n                <key>name</key>\n                <string>punctuation.definition.comment.tsx</string>\n              </dict>\n            </dict>\n            <key>patterns</key>\n            <array>\n              <dict>\n                <key>include</key>\n                <string>#docblock</string>\n              </dict>\n            </array>\n          </dict>\n          <dict>\n            <key>name</key>\n            <string>comment.block.tsx</string>\n            <key>begin</key>\n            <string>(/\\*)(?:\\s*((@)internal)(?=\\s|(\\*/)))?</string>\n            <key>beginCaptures</key>\n            <dict>\n              <key>1</key>\n              <dict>\n                <key>name</key>\n                <string>punctuation.definition.comment.tsx</string>\n              </dict>\n              <key>2</key>\n              <dict>\n                <key>name</key>\n                <string>storage.type.internaldeclaration.tsx</string>\n              </dict>\n              <key>3</key>\n              <dict>\n                <key>name</key>\n                <string>punctuation.decorator.internaldeclaration.tsx</string>\n              </dict>\n            </dict>\n            <key>end</key>\n            <string>\\*/</string>\n            <key>endCaptures</key>\n            <dict>\n              <key>0</key>\n              <dict>\n                <key>name</key>\n                <string>punctuation.definition.comment.tsx</string>\n              </dict>\n            </dict>\n          </dict>\n          <dict>\n            <key>begin</key>\n            <string>(^[ \\t]+)?((//)(?:\\s*((@)internal)(?=\\s|$))?)</string>\n            <key>beginCaptures</key>\n            <dict>\n              <key>1</key>\n              <dict>\n                <key>name</key>\n                <string>punctuation.whitespace.comment.leading.tsx</string>\n              </dict>\n              <key>2</key>\n              <dict>\n                <key>name</key>\n                <string>comment.line.double-slash.tsx</string>\n              </dict>\n              <key>3</key>\n              <dict>\n                <key>name</key>\n                <string>punctuation.definition.comment.tsx</string>\n              </dict>\n              <key>4</key>\n              <dict>\n                <key>name</key>\n                <string>storage.type.internaldeclaration.tsx</string>\n              </dict>\n              <key>5</key>\n              <dict>\n                <key>name</key>\n                <string>punctuation.decorator.internaldeclaration.tsx</string>\n              </dict>\n            </dict>\n            <key>end</key>\n            <string>(?=^)</string>\n            <key>contentName</key>\n            <string>comment.line.double-slash.tsx</string>\n          </dict>\n        </array>\n      </dict>\n      <key>directives</key>\n      <dict>\n        <key>name</key>\n        <string>comment.line.triple-slash.directive.tsx</string>\n        <key>begin</key>\n        <string>^(///)\\s*(?=&lt;(reference|amd-dependency|amd-module)(\\s+(path|types|no-default-lib|lib|name)\\s*=\\s*((\\\'([^\\\'\\\\]|\\\\\\\'|\\\\)*\\\')|(\\"([^\\"\\\\]|\\\\\\"|\\\\)*\\")))+\\s*/&gt;\\s*$)</string>\n        <key>beginCaptures</key>\n        <dict>\n          <key>1</key>\n          <dict>\n            <key>name</key>\n            <string>punctuation.definition.comment.tsx</string>\n          </dict>\n        </dict>\n        <key>end</key>\n        <string>(?=^)</string>\n        <key>patterns</key>\n        <array>\n          <dict>\n            <key>name</key>\n            <string>meta.tag.tsx</string>\n            <key>begin</key>\n            <string>(&lt;)(reference|amd-dependency|amd-module)</string>\n            <key>beginCaptures</key>\n            <dict>\n              <key>1</key>\n              <dict>\n                <key>name</key>\n                <string>punctuation.definition.tag.directive.tsx</string>\n              </dict>\n              <key>2</key>\n              <dict>\n                <key>name</key>\n                <string>entity.name.tag.directive.tsx</string>\n              </dict>\n            </dict>\n            <key>end</key>\n            <string>/&gt;</string>\n            <key>endCaptures</key>\n            <dict>\n              <key>0</key>\n              <dict>\n                <key>name</key>\n                <string>punctuation.definition.tag.directive.tsx</string>\n              </dict>\n            </dict>\n            <key>patterns</key>\n            <array>\n              <dict>\n                <key>name</key>\n                <string>entity.other.attribute-name.directive.tsx</string>\n                <key>match</key>\n                <string>path|types|no-default-lib|lib|name</string>\n              </dict>\n              <dict>\n                <key>name</key>\n                <string>keyword.operator.assignment.tsx</string>\n                <key>match</key>\n                <string>=</string>\n              </dict>\n              <dict>\n                <key>include</key>\n                <string>#string</string>\n              </dict>\n            </array>\n          </dict>\n        </array>\n      </dict>\n      <key>docblock</key>\n      <dict>\n        <key>patterns</key>\n        <array>\n          <dict>\n            <key>match</key>\n            <string>(?x)\n((@)(?:access|api))\n\\s+\n(private|protected|public)\n\\b</string>\n            <key>captures</key>\n            <dict>\n              <key>1</key>\n              <dict>\n                <key>name</key>\n                <string>storage.type.class.jsdoc</string>\n              </dict>\n              <key>2</key>\n              <dict>\n                <key>name</key>\n                <string>punctuation.definition.block.tag.jsdoc</string>\n              </dict>\n              <key>3</key>\n              <dict>\n                <key>name</key>\n                <string>constant.language.access-type.jsdoc</string>\n              </dict>\n            </dict>\n          </dict>\n          <dict>\n            <key>match</key>\n            <string>(?x)\n((@)author)\n\\s+\n(\n  [^@\\s&lt;&gt;*/]\n  (?:[^@&lt;&gt;*/]|\\*[^/])*\n)\n(?:\n  \\s*\n  (&lt;)\n  ([^&gt;\\s]+)\n  (&gt;)\n)?</string>\n            <key>captures</key>\n            <dict>\n              <key>1</key>\n              <dict>\n                <key>name</key>\n                <string>storage.type.class.jsdoc</string>\n              </dict>\n              <key>2</key>\n              <dict>\n                <key>name</key>\n                <string>punctuation.definition.block.tag.jsdoc</string>\n              </dict>\n              <key>3</key>\n              <dict>\n                <key>name</key>\n                <string>entity.name.type.instance.jsdoc</string>\n              </dict>\n              <key>4</key>\n              <dict>\n                <key>name</key>\n                <string>punctuation.definition.bracket.angle.begin.jsdoc</string>\n              </dict>\n              <key>5</key>\n              <dict>\n                <key>name</key>\n                <string>constant.other.email.link.underline.jsdoc</string>\n              </dict>\n              <key>6</key>\n              <dict>\n                <key>name</key>\n                <string>punctuation.definition.bracket.angle.end.jsdoc</string>\n              </dict>\n            </dict>\n          </dict>\n          <dict>\n            <key>match</key>\n            <string>(?x)\n((@)borrows) \\s+\n((?:[^@\\s*/]|\\*[^/])+)    # &lt;that namepath&gt;\n\\s+ (as) \\s+              # as\n((?:[^@\\s*/]|\\*[^/])+)    # &lt;this namepath&gt;</string>\n            <key>captures</key>\n            <dict>\n              <key>1</key>\n              <dict>\n                <key>name</key>\n                <string>storage.type.class.jsdoc</string>\n              </dict>\n              <key>2</key>\n              <dict>\n                <key>name</key>\n                <string>punctuation.definition.block.tag.jsdoc</string>\n              </dict>\n              <key>3</key>\n              <dict>\n                <key>name</key>\n                <string>entity.name.type.instance.jsdoc</string>\n              </dict>\n              <key>4</key>\n              <dict>\n                <key>name</key>\n                <string>keyword.operator.control.jsdoc</string>\n              </dict>\n              <key>5</key>\n              <dict>\n                <key>name</key>\n                <string>entity.name.type.instance.jsdoc</string>\n              </dict>\n            </dict>\n          </dict>\n          <dict>\n            <key>name</key>\n            <string>meta.example.jsdoc</string>\n            <key>begin</key>\n            <string>((@)example)\\s+</string>\n            <key>end</key>\n            <string>(?=@|\\*/)</string>\n            <key>beginCaptures</key>\n            <dict>\n              <key>1</key>\n              <dict>\n                <key>name</key>\n                <string>storage.type.class.jsdoc</string>\n              </dict>\n              <key>2</key>\n              <dict>\n                <key>name</key>\n                <string>punctuation.definition.block.tag.jsdoc</string>\n              </dict>\n            </dict>\n            <key>patterns</key>\n            <array>\n              <dict>\n                <key>match</key>\n                <string>^\\s\\*\\s+</string>\n              </dict>\n              <dict>\n                <key>contentName</key>\n                <string>constant.other.description.jsdoc</string>\n                <key>begin</key>\n                <string>\\G(&lt;)caption(&gt;)</string>\n                <key>beginCaptures</key>\n                <dict>\n                  <key>0</key>\n                  <dict>\n                    <key>name</key>\n                    <string>entity.name.tag.inline.jsdoc</string>\n                  </dict>\n                  <key>1</key>\n                  <dict>\n                    <key>name</key>\n                    <string>punctuation.definition.bracket.angle.begin.jsdoc</string>\n                  </dict>\n                  <key>2</key>\n                  <dict>\n                    <key>name</key>\n                    <string>punctuation.definition.bracket.angle.end.jsdoc</string>\n                  </dict>\n                </dict>\n                <key>end</key>\n                <string>(&lt;/)caption(&gt;)|(?=\\*/)</string>\n                <key>endCaptures</key>\n                <dict>\n                  <key>0</key>\n                  <dict>\n                    <key>name</key>\n                    <string>entity.name.tag.inline.jsdoc</string>\n                  </dict>\n                  <key>1</key>\n                  <dict>\n                    <key>name</key>\n                    <string>punctuation.definition.bracket.angle.begin.jsdoc</string>\n                  </dict>\n                  <key>2</key>\n                  <dict>\n                    <key>name</key>\n                    <string>punctuation.definition.bracket.angle.end.jsdoc</string>\n                  </dict>\n                </dict>\n              </dict>\n              <dict>\n                <key>match</key>\n                <string>[^\\s@*](?:[^*]|\\*[^/])*</string>\n                <key>captures</key>\n                <dict>\n                  <key>0</key>\n                  <dict>\n                    <key>name</key>\n                    <string>source.embedded.tsx</string>\n                  </dict>\n                </dict>\n              </dict>\n            </array>\n          </dict>\n          <dict>\n            <key>match</key>\n            <string>(?x) ((@)kind) \\s+ (class|constant|event|external|file|function|member|mixin|module|namespace|typedef) \\b</string>\n            <key>captures</key>\n            <dict>\n              <key>1</key>\n              <dict>\n                <key>name</key>\n                <string>storage.type.class.jsdoc</string>\n              </dict>\n              <key>2</key>\n              <dict>\n                <key>name</key>\n                <string>punctuation.definition.block.tag.jsdoc</string>\n              </dict>\n              <key>3</key>\n              <dict>\n                <key>name</key>\n                <string>constant.language.symbol-type.jsdoc</string>\n              </dict>\n            </dict>\n          </dict>\n          <dict>\n            <key>match</key>\n            <string>(?x)\n((@)see)\n\\s+\n(?:\n  # URL\n  (\n    (?=https?://)\n    (?:[^\\s*]|\\*[^/])+\n  )\n  |\n  # JSDoc namepath\n  (\n    (?!\n      # Avoid matching bare URIs (also acceptable as links)\n      https?://\n      |\n      # Avoid matching {@inline tags}; we match those below\n      (?:\\[[^\\[\\]]*\\])? # Possible description [preceding]{@tag}\n      {@(?:link|linkcode|linkplain|tutorial)\\b\n    )\n    # Matched namepath\n    (?:[^@\\s*/]|\\*[^/])+\n  )\n)</string>\n            <key>captures</key>\n            <dict>\n              <key>1</key>\n              <dict>\n                <key>name</key>\n                <string>storage.type.class.jsdoc</string>\n              </dict>\n              <key>2</key>\n              <dict>\n                <key>name</key>\n                <string>punctuation.definition.block.tag.jsdoc</string>\n              </dict>\n              <key>3</key>\n              <dict>\n                <key>name</key>\n                <string>variable.other.link.underline.jsdoc</string>\n              </dict>\n              <key>4</key>\n              <dict>\n                <key>name</key>\n                <string>entity.name.type.instance.jsdoc</string>\n              </dict>\n            </dict>\n          </dict>\n          <dict>\n            <key>match</key>\n            <string>(?x)\n((@)template)\n\\s+\n# One or more valid identifiers\n(\n  [A-Za-z_$]         # First character: non-numeric word character\n  [\\w$.\\[\\]]*        # Rest of identifier\n  (?:                # Possible list of additional identifiers\n    \\s* , \\s*\n    [A-Za-z_$]\n    [\\w$.\\[\\]]*\n  )*\n)</string>\n            <key>captures</key>\n            <dict>\n              <key>1</key>\n              <dict>\n                <key>name</key>\n                <string>storage.type.class.jsdoc</string>\n              </dict>\n              <key>2</key>\n              <dict>\n                <key>name</key>\n                <string>punctuation.definition.block.tag.jsdoc</string>\n              </dict>\n              <key>3</key>\n              <dict>\n                <key>name</key>\n                <string>variable.other.jsdoc</string>\n              </dict>\n            </dict>\n          </dict>\n          <dict>\n            <key>match</key>\n            <string>(?x)\n(\n  (@)\n  (?:arg|argument|const|constant|member|namespace|param|var)\n)\n\\s+\n(\n  [A-Za-z_$]\n  [\\w$.\\[\\]]*\n)</string>\n            <key>captures</key>\n            <dict>\n              <key>1</key>\n              <dict>\n                <key>name</key>\n                <string>storage.type.class.jsdoc</string>\n              </dict>\n              <key>2</key>\n              <dict>\n                <key>name</key>\n                <string>punctuation.definition.block.tag.jsdoc</string>\n              </dict>\n              <key>3</key>\n              <dict>\n                <key>name</key>\n                <string>variable.other.jsdoc</string>\n              </dict>\n            </dict>\n          </dict>\n          <dict>\n            <key>begin</key>\n            <string>((@)typedef)\\s+(?={)</string>\n            <key>beginCaptures</key>\n            <dict>\n              <key>1</key>\n              <dict>\n                <key>name</key>\n                <string>storage.type.class.jsdoc</string>\n              </dict>\n              <key>2</key>\n              <dict>\n                <key>name</key>\n                <string>punctuation.definition.block.tag.jsdoc</string>\n              </dict>\n            </dict>\n            <key>end</key>\n            <string>(?=\\s|\\*/|[^{}\\[\\]A-Za-z_$])</string>\n            <key>patterns</key>\n            <array>\n              <dict>\n                <key>include</key>\n                <string>#jsdoctype</string>\n              </dict>\n              <dict>\n                <key>name</key>\n                <string>entity.name.type.instance.jsdoc</string>\n                <key>match</key>\n                <string>(?:[^@\\s*/]|\\*[^/])+</string>\n              </dict>\n            </array>\n          </dict>\n          <dict>\n            <key>begin</key>\n            <string>((@)(?:arg|argument|const|constant|member|namespace|param|prop|property|var))\\s+(?={)</string>\n            <key>beginCaptures</key>\n            <dict>\n              <key>1</key>\n              <dict>\n                <key>name</key>\n                <string>storage.type.class.jsdoc</string>\n              </dict>\n              <key>2</key>\n              <dict>\n                <key>name</key>\n                <string>punctuation.definition.block.tag.jsdoc</string>\n              </dict>\n            </dict>\n            <key>end</key>\n            <string>(?=\\s|\\*/|[^{}\\[\\]A-Za-z_$])</string>\n            <key>patterns</key>\n            <array>\n              <dict>\n                <key>include</key>\n                <string>#jsdoctype</string>\n              </dict>\n              <dict>\n                <key>name</key>\n                <string>variable.other.jsdoc</string>\n                <key>match</key>\n                <string>([A-Za-z_$][\\w$.\\[\\]]*)</string>\n              </dict>\n              <dict>\n                <key>name</key>\n                <string>variable.other.jsdoc</string>\n                <key>match</key>\n                <string>(?x)\n(\\[)\\s*\n[\\w$]+\n(?:\n  (?:\\[\\])?                                        # Foo[ ].bar properties within an array\n  \\.                                                # Foo.Bar namespaced parameter\n  [\\w$]+\n)*\n(?:\n  \\s*\n  (=)                                                # [foo=bar] Default parameter value\n  \\s*\n  (\n    # The inner regexes are to stop the match early at */ and to not stop at escaped quotes\n    (?&gt;\n      "(?:(?:\\*(?!/))|(?:\\\\(?!"))|[^*\\\\])*?" |                      # [foo="bar"] Double-quoted\n      \'(?:(?:\\*(?!/))|(?:\\\\(?!\'))|[^*\\\\])*?\' |                      # [foo=\'bar\'] Single-quoted\n      \\[ (?:(?:\\*(?!/))|[^*])*? \\] |                                # [foo=[1,2]] Array literal\n      (?:(?:\\*(?!/))|\\s(?!\\s*\\])|\\[.*?(?:\\]|(?=\\*/))|[^*\\s\\[\\]])*   # Everything else\n    )*\n  )\n)?\n\\s*(?:(\\])((?:[^*\\s]|\\*[^\\s/])+)?|(?=\\*/))</string>\n                <key>captures</key>\n                <dict>\n                  <key>1</key>\n                  <dict>\n                    <key>name</key>\n                    <string>punctuation.definition.optional-value.begin.bracket.square.jsdoc</string>\n                  </dict>\n                  <key>2</key>\n                  <dict>\n                    <key>name</key>\n                    <string>keyword.operator.assignment.jsdoc</string>\n                  </dict>\n                  <key>3</key>\n                  <dict>\n                    <key>name</key>\n                    <string>source.embedded.tsx</string>\n                  </dict>\n                  <key>4</key>\n                  <dict>\n                    <key>name</key>\n                    <string>punctuation.definition.optional-value.end.bracket.square.jsdoc</string>\n                  </dict>\n                  <key>5</key>\n                  <dict>\n                    <key>name</key>\n                    <string>invalid.illegal.syntax.jsdoc</string>\n                  </dict>\n                </dict>\n              </dict>\n            </array>\n          </dict>\n          <dict>\n            <key>begin</key>\n            <string>(?x)\n(\n  (@)\n  (?:define|enum|exception|export|extends|lends|implements|modifies\n  |namespace|private|protected|returns?|suppress|this|throws|type\n  |yields?)\n)\n\\s+(?={)</string>\n            <key>beginCaptures</key>\n            <dict>\n              <key>1</key>\n              <dict>\n                <key>name</key>\n                <string>storage.type.class.jsdoc</string>\n              </dict>\n              <key>2</key>\n              <dict>\n                <key>name</key>\n                <string>punctuation.definition.block.tag.jsdoc</string>\n              </dict>\n            </dict>\n            <key>end</key>\n            <string>(?=\\s|\\*/|[^{}\\[\\]A-Za-z_$])</string>\n            <key>patterns</key>\n            <array>\n              <dict>\n                <key>include</key>\n                <string>#jsdoctype</string>\n              </dict>\n            </array>\n          </dict>\n          <dict>\n            <key>match</key>\n            <string>(?x)\n(\n  (@)\n  (?:alias|augments|callback|constructs|emits|event|fires|exports?\n  |extends|external|function|func|host|lends|listens|interface|memberof!?\n  |method|module|mixes|mixin|name|requires|see|this|typedef|uses)\n)\n\\s+\n(\n  (?:\n    [^{}@\\s*] | \\*[^/]\n  )+\n)</string>\n            <key>captures</key>\n            <dict>\n              <key>1</key>\n              <dict>\n                <key>name</key>\n                <string>storage.type.class.jsdoc</string>\n              </dict>\n              <key>2</key>\n              <dict>\n                <key>name</key>\n                <string>punctuation.definition.block.tag.jsdoc</string>\n              </dict>\n              <key>3</key>\n              <dict>\n                <key>name</key>\n                <string>entity.name.type.instance.jsdoc</string>\n              </dict>\n            </dict>\n          </dict>\n          <dict>\n            <key>contentName</key>\n            <string>variable.other.jsdoc</string>\n            <key>begin</key>\n            <string>((@)(?:default(?:value)?|license|version))\\s+(([\'\'"]))</string>\n            <key>beginCaptures</key>\n            <dict>\n              <key>1</key>\n              <dict>\n                <key>name</key>\n                <string>storage.type.class.jsdoc</string>\n              </dict>\n              <key>2</key>\n              <dict>\n                <key>name</key>\n                <string>punctuation.definition.block.tag.jsdoc</string>\n              </dict>\n              <key>3</key>\n              <dict>\n                <key>name</key>\n                <string>variable.other.jsdoc</string>\n              </dict>\n              <key>4</key>\n              <dict>\n                <key>name</key>\n                <string>punctuation.definition.string.begin.jsdoc</string>\n              </dict>\n            </dict>\n            <key>end</key>\n            <string>(\\3)|(?=$|\\*/)</string>\n            <key>endCaptures</key>\n            <dict>\n              <key>0</key>\n              <dict>\n                <key>name</key>\n                <string>variable.other.jsdoc</string>\n              </dict>\n              <key>1</key>\n              <dict>\n                <key>name</key>\n                <string>punctuation.definition.string.end.jsdoc</string>\n              </dict>\n            </dict>\n          </dict>\n          <dict>\n            <key>match</key>\n            <string>((@)(?:default(?:value)?|license|tutorial|variation|version))\\s+([^\\s*]+)</string>\n            <key>captures</key>\n            <dict>\n              <key>1</key>\n              <dict>\n                <key>name</key>\n                <string>storage.type.class.jsdoc</string>\n              </dict>\n              <key>2</key>\n              <dict>\n                <key>name</key>\n                <string>punctuation.definition.block.tag.jsdoc</string>\n              </dict>\n              <key>3</key>\n              <dict>\n                <key>name</key>\n                <string>variable.other.jsdoc</string>\n              </dict>\n            </dict>\n          </dict>\n          <dict>\n            <key>name</key>\n            <string>storage.type.class.jsdoc</string>\n            <key>match</key>\n            <string>(?x) (@) (?:abstract|access|alias|api|arg|argument|async|attribute|augments|author|beta|borrows|bubbles |callback|chainable|class|classdesc|code|config|const|constant|constructor|constructs|copyright |default|defaultvalue|define|deprecated|desc|description|dict|emits|enum|event|example|exception |exports?|extends|extension(?:_?for)?|external|externs|file|fileoverview|final|fires|for|func |function|generator|global|hideconstructor|host|ignore|implements|implicitCast|inherit[Dd]oc |inner|instance|interface|internal|kind|lends|license|listens|main|member|memberof!?|method |mixes|mixins?|modifies|module|name|namespace|noalias|nocollapse|nocompile|nosideeffects |override|overview|package|param|polymer(?:Behavior)?|preserve|private|prop|property|protected |public|read[Oo]nly|record|require[ds]|returns?|see|since|static|struct|submodule|summary |suppress|template|this|throws|todo|tutorial|type|typedef|unrestricted|uses|var|variation |version|virtual|writeOnce|yields?) \\b</string>\n            <key>captures</key>\n            <dict>\n              <key>1</key>\n              <dict>\n                <key>name</key>\n                <string>punctuation.definition.block.tag.jsdoc</string>\n              </dict>\n            </dict>\n          </dict>\n          <dict>\n            <key>include</key>\n            <string>#inline-tags</string>\n          </dict>\n        </array>\n      </dict>\n      <key>brackets</key>\n      <dict>\n        <key>patterns</key>\n        <array>\n          <dict>\n            <key>begin</key>\n            <string>{</string>\n            <key>end</key>\n            <string>}|(?=\\*/)</string>\n            <key>patterns</key>\n            <array>\n              <dict>\n                <key>include</key>\n                <string>#brackets</string>\n              </dict>\n            </array>\n          </dict>\n          <dict>\n            <key>begin</key>\n            <string>\\[</string>\n            <key>end</key>\n            <string>\\]|(?=\\*/)</string>\n            <key>patterns</key>\n            <array>\n              <dict>\n                <key>include</key>\n                <string>#brackets</string>\n              </dict>\n            </array>\n          </dict>\n        </array>\n      </dict>\n      <key>inline-tags</key>\n      <dict>\n        <key>patterns</key>\n        <array>\n          <dict>\n            <key>name</key>\n            <string>constant.other.description.jsdoc</string>\n            <key>match</key>\n            <string>(\\[)[^\\]]+(\\])(?={@(?:link|linkcode|linkplain|tutorial))</string>\n            <key>captures</key>\n            <dict>\n              <key>1</key>\n              <dict>\n                <key>name</key>\n                <string>punctuation.definition.bracket.square.begin.jsdoc</string>\n              </dict>\n              <key>2</key>\n              <dict>\n                <key>name</key>\n                <string>punctuation.definition.bracket.square.end.jsdoc</string>\n              </dict>\n            </dict>\n          </dict>\n          <dict>\n            <key>name</key>\n            <string>entity.name.type.instance.jsdoc</string>\n            <key>begin</key>\n            <string>({)((@)(?:link(?:code|plain)?|tutorial))\\s*</string>\n            <key>beginCaptures</key>\n            <dict>\n              <key>1</key>\n              <dict>\n                <key>name</key>\n                <string>punctuation.definition.bracket.curly.begin.jsdoc</string>\n              </dict>\n              <key>2</key>\n              <dict>\n                <key>name</key>\n                <string>storage.type.class.jsdoc</string>\n              </dict>\n              <key>3</key>\n              <dict>\n                <key>name</key>\n                <string>punctuation.definition.inline.tag.jsdoc</string>\n              </dict>\n            </dict>\n            <key>end</key>\n            <string>}|(?=\\*/)</string>\n            <key>endCaptures</key>\n            <dict>\n              <key>0</key>\n              <dict>\n                <key>name</key>\n                <string>punctuation.definition.bracket.curly.end.jsdoc</string>\n              </dict>\n            </dict>\n            <key>patterns</key>\n            <array>\n              <dict>\n                <key>match</key>\n                <string>\\G((?=https?://)(?:[^|}\\s*]|\\*[/])+)(\\|)?</string>\n                <key>captures</key>\n                <dict>\n                  <key>1</key>\n                  <dict>\n                    <key>name</key>\n                    <string>variable.other.link.underline.jsdoc</string>\n                  </dict>\n                  <key>2</key>\n                  <dict>\n                    <key>name</key>\n                    <string>punctuation.separator.pipe.jsdoc</string>\n                  </dict>\n                </dict>\n              </dict>\n              <dict>\n                <key>match</key>\n                <string>\\G((?:[^{}@\\s|*]|\\*[^/])+)(\\|)?</string>\n                <key>captures</key>\n                <dict>\n                  <key>1</key>\n                  <dict>\n                    <key>name</key>\n                    <string>variable.other.description.jsdoc</string>\n                  </dict>\n                  <key>2</key>\n                  <dict>\n                    <key>name</key>\n                    <string>punctuation.separator.pipe.jsdoc</string>\n                  </dict>\n                </dict>\n              </dict>\n            </array>\n          </dict>\n        </array>\n      </dict>\n      <key>jsdoctype</key>\n      <dict>\n        <key>patterns</key>\n        <array>\n          <dict>\n            <key>name</key>\n            <string>invalid.illegal.type.jsdoc</string>\n            <key>match</key>\n            <string>\\G{(?:[^}*]|\\*[^/}])+$</string>\n          </dict>\n          <dict>\n            <key>contentName</key>\n            <string>entity.name.type.instance.jsdoc</string>\n            <key>begin</key>\n            <string>\\G({)</string>\n            <key>beginCaptures</key>\n            <dict>\n              <key>0</key>\n              <dict>\n                <key>name</key>\n                <string>entity.name.type.instance.jsdoc</string>\n              </dict>\n              <key>1</key>\n              <dict>\n                <key>name</key>\n                <string>punctuation.definition.bracket.curly.begin.jsdoc</string>\n              </dict>\n            </dict>\n            <key>end</key>\n            <string>((}))\\s*|(?=\\*/)</string>\n            <key>endCaptures</key>\n            <dict>\n              <key>1</key>\n              <dict>\n                <key>name</key>\n                <string>entity.name.type.instance.jsdoc</string>\n              </dict>\n              <key>2</key>\n              <dict>\n                <key>name</key>\n                <string>punctuation.definition.bracket.curly.end.jsdoc</string>\n              </dict>\n            </dict>\n            <key>patterns</key>\n            <array>\n              <dict>\n                <key>include</key>\n                <string>#brackets</string>\n              </dict>\n            </array>\n          </dict>\n        </array>\n      </dict>\n      <key>jsx</key>\n      <dict>\n        <key>patterns</key>\n        <array>\n          <dict>\n            <key>include</key>\n            <string>#jsx-tag-without-attributes-in-expression</string>\n          </dict>\n          <dict>\n            <key>include</key>\n            <string>#jsx-tag-in-expression</string>\n          </dict>\n        </array>\n      </dict>\n      <key>jsx-tag-without-attributes-in-expression</key>\n      <dict>\n        <key>begin</key>\n        <string>(?&lt;!\\+\\+|--)(?&lt;=[({\\[,?=&gt;:*]|&amp;&amp;|\\|\\||\\?|^return|[^\\._$[:alnum:]]return|^default|[^\\._$[:alnum:]]default|^)\\s*(?=(&lt;)\\s*(?:([_$a-zA-Z][-$\\w.]*)(?&lt;!\\.|-)(:))?((?:[a-z][a-z0-9]*|([_$a-zA-Z][-$\\w.]*))(?&lt;!\\.|-))?\\s*(&gt;))</string>\n        <key>end</key>\n        <string>(?!(&lt;)\\s*(?:([_$a-zA-Z][-$\\w.]*)(?&lt;!\\.|-)(:))?((?:[a-z][a-z0-9]*|([_$a-zA-Z][-$\\w.]*))(?&lt;!\\.|-))?\\s*(&gt;))</string>\n        <key>patterns</key>\n        <array>\n          <dict>\n            <key>include</key>\n            <string>#jsx-tag-without-attributes</string>\n          </dict>\n        </array>\n      </dict>\n      <key>jsx-tag-without-attributes</key>\n      <dict>\n        <key>name</key>\n        <string>meta.tag.without-attributes.tsx</string>\n        <key>begin</key>\n        <string>(&lt;)\\s*(?:([_$a-zA-Z][-$\\w.]*)(?&lt;!\\.|-)(:))?((?:[a-z][a-z0-9]*|([_$a-zA-Z][-$\\w.]*))(?&lt;!\\.|-))?\\s*(&gt;)</string>\n        <key>end</key>\n        <string>(&lt;/)\\s*(?:([_$a-zA-Z][-$\\w.]*)(?&lt;!\\.|-)(:))?((?:[a-z][a-z0-9]*|([_$a-zA-Z][-$\\w.]*))(?&lt;!\\.|-))?\\s*(&gt;)</string>\n        <key>beginCaptures</key>\n        <dict>\n          <key>1</key>\n          <dict>\n            <key>name</key>\n            <string>punctuation.definition.tag.begin.tsx</string>\n          </dict>\n          <key>2</key>\n          <dict>\n            <key>name</key>\n            <string>entity.name.tag.namespace.tsx</string>\n          </dict>\n          <key>3</key>\n          <dict>\n            <key>name</key>\n            <string>punctuation.separator.namespace.tsx</string>\n          </dict>\n          <key>4</key>\n          <dict>\n            <key>name</key>\n            <string>entity.name.tag.tsx</string>\n          </dict>\n          <key>5</key>\n          <dict>\n            <key>name</key>\n            <string>support.class.component.tsx</string>\n          </dict>\n          <key>6</key>\n          <dict>\n            <key>name</key>\n            <string>punctuation.definition.tag.end.tsx</string>\n          </dict>\n        </dict>\n        <key>endCaptures</key>\n        <dict>\n          <key>1</key>\n          <dict>\n            <key>name</key>\n            <string>punctuation.definition.tag.begin.tsx</string>\n          </dict>\n          <key>2</key>\n          <dict>\n            <key>name</key>\n            <string>entity.name.tag.namespace.tsx</string>\n          </dict>\n          <key>3</key>\n          <dict>\n            <key>name</key>\n            <string>punctuation.separator.namespace.tsx</string>\n          </dict>\n          <key>4</key>\n          <dict>\n            <key>name</key>\n            <string>entity.name.tag.tsx</string>\n          </dict>\n          <key>5</key>\n          <dict>\n            <key>name</key>\n            <string>support.class.component.tsx</string>\n          </dict>\n          <key>6</key>\n          <dict>\n            <key>name</key>\n            <string>punctuation.definition.tag.end.tsx</string>\n          </dict>\n        </dict>\n        <key>contentName</key>\n        <string>meta.jsx.children.tsx</string>\n        <key>patterns</key>\n        <array>\n          <dict>\n            <key>include</key>\n            <string>#jsx-children</string>\n          </dict>\n        </array>\n      </dict>\n      <key>jsx-tag-in-expression</key>\n      <dict>\n        <key>begin</key>\n        <string>(?x)\n  (?&lt;!\\+\\+|--)(?&lt;=[({\\[,?=&gt;:*]|&amp;&amp;|\\|\\||\\?|^return|[^\\._$[:alnum:]]return|^default|[^\\._$[:alnum:]]default|^)\\s*\n  (?!&lt;\\s*[_$[:alpha:]][_$[:alnum:]]*((\\s+extends\\s+[^=&gt;])|,)) # look ahead is not type parameter of arrow\n  (?=(&lt;)\\s*(?:([_$a-zA-Z][-$\\w.]*)(?&lt;!\\.|-)(:))?((?:[a-z][a-z0-9]*|([_$a-zA-Z][-$\\w.]*))(?&lt;!\\.|-))(?=((&lt;\\s*)|(\\s+))(?!\\?)|\\/?&gt;))</string>\n        <key>end</key>\n        <string>(?!(&lt;)\\s*(?:([_$a-zA-Z][-$\\w.]*)(?&lt;!\\.|-)(:))?((?:[a-z][a-z0-9]*|([_$a-zA-Z][-$\\w.]*))(?&lt;!\\.|-))(?=((&lt;\\s*)|(\\s+))(?!\\?)|\\/?&gt;))</string>\n        <key>patterns</key>\n        <array>\n          <dict>\n            <key>include</key>\n            <string>#jsx-tag</string>\n          </dict>\n        </array>\n      </dict>\n      <key>jsx-tag</key>\n      <dict>\n        <key>name</key>\n        <string>meta.tag.tsx</string>\n        <key>begin</key>\n        <string>(?=(&lt;)\\s*(?:([_$a-zA-Z][-$\\w.]*)(?&lt;!\\.|-)(:))?((?:[a-z][a-z0-9]*|([_$a-zA-Z][-$\\w.]*))(?&lt;!\\.|-))(?=((&lt;\\s*)|(\\s+))(?!\\?)|\\/?&gt;))</string>\n        <key>end</key>\n        <string>(/&gt;)|(?:(&lt;/)\\s*(?:([_$a-zA-Z][-$\\w.]*)(?&lt;!\\.|-)(:))?((?:[a-z][a-z0-9]*|([_$a-zA-Z][-$\\w.]*))(?&lt;!\\.|-))?\\s*(&gt;))</string>\n        <key>endCaptures</key>\n        <dict>\n          <key>1</key>\n          <dict>\n            <key>name</key>\n            <string>punctuation.definition.tag.end.tsx</string>\n          </dict>\n          <key>2</key>\n          <dict>\n            <key>name</key>\n            <string>punctuation.definition.tag.begin.tsx</string>\n          </dict>\n          <key>3</key>\n          <dict>\n            <key>name</key>\n            <string>entity.name.tag.namespace.tsx</string>\n          </dict>\n          <key>4</key>\n          <dict>\n            <key>name</key>\n            <string>punctuation.separator.namespace.tsx</string>\n          </dict>\n          <key>5</key>\n          <dict>\n            <key>name</key>\n            <string>entity.name.tag.tsx</string>\n          </dict>\n          <key>6</key>\n          <dict>\n            <key>name</key>\n            <string>support.class.component.tsx</string>\n          </dict>\n          <key>7</key>\n          <dict>\n            <key>name</key>\n            <string>punctuation.definition.tag.end.tsx</string>\n          </dict>\n        </dict>\n        <key>patterns</key>\n        <array>\n          <dict>\n            <key>begin</key>\n            <string>(&lt;)\\s*(?:([_$a-zA-Z][-$\\w.]*)(?&lt;!\\.|-)(:))?((?:[a-z][a-z0-9]*|([_$a-zA-Z][-$\\w.]*))(?&lt;!\\.|-))(?=((&lt;\\s*)|(\\s+))(?!\\?)|\\/?&gt;)</string>\n            <key>beginCaptures</key>\n            <dict>\n              <key>1</key>\n              <dict>\n                <key>name</key>\n                <string>punctuation.definition.tag.begin.tsx</string>\n              </dict>\n              <key>2</key>\n              <dict>\n                <key>name</key>\n                <string>entity.name.tag.namespace.tsx</string>\n              </dict>\n              <key>3</key>\n              <dict>\n                <key>name</key>\n                <string>punctuation.separator.namespace.tsx</string>\n              </dict>\n              <key>4</key>\n              <dict>\n                <key>name</key>\n                <string>entity.name.tag.tsx</string>\n              </dict>\n              <key>5</key>\n              <dict>\n                <key>name</key>\n                <string>support.class.component.tsx</string>\n              </dict>\n            </dict>\n            <key>end</key>\n            <string>(?=[/]?&gt;)</string>\n            <key>patterns</key>\n            <array>\n              <dict>\n                <key>include</key>\n                <string>#comment</string>\n              </dict>\n              <dict>\n                <key>include</key>\n                <string>#type-arguments</string>\n              </dict>\n              <dict>\n                <key>include</key>\n                <string>#jsx-tag-attributes</string>\n              </dict>\n            </array>\n          </dict>\n          <dict>\n            <key>begin</key>\n            <string>(&gt;)</string>\n            <key>beginCaptures</key>\n            <dict>\n              <key>1</key>\n              <dict>\n                <key>name</key>\n                <string>punctuation.definition.tag.end.tsx</string>\n              </dict>\n            </dict>\n            <key>end</key>\n            <string>(?=&lt;/)</string>\n            <key>contentName</key>\n            <string>meta.jsx.children.tsx</string>\n            <key>patterns</key>\n            <array>\n              <dict>\n                <key>include</key>\n                <string>#jsx-children</string>\n              </dict>\n            </array>\n          </dict>\n        </array>\n      </dict>\n      <key>jsx-children</key>\n      <dict>\n        <key>patterns</key>\n        <array>\n          <dict>\n            <key>include</key>\n            <string>#jsx-tag-without-attributes</string>\n          </dict>\n          <dict>\n            <key>include</key>\n            <string>#jsx-tag</string>\n          </dict>\n          <dict>\n            <key>include</key>\n            <string>#jsx-evaluated-code</string>\n          </dict>\n          <dict>\n            <key>include</key>\n            <string>#jsx-entities</string>\n          </dict>\n        </array>\n      </dict>\n      <key>jsx-evaluated-code</key>\n      <dict>\n        <key>name</key>\n        <string>meta.embedded.expression.tsx</string>\n        <key>begin</key>\n        <string>\\{</string>\n        <key>end</key>\n        <string>\\}</string>\n        <key>beginCaptures</key>\n        <dict>\n          <key>0</key>\n          <dict>\n            <key>name</key>\n            <string>punctuation.section.embedded.begin.tsx</string>\n          </dict>\n        </dict>\n        <key>endCaptures</key>\n        <dict>\n          <key>0</key>\n          <dict>\n            <key>name</key>\n            <string>punctuation.section.embedded.end.tsx</string>\n          </dict>\n        </dict>\n        <key>patterns</key>\n        <array>\n          <dict>\n            <key>include</key>\n            <string>#expression</string>\n          </dict>\n        </array>\n      </dict>\n      <key>jsx-entities</key>\n      <dict>\n        <key>patterns</key>\n        <array>\n          <dict>\n            <key>name</key>\n            <string>constant.character.entity.tsx</string>\n            <key>match</key>\n            <string>(&amp;)([a-zA-Z0-9]+|#[0-9]+|#x[0-9a-fA-F]+)(;)</string>\n            <key>captures</key>\n            <dict>\n              <key>1</key>\n              <dict>\n                <key>name</key>\n                <string>punctuation.definition.entity.tsx</string>\n              </dict>\n              <key>3</key>\n              <dict>\n                <key>name</key>\n                <string>punctuation.definition.entity.tsx</string>\n              </dict>\n            </dict>\n          </dict>\n          <dict>\n            <key>name</key>\n            <string>invalid.illegal.bad-ampersand.tsx</string>\n            <key>match</key>\n            <string>&amp;</string>\n          </dict>\n        </array>\n      </dict>\n      <key>jsx-tag-attributes</key>\n      <dict>\n        <key>name</key>\n        <string>meta.tag.attributes.tsx</string>\n        <key>begin</key>\n        <string>\\s+</string>\n        <key>end</key>\n        <string>(?=[/]?&gt;)</string>\n        <key>patterns</key>\n        <array>\n          <dict>\n            <key>include</key>\n            <string>#comment</string>\n          </dict>\n          <dict>\n            <key>include</key>\n            <string>#jsx-tag-attribute-name</string>\n          </dict>\n          <dict>\n            <key>include</key>\n            <string>#jsx-tag-attribute-assignment</string>\n          </dict>\n          <dict>\n            <key>include</key>\n            <string>#jsx-string-double-quoted</string>\n          </dict>\n          <dict>\n            <key>include</key>\n            <string>#jsx-string-single-quoted</string>\n          </dict>\n          <dict>\n            <key>include</key>\n            <string>#jsx-evaluated-code</string>\n          </dict>\n          <dict>\n            <key>include</key>\n            <string>#jsx-tag-attributes-illegal</string>\n          </dict>\n        </array>\n      </dict>\n      <key>jsx-tag-attribute-name</key>\n      <dict>\n        <key>match</key>\n        <string>(?x)\n  \\s*\n  (?:([_$a-zA-Z][-$\\w.]*)(:))?\n  ([_$a-zA-Z][-$\\w]*)\n  (?=\\s|=|/?&gt;|/\\*|//)</string>\n        <key>captures</key>\n        <dict>\n          <key>1</key>\n          <dict>\n            <key>name</key>\n            <string>entity.other.attribute-name.namespace.tsx</string>\n          </dict>\n          <key>2</key>\n          <dict>\n            <key>name</key>\n            <string>punctuation.separator.namespace.tsx</string>\n          </dict>\n          <key>3</key>\n          <dict>\n            <key>name</key>\n            <string>entity.other.attribute-name.tsx</string>\n          </dict>\n        </dict>\n      </dict>\n      <key>jsx-tag-attribute-assignment</key>\n      <dict>\n        <key>name</key>\n        <string>keyword.operator.assignment.tsx</string>\n        <key>match</key>\n        <string>=(?=\\s*(?:\'|"|{|/\\*|//|\\n))</string>\n      </dict>\n      <key>jsx-string-double-quoted</key>\n      <dict>\n        <key>name</key>\n        <string>string.quoted.double.tsx</string>\n        <key>begin</key>\n        <string>"</string>\n        <key>end</key>\n        <string>"</string>\n        <key>beginCaptures</key>\n        <dict>\n          <key>0</key>\n          <dict>\n            <key>name</key>\n            <string>punctuation.definition.string.begin.tsx</string>\n          </dict>\n        </dict>\n        <key>endCaptures</key>\n        <dict>\n          <key>0</key>\n          <dict>\n            <key>name</key>\n            <string>punctuation.definition.string.end.tsx</string>\n          </dict>\n        </dict>\n        <key>patterns</key>\n        <array>\n          <dict>\n            <key>include</key>\n            <string>#jsx-entities</string>\n          </dict>\n        </array>\n      </dict>\n      <key>jsx-string-single-quoted</key>\n      <dict>\n        <key>name</key>\n        <string>string.quoted.single.tsx</string>\n        <key>begin</key>\n        <string>\'</string>\n        <key>end</key>\n        <string>\'</string>\n        <key>beginCaptures</key>\n        <dict>\n          <key>0</key>\n          <dict>\n            <key>name</key>\n            <string>punctuation.definition.string.begin.tsx</string>\n          </dict>\n        </dict>\n        <key>endCaptures</key>\n        <dict>\n          <key>0</key>\n          <dict>\n            <key>name</key>\n            <string>punctuation.definition.string.end.tsx</string>\n          </dict>\n        </dict>\n        <key>patterns</key>\n        <array>\n          <dict>\n            <key>include</key>\n            <string>#jsx-entities</string>\n          </dict>\n        </array>\n      </dict>\n      <key>jsx-tag-attributes-illegal</key>\n      <dict>\n        <key>name</key>\n        <string>invalid.illegal.attribute.tsx</string>\n        <key>match</key>\n        <string>\\S+</string>\n      </dict>\n    </dict>\n  </dict>\n</plist>'},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.segmentedControl="segmentedControl_s1l1nykj",t.borderlessSegmentedControl=[t.segmentedControl,"borderlessSegmentedControl_bu7yytp"].join(" "),t.borderlessSegmentedControlItem="borderlessSegmentedControlItem_b1jgdg34",t.segmentedControlItem=[t.borderlessSegmentedControlItem,"segmentedControlItem_s71tspy"].join(" "),n(734)},function(e,t,n){},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(9),r=n(76),s=n(2),a=n(6),l=n(43),c=n(10),d=n(434);class CreateComponentHeader extends i.Component{static calculateState(){return{nodes:s.default.treeStore.selectionAsNodes}}render(){const{nodes:e}=this.state;return i.createElement(d.TabContentCreationHeader,{title:"Components",createAction:createComponent(e),createActionTitle:createActionTitle(e),createActionEnabled:createActionEnabled(e)})}}CreateComponentHeader.engineChangeKeys=a.EngineChangeFlags.Selection|a.EngineChangeFlags.ToolStore;const u=c.default(CreateComponentHeader);function createActionTitle(e){return t=>{const n=t.length>0;return n&&l.ContextAction.makeMasterEnabled(s.default.tree,e)||!n?"New Design Component":0===e.length?"Select a Frame":"Select a valid Frame"}}function createComponent(e){return s.default.wrapHandler(t=>{const n=e[0];n&&(t&&s.default.updateNode(n.id,{name:t}),l.ContextAction.makeMaster(s.default,e),r.Metrics.pushEvent(o.createComponentDesignCreateEvent({source:"components_panel"})))})}function createActionEnabled(e){return t=>{return t.length>0&&l.ContextAction.makeMasterEnabled(s.default.tree,e)}}t.CreateComponentHeader=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(223),r=n(177),s=[{icon:"nux-components",header:"Components",text:["Browse all your design and",i.createElement("br",{key:"1"}),"code components here. Drag",i.createElement("br",{key:"2"}),"them onto the canvas to use."],action:()=>r.PublicStore.goToPackage("@framer/framer.examples"),actionText:"Get Example Package"}];t.EmptyState=()=>i.createElement(o.PanelEmptyState,{steps:s})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(223);t.NoResultsState=()=>i.createElement(o.PanelEmptyState,{steps:[{icon:"components-empty-state-1",header:"",text:"No Results"}]})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(24),r=n(3),s=n(739),a=n(286),l=n(740),c=n(439);t.PackagePanel=function PackagePanel({projectURL:e,viewType:t,components:n,masters:r,expandedCategories:p,expandedPackages:g,packageIdentifier:m,outdatedInfo:f,isUpdating:y,deletePackage:v}){const b=[],k=!m||-1!==g.indexOf(m);if(m&&b.push(i.createElement(l.PackageTitle,{key:m+"-title",projectURL:e,isExpanded:k,displayName:o.componentLoader.packageDisplayName(m)||m,packageIdentifier:m,outdatedInfo:f,isUpdating:y,deletePackage:v})),k){const{uncategorizedComponents:e,categorizedComponents:l}=c.groupComponentsByCategory(n),g=e.length>0;let f=!1;if(g&&(f=!0,b.push(i.createElement("div",{key:`${m}-uncategorized-components`,style:d},e.map((e,n)=>i.createElement(a.PackagePanelComponent,{packageIdentifier:m,key:n,componentDefinition:e,isExternalPackage:null!==m,masters:r,viewType:t}))))),Object.keys(l).forEach(e=>{f=!0;const n=`${m}_${e}`,o=l[e];b.push(i.createElement(s.PackagePanelCategory,{key:n,id:n,packageIdentifier:m,viewType:t,category:e,expanded:-1!==p.indexOf(n),components:o,isExternalPackage:null!==m,masters:r}))}),!f&&m){const e=o.componentLoader.tokensForPackage(m),t=e?Object.keys(e).length:0;b.push(function noComponentsPlaceholder(e){return e?i.createElement("div",{style:u},"Contains ",e," ",1===e?"Color":"Colors",i.createElement("a",{style:h,href:"https://www.framer.com/docs/shared-colors"},"Learn More")):i.createElement("div",{style:u},"No components")}(t))}}return i.createElement("div",{style:{width:"100%"}},b)};const d={display:"flex",flexWrap:"wrap",alignContent:"flex-start",padding:10};const u={padding:15,fontWeight:400,fontSize:"11px",color:r.theme.componentsEmptyText,userSelect:"none",WebkitUserSelect:"none",cursor:"default"},h={color:r.theme.tint,textDecoration:"none",float:"right"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(2),r=n(3),s=n(286),a=n(222);t.PackagePanelCategory=class PackagePanelCategory extends i.Component{constructor(){super(...arguments),this.handleHeaderClick=o.default.wrapHandler(()=>{this.props.expanded?o.default.documentSettings.collapseComponentPanelCategory(this.props.id):o.default.documentSettings.expandComponentPanelCategory(this.props.id)})}render(){const{category:e,expanded:t,components:n,viewType:o,packageIdentifier:r,isExternalPackage:c,masters:d}=this.props;return i.createElement("div",{style:{width:"100%"}},i.createElement("div",{onClick:this.handleHeaderClick,style:categoryHeader(c)},a.collapseIndicator(!t),e),t&&i.createElement("div",{style:l},n.map((e,t)=>i.createElement(s.PackagePanelComponent,{key:t,packageIdentifier:r,componentDefinition:e,isExternalPackage:c,masters:d,viewType:o}))))}};const l={display:"flex",flexWrap:"wrap",padding:10},c=`1px solid ${r.theme.packageTitleBorder}`;function categoryHeader(e){return{top:e?36:0,position:"-webkit-sticky",width:"100%",height:28,borderTop:c,borderBottom:c,marginBottom:-1,zIndex:9,fontWeight:500,fontSize:11,lineHeight:1.2,letterSpacing:0,display:"flex",alignItems:"center",cursor:"default",color:r.theme.componentCategoryLabel,backgroundColor:r.theme.packageTitleBackground}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(2),r=n(3),s=n(29),a=n(177),l=n(143),c=n(64),d=n(145),u=n(222);function updateHandler(e,t){return function(n){n&&n.stopPropagation(),l.projectServerConnection.upgradePackage(e,t.wanted)}}function showContextMenu(e,t,n){return function(i){const r=!!t,l=o.default.serverStore.packagesInfo[e];s.Menu.buildFromTemplate([{label:t?`Update to ${t.wanted}`:"No Updates",visible:r,click:updateHandler(e,t)},{type:"separator",visible:r},{label:"View in Store",enabled:!!l,click:()=>{l.private?a.CompanyStore.goToPackage(e):a.PublicStore.goToPackage(e)}},{label:"Uninstall",click:()=>n&&n(e)}]).popup({x:i.clientX,y:i.clientY})}}function iconStyle(e,t){return{position:"relative",borderRadius:20,width:20,height:20,flexShrink:0,marginRight:8,background:`center no-repeat url(${`${e}node_modules/${t}/metadata/icon.png`})`,backgroundSize:"cover",backgroundColor:r.theme.packageIconBackground,boxShadow:`inset 0 0 0 1px ${r.theme.packageIconBorder}`}}t.PackageTitle=class PackageTitle extends i.Component{constructor(){super(...arguments),this.handleClick=o.default.wrapHandler(()=>{const{packageIdentifier:e,isExpanded:t}=this.props;t?o.default.documentSettings.collapseComponentPanelPackage(e):o.default.documentSettings.expandComponentPanelPackage(e)})}render(){const{packageIdentifier:e,displayName:t,projectURL:n,outdatedInfo:o,isExpanded:s,isUpdating:a,deletePackage:l}=this.props;return i.createElement("div",{style:{top:0,position:"-webkit-sticky",width:"100%",height:38,borderTop:`1px solid ${r.theme.packageTitleBorder}`,borderBottom:`1px solid ${r.theme.packageTitleBorder}`,marginBottom:-1,zIndex:10,fontWeight:500,fontSize:"11px",color:r.theme.packageTitle,backgroundColor:r.theme.packageTitleBackground,display:"flex",alignItems:"center",justifyContent:"space-between",padding:"6px 7px 6px 0px",cursor:"default"},onClick:this.handleClick,onContextMenu:showContextMenu(e,o,l)},i.createElement("div",{style:h},u.collapseIndicator(!s),i.createElement("div",{style:iconStyle(n,e)}),i.createElement("span",{style:p},t)),o&&i.createElement(c.Button,{title:"Update",onClick:updateHandler(e,o),enabled:!a,style:g},a?i.createElement(d.ActivityIndicator,null):"Update"))}};const h={fontWeight:500,fontSize:"11px",color:r.theme.packageTitle,backgroundColor:r.theme.packageTitleBackground,display:"flex",alignItems:"center",width:"1fr",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",paddingRight:5},p={whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",width:"calc(1fr - 26px)"},g={width:56,fontWeight:"normal"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(2);const o=[function crashByBrokenTree(){const e=i.default.tree.root.children[0];e&&i.default.tree.unsafeRemoveId(e.id)}];t.crash=function crash(){const e=Math.floor(Math.random()*o.length),t=o[e];console.warn("testing crash handling: "+t.name),t()}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(10),r=n(440),s=n(2),a=n(6);class HUDBackground extends i.PureComponent{static calculateState(){return s.default.canvasStore.assertInteractive(),{zoom:s.default.zoom,selection:s.default.selection,highlight:s.default.highlight,showArrows:s.default.debugStore.showArrows&&s.default.toolStore.shouldShowArrows()}}render(){s.default.canvasStore.assertInteractive();const{zoom:e,selection:t,highlight:n,showArrows:o}=this.state;return o?i.createElement(r.NodeLinksContainer,{zoom:e,selection:t,highlight:n,background:!0}):null}}HUDBackground.engineChangeKeys=a.EngineChangeFlags.TreeStore|a.EngineChangeFlags.CanvasZoom|a.EngineChangeFlags.DebugStore|a.EngineChangeFlags.ToolStore;const l=o.default(HUDBackground);t.HUDBackground=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(5),r=n(744),s=n(3),a=n(213),l=n(745),c=n(74),d=n(2);t.NodeLinks=class NodeLinks extends i.Component{render(){const{tree:e,tool:t,highlight:n,zoom:u,background:h}=this.props,p=[];for(const{fromNode:g,toNodes:m}of d.default.treeStore.codeComponentArrows){const d=g.isSelected(),f=n===g.id&&!d,y=c.isUserComponent(g)?s.theme.componentTint:s.theme.tint,v=i.createElement(r.Arrows,{key:`arrow-${g.id}-slot`,tree:e,source:g,destinations:m,zoom:u,tintColor:y,active:f||d,background:h,showArrowHead:!1});if(p.push(v),!h){const n=a.startPoint(e.getRect(g),g.canvasMatrix(),a.ArrowDirection.Right),r=g.slotDictionary(),s=!!r&&(r.multi.length>0||[...r.multi,...r.single].length>1),c=i.createElement(l.Outlet,{key:`slot-outlet-${g.id}`,x:n.x,y:n.y,zoom:u,tintColor:y,toolIsActive:t===o.Tools.SlotConnect,selected:d,highlighted:f,id:g.id,tool:o.Tools.SlotConnect,multi:s});p.push(c)}}for(const{fromNode:r,toNode:c}of d.default.treeStore.linkNodeArrows){const d=r.isSelected(),g=n===r.id&&!d,m=e.convertFrameToCanvas(r),f=e.convertFrameToCanvas(c),y=a.preferredArrowDirection(m,f),v=e.getRect(r),b=e.getRect(c),{start:k,end:S,offset:C}=a.arrowPoints(e,v,r.canvasMatrix(),b,c.canvasMatrix(),y,a.topAncestor(e,r));if(d&&t===o.Tools.NavigationLink)continue;const x=i.createElement(a.Arrow,{key:`arrow-${r.id}`,startX:k.x,startY:k.y,endX:S.x,endY:S.y,startOffsetX:C.x,startOffsetY:C.y,direction:y,zoom:u,tintColor:s.theme.tint,active:g||d,background:h,showArrowHead:!0});if(p.push(x),!h){const e=i.createElement(l.Outlet,{key:`navigation-outlet-${r.id}`,x:k.x,y:k.y,zoom:u,toolIsActive:t===o.Tools.NavigationLink,highlighted:g,selected:d,tintColor:s.theme.tint,id:r.id,tool:o.Tools.NavigationLink});p.push(e)}}return p}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(213);t.Arrows=function Arrows(e){const{tree:t,source:n,destinations:r,zoom:s,tintColor:a,active:l,background:c,showArrowHead:d}=e,u=t.getRect(n),h=n.canvasMatrix(),p=[],g=[];for(let m=0,f=r.length;m<f;m++){const e=r[m];if(-1!==g.indexOf(e.id))continue;g.push(e.id);const{start:f,end:y,offset:v}=o.arrowPoints(t,u,h,t.getRect(e),e.canvasMatrix(),o.ArrowDirection.Right,o.topAncestor(t,n));p.push(i.createElement(o.Arrow,{key:n.id+e.id+m,tintColor:a,active:l,startX:f.x,startY:f.y,endX:y.x,endY:y.y,direction:o.ArrowDirection.Right,startOffsetX:v.x,startOffsetY:v.y,background:c,showArrowHead:d,zoom:s}))}return p}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(2),r=n(3);t.outletSize=9;function childDot(e,t,n,o=0){return i.createElement("div",{key:o,style:childDotStyle(t,o,n,e)})}t.Outlet=class Outlet extends i.Component{constructor(){super(...arguments),this.state={mouseOver:!1},this.onMouseEnter=()=>{this.setState({mouseOver:!0})},this.onMouseLeave=()=>{this.setState({mouseOver:!1})},this.onMouseMove=e=>{e.stopPropagation()},this.activateTool=o.default.wrapHandler(e=>{const{id:t,tool:n}=this.props;o.default.setSelection([t]),o.default.setToolEnum(n)})}render(){const{selected:e,highlighted:n,toolIsActive:o,multi:s,x:a,y:c,zoom:d,tintColor:u}=this.props,{mouseOver:h}=this.state,p=s?17:t.outletSize,g=Math.round(this.props.x*d-5),m=this.props.y*d-.5*p+.5,f=Object.assign({},l,{height:p,transform:`translateX(${g}px) translateY(${m}px)`,background:!e||!o&&h?"white":u,border:`1px solid ${e||n||h?u:r.theme.navigationConnectionLine}`});return i.createElement("div",{style:f,onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,onMouseMove:this.onMouseMove,onMouseDown:this.activateTool},function childDots(e,t,n){return n?[childDot(e,t,n,-1),childDot(e,t,n),childDot(e,t,n,1)]:childDot(e,t,n)}(h&&!(o&&e),u,s))}};const s={position:"absolute",width:t.outletSize-5,height:t.outletSize-5,background:"#09F",borderRadius:"50%",pointerEvents:"none"},a=t.outletSize-6;function childDotStyle(e,t,n,i){return Object.assign({},s,{width:a,height:a,background:i?e:"white",transform:`translateX(2px) translateY(${t*(a+1)}px) translateY(${n?6:2}px)`})}const l={position:"absolute",width:t.outletSize,height:t.outletSize,background:"white",borderRadius:t.outletSize,zIndex:10001}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(10),r=n(2),s=n(6);t.gridOverdraw=32;class Grid extends i.PureComponent{constructor(){super(...arguments),this.canvas=null,this.canvasWidth=-1,this.canvasHeight=-1,this.setCanvas=e=>{this.canvas=e,this.onResize()},this.onResize=()=>{this.canvas&&(this.canvasWidth=this.canvas.clientWidth,this.canvasHeight=this.canvas.clientHeight,this.componentDidUpdate())},this.componentDidUpdate=()=>{if(!this.canvas)return;const e=window.devicePixelRatio||1,t=this.canvasWidth*e,n=this.canvasHeight*e;this.canvas.width=t,this.canvas.height=n;const{zoom:i,colorSamplerActive:o,shapeModeActive:r}=this.state;if(i<8||o)return;const s=this.canvas.getContext("2d");if(s){s.strokeStyle="black",s.lineWidth=2,s.globalAlpha=r?.02:.04,s.beginPath();for(let o=0;o<5e3;o++){const r=o*i*e;if(s.moveTo(r,0),s.lineTo(r,n),s.moveTo(0,r),s.lineTo(t,r),r>t&&r>n)break}if(s.closePath(),s.stroke(),r){s.lineWidth=1.5,s.globalAlpha=i/32*.35;for(let o=0;o<=t;o+=i*e)for(let t=0;t<=n;t+=i*e)s.fillRect(o-1.25,t-1.25,2.5,2.5)}}}}static calculateState(){const{zoom:e,colorSamplerActive:t}=r.default.canvasStore,{shapeModeActive:n}=r.default.toolStore.state,{showPixelGrid:i}=r.default.persistedUserDefaults;return{zoom:e<8?0:e,colorSamplerActive:t,shapeModeActive:n,showPixelGrid:i}}render(){return this.state.showPixelGrid?i.createElement("canvas",{ref:this.setCanvas,style:{width:"100%",height:"100%"}}):null}componentDidMount(){window.addEventListener("resize",this.onResize)}componentWillUnmount(){window.removeEventListener("resize",this.onResize)}}Grid.engineChangeKeys=s.EngineChangeFlags.CanvasZoom|s.EngineChangeFlags.CanvasStore|s.EngineChangeFlags.ToolStore|s.EngineChangeFlags.CanvasLiveTransform|s.EngineChangeFlags.UserDefaultsStore;const a=o.default(Grid);t.Grid=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(10),r=n(748),s=n(6),a=n(2);class HUD extends i.PureComponent{static calculateState(){a.default.canvasStore.assertInteractive();const{zoom:e,colorSamplerActive:t}=a.default.canvasStore;return{zoom:e,colorSamplerActive:t}}render(){a.default.canvasStore.assertInteractive();const{zoom:e,colorSamplerActive:t}=this.state;return i.createElement(r.default,{zoom:e,colorSamplerActive:t})}}HUD.engineChangeKeys=s.EngineChangeFlags.CanvasZoom|s.EngineChangeFlags.CanvasStore;const l=o.default(HUD);t.HUD=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(10),r=n(749),s=n(424),a=n(761),l=n(440),c=n(2),d=n(6);class ControlsContainer extends i.Component{static calculateState(){return{tree:c.default.tree,selection:c.default.selection,highlight:c.default.highlight,activeScreen:c.default.activeScreen,frameNodes:c.default.treeStore.frameNodes,shapeModeActive:c.default.toolStore.state.shapeModeActive,tool:c.default.toolStore.state.tool,handle:c.default.toolStore.state.handle,showTitles:c.default.debugStore.showTitles,showArrows:c.default.debugStore.showArrows&&c.default.toolStore.shouldShowArrows()}}render(){const{frameNodes:e,selection:t,highlight:n,tool:o,shapeModeActive:c}=this.state,{zoom:d}=this.props,{showTitles:u,showArrows:h}=this.state;return i.createElement(i.Fragment,null,i.createElement("div",{className:"ControlsContainer",style:this.props.colorSamplerActive?{visibility:"hidden"}:void 0},i.createElement(a.ShapeContainerOutlines,{shapeModeActive:c,tool:o,zoom:d}),u&&i.createElement(s.Screens,{frameNodes:e,selection:t,highlight:n,zoom:d,tool:o}),i.createElement(r.default,Object.assign({},this.props,this.state)),h&&i.createElement(l.NodeLinksContainer,Object.assign({},this.props,this.state,{background:!1}))))}}ControlsContainer.engineChangeKeys=d.EngineChangeFlags.TreeStore|d.EngineChangeFlags.ToolStore|d.EngineChangeFlags.DebugStore,t.default=o.default(ControlsContainer)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(6),r=n(10),s=n(2),a=n(750);class Tools extends i.Component{static calculateState(){const{mouseStore:e,toolStore:t,selectionOutlineTracker:n}=s.default,i=t.state.tool;return Object.assign({},e,{shouldShowSelectionOutline:n.shouldShowSelectionOutlineForTool(i)})}render(){return i.createElement(a.ToolManager,Object.assign({},this.props,this.state))}}Tools.engineChangeKeys=o.EngineChangeFlags.MouseStore|o.EngineChangeFlags.ToolStore|o.EngineChangeFlags.SelectionOutline,t.default=r.default(Tools)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(1),r=n(3),s=n(140),a=n(2),l=n(4),c=n(27),d=n(74),u=n(5),h=n(75),p=n(751),g=n(215),m=n(108),f=n(407),y=n(270),v=n(416),b=n(415),k=n(268),S=n(754),C=n(281),x=n(269),w=n(172),T=n(412),P=n(403),E=n(404),F=n(210),M=n(417),_=n(280),O=n(272),I=n(207),D=n(756),N=n(212),R=n(757),A=n(442),L=n(206),B=n(173),j=n(758),H=n(760),z=n(402);t.ToolManager=class ToolManager extends i.Component{constructor(){super(...arguments),this.state={selectionChange:!1,update:0},this.didMove=!1,this.highlightContextMenu=a.default.wrapMouseHandler(e=>{if(e.defaultPrevented)return;const{tree:t,highlight:n}=this.props;n&&(a.default.setSelection([n]),g.showContextMenu(o.Point(e.clientX,e.clientY),t,[n]),e.preventDefault())})}componentWillReceiveProps(e){const{mouseDown:t,tool:n,tree:i,selection:o,mouse:r}=e,l=i.root===this.props.tree.root,c=n===this.props.tool,d=!s.default(r,this.props.mouse),u=!s.default(t,this.props.mouseDown),h=m.intersection(o,this.props.selection).length===o.length;if(l&&c&&d&&u&&h)return;c?d||(this.didMove=!0):this.didMove=!1;const p={},g=o!==a.default.selection;p.selectionChange=g,this.setState(e=>Object.assign({},e,p))}toolComponent(){const{tool:e}=a.default;switch(e.constructor){case k.HighlightTool:case k.DirectSelectTool:return i.createElement(k.Highlight,Object.assign({},this.props,this.state,{myTool:e}));case x.SelectTool:return i.createElement(x.Select,Object.assign({},this.props,{myTool:e}));case B.MoveTool:return i.createElement(S.Move,{myTool:e});case y.CreateFrameTool:case y.CreateRoundedFrameTool:case y.CreateShapeContainerTool:return i.createElement(y.CreateFrame,Object.assign({},this.props,{myTool:e}));case f.CreateStackComponentTool:case f.CreateScrollComponentTool:case f.CreatePageComponentTool:return i.createElement(f.CreateCodeComponent,Object.assign({},this.props,{myTool:e}));case I.ZoomSelectTool:return i.createElement(I.ZoomSelect,{myTool:e});case w.PanTool:return i.createElement(w.Pan,null);case O.ZoomTool:return i.createElement(O.Zoom,{myTool:e});case L.VekterPathEngine:return i.createElement(R.default,Object.assign({},this.props,{myTool:e}));case P.ResizeTool:return i.createElement(P.Resize,{myTool:e});case E.RotateTool:return i.createElement(E.Rotate,{myTool:e});case T.RadiusTool:return i.createElement(T.Radius,Object.assign({},this.props,{myTool:e}));case F.SampleColorTool:return i.createElement(F.SampleColor,Object.assign({},this.props,{myTool:e}));case N.GradientToolEngine:return i.createElement(D.Gradient,Object.assign({},this.props,{myTool:e}));case _.TextEditTool:return i.createElement(_.TextEdit,{myTool:e});case b.CreateTextTool:return i.createElement(b.CreateText,Object.assign({},this.props,{myTool:e}));case v.CreateRectangleShapeTool:case v.CreateOvalShapeTool:case v.CreateStarShapeTool:case v.CreatePolygonShapeTool:return i.createElement(v.CreateShape,Object.assign({},this.props,{myTool:e}));case M.SlotConnectTool:return i.createElement(M.SlotConnect,{myTool:e});case C.NavigationLinkTool:return i.createElement(C.NavigationLink,{myTool:e});case z.GuideMoveTool:return i.createElement(z.GuideMove,Object.assign({},this.props,{myTool:e}))}return null}toolHandlesKeyboard(){switch(this.props.tool){case u.Tools.Highlight:case u.Tools.DirectSelect:case u.Tools.Path:case u.Tools.TextEdit:case u.Tools.Zoom:case u.Tools.Gradient:return!0;default:return!1}}highlightComponent(){const{highlight:e,selection:t,tree:n,zoom:s,tool:a}=this.props;if(!e||-1!==t.indexOf(e))return;const p=n.getNode(e);if(c.hasShape(p)&&!l.isShapeGroupNode(p))return i.createElement(A.default,{tree:n,node:p,zoom:s,onContextMenu:this.highlightContextMenu});{const e=n.convertRectToCanvasWithRotation(p),l=1===t.length?n.getNode(t[0]):null;let c="transparent",g=d.isUserComponent(p)?r.theme.layerPanelMasterOrReplica:r.theme.resizeBox;a!==u.Tools.SlotConnect&&a!==u.Tools.NavigationLink||(c=l&&d.isUserComponent(l)?r.theme.selectionBoxComponentBackground:r.theme.selectionBoxBackground,g=l&&d.isUserComponent(l)?r.theme.layerPanelMasterOrReplica:r.theme.resizeBox);const m=o.Rect.roundToOutside(o.Rect.multiply(e,s));return i.createElement(h.default,{frame:m,backgroundColor:c,borderColor:g,borderWidth:this.props.shouldShowSelectionOutline?1:0,rotation:e.rotation,onContextMenu:this.highlightContextMenu})}}selectionComponent(){if(!a.default.tool.displaySelectionBox)return;const e=a.default.isDefaultToolActive()&&!this.props.shouldShowSelectionOutline&&!this.state.selectionChange,t=H.singleSelectedStraightPath(a.default.treeStore.selectionAsNodes);return t?i.createElement(j.SelectedLine,{node:t,zoom:this.props.zoom,tree:this.props.tree,hidden:e}):i.createElement(p.default,Object.assign({},this.props,{showHandles:a.default.tool.displaySelectionHandles||!1,hidden:e}))}render(){return a.default.assertReactRendering(),i.createElement("div",{className:"ToolManager"},this.highlightComponent(),this.selectionComponent(),this.toolComponent())}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(2),r=n(752),s=n(4),a=n(3),l=n(1),c=n(19),d=n(262),u=n(413),h=n(54),p=n(27),g=n(11),m=n(55),f=n(74),y=n(75);t.default=function SelectionBox({tree:e,selection:t,zoom:n,showHandles:b,hidden:k}){let S,C,x=0,w=[];const T=[];let P=null,E=!1;if(1===t.length){const o=e.getNode(t[0]);if(!o||h.hasVisibility(o)&&!o.visible)return i.createElement("noscript",null);const r=e.convertRectToCanvasWithRotation(o);x=r.rotation,S=l.Rect.multiply(r,n),S=l.Rect.roundToOutside(S),C=e.convertFramePointsToCanvas(o),E=f.isUserComponent(o),!m.withRadius(o)||m.withRelativeRadius(o)&&o.radiusIsRelative||s.isShapeContainerNode(o)||(P=i.createElement(u.default,{key:"borderRadiusHandle",node:o,tree:e,zoom:n,isComponent:E,hidden:k}))}else(S=t.reduce((t,i)=>{const o=e.getNode(i);if(!o||h.hasVisibility(o)&&!o.visible)return t;let r;if(p.hasShape(o)){const t=o.calculatedPaths(),n=g.convertPathToCanvas(e,o,t);r=c.default.boundingBox(n)}else r=e.convertFrameToCanvas(o);const s=l.Rect.roundToOutside(l.Rect.multiply(r,n));return T.push(s),t?l.Rect.merge(t,s):s},void 0))&&(S=l.Rect.roundToOutside(S),C=d.default.fromFrame(S)),k||(w=T.map((e,t)=>i.createElement(y.default,{key:t,frame:e,backgroundColor:"transparent",borderColor:a.theme.tint,borderWidth:1,opacity:.3,style:v})));if(S){let s=null;return b&&C?s=i.createElement(r.SelectionHandles,{key:t.join("")+"handles",tree:e,selection:t,frame:S,framePoints:C,zoom:n,isComponent:E,shapeModeActive:o.default.shapeModeActive,hidden:k}):P=null,i.createElement(i.Fragment,null,w,i.createElement(y.default,{frame:S,backgroundColor:"",borderColor:E?a.theme.layerPanelMasterOrReplica:a.theme.resizeBox,borderWidth:k?0:1,rotation:x,style:v},s),P)}return i.createElement("noscript",null)};const v={pointerEvents:"none"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(4),r=n(441),s=n(753),a=n(25);t.SelectionHandles=class SelectionHandles extends i.Component{render(){const{frame:e,framePoints:t,selection:n,tree:c,isComponent:d,hidden:u}=this.props,h=1===n.length;let p=null,g=!1;if(h){const e=c.getNode(n[0]);if(!e)return null;g=a.hasRotation(e),o.isTextNode(e)&&e.autoSize&&(p=e)}const m=[],f=[],y=[];if(p){const n=l(c,p),o=i.createElement(s.RotationHandle,{key:"rot-text",frame:e,framePoint:t[n],framePoints:t,hidden:u});y.push(o);const a=i.createElement(r.ResizeHandle,{key:"res-text",frame:e,framePoint:t[n],framePoints:t,visibleMidPoint:!0,isComponent:d,hidden:u});m.push(a)}else t.forEach((n,o)=>{const{fx:a,fy:l}=n,c=.5===a||.5===l;if(.5===a&&.5===l)return;if((e.height<20||e.width<20)&&(1===l&&0===a||0===l&&1===a))return;if(.5===a&&e.height<20)return;if(.5===l&&e.width<20)return;if(e.width<14&&e.height<14)return;if(g&&!c){const r=i.createElement(s.RotationHandle,{key:o+10,frame:e,framePoint:n,framePoints:t,hidden:u});y.push(r)}const h=i.createElement(r.ResizeHandle,{key:o,frame:e,framePoint:n,framePoints:t,visibleMidPoint:!1,isComponent:d,hidden:u});c?f.push(h):m.push(h)});return[...y,...f,...m]}};const l=(e,t)=>null===e.getParent(t.id)?7:null!==t.top?null!==t.left?8:null!==t.right?6:7:null!==t.bottom?null!==t.left?2:null!==t.right?0:1:null!==t.left?5:null!==t.right?3:7},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(46),r=n(2);function mouseDownHandler(e){return r.default.wrapMouseHandler(()=>{r.default.setRotateTool(e)})}t.RotationHandle=function RotationHandle({frame:e,framePoint:t,framePoints:n,hidden:r}){const{fx:a,fy:l}=t,c=18*(a-1),d=18*(l-1),u={position:"absolute",backgroundColor:"transparent",width:18,height:18,opacity:r?0:1,transform:`translate(${a*(e.width-6)+c+3}px, ${l*(e.height-6)+d+3}px) translateZ(0)`,cursor:o.rotating(t,n),pointerEvents:"auto"};return i.createElement("div",{style:u,onMouseDown:mouseDownHandler(t),onMouseMove:s})};const s=r.default.wrapMouseHandler(e=>{r.default.setHighlight(),e.stopPropagation()})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(405),r=n(755);const s=n(202).default(class Move extends i.Component{render(){const e=this.props.myTool,{tree:t,zoom:n}=e.engine,{parentDirectedInsertionLine:s}=e;return i.createElement("div",null,i.createElement(o.default,{ids:[...e.highlightedParents],tree:t,zoom:n}),this.props.children,i.createElement(r.InsertionIndicator,{insertion:s,zoom:n}))}});t.Move=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(1),r=n(3);t.InsertionIndicator=class InsertionIndicator extends i.Component{render(){const{insertion:e,zoom:t}=this.props;if(!e)return null;const n=o.Point.multiply(e.a,t),l=o.Point.multiply(e.b,t),c=o.Point.angle(n,l),d=o.Point.distance(n,l),u={position:"absolute",left:n.x,top:n.y,width:Math.max(d,1),height:1,backgroundColor:r.theme.tint,transformOrigin:"0 0",transform:`rotate(${c+90}deg)`};return i.createElement("div",{style:u},i.createElement("div",{style:s}),i.createElement("div",{style:a}))}};const s={position:"absolute",left:-7,top:-3,width:7,height:7,borderRadius:5,backgroundColor:"white",border:`1px solid ${r.theme.tint}`},a=Object.assign({},s,{right:-7,left:void 0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(2),r=n(10),s=n(212),a=n(6);class Gradient extends i.Component{static calculateState(){return{colorStopSelection:o.default.documentSettings.gradientStopIndex}}render(){return i.createElement(s.GradientToolManager,Object.assign({},this.props,this.state))}}Gradient.engineChangeKeys=a.EngineChangeFlags.GradientTool;const l=r.default(Gradient);t.Gradient=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(6),r=n(2),s=n(10),a=n(206);class PathEdit extends i.Component{static calculateState(){return r.default.pathSelectionStore.state}render(){return i.createElement(a.default,Object.assign({},this.props,this.state))}}PathEdit.engineChangeKeys=o.EngineChangeFlags.PathSelection,t.default=s.default(PathEdit)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(2),r=n(3),s=n(442),a=n(759),l=n(441);function ResizeHandle({x:e,y:t,index:n}){const o=l.resizeHandlesStyle(e,t,r.theme.resizeHandleOutline);return i.createElement("div",{style:o,onMouseDown:mouseDownHandler(n),onMouseMove:c})}function mouseDownHandler(e){return o.default.wrapMouseHandler(()=>{o.default.toolStore.setStraightLineAnchorIndex(e),o.default.setTool(new a.LineAnchorMoveTool)})}t.SelectedLine=function SelectedLine({node:e,zoom:t,tree:n,hidden:o}){if(o)return null;const r=e.pathSegments.get(0),a=e.pathSegments.get(1),l=n.convertPointToCanvas(e,r),c=n.convertPointToCanvas(e,a);return i.createElement(i.Fragment,null,i.createElement(s.default,{tree:n,node:e,zoom:t}),i.createElement(ResizeHandle,{x:l.x*t,y:l.y*t,index:0}),i.createElement(ResizeHandle,{x:c.x*t,y:c.y*t,index:1}))},t.ResizeHandle=ResizeHandle;const c=o.default.wrapMouseHandler(e=>{o.default.setHighlight(),e.stopPropagation()})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(1),o=n(2),r=n(20),s=n(5),a=n(130),l=n(11),c=n(32),d=n(276),u=n(209);t.LineAnchorMoveTool=class LineAnchorMoveTool extends r.VekterTool{constructor(){super(...arguments),this.enum=s.Tools.LineAnchorMove,this.lastVisibleFrame=null,this.snapConstraint=null,this.displaySelectionBox=!0}start(){o.default.beginUndoGroup()}stop(){o.default.endUndoGroup(),this.engine.toolStore.setSnapLines()}update(){const{mouseDown:e,mouse:t,shiftKey:n}=o.default.mouseStore;if(!e)return void o.default.exitTool();const r=o.default.treeStore.selectionAsNodes[0];if(!a.isPathNode(r))return void o.default.exitTool();const s=o.default.toolStore.state.straightLineAnchorIndex,h=Object.assign({},t);this.updateSnappingCache(o.default.tree,r,s);const p=this.snapOptions(r,s);n?n&&!this.snapConstraint&&(this.snapConstraint=u.Constraint.closest(p,t).constraint):this.snapConstraint=u.Constraint.temporary(p,t,o.default.zoom);const[g,m]=d.pathSegmentSnap(this.snappingCache,o.default.tree,o.default.zoom,[r],[{id:r.id,index:s}],t,this.snapConstraint);this.engine.toolStore.setSnapLines(m.x,m.y),i.isFiniteNumber(g.x)&&(h.x=g.x),i.isFiniteNumber(g.y)&&(h.y=g.y);const f=l.roundedPoint(h,c.PointRounding.Half),y=o.default.tree.convertPointToNode(r,f),v=r.pathSegments.map((e,t)=>t!==s?e:new i.PathSegment(e.merge(y)));o.default.updateNode(r.id,r.updateForPath({pathSegments:v}))}updateSnappingCache(e,t,n){const o=this.engine.canvasStore.getCanvasVisibleRect(),r=!i.isEqual(this.lastVisibleFrame,o),s=!this.snappingCache;(r||s)&&(this.snappingCache=d.pathSegmentSnappingData(e,[t],[{id:t.id,index:n}],o),this.lastVisibleFrame=o)}snapOptions(e,t){const n=e.pathSegments.get(0===t?1:0),i=o.default.tree.convertPointToCanvas(e,n);return u.Constraint.standard(i)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(1),o=n(130);t.singleSelectedStraightPath=function singleSelectedStraightPath(e){const t=e[0];if(1!==e.length||!o.isPathNode(t))return null;if(2!==t.pathSegments.count())return null;const n=t.pathSegments.get(0),r=t.pathSegments.get(1);return i.isStraightCurve(n,r)?t:null}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(2),r=n(6),s=n(10),a=n(4),l=n(75),c=n(1),d=n(3);class ShapeContainerOutlines extends i.Component{constructor(){super(...arguments),this.latestActiveShapeContainers=[]}static calculateState(){return{shapeContainerNodes:o.default.treeStore.shapeContainerNodes}}render(){const{shapeModeActive:e,tool:t,zoom:n}=this.props,{shapeContainerNodes:i}=this.state,r=o.default.tree,s=[],l=[];return i.forEach((i,o)=>{if(!i.cache.visible)return;if(!e&&r.getParent(i.id)!==a.NullID)return;const c=i.isSelected();if(e){let e=c;if(i.walk(t=>{e=e||t.isSelected()}),e){l.push(i.id);const e=focusRingForContainer(r,i,n,t,o);s.push(e)}}}),e?0===l.length?this.latestActiveShapeContainers.forEach((e,i)=>{const o=r.getNode(e);if(!o||!o.cache.visible||!a.isShapeContainerNode(o))return;const l=focusRingForContainer(r,o,n,t,i);s.push(l)}):this.latestActiveShapeContainers=l:this.latestActiveShapeContainers=[],s}}ShapeContainerOutlines.engineChangeKeys=r.EngineChangeFlags.ShapeContainerNodes;const u=s.default(ShapeContainerOutlines);function focusRingForContainer(e,t,n,o,r){const s=c.Rect.atOrigin(e.getRect(t,!1)),a=e.convertRectToCanvasWithRotation(t,s),u=c.Rect.multiply(a,n),h=`shape-edit-outline-${r}`;return t.cache.selected?i.createElement("noscript",{key:h}):i.createElement(l.default,{key:h,frame:u,rotation:a.rotation,backgroundColor:"transparent",border:`1px dashed ${d.theme.frameTitle}`,borderColor:d.theme.frameTitle,borderWidth:1})}t.ShapeContainerOutlines=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(10),r=n(5),s=n(763),a=n(2),l=n(6);class HUDTextEditor extends i.PureComponent{static calculateState(){a.default.canvasStore.assertInteractive();const e=a.default.toolStore.state.tool===r.Tools.TextEdit?a.default.tool:null;return{tree:a.default.tree,tool:a.default.toolStore.state.tool,selection:a.default.selection,eventSource:e?e.eventSource:"none"}}render(){a.default.canvasStore.assertInteractive();const{tree:e,tool:t,selection:n,eventSource:o}=this.state;if(t!==r.Tools.TextEdit)return null;const l=n[0],c=e.getNode(l);return c&&!1!==c.cache.isEditable?i.createElement(s.default,{tree:e,node:c,initialEventSource:o}):null}}HUDTextEditor.engineChangeKeys=l.EngineChangeFlags.Tree|l.EngineChangeFlags.Selection|l.EngineChangeFlags.Tool;const c=o.default(HUDTextEditor);t.HUDTextEditor=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(169),r=n(81),s=n(1),a=n(3),l=n(211),c=n(2),d=n(37),u=n(427),h=n(95),p=n(764),g=n(142),m=n(423),f=n(1),y=n(35);function defer(e){setTimeout(function(){o.unstable_batchedUpdates(e)})}class TextEditor extends i.Component{constructor(){super(...arguments),this._blurring=!1,this._gettingFocus=!1,this._grabbingFocus=!1,this._windowBlurred=!1,this._editor=null,this._element=null,this.setEditor=e=>{this._editor=e},this.setElement=e=>{this._element=e},this.blockRendererFn=e=>s.draftBlockRendererFunction({editable:!0,alignment:this.styledText.alignment()})(e),this.wantedActions=["sampleColor"],this.handleReturn=c.default.wrapHandler((e,t)=>e.metaKey?(c.default.exitTool(),"handled"):"not-handled"),this.onKeyDown=c.default.wrapHandler(e=>{this.isKeyboardChange=!0}),this.onMouseDown=c.default.wrapMouseHandler(e=>{m.canvasMouseTarget.handleMouseDown(e,"autoscroll"),e.stopPropagation()}),this.onCopy=e=>{u.handleCopy(this.editorState,e.clipboardData)&&e.preventDefault()},this.isKeyboardChange=!1,this.onChange=c.default.wrapAtomicHandler(e=>{const t=this.isKeyboardChange;this.isKeyboardChange=!1;let n=e;const i=n.getSelection();if(n=this.ensureBlockEmptyStyles(n),i.isCollapsed()&&((this._gettingFocus||this._grabbingFocus)&&(n=r.EditorState.setInlineStyleOverride(n,this.editorState.getInlineStyleOverride()),this._gettingFocus=!1),0===i.getAnchorOffset()&&!n.getInlineStyleOverride())){const e=n.getCurrentContent().getBlockForKey(i.getAnchorKey());0===e.getLength()&&(n=r.EditorState.setInlineStyleOverride(n,d.StyledTextDraft.getBlockEmptyStyle(e)))}let o;this._blurring&&(this._blurring=!1,o=r.Modifier.applyInlineStyle),i.getHasFocus()&&(o=r.Modifier.removeInlineStyle),!i.isCollapsed()&&o&&(n=r.EditorState.push(n,o(n.getCurrentContent(),i,"SELECTION"),"change-inline-style"));const{node:a,tree:l}=this.props,u=a.styledText.updateStyledText(n),h=l.getParentSize(a);if(a.autoSize){const e=u.calculateSize();c.default.updateNode(a.id,Object.assign({styledText:u},a.updateForSize(e,h,!1)))}else{const{width:e,height:t}=l.getRect(a);if(this.styledText.calculateSize(e).height===t&&a.heightType===s.DimensionType.FixedNumber){const t=u.calculateSize(e).height;c.default.updateNode(a.id,Object.assign({styledText:u},a.updateForSize({height:t},h)))}else c.default.updateNode(a.id,{styledText:u})}t&&c.default.runAtNextFrame(c.default.wrapHandler(this.scrollToVisible))}),this.ensureBlockEmptyStyles=e=>{const t=e.getCurrentContent(),n=d.StyledTextDraft.ensureBlockEmptyStyles(t);return t!==n?r.EditorState.set(e,{currentContent:n}):e},this.onFocus=()=>{this._gettingFocus=!0},this.onBlur=e=>{this.followFocus(e.nativeEvent)},this.handleKeyCommand=e=>{const t=r.RichUtils.handleKeyCommand(this.editorState,e);return t?(this.onChange(t),"handled"):"not-handled"},this.handlePastedText=(e,t,n)=>"not-handled",this.onEscape=c.default.wrapHandler(c.default.exitTool),this.onTab=e=>{e.preventDefault();const t=r.Modifier.replaceText(this.editorState.getCurrentContent(),this.editorState.getSelection(),"\t",this.editorState.getCurrentInlineStyle());return this.onChange(r.EditorState.push(this.editorState,t,"insert-characters")),!0},this.updateCursorColor=()=>{null!==this._element&&this._element.style.setProperty("--cursor-color",this.styledText.colors(!0).first())},this.scrollToVisible=()=>{if(!this._editor)return;const e=o.findDOMNode(this._editor);if(!(e&&e instanceof Element))return;let t=1;{let n=e;for(;n;){const e=parseFloat(getComputedStyle(n).zoom||"");if(f.isFiniteNumber(e)&&1!==e){t=e;break}n=n.parentElement}}let n,i=s.Rect.fromRect(e.getBoundingClientRect());i=s.Rect.multiply(i,t),i=c.default.canvasStore.convertContainerRectToCanvas(s.Rect.inset(i,-15));const r=window.getSelection();if(r&&r.rangeCount>0){const e=r.getRangeAt(0),i=e.collapsed?e.getClientRects()[0]:e.getBoundingClientRect();i&&(n=s.Rect.fromRect(i),n=s.Rect.multiply(n,t),n=c.default.canvasStore.convertContainerRectToCanvas(s.Rect.inset(n,-15)))}c.default.canvasStore.scrollToVisible(i,n)},this.onWindowBlur=()=>{this._windowBlurred=!0},this.onWindowFocus=()=>{this._windowBlurred=!1},this.followFocus=e=>{null===e.relatedTarget?!1===this._windowBlurred&&(null!==e.target&&e.target.removeEventListener("blur",this.followFocus),document.activeElement&&document.activeElement.getAttribute("data-keyboard")&&"true"===document.activeElement.getAttribute("data-focus-trap")?document.activeElement.addEventListener("blur",this.followFocus):this.focus()):(this._blurring=!0,null!==e.target&&e.target.removeEventListener("blur",this.followFocus),e.relatedTarget.addEventListener("blur",this.followFocus))}}get styledText(){return this.props.node.styledText}get editorState(){return this.styledText.styledText}focus(){defer(()=>{this._editor&&(this._grabbingFocus=!0,this._editor.focus(),this._grabbingFocus=!1)})}render(){const{node:e,tree:t}=this.props,n=t.convertRectToCanvasWithRotation(e),o={position:"absolute",transform:`translate(${n.x}px, ${n.y}px) rotate(${n.rotation.toFixed(4)}deg)`,transformOrigin:"0px 0px",width:`${n.width}px`,height:`${n.height}px`,opacity:e.opacity,wordWrap:"break-word",display:"inline-block"},l={position:"absolute",left:-screen.width,top:-screen.width,bottom:-screen.width,right:-screen.width,border:`${screen.width}px solid transparent`};if(e.shadows){const t=e.shadows.first();t&&t.enabled&&(o.textShadow=`${t.x}px ${t.y}px ${t.blur}px ${t.color}`)}(!e.autoSize||e.styledText.text.length>0)&&(o.outline=`1px solid ${a.theme.textEditorOutline}`);const u=this.styledText.alignment(),p=`textEditor ${e.autoSize?"textEditor--hasAutoSize":""}`.trim();return i.createElement("div",{id:`${e.id}-editor`,className:p,style:o,ref:this.setElement},i.createElement("div",{style:l},i.createElement("div",{style:{width:"100%",height:"100%"},onCopy:this.onCopy,onMouseDown:this.onMouseDown,onKeyDown:this.onKeyDown},i.createElement(h.ActionResponder,{engine:c.default,target:this},i.createElement(r.Editor,{ref:this.setEditor,editorState:this.editorState,textAlignment:u,stripPastedStyles:!0,onChange:this.onChange,onFocus:this.onFocus,onBlur:this.onBlur,customStyleFn:s.draftStyleFunction,blockRendererFn:this.blockRendererFn,blockRenderMap:d.draftBlockRenderMap,onEscape:this.onEscape,onTab:this.onTab,handleKeyCommand:this.handleKeyCommand,handlePastedText:this.handlePastedText,handleReturn:this.handleReturn,spellCheck:!0})))))}componentWillMount(){window.addEventListener("blur",this.onWindowBlur),window.addEventListener("focus",this.onWindowFocus)}componentDidMount(){this.focus(),this.updateCursorColor(),this.selectInitialText()}componentDidUpdate(){this.updateCursorColor()}componentWillUnmount(){let e=this.editorState;if(e.getCurrentContent().hasText()){const t=e.getSelection();!1===t.isCollapsed()&&(e=r.EditorState.push(e,r.Modifier.removeInlineStyle(e.getCurrentContent(),t,"SELECTION"),"change-inline-style")),e=r.EditorState.moveSelectionToEnd(e),this._blurring=!1,defer(()=>this.onChange(e));const n=new d.StyledTextDraft(e);c.default.documentSettings.setDefaultFont(n.fonts(!0).first()),c.default.documentSettings.setDefaultTextColor(n.colors(!0).first()),c.default.documentSettings.setDefaultTextSize(+n.sizes(!0).first()),c.default.documentSettings.setDefaultLetterSpacing(+n.letterSpacings(!0).first()),c.default.documentSettings.setDefaultLineHeight(+n.lineHeight())}window.removeEventListener("blur",this.onWindowBlur),window.removeEventListener("focus",this.onWindowFocus),this.clearEditorSelection()}clearEditorSelection(){if(!this._element)return;const e=window.getSelection();if(!e||e.rangeCount<=0)return;const t=e.getRangeAt(0);t.commonAncestorContainer&&this._element.contains(t.commonAncestorContainer)&&e.removeAllRanges()}sampleColor(){l.sampleColor().then(c.default.wrapHandler(e=>{if(!e)return;const t=this.props.node.styledText;c.default.updateNode(this.props.node.id,{styledText:d.StyledTextDraft.setColor(t,e,!0)})})).catch(y.unhandledError)}selectInitialText(){c.default.processWhenReady(()=>{const e=this.props.initialEventSource;switch(e){case"keyboard":this.selectAll();break;case"mouse":this.selectWordUnderCursor();break;case"none":break;default:g.default(e)}c.default.runAtNextFrame(c.default.wrapHandler(this.scrollToVisible))})}selectAll(){const e=p.selectAll(this.props.node.styledText.styledText),t=this.props.node.styledText.updateStyledText(e);c.default.updateNode(this.props.node.id,{styledText:t})}selectWordUnderCursor(){if(!this._editor)return;const e=o.findDOMNode(this._editor),t=c.default.mouse,n=c.default.canvasStore.convertCanvasPointToContainer(t),i=document.caretRangeFromPoint(n.x,n.y);if(i&&i.collapsed&&e&&i.intersectsNode(e)){const{node:e}=this.props,t=e.styledText.styledText,n=p.selectWordAtCaret(t,i),o=this.props.node.styledText.updateStyledText(n);c.default.updateNode(this.props.node.id,{styledText:o})}}}TextEditor.defaultProps={initialEventSource:"none"},t.default=TextEditor},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(23),o=n(81);function selectDOMRange(e,t){const n=t.commonAncestorContainer,i=n.nodeType===Node.ELEMENT_NODE?n:n.parentElement;if(!i)return e;const r=i.closest("[data-block]");if(!r)return e;const s=(r.dataset.offsetKey||"").split("-")[0];if(!s)return e;const a=document.createRange();a.setStart(r,0),a.setEnd(t.startContainer,t.startOffset);const l=a.toString().length;a.setEnd(t.endContainer,t.endOffset);const c=a.toString().length,d=new o.SelectionState(Object.assign({},e.getSelection().toJS(),{anchorKey:s,anchorOffset:l,focusKey:s,focusOffset:c}));return o.EditorState.forceSelection(e,d)}function rangeForSurroundingWord(e,t){const n=e.slice(0,t),i=e.slice(t);let o=t-(n.split(/\b/).pop()||"").length;const r=t+(i.split(/\b/).shift()||"").length,s=e.slice(o,r).split(/\b/);return s.length>1&&(o+=s[0].length),[o,r]}function findTextNode(e,t){const n=document.createTreeWalker(e,NodeFilter.SHOW_TEXT);let i=0;for(;n.nextNode();){const e=n.currentNode,o=e.textContent||"";if(i+o.length>=t)return{textNode:e,offset:t-i};i+=o.length}throw new RangeError("Unable to find text node at offset provided")}t.selectAll=function selectAll(e){const t=e.getCurrentContent(),n=new o.SelectionState(Object.assign({},e.getSelection().toJS(),{anchorKey:t.getFirstBlock().getKey(),anchorOffset:0,focusKey:t.getLastBlock().getKey(),focusOffset:t.getLastBlock().getLength()}));return o.EditorState.forceSelection(e,n)},t.selectWordAtCaret=function selectWordAtCaret(e,t){if("function"!=typeof t.expand){const n=selectDOMRange(e,t),r=n.getSelection(),s=function expandSelectionStateAroundWord(e,t){i(t.isCollapsed()),i(t.getStartKey()===e.getKey());const[n,r]=rangeForSurroundingWord(e.getText(),t.getStartOffset());return new o.SelectionState(Object.assign({},t.toJS(),{anchorOffset:n,focusOffset:r}))}(n.getCurrentContent().getBlockForKey(r.getStartKey()),r);return o.EditorState.forceSelection(n,s)}{const i=t.cloneRange();try{return i.expand("word"),selectDOMRange(e,i)}catch(n){return e}}},t.selectDOMRange=selectDOMRange,t.rangeForSurroundingWord=rangeForSurroundingWord,t.rangeFromSelection=function rangeFromSelection(e,t){const n=t.getAnchorKey(),i=t.getAnchorOffset(),o=e.querySelector(`[data-block][data-offset-key^=${n}]`),r=t.getFocusKey(),s=t.getFocusOffset(),a=e.querySelector(`[data-block][data-offset-key^=${r}]`);if(!o||!a)return null;const l=new Range;try{const{textNode:e,offset:t}=findTextNode(o,i),{textNode:n,offset:r}=findTextNode(a,s);l.setStart(e,t),l.setEnd(n,r)}catch(c){if(c instanceof RangeError)return null;throw c}return l}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(9),r=n(2),s=n(5),a=n(5),l=n(13),c=n(3),d=n(178);t.ZoomIndicator=class ZoomIndicator extends i.Component{constructor(){super(...arguments),this.timer=-1,this.state={scrollZoom:!1},this.zoomIn=r.default.wrapHandler(()=>{o.triggerCanvasZoomEvent({source:"indicator"}),r.default.canvasStore.zoomIn()}),this.zoomOut=r.default.wrapHandler(()=>{o.triggerCanvasZoomEvent({source:"indicator"}),r.default.canvasStore.zoomOut()}),this.onMouseDown=e=>{e.stopPropagation()}}componentWillReceiveProps(e){this.props.zoom!==e.zoom&&(r.default.canvasStore.liveAnimationTargetZoom||r.default.canvasStore.liveZoom)&&(clearTimeout(this.timer),this.setState({scrollZoom:!0}),this.timer=window.setTimeout(()=>{this.setState({scrollZoom:!1})},200))}render(){const{zoom:e,tool:t,leftPanelContent:n}=this.props,{scrollZoom:o}=this.state;if(n===a.LeftPanelContent.Marketplace||n===a.LeftPanelContent.Organization)return null;const l=t===s.Tools.Zoom||t===s.Tools.ZoomSelect;let c=p;return(l||o)&&(c+=" visible"),l&&(c+=" interactive"),r.default.chromeStore.state.chromeIsVisible||(c+=" no-chrome"),i.createElement("div",{key:"zoomIndicator",className:c,style:g(l),onMouseDown:this.onMouseDown},i.createElement("a",{className:m,style:f,onClick:this.zoomOut}),i.createElement("a",{className:m,style:y,onClick:this.zoomIn}),`${.125===e?12.5:Math.round(100*e)}%`)}};const u=Math.ceil(67.956),h=u+44+10,p="zoomIndicator",g=e=>{const t=e?h:u;return{width:t,marginLeft:-.5*t}};c.theme.addStyle(`.${p}`,{position:"absolute",bottom:`calc(${l.layout.chromeMarginBottom} + 3%)`,left:`calc(50% + 0.5*(${l.layout.chromeMarginLeft} - ${l.layout.chromeMarginRight}))`,height:42,color:"rgba(255, 255, 255, 0.9)",backgroundColor:"rgba(25, 25, 25, 0.7)",textAlign:"center",fontSize:13,lineHeight:"42px",cursor:"default",userSelect:"none",WebkitUserSelect:"none",pointerEvents:"none",opacity:0,transition:"opacity 0.2s, width 0.2s, margin-left 0.2s",transitionDelay:"0.8s, 0.1s, 0.1s",transitionTimingFunction:"ease-in-out",willChange:"transform",boxSizing:"border-box",WebkitClipPath:d.Squircle.clipPathWithRadius(21,3)}),c.theme.addStyle(`.${p}.visible`,{opacity:1,transitionDelay:"0s"}),c.theme.addStyle(`.${p}.interactive`,{pointerEvents:"auto",transitionTimingFunction:"cubic-bezier(0.07, 1.51, 0.85, 1)"}),c.theme.addStyle(`.${p}.no-chrome`,{left:"50%"});const m="zoomIndicatorButton",f={left:0,backgroundImage:c.theme.backgroundImage("icon-zoom-out"),backgroundPosition:"50%"},y={right:0,backgroundImage:c.theme.backgroundImage("icon-zoom-in"),backgroundPosition:"50%"};c.theme.addStyle(`.${m}`,{position:"absolute",top:0,width:22,height:22,backgroundRepeat:"no-repeat",backgroundPosition:"center 4px",borderRadius:"50%",margin:10,opacity:0,transform:"scale(0.01)",pointerEvents:"auto",transition:"transform 0.15s, opacity 0.1s",transitionTimingFunction:"ease-in-out"}),c.theme.addStyle(`.${p}.interactive .${m}`,{opacity:1,transform:"scale(1)"}),c.theme.addStyle(`.${m}`,{backgroundColor:"rgba(255, 255, 255, 0.05)",boxShadow:"0 1px 2px rgba(0, 0, 0, 0.05)"}),c.theme.addStyle(`.${m}:hover`,{opacity:1,backgroundColor:"rgba(255, 255, 255, 0.2)"}),c.theme.addStyle(`.${m}:active:hover`,{backgroundColor:"rgba(255, 255, 255, 0.5)"})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(10),r=n(2),s=n(6),a=n(443),l=n(769),c=n(137),d=n(168),u=n(138),h=n(282);class FeedbackSurfaceInternal extends i.PureComponent{constructor(){super(...arguments),this.lastPinPosition=null,this.handlePinMouseEnter=r.default.wrapHandler(e=>{const{threadId:t}=e.currentTarget.dataset;r.default.feedbackStore.threadIdUnderMouse=t}),this.handlePinMouseLeave=r.default.wrapHandler(()=>{r.default.feedbackStore.threadIdUnderMouse=void 0}),this.handlePinMouseDown=r.default.wrapHandler(e=>{const{threadId:t}=e.currentTarget.dataset,n=t&&r.default.feedbackStore.getThread(t);n&&(this.lastPinPosition=h.anchorToPoint(n.anchor))}),this.handlePinClick=r.default.wrapHandler(e=>{try{const{threadId:t}=e.currentTarget.dataset,n=t&&r.default.feedbackStore.getThread(t);if(!n)return;if(n&&this.lastPinPosition){const e=Math.abs(n.anchor.x-this.lastPinPosition.x),t=Math.abs(n.anchor.y-this.lastPinPosition.y);if(e||t)return}r.default.feedbackStore.setSelectedThread(n.id)}finally{this.lastPinPosition=null}}),this.handleSubmitComment=r.default.wrapHandler(e=>{const{selectedThreadId:t}=this.state;t&&r.default.feedbackStore.createComment({threadId:t,text:e}).catch(()=>{})}),this.handleCancelComment=r.default.wrapHandler(()=>{const{selectedThreadId:e}=this.state;e&&r.default.feedbackStore.deleteThread(e).catch(()=>{})})}static calculateState(){r.default.canvasStore.assertInteractive();const{threads:e,archivedThreads:t,isActive:n,selectedThread:i,selectionState:o,threadIdUnderMouse:s}=r.default.feedbackStore;return{isActive:n,threads:o.tab===c.Tab.Archived?t:e,selectedThreadId:o.threadId,threadIdUnderMouse:s||null,selectedThreadPosition:i?h.anchorToPoint(i.anchor):null}}handleMountCommentForm(e){e&&e.focus()}handleCommentFormClick(e){e.stopPropagation()}renderCommentForm(){const{selectedThreadId:e,selectedThreadPosition:t}=this.state;if(!e||!t)return null;if(!r.default.feedbackStore.isTransientThread(e))return null;const n=getZoomPoint(t);return i.createElement("div",{onMouseDown:this.handleCommentFormClick,style:{position:"absolute",transform:`translateY(${n.y}) translateX(${n.x})`}},i.createElement("div",{style:{position:"absolute",bottom:0,left:0,width:315}},i.createElement(a.FloatingFeedbackCommentForm,{ref:this.handleMountCommentForm,onSubmit:this.handleSubmitComment,onCancel:this.handleCancelComment})))}renderPin(e,t){const n=getZoomPoint(e.anchor),o=r.default.feedbackStore.isTransientThread(e.id),s=o&&r.default.feedbackStore.currentUser?u.colorFromId(r.default.feedbackStore.currentUser.id):d.colorFromThread(e);return i.createElement("div",{className:"commentPin",style:{position:"absolute"},key:e.id,"data-thread-id":e.id,onClick:this.handlePinClick,onMouseDown:this.handlePinMouseDown,onMouseEnter:this.handlePinMouseEnter,onMouseLeave:this.handlePinMouseLeave},i.createElement(l.FeedbackPin,{id:e.id,key:e.id,point:n,color:s,isFlipped:o,isSelected:!!this.state.selectedThreadId&&this.state.selectedThreadId===e.id,isAnySelected:null!==this.state.selectedThreadId,threadIndex:t}))}render(){r.default.canvasStore.assertInteractive();const{threads:e,isActive:t}=this.state;return t?i.createElement("div",{className:"__framer-chrome",style:{cursor:"initial","--framerInternalCanvas-zoom":`${this.props.zoom}`}},e.map(this.renderPin,this),this.renderCommentForm()):null}}function getZoomPoint(e){return{x:`calc(${e.x}px * var(--framerInternalCanvas-zoom, 1))`,y:`calc(${e.y}px * var(--framerInternalCanvas-zoom, 1))`}}FeedbackSurfaceInternal.engineChangeKeys=s.EngineChangeFlags.FeedbackStore|s.EngineChangeFlags.Tool,t.FeedbackSurface=o.default(FeedbackSurfaceInternal)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.container="container_cq6gcc8",t.submit="submit_s2ihc83",t.textarea="textarea_t1hq99n8",t.editing="editing_e1qh101v",t.floating="floating_fsgq3xe",n(768)},function(e,t,n){},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(0),r=n(78),s=n(770),a=n(65),l=()=>{};t.FeedbackPin=function FeedbackPin({id:e,color:t,point:n,isFlipped:c=!1,onClick:d=l,isSelected:u,isAnySelected:h,threadIndex:p}){const[g,m]=i.useState(!1),[f,y]=i.useState(c?"introWithoutDelay":"intro"),[v]=i.useState(n),b=o.useCallback(()=>d(e),[e,d]),k=function createPinAnimations(e){return{active:{scale:1,rotate:-45,opacity:1},inactive:{scale:.6,rotate:0,opacity:.3},hoverStart:{scale:1.2},hoverEnd:{scale:1},intro:{scale:1,rotate:0,opacity:1,transition:{delay:.005*e}},introWithoutDelay:{scale:1,rotate:0,opacity:1},outro:{scale:0,rotate:45,opacity:0}}}(p);return i.useEffect(()=>(h&&!c&&y(u?"active":"inactive"),h&&m(!0),!h&&g&&y("introWithoutDelay"),()=>{}),[h,u,c,g]),i.createElement(a.motion.div,{key:n.x,variants:k,initial:function handleInitial(){return v===n?"outro":u&&!c?"active":"introWithoutDelay"}(),animate:f,className:s.container,style:{"--feedback-pin-color":t,y:n.y,x:n.x},onHoverStart:function handleHoverStart(){c||u||y("hoverStart")},onHoverEnd:function handleHoverEnd(){c||y(h&&!u?"inactive":"hoverEnd")}},i.createElement("button",{className:r.cx(s.pin,c&&s.isFlipped),onClick:b}))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.container="container_c1434qa7",t.pin="pin_pfifbr6",t.isFlipped="isFlipped_iu918rl",t.counter="counter_cjyamnc",n(771)},function(e,t,n){},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(1),r=n(24),s=n(9),a=n(28),l=n(94),c=n(13),d=n(2),u=n(15),h=n(14),p=n(288),g=n(4),m=n(196),f=n(12),y=n(444),v=n(43),b=n(46),k=n(22),S=d.default.wrapHandler(e=>{const t=e.dataTransfer.getData(p.DraggableComponentDataType),{component:n,packageIdentifier:i,ignoreOffset:o}=t;if(!n)return;const r=d.default.canvasStore.convertContainerPointToCanvas(e.client),s=getReplaceableNode(r,e.metaKey);s?v.ContextAction.replaceWith(d.default,s,n):insertComponent({vekterEngine:d.default,component:n,packageIdentifier:i,mousePoint:r,offset:o?void 0:e.centerOfGravityOffset})}),C=d.default.wrapHandler(e=>{const t=e.dataTransfer.getData(p.DraggableComponentDataType),{component:n,ignoreOffset:i}=t;if(!n)return;const o=d.default.canvasStore.convertContainerPointToCanvas(e.client),r=getReplaceableNode(o,e.metaKey);if(r)d.default.setHighlight(r.id),e.dataTransfer.dropEffectCursor=b.swapCursor();else{const t=i?void 0:e.centerOfGravityOffset,{parent:r}=insertionParentAndRect(d.default,n,o,t);d.default.setHighlight(r?r.id:null)}}),x=d.default.wrapHandler(()=>{d.default.setHighlight(null)}),w=d.default.wrapHandler(e=>{if(!e.dataTransfer)return;[...e.dataTransfer.files].forEach(t=>{if(!(t.type.startsWith("image/")||t.name.endsWith("webp")))return;const n=new FileReader,i={x:e.x,y:e.y},o=d.default.canvasStore.convertContainerPointToCanvas(i);n.onloadend=()=>{u.getIpcRenderer().send(h.DocumentReceivedImage,{file:n.result,originalFilename:t.name,mousePoint:o})},n.readAsDataURL(t)})}),T={position:"absolute",top:c.layout.chromeMarginTop,right:c.layout.chromeMarginRight,bottom:c.layout.chromeMarginBottom,left:c.layout.chromeMarginLeft};function insertionParentAndRect(e,t,n,i){const{width:r,height:s}=e.tree.getRect(t);let a={x:n.x-r/2,y:n.y-s/2};i&&(a=o.Point.add(a,o.Point.divide(i,e.zoom)));const l=Object.assign({},a,{width:r,height:s}),{tree:c}=e;let d=c.getPotentialParents(Object.assign({},n,{width:1,height:1}),n,t);return{parent:(d=c.sortVisually(d).reverse()).length>0?d[0]:null,rect:l}}function getReplaceableNode(e,t){if(!a.experiments.isOn("replaceWith"))return null;let n;return n=t?d.default.tree.getNodesAtPoint(e).filter(v.ContextAction.canReplaceWith):d.default.tree.getNodesAtPoint(e).filter(e=>{if(k.isStackComponent(e))return!1;return(g.isCodeComponentNode(e)||f.isReplica(e))&&v.ContextAction.canReplaceWith(e)}),d.default.tree.getTopMostChildNode(n)}function insertComponent({vekterEngine:e,component:t,mousePoint:n,offset:i,packageIdentifier:o}){if(o&&d.default.serverStore.removeFromRecentlyInstalledPackages(o),function sendMetrics(e,t){g.isCodeComponentNode(e)?e.codeComponentIdentifier.startsWith(".")||sendStoreUseInstanceMetric(t,!0):f.isExternalMaster(e)?sendStoreUseInstanceMetric(t,!1):s.triggerComponentDesignInstanceEvent({})}(t,o),f.isMaster(t)){const n=e.tree.get(t.id);n?e.tree.hasNode(t)||(t=n):t=m.insertExternalMasterInDocument(e,t,r.componentLoader)}const a=e.cloneNode(t);e.moveNode(a.id,null);const{parent:l,rect:c}=insertionParentAndRect(e,t,n,i);let u;if(l){const{width:t,height:n}=c;u=Object.assign({},e.tree.convertFrameToNode(l,c),{width:t,height:n})}else u=c;e.updateNode(a.id,a.updateForRect(u,null)),l&&e.moveNode(a.id,l.id),e.setSelection([a.id])}function sendStoreUseInstanceMetric(e=null,t){if(!e)return;const n=d.default.serverStore.packagesInfo[e];let i="not_processed";null===n&&(i="no_store_info"),n&&(i=!0===n.private?"private":"public"),s.triggerStoreUseInstalledEvent({store:i,packageName:e,isCodeComponent:t})}t.CanvasDropZone=i.memo(()=>{const e=l.useDroppable({dataTypes:[p.DraggableComponentDataType],onDrop:S,onDragOver:C,onDragLeave:x,dropEffect:"copy"});return i.createElement(y.FileDropZone,{ref:e,onDrop:w,style:T})}),t.insertComponent=insertComponent},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(7),r=n(10),s=n(2),a=n(6),l=n(58),c=n(101),d=n(774),u=n(775),h=n(13),p=n(82),g=n(3),m=n(85),f=n(1),y=n(11),v=n(32);class RulerWrapper extends i.PureComponent{constructor(){super(...arguments),this.getSelectionPositions=()=>{const{selection:e}=this.state,t={x:[],y:[]};return e.forEach(e=>{const n=s.default.tree.getNode(e);if(!n)return;const i=s.default.tree.convertFrameToCanvas(n),{x:o,y:r}=y.roundedPoint({x:i.x,y:i.y},v.PointRounding.Half),{x:a,y:l}=y.roundedPoint({x:i.x+i.width,y:i.y+i.height},v.PointRounding.Half);t.x.push({start:o,end:a}),t.y.push({start:r,end:l})}),{x:b(t.x),y:b(t.y)}},this.getDisplayGuideValues=e=>{const{snapLinesX:t,snapLinesY:n,highlightedGuide:i,selectedGuide:r,ghostGuide:a}=this.state,l="x"===e?t:n;let d=o.Set();if(l&&!l.isEmpty())return{type:"snapLine",values:l};if(i&&i.axis===e){const e=c.getGuideAbsoluteOffset(s.default.tree,i);f.isFiniteNumber(e)&&(d=d.add(e))}if(r&&r.axis===e){const e=c.getGuideAbsoluteOffset(s.default.tree,r);f.isFiniteNumber(e)&&(d=d.add(e))}if(a&&a.axis===e){const e=c.getGuideAbsoluteOffset(s.default.tree,a);f.isFiniteNumber(e)&&(d=d.add(e))}return{type:"guide",values:d}},this.getLineRange=(e,t,n)=>{if(m.isRootNode(t))return{rangeStart:void 0,rangeLength:void 0};const i=e.convertFrameToCanvas(t);return"x"===n?{rangeStart:i.y,rangeLength:i.height}:{rangeStart:i.x,rangeLength:i.width}},this.isSnapLine=(e,t)=>{const{snapLinesX:n,snapLinesY:i}=this.state,o="x"===e?n:i;return!!o&&o.has(t)},this.isVisible=(e,t)=>!this.isSnapLine(e,t),this.shouldHighlight=e=>{const{highlightedGuide:t,selectedGuide:n,tool:i}=this.state;if(i===l.Tools.Guide)return!1;const o=!!t&&c.isEqualGuide(e,t),r=!!n&&c.isEqualGuide(e,n);return o||r},this.renderRulers=()=>{const{zoom:e,start:t,enabled:n,canvasWidth:o,canvasHeight:r,activeTheme:s,tool:a}=this.state;if(!n)return null;const c=this.getSelectionPositions(),d=a===l.Tools.Path;return i.createElement(i.Fragment,null,i.createElement("div",{style:C},"."),i.createElement(u.Ruler,{key:"ruler-x",activeTheme:s,axis:"x",start:t.x,zoom:e,length:o,highlight:c.x,displayGuides:this.getDisplayGuideValues("x"),pathEditModeActive:d}),i.createElement(u.Ruler,{key:"ruler-y",activeTheme:s,axis:"y",start:t.y,zoom:e,length:r,highlight:c.y,displayGuides:this.getDisplayGuideValues("y"),pathEditModeActive:d}))},this.renderGuides=()=>{const{enabled:e,zoom:t,start:n,canvasWidth:o,canvasHeight:r}=this.state;if(!e)return null;const{tree:a}=s.default,{root:l}=s.default.tree,{guidesX:d,guidesY:u}=l,h=a.getGroundNodes().filter(e=>{if(!c.isValidGuideNode(e))return!1;const t=a.convertFrameToCanvas(e),n=s.default.canvasStore.getCanvasVisibleRect(),{selectedGuide:i}=s.default.toolStore.state,o=i&&e.id===i.nodeId;return p.Rect.intersects(t,n)||o});return i.createElement(i.Fragment,null,this.renderLines("guide",l,"x",d,t,n,r),this.renderLines("guide",l,"y",u,t,n,o),h.map(e=>i.createElement(i.Fragment,{key:`guide-${e.id}`},this.renderLines("guide",e,"x",e.guidesX,t,n,r),this.renderLines("guide",e,"y",e.guidesY,t,n,o))))},this.renderSnapLines=()=>{const{zoom:e,start:t,snapLinesX:n,snapLinesY:o,canvasHeight:r,canvasWidth:a}=this.state,{root:l}=s.default.tree,{ghostGuide:d}=s.default.toolStore.state;let u=l;if(d&&d.nodeId){const e=s.default.getNode(d.nodeId);u=e&&c.isValidGuideNode(e)?e:l}return i.createElement(i.Fragment,null,this.renderLines("snapLine",u,"x",n,e,t,r),this.renderLines("snapLine",u,"y",o,e,t,a))},this.getGuideInset=()=>this.state.enabled?h.layout.rulerWidth-h.layout.rulerTickLength:0,this.renderLines=(e,t,n,o,r,a,l)=>{if(!t||!o||o.isEmpty())return null;const{ghostGuide:u}=s.default.toolStore.state;let p=this.getLineRange(s.default.tree,t,n);const g=this.getGuideInset();return"guide"===e&&c.isValidGuideNode(t)?o.map(o=>{const m={nodeId:t.id,axis:n,offset:o},f=this.shouldHighlight(m);if(!c.isGuideInFrameRect(s.default.tree,t,m)){if(!f)return null;p=Object.assign({},p,{rangeLength:0})}const y=this.isVisible(n,o)&&!(u&&c.isEqualGuide(m,u)),v=c.getAbsoluteOffset(s.default.tree,t,n,o);return y?i.createElement(d.Guide,{key:`${e}-${n}-${o}`,highlight:f,type:e,axis:n,position:v,zoom:r,canvasStartX:a.x,canvasStartY:a.y,inset:g,rulerWidth:h.layout.rulerWidth,tickLength:h.layout.rulerTickLength,length:l,rangeStart:p.rangeStart,rangeLength:p.rangeLength}):null}):o.map(t=>i.createElement(d.Guide,{key:`${e}-${n}-${t}`,type:e,axis:n,position:t,zoom:r,canvasStartX:a.x,canvasStartY:a.y,inset:g,rulerWidth:h.layout.rulerWidth,tickLength:h.layout.rulerTickLength,length:l,rangeStart:p.rangeStart,rangeLength:p.rangeLength}))},this.renderGhostGuide=()=>{const{ghostGuide:e,zoom:t,start:n,canvasHeight:o,canvasWidth:r}=this.state;if(!e)return null;const{nodeId:a,axis:l,offset:u}=e;if(!a)return null;const p=s.default.tree.getNode(a)||s.default.tree.root,g=c.getAbsoluteOffset(s.default.tree,p,l,u);if(!this.isVisible(l,g))return null;let m=this.getLineRange(s.default.tree,p,l);const f="x"===l?o:r;return c.isGuideInFrameRect(s.default.tree,p,e)||(m=Object.assign({},m,{rangeLength:0})),i.createElement(d.Guide,{key:"guide-ghost",type:"guide",highlight:!0,axis:l,position:g,zoom:t,canvasStartX:n.x,canvasStartY:n.y,inset:this.getGuideInset(),rulerWidth:h.layout.rulerWidth,tickLength:h.layout.rulerTickLength,length:f,rangeStart:m.rangeStart,rangeLength:m.rangeLength})}}static calculateState(){const{zoom:e}=s.default.canvasStore,{displayRulers:t}=s.default.persistedUserDefaults,{selection:n}=s.default,{snapLinesX:i,snapLinesY:o,tool:r,selectedGuide:a,highlightedGuide:l,ghostGuide:c}=s.default.toolStore.state,d=s.default.canvasStore.getCanvasVisibleRect();return{enabled:t,zoom:e,selection:n,canvasWidth:d.width,canvasHeight:d.height,start:{x:d.x,y:d.y},tool:r,selectedGuide:a,highlightedGuide:l,ghostGuide:c,snapLinesX:i,snapLinesY:o,activeTheme:g.theme.activeTheme}}render(){return i.createElement("div",{style:S},this.renderRulers(),this.renderGuides(),this.renderGhostGuide(),this.renderSnapLines())}}RulerWrapper.engineChangeKeys=a.EngineChangeFlags.TreeStore|a.EngineChangeFlags.ToolStore|a.EngineChangeFlags.CanvasLiveTransform|a.EngineChangeFlags.UserDefaultsStore|a.EngineChangeFlags.DocumentSettings|a.EngineChangeFlags.ChromeStore|a.EngineChangeFlags.Rulers;const b=e=>{const t=[];let n;return e.sort(k),e.forEach(function(e){!n||e.start>n.end||e.end<n.start?(n=e,t.push(n)):e.end>n.end?n.end=e.end:e.start<n.start&&(n.start=e.start)}),t},k=(e,t)=>e.start<t.start?-1:e.start>t.start?1:0,S=Object.assign({pointerEvents:"none"},h.layout.canvasRectStyle),C={position:"relative",width:`${h.layout.rulerWidth}px`,height:`${h.layout.rulerWidth}px`,textIndent:"99px",overflow:"hidden",borderWidth:"0 1px 1px 0",borderColor:g.theme.rulerBorderColor,borderStyle:"solid",backgroundColor:g.theme.rulerBackground,zIndex:2},x=r.default(RulerWrapper);t.RulerWrapper=x},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(3),r=n(1),s=2,a=5,l=5;t.Guide=class Guide extends i.PureComponent{constructor(){super(...arguments),this.renderLine=()=>{const{type:e,axis:t,zoom:n,length:o,rangeStart:c,rangeLength:d,canvasStartX:u,canvasStartY:h,highlight:p,tickLength:g}=this.props,m="y"===t,f=o*n,y=this.pickStrokeColor();if(!r.isFiniteNumber(c)||!r.isFiniteNumber(d)){const e=m?f:0,t=m?0:f;return i.createElement("line",{x1:"0",y1:"0",x2:e,y2:t,strokeWidth:s,stroke:y})}const v=this.withInset()?this.props.inset:0,b=m?u:h,k=(c-b)*n-v,S=(c+d-b)*n-v,C=m?g:0,x=m?0:g,w=m?k:0,T=m?0:k,P=m?S:0,E=m?0:S,F=m?f:0,M=m?0:f,_=p||"snapLine"===e,O=0===d?Math.floor(l/2):l;return i.createElement(i.Fragment,null,_&&i.createElement("line",{x1:"0",y1:"0",x2:C,y2:x,strokeWidth:s,stroke:y}),_&&i.createElement("line",{x1:w,y1:T,x2:C,y2:x,strokeWidth:s,stroke:y,strokeDasharray:a,strokeDashoffset:O}),i.createElement("line",{x1:w,y1:T,x2:P,y2:E,strokeWidth:s,stroke:y}),_&&i.createElement("line",{x1:P,y1:E,x2:F,y2:M,strokeWidth:s,stroke:y,strokeDasharray:a,strokeDashoffset:O}))},this.pickGuideStyles=(e,t)=>{const n="y"===e,i=this.withInset();return Object.assign({position:"absolute",left:n&&i?`${this.props.inset}px`:0,top:!n&&i?`${this.props.inset}px`:0,transform:n?`translateY(${t-.5}px)`:`translateX(${t-.5}px)`,willChange:"transform"},n?{right:0,height:"1px"}:{bottom:0,width:"1px"})},this.pickStrokeColor=()=>{const{highlight:e,type:t}=this.props;return"snapLine"===t?o.theme.snapLine:e?o.theme.guideHighlightColor:o.theme.guideColor},this.withInset=()=>this.props.highlight||"snapLine"===this.props.type}render(){const{axis:e,position:t,zoom:n,canvasStartX:o,canvasStartY:r,rulerWidth:s,type:a,length:l}=this.props,c="y"===e,d=(t-(c?r:o))*n;if(d<s)return null;const u=this.pickGuideStyles(e,d),h=l*n,p=this.withInset()?this.props.inset:0,g=c?h-p:2,m=c?2:h-p;return i.createElement("div",{className:"snapLine"===a?"fadeIn":"",style:u},i.createElement("svg",{viewBox:`0 0 ${g} ${m}`,width:g,height:m,style:{display:"block"}},this.renderLine()))}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(7),r=n(13),s=n(1),a=n(3),l=1,c='200 10px system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI"',{rulerWidth:d,rulerTickLength:u}=r.layout;t.Ruler=class Ruler extends i.Component{constructor(){super(...arguments),this.updateCanvasSize=()=>{if(!this.ctx)return;const e=this.ctx,{canvas:t}=e;if(!t)return;const n=this.getDevicePixelRatio();if("x"===this.props.axis){const e=r.layout.chromeIsVisible?window.innerWidth-r.layout.currentChromeMarginLeft-r.layout.currentChromeMarginRight:window.innerWidth;t.width=e*n,t.height=d*n}else{const e=window.innerHeight-r.layout.currentCanvasMarginTop-r.layout.currentChromeMarginBottom;t.width=d*n,t.height=e*n}e.scale(n,n),e.lineWidth=l,e.font=c,e.textAlign="center"},this.getDevicePixelRatio=()=>window.devicePixelRatio||1,this.renderRuler=()=>{if(!this.ctx)return;const{canvas:e}=this.ctx;this.ctx.clearRect(0,0,e.width,e.height),this.drawRuler(this.ctx)},this.drawRuler=e=>{this.drawAxis(e),this.drawTicks(e),this.drawHighlight(e),this.drawGuideValues(e)},this.drawAxis=e=>{const{axis:t}=this.props,{rulerWidth:n}=r.layout;let i,o,s,l;e.strokeStyle=a.theme.activeTheme.rulerBorderColor,e.beginPath(),"x"===t?(i=0,o=n-.5,s=e.canvas.width,l=n-.5):(i=n-.5,o=0,s=n-.5,l=e.canvas.height),e.moveTo(i,o),e.lineTo(s,l),e.stroke(),e.closePath()},this.drawTicks=e=>{const{start:t,length:n,zoom:i,axis:o}=this.props,{rulerWidth:s,rulerTickLength:l}=r.layout,c=t+n,d=h(i),u=Math.ceil(t/d)*d,p=Math.floor(c/d)*d,g=Math.abs(u-t),m=[];e.save(),e.beginPath(),e.strokeStyle=a.theme.activeTheme.rulerBorderColor,e.fillStyle=a.theme.activeTheme.rulerTextColor;for(let r=u,a=0;r<=p;r+=d,a++){const t=(g+d*a)*i,n=Math.min(this.getDistToNearestHighlight(r),this.getDistToNearestDisplayGuide(r)),c=this.getAlphaByDist(n);this.checkIsInHighlight(r)||c<1?m.push({pos:t,value:r,alpha:c}):"x"===o?this.drawHorizontalTick(e,t,s,t,s-l,r):this.drawVerticalTick(e,s,t,s-l,t,r)}e.stroke(),m.forEach(t=>{e.beginPath();const{pos:n,value:i,alpha:r}=t,c=this.checkIsInHighlight(i)?a.theme.activeTheme.guideHighlightColor:a.theme.activeTheme.rulerTextColor,d=this.checkIsInHighlight(i)?a.theme.activeTheme.guideHighlightColor:a.theme.activeTheme.rulerBorderColor;e.strokeStyle=d,e.fillStyle=c,e.globalAlpha=r,"x"===o?this.drawHorizontalTick(e,n,s,n,s-l,i):this.drawVerticalTick(e,s,n,s-l,n,i),e.stroke()}),e.restore()},this.drawHighlight=e=>{const{start:t,highlight:n,axis:i,zoom:s,displayGuides:l}=this.props,{rulerWidth:c}=r.layout;let d=o.Set();n.forEach(n=>{const o=(n.start-t)*s,r=(n.end-t)*s,u=(n.end-n.start)*s;e.fillStyle=a.theme.activeTheme.guideHighlightColor,e.globalAlpha=.1,"x"===i?e.fillRect(o,0,u,c):e.fillRect(0,o,c,u),e.globalAlpha=1,e.strokeStyle=a.theme.activeTheme.guideHighlightColor,e.beginPath(),"x"===i?(e.moveTo(o,c-.5),e.lineTo(r,c-.5)):(e.moveTo(c-.5,o),e.lineTo(c-.5,r)),e.stroke(),e.closePath(),l&&l.values.has(n.start)||(d=d.add(n.start)),l&&l.values.has(n.end)||(d=d.add(n.end))}),this.drawHighlightTicks(e,d)},this.drawHighlightTicks=(e,t)=>{if(t.isEmpty())return;const{zoom:n,axis:i,start:o,pathEditModeActive:l}=this.props,{rulerWidth:c,rulerTickLength:d}=r.layout;e.fillStyle=a.theme.activeTheme.guideHighlightColor,e.strokeStyle=a.theme.activeTheme.guideHighlightColor;let u=1/0;t.forEach(t=>{const r=(t-o)*n;e.beginPath(),"x"===i?(e.moveTo(r,c),e.lineTo(r,c-d)):(e.moveTo(c,r),e.lineTo(c-d,r)),e.stroke(),e.closePath();const a=Math.abs(u-t)*n,h=this.getDistToNearestDisplayGuide(t),p=Math.min(a,h),g=this.getAlphaByDist(p);e.globalAlpha=g;const m=l?t:s.roundedNumber(t,0);"x"===i?e.fillText(m.toString(),r,c-d-3):(e.save(),e.translate(c-.5,r),e.rotate(-Math.PI/2),e.fillText(m.toString(),0,-d-3),e.restore()),g>.3&&(u=t),e.globalAlpha=1})},this.checkIsInHighlight=e=>{const{highlight:t}=this.props;return t.some(t=>e>=t.start&&e<=t.end)},this.getDistToNearestHighlight=e=>{const{highlight:t,zoom:n}=this.props;let i=1/0;return t.forEach(t=>{const n=Math.min(Math.abs(t.start-e),Math.abs(t.end-e));n<i&&(i=n)}),i*=n},this.getDistToNearestDisplayGuide=e=>{const{displayGuides:t,zoom:n}=this.props;let i=1/0;return t&&t.values.forEach(t=>{i=Math.min(Math.abs(t-e),i)}),i*=n},this.getAlphaByDist=e=>{const t=r.layout.rulerMaskWidth;return e<t/2?0:e<t?-4/Math.pow(t,2)*Math.pow(e,2)+8/t*e-3:1},this.drawHorizontalTick=(e,t,n,i,o,r)=>{e.moveTo(t,n),e.lineTo(i,o),e.fillText(r.toString(),i,o-3)},this.drawVerticalTick=(e,t,n,i,o,r)=>{e.moveTo(t,n),e.lineTo(i,o),e.save(),e.translate(i,o),e.rotate(-Math.PI/2),e.fillText(r.toString(),0,-3),e.restore()},this.drawGuideValues=e=>{const{start:t,zoom:n,axis:i,displayGuides:o,pathEditModeActive:r}=this.props;o&&!o.values.isEmpty()&&(e.fillStyle="guide"===o.type?a.theme.activeTheme.guideHighlightColor:a.theme.activeTheme.snapLine,o.values.forEach(o=>{const a=(o-t)*n;if(a<d)return;const l=r?o:s.roundedNumber(o,0);"y"===i?(e.save(),e.translate(d-u,a),e.rotate(-Math.PI/2),e.fillText(l.toString(),0,-3),e.restore()):e.fillText(l.toString(),a,d-u-3)}))},this.saveCanvasContext=e=>{e&&(this.ctx=e.getContext("2d"))}}componentDidMount(){this.updateCanvasSize(),this.renderRuler()}shouldComponentUpdate(e){return!s.isEqual(e,this.props)}componentDidUpdate(e){e.length!==this.props.length&&this.updateCanvasSize(),this.renderRuler()}render(){const{axis:e}=this.props,t="x"===e?Object.assign({},g,{height:`${d}px`}):Object.assign({},m,{width:`${d}px`}),n="x"===e?{width:"100%"}:{height:"100%"};return i.createElement("div",{style:Object.assign({},p,t)},i.createElement("canvas",{ref:this.saveCanvasContext,style:n}))}};const h=e=>e<=.2?500:e<=.5?250:e<=1?100:e<=2?50:e<=3?25:e<=4?20:10,p={position:"absolute",top:"0",left:"0",overflow:"hidden",backgroundColor:a.theme.rulerBackground,pointerEvents:"auto"},g={width:"100%",right:"0"},m={height:"100%",bottom:"0"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(777).setupRenderHost();t.IframeRenderer=function IframeRenderer({opacity:e=1}){return i.createElement("iframe",{key:"canvasIframe",id:"canvasIframe",src:o,width:"100%",height:"100%",style:Object.assign({},r,{opacity:e})})};const r={border:"none",position:"absolute",top:0,left:0,bottom:0,right:0,background:"transparent"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(82),o=n(242),r=n(58),s=n(778),a=n(6),l=n(109),c=n(157),d=n(779),u=c.isDebugBuild?"./iframe-renderer.debug.html":"./iframe-renderer.html",h=a.EngineChangeFlags.Tree|a.EngineChangeFlags.Selection|a.EngineChangeFlags.CanvasStore|a.EngineChangeFlags.ToolStore|a.EngineChangeFlags.CanvasLiveTransform|a.EngineChangeFlags.CanvasZoom|a.EngineChangeFlags.ChromeStore;let p=null;function initGlobalRenderHost(e,t){const n=o.VekterEngine.shared();p&&n.changes.removeObserver(p.update),p=new RenderHost(e,t,n),n.changes.observe(h,p.update),p.update()}function hostMessageEventHandler(e){const t=e.source,n=e.data;t&&n&&d.isRendererInit(n)&&initGlobalRenderHost(!1,e=>{t.postMessage(e,"*")})}t.setupRenderHost=function setupRenderHost(){return window.addEventListener("message",hostMessageEventHandler),window.initRenderHost=e=>{initGlobalRenderHost(!0,t=>{e(t)})},u};class RenderHost{constructor(e,t,n){this.isJStoJS=e,this.postUpdate=t,this.engine=n,this.previousTree=null,this.previousMessage=null,this.update=()=>{const e=this.engine,t=e.canvasStore.zoom,{x:n,y:o}=e.canvasStore.offset,a=e.canvasStore.isInteractive,c=e.tool.enum===r.Tools.Move,d={type:"RendererUpdate",zoom:t,offsetX:n,offsetY:o,isInteractive:a,inMoveTool:c},u=e.serverStore.imageBaseURL;u&&u!==this.previousUrl&&(this.previousUrl=u,d.imageBaseURL=u.toString());const h=e.canvasStore.userScriptBundle;h&&h!==this.previousScriptBundle&&(this.previousScriptBundle=h,d.scriptBundle=h);const p=i.CanvasStore.shared().canvas;p&&p!==this.previousCanvasData&&(this.previousCanvasData=p,d.canvasData=this.isJStoJS?JSON.stringify(p):JSON.parse(JSON.stringify(p)));const g=e.tree,m=this.previousTree;if(this.previousTree=g,m&&m.root.id===g.root.id){const{changes:e,placeholder:t}=s.createTreeChanges(m,g);e.length>0&&(d.changes=this.encode(e)),d.placeholder=t}else d.tree=this.encode(g.toJS());const f=e.selection;c&&f!==this.previousSelection&&(this.previousSelection=f,d.selection=f),this.previousMessage&&l.default(d,this.previousMessage)||(this.previousMessage=d,this.postUpdate(d))}}encode(e){return this.isJStoJS?JSON.stringify(e):e}}},function(e,t,n){"use strict";var i=this&&this.__rest||function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(i=Object.getOwnPropertySymbols(e);o<i.length;o++)t.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(e,i[o])&&(n[i[o]]=e[i[o]])}return n};Object.defineProperty(t,"__esModule",{value:!0});const o=n(87),r=n(37),s=n(199),a=n(12),l=n(48),c=n(56),d=n(188),u=n(22);function addNode(e,t,n,o){const d=s.classMap[n];if(!d)throw new Error("Unknown node class: "+n);const u=o.replicaInfo;if(u){const n=e.get(u.master);if(!n||!a.isMaster(n))throw Error("boken diff, replica without master: "+t+" "+u.master);const i=l.reviveReplicaInfo(u),r=c.TemplateHelper.create(e,n,i.overrides,t);return o.parentid&&(r.parentid=o.parentid),e.insertNode(r,r.parentid),r}if("TextNode"===n&&o.styledText&&"StyledTextDraft"===o.styledText.__class){const e=o.styledText,{__class:t}=e,n=i(e,["__class"]),s=new r.StyledTextDraft(n,n);o=Object.assign({},o,{styledText:s})}const h=new d(reviveProps(o));return h.id=t,e.insertNode(h,h.parentid),h}function removeNode(e,t){e.remove(t)}function reviveProps(e){const t={};for(const n in e)"guidesX"===n||"guidesY"===n?t[n]=l.reviveGuidesInfo(e[n]):"replicaInfo"===n?t.replicaInfo=l.reviveReplicaInfo(e[n]):"tokens"===n?(t.tokens=l.reviveTokens(e[n],e.tokensIndex),t.tokensIndex=void 0):"tokensIndex"===n||(t[n]="codeComponentProps"===n?e[n]:l.revive(e[n]));return t}function changeNode(e,t,n){const s=e.idToNode.get(t);if(!s)throw Error("broken diff, node does not exist: "+t);let l;if(n.parentid&&e.move(t,n.parentid),s instanceof o.default){const{styledText:t}=n,o=i(n,["styledText"]);if(l=s.set(reviveProps(o),e),t){const n=new r.StyledTextDraft(void 0,t);l=s.set({styledText:n},e)}}else l=s.set(reviveProps(n),e),n.replicaInfo&&a.isReplica(l)&&a.isReplica(s)&&c.TemplateHelper.updateFromOverrides(e,l,s);return l}function dependsOnFutureChange(e,t){const n=t.replicaInfo;if(n&&!e.has(n.master))return!0;const i=t.parentid;return!!i&&!e.has(i)}function resyncChildOrder(e,t,n){if(void 0===t.children)throw Error("assertion failed: node must have children array");t.children=n.map(t=>e.get(t)).filter(e=>!!e)}t.reviveProps=reviveProps,t.applyChanges=function applyChanges(e,t){const n=[],i=[];for(;t.length>0;){const o=[];for(let r=0,s=t.length;r<s;r++){const s=t[r],a=s.id;if(s.added)if(dependsOnFutureChange(e,s.to))o.push(s);else{const t=addNode(e,a,s.added,s.to);s.toChildren&&n.push(s),t instanceof u.default&&i.push(t)}else if(s.removed)removeNode(e,a);else if(dependsOnFutureChange(e,s.to))o.push(s);else{const t=changeNode(e,a,s.to);s.toChildren&&n.push(s),t instanceof u.default&&i.push(t)}}if(0===o.length)break;if(o.length===t.length)throw Error("no progress: "+o.length);t=o}for(let o=0,r=n.length;o<r;o++){const t=n[o],i=t.toChildren;if(!i)throw Error("assertion failed: change.toChildren must be set");const r=e.get(t.id);if(!r)throw Error("assertion failed: node must exist");resyncChildOrder(e,r,i)}for(let o=0,r=i.length;o<r;o++){const t=i[o];t.allSlotContent().forEach(n=>{const i=e.get(n);i&&e.linkNodeChangesTo(i,t.id)})}},t.reverseChanges=function reverseChanges(e,t){const n=[];for(let i=0,o=t.length;i<o;i++){const o=t[i],r=o.id;o.added?removeNode(e,r):o.removed?dependsOnFutureChange(e,o.from)?n.push(o):addNode(e,r,o.removed,o.from):dependsOnFutureChange(e,o.from)?n.push(o):changeNode(e,r,o.from)}if(0!==n.length){if(n.length===t.length)throw Error("no progress");return reverseChanges(e,n)}},t.createTreeChanges=function createTreeChanges(e,t){const n=[];let i=void 0;return t.idToNode.forEach((t,o)=>{if(!t||!o)return;const r=e.idToNode.get(o);if(t.cache.placeholders&&(i={id:o,placeholders:t.cache.placeholders}),r===t)return;const s=nodeChange(r,t);s&&n.push(s)}),e===t?{changes:n,placeholder:i}:(e.idToNode.forEach((e,i)=>{if(!e||!i)return;if(t.idToNode.has(i))return;const o=nodeChange(e,void 0);o&&n.push(o)}),{changes:n,placeholder:i})};const h={id:!0,cache:!0,children:!0,mutable:!0,update:!0,styledText:!0},p={parentid:!0,replicaInfo:!0,originalid:!0};function childrenChange(e,t,n){if(t&&n&&Math.abs(t.length-n.length)<2){let e=!0;for(let i=0,o=Math.min(t.length,n.length);i<o;i++)if(t[i].id!==n[i].id){e=!1;break}if(e)return}t&&t.length>1&&(e.fromChildren=t.map(e=>e.id)),n&&n.length>1&&(e.toChildren=n.map(e=>e.id))}function nodeChange(e,t){const n={},i={},r={id:t?t.id:e?e.id:"",from:n,to:i};if(t)if(e){if(a.isReplicaChild(t))return}else{if(a.isReplicaChild(t))return;const n=t.constructor.name;e=s.nodeDefaultsMap[n],r.added=n}else{if(!e)throw Error("assertion failed: at least one node must be given");if(a.isReplicaChild(e))return;const n=e.constructor.name;t=s.nodeDefaultsMap[n],r.removed=n}const l=a.isReplica(e)||a.isReplica(t);let c=!1;for(const o in t){if(l){if(!p[o])continue}else{if("children"===o){childrenChange(r,e.children,t.children),(r.fromChildren||r.toChildren)&&(c=!0);continue}if(h[o])continue}const s=e[o],a=t[o];d.isEqual(s,a)||("tokens"!==o?(n[o]=s,i[o]=a,c=!0):(n.tokens=s.toJS(),i.tokens=a.toJS(),n.tokensIndex=Array.from(s.keys()),i.tokensIndex=Array.from(a.keys()),c=!0))}if(t instanceof o.default){if(!(e instanceof o.default))throw Error("assertion failed: nodes must be of same type");e.styledText!==t.styledText&&(n.styledText=e.styledText.toJS(),i.styledText=t.styledText.toJS(),c=!0)}if(c)return r}t.nodeChange=nodeChange},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isRendererInit=function isRendererInit(e){return e&&"RendererInit"===e.type},t.isRendererUpdate=function isRendererUpdate(e){return e&&"RendererUpdate"===e.type}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(9),r=n(10),s=n(5),a=n(5),l=n(781),c=n(786),d=n(793),u=n(794),h=n(798),p=n(799),g=n(177),m=n(891),f=n(2),y=n(892),v=n(895),b=n(145),k=n(900),S=n(6),C=n(76),x=n(901),w=n(95),T=n(291),P=n(13),E=n(289),F=n(28),M=n(3),_=n(902);class Chrome extends i.PureComponent{constructor(){super(...arguments),this.wantedActions=["undo","redo"],this.wantsAction=e=>w.wantsNativeTextActions()?"native":T.nativeActionTarget.wantsAction(e)}static calculateState(){f.default.canvasStore.assertInteractive();const{zoom:e}=f.default.canvasStore,{crashMessage:t,organization:n}=f.default.documentSettings,{tool:i,popupMenu:o,leftPanelContent:r,shapeModeActive:s,hasShownPrivateStore:a}=f.default.toolStore.state;return{tool:i,popupMenu:o,shapeModeActive:s,leftPanelContent:r,zoom:e,crashMessage:t,organization:n,chromeIsVisible:f.default.chromeStore.state.chromeIsVisible,pointerEvents:f.default.mouseStore.chromePointerEvents,hasRecentlyInstalledPackages:f.default.serverStore.hasRecentlyInstalledPackages,hasOutdatedPackages:f.default.serverStore.hasOutdatedPackages,hasShownPrivateStore:a,showLeftPanel:f.default.debugStore.showLeftPanel,documentIsLoaded:f.default.chromeStore.state.documentIsLoaded}}render(){f.default.canvasStore.assertInteractive();const{chromeIsVisible:e,pointerEvents:t,showLeftPanel:n,documentIsLoaded:o}=this.state;return e?i.createElement("div",{style:style(t),onClickCapture:sendMetricsUIChromeEvent},C.withMetricsViewContext({view:C.MetricsInteractionViews.CHROME},i.createElement(i.Fragment,null,i.createElement("div",{className:M.framerChromeClassName},this.propertiesPanel,this.tabBar,this.popupMenu,n&&this.leftPanel,i.createElement(F.Experiment,{isNotOn:"bottomToolbar"},this.shapeToolPanel),i.createElement(F.Experiment,{isOn:"bottomToolbar"},this.toolbar),i.createElement(m.Crash,Object.assign({},this.state)),!o&&this.loadingIndicator,this.tooltipComponent,i.createElement(_.FeedbackHUDContainer,null)),this.marketplace,this.organization,this.editor))):null}get leftPanel(){const{leftPanelContent:e,tool:t,shapeModeActive:n}=this.state;switch(e){case s.LeftPanelContent.Tools:return t===a.Tools.Comment?null:C.withMetricsViewContext({view:C.MetricsInteractionViews.TOOLS_PANEL},i.createElement(y.ToolPanelContainer,{selectedTool:t}));case s.LeftPanelContent.Layers:return C.withMetricsViewContext({view:C.MetricsInteractionViews.LAYERS_PANEL},i.createElement(w.ActionResponder,{engine:f.default,target:this},i.createElement(c.Layers,{shapeModeActive:n})));case s.LeftPanelContent.Components:return C.withMetricsViewContext({view:C.MetricsInteractionViews.COMPONENTS_PANEL},i.createElement(d.ComponentsContainer,null));default:return null}}get tabBar(){const{leftPanelContent:e,organization:t,hasRecentlyInstalledPackages:n,hasOutdatedPackages:o,hasShownPrivateStore:r}=this.state;return C.withMetricsViewContext({view:C.MetricsInteractionViews.MAIN_MENU},i.createElement(l.TabBar,{leftPanelContent:e,organization:t,hasRecentlyInstalledPackages:n,hasOutdatedPackages:o,hasShownPrivateStore:r}))}get shapeToolPanel(){const{tool:e,shapeModeActive:t,leftPanelContent:n}=this.state;return n===s.LeftPanelContent.Marketplace||n===s.LeftPanelContent.Organization||n===s.LeftPanelContent.CodeEditor?null:C.withMetricsViewContext({view:C.MetricsInteractionViews.SHAPE_TOOLS_PANEL},i.createElement(v.ShapeToolPanelContainer,{selectedTool:e,shapeModeActive:t}))}get popupMenu(){const{popupMenu:e}=this.state;return e?i.createElement(h.PopupMenu,{items:e.items,point:e.point}):null}get toolbar(){const{tool:e,shapeModeActive:t,leftPanelContent:n}=this.state;switch(n){case s.LeftPanelContent.CodeEditor:case s.LeftPanelContent.Marketplace:case s.LeftPanelContent.Organization:return null}return C.withMetricsViewContext({view:C.MetricsInteractionViews.TOOLS_PANEL},i.createElement(u.ToolbarContainer,{selectedTool:e,shapeModeActive:t}))}get propertiesPanel(){const{pointerEvents:e}=this.state;return C.withMetricsViewContext({view:C.MetricsInteractionViews.PROPERTIES_PANEL},i.createElement(p.PropertiesContainer,{pointerEvents:e,key:"properties"}))}get marketplace(){const{leftPanelContent:e}=this.state,t=e===s.LeftPanelContent.Marketplace;return i.createElement(x.LazyLoad,{visible:t},i.createElement(g.PublicStore,{visible:t,key:"public-store"}))}get editor(){const{leftPanelContent:e}=this.state,t=e===s.LeftPanelContent.CodeEditor;return i.createElement(E.CodeEditor,{visible:t,className:M.framerChromeClassName})}get organization(){if(!this.state.organization)return;const{leftPanelContent:e,organization:t}=this.state,n=e===s.LeftPanelContent.Organization;return i.createElement(x.LazyLoad,{visible:n},i.createElement(g.CompanyStore,{visible:n,organization:t,key:"company-store"}))}get tooltipComponent(){const{popupMenu:e}=this.state;if(!e)return i.createElement(k.Tooltip,null)}get loadingIndicator(){return i.createElement("div",{className:"delayedFadeIn",style:{position:"absolute",left:P.layout.chromeMarginLeft,right:P.layout.chromeMarginRight,top:P.layout.chromeMarginTop,bottom:P.layout.chromeMarginBottom,pointerEvents:"none"}},i.createElement(b.ActivityIndicator,{large:!0}))}undo(){T.nativeActionTarget.undo()}redo(){T.nativeActionTarget.redo()}}function sendMetricsUIChromeEvent(e){if(!e.target)return;const t=e.target,n=t.dataset["metric-id"],i=t.dataset["metric-view"];n&&i&&o.triggerUiInteractionEvent({id:n,page:i})}Chrome.engineChangeKeys=S.EngineChangeFlags.ToolStore|S.EngineChangeFlags.CanvasZoom|S.EngineChangeFlags.DebugStore|S.EngineChangeFlags.ChromePointerEvents|S.EngineChangeFlags.ChromeStore|S.EngineChangeFlags.DocumentSettings|S.EngineChangeFlags.ServerStore;const O={pointerEvents:"none"};function style(e){return e?void 0:O}t.container=r.default(Chrome),t.Chrome=t.container},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(782),r=n(3),s=n(13),a=n(5),l=n(783),c=n(28),d=n(2),u=n(77);t.TabBar=class TabBar extends i.Component{constructor(){super(...arguments),this.tabItems=[],this.addTabItem=e=>{e&&this.tabItems.push(e)}}componentDidMount(){c.experiments.isOn("bottomToolbar")&&d.default.toolStore.setLeftPanelContent(a.LeftPanelContent.Layers)}componentWillUnmount(){this.tabItems=[]}render(){const{leftPanelContent:e,organization:t,hasRecentlyInstalledPackages:n,hasOutdatedPackages:r,hasShownPrivateStore:s}=this.props;return i.createElement("div",{className:"tabBar",style:h},i.createElement("div",{className:u.panelScroller,style:p},i.createElement("div",null,i.createElement(c.Experiment,{isNotOn:"bottomToolbar"},i.createElement(o.TabItem,{ref:this.addTabItem,title:"Tools",activeLeftPanelContent:e,type:a.LeftPanelContent.Tools})),i.createElement(o.TabItem,{ref:this.addTabItem,title:"Layers",activeLeftPanelContent:e,type:a.LeftPanelContent.Layers}),i.createElement(o.TabItem,{ref:this.addTabItem,showIndicator:n||r,title:"Components",activeLeftPanelContent:e,type:a.LeftPanelContent.Components}),i.createElement(o.TabItem,{ref:this.addTabItem,title:"Code",activeLeftPanelContent:e,type:a.LeftPanelContent.CodeEditor}),i.createElement(o.TabItem,{ref:this.addTabItem,title:"Store",activeLeftPanelContent:e,type:a.LeftPanelContent.Marketplace}),t&&i.createElement(o.TabItem,{ref:this.addTabItem,title:`${t.displayName||"Company"} Store`,showIndicator:!s,activeLeftPanelContent:e,type:a.LeftPanelContent.Organization})),i.createElement(l.DevBar,null)))}};const h={position:"fixed",top:s.layout.chromeMarginTop,left:0,bottom:s.layout.chromeMarginBottom,WebkitAppRegion:"drag",WebkitUserSelect:"none",width:s.layout.toolbarWidth,zIndex:1,backgroundColor:r.theme.toolbarBackground,pointerEvents:"auto",marginRight:1},p={width:"100%",height:"100%",overflow:"auto",WebkitOverflowScrolling:"touch",overflowX:"hidden",overflowY:"overlay",flexGrow:1,display:"flex",flexDirection:"column",justifyContent:"space-between"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(13),r=n(52),s=n(2),a=n(5),l=n(3),c=n(76);t.TabItem=class TabItem extends i.Component{constructor(){super(...arguments),this.onClick=s.default.wrapMouseHandler(()=>{const{activeLeftPanelContent:e,type:t}=this.props;e!==t&&s.default.setLeftPanelContent(t)}),this.onMouseEnter=s.default.wrapMouseHandler(e=>{const t=e.target;if(!t)return;const n=t.closest(".tabItem");if(!n)return;const i=n.getBoundingClientRect(),o={x:i.left+i.width,y:i.top+i.height/2-13};s.default.setTooltip(this.props.title,o,a.ToolTipArrow.Left,!0)}),this.onMouseLeave=s.default.wrapMouseHandler(()=>{s.default.setTooltip(null,null,a.ToolTipArrow.Left)})}render(){const{type:e,activeLeftPanelContent:t,showIndicator:n,title:o}=this.props,s=t===e,l=function name(e){switch(e){case a.LeftPanelContent.Tools:return"tab-tools";case a.LeftPanelContent.Layers:return"tab-layers";case a.LeftPanelContent.Components:return"tab-components";case a.LeftPanelContent.Marketplace:return"tab-store";case a.LeftPanelContent.Intercom:return"tab-intercom";case a.LeftPanelContent.Account:return"tab-account";case a.LeftPanelContent.Organization:return"tab-company";case a.LeftPanelContent.CodeEditor:return"tab-code";default:return""}}(e),p=function getIconSize(e){return e===a.LeftPanelContent.CodeEditor?19:15}(e),g=u(p,15);return i.createElement(c.MetricsViewContext.Consumer,null,e=>i.createElement("div",{style:d(),className:"tabItem "+`tab${o} `+(s?" on":""),onClick:this.onClick,onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,"data-metric-id":o.toLowerCase(),"data-metric-view":e.view},i.createElement(r.Icon,{className:"icon",name:l,active:s||!1,width:p,height:15,style:g}),n&&i.createElement("div",{style:h})))}};const d=()=>({position:"relative",height:o.layout.toolbarWidth,width:o.layout.toolbarWidth,fontSize:"11px",lineHeight:"30px"}),u=(e,t)=>({backgroundSize:`${e}px ${t}px`,float:"left",width:e,height:t,marginTop:15,marginLeft:Math.floor(22.5-e/2),pointerEvents:"none"}),h={position:"absolute",height:4,width:4,backgroundColor:l.theme.toolbarIconIndicator,borderRadius:5,transform:"translateY(11px) translateX(30px)"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});n(0),n(784);t.DevBar=function DevBar(){return null}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.devbar="devbar_dhg5aeb",n(785)},function(e,t,n){},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(7),r=n(10),s=n(787),a=n(221),l=n(431),c=n(791),d=n(4),u=n(16),h=n(54),p=n(43),g=n(2),m=n(12),f=n(74),y=n(22),v=n(792),b=n(6),k=n(41),S=n(31),C=n(44),x=n(42);class Layers extends i.PureComponent{constructor(){super(...arguments),this.items=[],this.mouseOver=!1,this._activeShapeContainerIds=[],this.autoExpandedNodes=new Set,this.insertAction=(e,t,n)=>{const{tree:i,selection:o}=this.state;this.insertSelection(i,e,t,o,n)},this.getElementForItem=(e,t=!1)=>{const n=this.state.tree.get(e.id);if(!n)return i.createElement("div",null);const o=m.isMaster(n),r=m.isReplica(n),s=x.defaultName(n);let a=`layer-${x.iconName(n)}`;if(u.hasChildren(n)&&0===n.children.length&&!e.selected){(d.isFrameNode(n)||d.isShapeContainerNode(n))&&!(m.isMaster(n)||m.isReplica(n))&&(a+="-without-children")}return i.createElement(l.LayerPanelItem,{key:e.id,nodeid:n.id,nodeName:n.name,placeholder:s,iconName:a,isMasterNode:o,isInstanceNode:r,shapeModeActive:this.props.shapeModeActive,onSelect:t?void 0:this.onSelectItem,beingDragged:t,indent:e.indent,selected:e.selected,collapsed:e.collapsed,collapsedOverride:e.collapsedOverride,hidden:e.hidden,locked:e.locked,exportable:e.exportable,isUserComponent:e.isUserComponent})},this.getActiveShapeContainers=()=>{const{tree:e,selection:t}=this.state,n=e.getNodes(t);if(n.length>0){const t=[];n.forEach(n=>{const i=e.getAncestorOfType(n,d.ShapeContainerNode,!0);if(!i)return;const{id:o}=i;-1===t.indexOf(o)&&t.push(o)}),this._activeShapeContainerIds=t}const i=[];for(const o of this._activeShapeContainerIds){const t=e.getNode(o);t&&t.cache.visible&&i.push(t)}return 0===i.length?e.getNodesWithPredicate(e=>d.isShapeContainerNode(e)&&e.cache.visible):i},this.onMouseEnter=()=>{this.mouseOver=!0},this.onMouseLeave=g.default.wrapHandler(e=>{C.default.isLeftMouseButtonDown(e)||(this.mouseOver=!1,g.default.setHighlight(),this.autoExpandedNodes.clear(),this.forceUpdate())}),this.onSelectItem=g.default.wrapHandler((e,t)=>{const{selection:n}=this.state,{items:i}=this;if(t.shiftKey){const t=n[n.length-1];if(void 0===t)g.default.setSelection([e]);else{const n=i.findIndex(e=>e.id===t),o=i.findIndex(t=>t.id===e),r=Math.min(n,o),s=Math.max(n,o),a=[];for(let e=r;e<=s;e++)i[e].selected||i[e].id===d.NullID||a.push(i[e].id);g.default.toggleSelection(a)}}else t.metaKey?g.default.toggleSelection([e]):-1===n.indexOf(e)&&g.default.setSelection([e])}),this.insertSelection=g.default.wrapHandler((e,t,n,i,o)=>{if("none"===n)return;const r=e.getNode(t);let s=r;"siblingAbove"!==n&&"siblingBelow"!==n||(s=e.getParent(r.id));const a=e.sortVisually(e.withoutDescendants(e.getNodes(i)));if(o){if(!p.ContextAction.canDuplicateNodes(a))return;const t=getInsertionIndex(e,r,s,n);p.ContextAction.duplicateNodes(g.default,i,{node:s,insertionIndex:t})}else switch(n){case"siblingAbove":case"siblingBelow":{a.reverse();const t=e.getSiblings(r),i=getInsertionIndex(e,r,s,n);a.forEach(n=>{let o=i;const r=t.indexOf(n);-1!==r&&r<i&&(o-=1);const a=e.getParent(n.id);p.ContextAction.convertNodeToNewParent(g.default,n,a,s,o)});break}case"child":a.forEach(t=>{const n=e.getParent(t.id);p.ContextAction.convertNodeToNewParent(g.default,t,n,s)})}})}static calculateState(){const{activeScreen:e,renameTarget:t,collapseOverrides:n}=g.default.treeStore.state;return{tree:g.default.tree,selection:g.default.selection,activeScreen:e,renameTarget:t,collapseOverrides:n}}asItems(e,t,n,i,o,r,s,a,l){const{tree:c,selection:p,renameTarget:g,activeScreen:v,collapseOverrides:b}=this.state,{shapeModeActive:C}=this.props;for(let x=e.length-1;x>=0;x--){const w=e[x];if(m.isHiddenMaster(w))continue;const T=w.isSelected(),P=h.hasVisibility(w)&&!w.visible||void 0!==i&&i,E=k.hasLock(w)&&w.locked,F=S.hasExport(w)&&w.exportOptions.count()>0,M=u.getChildren(w),_=!w.originalid&&!n&&void 0===this.selectedNodesWithoutDescendants.find(e=>!u.acceptsChild(c,w,e)),O=s.contains(w.id),I=w.update-(g===w.id?1:0),D=!(T&&!(p.length>1)||O||w.id===v&&p.length<2),N=b.get(w.id);let R=void 0!==N?N:D;const A=void 0!==N&&N!==D;M.length>0&&(this.mouseOver&&D&&this.autoExpandedNodes.has(w.id)&&!N?R=!1:D||N?this.autoExpandedNodes.delete(w.id):this.autoExpandedNodes.add(w.id));const L=w.originalid&&!m.isReplica(w);if(a.push({id:w.id,hash:I,selected:T,partOfSelection:n||T,hidden:P,locked:E,exportable:F,indent:t,height:28,sortable:!L,collapsed:R,collapsedOverride:A,childrenAllowed:_,siblingsAllowed:r,isUserComponent:f.isUserComponent(w),element:this.getElementForItem,getItems:l}),!R&&u.hasChildren(w)&&(o||!(w instanceof d.FrameNode))){if(d.isShapeContainerNode(w)&&!C)continue;let e;y.isStackComponent(w)?(e=[...M]).reverse():e=M,this.asItems(e,t+1,n||T,P,o,_,s,a,l)}}}updateItems(){const{tree:e,selection:t}=this.state,{shapeModeActive:n}=this.props;let i,r=o.Set();for(const o of t)e.has(o)&&(r=r.union(e.getAncestors(o)));r=r.subtract(t),i=n?this.getActiveShapeContainers():e.getGroundNodes(),this.selectedNodesWithoutDescendants=e.withoutDescendants(e.getNodes(t));const s=[];return this.asItems(i,1,!1,void 0,!0,!n,r,s,()=>s),this.items=s,s}render(){const{shapeModeActive:e}=this.props,{selection:t}=this.state,n=this.updateItems();let o,r;return n.length>0?o=[i.createElement("div",{onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,style:T,key:"tree"},i.createElement(s.SortableTree,{action:this.insertAction,items:n,singleSelection:1===t.length,shapeModeActive:e}))]:r=i.createElement(c.EmptyState,null),i.createElement(a.TabContent,{header:i.createElement(v.LayerPanelHeader,{shapeModeActive:e}),placeholder:r},o)}}Layers.engineChangeKeys=b.EngineChangeFlags.TreeStore;const w=r.default(Layers);t.Layers=w;const T={position:"absolute",left:0,right:0,top:0,bottom:0};function getInsertionIndex(e,t,n,i){if("siblingAbove"!==i&&"siblingBelow"!==i)return-1;const o=e.getSiblings(t,!0).indexOf(t);if(-1===o)return-1;if(y.isStackComponent(n)){if("siblingBelow"===i)return o+1}else if("siblingAbove"===i)return o+1;return o}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(2),r=n(3),s=n(4),a=n(77),l=n(788);t.SortableTree=function SortableTree({items:e,action:t,singleSelection:n,shapeModeActive:r}){const u=i.useRef(null),h=i.useCallback(o.default.wrapMouseHandler(e=>{e.target===u.current&&o.default.setHighlight()}),[]),p=i.useCallback(o.default.wrapHandler(e=>{e.target===u.current&&o.default.setSelection([])}),[]);return i.createElement("div",{className:a.panelScroller,style:c},i.createElement("div",{style:d,onMouseMove:h,onClick:p,ref:u},e.map(e=>i.createElement(l.Item,{key:s.stringFromNodeID(e.id),item:e,action:t,singleSelection:n,shapeModeActive:r}))))};const c={position:"absolute",top:0,left:0,right:0,bottom:0,overflow:"auto",overflowX:"hidden",overflowY:"overlay",WebkitOverflowScrolling:"touch"},d={width:"100%",minHeight:"100%",backgroundImage:r.theme.layerPanelRowBackgroundImage}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(94),r=n(3),s=n(224),a=n(790),l=n(2),c="layer-panel-item";t.Item=function Item({item:e,singleSelection:t,action:n}){const[r,d]=i.useState("none"),[f,y]=i.useState(0),v=i.useCallback(t=>{t.altKey&&(t.dataTransfer.dropEffect="copy");const n=g(e,t);let i=null;if("child"===n)i=e.id;else if("siblingAbove"===n||"siblingBelow"===n){const t=l.default.tree.getParent(e.id);t&&(i=t.id)}setHighlight(i),n!==r&&(d(n),y(function getInsertOffset(e,t){if("siblingBelow"!==t)return 0;let n=0;const i=e.getItems();let o=i.indexOf(e)+1;for(;o<i.length&&i[o].indent>e.indent;)n+=i[o].height,o++;return n}(e,n)))},[e,r]),b=i.useCallback(()=>{d("none"),setHighlight(null)},[]),k=i.useCallback(t=>{const i=g(e,t);n(e.id,i,t.altKey)},[e,n]),S=i.useCallback(e=>{e.dataTransfer.setData(c,null)},[]),C=o.useDroppable({enabled:!e.partOfSelection,dataTypes:[c],onDrop:k,onDragOver:v,onDragLeave:b});i.useEffect(()=>{e.selected&&t&&C.current&&s.scrollIntoView(C.current,{scrollMode:"if-needed",block:"center",inline:"center"})},[e.selected,t,C]);let x=e.selected?e.isUserComponent?p:h:u,w=null;if("none"!==r&&!e.partOfSelection){const t=m(e.indent,!1)-4;w=i.createElement(a.InsertionIndicator,{indentPosition:t,location:r,belowOffset:f}),x=Object.assign({},x,{zIndex:100})}return i.createElement("div",{style:x,ref:C},i.createElement(o.Draggable,{enabled:e.sortable&&e.selected,onDragStart:S,hideDragSource:!1},({isDragPreview:t})=>t?function getDragPreview(e){const t=e.getItems(),n=t.indexOf(e),o=t.filter(e=>e.partOfSelection);return i.createElement("div",null,o.map((e,o)=>{const r=(t.indexOf(e)-n)*e.height,s={position:"absolute",transform:`translate(0px, ${r}px)`,width:200};return i.createElement("div",{key:o,style:s},e.element(e,!0))}))}(e):e.element(e)),w)};const d=l.default.wrapHandler(e=>{l.default.setHighlight(e)});function setHighlight(e){l.default.highlight!==e&&d(e)}const u={width:"100%",position:"relative"},h=Object.assign({},u,{backgroundColor:r.theme.layerPanelSelection}),p=Object.assign({},u,{backgroundColor:r.theme.layerPanelMasterOrReplica});const g=(e,t)=>{const n=t.clientRect,i=(n.bottom-n.top)/2,o=t.client.y-n.top,r=m(e.indent,!1),s=t.client.x-n.left>r;return o<i&&e.siblingsAllowed?"siblingAbove":!e.childrenAllowed||!s&&e.siblingsAllowed?e.siblingsAllowed?"siblingBelow":"none":"child"},m=(e,t)=>{let n=e;return t&&(n+=1),0===n?21:16*n+15}},function(e,t,n){"use strict";function isElement(e){return null!=e&&"object"==typeof e&&1===e.nodeType}function canOverflow(e,t){return(!t||"hidden"!==e)&&("visible"!==e&&"clip"!==e)}function isScrollable(e,t){if(e.clientHeight<e.scrollHeight||e.clientWidth<e.scrollWidth){const n=getComputedStyle(e,null);return canOverflow(n.overflowY,t)||canOverflow(n.overflowX,t)}return!1}function alignNearest(e,t,n,i,o,r,s,a){return r<e&&s>t||r>e&&s<t?0:r<=e&&a<=n||s>=t&&a>=n?r-e-i:s>t&&a<n||r<e&&a>n?s-t+o:0}Object.defineProperty(t,"__esModule",{value:!0}),t.computeScrollIntoView=function computeScrollIntoView(e,t){const{scrollMode:n,block:i,inline:o,boundary:r,skipOverflowHiddenElements:s}=t,a="function"==typeof r?r:e=>e!==r;if(!isElement(e))throw new TypeError("Invalid target");const l=document.scrollingElement||document.documentElement,c=[];let d=e;for(;isElement(d)&&a(d);){if((d=d.parentNode)===l){c.push(d);break}d===document.body&&isScrollable(d)&&!isScrollable(document.documentElement)||isScrollable(d,s)&&c.push(d)}const u=window.visualViewport?visualViewport.width:innerWidth,h=window.visualViewport?visualViewport.height:innerHeight,p=window.scrollX||pageXOffset,g=window.scrollY||pageYOffset,{height:m,width:f,top:y,right:v,bottom:b,left:k}=e.getBoundingClientRect();let S="start"===i||"nearest"===i?y:"end"===i?b:y+m/2,C="center"===o?k+f/2:"end"===o?v:k;const x=[];for(let w=0;w<c.length;w++){const e=c[w],{height:t,width:r,top:s,right:a,bottom:d,left:T}=e.getBoundingClientRect();if("if-needed"===n&&y>=0&&k>=0&&b<=h&&v<=u&&y>=s&&b<=d&&k>=T&&v<=a)return x;const P=getComputedStyle(e),E=parseInt(P.borderLeftWidth,10),F=parseInt(P.borderTopWidth,10),M=parseInt(P.borderRightWidth,10),_=parseInt(P.borderBottomWidth,10);let O=0,I=0;const D="offsetWidth"in e?e.offsetWidth-e.clientWidth-E-M:0,N="offsetHeight"in e?e.offsetHeight-e.clientHeight-F-_:0;if(l===e)O="start"===i?S:"end"===i?S-h:"nearest"===i?alignNearest(g,g+h,h,F,_,g+S,g+S+m,m):S-h/2,I="start"===o?C:"center"===o?C-u/2:"end"===o?C-u:alignNearest(p,p+u,u,E,M,p+C,p+C+f,f),O=Math.max(0,O+g),I=Math.max(0,I+p);else{O="start"===i?S-s-F:"end"===i?S-d+_+N:"nearest"===i?alignNearest(s,d,t,F,_+N,S,S+m,m):S-(s+t/2)+N/2,I="start"===o?C-T-E:"center"===o?C-(T+r/2)+D/2:"end"===o?C-a+M+D:alignNearest(T,a,r,E,M+D,C,C+f,f);const{scrollLeft:n,scrollTop:l}=e;S+=l-(O=Math.max(0,Math.min(l+O,e.scrollHeight-t+N))),C+=n-(I=Math.max(0,Math.min(n+I,e.scrollWidth-r+D)))}x.push({el:e,top:O,left:I})}return x}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(3),r={position:"absolute",left:-7,top:-3,width:7,height:7,borderRadius:5,border:`1px solid ${o.theme.tint}`},s={position:"absolute",right:0,height:1,backgroundColor:o.theme.tint},a={position:"absolute",left:0,right:0,top:0,bottom:0,border:`1px solid ${o.theme.tint}`};t.InsertionIndicator=function InsertionIndicator({indentPosition:e,location:t,belowOffset:n}){switch(t){case"siblingAbove":case"siblingBelow":{const o="siblingAbove"===t?Object.assign({},s,{top:0}):Object.assign({},s,{bottom:-1-n});return o.left=e,i.createElement("div",{style:o},i.createElement("div",{style:r}))}case"child":return i.createElement("div",{style:a});default:return null}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(223),r=[{icon:"nux-layers",header:"Layers",text:["Layers automatically guess their",i.createElement("br",{key:"1"}),"hierarchy, and all layers with",i.createElement("br",{key:"2"}),"children expand on selection."]}];t.EmptyState=()=>i.createElement(o.PanelEmptyState,{steps:r})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(3);t.LayerPanelHeader=function LayerPanelHeader({shapeModeActive:e}){return i.createElement("div",{style:r},e?"Drawing Mode":"Layers")};const r={width:"100%",display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",borderBottom:`1px solid ${o.theme.propertyPanelDivider}`,background:o.theme.tabContentAccessoryBackground,height:37,padding:"0 15px",fontSize:"11px",fontWeight:500,color:o.theme.toolSectionHeaderText,lineHeight:"35px",userSelect:"none",cursor:"default",pointerEvents:"auto",zIndex:100}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(10),r=n(438),s=n(2),a=n(6);class Components extends i.Component{static calculateState(){return{projectURL:s.default.serverStore.projectURL,tree:s.default.tree,componentHash:s.default.canvasStore.componentHash,recentlyInstalledPackages:s.default.serverStore.recentlyInstalledPackages,updatingPackages:s.default.serverStore.updatingPackages,outdatedPackages:s.default.serverStore.outdated,viewType:s.default.documentSettings.componentPanelViewType,expandedPackages:s.default.documentSettings.componentPanelExpandedPackages(),expandedCategories:s.default.documentSettings.componentPanelExpandedCategories()}}render(){return i.createElement(r.ComponentsPanel,Object.assign({},this.state))}}Components.engineChangeKeys=a.EngineChangeFlags.Tree|a.EngineChangeFlags.ToolStore|a.EngineChangeFlags.ComponentHash|a.EngineChangeFlags.ServerStore|a.EngineChangeFlags.ComponentPanel,t.ComponentsContainer=o.default(Components)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(795),r=n(10),s=n(2),a=n(6);class ToolbarState extends i.PureComponent{static calculateState(){return{selection:s.default.selection,nodes:s.default.treeStore.selectionAsNodes,zoom:s.default.canvasStore.zoom,mouseDown:s.default.mouseStore.mouseDown}}render(){const{selectedTool:e,shapeModeActive:t}=this.props,{selection:n,zoom:r,mouseDown:s,nodes:a}=this.state;return i.createElement(o.Toolbar,{selectedTool:e,selection:n,nodes:a,shapeModeActive:t,zoom:r,mouseDown:s})}}ToolbarState.engineChangeKeys=a.EngineChangeFlags.Selection|a.EngineChangeFlags.PathSelection|a.EngineChangeFlags.CanvasLiveTransform|a.EngineChangeFlags.MouseStore|a.EngineChangeFlags.TreeStore,t.ToolbarContainer=r.default(ToolbarState)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(9),r=n(94),s=n(2),a=n(3),l=n(13),c=n(5),d=n(178),u=n(445),h=n(446),p=n(73),g=n(43),m=n(27),f=n(11),y=n(447),v=n(797);function zoomHandler(e){return s.default.wrapHandler(()=>{o.triggerCanvasZoomEvent({source:"indicator"}),e?s.default.canvasStore.zoomIn():s.default.canvasStore.zoomOut()})}function booleanHandler(e,t){return s.default.wrapHandler(()=>{const n=t[0];1===t.length&&p.hasBooleanPath(n)?n.originalid||function toggleBooleanType(e,t){if(e.pathBoolean===t)return void(g.ContextAction.canUngroup(s.default.tree,[e])&&g.ContextAction.ungroup(s.default,[e]));s.default.updateNode(e.id,{pathBoolean:t})}(n,e):function createBooleanCompound(e,t){const n=booleanableNodes(e);if(!n)return;const i=y.getStyleSourceNodeFromVectorNodes(n);if(null===i)return;const o=n[0],r=s.default.tree.getParent(o.id),a=r?r.id:null,l=s.default.tree.newId(),c=Object.assign({id:l,pathBoolean:t},f.copyShapeStyle(i));s.default.createBooleanPath(a,c),n.forEach(e=>{const t=g.ContextAction.convertNodeToNewParentUpdate(s.default.tree,e,s.default.tree.getParent(e.id),r);s.default.moveNode(e.id,l),s.default.updateNode(e.id,t)}),s.default.setSelection([l])}(t,e)})}t.Toolbar=function Toolbar({zoom:e,mouseDown:t,selectedTool:n,nodes:o,shapeModeActive:s}){const a=r.useAutoSizeTransition({dependencies:[s]});return i.createElement("div",{style:k},i.createElement("div",{style:t?w:S,onMouseDown:stopPropogation,ref:a},function shapeToolItems(){return i.createElement("div",{style:s?C:x},i.createElement("div",{style:Object.assign({padding:5},_),onClick:b},"Exit"),i.createElement(u.Tool,{title:"Path (P)",name:"toolbar-path",selectedTool:n,tool:c.Tools.Path,onMouseDown:startVectorTool}),i.createElement(u.Tool,{title:"Rect (R)",name:"toolbar-rect",selectedTool:n,tool:c.Tools.CreateRectangleShape}),i.createElement(u.Tool,{title:"Oval (O)",name:"toolbar-oval",selectedTool:n,tool:c.Tools.CreateOvalShape}),i.createElement(u.Tool,{title:"Polygon",name:"toolbar-polygon",selectedTool:n,tool:c.Tools.CreatePolygonShape}),i.createElement(u.Tool,{title:"Star",name:"toolbar-star",selectedTool:n,tool:c.Tools.CreateStarShape}),i.createElement("div",{style:T}),function booleanMenu(){const e=o[0],t=1===o.length&&p.hasBooleanPath(e)&&!e.originalid,n=null!==booleanableNodes(o)||t;return i.createElement(h.ToolbarMenu,{title:"Boolean",icon:"toolbar-unite",enabled:s&&n,items:[{title:"Unite",icon:"toolbar-unite",action:booleanHandler(p.PathBooleanType.Unite,o)},{title:"Subtract",icon:"toolbar-subtract",action:booleanHandler(p.PathBooleanType.Subtract,o)},{title:"Intersect",icon:"toolbar-intersect",action:booleanHandler(p.PathBooleanType.Intersect,o)},{title:"Exclude",icon:"toolbar-exclude",action:booleanHandler(p.PathBooleanType.Exclude,o)},{title:"Join",icon:"toolbar-join",action:booleanHandler(p.PathBooleanType.Join,o)}]})}(),i.createElement(v.ToolbarMirroringMenu,{tool:n}))}(),function toolItems(){return i.createElement("div",{style:s?x:C},i.createElement(u.Tool,{title:"Frame",name:"toolbar-frame",selectedTool:n,tool:c.Tools.CreateFrame,accelerator:"F"}),i.createElement(u.Tool,{title:"Round",name:"toolbar-round",selectedTool:n,tool:c.Tools.CreateRoundedFrame,accelerator:"U"}),i.createElement(u.Tool,{title:"Text",name:"toolbar-text",selectedTool:n,tool:c.Tools.CreateText,accelerator:"T"}),i.createElement(u.Tool,{title:"Stack",name:"toolbar-stack",selectedTool:n,tool:c.Tools.CreateStackComponent,accelerator:"S"}),i.createElement(u.Tool,{title:"Scroll",name:"toolbar-scroll",selectedTool:n,tool:c.Tools.CreateScrollComponent}),i.createElement(u.Tool,{title:"Page",name:"toolbar-page",selectedTool:n,tool:c.Tools.CreatePageComponent}),i.createElement(u.Tool,{title:"Link",name:"toolbar-link",selectedTool:n,tool:c.Tools.NavigationLink,accelerator:"L"}),i.createElement(u.Tool,{title:"Graphic",name:"toolbar-graphic",selectedTool:n,tool:c.Tools.CreateShapeContainer,onMouseDown:startVectorTool}))}(),i.createElement("div",{style:Object.assign({},C,{willChange:"transform"})},i.createElement("div",{style:T}),i.createElement("div",{style:P},i.createElement("a",{style:F,onClick:zoomHandler(!1)}),i.createElement("div",{style:_},`${.125===e?12.5:Math.round(100*e)}%`),i.createElement("a",{style:M,onClick:zoomHandler(!0)})),i.createElement(u.Tool,{title:"Pan",name:"toolbar-pan",selectedTool:n,tool:c.Tools.Pan,accelerator:"Space"}))))};const b=s.default.wrapHandler(()=>{s.default.setShapeModeActive(!1),s.default.exitTool()});function booleanableNodes(e){if(e.length<=1)return null;const t=s.default.tree.withoutDescendants(e);if(t.length<=1)return null;const n=new Set;for(let i=0,o=t.length;i<o;i++){const e=t[i];if(!m.hasShape(e)||e.originalid)return null;n.add(e)}return n.size<=1?null:s.default.tree.sortVisually(Array.from(n))}function stopPropogation(e){e.stopPropagation()}function startVectorTool(){s.default.setSelection([]),s.default.setShapeModeActive(!0),s.default.setToolEnum(c.Tools.Path)}const k={position:"absolute",left:l.layout.chromeMarginLeft,right:l.layout.chromeMarginRight,bottom:l.layout.chromeMarginBottom,display:"flex",justifyContent:"center",marginBottom:16,pointerEvents:"none"},S={width:"auto",height:45,color:"rgba(255, 255, 255, 0.9)",backgroundColor:"rgba(25, 25, 25, 0.7)",WebkitBackdropFilter:`blur(${Math.ceil(22.5)}px)`,backdropFilter:`blur(${Math.ceil(22.5)}px)`,WebkitAppRegion:"drag",WebkitUserSelect:"none",zIndex:1,display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"flex-end",padding:10,borderRadius:8,WebkitClipPath:d.Squircle.clipPathWithRadius(22.5,3),pointerEvents:"auto"},C={display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"flex-end",opacity:1,transition:"opacity 0.3s cubic-bezier(0.2, 0, 0, 1)",flexShrink:1},x=Object.assign({},C,{display:"none",opacity:0,pointerEvents:"none"}),w=Object.assign({},S,{pointerEvents:"none"}),T={height:20,width:1,margin:"0 8px",background:"rgba(255,255,255,.2)"},P={display:"flex",flexDirection:"row",alignItems:"center",width:84,margin:5},E={display:"inline-block",width:17,height:17,backgroundRepeat:"no-repeat",backgroundPosition:"center 4px",borderRadius:"50%",flexShrink:0,transition:"transform 0.15s, opacity 0.1s",transitionTimingFunction:"ease-in-out",backgroundColor:"rgba(255, 255, 255, 0.15)",boxShadow:"0 1px 2px rgba(0, 0, 0, 0.05)"},F=Object.assign({},E,{backgroundImage:a.theme.backgroundImage("icon-zoom-out"),backgroundPosition:"50%"}),M=Object.assign({},E,{backgroundImage:a.theme.backgroundImage("icon-zoom-in"),backgroundPosition:"50%"}),_={flexGrow:1,textAlign:"center",WebkitUserSelect:"none",userSelect:"none",cursor:"default",fontSize:13}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0);class MouseTracker extends i.Component{constructor(){super(...arguments),this.tracking=!1,this.state={wantsCursorOverlay:!1,lastTrackedPoint:null},this.ref=i.createRef(),this.handleMouseDown=e=>{if(!r(e))return;const t=e.nativeEvent;this.deltaReferencePoint=this.getPoint(t);const n=this.getPoint(t);n&&(this.props.onDragStart&&this.props.onDragStart(n,t.shiftKey),this.startTracking(n),this.handleMouseMove(t))},this.handleMouseMove=e=>{const t=this.getPoint(e)||this.state.lastTrackedPoint;this.setState(Object.assign({},this.state,{lastTrackedPoint:t})),e.preventDefault(),this.props.onDrag&&t&&this.props.onDrag(t,e.shiftKey)},this.handleStopTrackingEvent=e=>{if(this.deltaReferencePoint=null,!this.tracking)return;const t=(e?this.getPoint(e):null)||this.state.lastTrackedPoint;this.stopTracking(),this.props.onDragEnd&&t&&this.props.onDragEnd(t,!!e&&e.shiftKey)},this.handleKeyEvent=e=>{e.keyCode===o&&this.handleStopTrackingEvent()},this.startTracking=e=>{this.tracking=!0,window.addEventListener("mouseup",this.handleStopTrackingEvent),window.addEventListener("contextmenu",this.handleStopTrackingEvent),window.addEventListener("mousemove",this.handleMouseMove),window.addEventListener("keydown",this.handleKeyEvent),window.addEventListener("keyup",this.handleKeyEvent),this.setState({lastTrackedPoint:e,wantsCursorOverlay:!this.props.cursor})},this.stopTracking=()=>{this.tracking&&(this.tracking=!1,window.removeEventListener("mousemove",this.handleMouseMove),window.removeEventListener("mouseup",this.handleStopTrackingEvent),window.removeEventListener("contextmenu",this.handleStopTrackingEvent),window.removeEventListener("keydown",this.handleKeyEvent),window.removeEventListener("keyup",this.handleKeyEvent),this.setState({lastTrackedPoint:null,wantsCursorOverlay:!this.props.cursor}))},this.getPoint=e=>{const t=this.ref.current;if(!t)return null;const{clientX:n,clientY:i}=e,{delta:o,limit:r}=this.props;if(o)return this.deltaReferencePoint?{x:n-this.deltaReferencePoint.x,y:i-this.deltaReferencePoint.y}:{x:n,y:i};let s=n-t.getBoundingClientRect().left,a=i-t.getBoundingClientRect().top;const l=t.clientWidth,c=t.clientHeight;return(void 0===r||r)&&(s=Math.max(0,Math.min(s,l)),a=Math.max(0,Math.min(a,c))),{x:s/l,y:a/c}}}render(){const{onMouseEnter:e,onMouseLeave:t,cursor:n,style:o,children:r}=this.props;return i.createElement("div",{ref:this.ref,onMouseDown:this.handleMouseDown,onMouseEnter:e,onMouseLeave:t,style:o},r,i.createElement("div",{style:this.state.lastTrackedPoint?MouseTracker.lockedCursorOverlay(n):void 0}))}componentWillUnmount(){this.stopTracking()}}MouseTracker.lockedCursorOverlay=e=>({position:"fixed",top:-screen.height,left:-screen.width,width:2*screen.width,height:2*screen.height,zIndex:2500,cursor:e,pointerEvents:"auto",opacity:0,transform:"translate3d(0, 0, 0)"}),t.MouseTracker=MouseTracker;const o=27,r=e=>{const t=(()=>/Win/.test(navigator.platform))()?e.metaKey:e.ctrlKey;return(0===e.button||1==(1&e.buttons))&&!t}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(1),r=n(2),s=n(26),a=n(4),l=n(32),c=n(11),d=n(446),u=n(6),h=n(10),p=n(58);class ToolbarMirroringMenu extends i.Component{constructor(){super(...arguments),this.onSelect=r.default.wrapHandler(e=>{const{segmentSelection:t,segmentHandle:n,selectionType:i}=this.props;if(i!==l.PathSelectionType.Curves)if(n){const t=r.default.tree.getNode(n.id),i=t.pathSegments.update(n.index,i=>updateSegment(t.pathSegments.toArray(),n.index,e));r.default.tree.updateNode(t,t.updateForPath({pathSegments:i}))}else{const n=c.groupPathSegmentSelectors(t);for(const t in n){const i=r.default.tree.getNode(a.nodeIDFromString(t)),o=n[t],s=i.pathSegments.toArray(),l=i.pathSegments.map((t,n)=>{return-1!==o.indexOf(n)?updateSegment(s,n,e):t});r.default.tree.updateNode(i,i.updateForPath({pathSegments:l}))}}})}render(){const{segmentSelection:e,segmentHandle:t,selectionType:n,tool:o}=this.props;let a=-1;if(n!==l.PathSelectionType.Curves){let n;if(t){n=[r.default.tree.getNode(t.id).pathSegments.get(t.index).handleMirroring]}else n=e.map(e=>{return r.default.tree.getNode(e.id).pathSegments.get(e.index).handleMirroring});switch(s.commonValue(n)){case"straight":a=0;break;case"symmetric":a=1;break;case"disconnected":a=2}}return i.createElement(d.ToolbarMenu,{title:"Mirroring",icon:icon(a),enabled:o===p.Tools.Path&&n===l.PathSelectionType.Segments&&!!e.length,items:[{title:"Straight",icon:icon(0),action:this.onSelect.bind(this,0)},{title:"Mirror",icon:icon(1),action:this.onSelect.bind(this,1)},{title:"Disconnected",icon:icon(2),action:this.onSelect.bind(this,2)}]})}}class StateContainer extends i.Component{static calculateState(){const{segmentSelection:e,segmentHandle:t,selectionType:n}=r.default.pathSelectionStore.state;return{segmentSelection:e,segmentHandle:t,selectionType:n}}render(){return i.createElement(ToolbarMirroringMenu,Object.assign({},this.props,this.state))}}StateContainer.engineChangeKeys=u.EngineChangeFlags.PathSelection|u.EngineChangeFlags.TreeStore;const g=h.default(StateContainer);function icon(e){switch(e){case 1:return"toolbar-mirror";case 2:return"toolbar-disconnected";case 0:default:return"toolbar-straight"}}function updateSegment(e,t,n){const i=e[t];switch(n){case 1:case 2:{const r={handleMirroring:1===n?"symmetric":"disconnected"},s=0===i.handleInX&&0===i.handleInY,a=0===i.handleOutX&&0===i.handleOutY;if("straight"===i.handleMirroring||"symmetric"===r.handleMirroring&&s&&a){const n=o.PathSegment.curveDefault(e,t),i=o.Point.reverse(n);r.handleOutX=n.x,r.handleOutY=n.y,r.handleInX=i.x,r.handleInY=i.y}else"symmetric"===r.handleMirroring&&(s?(r.handleInX=-i.handleOutX,r.handleInY=-i.handleOutY):a&&(r.handleOutX=-i.handleInX,r.handleOutY=-i.handleInY));return new o.PathSegment(i.merge(r))}default:return new o.PathSegment(i.merge({handleMirroring:"straight",handleOutX:0,handleOutY:0,handleInX:0,handleInY:0}))}}t.ToolbarMirroringMenu=g},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(3),r=n(178),s=n(52);function PopupMenuItem({title:e,action:t,icon:n}){const[o,r]=i.useState(!1);return i.createElement("div",{style:Object.assign({},a,{background:o?"#09f":""}),onMouseEnter:()=>r(!0),onMouseLeave:()=>r(!1),onMouseUp:t},i.createElement(s.Icon,{name:n,width:19,height:19,active:!1,containsActive:!1,style:{marginRight:10}}),e)}t.PopupMenu=function PopupMenu({items:e,point:t}){const n={position:"relative",height:"auto",padding:"10px 0",left:"-50%",transform:"translateY(-100%)",fontWeight:400,display:"flex",flexDirection:"column",placeItems:"center",placeContent:"center",lineHeight:"1",color:o.theme.tooltipColor,backgroundColor:o.theme.tooltipBackground,WebkitBackdropFilter:"blur(10px)",backdropFilter:"blur(10px)",WebkitUserSelect:"none",userSelect:"none",WebkitFontSmoothing:"subpixel-antialiased",WebkitClipPath:r.Squircle.clipPathWithRadius(22.5,3)};return i.createElement("div",{style:{position:"absolute",width:"auto",top:t.y,left:t.x,zIndex:1e5,pointerEvents:"none",transformOrigin:"0% 0%"},className:"framer_popup_menu"},i.createElement("div",{style:n},e.map((e,t)=>i.createElement(PopupMenuItem,{key:t,title:e.title,action:e.action,icon:e.icon}))))};const a={height:28,width:"100%",display:"flex",flexDirection:"row",alignItems:"center",padding:"0 16px",pointerEvents:"auto",WebkitUserSelect:"none",userSelect:"none",cursor:"default"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(10),r=n(800),s=n(802),a=n(883),l=n(888),c=n(5),d=n(13),u=n(3),h=n(890),p=n(2),g=n(6);var m;!function(e){e[e.Node=0]="Node",e[e.Device=1]="Device",e[e.Path=2]="Path",e[e.ShapeContainer=3]="ShapeContainer",e[e.Empty=4]="Empty"}(m||(m={}));class Properties extends i.Component{constructor(){super(...arguments),this.preventDefault=e=>{e.preventDefault()}}static calculateState(){const e=p.default.selection,t=p.default.treeStore.selectionAsNodes,n=p.default.toolStore.state.tool;let i=m.Node;return n===c.Tools.CreateFrame?i=m.Device:n===c.Tools.Path?i=m.Path:n===c.Tools.CreateShapeContainer?i=m.ShapeContainer:0!==e.length&&n!==c.Tools.CreateStackComponent&&n!==c.Tools.CreateScrollComponent&&n!==c.Tools.CreatePageComponent||(i=m.Empty),{selection:e,selectedNodes:t,panelType:i,openArtboardCategories:p.default.documentSettings.openArtboardCategories,componentHash:p.default.canvasStore.componentHash,showPropertiesPanel:p.default.debugStore.showPropertiesPanel,propertyPanelTab:p.default.documentSettings.propertyPanelTab}}panel(e){const{panelType:t,openArtboardCategories:n,selection:o,componentHash:c,propertyPanelTab:d}=this.state;switch(t){case m.Device:return i.createElement(r.DevicePanel,{nodes:e,openCategories:n});case m.Path:return i.createElement(a.PathProperties,{nodes:e});case m.ShapeContainer:return i.createElement(l.ShapeContainerDefaultsPanelContainer,{nodes:e});case m.Empty:return i.createElement(h.PropertiesEmptyState,null);default:return i.createElement(s.NodeProperties,{nodes:e,selection:o,componentHash:c,tab:d})}}render(){const{selectedNodes:e,showPropertiesPanel:t}=this.state;if(!t)return null;const n=this.props.pointerEvents?f:y;return i.createElement("div",{className:"propertyPanel",style:n,onContextMenu:this.preventDefault},this.panel(e))}}Properties.engineChangeKeys=g.EngineChangeFlags.Tree|g.EngineChangeFlags.Selection|g.EngineChangeFlags.Tool|g.EngineChangeFlags.ComponentHash|g.EngineChangeFlags.DebugStore|g.EngineChangeFlags.DocumentSettings,t.PropertiesContainer=o.default(Properties);const f={position:"fixed",width:d.layout.propertyPanelWidth,top:"0px",bottom:d.layout.chromeMarginBottom,right:"0px",backgroundColor:u.theme.propertyPanelBackground,borderLeft:`1px solid ${u.theme.propertyPanelBackgroundDivider}`},y=Object.assign({},f,{pointerEvents:"none"})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(77),r=n(801);t.DevicePanel=class DevicePanel extends i.PureComponent{render(){const{nodes:e,openCategories:t}=this.props;return i.createElement("div",{className:o.invisiblePanelScroller},i.createElement(r.FrameDefaultsPanel,{nodes:e,openCategories:t}))}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(9),r=n(448),s=n(4),a=n(166),l=n(2),c=n(1),d=n(194),u=n(293);t.FrameDefaultsPanel=class FrameDefaultsPanel extends i.Component{constructor(){super(...arguments),this.aroundSelectionAction=()=>{const e=this.selectedNodesToCanvasFrame;null!==e&&this.createDeviceFrame(e)},this.addFrame=(e,t)=>{const n=a.suggestedRect(l.default.tree,e,this.props.nodes.map(e=>e.id));this.createDeviceFrame(n,t)},this.onClickCategory=l.default.wrapHandler((e,t)=>{t?l.default.documentSettings.closeArtboardCategory(e):l.default.documentSettings.openArtboardCategory(e)}),this.createDeviceFrame=l.default.wrapHandler((e,t)=>{const n=l.default.tree,i=n.newId(),r={top:e.y,left:e.x,width:e.width,height:e.height,clip:!0};r.deviceType=t;const a=n.getGroundNodes(t=>{const i=n.getRect(t);return c.Rect.containsRect(e,i)});l.default.createFrame(s.NullID,Object.assign({id:i},r)),o.triggerLayoutFrameEvent({source:"props_panel"}),a.forEach(t=>{const o=n.getRect(t),r=c.Rect.offset(o,c.Point.reverse(e));l.default.moveNode(t.id,i),l.default.updateNode(t.id,t.updateForRect(r,e))}),l.default.exitTool(),l.default.canvasStore.scrollToCenter(c.Rect.center(e)),l.default.setSelection([i])})}render(){let e=null;const t=this.selectedNodesToCanvasFrame;if(this.selectedNodesAllOnCanvas&&t){const{width:n,height:o}=t;e=i.createElement(r.FramerSizeRowContainer,null,i.createElement(r.FrameSizeRow,{key:"around",title:"Around Selection",size:{width:Math.round(n),height:Math.round(o)},onClick:this.aroundSelectionAction}))}const n=[],o=d.getDevices(),s=d.getDeviceCategories(o),a=s["Framer Bezel"];if(a){const e=d.getDeviceKinds(a);Object.keys(e).forEach(t=>{const i=e[t];this.renderDeviceCategory(t,i,n)})}delete s["Framer Bezel"];let l={};for(const i in s){const e=s[i];l=Object.assign({},e,l)}return Object.keys(l).length>0&&this.renderDeviceCategory("custom",l,n),i.createElement("div",null,i.createElement(u.PropertyPanelHint,{type:u.PropertyPanelHintIdentifier.Frame}),e,n)}renderDeviceCategory(e,t,n){const{openCategories:o}=this.props,s=o.contains(e);if(n.push(i.createElement(r.FrameSizeCategoryRow,{key:e,title:e,onClick:this.onClickCategory,open:s})),!s)return;const a=Object.keys(t).map(e=>{const n=t[e],o=n.pixelRatio||1,s={width:Math.round(n.screen.width/o),height:Math.round(n.screen.height/o)},a=n.selector||n.title;return i.createElement(r.FrameSizeRow,{key:e,title:a,size:s,type:e,onClick:this.addFrame})});n.push(i.createElement(r.FramerSizeRowContainer,{key:`${e}-container`},a))}get selectedNodesAllOnCanvas(){const e=l.default.tree,{nodes:t}=this.props;return t.length>0&&void 0===e.withoutDescendants(t).find(t=>null!==e.getParent(t.id))}get selectedNodesToCanvasFrame(){const e=l.default.tree,{nodes:t}=this.props;if(this.selectedNodesAllOnCanvas){const n=e.withoutDescendants(t);return c.Rect.merge(...n.map(t=>e.convertFrameToCanvas(t)))}return null}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(2),r=n(77),s=n(285),a=n(294),l=n(803),c=n(804),d=n(808),u=n(812),h=n(815),p=n(832),g=n(845),m=n(846),f=n(847),y=n(848),v=n(851),b=n(852),k=n(463),S=n(853),C=n(464),x=n(854),w=n(855),T=n(862),P=n(864),E=n(866),F=n(869),M=n(876),_=n(877),O=n(880),I=n(147),D=n(881),N=n(28),R=n(882),A=["Layout","Export"];t.NodeProperties=class NodeProperties extends i.PureComponent{constructor(){super(...arguments),this.popoverPortal=i.createRef(),this.setTab=o.default.wrapHandler(e=>{o.default.documentSettings.propertyPanelTab=e})}layoutTabContent(e){const{nodes:t,selection:n,componentHash:o}=this.props;return i.createElement(i.Fragment,null,i.createElement(c.DeviceSizePanel,{nodes:t,properties:e}),i.createElement(d.PositionPanel,{nodes:t,properties:e}),i.createElement(u.SizePanel,{nodes:t,properties:e}),i.createElement(O.SizeToFitContentPanel,{nodes:t,properties:e}),i.createElement(M.OverflowPanel,{nodes:t,properties:e}),i.createElement(f.default,{nodes:t,properties:e}),i.createElement(y.OpacityRotationRadiusPanel,{nodes:t,properties:e}),i.createElement(g.DesignComponentMasterPanel,{nodes:t,properties:e}),i.createElement(m.DesignComponentInstancePanel,{nodes:t,properties:e}),i.createElement(x.TextColorPanel,{nodes:t,properties:e}),i.createElement(w.TextPanel,{nodes:t,properties:e}),i.createElement(h.LinkPanelContainer,{nodes:t,properties:e}),i.createElement(_.OverridePanel,{nodes:t,properties:e,componentHash:o}),i.createElement(v.default,{properties:e}),i.createElement(b.default,{properties:e}),i.createElement(p.CodeComponentPanel,{nodes:t,properties:e,selection:n}),i.createElement(k.FillPanel,{nodes:t,properties:e}),i.createElement(S.BorderPanel,{nodes:t,properties:e}),i.createElement(C.StrokePanel,{properties:e}),i.createElement(T.ShadowPanel,{nodes:t,properties:e,shadowType:a.ShadowType.Outset}),i.createElement(T.ShadowPanel,{nodes:t,properties:e,shadowType:a.ShadowType.Inset}),i.createElement(P.BlurPanel,{nodes:t,properties:e}),i.createElement(E.FiltersPanel,{nodes:t,properties:e}),!N.experiments.isOn("exportPanel")&&i.createElement(F.ExportPanel,{nodes:t,properties:e,selection:n}))}handoffTabContent(e){const{nodes:t,selection:n}=this.props;return i.createElement(i.Fragment,null,i.createElement("div",{style:{marginTop:-1}},i.createElement(R.CodeExportPanel,{nodes:t,properties:e,selection:n}),i.createElement(F.ExportPanel,{nodes:t,properties:e,selection:n})))}tabContent(){const e=s.reduceProperties(o.default.tree,this.props.nodes);switch(this.props.tab){case"Export":if(N.experiments.isOn("exportPanel"))return this.handoffTabContent(e)}return this.layoutTabContent(e)}render(){return i.createElement("div",{style:L},i.createElement(l.default,{nodes:this.props.nodes}),i.createElement(N.Experiment,{isOn:"exportPanel"},i.createElement(D.TabBar,{selected:this.props.tab,tabs:A,onTab:this.setTab})),i.createElement("div",{className:r.invisiblePanelScroller},this.tabContent(),I.popoverPortal.component()))}};const L={display:"flex",flexDirection:"column",height:"100%"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(449),r=n(175),s=n(2);t.default=class AlignmentHeader extends i.Component{constructor(){super(...arguments),this.alignAction=e=>{const{nodes:t}=this.props;r.ContextAlignment.align(s.default.tree,t,e)},this.distributeAction=e=>{const{nodes:t}=this.props;r.ContextAlignment.distribute(s.default.tree,t,e)}}render(){const{nodes:e}=this.props,t=r.ContextAlignment.alignEnabled(s.default.tree,e),n=r.ContextAlignment.distributeEnabled(e);return i.createElement(o.default,{alignActionsEnabled:t,distributeActionsEnabled:n,alignAction:this.alignAction,distributeAction:this.distributeAction})}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(17),r=n(805),s=n(807);t.DeviceSizePanel=class DeviceSizePanel extends i.Component{render(){const{nodes:e,properties:t}=this.props;if(!t.onlyCanvasFrameNodes)return null;const n=e;return i.createElement(o.default,{nodes:e,style:{borderTop:void 0}},i.createElement(r.DevicePickerRow,{nodes:n}),i.createElement(s.OrientationRow,{nodes:n}))}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(2),r=n(194),s=n(25),a=n(79),l=n(8);t.DevicePickerRow=class DevicePickerRow extends i.Component{constructor(){super(...arguments),this.removeDevice=o.default.wrapHandler(()=>{o.default.updateNodesDirect(this.props.nodes,{deviceType:null,previewSettings:null})}),this.onChoooseDevice=o.default.wrapHandler(e=>{const{nodes:t}=this.props,n=o.default.tree,i=this.devices[e];if(!i.screen)return;const r=i.pixelRatio||1,s=i.screen.width/r,a=i.screen.height/r;let l=!0;t.forEach(t=>{const i=t.rect(null);l=i.height>=i.width;const o=s>a;n.updateNode(t,{width:l||o?s:a,height:l||o?a:s,aspectRatio:null,deviceType:e})})}),this.getItemLabel=e=>this.labels[e]||e}render(){const{nodes:e}=this.props;if(0===e.length)return null;const t=[];let n=!0;this.devices=r.getDevices(),this.labels={};for(const i in this.devices){const e=this.devices[i];this.labels[i]=e.selector||e.title,t.push(i)}const o=e.map(e=>s.hasRotation(e)&&0!==e.rotation?(n=!1,null):e.deviceType&&this.devices[e.deviceType]?e.deviceType:null),c=new Set(o);return i.createElement(l.default,{title:"Device"},i.createElement(a.PopupButton,{enabled:n},i.createElement(a.PopupButtonItem,{key:"no-device",title:r.NoDevice,selected:c.has(null),onSelect:this.removeDevice}),t.map(e=>i.createElement(a.PopupButtonItem,{key:e,identifier:e,title:this.getItemLabel,selected:c.has(e),onSelect:this.onChoooseDevice}))))}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0);t.default=class CheckBoxInput extends i.PureComponent{constructor(){super(...arguments),this.setInputElement=e=>{this.inputElement=e},this.onChange=e=>{const{onChange:t,id:n}=this.props;t(e.target.checked,n)}}componentDidMount(){this.updateIndeterminateState()}componentDidUpdate(){this.updateIndeterminateState()}updateIndeterminateState(){null!==this.inputElement&&(this.inputElement.indeterminate=null===this.props.value)}render(){const{value:e,id:t,disabled:n}=this.props;return i.createElement("input",{type:"checkbox",checked:!0===e,disabled:!0===n,style:o,onChange:this.onChange,ref:this.setInputElement,id:t,tabIndex:-1})}};const o={position:"absolute",top:11,left:10,width:12,height:12,margin:0}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(8),r=n(47),s=n(26),a=n(2),l=n(220);t.OrientationRow=class OrientationRow extends i.Component{constructor(){super(...arguments),this.onSelect=a.default.wrapHandler(e=>{const{nodes:t}=this.props;if(this.orientationIndex(t)===e)return;const n=a.default.tree;t.forEach(t=>{const i=t.rect(null),o=Math.max(i.width,i.height),r=Math.min(i.width,i.height),s=0===e,a=t.aspectRatio;l.updateFrameNodePreviewSettings(t.id,{rotate:!s}),n.updateNode(t,{width:s?r:o,height:s?o:r,aspectRatio:a?1/a:a})})})}render(){const{nodes:e}=this.props;if(0===e.length)return null;let t=!1;return e.forEach(e=>{t=t||e.width!==e.height}),i.createElement(o.default,{title:"Orientation"},i.createElement(r.SegmentedControl,{titles:c,icons:d,onSelect:this.onSelect,selectedIndex:this.orientationIndex(this.props.nodes),style:u,enabled:t}))}orientationIndex(e){const t=this.props.nodes.map(e=>{const t=e.rect(null);return t.width===t.height?null:t.height>t.width});switch(s.commonValue(t)){case null:return-1;case!1:return 1;default:return 0}}};const c=["Portrait","Landscape"],d=["icon-artboard-portrait","icon-artboard-landscape"],u={width:130}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(4),r=n(17),s=n(809),a=n(811),l=n(34),c=n(40),d=n(39),u=n(2),h=n(131),p=n(147);function hasMaxActivePinsEnabled(e){const t=function activePinCount(e){const t=e.constraints();let n=0;return t.left&&n++,t.right&&n++,t.top&&n++,t.bottom&&n++,n}(e);return h.hasAutoSize(e)&&(e.autoSize||o.isShapeContainerNode(e))?2===t:4===t}t.PositionPanel=class PositionPanel extends i.Component{constructor(){super(...arguments),this.state={mouseOver:!1},this.constrainedNodes=()=>{const{nodes:e}=this.props;return e.filter(e=>u.default.tree.isConstrained(e)&&!e.cache.parentDirected)},this.toggleAllPins=u.default.wrapHandler(()=>{const e=u.default.tree,t=this.constrainedNodes(),n=t.every(hasMaxActivePinsEnabled);t.forEach(t=>{const i=e.getRect(t),r=e.getParentSize(t);if(null===r)return;const s=t.constraints();if(s.aspectRatio=null,n)s.top=!1,s.bottom=!1,s.left=!1,s.right=!1;else if(o.isShapeContainerNode(t)||h.hasAutoSize(t)&&t.autoSize){const e=c.guessConstraints(i,r,void 0,!0);s.left=e.left,s.right=!e.left,s.top=e.top,s.bottom=!e.top}else s.top=!0,s.bottom=!0,s.left=!0,s.right=!0;const a=c.updateConstrainedFrame(i,r,s,!0);a.constraintsLocked=!0,d.hasAspectRatio(t)&&(a.aspectRatio=null),u.default.updateNode(t.id,a)})}),this.toggleOnePin=u.default.wrapHandler(e=>{const t=u.default.tree,n=this.constrainedNodes(),{properties:i}=this.props,o=e;n.forEach(e=>{const n=!0!==(i[function pinEnabledKey(e){switch(e){case"top":return"pinTop";case"right":return"pinRight";case"bottom":return"pinBottom";case"left":return"pinLeft";default:return e}}(o)]||null),r=c.setConstraint(e.constraints(),o,n),s=t.getRect(e),a=t.getParentSize(e);if(null===a)return;const l=c.updateConstrainedFrame(s,a,r,!0);l.constraintsLocked=!0,u.default.updateNode(e.id,l)})}),this.mouseEnter=e=>{p.popoverPortal.isOpen()||(this.setState({mouseOver:!0}),e.preventDefault())},this.mouseLeave=e=>{this.setState({mouseOver:!1}),e.preventDefault()},this.constraintsLockAction=u.default.wrapHandler(()=>{const{properties:e}=this.props,t=this.constrainedNodes();u.default.updateNodesDirect(t,{constraintsLocked:!1===e.constraintsLocked})})}render(){const e=u.default.tree,{nodes:t,properties:n}=this.props,{mouseOver:o}=this.state;if(void 0===n.x)return null;const c=t[0];let d=null;o&&1===t.length&&c&&l.isPinnable(c)&&e.isConstrained(c)&&(d=i.createElement(a.ConstraintsSimulation,{node:c}));const h={borderTop:"none"};return n.onlyCanvasFrameNodes&&(h.marginTop=-5,h.paddingTop=0),null!==d&&(h.height=286),i.createElement(r.default,{nodes:t,style:h},i.createElement(s.PositionRow,{properties:n,onAllPins:this.toggleAllPins,onOnePin:this.toggleOnePin,constraintsAction:this.constraintsLockAction,mouseEnter:this.mouseEnter,mouseLeave:this.mouseLeave}),d)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(8),r=n(30),s=n(810),a=n(2),l=n(34),c=n(1),d=["X"],u=["Y"],h=["T"],p=["L"],g=["R"],m=["B"];t.PositionRow=class PositionRow extends i.Component{constructor(){super(...arguments),this.xChange=a.default.wrapHandler(e=>{const t=a.default.tree,{properties:n}=this.props;n.withoutDescendants.forEach(n=>{if(n.cache.parentDirected)return;const i=t.getParent(n.id);if(l.isPinnable(n)&&i&&c.isFiniteNumber(n.left)&&c.isFiniteNumber(n.right))a.default.updateNode(n.id,{left:Math.round(Number(e))});else{const o=t.getRect(n);o.x=Number(e);const r=n.updateForRect(o,i?t.getRect(i):null);a.default.updateNode(n.id,r)}})}),this.yChange=a.default.wrapHandler(e=>{const t=a.default.tree,{properties:n}=this.props;n.withoutDescendants.forEach(n=>{if(n.cache.parentDirected)return;const i=t.getParent(n.id);if(l.isPinnable(n)&&i&&c.isFiniteNumber(n.top)&&c.isFiniteNumber(n.bottom))a.default.updateNode(n.id,{top:Math.round(Number(e))});else{const o=t.getRect(n);o.y=Number(e);const r=n.updateForRect(o,i?t.getRect(i):null);a.default.updateNode(n.id,r)}})}),this.rightChange=a.default.wrapHandler(e=>{const t=a.default.tree,{properties:n}=this.props;n.withoutDescendants.forEach(n=>{if(n.cache.parentDirected)return;if(!l.isPinnable(n))return;const i=t.getParent(n.id);if(i)if(c.isFiniteNumber(n.left)&&c.isFiniteNumber(n.right))a.default.updateNode(n.id,{right:Number(e)});else{const o=t.getRect(i),r=t.getRect(n);r.x=o.width-Number(e)-r.width;const s=n.updateForRect(r,i?o:null);a.default.updateNode(n.id,s)}})}),this.bottomChange=a.default.wrapHandler(e=>{const t=a.default.tree,{properties:n}=this.props;n.withoutDescendants.forEach(n=>{if(n.cache.parentDirected)return;if(!l.isPinnable(n))return;const i=t.getParent(n.id);if(i)if(c.isFiniteNumber(n.top)&&c.isFiniteNumber(n.bottom))a.default.updateNode(n.id,{bottom:Number(e)});else{const o=t.getRect(i),r=t.getRect(n);r.y=o.height-Number(e)-r.height;const s=n.updateForRect(r,i?o:null);a.default.updateNode(n.id,s)}})})}render(){const{properties:e}=this.props,{x:t,y:n,right:a,bottom:l,withoutDescendants:c}=e,f=c.length>0;return f&&void 0===e.pinTop?i.createElement(o.default,{title:"Position"},i.createElement(r.NumberInput,{value:t,onChange:this.xChange,enabled:f,label:d}),i.createElement(r.NumberInput,{value:n,onChange:this.yChange,enabled:f,label:u})):i.createElement(o.default,{style:{display:"block",height:136}},i.createElement("div",{style:{position:"absolute",top:0,left:75}},i.createElement(r.NumberInput,{value:n,onChange:this.yChange,enabled:f,label:h})),i.createElement("div",{style:{position:"absolute",top:51}},i.createElement(r.NumberInput,{value:t,onChange:this.xChange,enabled:f,label:p})),i.createElement("div",{style:{position:"absolute",top:51,right:5}},i.createElement(r.NumberInput,{value:a,onChange:this.rightChange,enabled:f,label:g})),i.createElement("div",{style:{position:"absolute",top:102,left:75}},i.createElement(r.NumberInput,{value:l,onChange:this.bottomChange,enabled:f,label:m})),i.createElement(s.ConstraintsInput,{properties:e,onAllPins:this.props.onAllPins,onOnePin:this.props.onOnePin,constraintsAction:this.props.constraintsAction,mouseEnter:this.props.mouseEnter,mouseLeave:this.props.mouseLeave}))}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(3),r=n(452);t.ConstraintsInput=class ConstraintsInput extends i.PureComponent{constructor(){super(...arguments),this.activeIndex=e=>{switch(e){case!1:return 0;case!0:return 1;default:return 2}},this.leftAction=()=>{const{properties:e,onOnePin:t}=this.props;e.canSetLeft&&t("left")},this.rightAction=()=>{const{properties:e,onOnePin:t}=this.props;e.canSetRight&&t("right")},this.topAction=()=>{const{properties:e,onOnePin:t}=this.props;e.canSetTop&&t("top")},this.bottomAction=()=>{const{properties:e,onOnePin:t}=this.props;e.canSetBottom&&t("bottom")}}render(){const{properties:e,mouseEnter:t,mouseLeave:n,onAllPins:o}=this.props,l=void 0!==e.pinTop,c=["layout-pin-horizontal","layout-pin-horizontal-active","layout-pin-horizontal-mixed"],g=["layout-pin-vertical","layout-pin-vertical-active","layout-pin-vertical-mixed"];return i.createElement("div",{style:s(l),onMouseEnter:t,onMouseLeave:n},i.createElement("div",null,i.createElement("div",{style:a(l),onClick:o}),l?i.createElement("div",null,i.createElement(r.IconState,{title:"Pin Left",activeIndex:this.activeIndex(e.pinLeft),width:18,height:19,names:c,style:d,onClick:this.leftAction}),i.createElement(r.IconState,{title:"Pin Right",activeIndex:this.activeIndex(e.pinRight),width:18,height:19,names:c,style:u,onClick:this.rightAction}),i.createElement(r.IconState,{title:"Pin Top",activeIndex:this.activeIndex(e.pinTop),width:19,height:17,names:g,style:h,onClick:this.topAction}),i.createElement(r.IconState,{title:"Pin Bottom",activeIndex:this.activeIndex(e.pinBottom),width:19,height:17,names:g,style:p,onClick:this.bottomAction})):null))}};const s=e=>({position:"absolute",left:80,top:39,width:"60px",height:"58px",backgroundColor:o.theme.propertyPanelInputBackground,border:`1px solid ${e?o.theme.propertyPanelInputBorder:o.theme.propertyPanelInputBorderInactive}`,borderRadius:3}),a=e=>({position:"absolute",top:"18px",left:"18px",width:"22px",height:"20px",border:`1px solid ${o.theme.pinsFrameBorder}`,borderRadius:2}),l={position:"absolute",height:19,width:18,top:18},c={position:"absolute",height:17,width:19,left:19},d=Object.assign({},l,{left:0}),u=Object.assign({},l,{right:0}),h=Object.assign({},c,{top:0}),p=Object.assign({},c,{bottom:0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(4),r=n(3),s=n(1),a=n(8),l=n(2),c=n(39),d=60,u=d-20;t.ConstraintsSimulation=function ConstraintsSimulation(e){const{node:t}=e,n=l.default.tree.getParentSize(t);let g=20,m=20,f=null,y=null,v=null,b=null;if(null!==n){const e=t.rect(n),i=60;f=null!==t.left?t.left/n.width*i:null,y=null!==t.right?t.right/n.width*i:null,v=null!==t.top?t.top/n.height*i:null,b=null!==t.bottom?t.bottom/n.height*i:null,g=e.width/n.height*i,m=e.height/n.height*i}const k=new o.FrameNode({width:g,height:m,fillColor:"rgba(0,170,255,0.5)",borderEnabled:1,borderColor:r.theme.tint,borderWidth:1,left:f,right:y,top:v,bottom:b,centerAnchorX:t.centerAnchorX,centerAnchorY:t.centerAnchorY,aspectRatio:c.hasAspectRatio(t)?t.aspectRatio:null,widthType:t.widthType,heightType:t.heightType}).getProps();return i.createElement(a.default,{title:"Simulation"},i.createElement("div",{style:h},i.createElement(s.FrameWithMotion,{style:p,animate:{width:[d,d,d,u,d],height:[d,u,d,d,d]},transition:{ease:"easeInOut",duration:2,loop:1/0}},i.createElement(s.FrameWithMotion,Object.assign({},k)))))};const h={position:"relative",height:130,width:130,margin:"5px 5px 0 5px",backgroundColor:r.theme.propertyPanelInputBackground,border:`1px solid ${r.theme.propertyPanelInputBorder}`,borderRadius:3,zIndex:1e3,overflow:"hidden"},p={position:"absolute",width:d,height:d,border:`1px solid ${r.theme.constraintsReferenceFrame}`,backgroundColor:r.theme.propertyPanelInputBackground,borderRadius:1,top:35,left:35}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(17),r=n(813);t.SizePanel=class SizePanel extends i.Component{render(){const{nodes:e,properties:t}=this.props,n=void 0===t.x,s=n?5:-5,a=n?void 0:0;return i.createElement(o.default,{nodes:e,style:{borderTop:"none",paddingTop:a,marginTop:s}},i.createElement(r.SizeRow,{properties:t}))}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(1),r=n(2),s=n(30),a=n(8),l=n(814),c=n(4),d=n(141),u=n(39),h=n(34),p=n(131),g=n(40),m=n(79);t.SizeRow=class SizeRow extends i.Component{constructor(){super(...arguments),this.setWidthInput=e=>{this.widthInput=e},this.setHeightInput=e=>{this.heightInput=e},this.widthChange=r.default.wrapHandler((e,t)=>{const n=r.default.tree,{properties:i}=this.props;let s=o.DimensionType.FixedNumber;if(i.width){const e=valueToDimensionType(i.width);null!==e&&(s=e)}if(t){const e=valueToDimensionType(t);null!==e&&(s=e)}if(canSetDimensionType(s,n,i))switch(s){case o.DimensionType.Percentage:return void r.default.updateNodesForEach(i.withoutDescendants,t=>{if(!h.isPinnable(t))return;if(!n.getParent(t.id))return;const i=Number(e)/100,r={widthType:o.DimensionType.Percentage,width:i};return o.isFiniteNumber(t.left)&&o.isFiniteNumber(t.right)&&(r.right=null),r});case o.DimensionType.FractionOfFreeSpace:return void r.default.updateNodesForEach(i.withoutDescendants,t=>({width:Number(e),widthType:o.DimensionType.FractionOfFreeSpace}));case o.DimensionType.Auto:return void r.default.updateNodesForEach(i.withoutDescendants,e=>({widthType:o.DimensionType.Auto}));case o.DimensionType.FixedNumber:{const t={width:Math.max(Number(e),1)},{nodes:s,shapes:a}=splitShapes(i);r.default.updateNodesForEach(s,e=>{const i=n.getParent(e.id);return h.isPinnable(e)&&n.updateNode(e,{widthType:o.DimensionType.FixedNumber}),e.futureOrCurrent().updateForSize(t,i?n.getRect(i):null)}),d.updateNodeSizeForEach(r.default,a,()=>t)}}else this.widthInput&&this.widthInput.reset()}),this.heightChange=r.default.wrapHandler((e,t)=>{const n=r.default.tree,{properties:i}=this.props;let s=o.DimensionType.FixedNumber;if(i.height){const e=valueToDimensionType(i.height);null!==e&&(s=e)}if(t){const e=valueToDimensionType(t);null!==e&&(s=e)}if(canSetDimensionType(s,n,i))switch(s){case o.DimensionType.Percentage:return void r.default.updateNodesForEach(i.withoutDescendants,t=>{if(!h.isPinnable(t))return;if(!n.getParent(t.id))return;const i={height:Number(e)/100,heightType:o.DimensionType.Percentage};return o.isFiniteNumber(t.top)&&o.isFiniteNumber(t.bottom)&&(i.bottom=null),i});case o.DimensionType.FractionOfFreeSpace:return void r.default.updateNodesForEach(i.withoutDescendants,t=>({height:Number(e),heightType:o.DimensionType.FractionOfFreeSpace}));case o.DimensionType.Auto:return void r.default.updateNodesForEach(i.withoutDescendants,e=>({heightType:o.DimensionType.Auto}));case o.DimensionType.FixedNumber:{const t={height:Math.max(Number(e),1)},{nodes:s,shapes:a}=splitShapes(i);r.default.updateNodesForEach(s,e=>{const i=n.getParent(e.id);return h.isPinnable(e)&&n.updateNode(e,{heightType:o.DimensionType.FixedNumber}),e.futureOrCurrent().updateForSize(t,i?n.getRect(i):null)}),d.updateNodeSizeForEach(r.default,a,()=>t)}}else this.heightInput&&this.heightInput.reset()}),this.onClickPadlock=r.default.wrapHandler(()=>{const e=r.default.tree,{properties:t}=this.props,n=!0!==t.aspectRatioEnabled;r.default.updateNodesForEach(t.withoutDescendants,t=>{if(!u.hasAspectRatio(t))return;const i=e.getRect(t),r=i.width/i.height,s=n?r:null;if(!h.isPinnable(t))return{aspectRatio:s};const a=e.getRect(t),l=e.getParentSize(t),c=o.ConstraintMask.quickfix(Object.assign({},t.constraints(),{aspectRatio:s})),d=g.updateConstrainedFrame(a,l,c,!0);return Object.assign({aspectRatio:s},d)})}),this.onChangeWidthDimension=r.default.wrapHandler(e=>{const t=r.default.tree,{properties:n}=this.props;-1===disabledDimensionTypes(t,n).indexOf(e)&&n.withoutDescendants.forEach(n=>{let i=1;const s=t.getRect(n);switch(e){case o.DimensionType.FixedNumber:i=s.width;break;case o.DimensionType.Percentage:{const e=t.getParent(n.id);if(!e)return;const o=t.getRect(e);i=s.width/Math.max(o.width,1);break}}const a={width:i,widthType:e};h.isPinnable(n)&&o.isFiniteNumber(n.left)&&o.isFiniteNumber(n.right)&&(a.right=null),r.default.updateNode(n.id,a)})}),this.onChangeHeightDimension=r.default.wrapHandler(e=>{const t=r.default.tree,{properties:n}=this.props;-1===disabledDimensionTypes(t,this.props.properties).indexOf(e)&&n.withoutDescendants.forEach(n=>{let i=1;const s=t.getRect(n);switch(e){case o.DimensionType.FixedNumber:i=s.height;break;case o.DimensionType.Percentage:{const e=t.getParent(n.id);if(!e)return;const o=t.getRect(e);i=s.height/Math.max(o.height,1);break}}const a={height:i,heightType:e};h.isPinnable(n)&&o.isFiniteNumber(n.top)&&o.isFiniteNumber(n.bottom)&&(a.bottom=null),r.default.updateNode(n.id,a)})})}render(){const e=r.default.tree,{properties:t}=this.props,{width:n,height:o,withoutDescendants:c,aspectRatioEnabled:d}=t,u=c.length>0,h=i.createElement(s.NumberInput,{value:n,onChange:this.widthChange,enabled:u,min:0,label:t.onlyShapeAndGraphicNodes?["W"]:void 0,ref:this.setWidthInput}),p=i.createElement(s.NumberInput,{value:o,onChange:this.heightChange,enabled:u,min:0,label:t.onlyShapeAndGraphicNodes?["H"]:void 0,ref:this.setHeightInput});if(t.onlyShapeAndGraphicNodes)return i.createElement(a.default,{title:"Size"},void 0!==d&&i.createElement(l.default,{active:!0===d,onClick:this.onClickPadlock,inline:!0}),h,p);const g=disabledDimensionTypes(e,t);return i.createElement(i.Fragment,null,i.createElement(a.default,{title:"Width"},void 0!==d&&i.createElement(l.default,{active:!0===d,onClick:this.onClickPadlock,inline:!1}),h,i.createElement(m.PopupButton,{style:f},v.map(e=>i.createElement(m.PopupButtonItem,{key:e,identifier:e,title:dimensionTitle,enabled:g.every(t=>t!==e),selected:t.widthTypes.some(t=>t===e),onSelect:this.onChangeWidthDimension})))),i.createElement(a.default,{title:"Height"},p,i.createElement(m.PopupButton,{style:f},v.map(e=>i.createElement(m.PopupButtonItem,{key:e,identifier:e,title:dimensionTitle,enabled:g.every(t=>t!==e),selected:t.heightTypes.some(t=>t===e),onSelect:this.onChangeHeightDimension})))))}};const f={width:60,paddingLeft:3.5,letterSpacing:-.2};var y;function dimensionTitle(e){switch(e){case o.DimensionType.FixedNumber:return y.FixedNumber;case o.DimensionType.Percentage:return y.Percentage;case o.DimensionType.FractionOfFreeSpace:return y.FractionOfFreeSpace;case o.DimensionType.Auto:return y.Auto}}!function(e){e.FixedNumber="Fixed",e.Percentage="Relative",e.FractionOfFreeSpace="Fraction",e.Auto="Fit"}(y||(y={}));const v=[o.DimensionType.FixedNumber,o.DimensionType.Percentage,o.DimensionType.FractionOfFreeSpace];function disabledDimensionTypes(e,t){let n=!0,i=!0,r=!0;const{withoutDescendants:s}=t;for(let o=0,l=s.length;o<l;o++){const t=s[o];if(!h.isPinnable(t)){n=!1,i=!1,r=!1;break}if(p.hasAutoSize(t)&&!0===t.autoSize){n=!1,i=!1,r=!1;break}t.hasAutoSize()||(r=!1);const a=e.getParent(t.id);if(a?a.providesFreeSpace()||(i=!1):(n=!1,i=!1),!n&&!i&&!r)break}const a=[];return n||a.push(o.DimensionType.Percentage),i||a.push(o.DimensionType.FractionOfFreeSpace),r||a.push(o.DimensionType.Auto),a}function canSetDimensionType(e,t,n){if(e===o.DimensionType.FixedNumber)return!0;const{withoutDescendants:i}=n;for(let r=0,s=i.length;r<s;r++){const n=i[r],s=t.getParent(n.id);if(p.hasAutoSize(n)&&"boolean"==typeof n.autoSize&&n.autoSize)return!1;switch(e){case o.DimensionType.Percentage:if(!h.isPinnable(n))return!1;if(!s)return!1;break;case o.DimensionType.FractionOfFreeSpace:if(!s)return!1;if(!s.providesFreeSpace())return!1;break;case o.DimensionType.Auto:return n.hasAutoSize(),!1}}return!0}function splitShapes(e){const t=[],n=[],{withoutDescendants:i}=e;for(let o=0,r=i.length;o<r;o++){const e=i[o];c.isVectorNode(e)||c.isShapeContainerNode(e)?t.push(e):n.push(e)}return{shapes:t,nodes:n}}function valueToDimensionType(e){if("string"!=typeof e)return null;const t=e.trim();return"auto"===t?o.DimensionType.Auto:t.endsWith("fr")?o.DimensionType.FractionOfFreeSpace:t.endsWith("%")?o.DimensionType.Percentage:t.endsWith("px")||t.endsWith("pt")?o.DimensionType.FixedNumber:null}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(452),r=["aspect-ratio-lock","aspect-ratio-lock-active"],s=["aspect-ratio-lock-inline","aspect-ratio-lock-inline-active"];t.default=i.memo(function Padlock({active:e,onClick:t,inline:n}){return i.createElement(o.IconState,{activeIndex:e?1:0,names:n?s:r,height:n?9:36,width:10,style:n?l:a,onClick:t})});const a={position:"absolute",width:14,height:36,left:60,top:16,zIndex:10},l=Object.assign({},a,{top:7,height:20})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(10),r=n(816),s=n(6),a=n(2);class NavigationToolActiveContainer extends i.Component{static calculateState(){return{tool:a.default.toolStore.state.tool}}render(){const{nodes:e,properties:t}=this.props;return i.createElement(r.LinkPanel,{nodes:e,properties:t,tool:this.state.tool})}}NavigationToolActiveContainer.engineChangeKeys=s.EngineChangeFlags.ToolStore,t.LinkPanelContainer=o.default(NavigationToolActiveContainer)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(17),r=n(38),s=n(8),a=n(47),l=n(4),c=n(42),d=n(119),u=n(2),h=n(5),p=n(268),g=n(1),m=n(26),f=n(103),y=n(281),v=n(122),b=n(30),k=n(79);t.LinkPanel=class LinkPanel extends i.Component{constructor(){super(...arguments),this.onRemoveTarget=u.default.wrapHandler(()=>{const{nodes:e}=this.props,t=e.filter(d.hasNavigationLink);u.default.updateNodesDirect(t,{navigationTarget:l.NullID}),u.default.setTool(new p.HighlightTool)}),this.onSelectDirection=u.default.wrapHandler(e=>{const{nodes:t}=this.props,n=S[e],i=t.filter(e=>d.hasNavigationLink(e)&&null!==e.navigationTarget);u.default.updateNodesDirect(i,{navigationTransitionDirection:n})}),this.onChangeBackdrop=u.default.wrapHandler(e=>{const{nodes:t}=this.props,n=t.filter(e=>d.hasNavigationLink(e)&&null!==e.navigationTarget);u.default.updateNodesDirect(n,{navigationTransitionBackdropColor:e})}),this.onChangeBackdropAlpha=u.default.wrapHandler(e=>{const{properties:t,nodes:n}=this.props,i=t.navigationTransitionBackdrop||"white",o=g.ConvertColor.setAlpha(i,e/100),r=n.filter(e=>d.hasNavigationLink(e)&&null!==e.navigationTarget);u.default.updateNodesDirect(r,{navigationTransitionBackdropColor:o})}),this.changeTarget=u.default.wrapHandler(e=>{const t=this.props.nodes.filter(d.hasNavigationLink);u.default.updateNodesDirect(t,{navigationTarget:e}),u.default.setTool(new p.HighlightTool)}),this.onChangeTarget=e=>{this.changeTarget(e)},this.removeTarget=()=>{this.changeTarget(null)},this.navigateToPrevious=()=>{this.changeTarget(g.NavigateTo.Previous)},this.onChangeTransition=u.default.wrapHandler(e=>{const t=this.props.nodes.filter(e=>d.hasNavigationLink(e)&&null!==e.navigationTarget);u.default.updateNodesDirect(t,{navigationTransition:e}),u.default.setTool(new p.HighlightTool)})}render(){const e=u.default.tree,{nodes:t,properties:n,tool:l}=this.props;if(1!==t.length)return null;const d=t[0];if(!y.isValidLinkSource(e,d))return null;const p=function possibleTargetNodes(e,t){return e.getGroundNodes().filter(n=>y.isValidLinkTarget(e,n,t))}(e,d),f=[];if(0===n.navigationTargets.length)return null;p.forEach((e,t)=>{-1!==n.navigationTargets.indexOf(e.id)&&f.push(t+3)}),-1!==n.navigationTargets.indexOf(null)&&f.push(0),-1!==n.navigationTargets.indexOf(g.NavigateTo.Previous)&&f.push(1);const S=1===n.navigationTargets.length&&null===n.navigationTargets[0]&&!(l===h.Tools.NavigationLink);let T,P;S?T={action:u.default.wrapHandler(()=>{u.default.setToolEnum(h.Tools.NavigationLink)})}:P={action:this.onRemoveTarget,enabled:!0};const E=m.commonValue(n.navigationTransitions),F=function showDirectionUI(e){switch(e){case g.NavigationTransitionType.push:case g.NavigationTransitionType.overlay:case g.NavigationTransitionType.flip:return!0;default:return!1}}(E),M=function showBackdropUI(e){switch(e){case g.NavigationTransitionType.modal:case g.NavigationTransitionType.overlay:return!0;default:return!1}}(E);return i.createElement(o.default,{nodes:t,withHeader:!0,empty:S},i.createElement(r.PanelHeader,{title:"Link",empty:S,addition:T,subtraction:P}),!S&&i.createElement(s.default,{title:"Target"},i.createElement(k.PopupButton,null,i.createElement(k.PopupButtonItem,{title:"None",selected:n.navigationTargets.some(e=>null===e),onSelect:this.removeTarget}),i.createElement(k.PopupButtonItem,{title:"Previous Frame",selected:n.navigationTargets.some(e=>e===g.NavigateTo.Previous),onSelect:this.navigateToPrevious}),i.createElement(k.PopupButtonItem,{type:"divider"}),p.map(e=>i.createElement(k.PopupButtonItem,{key:e.id,identifier:e.id,title:e.name||c.defaultName(e),onSelect:this.onChangeTarget,selected:n.navigationTargets.some(t=>t===e.id)})))),!S&&n.navigationTransitions.length>0&&i.createElement(s.default,{title:"Transition"},i.createElement(k.PopupButton,null,w.map(e=>i.createElement(k.PopupButtonItem,{key:e,identifier:e,title:transitionTitle,onSelect:this.onChangeTransition,selected:n.navigationTransitions.some(t=>t===e)})))),F&&i.createElement(s.default,{title:"Direction"},i.createElement(a.SegmentedControl,{titles:C,selectedIndex:directionIndex(n.navigationTransitionDirections),onSelect:this.onSelectDirection,icons:x,style:{width:130}})),M&&i.createElement(s.default,{title:"Backdrop"},i.createElement(v.ColorPicker,{value:n.navigationTransitionBackdrop||"",onChangeColor:this.onChangeBackdrop,inputWidth:60,trackingMetadata:v.trackingMetadata(t,"navigationTransitionBackdropColor")}),i.createElement(b.NumberInput,{value:n.navigationTransitionBackdrop?Math.round(100*g.ConvertColor.getAlpha(n.navigationTransitionBackdrop)):"",min:0,max:100,unit:"%",onChange:this.onChangeBackdropAlpha})))}};const S=["left","right","up","down"],C=S.map(f.capitalizeFirstLetter),x=["icon-link-direction-left","icon-link-direction-right","icon-link-direction-top","icon-link-direction-bottom"];function directionIndex(e){const t=m.commonValue(e);return t?S.indexOf(t):-1}const w=[g.NavigationTransitionType.push,g.NavigationTransitionType.overlay,g.NavigationTransitionType.modal,g.NavigationTransitionType.instant,g.NavigationTransitionType.fade,g.NavigationTransitionType.flip];function transitionTitle(e){switch(e){case g.NavigationTransitionType.push:return"Push";case g.NavigationTransitionType.instant:return"Instant";case g.NavigationTransitionType.fade:return"Fade";case g.NavigationTransitionType.modal:return"Modal";case g.NavigationTransitionType.overlay:return"Overlay";case g.NavigationTransitionType.flip:return"Flip"}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(9),r=n(1),s=n(2),a=n(44),l=n(76),c=n(51),d=n(5),u=n(69),h=n(93),p=n(453),g=n(454),m=n(225),f=n(819),y=n(211),v=n(95),b=n(118),k=n(91),S=n(822),C=n(825),x=n(828),w=n(829),T=n(830),P=n(831),E=n(139),F=n(77),M=n(295);function mainStyle(e){return{width:"100%",position:e?"absolute":"relative",transform:e?"translateX(-30%)":void 0,opacity:e?0:1,transition:".25s transform, .25s opacity",pointerEvents:e?"none":void 0,top:0,left:0,display:"flex",flexDirection:"column"}}t.ColorPickerPopover=class ColorPickerPopover extends i.Component{constructor(e){super(e),this.popoverRef=i.createRef(),this.scrollRef=i.createRef(),this.activePreset=new S.ActivePreset,this.onScroll=e=>{const t=e.target.scrollTop>0;t!==this.state.displaySeparator&&this.setState({displaySeparator:t})},this.setGradientTool=s.default.wrapHandler(()=>{s.default.setToolEnum(d.Tools.Gradient)}),this.setEditingToken=e=>{const t=!!e;this.state.editingToken===e&&this.state.displayTokenEdit===t||this.setState({editingToken:e,displayTokenEdit:t})},this.doneEditingToken=()=>{this.setEditingToken(null)},this.addAction=()=>{const{currentType:e,colorPresets:t,gradientColorStopPresets:n,value:i}=this.props;if((this.state.selectedTokenPackageOverride||this.props.selectedTokenPackage)!==E.ColorPresetsKey)this.setState({editingToken:null,displayTokenEdit:!0});else{const o="image"!==e&&"linear-gradient"!==e&&"radial-gradient"!==e?t:n,r=h.isColorToken(i)?i.value:i;S.isFillInPresets(r,o)?this.activePreset.highlight():M.addPreset("string"==typeof r?r:r.stops)}},this.createTokenAction=s.default.wrapHandler(e=>{const t=null===this.state.editingToken,n=new h.ColorTokenNode(e);if(s.default.tree.root.setToken(n),this.setState({displayTokenEdit:!1}),this.onSelectToken(n),t){const e=this.props.tokenPackages[r.localPackageFallbackIdentifier];o.triggerColorTokenCreateEvent({tokenId:n.id,totalTokenCount:e.tokensCount})}}),this.onKeyDown=e=>{if(a.default.isKey(e,a.default.Key.escape))if(this.state.displayTokenEdit)this.setEditingToken(null);else{const t=this.popoverRef.current;t&&t.close(),e.stopPropagation()}},this.onChangeColor=e=>{this.props.onChangeColor(e,this.props.colorStopSelection)},this.onSelectToken=(e,t)=>{const n=c.tokenToCSSVariable(e,{packageIdentifier:t});this.props.onChangeColor(n,this.props.colorStopSelection);const i=this.props.tokenPackages[t||r.localPackageFallbackIdentifier];o.triggerColorTokenSetEvent(Object.assign({tokenId:e.id,packageName:!1===i.isLocal?i.packageIdentifier:void 0,totalTokenCount:i.tokensCount},this.props.trackingMetadata))},this.onPresetSelect=e=>{"string"==typeof e?this.props.onChangeColor(e,this.props.colorStopSelection):this.props.onChangeColorStops&&this.props.onChangeColorStops(e)},this.onOpen=s.default.wrapHandler(()=>{const{value:e}=this.props;(b.isLinearGradient(e)||k.isRadialGradient(e))&&s.default.setToolEnum(d.Tools.Gradient)}),this.onClose=s.default.wrapHandler(()=>{this.setEditingToken(null),this.props.gradientToolActive&&s.default.exitTool()}),this.wantedActions=["sampleColor"],this.validateTokenName=e=>{const t=new Set,n=this.props.tokenPackages[r.localPackageFallbackIdentifier];for(const i in n.tokens){const e=n.tokens[i];t.add(e.name.toLowerCase())}return e.length>0&&!t.has(e.toLowerCase())},this.didSelectActivePreset=()=>{this.state.selectedTokenPackageOverride&&this.setState({selectedTokenPackageOverride:null})},this.clearToken=()=>{const{token:e}=this.props;if(!e)return;this.onChangeColor(e.value);const t=this.scrollRef.current;t&&(t.scrollTop=0)},this.onChangeTab=e=>{const{onChangeFillType:t,onChangeColorStops:n}=this.props;if(t&&n)switch(e){case"image":t("image");break;case"solid":t("color");break;case"linear":t("linear-gradient");break;case"radial":t("radial-gradient")}},this.currentTab=()=>{const{onChangeFillType:e,currentType:t}=this.props;if(!e||!t)return null;switch(t){case"color":return"solid";case"image":return"image";case"linear-gradient":return"linear";case"radial-gradient":return"radial";default:return null}},this.state={editingToken:null,displayTokenEdit:!1,previousSelection:e.selection,displaySeparator:!1,lastToken:null,selectedTokenPackageOverride:null}}static getDerivedStateFromProps(e,t){const n=!function equalColorTokenValues(e,t){return!(!h.isColorToken(e)||!h.isColorToken(t)||e.id!==t.id)||!e&&!t}(e.token,t.lastToken),i=e.selection!==t.previousSelection;if(!i&&!n)return null;const o=Object.assign({},t);return i&&(o.previousSelection=e.selection,o.editingToken=null,o.displayTokenEdit=!1),n&&(o.selectedTokenPackageOverride=function packageIdForValue(e,t){const n=e&&e.id;if(!n)return null;const i=Object.keys(t);for(const o of i){const e=t[o],i=void 0!==e.tokens[n];if(i)return o}return null}(e.token,e.tokenPackages),o.lastToken=e.token||null),o}componentDidUpdate(e){const{value:t}=this.props,n=b.isLinearGradient(t)||k.isRadialGradient(t),i=b.isLinearGradient(e.value)||k.isRadialGradient(e.value),o=this.popoverRef.current;n&&!i&&o&&o.isOpen()&&setTimeout(()=>{this.setGradientTool()},0)}sampleColor(){y.sampleColor().then(s.default.wrapHandler(e=>{if(!e)return;const{onChangeColor:t,colorStopSelection:n}=this.props,{editingToken:i}=this.state;if(i){const t=new h.ColorTokenNode(Object.assign({},i,{value:e}));s.default.tree.root.setToken(t)}else t(e,n)})).catch(e=>setTimeout(()=>{throw e}))}render(){const{value:e,token:t,colorModel:n,colorStopSelection:o,inputWidth:r,currentType:a,onChangeImages:c,onChangeImageResize:d,imageResize:y,imageURL:b,colorPresets:k,gradientColorStopPresets:M,tokenPackages:O}=this.props,{editingToken:I,displayTokenEdit:D,displaySeparator:N,selectedTokenPackageOverride:R}=this.state,A=R||this.props.selectedTokenPackage,L="image"===a,B=!L,j=!L&&"linear-gradient"!==a&&"radial-gradient"!==a;let H,z;t?(z=H=t.value,u.isGradient(e)&&(H=e.toCSS())):L?(z="white",H=b||"transparent"):"string"==typeof e?z=H=e:(z=e.stops.get(o).value||"transparent",H=e.toCSS());const $=O[A]||null,V=A===E.ColorPresetsKey,U=this.currentTab(),G=!!t&&!V&&"image"!==U,W=i.createElement(w.ColorPickerPresetHeader,{key:"header",belowTabs:!!U,tokenPackages:O,selectedTokenPackage:A,addAction:this.addAction,didSelectActivePreset:this.didSelectActivePreset});return l.withMetricsViewContext({view:l.MetricsInteractionViews.COLOR_PICKER},i.createElement(v.ActionResponder,{engine:s.default,target:this},i.createElement(p.Popover,{preview:i.createElement(m.ColorPickerPreview,{background:H,width:r||38}),shouldCloseWhenClickedOutside:!1,onOpen:this.onOpen,onClose:this.onClose,onKeyDown:this.onKeyDown,ref:this.popoverRef,enabled:!0,allowTab:!0,inputWidth:r||38},i.createElement("div",{style:mainStyle(D)},U&&i.createElement(P.ColorPickerFillTypeTabs,{currentTab:U,onChangeTab:this.onChangeTab,displaySeparator:N&&!t}),i.createElement("div",{className:F.panelScroller,onScroll:this.onScroll,ref:this.scrollRef,style:Object.assign({},_,{marginBottom:G?44:0,transition:"image"===U||V?"":"margin 0.2s"})},i.createElement("div",{style:{display:"flex",flexDirection:"column"}},B&&i.createElement("div",{style:{position:"relative",height:t?0:U?203:213,transition:"height 0.2s"}},i.createElement(g.ColorPickerInput,{onChange:this.onChangeColor,color:z,colorModel:n,autoFocus:!0,topMargin:!U,style:{position:t?"absolute":"relative",bottom:t?0:void 0,opacity:t?0:1,pointerEvents:t?"none":void 0,transition:"opacity .2s"}})),!V&&"image"!==U&&i.createElement(C.ColorPickerTokens,{tokenPackage:$,selectedId:t?t.id:null,setEditingToken:this.setEditingToken,onSelect:this.onSelectToken,onCreate:this.addAction},W),B&&V&&i.createElement(S.ColorPickerColorPresets,{key:j?"colors":"gradients",activePreset:this.activePreset,currentFill:h.isColorToken(e)?z:e,presets:j?k:M,onSelect:this.onPresetSelect},W),L&&c&&d&&i.createElement(f.ColorPickerImage,{imageURL:b,imageResize:y,onChangeImages:c,onChangeImageResize:d})))),"image"!==U&&!D&&!V&&i.createElement(T.ColorPickerClearTokenButton,{display:G,clearToken:this.clearToken}),i.createElement(x.ColorPickerTokenEdit,{visible:D,token:I,color:z,doneAction:this.doneEditingToken,cancelAction:this.doneEditingToken,createTokenAction:this.createTokenAction,colorModel:n,validate:this.validateTokenName}))))}};const _={maxHeight:333,overflow:"auto",WebkitOverflowScrolling:"touch",overflowX:"hidden",overflowY:"overlay"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(3),r=n(211),s=n(2),a=n(35);t.ColorPickerSampler=class ColorPickerSampler extends i.Component{constructor(){super(...arguments),this.onColorSample=s.default.wrapHandler(()=>{r.sampleColor().then(e=>{e&&this.props.onChange(e)}).catch(a.unhandledError)})}render(){const e=Object.assign({width:60,height:24,marginLeft:10,backgroundImage:o.theme.backgroundImage("icon-pipette"),backgroundPosition:"center center",backgroundRepeat:"no-repeat",border:`1px solid ${o.theme.propertyPanelInputBorder}`,borderRadius:3},this.props.style);return i.createElement("div",{style:e,onClick:this.onColorSample,title:"Sample Color",className:"inputButton"})}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(78),r=n(14),s=n(2),a=n(3),l=n(13),c=n(15),d=n(64),u=n(456),h=n(103),p=n(79),g=n(444),m=n(820);t.ColorPickerImage=function ColorPickerImage({imageURL:e,imageResize:t,onChangeImages:n,onChangeImageResize:o}){const[r,a]=i.useState(!1),l=i.useRef(null),c=i.useCallback(()=>{u.chooseImageDialog(s.default.wrapHandler(e=>{0!==e.length&&n(e)}))},[n]),m=i.useCallback(e=>{e.dataTransfer&&getImages([...e.dataTransfer.files].filter(e=>e.type.startsWith("image/")||e.name.endsWith("webp")),n)},[n]);i.useEffect(()=>{function pasteHandler(e){const t=l.current;if(!t||document.activeElement!==t)return;e.preventDefault();const i=e.clipboardData;i&&getImages([...i.files].filter(e=>e.type.startsWith("image/")||e.name.endsWith("webp")),n)}return window.addEventListener("paste",pasteHandler),()=>window.removeEventListener("paste",pasteHandler)});const x=i.useCallback(()=>{a(!0)},[]),w=i.useCallback(()=>{a(!1)},[]);return i.createElement("div",{style:y},i.createElement(g.FileDropZone,{key:e+"preview",style:v,onDrop:m,onDragEnter:x,onDragLeave:w},e&&i.createElement("div",{style:b}),i.createElement("div",{ref:l,tabIndex:0,className:containerClassName(r),style:containerStyle(e)}),void 0===e&&i.createElement("div",{style:C},"Drop Image(s)")),i.createElement("div",{style:{display:"flex",marginTop:10,justifyContent:"space-between"}},i.createElement(d.Button,{title:"Choose",onClick:c,enabled:!0,style:k}),i.createElement(p.PopupButton,{style:S},f.map(e=>i.createElement(p.PopupButtonItem,{key:e,identifier:e,title:h.capitalizeFirstLetter,selected:t&&t.some(t=>t===e),onSelect:o})))))};const f=["fill","fit","stretch"];function containerClassName(e){const t=e?m.imageContainerDragOver:m.imageContainer;return o.cx(t,"wantsNativeTextAction")}function getImages(e,t){0!==e.length&&function readImageFiles(e){const t=e.map(e=>(function readFilePromise(e){return new Promise((t,n)=>{const i=new FileReader;i.onloadend=()=>{i.result?t({file:i.result,originalFilename:e.name}):n(i.error)},i.readAsDataURL(e)})})(e));return Promise.all(t)}(e).then(e=>{if(0===e.length)return;const n=c.getIpcRenderer();n.send(r.ChooseImageDialogDrop,e),n.once(r.ChooseImageDialogDrop,s.default.wrapHandler(e=>{const n=u.decodeImageInfo(e);t(n)}))}).catch(e=>{console.log("Could not read dropped images",e)})}t.containerClassName=containerClassName;const y={position:"relative",height:"auto",display:"flex",flexDirection:"column",margin:"0px 11px 10px 10px"},v={position:"relative",width:l.layout.propertyPanelWidth-21,height:l.layout.propertyPanelWidth-21,borderRadius:3,backgroundColor:"white"};function containerStyle(e){return{backgroundImage:e,backgroundSize:"contain",backgroundRepeat:"no-repeat",backgroundPosition:"center center"}}const b={backgroundImage:a.theme.backgroundImage("pattern-checkboard-7"),backgroundRepeat:"repeat",backgroundPosition:"center",position:"absolute",top:1,bottom:1,left:1,right:1,borderRadius:2},k={width:94,padding:"0 0.6em"},S={width:94,margin:0},C={position:"absolute",fontSize:"11px",lineHeight:"1em",color:a.theme.propertyPanelButtonTextInactive,textAlign:"center",top:"50%",left:0,right:0,marginTop:-5}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(78);t.imageContainer="imageContainer_ihq1hxs",t.imageContainerDragOver=i.cx(t.imageContainer,"imageContainerDragOver_ivwn16p"),n(821)},function(e,t,n){},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(1),r=n(7),s=n(94),a=n(13),l=n(118),c=n(91),d=n(57),u=n(823),h=n(824),p=n(295);t.ColorPickerColorPresets=function ColorPickerColorPresets({onSelect:e,currentFill:t,presets:n,activePreset:o,children:r}){let a,d;return l.isLinearGradient(t)?a={angle:t.angle}:c.isRadialGradient(t)&&(d={centerAnchorX:t.centerAnchorX,centerAnchorY:t.centerAnchorY,widthFactor:t.widthFactor,heightFactor:t.heightFactor}),i.createElement("div",null,r,i.createElement(s.Sortable,{items:n.toArray(),moveItem:function moveItem(e,t){const i=n.get(e);p.movePreset(i,t)},removeItem:function removeItem(e){const t=n.get(e);p.deletePreset(t)},keyForItem:presetKey,style:g},({item:n})=>i.createElement(u.ColorPickerColorPreset,{ref:equalFill(n,"string"==typeof t?t:t.stops)?o.presetRef:null,preset:n,onSelect:e,linearGradientOverrides:a,radialGradientOverrides:d})))};const g={position:"relative",width:a.layout.propertyPanelWidth,display:"flex",flexWrap:"wrap",alignContent:"start",justifyItems:"space-between",padding:5};function presetKey(e){return"string"==typeof e?e:e.hashCode()}function equalFill(e,t){return"string"==typeof e&&"string"==typeof t?o.ConvertColor.equals(e,t):!(!isColorStops(e)||!isColorStops(t))&&d.equalColorStops(e,t)}function isColorStops(e){return function isList(e){return r.List.isList(e)}(e)&&e.every(e=>e instanceof d.GradientColorStop)}t.isFillInPresets=function isFillInPresets(e,t){return t.some(t=>equalFill(t,"string"==typeof e?e:e.stops))};t.ActivePreset=class ActivePreset{constructor(){this.presetRef=i.createRef(),this.highlight=()=>{this.presetRef.current&&h.flashElement(this.presetRef.current)}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(29),r=n(69),s=n(3),a=n(295);t.ColorPickerColorPreset=i.forwardRef((e,t)=>{const{preset:n,onSelect:r,linearGradientOverrides:c,radialGradientOverrides:d}=e,u={boxShadow:`inset 0 0 0 1px ${s.theme.colorTokenSwatchBorder}`,borderRadius:"inherit",height:"100%",background:presetBackground(n,c,d)},h=i.useCallback(()=>{r(n)},[n,r]);return i.createElement("div",{ref:t,style:l,onClick:h,onContextMenu:e=>{e.preventDefault(),o.Menu.buildFromTemplate([{label:"Delete",type:"normal",click:()=>a.deletePreset(n)}]).popup({x:e.clientX,y:e.clientY})}},i.createElement("div",{style:u}))});const l={position:"relative",width:16,height:16,borderRadius:2,margin:5,backgroundRepeat:"repeat",backgroundImage:s.theme.backgroundImage("pattern-checkboard")};function presetBackground(e,t,n){return"string"==typeof e?e:t?new r.LinearGradient(Object.assign({},t,{stops:e})).toCSS():n?new r.RadialGradient(Object.assign({},n,{stops:e})).toCSS():"transparent"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.flashElement=function flashElement(e){e.addEventListener("animationend",function onAnimationEnd(t){e.classList.remove("flash"),e.removeEventListener("animationend",onAnimationEnd)}),e.classList.add("flash")}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(2),r=n(3),s=n(826),a=n(93),l=n(94);t.ColorPickerTokens=class ColorPickerTokens extends i.Component{constructor(){super(...arguments),this.removeToken=o.default.wrapHandler(e=>{const{tokenPackage:t}=this.props;if(!t||!t.isEditable)return;const n=Object.values(t.tokens)[e];n&&o.default.tree.root.deleteToken(new a.ColorTokenNode(n))})}render(){const{tokenPackage:e,selectedId:t,onSelect:n,onCreate:o,setEditingToken:a,children:d}=this.props,u=e?Object.values(e.tokens):[];if(!e||0===u.length){const t=!!e&&e.isEditable;return i.createElement(i.Fragment,null,d,i.createElement(s.ColorPickerTokenEmptyRow,{key:"blank",isEditable:t,onClick:o,onDisclosure:o}))}return i.createElement("div",null,d,i.createElement(l.Sortable,{key:e.packageIdentifier,enabled:e.isEditable,items:u,moveItem:c,removeItem:this.removeToken,keyForItem:keyForToken,style:{minHeight:20,background:r.theme.popoverBackground}},({item:o,index:r,isDragPreview:l})=>{const c=e.isLocal?function editTokenHandler(e,t){return function(){t(e)}}(o,a):void 0;return i.createElement(s.ColorPickerTokenRow,{key:o.id,rowIndex:r,token:o,onClick:selectionHandler(n,o,e.packageIdentifier),onDoubleClick:c,onDisclosure:c,editAction:c,selected:t===o.id,canEdit:e.isLocal,canDelete:e.isLocal,isDragPreview:l})}))}};const c=o.default.wrapHandler((e,t)=>{o.default.tree.root.moveToken(e,t)});function keyForToken(e){return e.id}function selectionHandler(e,t,n){return o.default.wrapHandler(()=>{e(t,n)})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(1),r=n(2),s=n(3),a=n(29),l=n(827),c=n(93),d=n(224);t.ColorPickerTokenRow=function ColorPickerTokenRow({token:e,onClick:t,onDoubleClick:n,onDisclosure:s,selected:g,onDelete:y,editName:v,editAction:b,canEdit:k,canDelete:S,rowIndex:C,isDragPreview:x}){const w=i.useCallback(t=>{const n=[{type:"separator"},{label:v||"Edit",enabled:k,click:b},{label:"Delete",enabled:S,click:r.default.wrapHandler(()=>{r.default.tree.root.deleteToken(new c.ColorTokenNode(e)),y&&y()})}];a.Menu.buildFromTemplate(n).popup({x:t.clientX,y:t.clientY+14})},[e,v,k,b,S,y]),T=i.useRef(null);return i.useLayoutEffect(()=>{g&&T.current&&!x&&d.scrollIntoView(T.current,{scrollMode:"if-needed",block:C<3?"center":"nearest",behavior:e=>{e.forEach(({el:e,top:t})=>{"hidden"!==window.getComputedStyle(e).getPropertyValue("overflow-y")&&(e.scrollTop=t)})}})},[g,x,C]),i.createElement("div",{ref:T,style:g&&!x?f:m,onClick:t,onDoubleClick:n,onContextMenu:w},i.createElement(l.ColorTokenPreview,{value:e.value,selected:g}),i.createElement("div",{style:g?p:u},e.name),g&&k?i.createElement("div",{style:h,onClick:s},"Edit"):i.createElement("div",{style:h},o.Color.toHexString(o.Color(e.value)).toUpperCase()))},t.ColorPickerTokenEmptyRow=e=>{const{isEditable:t,onClick:n}=e,o=t?"Create":"No Colors";return i.createElement("div",{style:m,onClick:t?n:void 0},i.createElement(l.ColorTokenPreview,{value:"",disabled:!0}),i.createElement("div",{style:g},o))};const u={display:"block",flexGrow:1,marginTop:-1,marginLeft:8,color:s.theme.propertyPanelTitle,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},h=Object.assign({},u,{fontSize:10,color:s.theme.colorTokenLabel,flexGrow:0,flexShrink:0,marginTop:0,paddingTop:3,paddingBottom:3}),p=Object.assign({},u,{color:s.theme.tint}),g=Object.assign({},u,{color:s.theme.colorTokenLabel}),m={height:28,display:"flex",alignItems:"center",padding:"0 10px",overflow:"hidden",cursor:"default",fontStyle:"normal",fontVariantCaps:"normal",fontWeight:400,fontStretch:"normal",fontSize:"11px",WebkitUserSelect:"none"},f=Object.assign({},m,{background:s.theme.colorTokenRowBackgroundActive})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(3);function style(e){return{pointerEvents:"none",width:15,height:15,minWidth:15,display:"flex",alignItems:"center",justifyContent:"center",position:"relative",borderRadius:2,background:e,boxShadow:`inset 0 0 0 1px ${o.theme.colorTokenSwatchBorder}`}}t.ColorTokenPreview=function ColorTokenPreview({value:e,selected:t=!1,disabled:n=!1}){return n?i.createElement("div",{style:{pointerEvents:"none",width:15,height:15,minWidth:15,display:"flex",alignItems:"center",justifyContent:"center",position:"relative",backgroundColor:"transparent",background:o.theme.backgroundImage("icon-color-token-placeholder")}}):i.createElement("div",{style:style(e)},t&&i.createElement("div",{style:r}))};const r={position:"absolute",top:-2,right:-2,bottom:-2,left:-2,border:`1px solid ${o.theme.tint}`,borderRadius:4}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(2),r=n(64),s=n(63),a=n(454),l=n(3),c=n(93),d=n(13);class ColorPickerTokenEdit extends i.Component{constructor(){super(...arguments),this.state={name:"",color:"",originalColor:"",externalColor:"",previousVisible:!1},this.onChangeColor=o.default.wrapHandler(e=>{this.setState({color:e});const{token:t}=this.props;if(!t)return;const n=new c.ColorTokenNode(Object.assign({},t,{value:e}));o.default.tree.root.setToken(n)}),this.onChangeName=e=>{this.setState({name:e})},this.cancel=o.default.wrapHandler(()=>{const{token:e}=this.props,{color:t,originalColor:n}=this.state;if(e&&n&&t!==n){const t=new c.ColorTokenNode(Object.assign({},e,{value:n}));o.default.tree.root.setToken(t)}this.props.cancelAction()}),this.onEscape=e=>{e.stopPropagation(),this.cancel()},this.isDoneEnabled=()=>{if(!this.hasNameChanged())return!0;const e=this.cleanName();return e.length>0&&this.props.validate(e)},this.onDone=o.default.wrapHandler(()=>{if(!this.isDoneEnabled())return;const{token:e}=this.props,t=this.cleanName(),n=this.state.color;if(e){if(this.hasNameChanged()){const i=new c.ColorTokenNode(Object.assign({},e,{name:t,value:n}));o.default.tree.root.setToken(i)}this.props.doneAction()}else this.props.createTokenAction({name:t,value:n})}),this.onTransitionEnd=()=>{this.props.visible&&this.inputField&&this.inputField.focus()},this.setInputField=e=>{this.inputField=e}}static getDerivedStateFromProps(e,t){if(!(e.visible!==t.previousVisible)){if(!e.token)return null;const n=o.default.tree.root.getToken(e.token.id);if(!n)return null;const i=n.value;return i!==t.externalColor?Object.assign({},t,{color:i,externalColor:i}):null}const n=e.visible&&!t.previousVisible,i=e.visible;if(!n)return Object.assign({},t,{previousVisible:i});let r="",s=e.color,a="",l=e.color;const{token:c}=e;return c&&(r=c.name||"Unknown",s=c.value,a=c.value,l=c.value),{name:r,color:s,originalColor:a,externalColor:l,previousVisible:i}}cleanName(){return this.state.name.trim()}hasNameChanged(){const{token:e}=this.props;return!e||e.name.toLowerCase()!==this.cleanName().toLowerCase()}render(){const{visible:e,token:t,colorModel:n}=this.props,{color:o,name:c}=this.state;return i.createElement("div",{style:{position:e?"relative":"absolute",top:0,left:0,width:"auto",height:"auto",pointerEvents:e?"auto":"none",overflow:"hidden"}},i.createElement("div",{onTransitionEnd:this.onTransitionEnd,style:{position:"relative",transform:e?void 0:"translateX(100%)",transition:".25s transform",background:l.theme.popoverBackground,willChange:"transform"}},i.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",margin:"10px 11px 0px 10px"}},i.createElement(r.Button,{title:"Cancel",onClick:this.cancel,style:u}),i.createElement("span",{style:{fontWeight:500,userSelect:"none",WebkitUserSelect:"none",cursor:"default",color:l.theme.propertyPanelTitle}},t?"Edit":"New"),i.createElement(r.Button,{title:"Done",onClick:this.onDone,style:u,enabled:this.isDoneEnabled(),primary:!0})),i.createElement("div",{style:{display:"flex",justifyContent:"space-between",margin:"10px 11px 0px 10px"}},i.createElement(s.TextInput,{ref:this.setInputField,value:c||"",onChange:this.onChangeName,placeholder:"Name",type:s.TextInputType.Field,onEscape:this.onEscape,enabled:e,onEnter:this.onDone,constantChange:!0,style:{width:d.layout.propertyPanelWidth-21}})),i.createElement(a.ColorPickerInput,{onChange:this.onChangeColor,color:o,colorModel:n,autoFocus:!1,topMargin:!0,enabled:e})))}}ColorPickerTokenEdit.defaultProps={validate:()=>!0},t.ColorPickerTokenEdit=ColorPickerTokenEdit;const u={width:60}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(3),r=n(29),s=n(2),a=n(139),l=n(222);function stopPropagation(e){e.stopPropagation()}t.ColorPickerPresetHeader=function ColorPickerPresetHeader({belowTabs:e,tokenPackages:t,selectedTokenPackage:n,addAction:u,didSelectActivePreset:h}){let p,g;const m=t&&t[n];m?(p=m.displayName,g=m.isEditable):(p="Presets",g=!0);const f=function showActivePackageMenu(e,t,n){return i=>{const o=[{label:"Presets",checked:t===a.ColorPresetsKey,click:s.default.wrapHandler(()=>{s.default.documentSettings.setColorPickerActivePreset(a.ColorPresetsKey),n()})},{type:"separator"}];Object.values(e).sort((e,t)=>e.displayName.localeCompare(t.displayName)).forEach(e=>{const i={label:e.displayName,checked:e.packageIdentifier===t,click:s.default.wrapHandler(()=>{s.default.documentSettings.setColorPickerActivePreset(e.packageIdentifier),n()})};e.isLocal?o.unshift(i):o.push(i)});const l={x:i.clientX,y:i.clientY};if(i.target instanceof HTMLElement){const e=i.target.getBoundingClientRect();l.x=e.left,l.y=e.bottom+1}r.Menu.buildFromTemplate(o).popup(l)}}(t,n,h);return i.createElement("div",{style:e?d:c,onMouseDown:f},p,l.collapseIndicator(!1,{style:{marginLeft:0,marginTop:1}}),i.createElement("div",{style:{width:1,flexGrow:1}}),g&&i.createElement("div",{style:{width:26,height:26,minWidth:26,background:`no-repeat center ${o.theme.backgroundImage("icon-layer-panel-plus")}`},onMouseDown:stopPropagation,onClick:u}))};const c={position:"-webkit-sticky",top:-1,marginTop:-1,marginBottom:-1,zIndex:10,width:"100%",height:28,color:o.theme.propertyPanelButtonText,cursor:"default",WebkitUserSelect:"none",fontStyle:"normal",fontVariantCaps:"normal",fontWeight:500,fontStretch:"normal",fontSize:"11px",lineHeight:"10px",display:"flex",alignItems:"center",justifyContent:"start",paddingLeft:10,paddingRight:2,borderTop:`1px solid ${o.theme.propertyPanelHeaderBorder}`,borderBottom:`1px solid ${o.theme.propertyPanelHeaderBorder}`,backgroundColor:o.theme.packageTitleBackground},d=Object.assign({},c,{top:0,marginTop:0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(13),r=n(3),s=n(64);t.ColorPickerClearTokenButton=function ColorPickerClearTokenButton({display:e,clearToken:t}){return i.createElement("div",{style:{position:"absolute",bottom:0,height:44,width:o.layout.propertyPanelWidth,transform:e?"":"translateY(100%)",borderTop:`1px solid ${r.theme.propertyPanelHeaderBorder}`,backgroundColor:r.theme.packageTitleBackground,pointerEvents:e?void 0:"none",transition:"transform 0.2s",willChange:"transform"}},i.createElement(s.Button,{title:"Choose Custom",enabled:e,onClick:t,style:{position:"absolute",display:"block",left:10,bottom:10,width:o.layout.propertyPanelWidth-21}}))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(47),r=n(3);t.ColorPickerFillTypeTabs=function ColorPickerFillTypeTabs({currentTab:e,onChangeTab:t,displaySeparator:n}){const r=(e=>c.indexOf(e))(e);return i.createElement("div",{style:n?p:h},l[Math.max(0,r)],i.createElement(o.SegmentedControl,{type:o.SegmentedControlType.Borderless,titles:s,selectedIndex:r,icons:d,iconExtension:"png",iconSize:"15px 15px",style:u,onSelect:e=>{t(c[e])},metricIds:a}))};const s=["Solid","Linear Gradient","Radial Gradient","Image"],a=["select-solid","select-linear-gradient","select-radial-gradient","select-image"],l=["Solid","Linear","Radial","Image"],c=["solid","linear","radial","image"],d=["icon-fill-solid","icon-fill-linear","icon-fill-radial","icon-fill-image"],u={position:"relative",width:100,margin:0},h={position:"relative",display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",width:"100%",padding:"5px 6px 5px 10px",background:r.theme.popoverBackground,marginBottom:0,color:r.theme.propertyPanelTitle,fontWeight:500,cursor:"default",userSelect:"none",WebkitUserSelect:"none"},p=Object.assign({},h,{marginBottom:-1,borderBottom:`1px solid ${r.theme.propertyPanelHeaderBorder}`})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(24),r=n(17),s=n(8),a=n(64),l=n(38),c=n(1),d=n(457),u=n(45),h=n(159),p=n(842),g=n(218),m=n(843),f=n(2);t.CodeComponentPanel=class CodeComponentPanel extends i.Component{constructor(){super(...arguments),this.editCode=()=>{const{properties:e}=this.props,t=e.codeComponentIdentifiers[0],n=o.componentLoader.componentForIdentifier(t),i=f.default.persistedUserDefaults.useInternalEditor;if(n)return void g.openCodeComponentFile(i,n.file);const r=o.componentLoader.errorForIdentifier(t);if(r&&0===r.depth)if(r.fileDoesNotExist){let e=p.basename(r.file);const t=e.lastIndexOf(".");t>0&&(e=e.slice(0,t)),g.editNewCodeComponentFile(i,e)}else g.openCodeComponentFile(i,r.file)}}render(){const e=f.default.tree,{properties:t}=this.props;if(!t.onlyCodeComponentNodes||1!==t.codeComponentIdentifiers.length)return null;const n=u.traitFilter(this.props.nodes,h.hasCodeComponent),g=t.codeComponentIdentifiers[0];let v,b,k="Edit Code";const S=o.componentLoader.componentForIdentifier(g);if(S)v=S.depth>0,b=S.name;else{const e=o.componentLoader.errorForIdentifier(g);if(!e)return null;v=e.depth>0,b=p.basename(e.file),e.fileDoesNotExist&&(k="Create and Edit")}const C=function rowsForComponent(e,t,n){const r=o.componentLoader.componentForIdentifier(e);if(!r)return[];const s=r.properties;if(!s)return[];const a=[],l=Object.keys(s);for(let o=0,u=l.length;o<u;o++){const e=l[o],r=s[e];if(r.type===c.ControlType.Array)continue;const u=i.createElement(d.ComponentPropertyRow,{key:e,tree:t,prop:e,nodes:n,property:r});a.push(u)}return a}(g,e,n),x=function panelsForComponent(e,t,n){if(1!==n.length)return[];const r=o.componentLoader.componentForIdentifier(e);if(!r)return[];const s=r.properties;return s?Object.keys(s).map(e=>{const o=s[e];if(o.type===c.ControlType.Array)return i.createElement(m.ArrayInputPanel,{key:e,tree:t,prop:e,node:n[0],property:o})}):[]}(g,e,n),w=v&&C.length+x.length===0;return w?null:i.createElement(i.Fragment,null,i.createElement(r.default,{key:g,nodes:n,withHeader:!0,empty:w},i.createElement(l.PanelHeader,{title:b,empty:w}),C,!v&&i.createElement(s.default,null,i.createElement(a.Button,{id:"edit-code-button",title:k,enabled:!v,onClick:this.editCode,style:y}))),x)}};const y={width:"100%",margin:"5px 5px",padding:"0 0.6em",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(8),r=n(47),s=n(26);t.BooleanInputRow=class BooleanInputRow extends i.Component{constructor(){super(...arguments),this.onSelect=e=>{this.props.onChange(0===e)}}render(){const{prop:e,values:t,property:n,checkbox:l,onContextMenu:c,getReorderControl:d}=this.props,u=s.commonValue(t),h=!0===u?0:!1===u?1:-1,p=d?d(u,n):void 0,g=p?"":n.title||e;return i.createElement(o.default,{title:g,checkbox:l,onContextMenu:c},p,i.createElement(r.SegmentedControl,{titles:[n.enabledTitle||"True",n.disabledTitle||"False"],selectedIndex:h,onSelect:this.onSelect,style:a}))}};const a={width:130}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(8),r=n(80),s=n(30),a=n(1),l=n(26),c=n(47);function enabledStepperSegments(e,t){let n=!0,i=!0;return a.isFiniteNumber(t)&&(a.isFiniteNumber(e.min)&&(n=t>e.min),a.isFiniteNumber(e.max)&&(i=t<e.max)),[n,i]}t.NumberInputRow=class NumberInputRow extends i.Component{constructor(){super(...arguments),this.onChangeRound=e=>{this.props.onChange(Math.round(e))},this.onStepChange=e=>{const{values:t,property:n,onChange:i}=this.props;let o=0;const r=l.commonValue(t);if(a.isFiniteNumber(r)){o=r;const t=n.step||1;0===e?o-=t:o+=t}a.isFiniteNumber(n.min)&&(o=Math.max(o,n.min)),a.isFiniteNumber(n.max)&&(o=Math.min(o,n.max));const s=Math.pow(10,7);i(o=Math.round(o*s)/s)}}render(){const{prop:e,values:t,property:n,checkbox:a,onContextMenu:d,controlOnly:u,label:h,getReorderControl:p}=this.props,g=l.commonValue(t),m=n.step||1,f=m>=1?this.onChangeRound:this.props.onChange,y=i.createElement(s.NumberInput,{value:g,onChange:f,min:n.min,max:n.max,unit:n.unit,step:m,label:h});if(u)return y;const v=p?p(g,n):void 0,b=v?"":n.title||e;return i.createElement(o.default,{title:b,checkbox:a,onContextMenu:d},v,y,n.displayStepper?i.createElement(c.SegmentedControl,{titles:["",""],icons:["icon-layer-panel-minus","icon-layer-panel-plus"],selectedIndex:-1,onSelect:this.onStepChange,enabledSegments:enabledStepperSegments(n,g)}):i.createElement(r.SliderInput,{value:g,min:n.min,max:n.max,onChange:f,step:m}))}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(8),r=n(63),s=n(26);t.StringInputRow=class StringInputRow extends i.Component{render(){const{prop:e,values:t,property:n,onChange:a,checkbox:l,onContextMenu:c,getReorderControl:d}=this.props,u=s.commonValue(t),h=d?d(u,n):void 0,p=h?"":n.title||e;return i.createElement(o.default,{title:p,checkbox:l,onContextMenu:c},h,i.createElement(r.TextInput,{type:r.TextInputType.Field,obscured:n.obscured,value:u||"",onChange:a,placeholder:n.placeholder,style:{width:130,margin:5}}))}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(296),r=n(26);t.FusedNumberInputRow=class FusedNumberInputRow extends i.Component{render(){const{prop:e,values:t,nodes:n,property:a,onUpdate:l,checkbox:c,onContextMenu:d}=this.props,u=[],h=[void 0,void 0,void 0,void 0];let p;for(let i=0,o=t.length;i<o;i++){const n=t[i],o=n[e];"number"==typeof o&&-1===u.indexOf(o)&&u.push(o);const r=n[a.toggleKey];!0!==r&&!1!==r||(void 0===p?p=r:p!==r&&(p=null)),a.valueKeys.forEach((e,t)=>{const i=n[e];"number"==typeof i&&(void 0===h[t]?h[t]=i:h[t]!==i&&(h[t]=null))})}const g=r.commonValue(u),m=!0===p?1:!1===p?0:-1;return i.createElement(o.SplitInFourInputsRow,{title:a.title||e,mainValue:g,segmentedControlIndex:m,fusedValues:h,nodes:n,splitInFourKey:a.toggleKey,mainProperty:e,fusedProperties:a.valueKeys,segmentedIcons:["icon-border-all","icon-border-divided"],fusedActiveInputIcons:["icon-border-top-active","icon-border-right-active","icon-border-bottom-active","icon-border-left-active"],fusedLabels:a.valueLabels,mainTraitFilter:s,fusedTraitFilter:s,toggleTitles:a.toggleTitles,minValue:a.min,onUpdate:l,checkbox:c,onContextMenu:d})}};const s=()=>!0},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(8),r=n(47),s=n(109),a=n(26),l=n(460);t.SegmentedEnumInputRow=class SegmentedEnumInputRow extends i.Component{constructor(){super(...arguments),this.onSelect=e=>{const{property:t,onChange:n}=this.props;n(t.options[e])}}render(){const{values:e,prop:t,property:n,checkbox:s,onContextMenu:d,getReorderControl:u,codeComponentProps:h}=this.props,{options:p}=n,g=a.commonValue(e),m=g?p.indexOf(g):-1;let f=p;const y=l.enumOptionTitles(n,h);y&&y.length===p.length&&(f=y);const v=u?u(g,n):void 0,b=v?"":n.title||t;return i.createElement(o.default,{title:b,checkbox:s,onContextMenu:d},v,i.createElement(r.SegmentedControl,{titles:f,selectedIndex:m,onSelect:this.onSelect,icons:iconsForOptions(f),style:c}))}};const c={width:130},d=["horizontal","vertical"],u=["icon-direction-horizontal","icon-direction-vertical"],h=["vertical","horizontal","both"],p=["icon-direction-vertical","icon-direction-horizontal","icon-direction-both"],g=["Top","Center","Bottom"],m=["icon-align-top","icon-align-center","icon-align-bottom"],f=["Left","Center","Right"],y=["icon-align-left","icon-align-middle","icon-align-right"];function iconsForOptions(e){const t=e.length;if(2===t&&s.default(d,e))return u;if(3===t){if(s.default(h,e))return p;if(s.default(g,e))return m;if(s.default(f,e))return y}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(8),r=n(51),s=n(122),a=n(30),l=n(1),c=n(297);function commonValue(e){if(0===e.length)return null;const t=e[0];return e.every(e=>t===e)?t:null}t.ColorInputRow=class ColorInputRow extends i.Component{constructor(){super(...arguments),this.onChangeAlpha=e=>{const{onChange:t,values:n}=this.props,i=commonValue(n)||"white";t(l.ConvertColor.setAlpha(i,e/100))}}render(){const{values:e,prop:t,property:n,checkbox:d,onContextMenu:u,getReorderControl:h,onChange:p}=this.props,g=commonValue(e),m="string"==typeof g?Math.round(100*l.ConvertColor.getAlpha(g)):null,f=h?h(g,n):void 0,y=f?"":n.title||t,v=!r.isTokenCSSVariable(g),b=g?c.colorTokenName(g):"";return i.createElement(o.default,{title:y,checkbox:d,onContextMenu:u},f,i.createElement(s.ColorPicker,{value:g||"",onChangeColor:p,inputWidth:60,trackingMetadata:{nodeType:"CodeComponentNode",nodeProperty:"codeComponentProps"}}),b?i.createElement(c.TokenLabel,{name:b,columns:1}):i.createElement(a.NumberInput,{value:v?m:"",min:0,max:100,onChange:this.onChangeAlpha,enabled:v}))}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(8),r=n(1),s=n(2),a=n(225),l=n(64),c=n(3),d=n(461),u=n(26),h=["png","jpg","jpeg","gif","apng","tiff","webp"];t.ImageInputRow=class ImageInputRow extends i.Component{constructor(){super(...arguments),this.onChooseImage=()=>{d.chooseFileDialog(h,s.default.wrapHandler(e=>{e&&this.props.onChange(e)}))},this.onClearImage=s.default.wrapHandler(()=>{this.props.onChange("")})}render(){const{prop:e,values:t,property:n,checkbox:s,onContextMenu:c,getReorderControl:d}=this.props,h=u.commonValue(t),g=d?d(h,n):void 0,m=g?"":n.title||e;return i.createElement(o.default,{title:m,checkbox:s,onContextMenu:c},g,i.createElement("div",{style:p,onClick:this.onChooseImage},i.createElement(a.ColorPickerPreview,{width:60,background:h?(f=h,`url("${r.serverURL(f)}")`):""})),i.createElement(l.Button,{title:h?"Clear":"Choose",onClick:h?this.onClearImage:this.onChooseImage,style:{margin:5,width:60}}));var f}};const p={border:`1px solid ${c.theme.propertyPanelInputBorder}`,height:24,margin:5,width:60,backgroundColor:c.theme.propertyPanelInputBackground,borderRadius:3}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(8),r=n(64),s=n(461),a=n(2),l=n(26),c=n(3);t.FileInputRow=class FileInputRow extends i.Component{constructor(){super(...arguments),this.chooseFile=()=>{const{property:e,onChange:t}=this.props;s.chooseFileDialog(e.allowedFileTypes,a.default.wrapHandler(e=>{e&&t(e)}))},this.clearFile=e=>{this.props.onChange(""),e.stopPropagation()}}render(){const{prop:e,values:t,property:n,checkbox:s,onContextMenu:a,getReorderControl:c}=this.props,h=n.allowedFileTypes.join(", ");let p;const g=l.commonValue(t),m={width:130,margin:5};if(g){const e=g.split("/"),t=e[e.length-1];p=[i.createElement("div",{style:d},t),i.createElement("div",{onClick:this.clearFile,style:u},"")],m.textAlign="left",m.padding="0 5px"}else p="Choose File";const f=c?c(g,n):void 0,y=f?"":n.title||e;return i.createElement(o.default,{title:y,checkbox:s,onContextMenu:a},f,i.createElement(r.Button,{title:h,onClick:this.chooseFile,style:m},p))}};const d={maxWidth:105,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},u={position:"absolute",top:0,right:0,fontSize:7,width:22,textAlign:"center",color:c.theme.propertyPanelInputLabel}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(8),r=n(4),s=n(42),a=n(26),l=n(462),c=n(79),d=n(108);t.ComponentInstanceRow=class ComponentInstanceRow extends i.Component{constructor(){super(...arguments),this.remove=()=>{this.props.onChange(r.NullID)},this.onChange=e=>{this.props.onChange(e)}}render(){const{tree:e,nodes:t,property:n,prop:r,values:u,checkbox:h,onContextMenu:p,getReorderControl:g,onChange:m}=this.props;if(1!==t.length)return null;const f=t[0];if(!f)return null;const y=a.commonValue(u),v=g?g(y,n):void 0,b=v?"":n.title||r,k=l.Slot.optionsForNode(f,e),S=k.map(e=>e.id),C=0===d.intersection(S,u).length;return i.createElement(o.default,{title:b,checkbox:h,onContextMenu:p},v,i.createElement(c.PopupButton,null,i.createElement(c.PopupButtonItem,{title:C?"Choose":"None",selected:C,enabled:!C,onSelect:this.remove}),i.createElement(c.PopupButtonItem,{key:"__divider",type:"divider"}),k.map(e=>i.createElement(c.PopupButtonItem,{key:e.id,identifier:e.id,title:e.name||s.defaultName(e),selected:u.some(t=>t===e.id),onSelect:this.onChange}))))}}},function(e,t){e.exports=require("path")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(9),r=n(1),s=n(94),a=n(17),l=n(38),c=n(457),d=n(2),u=n(29),h=n(1),p=n(462),g=n(264),m=n(271),f=n(205),y=n(844),v=n(42),b=n(117),k=n(261),S=n(147);function updateArrayItem(e,t,n,i){const o=g.deepClone(e.codeComponentProps[t])||[],r=o[n];r&&(o[n]=i(r));const s=Object.assign({},e.codeComponentProps,{[t]:o});d.default.updateNode(e.id,{codeComponentProps:s})}function defaultValueForDescription(e,t){if(e.type===r.ControlType.ComponentInstance)return"";const{propertyControl:n}=e,i=f.getPropertyControlDefault(n);if(m.isValidPropertyValue(n.type,i))return i;switch(n.type){case r.ControlType.Boolean:return!0;case r.ControlType.Number:{let e=0;const{min:t,max:i}=n;return h.isFiniteNumber(t)&&(e=Math.max(t,e)),h.isFiniteNumber(i)&&(e=Math.min(i,e)),e}case r.ControlType.FusedNumber:return{[t]:0,[n.toggleKey]:!1,[n.valueKeys[0]]:0,[n.valueKeys[1]]:0,[n.valueKeys[2]]:0,[n.valueKeys[3]]:0};case r.ControlType.Enum:case r.ControlType.SegmentedEnum:return n.options[0];case r.ControlType.Color:return"#09F";case r.ControlType.String:case r.ControlType.Image:case r.ControlType.File:case r.ControlType.ComponentInstance:default:return""}}function additionOptions(e,t,n){return e.type===r.ControlType.ComponentInstance?p.Slot.optionsForNode(n,t).map(e=>({title:e.name||v.defaultName(e),id:e.id})):[{title:e.type}]}t.ArrayInputPanel=class ArrayInputPanel extends i.Component{constructor(){super(...arguments),this.updateEnabledState=d.default.wrapHandler((e,t)=>{const{node:n,prop:i}=this.props;updateArrayItem(n,i,t,t=>(t.enabled=e,t))}),this.onChange=d.default.wrapHandler((e,t)=>{const{node:n,prop:i}=this.props;updateArrayItem(n,i,t,t=>(t.value=e,t))}),this.onUpdate=d.default.wrapHandler((e,t)=>{const{node:n,prop:i}=this.props;updateArrayItem(n,i,t,t=>(t.value=Object.assign({},t.value,e),t))}),this.addItem=d.default.wrapHandler(e=>{const{tree:t,node:n,property:i,prop:s}=this.props,a={enabled:!0,value:defaultValueForDescription(i,s),type:i.propertyControl.type};if(i.propertyControl.type===r.ControlType.ComponentInstance){if(!e)return;const{id:i}=e;if(!i)return;if(!t.getNode(i))return;switch(a.value=i,d.default.linkChangesTo(i,n.id),n.codeComponentIdentifier){case b.HardCodedCodeIdentifier.scroll:o.triggerInteractiveScrollConnectEvent({source:"properties_panel"});break;case b.HardCodedCodeIdentifier.page:o.triggerInteractivePageConnectEvent({source:"properties_panel"})}}const l=[...g.deepClone(n.codeComponentProps[s])||[],a],c={codeComponentProps:Object.assign({},n.codeComponentProps,{[s]:l})};d.default.updateNode(n.id,c)}),this.removeDisabledItems=d.default.wrapHandler(()=>{const{prop:e,node:t}=this.props,n=(g.deepClone(t.codeComponentProps[e])||[]).filter(e=>e.enabled),i=Object.assign({},t.codeComponentProps,{[e]:n});d.default.updateNode(t.id,{codeComponentProps:i})}),this.removeAll=d.default.wrapHandler(()=>{const{prop:e,node:t}=this.props,n=Object.assign({},t.codeComponentProps,{[e]:[]});d.default.updateNode(t.id,{codeComponentProps:n})}),this.removeItemAtIndex=d.default.wrapHandler(e=>{const{prop:t,node:n}=this.props,i=g.deepClone(n.codeComponentProps[t])||[];i.splice(e,1);const o=Object.assign({},n.codeComponentProps,{[t]:i});d.default.updateNode(n.id,{codeComponentProps:o})}),this.showHeaderContextMenu=e=>{const{prop:t,node:n}=this.props,i=n.codeComponentProps[t];if(!Array.isArray(i)||0===i.length)return;const o=[{label:"Remove All",click:this.removeAll}];u.Menu.buildFromTemplate(o).popup({x:e.clientX,y:e.clientY})},this.showRowContextMenu=(e,t)=>{const n=[{label:"Remove",click:this.removeItemAtIndex.bind(this,t)}];u.Menu.buildFromTemplate(n).popup({x:e.clientX,y:e.clientY})},this.moveItem=d.default.wrapHandler((e,t)=>{const{prop:n,node:i}=this.props,o=g.deepClone(i.codeComponentProps[n])||[];o.splice(t,0,o.splice(e,1)[0]);const r=Object.assign({},i.codeComponentProps,{[n]:o});d.default.updateNode(i.id,{codeComponentProps:r})})}renderSortableRows(e,t){const{tree:n,prop:o,node:r,property:a}=this.props,l=e.slice(0,t);if(0===l.length)return null;const d=[r];return i.createElement(s.Sortable,{items:l,removeItem:this.removeItemAtIndex,moveItem:this.moveItem,onDragStart:S.popoverPortal.closeIfOpen},({item:t,index:r})=>{const s={value:t.enabled,id:o+r,onChange:e=>{this.updateEnabledState(e,r)}};return i.createElement(c.ComponentPropertyRow,{tree:n,prop:o,nodes:d,property:a.propertyControl,external:{index:r,checkbox:s,values:[e[r].value],onContextMenu:e=>{this.showRowContextMenu(e,r)},onChange:e=>{this.onChange(e,r)},onUpdate:e=>{this.onUpdate(e,r)},getReorderControl:y.getReorderControl(n)}})})}render(){const{tree:e,prop:t,node:n,property:o}=this.props;if(k.isHidden(o,n))return null;let s=n.codeComponentProps[t];Array.isArray(s)||(s=[]);const c=[n],{propertyControl:d}=o,u=h.isFiniteNumber(o.maxCount)&&o.maxCount>0?o.maxCount:1/0;let p,g;s.length<u?p=d.type!==r.ControlType.ComponentInstance?{action:this.addItem}:{items:additionOptions(d,e,n),action:this.addItem}:s=s.slice(0,u);const m=void 0!==s.find(e=>!e.enabled);m&&(g={action:this.removeDisabledItems,enabled:m});const f=this.renderSortableRows(s,u),y=null===f;return i.createElement(a.default,{key:"array-input"+t,nodes:c,withHeader:!0,empty:y},i.createElement(l.PanelHeader,{title:o.title||t,empty:y,addition:p,subtraction:g,onContextMenu:this.showHeaderContextMenu}),f)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(287),r=n(3),s=n(1),a="Drag to reorder or remove",l=38,c=24,d=17,u=c-8,h={position:"absolute",height:c,width:l,left:32,top:5,overflow:"hidden",borderRadius:3,cursor:"default",backgroundColor:r.theme.propertyPanelInputBackground,boxShadow:`inset 0 0 0 1px ${r.theme.propertyPanelInputBorderOverlay}`},p={position:"absolute",right:4,top:4,width:d,bottom:4,overflow:"hidden",borderRadius:1},g={position:"absolute",left:0,top:0,bottom:0,right:0,border:"1px solid rgba(0, 0, 0, 0.1)"},m={position:"absolute",width:l-d-4,left:0,top:0,bottom:0,background:`center no-repeat ${r.theme.backgroundImage("icon-sort")}`};t.getReorderControl=function getReorderControl(e){return(t,n)=>{if(n.type===s.ControlType.ComponentInstance){const n=e.getNode(t);if(n)return function sortableComponentIndicator(e){const t={x:-1,y:-1,width:d+1,height:u+2},n=o.nodePreview(e,t,!0);return i.createElement("div",{style:h,title:a},i.createElement("div",{style:p},n,i.createElement("div",{style:g})),i.createElement("div",{style:m}))}(n)}return i.createElement("div",{title:a,style:{position:"absolute",height:c,width:l,left:32,top:5,overflow:"hidden",boxShadow:`inset 0 0 0 1px ${r.theme.propertyPanelInputBorderOverlay}`,borderRadius:3,cursor:"default",background:`center no-repeat ${r.theme.backgroundImage("icon-sort")}`,backgroundColor:r.theme.propertyPanelInputBackground}})}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(4),r=n(17),s=n(38),a=n(8),l=n(49),c=n(63),d=n(132),u=n(176),h=n(12),p=n(2),g=n(1),m=n(3),f=n(42),y=n(225);t.DesignComponentMasterPanel=class DesignComponentMasterPanel extends i.Component{constructor(){super(...arguments),this.onCheckbox=(e,t)=>{const n=p.default.tree,i=n.getNode(t);if(!i||!d.withTarget(i))return;const r={isTarget:e};if(e){let e=i.name;e||(e=o.isTextNode(i)?i.text:"image"),r.name=u.sanitizedVariableName(e)}n.updateNode(i,r)},this.onChangeText=(e,t)=>{const n=p.default.tree,i=n.getNode(t);if(!i)return;const o=u.sanitizedVariableName(e);n.updateNode(i,{name:o,isTarget:!!o})}}render(){const{nodes:e,properties:t}=this.props;if(1!==e.length)return null;const n=e[0];if(!h.isMaster(n))return null;const a=[];return n.walk(e=>{if(!d.withTarget(e))return;const t=!!e.name&&e.isTarget;l.hasFill(e)&&"image"===e.fillType?a.push(i.createElement(MasterPropRow,{key:e.id,id:e.id,text:e.name||"",placeholder:"Image",enabled:t,image:e.fillImage,onChangeText:this.onChangeText,onCheckbox:this.onCheckbox})):o.isTextNode(e)&&a.push(i.createElement(MasterPropRow,{key:e.id,id:e.id,text:e.name||"",placeholder:e.text,enabled:t,onChangeText:this.onChangeText,onCheckbox:this.onCheckbox}))}),0===a.length?null:i.createElement(r.default,{key:"DesignComponentMasterPanel",nodes:e,withHeader:!0},i.createElement(s.PanelHeader,{title:n.name||f.defaultName(n),subTitle:"Master"}),a)}};class MasterPropRow extends i.Component{constructor(){super(...arguments),this.onCheckbox=p.default.wrapHandler(e=>{this.props.onCheckbox(e,this.props.id)}),this.onChangeText=p.default.wrapHandler(e=>{this.props.onChangeText(e,this.props.id)})}render(){const{id:e,text:t,placeholder:n,image:o,enabled:r}=this.props;return i.createElement(a.default,{checkbox:{value:r,onChange:this.onCheckbox,id:e}},i.createElement("div",{style:v},o?i.createElement(y.ColorPickerPreview,{background:(s=o,`url("${g.imageUrlForAsset(s,0)}")`),style:{opacity:.5}}):"Text"),i.createElement(c.TextInput,{type:c.TextInputType.Field,value:t,onChange:this.onChangeText,placeholder:n,style:b}));var s}}const v={border:`1px solid ${m.theme.propertyPanelInputBorder}`,height:24,margin:5,width:38,backgroundColor:m.theme.propertyPanelInputBackground,borderRadius:3,fontSize:"9px",lineHeight:"22px",textAlign:"center",color:m.theme.propertyPanelInputLabel,cursor:"default"},b={width:130,margin:5}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(4),r=n(17),s=n(8),a=n(225),l=n(64),c=n(38),d=n(1),u=n(12),h=n(56),p=n(49),g=n(63),m=n(103),f=n(456),y=n(2),v=n(3),b=n(132),k=n(42),S=n(26);t.DesignComponentInstancePanel=class DesignComponentInstancePanel extends i.Component{constructor(){super(...arguments),this.onChangeImage=(e,t)=>{this.getNodesFor(e).forEach(e=>{e.set({fillImage:t})})},this.onClearImage=e=>{const t=this.getNodesFor(e),n=y.default.tree;t.forEach(e=>{const t=h.TemplateHelper.getReplicaForTemplateNode(n,e);t&&h.TemplateHelper.resetOverridesByProperty(n,t,e,["fillImage"])})},this.onChangeText=(e,t)=>{this.getNodesFor(e).forEach(e=>{if(o.isTextNode(e))if("string"!=typeof t){const t=e.tree(),n=h.TemplateHelper.getReplicaForTemplateNode(t,e);if(!n)return;h.TemplateHelper.resetOverridesByProperty(t,n,e,["styledText"])}else{const n=e.styledText.withUpdatedText(t);e.set({styledText:n})}})}}getNodesFor(e){const t=[];return this.props.nodes.forEach(n=>{if(!n)return;const i=n.find(t=>t.originalid===e);i&&t.push(i)}),t}render(){const{nodes:e}=this.props;if(0===e.length)return;let t;const n=[];for(const i of e){if(!u.isReplica(i))return null;const e=h.TemplateHelper.getMaster(i.tree(),i);if(t){if(t!==e)return null}else t=e;n.push(i.replicaInfo.overrides)}if(!t)return null;const s=[];return t.walk(e=>{const t=e.name;if(t&&b.withTarget(e)&&e.isTarget)if(p.hasFill(e)&&"image"===e.fillType){const o=this.getNodesFor(e.id),r=n.some(t=>!!t&&t[e.id]&&!!t[e.id].fillImage),a=S.commonValue(o.map(e=>e.fillImage));s.push(i.createElement(ImageRow,{key:s.length,title:m.capitalizeFirstLetter(t),originalid:e.id,fillImage:r?a||"":e.fillImage||"",isOverride:r,onChange:this.onChangeImage,onClear:this.onClearImage}))}else if(o.isTextNode(e)){const o=this.getNodesFor(e.id),r=n.some(t=>!!t&&t[e.id]&&!!t[e.id].styledText),a=S.commonValue(o.map(e=>e.text))||"";s.push(i.createElement(TextRow,{key:s.length,title:m.capitalizeFirstLetter(t),originalid:e.id,text:r?a:"",placeholder:r?"":e.text,onChange:this.onChangeText}))}}),0===s.length?null:i.createElement(r.default,{key:"DesignComponentInstancePanel",nodes:e,withHeader:!0},i.createElement(c.PanelHeader,{title:t.name||k.defaultName(t),subTitle:"Instance"}),s)}};class TextRow extends i.Component{constructor(){super(...arguments),this.onChange=e=>{this.props.onChange(this.props.originalid,e)}}render(){const{title:e,text:t,placeholder:n,onChange:o}=this.props;return i.createElement(s.default,{title:e||"text"},i.createElement(g.TextInput,{type:g.TextInputType.Field,value:t,onChange:this.onChange,placeholder:n,style:{width:130,margin:5}}))}}t.TextRow=TextRow;class ImageRow extends i.Component{constructor(){super(...arguments),this.onChooseImage=()=>{f.chooseImageDialog(y.default.wrapHandler(e=>{0!==e.length&&this.props.onChange(this.props.originalid,e[0].imageName)}))},this.onClearImage=y.default.wrapHandler(()=>{this.props.onClear(this.props.originalid)})}render(){const{title:e,fillImage:t,isOverride:n}=this.props;return i.createElement(s.default,{title:e||"image"},i.createElement("div",{style:C,onClick:this.onChooseImage},i.createElement(a.ColorPickerPreview,{width:60,background:(o=t||"",`url("${d.imageUrlForAsset(o,0)}")`)})),i.createElement(l.Button,{title:n?"Clear":"Choose",onClick:n?this.onClearImage:this.onChooseImage,style:{margin:5,width:60}}));var o}}t.ImageRow=ImageRow;const C={border:`1px solid ${v.theme.propertyPanelInputBorder}`,height:24,margin:5,width:60,backgroundColor:v.theme.propertyPanelInputBackground,borderRadius:3}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(17),r=n(8),s=n(47),a=n(2);t.default=class TextSizePanel extends i.Component{constructor(){super(...arguments),this.onChangeAutoSize=a.default.wrapHandler(e=>{const{nodes:t}=this.props;t.forEach(t=>{if(0===e)a.default.updateNode(t.id,{autoSize:!0});else{const e={autoSize:!1};if(0===t.width||0===t.height){const{width:n,height:i}=a.default.tree.getRect(t);e.width=n,e.height=i}a.default.updateNode(t.id,e)}})})}render(){const{nodes:e,properties:t}=this.props;if(!t.onlyTextnodes)return null;const n=[];let a;return e.forEach(e=>{n.push(e.autoSize)}),1===new Set(n).size&&(a=n[0]),i.createElement(o.default,{nodes:e,style:{borderTop:"none",paddingTop:0,marginTop:-5}},i.createElement(r.default,{title:""},i.createElement(s.SegmentedControl,{titles:["Auto","Fixed"],selectedIndex:void 0!==a&&a?0:1,onSelect:this.onChangeAutoSize,style:l})))}};const l={width:130}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(17),r=n(849),s=n(850),a=n(296),l=n(61),c=n(55),d=n(2);function supportsRadiusPerCorner(e){return l.withRadiusPerCorner(e)&&(!c.withRelativeRadius(e)||!e.radiusIsRelative)}t.OpacityRotationRadiusPanel=class OpacityRotationRadiusPanel extends i.Component{constructor(){super(...arguments),this.willChange=(e,t)=>{const n=d.default.tree,{properties:i}=this.props,o=i.expandedSelectionForShapeGeometry;if(void 0!==t){const e="%"===t.trim().slice(-1);for(const t of o)c.withRelativeRadius(t)&&t.radiusIsRelative!==e&&n.updateNode(t,{radiusIsRelative:e})}}}render(){const{properties:e,nodes:t}=this.props,n=e.expandedSelectionForShapeGeometry;let l;switch(e.radiusPerCorner){case!1:l=0;break;case!0:l=1;break;default:l=-1}const{radiusTopLeft:d,radiusTopRight:u,radiusBottomRight:h,radiusBottomLeft:p}=e;return i.createElement(o.default,{nodes:n,style:{borderTop:"none",paddingTop:0,marginTop:-5}},i.createElement(r.OpacityRow,{nodes:t,properties:e}),i.createElement(s.RotationRow,{nodes:n,properties:e}),i.createElement(a.SplitInFourInputsRow,{title:"Radius",mainValue:e.radius,mainDefaultValue:0,segmentedControlIndex:l,fusedValues:[d,u,h,p],fusedDefaultValues:[0,0,0,0],nodes:n,splitInFourKey:"radiusPerCorner",mainProperty:"radius",fusedProperties:["radiusTopLeft","radiusTopRight","radiusBottomRight","radiusBottomLeft"],segmentedIcons:["icon-radius-all","icon-radius-corners"],fusedActiveInputIcons:["icon-radius-top-left-active","icon-radius-top-right-active","icon-radius-bottom-left-active","icon-radius-bottom-right-active"],fusedLabels:["tl","tr","br","bl"],mainTraitFilter:c.withRadius,fusedTraitFilter:supportsRadiusPerCorner,toggleTitles:["Radius","Radius per corner"],willChange:this.willChange,minValue:0,maxValue:e.onlyRelativeRadiusNodes?50:void 0}))}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(8),r=n(30),s=n(80),a=n(60),l=n(45),c=n(2);t.OpacityRow=class OpacityRow extends i.Component{constructor(){super(...arguments),this.onChange=c.default.wrapHandler(e=>{const t=l.traitFilter(this.props.nodes,a.hasOpacity);c.default.updateNodesDirect(t,{opacity:e/100})})}render(){const{opacity:e}=this.props.properties;return void 0===e?null:i.createElement(o.default,{title:"Opacity"},i.createElement(r.NumberInput,{value:e,onChange:this.onChange,min:0,max:100,unit:"%",defaultValue:100}),i.createElement(s.SliderInput,{value:e,onChange:this.onChange}))}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(8),r=n(30),s=n(47),a=n(25),l=n(141),c=n(80),d=n(2);t.RotationRow=class RotationRow extends i.Component{constructor(){super(...arguments),this.onChange=d.default.wrapHandler(e=>{const{properties:t}=this.props,n={rotation:e},i=[];for(let o=0,r=t.withoutDescendants.length;o<r;o++){const e=t.withoutDescendants[o];a.hasRotation(e)&&i.push(e.id)}d.default.beginUndoGroup(),d.default.updateNodes(i,n),d.default.endUndoGroup()}),this.onFlip=d.default.wrapHandler(e=>{const t=d.default.tree,{properties:n}=this.props;if(!n.onlyShapeNodes)return;const i=0===e?"horizontal":"vertical",o=n.withoutDescendants;l.flipShapes(t,d.default,o,i)})}render(){const{rotation:e,onlyShapeNodes:t}=this.props.properties;if(void 0===e)return null;let n;return n=t?i.createElement(s.SegmentedControl,{selectedIndex:-1,onSelect:this.onFlip,icons:["icon-flip-horizontal","icon-flip-vertical"],titles:["Flip Horizontally","Flip Vertically"],enabled:t}):i.createElement(c.SliderInput,{value:e,max:360,onChange:this.onChange}),i.createElement(o.default,{title:"Rotation"},i.createElement(r.NumberInput,{value:e,onChange:this.onChange,unit:"",defaultValue:0}),n)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(17),r=n(45),s=n(191),a=n(8),l=n(30),c=n(2);t.default=class StarSpikesPanel extends i.Component{constructor(){super(...arguments),this.onChangeSpikeCount=e=>{const{properties:t}=this.props,n=t.expandedSelectionForShapeGeometry,i=r.traitFilter(n,s.hasSpikes);c.default.updateNodesDirect(i,{spikeCount:e})},this.onChangeSpikeDepth=e=>{const{properties:t}=this.props,n=t.expandedSelectionForShapeGeometry,i=r.traitFilter(n,s.hasSpikes);c.default.updateNodesDirect(i,{spikeDepth:e})}}render(){const{properties:e}=this.props;if(void 0===e.spikeCount)return null;const t=e.expandedSelectionForShapeGeometry,n=r.traitFilter(t,s.hasSpikes);return n.length!==t.length?null:i.createElement(o.default,{nodes:n,style:{borderTop:void 0,paddingTop:0,marginTop:-5}},i.createElement(a.default,{title:"Points"},i.createElement(l.NumberInput,{value:e.spikeCount,onChange:this.onChangeSpikeCount,min:2,max:100,defaultValue:5}),i.createElement(l.NumberInput,{value:e.spikeDepth,onChange:this.onChangeSpikeDepth,min:0,max:100,defaultValue:50,label:["%"]})))}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(17),r=n(45),s=n(8),a=n(30),l=n(80),c=n(259),d=n(2);t.default=class PolygonSidesPanel extends i.Component{constructor(){super(...arguments),this.onChange=d.default.wrapHandler(e=>{const{properties:t}=this.props,n=t.expandedSelectionForShapeGeometry,i=r.traitFilter(n,c.hasPolygon);d.default.updateNodesDirect(i,{polygonSides:e})})}render(){const{properties:e}=this.props;if(void 0===e.polygonSides)return null;const t=e.expandedSelectionForShapeGeometry,n=r.traitFilter(t,c.hasPolygon);return n.length!==t.length?null:i.createElement(o.default,{nodes:n,style:{borderTop:void 0,paddingTop:0,marginTop:-5}},i.createElement(s.default,{title:"Sides"},i.createElement(a.NumberInput,{value:e.polygonSides,onChange:this.onChange,min:3,max:100}),i.createElement(l.SliderInput,{value:e.polygonSides,min:3,max:8,onChange:this.onChange})))}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(1),r=n(2),s=n(17),a=n(38),l=n(122),c=n(296),d=n(45),u=n(98),h=n(127),p=n(72),g=n(103),m=n(29),f="Remove",y=[...["solid","dashed","dotted","double"].map(g.capitalizeFirstLetter),a.PanelHeader.divider,f];t.BorderPanel=class BorderPanel extends i.Component{constructor(){super(...arguments),this.addBorder=()=>this.enableBorder(!0),this.enableBorder=r.default.wrapHandler(e=>{const t=e?p.Property.enabled:p.Property.disabledVisible;r.default.updateNodesForEach(this.props.nodes,e=>{if(!u.hasBorder(e))return;const n={borderEnabled:t};return p.Property.isEnabled(t)&&(o.isFiniteNumber(e.borderWidth)||(n.borderWidth=1),e.borderColor||(n.borderColor="#222"),e.borderStyle||(n.borderStyle="solid"),h.hasBorderPerSide(e)&&(n.borderPerSide=!0===e.borderPerSide,o.isFiniteNumber(e.borderTop)||(n.borderTop=1),o.isFiniteNumber(e.borderRight)||(n.borderRight=1),o.isFiniteNumber(e.borderBottom)||(n.borderBottom=1),o.isFiniteNumber(e.borderLeft)||(n.borderLeft=1))),n})}),this.removeBorder=r.default.wrapHandler(()=>{const e=d.traitFilter(this.props.nodes,u.hasBorder);r.default.updateNodesForEach(this.props.nodes,e=>{if(!u.hasBorder(e))return;const t={borderEnabled:void 0,borderWidth:void 0,borderColor:void 0,borderStyle:void 0};return h.hasBorderPerSide(e)&&(t.borderPerSide=void 0,t.borderTop=void 0,t.borderRight=void 0,t.borderBottom=void 0,t.borderLeft=void 0),t}),r.default.updateNodesDirect(e,{borderEnabled:0})}),this.onBorderColorChange=r.default.wrapHandler(e=>{const{nodes:t,properties:n}=this.props;r.default.updateNodesForEach(t,t=>{if(u.hasBorder(t)){const t={borderColor:e};return null!==n.borderEnabled&&(t.borderEnabled=1),t}})}),this.onChangeType=r.default.wrapHandler(e=>{if(e===f)return void this.removeBorder();const{properties:t,nodes:n}=this.props,i=d.traitFilter(n,u.hasBorder),o={borderStyle:e.toLowerCase()};null!==t.borderEnabled&&(o.borderEnabled=1),r.default.updateNodesDirect(i,o)}),this.onContextMenu=e=>{const t=[{label:f,click:this.removeBorder}];m.Menu.buildFromTemplate(t).popup({x:e.clientX,y:e.clientY})}}render(){const{properties:e,nodes:t}=this.props,{borderEnabled:n}=e;if(void 0===n)return null;let o,r,d,p=null;const m=void 0!==e.borderColor?e.borderColor:e.disabledBorderColor;let f;switch(e.borderPerSide){case!1:f=0;break;case!0:f=1;break;default:f=-1}const{borderTop:v,borderRight:b,borderBottom:k,borderLeft:S}=e;if(0===n)r={action:this.addBorder};else{-1!==n&&(o={onSelect:this.onChangeType,values:y,selectedValues:e.borderStyleValues.map(g.capitalizeFirstLetter)}),d={action:this.removeBorder,enabled:-1===n};const r={value:null===n?null:1===n,onChange:this.enableBorder,id:"borderFill"};let s;null!==n&&(s={borderEnabled:1}),p=i.createElement(c.SplitInFourInputsRow,{colorpicker:i.createElement(l.ColorPicker,{value:m||"",onChangeColor:this.onBorderColorChange,trackingMetadata:l.trackingMetadata(t,"borderColor")}),onContextMenu:this.onContextMenu,checkbox:r,mainValue:void 0===e.borderWidth?e.disabledBorderWidth:e.borderWidth,mainDefaultValue:0,segmentedControlIndex:f,fusedValues:[v,b,k,S],nodes:t,splitInFourKey:"borderPerSide",mainProperty:"borderWidth",fusedProperties:["borderTop","borderRight","borderBottom","borderLeft"],fusedLabels:["t","r","b","l"],segmentedIcons:["icon-border-all","icon-border-divided"],fusedActiveInputIcons:["icon-border-top-active","icon-border-right-active","icon-border-bottom-active","icon-border-left-active"],fusedDefaultValues:[0,0,0,0],mainTraitFilter:u.hasBorder,fusedTraitFilter:h.hasBorderPerSide,toggleTitles:["Border","Border per side"],updateAddition:s,minValue:0})}const C=0===n;return i.createElement(s.default,{nodes:t,withHeader:!0,empty:C},i.createElement(a.PanelHeader,{title:"Border",settings:o,addition:r,subtraction:d,empty:C}),p)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(1),r=n(2),s=n(37),a=n(17),l=n(8),c=n(122),d=n(38),u=n(465),h=n(297);t.TextColorPanel=function TextColorPanel({properties:e,nodes:t}){const{textProperties:n}=e,p=n?n.color:"transparent",g=i.useCallback(r.default.wrapHandler(e=>{u.updateStyledText(t,s.StyledTextDraft.setColor,e),u.shouldUpdateDefaultStyle(t)&&r.default.documentSettings.setDefaultTextColor(e)}),[t]),m=i.useCallback(r.default.wrapHandler(e=>{if(u.updateStyledText(t,s.StyledTextDraft.setColorAlpha,e),p&&u.shouldUpdateDefaultStyle(t)){const t=o.ConvertColor.setAlpha(p,e/100);r.default.documentSettings.setDefaultTextColor(t)}}),[t]);return n?i.createElement(a.default,{nodes:t,withHeader:!0},i.createElement(d.PanelHeader,{title:"Color"}),i.createElement(l.default,null,i.createElement(c.ColorPicker,{value:p,onChangeColor:g,inputWidth:60,trackingMetadata:c.trackingMetadata(t,"styledText")}),i.createElement(h.ColorAlphaControls,{color:p,onAlphaChange:m}))):null}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(2),r=n(17),s=n(8),a=n(856),l=n(30),c=n(861),d=n(47),u=n(37),h=n(80),p=n(38),g=n(465);t.TextPanel=class TextPanel extends i.Component{constructor(){super(...arguments),this.onChangeFont=o.default.wrapHandler(e=>{const{nodes:t}=this.props;g.updateStyledText(this.props.nodes,u.StyledTextDraft.setFont,e),g.shouldUpdateDefaultStyle(t)&&o.default.documentSettings.setDefaultFont(e)}),this.onChangeSize=o.default.wrapHandler(e=>{const{nodes:t}=this.props;g.updateStyledText(t,u.StyledTextDraft.setSize,e),g.shouldUpdateDefaultStyle(t)&&o.default.documentSettings.setDefaultTextSize(e)}),this.onChangeLetterSpacing=o.default.wrapHandler(e=>{const{nodes:t}=this.props;g.updateStyledText(t,u.StyledTextDraft.setLetterSpacing,e),g.shouldUpdateDefaultStyle(t)&&o.default.documentSettings.setDefaultLetterSpacing(e)}),this.onChangeLineHeight=o.default.wrapHandler(e=>{const{nodes:t}=this.props;g.updateStyledText(t,u.StyledTextDraft.setLineHeight,e),g.shouldUpdateDefaultStyle(t)&&o.default.documentSettings.setDefaultLineHeight(e)}),this.onChangeAlignment=o.default.wrapHandler(e=>{let t;switch(e){case 0:t="left";break;case 1:t="center";break;case 2:t="right"}void 0!==t&&g.updateStyledText(this.props.nodes,u.StyledTextDraft.setAlignment,t)})}render(){const{nodes:e,properties:t}=this.props;if(!t.textProperties)return null;const{fonts:n,size:o,letterSpacing:u,lineHeight:g,align:m}=t.textProperties;let f=-1;switch(m){case"left":f=0;break;case"center":f=1;break;case"right":f=2}return i.createElement(r.default,{nodes:e,withHeader:!0},i.createElement(p.PanelHeader,{title:"Text"}),i.createElement(a.TypefaceRow,{values:n,onChange:this.onChangeFont}),i.createElement(s.default,{title:"Size"},i.createElement(c.default,{onChange:this.onChangeSize,value:o,minValue:1,options:[9,10,11,12,13,14,16,18,20,24,36,48,64,72,144,288]}),i.createElement(h.SliderInput,{onChange:this.onChangeSize,value:o,min:1})),i.createElement(s.default,{title:"Spacing"},i.createElement(l.NumberInput,{onChange:this.onChangeLetterSpacing,value:u,step:.1,label:["Letter","L"]}),i.createElement(l.NumberInput,{onChange:this.onChangeLineHeight,value:g,min:.1,step:.1,label:["Line","L"]})),i.createElement(s.default,{title:"Align"},i.createElement(d.SegmentedControl,{icons:["icon-text-align-left","icon-text-align-center","icon-text-align-right"],titles:["Left","Center","Right"],selectedIndex:f,onSelect:this.onChangeAlignment,style:{width:130}})))}}},function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))(function(o,r){function fulfilled(e){try{step(i.next(e))}catch(t){r(t)}}function rejected(e){try{step(i.throw(e))}catch(t){r(t)}}function step(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(fulfilled,rejected)}step((i=i.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const o=n(28),r=n(1),s=n(7),a=n(0),l=n(857),c=n(79),d=n(858),u=n(8),h=n(2),p=n(103),g={100:"Thin",200:"Extra Light",300:"Light",400:"Regular",500:"Medium",600:"Semibold",700:"Bold",800:"Extra Bold",900:"Heavy"};function getFontVariantName(e,t){if(t===r.TypefaceSourceNames.Google){const t=r.parseVariant(e);if(!t)return"";const n="normal"===t.style?"":` ${p.capitalizeFirstLetter(t.style)}`;return`${g[t.weight]}${n}`}return p.capitalizeFirstLetter(e)}t.TypefaceRow=class TypefaceRow extends a.Component{constructor(e){super(e),this.onChangeTypeface=e=>i(this,void 0,void 0,function*(){const{family:t,source:n}=d.parseTypefaceKey(e);if(n!==r.TypefaceSourceNames.Google&&n!==r.TypefaceSourceNames.Local)return;if(o.experiments.isOn("webfonts")){const{webFonts:e}=this.state;if(e&&n===r.TypefaceSourceNames.Google){const n=e.find(e=>e.family===t);n&&(yield r.fontStore.loadWebFont(r.TypefaceSourceNames.Google,t,n.variants))}}const i=r.fontStore.getTypeface({source:n,family:t});if(i&&i.fonts.length>0){let e;if(1===this.selectedFonts.count()){const t=this.selectedFonts.first();e=i.fonts.find(e=>e.variant===t.variant)}if(e||(e=i.fonts[0]),!e)return;this.props.onChange(e.selector)}}),this.onChangeFont=e=>{this.props.onChange(e)},this.onSelectTypefaceSource=e=>{this.setState({selectedTypefaceSource:e})},this.state={selectedTypefaceSource:d.TypefaceSource.All}}componentDidMount(){!this.state.webFonts&&o.experiments.isOn("webfonts")&&this.getGoogleWebFonts()}getGoogleWebFonts(){l.getGoogleWebFonts().then(h.default.wrapHandler(e=>{this.setState({webFonts:e})})).catch(()=>{})}render(){const{values:e}=this.props;this.selectedTypefaces=s.Set(),this.selectedFonts=s.Set();let t=void 0;const n=this.state.selectedTypefaceSource,i=r.fontStore.getAvailableFonts(),o=new global.Set;i.forEach(e=>o.add(e.typeface));const l=Array.from(o);let h=[...l];n===d.TypefaceSource.Local?h=l.filter(e=>e.source===r.TypefaceSourceNames.Local):n===d.TypefaceSource.GoogleFonts&&(h=l.filter(e=>e.source===r.TypefaceSourceNames.Google)),h.sort((e,t)=>e.family.localeCompare(t.family));const p=[];for(const s of e){const e=r.fontStore.getFontBySelector(s);e?(p.push(e),this.selectedFonts=this.selectedFonts.add(e),this.selectedTypefaces=this.selectedTypefaces.add(e.typeface)):t=s}const g=[];if(1===p.length&&!t)for(const r of p){const e=r.typeface;g.push(...e.fonts)}return a.createElement(a.Fragment,null,a.createElement(u.default,{title:"Typeface"},a.createElement(d.TypefaceInput,{onChangeTypeface:this.onChangeTypeface,availableTypefaces:h,selectedTypefaces:this.selectedTypefaces.toArray(),unavailableFontSelector:t,onSelectTypefaceSource:this.onSelectTypefaceSource,selectedTypefaceSource:n})),a.createElement(u.default,{title:"Style"},a.createElement(c.PopupButton,{enabled:g.length>1},0===g.length&&a.createElement(c.PopupButtonItem,{title:"Multiple",enabled:!1}),g.map(e=>a.createElement(c.PopupButtonItem,{key:e.selector,identifier:e.selector,title:getFontVariantName(e.variant,e.typeface.source),selected:this.selectedFonts.has(e),onSelect:this.onChangeFont})))))}}},function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))(function(o,r){function fulfilled(e){try{step(i.next(e))}catch(t){r(t)}}function rejected(e){try{step(i.throw(e))}catch(t){r(t)}}function step(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(fulfilled,rejected)}step((i=i.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const o=n(1),r=window,s=r&&r.googleWebFontsAPIKey;let a;t.getGoogleWebFonts=function getGoogleWebFonts(){return s?a||(a=function _getGoogleWebFonts(){return i(this,void 0,void 0,function*(){const e=`https://www.googleapis.com/webfonts/v1/webfonts?key=${s}`,t=yield l(e),n=yield t.json();return o.fontStore.importFonts(o.TypefaceSourceNames.Google,n.items),n.items})}()):Promise.resolve([])};const l="undefined"!=typeof fetch?fetch:()=>Promise.reject("fetch is not available")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(1),r=n(28),s=n(76),a=n(3),l=n(13),c=n(2),d=n(6),u=n(859),h=n(10),p=n(47),g=!!r.experiments.isOn("webfonts");var m;!function(e){e[e.All=0]="All",e[e.Local=1]="Local",e[e.GoogleFonts=2]="GoogleFonts"}(m=t.TypefaceSource||(t.TypefaceSource={}));const f="Typeface not found",y=c.default.wrapHandler(e=>{c.default.toolStore.setTypeFacePanelOpen(e)});class TypefaceInput extends i.Component{static calculateState(){const{typeFacePanelIsOpen:e}=c.default.toolStore.state;return{typeFacePanelIsOpen:e}}render(){const{onChangeTypeface:e,unavailableFontSelector:t,availableTypefaces:n,selectedTypefaces:s,onSelectTypefaceSource:a,selectedTypefaceSource:l}=this.props,c=l===m.GoogleFonts&&!n.length,d=t||"Missing";t&&s.every(e=>e.family!==t)&&s.push({source:"local",family:t,fonts:[]});const h=n.map(e=>{const{source:t,family:n}=e,o=`typeface-source-${t}`;return{value:n,key:createTypefaceKey({family:n,source:t}),customComponent:i.createElement(TypefaceElement,{value:n,source:t,metricId:o}),metricId:o}}),p=s.map(e=>e.family),k=r.experiments.isOn("webfonts")&&l!==m.Local?void 0:o.getStyleForTypefaceOrSelector,S=g?i.createElement(TypefaceToggle,{titles:v,metricIds:b,selectedIndex:l,onSelectSegment:a}):void 0;return i.createElement(u.SelectInput,{width:130,emptyMessage:f,onChange:e,options:h,noOptionsMessage:c?i.createElement(EmptyFontsListMessage,null):null,values:p,missingValue:d,customRowStyle:k,externalIsOpenState:this.state.typeFacePanelIsOpen,externalOpenCloseAction:y,additionalControl:S,additionalControlValue:l,hasFixedTableHeight:c})}}TypefaceInput.engineChangeKeys=d.EngineChangeFlags.ToolStore;const v=["All","Local","Google"],b=["tab-typeface-all","tab-typeface-local","tab-typeface-google"];function EmptyFontsListMessage(){return i.createElement("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",width:"150px"}},i.createElement("div",{style:{backgroundImage:a.theme.backgroundImage("icon-sad-cloud"),backgroundRepeat:"no-repeat",backgroundPosition:"center center",width:24,height:24,marginBottom:10}}),i.createElement("div",null,"Can't load Google Fonts. Please check your internet connection and try again."))}const k={width:"100%",display:"flex",justifyContent:"space-between",alignItems:"center"};function TypefaceElement({value:e,source:t,metricId:n}){const o=i.useCallback(()=>(function openTypefaceDetail(e){window.open(`https://fonts.google.com/specimen/${e}`)})(e),[e]),r=i.useContext(s.MetricsViewContext),l={backgroundImage:a.theme.backgroundImage("icon-google"),backgroundRepeat:"no-repeat",backgroundPosition:"center center",width:13,height:13};return i.createElement("div",{"data-metric-id":n,"data-metric-view":r.view,style:k},i.createElement("div",{"data-metric-id":n,"data-metric-view":r.view},e),"google"===t&&i.createElement("div",{style:l,onClick:o,"data-metric-id":"typeface-source-google-extra-info","data-metric-view":r.view}))}function TypefaceToggle(e){const{titles:t,selectedIndex:n,onSelectSegment:o,metricIds:r}=e;return i.createElement(p.SegmentedControl,{titles:t||[],selectedIndex:n||0,onSelect:o,style:S,metricIds:r})}const S={marginBottom:10,width:l.layout.propertyPanelWidth-21};function createTypefaceKey(e){return`${e.family};${e.source}`}t.parseTypefaceKey=function parseTypefaceKey(e){const[t,n]=e.split(";");return{family:t,source:n}};const C=h.default(TypefaceInput);t.TypefaceInput=C},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(1),r=n(3),s=n(453),a=n(13),l=n(63),c=n(860),d=14,u=22;var h;!function(e){e[e.Up=38]="Up",e[e.Down=40]="Down",e[e.Enter=13]="Enter",e[e.Escape=27]="Escape"}(h||(h={}));function previewStyle(e,t){return{position:"absolute",width:e-1,textAlign:"left",paddingLeft:5,paddingRight:12,fontSize:"11px",lineHeight:"22px",cursor:"default",WebkitUserSelect:"none",userSelect:"none",overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis",color:t?r.theme.propertyPanelButtonTextInactive:r.theme.propertyPanelButtonText}}t.SelectInput=class SelectInput extends i.Component{constructor(){super(...arguments),this.state={search:""},this.setElement=e=>{e instanceof l.TextInput&&(this.searchElement=e),e instanceof c.Table&&(this.table=e),e instanceof s.Popover&&(this.popover=e)},this.onOpen=()=>{setTimeout(()=>this.focus(),0)},this.onClose=()=>{this.blur()},this.onSearchChange=e=>{this.table.highlightIndex(-1),this.setState({search:e})},this.onKeyDown=e=>{if(!this.table)return;switch(e.keyCode){case h.Up:this.table.highlightPrevious();break;case h.Down:this.table.highlightNext();break;case h.Enter:this.table.selectCurrent(),this.popover.close(),this.setState({search:""});break;case h.Escape:this.popover.close(),this.setState({search:""})}const t=String.fromCharCode(e.which);"F"!==t&&"L"!==t||!e.metaKey||this.focus(),"T"===t&&e.metaKey&&this.popover.openCloseAction()},this.onInputKeyDown=e=>{this.table&&"T"===String.fromCharCode(e.which)&&e.metaKey&&this.popover.openCloseAction()}}focus(){this.searchElement&&this.searchElement.focus()}blur(){this.searchElement&&this.searchElement.blur()}currentValue(){const{value:e,values:t,missingValue:n}=this.props;let i=e;return!i&&t&&(i=1===t.length?t[0]:y),i||"None"}componentDidUpdate(e){const t=this.props.additionalControlValue!==e.additionalControlValue;this.props.externalIsOpenState&&(!e.externalIsOpenState||t)&&this.searchElement&&this.focus()}render(){const{options:e,noOptionsMessage:t,onChange:n,searchPlaceholder:a,customRowStyle:h,externalIsOpenState:y,externalOpenCloseAction:v,width:b,emptyMessage:k,missingValue:S,hasFixedTableHeight:C,additionalControl:x}=this.props,w=this.state.search.toLowerCase().trim();let T=e;w.length&&(T=e.filter(({value:e})=>-1!==e.toLocaleLowerCase().indexOf(w)));const P=Math.min(d,T.length);let E=T.length>0?u*P+10:c.TableHeightWhenEmpty,F=u;C&&!T.length&&(F=E=u*d+10);const M=t||k,_=this.currentValue(),O=function inputPreview(e,t,n){return i.createElement("div",{style:previewStyle(t,n)}," ",e," ",i.createElement("div",{style:{top:1,bottom:1,right:0,width:15,position:"absolute",backgroundImage:r.theme.backgroundImage("icon-popover-arrow"),backgroundRepeat:"no-repeat",backgroundPosition:"4px center",pointerEvents:"none"}}))}(_,b||130,_===S),I=x?m:p,D=x?f:g;return i.createElement(s.Popover,{ref:this.setElement,shouldCloseWhenClickedOutside:!1,enabled:!0,inputWidth:b||130,preview:O,onKeyDown:this.onKeyDown,onInputKeyDown:this.onInputKeyDown,onContentMouseDown:nativePreventDefault,onOpen:this.onOpen,onClose:this.onClose,externalIsOpenState:y,externalOpenCloseAction:v},i.createElement("div",{style:{position:"relative",height:E+(o.finiteNumber(I.height)||0)}},i.createElement("div",{style:I},i.createElement(l.TextInput,{ref:this.setElement,type:l.TextInputType.Field,value:this.state.search,placeholder:a||"Search",className:"force-focus-border",onChange:this.onSearchChange,constantChange:!0,style:D,onArrow:this.onKeyDown,onEnter:this.onKeyDown}),x),i.createElement(c.Table,{highlightedValue:_,ref:this.setElement,rowHeight:F,top:o.finiteNumber(I.height)||0,height:E,values:T,onSelection:n,customRowStyle:h,emptyMessage:M,emptyMessageHeight:E})))}};const p={position:"absolute",width:"100%",height:45,borderBottom:`1px solid ${r.theme.propertyPanelDivider}`},g={position:"absolute",top:10,left:10,width:a.layout.propertyPanelWidth-21},m={position:"absolute",width:"100%",height:80,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"space-around",borderBottom:`1px solid ${r.theme.propertyPanelDivider}`,overflow:"hidden"},f={marginTop:10,width:a.layout.propertyPanelWidth-21},y="Multiple";function nativePreventDefault(e){e.nativeEvent.preventDefault()}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(3),r=n(224),s=n(76);t.TableHeightWhenEmpty=38;const a=5,l={width:"100%",padding:"0 16px",fontSize:"11px",lineHeight:"15px",textAlign:"center",color:o.theme.componentsEmptyText,display:"flex",alignItems:"center",justifyContent:"center"},c={position:"absolute",width:"100%",overflow:"auto",WebkitOverflowScrolling:"touch",overflowX:"hidden",overflowY:"overlay",padding:`${a}px 0`},d={width:"100%",padding:"0 10px",fontSize:"11px",lineHeight:"22px",cursor:"default",WebkitUserSelect:"none",userSelect:"none",textOverflow:"ellipsis",whiteSpace:"nowrap",transform:"tarnslateZ(0px)"};t.Table=class Table extends i.Component{constructor(){super(...arguments),this.state={current:0,shouldHighlightCurrent:!0,visibleRows:{start:0,end:0}},this.renderedRowKeys=new Set,this.scrollEdge="no",this.scrollIntoView=e=>{if(e){switch(this.scrollEdge){case"center":r.scrollIntoView(e,{scrollMode:"if-needed",block:"center"});break;case"closest edge":r.scrollIntoView(e,{scrollMode:"if-needed",block:"nearest"})}this.scrollEdge="no"}},this.highlightPrevious=()=>{const e=this.state.current-1;this.highlightIndex(e)},this.highlightNext=()=>{const e=this.state.current+1;this.highlightIndex(e)},this.highlightIndex=(e,t="closest edge")=>{const{values:n}=this.props;e<0?e=0:e>=n.length&&(e=n.length-1),this.scrollEdge=t;const i={start:e-10<0?0:e-10,end:e+10<15?15:e+10};this.setState(Object.assign({},this.state,{current:e,shouldHighlightCurrent:!0,visibleRows:i}))},this.selectCurrent=()=>{const{values:e}=this.props,{current:t}=this.state,n=e[t];n&&this.props.onSelection(n.key)},this.highlight=e=>{const{values:t}=this.props,n=t.findIndex(({value:t})=>t===e);this.highlightIndex(n,"center")},this.onScroll=e=>{const{rowHeight:t}=this.props,n=e.nativeEvent.target,i=Math.floor(n.scrollTop/t),o={start:i,end:i+Math.ceil(n.clientHeight/t)};this.setState(Object.assign({},this.state,{visibleRows:o}))},this.onRowClick=e=>{const t=e.currentTarget.getAttribute("data-value");t&&this.props.onSelection(t)},this.onRowMouseOver=e=>{const t=e.currentTarget.getAttribute("data-value");if(t){const e=this.props.values.findIndex(({key:e})=>e===t);this.setState(Object.assign({},this.state,{shouldHighlightCurrent:!0,current:e}))}},this.onMouseOut=e=>{this.setState(Object.assign({},this.state,{shouldHighlightCurrent:!1}))}}componentWillMount(){const{highlightedValue:e}=this.props;this.highlight(e)}render(){const{values:e,top:n,emptyMessage:o,emptyMessageHeight:r}=this.props;let{height:s}=this.props;const a=0===e.length&&o;return a&&(s=r||t.TableHeightWhenEmpty),i.createElement("div",{style:Object.assign({},c,{height:s,top:n}),onScroll:this.onScroll,onMouseOut:this.onMouseOut},a?this.emptyMessage():i.createElement(u,Object.assign({ref:this.scrollIntoView,onRowMouseOver:this.onRowMouseOver,onRowClick:this.onRowClick,renderedRowKeys:this.renderedRowKeys},this.props,this.state)))}emptyMessage(){const{emptyMessage:e,emptyMessageHeight:n}=this.props,o=(n||t.TableHeightWhenEmpty)-2*a;return i.createElement("div",{key:"empty",style:Object.assign({},l,{height:o})},e)}};const u=i.forwardRef((e,t)=>{const{values:n,visibleRows:r,customRowStyle:a,rowHeight:l,renderedRowKeys:c,shouldHighlightCurrent:u,current:h,onRowClick:p,onRowMouseOver:g}=e,m=i.useContext(s.MetricsViewContext),f=n.map(({value:e,customComponent:n,key:s,metricId:f},y)=>{let v={};a&&(v=a(e));const b=r.start-5<=y&&y<=r.end+5,k=c.has(s);if(!b&&!k)return i.createElement("div",{key:s,style:{height:l}});c.add(s);const S=u&&h===y?o.theme.tint:o.theme.propertyPanelButtonText,C=Object.assign({},d,{color:S,height:l},v),x=n||e;return i.createElement("div",{key:s,style:C,"data-value":s,"data-index":y,onClick:p,onMouseOver:g,ref:h===y?t:void 0,"data-metric-id":f,"data-metric-view":m.view},x)});return i.createElement(i.Fragment,null,f)})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(30),r=n(3),s=n(1),a=n(44),l=(e,t)=>({position:"absolute",top:0,right:0,left:0,bottom:0,margin:0,width:e,backgroundColor:r.theme.propertyPanelInputBackground,borderRadius:3,WebkitAppearance:"none",border:`1px solid ${t?r.theme.tint:r.theme.propertyPanelInputBorder}`,backgroundImage:r.theme.backgroundImage("icon-popover-arrow"),backgroundRepeat:"no-repeat",backgroundPosition:`${e-14}px center`}),c={position:"absolute",top:1,bottom:1,right:18,width:1,zIndex:6,backgroundColor:r.theme.propertyPanelInputBorder};t.default=class NumberComboBox extends i.Component{constructor(){super(...arguments),this.numberInput=null,this.state={focus:!1},this.onSelect=e=>{const t=e.target,n=parseFloat(t.value);Number.isFinite(n)&&this.props.onChange(n),null!==this.numberInput&&this.numberInput.focus()},this.focusDidChange=e=>{this.setState({focus:e})},this.setNumberInput=e=>{this.numberInput=e},this.onKeyDown=e=>{a.default.isKey(e,a.default.Key.escape)&&(e.currentTarget.blur(),e.preventDefault())}}render(){const{options:e,fractionDigits:t,label:n,width:r,onChange:a,value:u,minValue:h,maxValue:p,step:g}=this.props,m=void 0!==r?r:60,f=e.map((e,n)=>{const o=e.toFixed(t);return i.createElement("option",{label:o,key:n},e)});let y=-1,v="";if(s.isFiniteNumber(u)&&(y=e.findIndex(e=>Math.abs(e-u)<1e-6),v=u),-1===y&&s.isFiniteNumber(u)){let n=e.findIndex(e=>e>u);-1===n&&(n=e.length);const o=u.toFixed(t);f.splice(n,0,i.createElement("option",{label:o,key:-1},u))}else v=e[y];return i.createElement("div",{style:{position:"relative",margin:5,width:m,height:24}},i.createElement(o.NumberInput,{value:u,onChange:a,min:h,max:p,step:g,label:n,focusDidChange:this.focusDidChange,ref:this.setNumberInput,style:Object.assign({},d,{width:m-18})}),i.createElement("select",{onKeyDown:this.onKeyDown,style:l(m,this.state.focus),onChange:this.onSelect,value:v,tabIndex:-1},f),i.createElement("div",{style:c}))}};const d={position:"absolute",margin:0,border:"none",backgroundColor:r.theme.propertyPanelInputBackground,height:22,top:1,left:1,zIndex:5}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(94),r=n(17),s=n(38),a=n(863),l=n(8),c=n(459),d=n(67),u=n(68),h=n(294),p=n(29),g=n(2),m=n(190),f=n(147);t.ShadowPanel=class ShadowPanel extends i.Component{constructor(){super(...arguments),this.add=g.default.wrapHandler(()=>{const{properties:e,shadowType:t}=this.props,{ids:n,updates:i}=h.addShadowLevel(e,t);g.default.bulkNodeUpdate(n,i)}),this.deleteDisabledRows=g.default.wrapHandler(()=>{const{properties:e,shadowType:t}=this.props,{ids:n,updates:i}=h.removeDisabledLevels(e,t);g.default.bulkNodeUpdate(n,i)}),this.removeAll=g.default.wrapHandler(()=>{g.default.updateNodesForEach(this.props.nodes,e=>{if(this.props.shadowType===h.ShadowType.Inset){if(u.hasBoxShadow(e)&&e.boxShadows){let t=e.boxShadows.filter(e=>!e.inset);return 0===t.count()&&(t=void 0),{boxShadows:t}}}else{if(u.hasBoxShadow(e)&&e.boxShadows){let t=e.boxShadows.filter(e=>e.inset);return 0===t.count()&&(t=void 0),{boxShadows:t}}if(d.hasShadow(e))return{shadows:void 0}}})}),this.removeItemAtIndex=g.default.wrapHandler(e=>{const{properties:t,shadowType:n}=this.props,i=(n===h.ShadowType.Inset?t.nodeBoxShadows:t.nodeShadows).map(e=>e.node);g.default.updateNodesForEach(i,t=>{const i=h.shadowIndex(t,n,e);if(-1!==i){if(u.hasBoxShadow(t)&&t.boxShadows)return{boxShadows:t.boxShadows.delete(i)};if(d.hasShadow(t)&&t.shadows)return{shadows:t.shadows.delete(i)}}})}),this.moveItem=g.default.wrapHandler((e,t)=>{if(e===t)return;const{properties:n,shadowType:i}=this.props,o=i===h.ShadowType.Inset?n.nodeBoxShadows:n.nodeShadows,r=o.map(e=>e.node),s=i===h.ShadowType.Inset;g.default.updateNodesForEach(r,(r,a)=>{const l=h.shadowIndex(r,i,e),c=o[a];let p,g,f="";if(u.hasBoxShadow(r)?(p=r.boxShadows,f=u.boxShadowsKey):d.hasShadow(r)&&(p=r.shadows,f=d.shadowsKey),!p)return;if(-1===l){const t=h.shadowDefaults(n,i,e);g=u.hasBoxShadow(r)?new m.BoxShadow(Object.assign({},t.boxShadow,{inset:s})):new m.Shadow(t.shadow)}else g=p.get(l),p=p.delete(l);const y=i===h.ShadowType.Inset?c.insideShadows.length:c.outsideShadows.length,v=Math.max(0,t-Math.max(0,y-1));for(let e=0;e<v;e++){const e=u.hasBoxShadow(r)?new m.BoxShadow({enabled:!1,inset:s}):new m.Shadow({enabled:!1});p=p.push(e)}let b=h.shadowIndex(r,i,t);return-1===b&&(b=p.count()),{[f]:p=p.insert(b,g)}})}),this.onContextMenu=e=>{const{properties:t,shadowType:n}=this.props;if(0===(n===h.ShadowType.Inset?Math.max(t.enabledInsideShadowLevels.length,0):Math.max(t.enabledOutsideShadowLevels.length,0)))return;const i=[{label:"Remove All",click:this.removeAll}];p.Menu.buildFromTemplate(i).popup({x:e.clientX,y:e.clientY})}}render(){const{properties:e,nodes:t,shadowType:n}=this.props;if(0===e.nodeShadows.length)return null;if(n===h.ShadowType.Inset&&0===e.nodeBoxShadows.length)return null;const d=n===h.ShadowType.Inset?e.enabledInsideShadowLevels:e.enabledOutsideShadowLevels,u=n===h.ShadowType.Inset?"Inner Shadows":"Shadows",p=-1!==d.indexOf(!1),g=Math.max(d.length,0),m=0===g;return i.createElement(r.default,{nodes:t,withHeader:!0,empty:m},i.createElement(s.PanelHeader,{title:u,addition:{action:this.add},subtraction:{action:this.deleteDisabledRows,enabled:p},onContextMenu:this.onContextMenu,empty:m}),i.createElement(o.Sortable,{key:t.map(e=>e.id).join(","),items:Array(g).fill(null),moveItem:this.moveItem,removeItem:this.removeItemAtIndex,onDragStart:f.popoverPortal.closeIfOpen},({index:t})=>i.createElement(a.ShadowRow,{type:n,properties:e,level:t})),!m&&i.createElement(l.default,null,i.createElement(c.InputLabels,{labels:["x","y","b","s"]})))}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(1),r=n(8),s=n(458),a=n(29),l=n(68),c=n(67),d=n(294),u=n(122),h=n(2),p=n(190);t.ShadowRow=class ShadowRow extends i.Component{constructor(){super(...arguments),this.deleteShadows=h.default.wrapHandler(()=>{const{properties:e,type:t,level:n}=this.props,i=(t===d.ShadowType.Inset?e.nodeBoxShadows:e.nodeShadows).map(e=>e.node);h.default.updateNodesForEach(i,e=>{const i=d.shadowIndex(e,t,n);if(-1!==i){if(l.hasBoxShadow(e)&&e.boxShadows){let t=e.boxShadows.delete(i);return 0===t.count()&&(t=void 0),{boxShadows:t}}if(c.hasShadow(e)&&e.shadows){let t=e.shadows.delete(i);return 0===t.count()&&(t=void 0),{shadows:t}}}})}),this.duplicateShadows=h.default.wrapHandler(()=>{const{properties:e,type:t,level:n}=this.props,i=(t===d.ShadowType.Inset?e.nodeBoxShadows:e.nodeShadows).map(e=>e.node);h.default.updateNodesForEach(i,e=>{const i=d.shadowIndex(e,t,n);if(-1!==i){if(l.hasBoxShadow(e)&&e.boxShadows){const t=e.boxShadows.get(i);if(!t)return;return{boxShadows:e.boxShadows.insert(i+1,t)}}if(c.hasShadow(e)&&e.shadows){const t=e.shadows.get(i);if(!t)return;return{shadows:e.shadows.insert(i+1,t)}}}})}),this.onCheckbox=h.default.wrapHandler(e=>{if(!e)return void this.updateShadows({enabled:e});const{type:t,level:n,properties:i}=this.props,{ids:o,updates:r}=d.enableShadows(i,t,n);h.default.bulkNodeUpdate(o,r)}),this.onChangeOpacity=h.default.wrapHandler(e=>{const t={},{properties:n,type:i,level:r}=this.props,s=n.nodeShadows.map(e=>e.node);!1===d.anyEnabledShadow(s,i,r)&&(t.enabled=!0),this.updateShadowsWithCallback(n=>{const i=n.color;return t.color=o.ConvertColor.setAlpha(i,e/100),n instanceof p.BoxShadow?new p.BoxShadow(n.merge(t)):new p.Shadow(n.merge(t))})}),this.onChangeColor=h.default.wrapHandler(e=>{this.updateShadows({color:e})}),this.onValueChange=h.default.wrapHandler((e,t)=>{if(3===e)return void this.updateBoxShadows({spread:t});let n;switch(e){case 0:n="x";break;case 1:n="y";break;case 2:n="blur";break;default:return}this.updateShadows({[n]:t})}),this.onContextMenu=e=>{const t=[{label:"Duplicate",click:this.duplicateShadows},{label:"Remove",click:this.deleteShadows}];a.Menu.buildFromTemplate(t).popup({x:e.clientX,y:e.clientY})}}updateShadowsWithCallback(e,t=!1){const{properties:n,type:i,level:o}=this.props,r=(t||i===d.ShadowType.Inset?n.nodeBoxShadows:n.nodeShadows).map(e=>e.node);h.default.updateNodesForEach(r,t=>{const n=d.shadowIndex(t,i,o);if(-1!==n){if(l.hasBoxShadow(t)&&t.boxShadows)return{boxShadows:t.boxShadows.map((t,i)=>i!==n?t:e(t))};if(c.hasShadow(t)&&t.shadows)return{shadows:t.shadows.map((t,i)=>i!==n?t:e(t))}}})}updateShadows(e){const{properties:t,type:n,level:i}=this.props,o=(n===d.ShadowType.Inset?t.nodeBoxShadows:t.nodeShadows).map(e=>e.node);!1===d.anyEnabledShadow(o,n,i)&&(e=Object.assign({},e,{enabled:!0})),this.updateShadowsWithCallback(t=>t instanceof p.BoxShadow?new p.BoxShadow(t.merge(e)):new p.Shadow(t.merge(e)))}updateBoxShadows(e){const{properties:t,type:n,level:i}=this.props,o=(n===d.ShadowType.Inset?t.nodeBoxShadows:t.nodeShadows).map(e=>e.node);!1===d.anyEnabledShadow(o,n,i)&&(e=Object.assign({},e,{enabled:!0})),this.updateShadowsWithCallback(t=>new p.BoxShadow(t.merge(e)),!0)}render(){const{type:e,level:t,properties:n}=this.props,o=d.shadowReducer(n,e,t),a=[o.x,o.y,o.blur,o.spread];return i.createElement(r.default,{checkbox:{value:o.indeterminate?null:o.enabled,onChange:this.onCheckbox,id:`shadow-${e}-${t}`},onContextMenu:this.onContextMenu},i.createElement(u.ColorPicker,{value:o.color||"",onChangeColor:this.onChangeColor}),i.createElement(s.default,{key:"shadow-details",onValueChange:this.onValueChange,values:a,minValues:[void 0,void 0,0,void 0],defaultValues:[0,0,0,0],enabled:[!0,!0,!0,o.shadowSpreadEnabled]}))}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(17),r=n(38),s=n(865),a=n(45),l=n(3),c=n(2),d=n(66),u="Remove",h=["Layer","Background",r.PanelHeader.divider,u];function blurTypeToDisplay(e){switch(e){case"layer":return"Layer";default:return"Background"}}function showMoreInformation(){window.open("https://www.framer.com/app-redirect/background-blur")}t.BlurPanel=class BlurPanel extends i.Component{constructor(){super(...arguments),this.updateNodes=e=>{const t=a.traitFilter(this.props.nodes,d.withFilters);c.default.updateNodesDirect(t,e)},this.add=c.default.wrapHandler(()=>{this.updateNodes({blurEnabled:1,blur:12,blurType:"layer"})}),this.minus=c.default.wrapHandler(()=>{this.updateNodes({blurEnabled:void 0,blur:void 0,blurType:void 0})}),this.changeType=c.default.wrapHandler(e=>{const t={blurType:e};null!==this.props.properties.blurEnabled&&(t.blurEnabled=1),this.updateNodes(t)}),this.onSelect=e=>{switch(e){case"Layer":this.changeType("layer");break;case"Background":this.changeType("background");break;case u:this.minus()}}}render(){const{nodes:e,properties:t}=this.props;if(void 0===t.blurEnabled)return null;const{blurTypes:n}=t;let a,l,c=!1;return 0===t.blurEnabled?(c=!0,a={action:this.add}):-1!==t.blurEnabled&&(l={values:h,selectedValues:n.map(blurTypeToDisplay),onSelect:this.onSelect}),i.createElement(o.default,{nodes:e,withHeader:!0,empty:c},i.createElement(r.PanelHeader,{title:"Blur",addition:a,settings:l,subtraction:{action:this.minus,enabled:-1===t.blurEnabled},empty:c}),!c&&i.createElement(s.default,{nodes:e,properties:t}),!c&&-1!==t.blurTypes.indexOf("background")&&i.createElement("div",{style:p},"Background Blur is an experimental feature."," ",i.createElement("span",{style:g,onClick:showMoreInformation},"Read about known issues.")))}};const p={margin:"5px 10px 5px",fontSize:"10px",lineHeight:"1.3em",color:l.theme.propertyPanelLabel,pointerEvents:"none"},g={color:l.theme.tint,cursor:"pointer",pointerEvents:"auto"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(1),r=n(29),s=n(8),a=n(30),l=n(80),c=n(45),d=n(2),u=n(66);t.default=class BlurRow extends i.Component{constructor(){super(...arguments),this.updateNodes=d.default.wrapHandler(e=>{const t=c.traitFilter(this.props.nodes,u.withFilters);d.default.updateNodesDirect(t,e)}),this.onChange=e=>{const{properties:t}=this.props,n={blur:Math.max(0,Math.round(e))};null!==t.blurEnabled&&(n.blurEnabled=1),this.updateNodes(n)},this.onCheckbox=e=>{this.updateNodes({blurEnabled:e?1:-1})},this.onContextMenu=e=>{const t=[{label:"Remove",click:()=>{this.updateNodes({blurEnabled:0})}}];r.Menu.buildFromTemplate(t).popup({x:e.clientX,y:e.clientY})}}render(){const{properties:e}=this.props,{blurEnabled:t,disabledBlur:n}=e;if(0===t)return null;const r=o.isFiniteNumber(e.blur)?Math.round(e.blur):n;let c;switch(t){case 1:c=!0;break;case-1:c=!1;break;default:c=null}return i.createElement(s.default,{checkbox:{value:c,onChange:this.onCheckbox,id:"blur"},title:"Amount",onContextMenu:this.onContextMenu},i.createElement(a.NumberInput,{key:"value",value:r,onChange:this.onChange,min:0,defaultValue:0}),i.createElement(l.SliderInput,{value:r,max:50,onChange:this.onChange}))}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(17),r=n(38),s=n(45),a=n(26),l=n(867),c=n(29),d=n(2),u=n(66),h=n(72),p={brightnessEnabled:"Brightness",contrastEnabled:"Contrast",grayScaleEnabled:"Grayscale",hueRotateEnabled:"Hue Rotate",invertEnabled:"Invert",saturateEnabled:"Saturate",sepiaEnabled:"Sepia"},g=Object.keys(p);t.FiltersPanel=class FiltersPanel extends i.Component{constructor(){super(...arguments),this.add=d.default.wrapHandler(e=>{const t=e.title,n=function enabledKey(e){return g.find(t=>p[t]===e)}(t),i=this.nodes().filter(e=>{const t=e[n];return 0===t||void 0===t});d.default.updateNodesDirect(i,Object.assign({[n]:1},function valueDefault(e){switch(e){case"Brightness":return{brightness:100};case"Contrast":return{contrast:100};case"Grayscale":return{grayscale:0};case"Hue Rotate":return{hueRotate:0};case"Invert":return{invert:0};case"Saturate":return{saturate:100};case"Sepia":return{sepia:0}}}(t)))}),this.minus=d.default.wrapHandler(()=>{const{nodes:e}=this.props,t={};g.forEach(n=>{const i=e.map(e=>e[n]);-1===a.commonValue(i)&&(t[n]=void 0)}),d.default.updateNodesDirect(e,t)}),this.removeAll=d.default.wrapHandler(()=>{const e=this.nodes(),t={brightnessEnabled:void 0,brightness:void 0,contrastEnabled:void 0,contrast:void 0,grayScaleEnabled:void 0,grayscale:void 0,hueRotateEnabled:void 0,hueRotate:void 0,invertEnabled:void 0,invert:void 0,saturateEnabled:void 0,saturate:void 0,sepiaEnabled:void 0,sepia:void 0};d.default.updateNodesDirect(e,t)}),this.onContextMenu=e=>{const{properties:t}=this.props;let n=!0;if(g.forEach(e=>{const i=t[e];n=n&&0===i}),n)return;const i=[{label:"Remove All",click:this.removeAll}];c.Menu.buildFromTemplate(i).popup({x:e.clientX,y:e.clientY})}}nodes(){return s.traitFilter(this.props.nodes,u.withFilters)}render(){const{properties:e,nodes:t}=this.props;if(void 0===e.brightnessEnabled)return null;const n=[];let s=!1,a=!0;return g.forEach(t=>{const i=e[t];a=a&&h.Property.isDisabledHidden(i),h.Property.isDisabledVisible(i)&&(s=!0),h.Property.isDisabledHidden(i)&&n.push(p[t])}),i.createElement(o.default,{nodes:t,withHeader:!0,empty:a},i.createElement(r.PanelHeader,{title:"Filters",addition:{items:n.map(e=>({title:e})),action:this.add},subtraction:{action:this.minus,enabled:s},empty:a,onContextMenu:this.onContextMenu}),i.createElement(l.FilterRow,{enabledKey:"brightnessEnabled",valueKey:"brightness",nodes:t,properties:e,max:200,unit:"%",defaultValue:100}),i.createElement(l.FilterRow,{enabledKey:"contrastEnabled",valueKey:"contrast",nodes:t,properties:e,max:200,unit:"%",defaultValue:100}),i.createElement(l.FilterRow,{enabledKey:"grayScaleEnabled",valueKey:"grayscale",nodes:t,properties:e,unit:"%",defaultValue:0}),i.createElement(l.FilterRow,{enabledKey:"hueRotateEnabled",valueKey:"hueRotate",nodes:t,properties:e,max:360,unit:"",defaultValue:0}),i.createElement(l.FilterRow,{enabledKey:"invertEnabled",valueKey:"invert",nodes:t,properties:e,unit:"%",defaultValue:0}),i.createElement(l.FilterRow,{enabledKey:"saturateEnabled",valueKey:"saturate",nodes:t,properties:e,max:200,unit:"%",defaultValue:100}),i.createElement(l.FilterRow,{enabledKey:"sepiaEnabled",valueKey:"sepia",nodes:t,properties:e,unit:"%",defaultValue:0}))}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(1),r=n(868),s=n(30),a=n(80),l=n(66),c=n(45),d=n(2);t.FilterRow=class FilterRow extends i.Component{constructor(){super(...arguments),this.onChange=d.default.wrapHandler(e=>{const{nodes:t,enabledKey:n,valueKey:i}=this.props,o=c.traitFilter(t,l.withFilters),r={[n]:1,[i]:e};d.default.updateNodesDirect(o,r)})}render(){const{nodes:e,properties:t,enabledKey:n,unit:l,valueKey:c,max:d,defaultValue:u}=this.props,h=t[n];if(0===h||void 0===h)return null;const p=t[c],g=o.isFiniteNumber(d)?d:100;return i.createElement(r.EffectsRow,{title:title(n),nodes:e,properties:t,enabledKey:n},i.createElement(s.NumberInput,{value:p,min:0,max:g,onChange:this.onChange,unit:l,defaultValue:u}),i.createElement(a.SliderInput,{value:p,max:g,onChange:this.onChange}))}};const u={brightnessEnabled:"Brightness",contrastEnabled:"Contrast",grayScaleEnabled:"Graysc",hueRotateEnabled:"Hue",invertEnabled:"Invert",saturateEnabled:"Saturate",sepiaEnabled:"Sepia"};function title(e){return u[e]}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(29),r=n(8),s=n(45),a=n(2),l=n(66);t.EffectsRow=class EffectsRow extends i.Component{constructor(){super(...arguments),this.updateNodes=a.default.wrapHandler(e=>{const{nodes:t,enabledKey:n}=this.props,i=s.traitFilter(t,l.withFilters);a.default.updateNodesDirect(i,{[n]:e})}),this.onCheckbox=e=>{this.updateNodes(e?1:-1)},this.onContextMenu=e=>{const t=[{label:"Remove",click:()=>{this.updateNodes(0)}}];o.Menu.buildFromTemplate(t).popup({x:e.clientX,y:e.clientY})}}render(){const{title:e,properties:t,enabledKey:n,children:o,secondRow:s}=this.props,a=t[n];if(0===a)return null;let l;switch(a){case 1:l=!0;break;case-1:l=!1;break;default:l=null}return i.createElement(r.default,{title:e,checkbox:{value:l,onChange:this.onCheckbox,id:n},onContextMenu:this.onContextMenu,secondRow:s},o)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(7),r=n(1),s=n(9),a=n(4),l=n(17),c=n(8),d=n(870),u=n(38),h=n(432),p=n(31),g=n(217),m=n(45),f=n(263),y=n(174),v=n(144),b=n(2),k=n(871),S=n(28),C=["Add iOS Presets","Add Android Presets"],x=[...C,u.PanelHeader.divider,"Remove All"];function exportTitle(e){if(0===e.exportCount)return"Export";if(e.exportPreviewNode){return"Export "+y.exportName(e.exportPreviewNode.node)}const t=e.exportCount>1?"s":"";return"Export "+e.exportCount+" Layer"+t}t.ExportPanel=class ExportPanel extends i.Component{constructor(){super(...arguments),this.focusRowID=null,this.exportAllArtboardsOnUpdate=!1,this.onAddRow=b.default.wrapHandler(()=>{const{nodes:e}=this.props,{exportRows:t}=this.props.properties;if(!t||0===t.length)return void this.onMakeExportable();let n=null,i=null;const r=t.slice(0).reverse();for(const o of r)if("svg"!==o.type){n=o.scale,i=o.type;break}null===i&&(i="png"),n=null===n?1:Math.floor(n+1),-1===d.exportScales.indexOf(n)&&(n=n<1?1:d.exportScales[d.exportScales.length-1]);const s=1===n?"":`@${n}x`,l=new a.ExportOptions({enabled:!0,type:i,scale:n,nameExtension:s});b.default.updateNodesForEach(e,e=>{if(p.hasExport(e))return{exportOptions:e.exportOptions?e.exportOptions.push(l):o.List([l])}})}),this.onMakeExportable=b.default.wrapHandler(()=>{const{nodes:e}=this.props;let t="png";e.filter(e=>v.isExportableAsSVG(e)).length===e.length&&(t="svg");const n={exportOptions:o.List([new a.ExportOptions({enabled:!0,type:t,scale:1,nameExtension:""})])};b.default.updateNodesForEach(e,e=>{if(p.hasExport(e)&&e.exportOptions.isEmpty())return n})}),this.onChangeSettings=b.default.wrapHandler(e=>{const{nodes:t}=this.props;let n;switch(e){case"Add iOS Presets":n=w.toArray();break;case"Add Android Presets":n=T.toArray();break;case"Remove All":return void this.removeAllExportOptions();default:return}b.default.updateNodesForEach(t,e=>{if(p.hasExport(e))return{exportOptions:e.exportOptions.push(...n)}})}),this.removeAllExportOptions=b.default.wrapHandler(()=>{const e=m.traitFilter(this.props.nodes,p.hasExport);b.default.updateNodesDirect(e,{exportOptions:o.List([])})}),this.removeDisabledExportOptions=b.default.wrapHandler(()=>{const{properties:e,nodes:t}=this.props,{exportRows:n}=e;if(!n)return;const i=[];for(let o=0,r=n.length;o<r;o++){const e=n[o];if(!1===e.enabled){const t=g.exportOptionUniqueId(e.id,e.idOccurrence);i.push(t)}}b.default.updateNodesForEach(t,e=>{if(!p.hasExport(e))return;const t=[];for(let n=0,o=i.length;n<o;n++){const o=i[n],r=g.exportOptionIndex(o,e);-1!==r&&t.push(r)}return 0!==t.length?{exportOptions:e.exportOptions.filter((e,n)=>-1===t.indexOf(n))}:void 0})}),this.onExport=b.default.wrapHandler(()=>{const e=b.default.tree;s.triggerExportBitmapEvent({});const{nodes:t}=this.props,n=y.exportNodes(e,m.traitFilter(t,p.hasExport));y.startExport(n,f.ExportMode.Selection)})}componentWillUpdate(e){if(this.exportAllArtboardsOnUpdate&&(this.exportAllArtboardsOnUpdate=!1),this.focusRowID=null,this.focusType="scale",!r.isEqual(this.props.selection,e.selection))return;const t=this.props.properties.exportRows,n=e.properties.exportRows;if(!t||!n)return;const i=0===n.length,o=n.length!==t.length;if(i||o)return;const s=n.map(e=>g.exportOptionUniqueId(e.id,e.idOccurrence)),a=t.map(e=>g.exportOptionUniqueId(e.id,e.idOccurrence)),l=a.filter(e=>-1===s.indexOf(e)),c=s.filter(e=>-1===a.indexOf(e));if(1===c.length&&(this.focusRowID=c[0],1===l.length)){const e=t.find(e=>g.exportOptionUniqueId(e.id,e.idOccurrence)===l[0]),i=n.find(e=>g.exportOptionUniqueId(e.id,e.idOccurrence)===c[0]);e&&i&&(e.type!==i.type&&(this.focusType="image"),e.nameExtensionMode!==i.nameExtensionMode&&(this.focusType="extensionMode"))}}render(){const e=b.default.tree,{properties:t}=this.props,{exportRows:n,canExportAsSVG:o,exportableNodes:r}=t;if(0===r.length)return null;let s=!1,a=null;n&&n.length&&(a=n.map(e=>{s=s||!1===e.enabled;const n=g.exportOptionUniqueId(e.id,e.idOccurrence),r=n===this.focusRowID?this.focusType:void 0,a="svg"===e.type&&!o;return i.createElement(d.ExportRow,{key:n,nodes:t.exportableNodes,row:e,uniqueId:n,autoFocus:r,interactionDisabled:a})}));const p=null===a,m={selectedValues:[],values:p?C:x,onSelect:this.onChangeSettings},y=t.exportPreviewNode;return i.createElement(l.default,{nodes:r,autohide:!1,empty:p,withHeader:!0},i.createElement(u.PanelHeader,{title:S.experiments.isOn("exportPanel")?"Assets":"Export",addition:r.length>0?{action:this.onAddRow}:void 0,subtraction:{action:this.removeDisabledExportOptions,enabled:s},settings:m}),a,!p&&i.createElement(c.default,null,i.createElement(h.ExportButtonContainer,{title:exportTitle(t),onClick:this.onExport,enabled:t.exportCount>0,mode:f.ExportMode.Selection})),y&&i.createElement(k.default,{preview:y,exportOption:y.exportOptions.first(),tree:e,includeBackground:!0===t.exportIncludesBackground}))}};const w=o.List([new a.ExportOptions({scale:1}),new a.ExportOptions({scale:2,nameExtension:"@2x"}),new a.ExportOptions({scale:3,nameExtension:"@3x"})]),T=o.List([new a.ExportOptions({scale:1,nameExtension:"mdpi/",nameExtensionMode:"Folder"}),new a.ExportOptions({scale:1.5,nameExtension:"hdpi/",nameExtensionMode:"Folder"}),new a.ExportOptions({scale:2,nameExtension:"xhdpi/",nameExtensionMode:"Folder"}),new a.ExportOptions({scale:3,nameExtension:"xxhdpi/",nameExtensionMode:"Folder"}),new a.ExportOptions({scale:4,nameExtension:"xxxhdpi/",nameExtensionMode:"Folder"})])},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(2),r=n(29),s=n(8),a=n(455),l=n(31),c=n(217),d=n(4),u=n(144),h=n(79);t.exportScales=[.5,1,1.5,2,3,4];const p=[".5x","1x","1.5x","2x","3x","4x"],g=["Suffix","Folder"];t.ExportRow=class ExportRow extends i.Component{constructor(){super(...arguments),this.setScaleElement=e=>{this.scaleElement=e},this.setImageElement=e=>{this.imageTypeElement=e},this.setExtensionElement=e=>{this.extensionModeElement=e},this.focusScale=()=>{this.scaleElement.focus()},this.focusImageType=()=>{this.imageTypeElement.focus()},this.onChangeRowEnabled=o.default.wrapHandler((e,t)=>{if(!e)return void this.updateExportOptions({enabled:!1});const{row:n}=this.props;o.default.updateNodesForEach(this.props.nodes,e=>{if(!l.hasExport(e))return;const i=c.exportOptionIndex(t,e);let o;if(-1!==i)o=e.exportOptions.update(i,e=>new d.ExportOptions(e.merge({enabled:!0})));else{const{nameExtension:t,scale:i,type:r,nameExtensionMode:s}=n,a=new d.ExportOptions({enabled:!0,type:r,scale:i,nameExtensionMode:s,nameExtension:t||""});if(!function exportOptionCanBeAppliedToNode(e,t){return!("svg"===e.type&&!u.isExportableAsSVG(t))}(a,e))return;o=e.exportOptions.push(a)}return{exportOptions:o}})}),this.onChangeRowType=o.default.wrapHandler(e=>{const t={type:e};"svg"===e&&(t.scale=1),this.updateExportOptions(t)}),this.onChangeRowScale=o.default.wrapHandler(e=>{const n=p.indexOf(e),i=t.exportScales[n],o={scale:i},r=function nameExtensionDefault(e,t){return rowIsIos(e)?iosDefaultExtension(t):rowIsAndroid(e)?androidDefaultExtension(t):void 0}(this.props.row,i);void 0!==r&&(o.nameExtension=r),this.updateExportOptions(o)}),this.onChangeRowNameExtension=o.default.wrapHandler(e=>{this.updateExportOptionsForEach(t=>{const n=validNameExtension(e,t.nameExtensionMode);return t.merge({nameExtension:n})})}),this.onChangeExtensionMode=o.default.wrapHandler(e=>{this.updateExportOptionsForEach(t=>{const n=function nameExtensionForModeSwitch(e,t){if("Folder"===t){if(rowIsIos(e))return androidDefaultExtension(e.scale)}else if("Suffix"===t&&rowIsAndroid(e))return iosDefaultExtension(e.scale);return validNameExtension(e.nameExtension,t)}(t,e);return t.merge({nameExtensionMode:e,nameExtension:n})})}),this.remove=o.default.wrapHandler(()=>{o.default.updateNodesForEach(this.props.nodes,e=>{if(!l.hasExport(e))return;const t=c.exportOptionIndex(this.props.uniqueId,e);return-1!==t?{exportOptions:e.exportOptions.remove(t)}:void 0})}),this.duplicate=o.default.wrapHandler(()=>{o.default.updateNodesForEach(this.props.nodes,e=>{if(!l.hasExport(e))return;const t=c.exportOptionIndex(this.props.uniqueId,e);if(-1===t)return;const n=e.exportOptions.get(t);return{exportOptions:e.exportOptions.insert(t+1,n)}})}),this.onContextMenu=e=>{const t=[{label:"Duplicate",click:this.duplicate},{label:"Remove",click:this.remove}];r.Menu.buildFromTemplate(t).popup({x:e.clientX,y:e.clientY})}}updateExportOptions(e){o.default.updateNodesForEach(this.props.nodes,t=>{if(!l.hasExport(t))return;const n=c.exportOptionIndex(this.props.uniqueId,t);if(-1===n)return;const i=t.exportOptions.get(n);return{exportOptions:t.exportOptions.set(n,new d.ExportOptions(i.merge(e)))}})}updateExportOptionsForEach(e){o.default.updateNodesForEach(this.props.nodes,t=>{if(!l.hasExport(t))return;const n=c.exportOptionIndex(this.props.uniqueId,t);if(-1===n)return;const i=t.exportOptions.get(n);return{exportOptions:t.exportOptions.set(n,e(i))}})}exportTypesForNodes(e,t){for(const n of e)if(!u.isExportableAsSVG(n)&&"svg"!==t.type)return c.exportTypes.filter(e=>"svg"!==e);return c.exportTypes}render(){const{uniqueId:e,row:n,autoFocus:o,nodes:r,interactionDisabled:l}=this.props,c=this.exportTypesForNodes(r,n),d=null===n.enabled?null:n.enabled&&!l;return i.createElement(s.default,{key:"row"+e,checkbox:{value:d,onChange:this.onChangeRowEnabled,id:e,disabled:l},onContextMenu:this.onContextMenu},i.createElement(h.PopupButton,{ref:this.setScaleElement,style:f,autoFocus:"scale"===o,enabled:"svg"!==n.type&&!l},p.map((e,o)=>i.createElement(h.PopupButtonItem,{key:e,identifier:e,title:e,selected:t.exportScales.indexOf(n.scale)===o,onSelect:this.onChangeRowScale}))),i.createElement(a.default,{ref:this.setExtensionElement,style:m,placeHolder:placeHolder(n.nameExtension,n.nameExtensionMode),value:n.nameExtension||"",onChangeValue:this.onChangeRowNameExtension,type:n.nameExtensionMode,typeOptions:g,onChangeType:this.onChangeExtensionMode,autoFocus:"extensionMode"===o,enabled:!l}),i.createElement(h.PopupButton,{ref:this.setImageElement,style:{width:60},enabled:!l,autoFocus:"image"===o},c.map(e=>i.createElement(h.PopupButtonItem,{key:e,identifier:e,title:e.toUpperCase(),selected:n.type===e,onSelect:this.onChangeRowType}))))}};const m={margin:"5px",width:60},f={width:38,paddingLeft:3.5,letterSpacing:-.2};function placeHolder(e,t){return null===e?"Multiple":e.length>0?"":t}function validNameExtension(e,t){let n=e;if(n.length){"/"===n[n.length-1]?"Suffix"===t&&(n=n.slice(0,-1)):"Folder"===t&&(n+="/")}return n}function rowIsIos(e){return"Suffix"===e.nameExtensionMode&&(1===e.scale&&!e.nameExtension||!!e.nameExtension&&e.nameExtension===iosDefaultExtension(e.scale))}function rowIsAndroid(e){return"Folder"===e.nameExtensionMode&&(.5===e.scale&&!e.nameExtension||e.nameExtension===androidDefaultExtension(e.scale))}function iosDefaultExtension(e){switch(e){case.5:return"@0.5x";case 1.5:return"@1.5x";case 2:return"@2x";case 3:return"@3x";case 4:return"@4x";default:return""}}function androidDefaultExtension(e){switch(e){case 1:return"mdpi/";case 1.5:return"hdpi/";case 2:return"xhdpi/";case 3:return"xxhdpi/";case 4:return"xxxhdpi/";default:return""}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(15),r=n(14),s=n(3),a=n(872),l=n(1);t.default=class ExportPreviewRow extends i.Component{constructor(){super(...arguments),this.onDragStart=e=>{o.getIpcRenderer().send(r.ExportDragPreviewStart),e.stopPropagation()}}render(){return i.createElement("div",{style:c,className:"fadeInLong"},i.createElement(a.GeneratedPreviewImage,{calculateScore:!0,renderTarget:l.RenderTarget.export,tree:this.props.tree,node:this.props.preview.node,exportOption:this.props.exportOption,includeBackground:this.props.includeBackground},e=>e?i.createElement("img",{draggable:!0,style:d,onDragStart:this.onDragStart,src:e}):null))}};const c={margin:"10px 10px 0px 10px",width:200,textAlign:"center"},d={maxWidth:198,maxHeight:198,position:"relative",borderRadius:2,top:0,boxShadow:"0 1px 1px rgba(0,0,0,0.1), 0px 2px 4px 0px rgba(0,0,0,0.075)",background:`${s.theme.backgroundImage("pattern-checkboard-export-preview")}, white`,backgroundRepeat:"repeat"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(873);t.GeneratedPreviewImage=i.GeneratedPreviewImage,t.RenderCategory=i.RenderCategory},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(4),r=n(217),s=n(7),a=n(2),l=n(874),c=n(875);var d;!function(e){e.EXPORT_PREVIEW="exportPreview",e.COMPONENTS_PREVIEW="componentsPreview"}(d=t.RenderCategory||(t.RenderCategory={}));const u=new o.ExportOptions({enabled:!0,type:"png",scale:2,nameExtension:"",nameExtensionMode:"Suffix"}),h='data:image/svg+xml;utf8,<svg width="180" height="180" xmlns="http://www.w3.org/2000/svg" xmlns:svg="http://www.w3.org/2000/svg"><g class="layer"><text fill="rgb(255, 0, 85)" style="font-family: system-ui, -apple-system, BlinkMacSystemFont, Roboto, Helvetica, Arial, sans-serif;font-size: 32px" id="svg_2" text-anchor="middle" x="50%" width="100%" xml:space="preserve" y="50%" dy="11">Error</text><rect fill="rgba(255, 0, 85, 0.1)" height="180" id="svg_3" stroke="rgb(255, 0, 85)" stroke-width="6" width="180" x="0" y="0"/></g></svg>',p={};t.GeneratedPreviewImage=class GeneratedPreviewImage extends i.Component{constructor(){super(...arguments),this.state={currentRequestId:void 0,previewImage:void 0,previewSize:void 0},this.onGetResponseFromRenderQueue=(e,t)=>{this.state.currentRequestId===e&&(p[e]=t,this.setState({previewImage:t}))}}requestIdForProps(e,t){return o.isCodeComponentNode(e)&&e.codeComponentIdentifier.startsWith(".")?e.id+e.update+a.default.canvasStore.componentHash+r.exportOptionId(t||u):e.id+e.update+r.exportOptionId(t||u)}componentWillMount(){this.requestExportableImage(this.props)}componentDidUpdate(){const e=this.requestIdForProps(this.props.node,this.props.exportOption);this.state.currentRequestId!==e&&this.requestExportableImage(this.props)}getTree(e){if(e.tree)return e.tree;const{node:t}=e,n=t.rect(),i=new o.default,r=t.cloneWithIds(t.updateForRect(Object.assign({},n,{x:0,y:0}),null));return r.update=t.update,i.insertNode(r,o.NullID),i}isScoreAcceptable(e){let t=0;return e.walk(e=>{t+=1,e instanceof o.SVGNode&&(t+=10)}),!(t>200)}onGetResponseFromExportHTMLQueue(e){const{responseRequestId:t,exportsDescriptor:n,width:i,height:o,maxSideSize:r,category:s}=e;if(t!==this.state.currentRequestId)return;if(null===n)return void this.setState({previewImage:h,currentRequestId:t,previewSize:{width:i,height:o}});const a=n.outputs.find(e=>void 0!==e);if(!a)return;const c=n.inputs[a.keyPath.scale][0];if(null===c)return;const u=s||d.EXPORT_PREVIEW;this.setState({previewImage:void 0,currentRequestId:t,previewSize:{width:i,height:o}}),l.getRenderQueue().push(Object.assign({},a,c,{maxSideSize:r,requestId:t,category:u}),t,this.onGetResponseFromRenderQueue,()=>{})}pushRequestToQueue({requestId:e,tree:t,node:n,props:i,width:o,height:r}){if(this.state.currentRequestId!==e)return;const a=t.getNode(n.id);a&&(i.calculateScore&&!this.isScoreAcceptable(a)||c.getExportHTMLQueue().push({tree:t,nodes:[a],defaultExportOptions:s.List([u]),renderTarget:i.renderTarget},e,(e,t)=>{this.onGetResponseFromExportHTMLQueue({responseRequestId:e,exportsDescriptor:t,width:o,height:r,maxSideSize:i.maxSideSize,category:i.category})}))}requestExportableImage(e){const t=this.requestIdForProps(e.node,e.exportOption);if(p[t])return void this.setState(Object.assign({},this.state,{previewImage:p[t],currentRequestId:t}));const{node:n}=e,i=this.getTree(e),{width:o,height:r}=i.getRect(n);this.setState({previewImage:void 0,currentRequestId:t,previewSize:{width:o,height:r}}),setTimeout(()=>this.pushRequestToQueue({requestId:t,tree:i,node:n,props:e,width:o,height:r}),150)}render(){const{previewImage:e}=this.state;return"function"==typeof this.props.children?this.props.children(e):null}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(15),o=n(14),r=1;let s;t.getRenderQueue=function getRenderQueue(){if(!s){const e={},t=[];let n=0;const a=e=>{i.getIpcRenderer().send(o.GeneratePreview,e.data),n++,"function"==typeof e.onStartProcessing&&e.onStartProcessing()},l=(i,o)=>{if(n--,e[i]&&(0,e[i])(i,o),t.length&&n<r){const e=t.shift();e&&a(e)}};s={push(i,o,s,l){e[o]=s,n<r?a({data:i,onStartProcessing:l}):t.push({data:i,onStartProcessing:l})}},i.getIpcRenderer().on(o.GeneratePreview,l)}return s}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(174),o=1;let r;t.getExportHTMLQueue=function getExportHTMLQueue(){if(!r){const e={},t=[];let n=0;const s=e=>{requestAnimationFrame(()=>{let t;const{tree:n,nodes:o,defaultExportOptions:r,renderTarget:s}=e.data;try{t=i.exportNodes(n,o,r,s)}catch(l){return a(e.requestId,null)}a(e.requestId,t)}),n++,"function"==typeof e.onStartProcessing&&e.onStartProcessing()},a=(i,r)=>{if(n--,e[i]&&(0,e[i])(i,r),t.length&&n<o){const e=t.shift();e&&s(e)}};r={push(i,r,a,l){e[r]=a,n<o?s({data:i,onStartProcessing:l,requestId:r}):t.push({data:i,onStartProcessing:l,requestId:r})}}}return r}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(17),r=n(8),s=n(47),a=n(115),l=n(45),c=n(2);t.OverflowPanel=class OverflowPanel extends i.Component{constructor(){super(...arguments),this.onSelect=c.default.wrapHandler(e=>{const t=l.traitFilter(this.props.nodes,a.hasClip);c.default.updateNodesDirect(t,{clip:1===e})})}render(){const{nodes:e,properties:t}=this.props;if(void 0===t.clip)return null;let n;switch(t.clip){case!1:n=0;break;case!0:n=1;break;default:n=-1}return i.createElement(o.default,{nodes:e,style:{borderTop:"none",paddingTop:0,marginTop:-5}},i.createElement(r.default,{title:"Overflow"},i.createElement(s.SegmentedControl,{titles:d,selectedIndex:n,onSelect:this.onSelect,style:u})))}};const d=["Show","Hide"],u={width:130}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(9),r=n(24),s=n(2),a=n(17),l=n(38),c=n(878),d=n(879),u=n(8),h=n(64),p=n(466),g=n(113),m=n(218),f=n(26),y="Examples";t.OverridePanel=class OverridePanel extends i.Component{constructor(){super(...arguments),this.updateNodesWithOverride=(e,t,n,i)=>{const o=this.props.nodes.filter(g.hasCodeOverride);s.default.updateNodesDirect(o,{codeOverrideEnabled:e,codeOverrideIdentifier:t,codeOverrideFile:n,codeOverrideName:i})},this.removeConnection=s.default.wrapHandler(()=>{this.updateNodesWithOverride(!1,void 0,void 0,void 0)}),this.onSelectFile=s.default.wrapHandler(e=>{this.updateNodesWithOverride(!0,void 0,e,void 0)}),this.editFile=()=>{const e=this.selectedFile();e&&m.openCodeComponentFile(s.default.persistedUserDefaults.useInternalEditor,e)},this.selectedFile=()=>f.commonValue(this.selectedOrFirstFiles()),this.onSelectOverride=s.default.wrapHandler(e=>{const t=this.selectedFile();if(null===t)return;const n=r.componentLoader.componentIdentifiers().find(n=>{const i=r.componentLoader.componentForIdentifier(n);return!!i&&i.name===e&&i.file===t});this.updateNodesWithOverride(!0,n,t,e),o.triggerComponentCodeOverrideSetEvent({})})}selectedOrFirstFiles(){const{codeOverrideFiles:e}=this.props.properties;if(0===e.length){const e=d.FileRow.getAvailableFiles()[0];return e?[e]:[]}return e}render(){const{nodes:e,properties:t,componentHash:n}=this.props,{codeOverrideEnabled:o,codeOverrideName:r}=t;if(void 0===o)return null;const g=null===o||o;let m,f;g?f={enabled:g,action:this.removeConnection}:m={action:s.default.wrapHandler(()=>{this.updateNodesWithOverride(!0,void 0,void 0,void 0),d.FileRow.getAvailableFiles().length>0||p.createCodeOverrideFile(s.default.persistedUserDefaults.useInternalEditor,y,p.FileTemplate.Defaults,!1)})};const b=this.selectedFile(),k=[];return g&&(k.push(i.createElement(d.FileRow,{key:"file",componentHash:n,selectedFiles:this.selectedOrFirstFiles(),onSelectFile:this.onSelectFile}),i.createElement(c.OverrideRow,{key:"override",componentHash:n,selectedFile:b,selectedOverride:r,onSelectOverride:this.onSelectOverride})),b&&k.push(i.createElement(u.default,{key:"edit-code"},i.createElement(h.Button,{title:"Edit Code",onClick:this.editFile,style:v})))),i.createElement(a.default,{nodes:e,empty:!g,withHeader:!0},i.createElement(l.PanelHeader,{title:"Override",addition:m,subtraction:f,empty:!g}),k)}};const v={width:"100%",margin:"5px 5px",padding:"0 0.6em",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(8),r=n(1),s=n(24),a=n(79);class OverrideRow extends i.Component{static getAvailableOverrides(e){return s.componentLoader.componentIdentifiers().map(t=>{const n=s.componentLoader.componentForIdentifier(t);if(n&&r.isOverride(n)&&n.file===e)return n.name}).filter(Boolean)}render(){const{selectedOverride:e,onSelectOverride:t,selectedFile:n}=this.props;return null===n?null:i.createElement(o.default,{title:"Override"},i.createElement(a.PopupButton,null,i.createElement(a.PopupButtonItem,{key:"select-key",title:"Select",selected:!e,visible:!e}),i.createElement(a.PopupButtonItem,{key:"select-divider",type:"divider"}),OverrideRow.getAvailableOverrides(n).map(n=>i.createElement(a.PopupButtonItem,{key:n,identifier:n,title:n,selected:e===n,onSelect:t}))))}}t.OverrideRow=OverrideRow},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(2),r=n(1),s=n(24),a=n(466),l=n(79),c=n(8);class FileRow extends i.Component{constructor(){super(...arguments),this.createNewFile=()=>{let e="App";const t=s.componentLoader.localPackageIdentifier(),n=s.componentLoader.packageFileNames(t).map(FileRow.labelForItem);let i=1;for(;-1!==n.indexOf(e)&&i<100;)e=`App${i}`,i++;a.createCodeOverrideFile(o.default.persistedUserDefaults.useInternalEditor,e,a.FileTemplate.Empty,!1)}}static getAvailableFiles(){const e=s.componentLoader.localPackageIdentifier();return s.componentLoader.componentIdentifiers().map(t=>{const n=s.componentLoader.componentForIdentifier(t);if(n&&n.packageIdentifier===e&&r.isOverride(n))return n.file}).filter(Boolean)}static labelForItem(e){return e.replace(/^\.\/(.*)\.(tsx|ts|js)$/,"$1")}render(){const{selectedFiles:e,onSelectFile:t}=this.props,n=0===e.length,o=[...new Set(FileRow.getAvailableFiles())].sort();return i.createElement(c.default,{title:"File"},i.createElement(l.PopupButton,null,i.createElement(l.PopupButtonItem,{key:"select-file-key",title:"Select",enabled:!1,selected:n,visible:n}),i.createElement(l.PopupButtonItem,{key:"select-divider",type:"divider"}),o.map((n,o)=>i.createElement(l.PopupButtonItem,{key:`${o}-${n}`,identifier:n,title:FileRow.labelForItem,selected:e.some(e=>e===n),onSelect:t})),i.createElement(l.PopupButtonItem,{key:"new-file-divider",type:"divider"}),i.createElement(l.PopupButtonItem,{key:"new-file-key",title:"New File",onSelect:this.createNewFile})))}}t.FileRow=FileRow},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(17),r=n(8),s=n(47),a=n(2),l=n(6),c=n(10);class SizeToFitContentPanel extends i.Component{static calculateState(){return{shapeModeActive:a.default.toolStore.state.shapeModeActive}}render(){if(!this.state.shapeModeActive)return null;const{nodes:e,properties:t}=this.props;return t.onlyShapeContainerNodes?i.createElement(o.default,{nodes:e,style:{borderTop:"none",paddingTop:0,marginTop:-5}},i.createElement(r.default,{title:" "},i.createElement(s.SegmentedControl,{titles:["Auto","Fixed"],selectedIndex:segmentIndex(t),onSelect:sizeToFitActionHandler(e),style:{width:130}}))):null}}function sizeToFitActionHandler(e){return a.default.wrapHandler(t=>{const n=0===t;a.default.updateNodesDirect(e,{sizeToFit:n})})}function segmentIndex(e){switch(e.sizeToFit){case!0:return 0;case!1:return 1;default:return-1}}SizeToFitContentPanel.engineChangeKeys=l.EngineChangeFlags.ToolStore;const d=c.default(SizeToFitContentPanel);t.SizeToFitContentPanel=d},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(3);t.TabBar=function TabBar({selected:e,tabs:t,onTab:n}){const o=t.length;return i.createElement("div",{style:s},t.map((t,r)=>{const s=r===o-1;return i.createElement("div",{key:t,style:tabItem(t===e,s),onClick:()=>n(t)},t)}))};const r=`solid 1px ${o.theme.propertyPanelDivider}`,s={display:"flex",height:34,minHeight:34,width:"100%",background:o.theme.propertyPanelHeaderBackground,borderBottom:r};function tabItem(e,t){return{width:1,flexGrow:1,height:"100%",display:"flex",alignItems:"center",justifyContent:"center",background:e?void 0:o.theme.propertyPanelBackground,color:e?o.theme.sectionHeaderText:o.theme.propertyPanelButtonTextInactive,fontSize:"11px",lineHeight:"22px",WebkitUserSelect:"none",userSelect:"none",cursor:"default",borderRight:t?void 0:r}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(2),r=n(38),s=n(17),a=n(100),l=n(3),c=n(10),d=n(6),u=["CSS","React CSS"];class CodeExportPanel extends i.PureComponent{constructor(){super(...arguments),this.getCSSText=(e,t)=>{if(!t||0===t.length)return null;const n=t[0];return a.getCSSForNode(e,n)},this.renderStyledCSS=(e,t)=>{const{cssType:n}=this.state;return a.getCSSInfoForNode(e,t,n).map(e=>{const t="number"===e.type?v:y,o="CSS"===n?";":",";return i.createElement("div",{key:e.prop,style:m},i.createElement("span",{style:f},e.prop),": ",i.createElement("span",{style:t},e.value),o)})},this.onChangeSettings=e=>{o.default.documentSettings.exportCSSType=e}}static calculateState(){return{cssType:o.default.documentSettings.exportCSSType}}render(){const{tree:e}=o.default,{nodes:t}=this.props,{properties:{exportableNodes:n}}=this.props;if(!t||0===t.length)return null;const a=t[0],l={selectedValues:[this.state.cssType],values:u,onSelect:this.onChangeSettings};return i.createElement(s.default,{nodes:n,autohide:!1,withHeader:!0},i.createElement(r.PanelHeader,{title:"Code",settings:l}),i.createElement("div",{className:"wantsNativeTextAction",tabIndex:0,style:g},this.renderStyledCSS(e,a)))}}CodeExportPanel.engineChangeKeys=d.EngineChangeFlags.DocumentSettings;const h=c.default(CodeExportPanel);t.CodeExportPanel=h;const p={userSelect:"text",WebkitUserSelect:"text"},g=Object.assign({width:"100%",maxHeight:"500px",padding:"10px",pointerEvents:"auto",lineHeight:"18px",fontSize:"11px",fontFamily:"Input Mono, Menlo, monospace",fontWeight:"lighter"},p),m=Object.assign({color:l.theme.codeExportPanelCSSText},p),f=Object.assign({color:l.theme.codeExportPanelCSSProp},p),y=Object.assign({color:l.theme.codeExportPanelCSSValueString},p),v=Object.assign({color:l.theme.codeExportPanelCSSValueNumber},p)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(77),r=n(2),s=n(10),a=n(884),l=n(885),c=n(463),d=n(285),u=n(464),h=n(109),p=n(6),g=n(147);class PathProperties extends i.Component{static calculateState(){return r.default.pathSelectionStore.state}shouldComponentUpdate(e,t){return!h.default(e,this.props)||!h.default(t,this.state)}render(){const{nodes:e}=this.props;if(0===e.length)return null;const t=d.reduceProperties(r.default.tree,e);return i.createElement("div",{className:o.invisiblePanelScroller},i.createElement(a.default,Object.assign({},this.state)),i.createElement(l.default,Object.assign({nodes:e},this.state)),i.createElement(c.FillPanel,{nodes:e,properties:t}),i.createElement(u.StrokePanel,{properties:t,isLastPanel:!0}),g.popoverPortal.component())}}PathProperties.engineChangeKeys=p.EngineChangeFlags.PathSelection;const m=s.default(PathProperties);t.PathProperties=m},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(449),r=n(175),s=n(32),a=n(2);t.default=class AlignmentHeader extends i.PureComponent{constructor(){super(...arguments),this.alignAction=e=>{const{segmentSelection:t}=this.props;r.ContextAlignment.alignPathSegments(a.default.tree,t,e)},this.distributeAction=e=>{const{segmentSelection:t}=this.props;r.ContextAlignment.distributePathSegments(a.default.tree,t,e)}}render(){const{segmentSelection:e,segmentHandle:t,selectionType:n}=this.props,r=n===s.PathSelectionType.Curves||null!==t,a=!r&&e.length>0,l=!r&&e.length>2;return i.createElement(o.default,{alignActionsEnabled:a,distributeActionsEnabled:l,alignAction:this.alignAction,distributeAction:this.distributeAction})}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(17),r=n(886),s=n(887),a=n(4);t.default=class PathPanel extends i.PureComponent{render(){const{segmentSelection:e,pointRounding:t,segmentHandle:n,selectionType:l}=this.props,c=this.props.nodes.filter(e=>e instanceof a.PathNode);return i.createElement(o.default,{nodes:c,style:{borderTop:"none"},autohide:!1},i.createElement(r.default,{pathSelection:e,segmentHandle:n,selectionType:l}),i.createElement(s.default,{pathSelection:e,selectionType:l}))}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(1),r=n(8),s=n(30),a=n(1),l=n(4),c=n(32),d=n(26),u=n(11),h=n(2);t.default=class PathPointPositionRow extends i.PureComponent{constructor(){super(...arguments),this.changeX=h.default.wrapHandler(e=>{this.newValue(e,!0)}),this.changeY=h.default.wrapHandler(e=>{this.newValue(e,!1)}),this.newValue=(e,t)=>{const n=h.default.tree,{pathSelection:i,segmentHandle:r}=this.props;if(r){const i=u.segmentHandlePoint(n,r);if(!i)return;t?i.x=e:i.y=e;const o=n.getNode(r.id),s=u.handleUpdate(n,r,i);n.updateNode(o,o.updateForPath({pathSegments:s}))}else{const r=u.groupPathSegmentSelectors(i);for(const i in r){const s=n.getNode(l.nodeIDFromString(i)),a=r[i],c=s.pathSegments.map((n,i)=>-1!==a.indexOf(i)?t?new o.PathSegment(n.merge({x:e-s.x})):new o.PathSegment(n.merge({y:e-s.y})):n);n.updateNode(s,s.updateForPath({pathSegments:c}))}}}}render(){const e=h.default.tree,{pathSelection:t,segmentHandle:n,selectionType:l}=this.props;let p,g;if(l===c.PathSelectionType.Segments)if(n){const t=u.segmentHandlePoint(e,n);t&&(p=t.x,g=t.y)}else if(t.length){const n=t.map(t=>{const n=e.getNode(t.id),i=n.pathSegments.get(t.index),o={x:n.x,y:n.y};return a.Point.add(i,o)});p=d.commonPropertyValue(n,"x"),g=d.commonPropertyValue(n,"y")}return o.isFiniteNumber(p)&&(p=o.roundedNumber(p,2)),o.isFiniteNumber(g)&&(g=o.roundedNumber(g,2)),i.createElement(r.default,{title:"Position"},i.createElement(s.NumberInput,{value:p,onChange:this.changeX,label:["X"],enabled:void 0!==p}),i.createElement(s.NumberInput,{value:g,onChange:this.changeY,label:["Y"],enabled:void 0!==g}))}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(8),r=n(30),s=n(80),a=n(32),l=n(11),c=n(19),d=n(2),u=n(1);t.default=class PathSegmentRadiusRow extends i.PureComponent{constructor(){super(...arguments),this.onChangeRadius=d.default.wrapHandler(e=>{const t=d.default.tree,n={radius:e},{pathSelection:i}=this.props,o=l.groupPathSegmentSelectors(i);for(const r in o){const e=t.getNode(r),i=o[r],s=e.pathSegments.map((e,t)=>-1===i.indexOf(t)?e:new u.PathSegment(e.merge(n)));t.updateNode(e,e.updateForPath({pathSegments:s}))}})}render(){const e=d.default.tree,{selectionType:t,pathSelection:n}=this.props;if(t===a.PathSelectionType.Curves)return null;const u={},h=l.groupPathSegmentSelectors(n),p=Object.keys(h);for(const i of p){const t=e.getNode(i),n=h[i];c.default.reduceRadius(t.pathSegments,t.pathClosed,u,n)}return void 0===u.radius?null:i.createElement(o.default,{title:"Radius"},i.createElement(r.NumberInput,{value:u.radius,onChange:this.onChangeRadius,min:0}),i.createElement(s.SliderInput,{value:u.radius,onChange:this.onChangeRadius,max:50}))}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(77),r=n(10),s=n(889),a=n(6),l=n(2);class ShapeContainerDefaultsPanelContainer extends i.Component{static calculateState(){return{openCategories:l.default.toolStore.state.shapeContainerOpenCategories}}render(){const{nodes:e}=this.props;return i.createElement("div",{className:o.invisiblePanelScroller},i.createElement(s.ShapeContainerDefaultsPanel,{nodes:e,openCategories:this.state.openCategories}))}}ShapeContainerDefaultsPanelContainer.engineChangeKeys=a.EngineChangeFlags.ToolStore,t.container=r.default(ShapeContainerDefaultsPanelContainer),t.ShapeContainerDefaultsPanelContainer=t.container},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(9),r=n(448),s=n(4),a=n(166),l=n(2),c=n(1),d=n(5),u=n(293);t.ShapeContainerDefaultsPanel=class ShapeContainerDefaultsPanel extends i.PureComponent{constructor(){super(...arguments),this.addShapeContainer=(e,t)=>{const n=a.suggestedRect(l.default.tree,e,this.props.nodes.map(e=>e.id),void 0,void 0,Math.min(e.width,100));this.createShapeContainer(n,t)},this.onClickCategory=l.default.wrapHandler((e,t)=>{const n=new Set(this.props.openCategories);t?n.delete(e):n.add(e),l.default.setShapeContainerOpenCategories(n)}),this.createShapeContainer=l.default.wrapHandler((e,t)=>{const n=l.default.tree.newId(),i={top:e.y,left:e.x,width:e.width,height:e.height};l.default.createShapeContainer(s.NullID,Object.assign({id:n},i)),o.triggerLayoutGraphicEvent({source:"props_panel"}),l.default.exitTool(),l.default.canvasStore.scrollToCenter(c.Rect.center(e)),l.default.setShapeModeActive(!0),l.default.setSelection([n])})}render(){const{openCategories:e}=this.props,t=[];return t.push(i.createElement(u.PropertyPanelHint,{key:"hint",type:u.PropertyPanelHintIdentifier.Graphic})),h.forEach((n,o)=>{const s=e.has(n),a=i.createElement(r.FrameSizeCategoryRow,{key:n,onClick:this.onClickCategory,title:n,open:s});if(t.push(a),!s)return;const l=[];p[n].forEach((e,t)=>{const o={width:e[1],height:e[1]},s=i.createElement(r.FrameSizeRow,{key:n+t,title:e[0],size:o,onClick:this.addShapeContainer});l.push(s)}),t.push(i.createElement(r.FramerSizeRowContainer,{key:o},l))}),i.createElement("div",null,t)}};const h=[d.ShapeContainerCategories.MacOS,d.ShapeContainerCategories.iOS,d.ShapeContainerCategories.Watch,d.ShapeContainerCategories.Android],p={[d.ShapeContainerCategories.MacOS]:[["Finder",16],["Finder 2x",32],["Dock",128],["Dock 2x",256],["Preview",512],["Preview 2x",1024]],[d.ShapeContainerCategories.iOS]:[["iPhone App",180],["iPhone Spotlight",80],["iPhone Plus Spotlight",120],["iPhone Settings",58],["iPhone Plus Settings",87],["iPhone Notification",40],["iPhone Plus Notification",60],["iPad Pro App",167],["iPad App",152],["iPad Spotlight",80],["iPad Settings",58],["iPad Notification",40],["App Store App",1024]],[d.ShapeContainerCategories.Watch]:[["Homescreen",80],["Notification Center 38mm",48],["Notification Center 42mm",55],["Short Look 38mm",172],["Short Look 42mm",196],["Apple Watch App 38mm",58],["Apple Watch App 42mm",87],["App Store",1024]],[d.ShapeContainerCategories.Android]:[["LDPI",36],["MDPI",48],["HDPI",72],["XHDPI",96],["XXHDPI",144],["XXXHDPI",192],["Play Store",512]]}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(293),r=n(5),s=n(10),a=n(6),l=n(2);class PropertiesEmptyState extends i.Component{static calculateState(){return{tool:l.default.toolStore.state.tool}}nuxType(){const{tool:e}=this.state;switch(e){case r.Tools.NavigationLink:return o.PropertyPanelHintIdentifier.NavigationLink;case r.Tools.CreateStackComponent:return o.PropertyPanelHintIdentifier.Stack;case r.Tools.CreateScrollComponent:return o.PropertyPanelHintIdentifier.Scroll;case r.Tools.CreatePageComponent:return o.PropertyPanelHintIdentifier.Page}}render(){const e=this.nuxType();return i.createElement("div",{style:d},e&&i.createElement(o.PropertyPanelHint,{type:e}))}}PropertiesEmptyState.engineChangeKeys=a.EngineChangeFlags.ToolStore;const c=s.default(PropertiesEmptyState);t.PropertiesEmptyState=c;const d={display:"flex",flexDirection:"column",justifyContent:"center",height:"100%"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(3),r=n(2),s=n(13);t.Crash=class Crash extends i.Component{constructor(){super(...arguments),this.hide=r.default.wrapMouseHandler(()=>{r.default.documentSettings.crashMessage=null,r.default.zoomToFitAll()})}render(){const{crashMessage:e}=this.props;return e?i.createElement("div",{style:a,className:"hint"},i.createElement("div",{style:l}),i.createElement("div",{style:d},"Framer crashed, apologies for the interruption :( ",e,""),i.createElement("div",{style:c}),i.createElement("div",{style:u,onClick:this.hide},"Dismiss")):null}};const a={position:"fixed",left:0,right:0,bottom:s.layout.statusBarHeight,backgroundColor:o.theme.error,display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"row",textAlign:"left",fontWeight:300,fontSize:"12px",lineHeight:1.6,cursor:"default",WebkitFontSmoothing:"subpixel-antialiased",color:o.theme.errorText,padding:"15px"},l={flexGrow:10},c=Object.assign({},l,{minWidth:20}),d={padding:"0 6 0"},u={cursor:"pointer",pointerEvents:"auto",color:"rgba(255,255,255,.5)"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(893),r=n(10),s=n(2),a=n(6);class ToolPanelState extends i.Component{static calculateState(){return{selection:s.default.selection}}render(){const{selectedTool:e,header:t}=this.props,{selection:n}=this.state;return i.createElement(o.ToolPanel,{selectedTool:e,selection:n,header:t})}}ToolPanelState.engineChangeKeys=a.EngineChangeFlags.Selection,t.ToolPanelContainer=r.default(ToolPanelState)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(894),r=n(5),s=n(221),a=n(3),l=n(77);t.ToolPanel=class ToolPanel extends i.Component{render(){const{selectedTool:e,header:t}=this.props;return i.createElement(s.TabContent,{header:t},i.createElement("div",{className:l.panelScroller,style:c},i.createElement("div",null,i.createElement("div",{style:u},"Layout"),i.createElement(o.Tool,{title:"Frame",name:"layout-frame",selectedTool:e,tool:r.Tools.CreateFrame,accelerator:"F"}),i.createElement(o.Tool,{title:"Round",name:"layout-round",selectedTool:e,tool:r.Tools.CreateRoundedFrame,accelerator:"U"}),i.createElement(o.Tool,{title:"Text",name:"layout-text",selectedTool:e,tool:r.Tools.CreateText,accelerator:"T"}),i.createElement(o.Tool,{title:"Stack",name:"layout-stack",selectedTool:e,tool:r.Tools.CreateStackComponent,accelerator:"S"}),i.createElement("div",{style:d},"Interactive"),i.createElement(o.Tool,{title:"Link",name:"interactive-link",selectedTool:e,tool:r.Tools.NavigationLink,accelerator:"L"}),i.createElement(o.Tool,{title:"Scroll",name:"interactive-scroll",selectedTool:e,tool:r.Tools.CreateScrollComponent}),i.createElement(o.Tool,{title:"Page",name:"interactive-page",selectedTool:e,tool:r.Tools.CreatePageComponent}),i.createElement("div",{style:d},"Drawing"),i.createElement(o.Tool,{title:"Graphic",name:"drawing-graphic",selectedTool:e,tool:r.Tools.CreateShapeContainer,accelerator:"G"}),i.createElement("div",{style:d},"Canvas"),i.createElement(o.Tool,{title:"Select",name:"canvas-select",selectedTool:e,tool:r.Tools.DirectSelect,accelerator:""}),i.createElement(o.Tool,{title:"Zoom",name:"canvas-zoom",selectedTool:e,tool:r.Tools.Zoom,accelerator:"Z"}),i.createElement(o.Tool,{title:"Pan",name:"canvas-pan",selectedTool:e,tool:r.Tools.Pan,accelerator:"Space"}))))}};const c={position:"absolute",left:0,right:0,top:0,bottom:0,WebkitAppRegion:"drag",WebkitUserSelect:"none",zIndex:1,overflow:"auto",WebkitOverflowScrolling:"touch",overflowX:"hidden",overflowY:"overlay",flexGrow:1,display:"flex",flexDirection:"column",justifyContent:"space-between"},d={color:a.theme.toolSectionHeaderText,position:"relative",display:"block",fontWeight:500,fontSize:"11px",lineHeight:"11px",marginLeft:15,marginBottom:8,marginTop:23,pointerEvents:"none",WebkitUserSelect:"none",userSelect:"none",height:11},u=Object.assign({},d,{marginTop:15})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(52),r=n(2),s=n(3);t.Tool=class Tool extends i.Component{constructor(){super(...arguments),this.onMouseDown=r.default.wrapHandler(e=>{const{disabled:t,onClick:n}=this.props;!t&&n&&n(e)}),this.onClick=r.default.wrapMouseHandler(()=>{const{disabled:e,onClick:t,tool:n}=this.props;!e&&void 0===t&&n&&r.default.setToolEnum(n)})}render(){const{title:e,name:t,active:n,tool:r,selectedTool:s,accelerator:h,disabled:p}=this.props,g=n||void 0!==r&&r===s;return i.createElement("div",{style:p?l:a,onClick:this.onClick,onMouseDown:this.onMouseDown},i.createElement(o.Icon,{name:t,active:g||!1,title:e,width:21,height:21,style:c}),i.createElement("span",{style:d(g)},e),h&&i.createElement("span",{style:u},h))}};const a={position:"relative",height:35,paddingRight:15,fontSize:"11px",lineHeight:"35px",marginBottom:1},l=Object.assign({},a,{opacity:.5}),c={float:"left",width:21,height:21,marginTop:7,marginLeft:15,pointerEvents:"none"},d=e=>({marginLeft:10,pointerEvents:"none",color:e?s.theme.toolTextActive:s.theme.toolText,display:"inline-block",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"}),u={float:"right",color:s.theme.toolAccelerator,pointerEvents:"none"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(10),r=n(896),s=n(2),a=n(6);class ShapeToolPanelContainer extends i.Component{static calculateState(){return Object.assign({tree:s.default.tree,selection:s.default.selection},s.default.pathSelectionStore.state)}render(){if(!this.props.shapeModeActive)return null;const{tree:e,selection:t}=this.state,n=e.getNodes(t);return i.createElement(r.ShapeToolPanel,Object.assign({},this.state,this.props,{nodes:n}))}}ShapeToolPanelContainer.engineChangeKeys=a.EngineChangeFlags.Tree|a.EngineChangeFlags.Selection|a.EngineChangeFlags.PathSelection;const l=o.default(ShapeToolPanelContainer);t.ShapeToolPanelContainer=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(897),r=n(898),s=n(899),a=n(5),l=n(2),c=n(3),d=n(13);function startVectorTool(){l.default.setSelection([]),l.default.setToolEnum(a.Tools.Path)}t.ShapeToolPanel=class ShapeToolPanel extends i.Component{constructor(){super(...arguments),this.exitShapeMode=l.default.wrapHandler(()=>{l.default.setShapeModeActive(!1),l.default.setSelection([]),l.default.exitTool()}),this.actionHeader=()=>{const{selectedTool:e}=this.props;return e===a.Tools.Path?i.createElement(s.SegmentControlHeader,Object.assign({},this.props)):i.createElement(r.ShapeActionHeader,Object.assign({},this.props))}}render(){const{selectedTool:e}=this.props;return i.createElement("div",{style:u},i.createElement("div",{style:h},i.createElement(o.ShapeTool,{title:"Path (P)",name:"draw-path",selectedTool:e,tool:a.Tools.Path,onClick:startVectorTool}),i.createElement(o.ShapeTool,{title:"Rect (R)",name:"draw-rect",selectedTool:e,tool:a.Tools.CreateRectangleShape}),i.createElement(o.ShapeTool,{title:"Oval (O)",name:"draw-oval",selectedTool:e,tool:a.Tools.CreateOvalShape}),i.createElement(o.ShapeTool,{title:"Polygon",name:"draw-polygon",selectedTool:e,tool:a.Tools.CreatePolygonShape}),i.createElement(o.ShapeTool,{title:"Star",name:"draw-star",selectedTool:e,tool:a.Tools.CreateStarShape})),this.actionHeader())}};const u={position:"absolute",marginLeft:d.layout.toolbarWidth,left:d.layout.tabContentWidth,right:d.layout.propertyPanelWidth,height:d.layout.shapeBarHeight,WebkitUserSelect:"none",zIndex:1,backgroundColor:c.theme.tabContentAccessoryBackground,borderBottom:`1px solid ${c.theme.tabContentDivider}`,pointerEvents:"auto",display:"flex",flexDirection:"row",justifyContent:"space-between",padding:"0 10px"},h={display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",height:d.layout.shapeBarHeight}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(52),r=n(2);t.ShapeTool=class ShapeTool extends i.Component{constructor(){super(...arguments),this.onMouseDown=r.default.wrapHandler(e=>{const{onClick:t}=this.props;t&&t(e)}),this.onClick=r.default.wrapMouseHandler(()=>{const{onClick:e,tool:t}=this.props;void 0===e&&t&&r.default.setToolEnum(t)})}render(){const{title:e,name:t,active:n,tool:r,selectedTool:a}=this.props,l=n||void 0!==r&&r===a;return i.createElement("div",{onClick:this.onClick,onMouseDown:this.onMouseDown,title:e},i.createElement(o.Icon,{name:t,active:l||!1,width:21,height:21,style:s}))}};const s={float:"left",width:21,height:21,marginRight:10,pointerEvents:"none"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(73),r=n(52),s=n(27),a=n(11),l=n(43),c=n(447),d=n(2);t.ShapeActionHeader=class ShapeActionHeader extends i.Component{constructor(){super(...arguments),this.onBooleanAction=d.default.wrapHandler(e=>{const{tree:t,nodes:n}=this.props,i=n[0];1===n.length&&o.hasBooleanPath(i)?i.originalid||function toggleBooleanType(e,t,n){t.pathBoolean!==n?e.updateNode(t.id,{pathBoolean:n}):l.ContextAction.canUngroup(e.tree,[t])&&l.ContextAction.ungroup(e,[t])}(d.default,i,e):function createBooleanCompound(e,t,n){const i=booleanableNodes(e,t);if(!i)return;const o=c.getStyleSourceNodeFromVectorNodes(i);if(null===o)return;const r=i[0],s=e.getParent(r.id),u=s?s.id:null,h=e.newId(),p=Object.assign({id:h,pathBoolean:n},a.copyShapeStyle(o));d.default.createBooleanPath(u,p),i.forEach(t=>{const n=l.ContextAction.convertNodeToNewParentUpdate(e,t,e.getParent(t.id),s);d.default.moveNode(t.id,h),d.default.updateNode(t.id,n)}),d.default.setSelection([h])}(t,n,e)})}render(){const{nodes:e,tree:t}=this.props,n=null!==booleanableNodes(t,e);let s=n,a=n,l=n,c=n,d=n;const p=e[0];return 1===e.length&&o.hasBooleanPath(p)&&!p.originalid&&(s=p.pathBoolean===o.PathBooleanType.Unite,a=p.pathBoolean===o.PathBooleanType.Subtract,l=p.pathBoolean===o.PathBooleanType.Intersect,c=p.pathBoolean===o.PathBooleanType.Exclude,d=p.pathBoolean===o.PathBooleanType.Join),i.createElement("div",{style:u},i.createElement(r.Icon,{style:h,name:"unite",width:24,height:20,active:s,title:"Unite",onClick:this.onBooleanAction.bind(this,o.PathBooleanType.Unite)}),i.createElement(r.Icon,{style:h,name:"subtract",width:24,height:20,active:a,title:"Subtract",onClick:this.onBooleanAction.bind(this,o.PathBooleanType.Subtract)}),i.createElement(r.Icon,{style:h,name:"intersect",width:24,height:20,active:l,title:"Intersect",onClick:this.onBooleanAction.bind(this,o.PathBooleanType.Intersect)}),i.createElement(r.Icon,{style:h,name:"exclude",width:24,height:20,active:c,title:"Exclude",onClick:this.onBooleanAction.bind(this,o.PathBooleanType.Exclude)}),i.createElement(r.Icon,{style:h,name:"join",width:24,height:20,active:d,title:"Join",onClick:this.onBooleanAction.bind(this,o.PathBooleanType.Join)}))}};const u={height:37,display:"flex",alignItems:"center"},h={marginLeft:4};function booleanableNodes(e,t){if(t.length<=1)return null;const n=e.withoutDescendants(t);if(n.length<=1)return null;const i=new Set;for(let o=0,r=n.length;o<r;o++){const e=n[o];if(!s.hasShape(e)||e.originalid)return null;i.add(e)}return i.size<=1?null:e.sortVisually(Array.from(i))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(4),r=n(32),s=n(11),a=n(26),l=n(52),c=n(2),d=n(1);t.SegmentControlHeader=class SegmentControlHeader extends i.Component{constructor(){super(...arguments),this.onSelect=c.default.wrapHandler(e=>{const{tree:t,segmentSelection:n,segmentHandle:i,selectionType:a}=this.props;if(a!==r.PathSelectionType.Curves)if(i){const n=t.getNode(i.id),o=n.pathSegments.update(i.index,t=>updateSegment(n.pathSegments.toArray(),i.index,e));t.updateNode(n,n.updateForPath({pathSegments:o}))}else{const i=s.groupPathSegmentSelectors(n);for(const n in i){const r=t.getNode(o.nodeIDFromString(n)),s=i[n],a=r.pathSegments.toArray(),l=r.pathSegments.map((t,n)=>-1!==s.indexOf(n)?updateSegment(a,n,e):t);t.updateNode(r,r.updateForPath({pathSegments:l}))}}})}render(){const{tree:e,segmentSelection:t,segmentHandle:n,selectionType:o}=this.props;let s=-1;if(o!==r.PathSelectionType.Curves){let i;switch(i=n?[e.getNode(n.id).pathSegments.get(n.index).handleMirroring]:t.map(t=>e.getNode(t.id).pathSegments.get(t.index).handleMirroring),a.commonValue(i)){case"straight":s=0;break;case"symmetric":s=1;break;case"disconnected":s=2}}return i.createElement("div",{style:u},i.createElement(l.Icon,{style:h,name:"point-straight",width:24,height:20,active:0===s,title:"Straight Corner",onClick:this.onSelect.bind(this,0)}),i.createElement(l.Icon,{style:h,name:"point-mirrored",width:24,height:20,active:1===s,title:"Mirrored Handles",onClick:this.onSelect.bind(this,1)}),i.createElement(l.Icon,{style:h,name:"point-disconnected",width:24,height:20,active:2===s,title:"Disconnected Handles",onClick:this.onSelect.bind(this,2)}))}};const u={height:37,display:"flex",alignItems:"center"},h={marginLeft:10};function updateSegment(e,t,n){const i=e[t];switch(n){case 1:case 2:{const o={handleMirroring:1===n?"symmetric":"disconnected"},r=0===i.handleInX&&0===i.handleInY,s=0===i.handleOutX&&0===i.handleOutY;if("straight"===i.handleMirroring||"symmetric"===o.handleMirroring&&r&&s){const n=d.PathSegment.curveDefault(e,t),i=d.Point.reverse(n);o.handleOutX=n.x,o.handleOutY=n.y,o.handleInX=i.x,o.handleInY=i.y}else"symmetric"===o.handleMirroring&&(r?(o.handleInX=-i.handleOutX,o.handleInY=-i.handleOutY):s&&(o.handleOutX=-i.handleInX,o.handleOutY=-i.handleInY));return new d.PathSegment(i.merge(o))}default:return new d.PathSegment(i.merge({handleMirroring:"straight",handleOutX:0,handleOutY:0,handleInX:0,handleInY:0}))}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(1),r=n(10),s=n(3),a=n(6),l=n(5),c=n(178),d=n(2);class Tooltip extends i.Component{static calculateState(){const{tooltip:e,tooltipArrow:t,tooltipDelay:n,tooltipOrigin:i}=d.default.toolStore.state;return{tooltip:e,tooltipArrow:t,tooltipDelay:n,tooltipOrigin:i}}render(){const{tooltip:e,tooltipArrow:t,tooltipDelay:n,tooltipOrigin:r}=this.state;if(!r||!e||0===e.length)return null;let a;switch(t){case l.ToolTipArrow.Bottom:case l.ToolTipArrow.Left:a=r;break;default:a=o.Point.add(r,{x:20,y:20})}const d=t===l.ToolTipArrow.Bottom,h={position:"relative",width:"auto",height:u,padding:"0 8px 1px 8px",left:d?"-50%":void 0,top:d?"-100%":void 0,fontWeight:400,display:"flex",placeItems:"center",placeContent:"center",lineHeight:"1",color:s.theme.tooltipColor,backgroundColor:s.theme.tooltipBackground,WebkitBackdropFilter:"blur(10px)",backdropFilter:"blur(10px)",WebkitUserSelect:"none",userSelect:"none",borderRadius:t===l.ToolTipArrow.None?"6px":"4px",WebkitFontSmoothing:"subpixel-antialiased",WebkitClipPath:c.Squircle.clipPathWithRadius(.5*u,3)};return i.createElement("div",{style:{position:"absolute",width:"auto",height:u,transform:`translate(${Math.round(a.x)}px, ${Math.round(a.y)}px)`,zIndex:1e5,pointerEvents:"none"}},i.createElement("div",{style:h,className:n?"fadeInTooltip":void 0},t!==l.ToolTipArrow.None&&i.createElement("div",{style:arrowStyle(t)}),e))}}Tooltip.engineChangeKeys=a.EngineChangeFlags.MouseStore|a.EngineChangeFlags.ToolStore;const u=24,h={position:"absolute",top:"50%",left:"-2px",width:0,height:0,background:"transparent",transform:"translateX(-50%) translateY(-50%)",transformOrigin:"50% 50%",borderTop:"4px solid transparent",borderBottom:"4px solid transparent",borderRight:`4px solid ${s.theme.tooltipCaretBackground}`},p=Object.assign({},h,{left:"50%",top:void 0,bottom:"-6px",borderBottom:void 0,borderRight:"4px solid transparent",borderLeft:"4px solid transparent",borderTop:`4px solid ${s.theme.tooltipCaretBackground}`});function arrowStyle(e){switch(e){case l.ToolTipArrow.Left:return h;case l.ToolTipArrow.Bottom:return p}}const g=r.default(Tooltip);t.Tooltip=g},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0);t.LazyLoad=class LazyLoad extends i.Component{constructor(){super(...arguments),this.state={hasBeenVisible:!1}}componentWillReceiveProps(e){e.visible&&!1===this.state.hasBeenVisible&&this.setState({hasBeenVisible:!0})}render(){return!1===this.state.hasBeenVisible?null:this.props.children}}},function(e,t,n){"use strict";var i,o=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))(function(o,r){function fulfilled(e){try{step(i.next(e))}catch(t){r(t)}}function rejected(e){try{step(i.throw(e))}catch(t){r(t)}}function step(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(fulfilled,rejected)}step((i=i.apply(e,t||[])).next())})},r=this&&this.__rest||function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(i=Object.getOwnPropertySymbols(e);o<i.length;o++)t.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(e,i[o])&&(n[i[o]]=e[i[o]])}return n};Object.defineProperty(t,"__esModule",{value:!0});const s=n(0),a=n(216),l=n(2),c=n(6),d=n(10),u=n(903),h=n(137),p=n(282),g=n(29),m=n(298),f=n(142);t.FeedbackHUDContainer=d.default(((i=class extends s.PureComponent{constructor(){super(...arguments),this.handleDispatch=e=>o(this,void 0,void 0,function*(){switch(e.type){case m.FeedbackActionType.Copy:return this.handleCopy(e.data);case m.FeedbackActionType.TabChange:return this.handleTabChange(e.tab);case m.FeedbackActionType.ThreadCreate:throw new Error("Not Implemented");case m.FeedbackActionType.ThreadSelect:return this.handleSelect(e.id);case m.FeedbackActionType.ThreadUpdate:throw new Error("Not Implemented");case m.FeedbackActionType.ThreadArchive:return this.handleArchive(e.id);case m.FeedbackActionType.CommentCreate:return this.handleComment(e.threadId,e.text);case m.FeedbackActionType.CommentEdit:return this.handleCommentEdit(e.id);case m.FeedbackActionType.CommentEditCancel:return l.default.feedbackStore.clearCommentEditable(e.id);case m.FeedbackActionType.CommentUpdate:return this.handleCommentUpdate(e.threadId,e.id,e.text);case m.FeedbackActionType.CommentDelete:return this.handleCommentDelete(e.threadId,e.id);case m.FeedbackActionType.ContextMenuOpen:return this.handleContextMenu(e.items,e.point);default:return f.default(e)}}),this.handleTabChange=l.default.wrapHandler(e=>o(this,void 0,void 0,function*(){l.default.feedbackStore.setSelectedSidebarTab(e),e===h.Tab.Archived&&(yield l.default.feedbackStore.loadArchivedThreads())})),this.handleSelect=l.default.wrapHandler(e=>{if(e){l.default.feedbackStore.setSelectedThread(e);const{selectedThread:t}=l.default.feedbackStore;if(t){const e=p.anchorToPoint(t.anchor);l.default.canvasStore.scrollToCenter(e,{animate:!0})}}else l.default.feedbackStore.clearSelectedThread()}),this.handleArchive=l.default.wrapHandler(e=>o(this,void 0,void 0,function*(){return l.default.feedbackStore.archiveThread(e)})),this.handleComment=l.default.wrapHandler((e,t)=>o(this,void 0,void 0,function*(){return l.default.feedbackStore.createComment({threadId:e,text:t})})),this.handleCommentEdit=l.default.wrapHandler(e=>o(this,void 0,void 0,function*(){return l.default.feedbackStore.setCommentEditable(e)})),this.handleCommentUpdate=l.default.wrapHandler((e,t,n)=>o(this,void 0,void 0,function*(){return l.default.feedbackStore.clearCommentEditable(t),l.default.feedbackStore.updateComment({threadId:e,commentId:t,text:n})})),this.handleCommentDelete=l.default.wrapHandler((e,t)=>o(this,void 0,void 0,function*(){if(confirm("Are you sure you want to delete this comment?"))return l.default.feedbackStore.deleteComment({threadId:e,commentId:t})})),this.handleContextMenu=l.default.wrapHandler((e,t)=>{g.Menu.buildFromTemplate(e).popup(t)}),this.handleCopy=l.default.wrapHandler(e=>o(this,void 0,void 0,function*(){a.default.copyCSS(e)}))}static calculateState(){l.default.canvasStore.assertInteractive();const{threads:e,archivedThreads:t,isActive:n,currentUser:i,selectionState:o,commentMetadata:r}=l.default.feedbackStore;return{threads:e,archivedThreads:t,isActive:n,currentUser:i,selection:o,commentMetadata:r}}render(){const e=this.state,{isActive:t,currentUser:n,threads:i,archivedThreads:o,selection:a}=e,c=r(e,["isActive","currentUser","threads","archivedThreads","selection"]);if(!t||!n)return null;const d=i.toArray().filter(e=>!l.default.feedbackStore.isTransientThread(e.id)),h=a.threadId&&l.default.feedbackStore.isTransientThread(a.threadId)?Object.assign({},a,{threadId:null}):a;return s.createElement(u.FeedbackHUD,Object.assign({threads:d,archivedThreads:o.toArray(),currentUser:n,selection:h},c,{dispatch:this.handleDispatch}))}}).engineChangeKeys=c.EngineChangeFlags.FeedbackStore,i))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(78),r=n(904),s=n(933);t.FeedbackHUD=e=>i.createElement("div",{className:o.cx("__framer-chrome",s.container)},i.createElement(r.FeedbackSidebar,Object.assign({},e)))},function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))(function(o,r){function fulfilled(e){try{step(i.next(e))}catch(t){r(t)}}function rejected(e){try{step(i.throw(e))}catch(t){r(t)}}function step(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(fulfilled,rejected)}step((i=i.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const o=n(0),r=n(0),s=n(65),a=n(137),l=n(905),c=n(471),d=n(924),u=n(925),h=n(928),p=n(931),g=n(145),m=n(142),f=n(168),y=n(28),v=n(298),b=()=>Promise.resolve(),k=[a.Tab.All,a.Tab.Archived];function timeout(e){return new Promise(t=>setTimeout(t,e))}t.FeedbackSidebar=({currentUser:e,threads:t,archivedThreads:n,selection:S,commentMetadata:C,dispatch:x=b})=>{const w=t.find(e=>e.id===S.threadId)||n.find(e=>e.id===S.threadId),[T,P]=function useArchiveLoader({hasArchivedThreads:e,dispatch:t}){const[n,i]=r.useState(!1),o=r.useCallback(n=>{const o=t({type:v.FeedbackActionType.TabChange,tab:n});n===a.Tab.Archived&&(e||i(!0),Promise.all([timeout(500),o]).then(()=>i(!1)).catch(()=>i(!1)))},[e,t]);return[n,o]}({dispatch:x,hasArchivedThreads:n.length>0}),E=r.useCallback(e=>i(this,void 0,void 0,function*(){yield x({type:v.FeedbackActionType.ThreadSelect,id:e})}),[x]),F=function useThreadContextMenu({threads:e,archivedThreads:t,dispatch:n}){return r.useCallback((o,r)=>i(this,void 0,void 0,function*(){const i=e.concat(t).find(e=>e.id===o);if(!i)return;const s=[{label:"Copy Link",click:()=>n({type:v.FeedbackActionType.Copy,data:f.getThreadPermalink({threadId:o})})},{label:"Archive",enabled:!!i&&!i.archived,click:()=>n({type:v.FeedbackActionType.ThreadArchive,id:o})}];yield n({type:v.FeedbackActionType.ContextMenuOpen,items:s,point:r})}),[e,t,n])}({threads:t,archivedThreads:n,dispatch:x}),M=function useCommentContextMenu({currentUserId:e,threads:t,archivedThreads:n,dispatch:o}){return r.useCallback(({threadId:r,commentId:s,point:a})=>i(this,void 0,void 0,function*(){const i=t.concat(n).find(e=>e.id===r);if(!i)return;const l=i.comments.findIndex(e=>e.id===s),c=i.comments[l];if(!c)return;const d=[{label:"Copy Link",click:()=>o({type:v.FeedbackActionType.Copy,data:f.getThreadPermalink({threadId:r,commentId:s})})},{label:"Edit",enabled:y.experiments.isOn("feedbackServiceShim")&&e===c.author.id,click:()=>o({type:v.FeedbackActionType.CommentEdit,id:c.id,threadId:r})},{label:"Delete",visible:0!==l,enabled:y.experiments.isOn("feedbackServiceShim")&&e===c.author.id,click:()=>o({type:v.FeedbackActionType.CommentDelete,id:c.id,threadId:r})}];yield o({type:v.FeedbackActionType.ContextMenuOpen,items:d,point:a})}),[e,t,n,o])}({currentUserId:e.id,threads:t,archivedThreads:n,dispatch:x});let _="list",O=o.createElement("div",null);w&&(_="thread",O=o.createElement(l.FeedbackThread,{id:w.id,comments:w.comments,selectedCommentId:S.commentId,isArchived:w.archived,currentUser:e,seenUntil:y.experiments.isOn("feedbackServiceShim")?S.seenUntil:null,commentMetadata:C,dispatch:x,onContextMenu:M}));const I=o.createElement(h.FeedbackTabBar,{selected:S.tab,tabs:k,onChange:P},e=>{if(e===a.Tab.Archived&&T)return o.createElement("div",{style:{position:"relative",width:"100%"}},o.createElement(g.ActivityIndicator,{large:!0}));const i=function threadsForTab(e,t,n){switch(e){case a.Tab.All:return t;case a.Tab.Archived:return n;default:return m.default(e)}}(e,t,n);return 0===i.length?o.createElement(c.FeedbackBlankSlate,{title:e===a.Tab.All?"Comments":e,message:"There are no comments yet. Click anywhere on the canvas to start a conversation."}):o.createElement(d.FeedbackThreadList,null,i.map(e=>o.createElement(u.FeedbackThreadSummary,{id:e.id,key:e.id,Component:"li",comments:e.comments,isUnread:!!y.experiments.isOn("feedbackServiceShim")&&f.isUnread(e),onSelect:E,onContextMenu:F})))});return o.createElement("div",{className:p.container},o.createElement(s.motion.div,{className:p.inner,transition:{ease:"easeOut",duration:.2},variants:{list:{x:"0"},thread:{x:"-50%"}},initial:S.threadId?"thread":"list",animate:_},I,O))}},function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))(function(o,r){function fulfilled(e){try{step(i.next(e))}catch(t){r(t)}}function rejected(e){try{step(i.throw(e))}catch(t){r(t)}}function step(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(fulfilled,rejected)}step((i=i.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const o=n(0),r=n(0),s=n(906),a=n(443),l=n(916),c=n(471),d=n(469),u=n(470),h=n(138),p=n(168),g=n(920),m=n(923),f=n(298),y=()=>Promise.resolve();function isEditing(e,t){const n=t.get(e.id);return n&&n.isEditing}function ThreadItems({threadId:e,comments:t,seenUntil:n,commentMetadata:i,selectedCommentId:r,dispatch:c,onContextMenu:d}){let u=!1;const h=t.map((t,h)=>{let m;return m=isEditing(t,i)?o.createElement(a.EditFeedbackCommentForm,{key:t.id,defaultValue:t.text,onSubmit:n=>c({type:f.FeedbackActionType.CommentUpdate,id:t.id,threadId:e,text:n}),onCancel:()=>c({type:f.FeedbackActionType.CommentEditCancel,id:t.id,threadId:e})}):t.deletedBy?o.createElement(g.FeedbackInfo,{key:t.id,Component:"li"},`${t.deletedBy.name} deleted a comment`):o.createElement(s.FeedbackComment,{key:t.id,Component:"li",permalink:p.getThreadPermalink({threadId:e,commentId:t.id}),comment:t,focus:r===t.id,onContextMenu:d}),!u&&n&&n<t.createdAt?(u=!0,0===h?m:o.createElement(o.Fragment,{key:t.id},o.createElement("li",{className:l.newMessagesBar},"New Messages"),m)):m});return o.createElement(o.Fragment,null,h)}t.FeedbackThread=({id:e,comments:t,currentUser:n,seenUntil:g=null,commentMetadata:v=new Map,isArchived:b=!1,selectedCommentId:k=null,dispatch:S=y,onContextMenu:C=y})=>{const[x,...w]=t,T=r.useRef(null),{scrollContainer:P,scrollOffset:E,handleScroll:F}=m.useScrollLock(),M=r.useCallback(t=>i(this,void 0,void 0,function*(){E.current=null,yield S({type:f.FeedbackActionType.CommentCreate,threadId:e,text:t})}),[e,S,E]),_=r.useCallback(()=>{T.current&&T.current.focus()},[]),O=r.useCallback(()=>S({type:f.FeedbackActionType.ThreadSelect,id:null}),[S]),I=r.useCallback(t=>S({type:f.FeedbackActionType.CommentUpdate,id:x.id,threadId:e,text:t}),[e,x,S]),D=r.useCallback(()=>S({type:f.FeedbackActionType.CommentEditCancel,id:x.id,threadId:e}),[e,x,S]),N=r.useCallback((t,n)=>{C({threadId:e,commentId:t,point:n})},[C,e]);return o.createElement("div",{className:l.container},o.createElement("div",{className:l.navbar},o.createElement("button",{className:l.navbarButton,onClick:O},"Back"),o.createElement("span",{className:l.navbarTitle},b?"Archived Thread":"Thread"),o.createElement("button",{className:l.navbarButton,disabled:b,onClick:r.useCallback(()=>S({type:f.FeedbackActionType.ThreadArchive,id:e}),[e,S])},"Archive")),o.createElement("div",{className:l.header},isEditing(x,v)?o.createElement(a.EditFeedbackCommentForm,{defaultValue:x.text,onSubmit:I,onCancel:D}):o.createElement(s.FeedbackComment,{comment:x,permalink:p.getThreadPermalink({threadId:e,commentId:x.id}),onContextMenu:N})),o.createElement("div",{ref:P,className:l.scroll,onScroll:F},w.length>0?o.createElement("ul",{className:l.replies},o.createElement(ThreadItems,{threadId:e,comments:w,seenUntil:g,commentMetadata:v,selectedCommentId:k,onContextMenu:N,dispatch:S})):o.createElement(c.FeedbackBlankSlate,{title:"Comments",message:b?"There are no replies in this thread.":o.createElement(o.Fragment,null,"There are no replies yet."," ",o.createElement("button",{className:l.link,onClick:_},"Reply to this thread"))})),!b&&o.createElement("div",{className:l.form},o.createElement(a.FeedbackCommentForm,{ref:T,onCancel:O,onSubmit:M,avatar:o.createElement(d.Avatar,{initials:u.initials(n.name),url:n.avatar,alt:n.name,color:h.colorFromId(n.id),isSpeechBubble:!0})})))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(0),r=n(78),s=n(467),a=n(468),l=n(912),c=n(138),d=n(224),u=n(914);t.FeedbackComment=({Component:e="div",comment:t,permalink:n,focus:h=!1,isUnread:p=!1,onContextMenu:g})=>{const m=o.useRef(null),f=o.useCallback(e=>g&&g(t.id,e),[t,g]);return o.useEffect(()=>{m.current&&h&&d.scrollIntoView(m.current,{behavior:"auto",block:"center",inline:"start"})},[]),i.createElement(s.FeedbackItem,{ref:m,Component:e,className:r.cx(h&&l.hasFocus),title:t.author.name,timestamp:t.createdAt,permalink:n,avatar:i.createElement(a.CommentAvatar,Object.assign({},t)),tint:c.colorFromId(t.author.id),hasBadge:p,onContextMenu:f},i.createElement("div",{className:l.comment,dangerouslySetInnerHTML:u.commentMarkup(t.text)}))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.hasBadge="hasBadge_h1hyfbpw",t.disclosureIcon="disclosureIcon_dlyucyj",t.container="container_c1i5x7i4",t.button="button_b1pzgksq",t.content="content_cnai86q",t.title="title_t1k3ury",t.author="author_a1lzfsov",t.timestamp="timestamp_t15ie07g",t.permalink="permalink_p19kvlas",t.avatar="avatar_a1qkg9ba",n(908)},function(e,t,n){},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.formatTimestamp=e=>{const t=Date.now()-Number(e);if(t<12e4)return"Just now";if(t<36e5){const e=Math.floor(t/6e4);return 1===e?"1 min":`${e} mins`}return t<864e5?`${Math.floor(t/36e5)}h`:t<2592e6?`${Math.floor(t/864e5)}m`:t<31536e6?`${Math.floor(t/864e5/30)}y`:`${Math.floor(t/31536e6)}y`}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.container="container_c16rrmt7",t.isSpeechBubble="isSpeechBubble_irpqtn7",t.isReply="isReply_i1ymwb9a",t.isLoaded="isLoaded_i18c8wwq",t.image="image_i1n7t0an",n(911)},function(e,t,n){},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.comment="comment_c1bumop8",t.hasFocus="hasFocus_hpf1swh",n(913)},function(e,t,n){},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(915);function formatComment(e){return i.htmlEscape(e).split("\n\n").map(e=>`<p>${function formatBlock(e){return e.split("\n").map(formatLinks).join("<br/>")}(e)}</p>`).join("")}function formatLinks(e){const t=i.extractUrlsWithIndices(e,{extractUrlsWithoutProtocol:!0}),n=[];let o=0;return t.forEach(({url:t,indices:[i,r]})=>{n.push(e.slice(o,i),`<a href="${t}" rel="noopener noreferrer" target="_blank" title="${t}">${function shortenURL(e){try{const{hostname:n,pathname:i}=new URL(e);let o="/"===i?"":i;return`${n}${o}`.length>40&&o.length>=16&&(o="/"+o.slice(-14)),`${n}${o}`}catch(t){return e}}(t)}</a>`),o=r}),n.push(e.slice(o)),n.join("")}t.commentMarkup=function commentMarkup(e){return{__html:formatComment(e)}}},function(e,t){e.exports=require("twitter-text")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.container="container_c1eav373",t.header="header_h1pzdvx1",t.back="back_biiknjz",t.scroll="scroll_stnvcvk",t.form="form_fs9no9m",t.replies="replies_rlx0vez",t.navbar="navbar_n1utgf48",t.navbarButton="navbarButton_n3og139",t.navbarTitle="navbarTitle_n4qrf61",t.link="link_ln0rdsw",t.newMessagesBar="newMessagesBar_ndxynhc",n(917)},function(e,t,n){},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.container="container_co4h6wl",t.title="title_t165wdfq",t.image="image_if55ief",t.message="message_m1p67oob",n(919)},function(e,t,n){},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(921);t.FeedbackInfo=function FeedbackInfo({Component:e="div",children:t}){return i.createElement(e,{className:o.container},t)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.container="container_cuc51b6",n(922)},function(e,t,n){},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0);t.useScrollLock=function useScrollLock(){const e=i.useRef(null),t=i.useRef(null);i.useLayoutEffect(()=>{const n=t.current;n&&(null===e.current?n.scrollTop=n.scrollHeight-n.offsetHeight:n.scrollTop=e.current)});const n=i.useCallback(()=>{const n=t.current;n&&(e.current=function isScrolledToBottom(e,t=5){return Math.abs(e.scrollHeight-e.offsetHeight-e.scrollTop)<=t}(n)?null:n.scrollTop)},[]);return{scrollOffset:e,scrollContainer:t,handleScroll:n}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0);t.FeedbackThreadList=({children:e})=>i.createElement("ul",{style:{padding:0,flex:1,margin:0}},e)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(0),r=n(78),s=n(468),a=n(467),l=n(138),c=n(168),d=n(926);t.FeedbackThreadSummary=({id:e,Component:t="div",isUnread:n=!1,comments:h,onSelect:p,onContextMenu:g})=>{const[m,...f]=h,y=o.useCallback(()=>p&&p(e),[e,p]),v=o.useCallback(t=>g&&g(e,t),[e,g]);return i.createElement(a.FeedbackItem,{Component:t,className:r.cx(d.container,n&&d.isUnread,f.length>0&&d.hasReplies),tint:l.colorFromId(m.author.id),title:m.author.name,avatar:i.createElement(s.CommentAvatar,Object.assign({},m)),timestamp:c.getThreadTimestamp({comments:h}),hasBadge:n,onSelect:y,onContextMenu:v},i.createElement("div",{className:d.comment},m.text),i.createElement(u,{comments:f}))};const u=({comments:e})=>{const t=new Set,n=[];for(const r of e){const e=r.author.id;if(t.has(e)||(t.add(e),n.push(i.createElement("span",{key:e,className:d.avatarItem},i.createElement(s.CommentAvatar,Object.assign({isReply:!0},r))))),n.length>=5)break}const o=1===e.length?"1 reply":e.length>=99?"99+ replies":`${e.length} replies`;return i.createElement("div",{className:d.replies},e.length>0?i.createElement(i.Fragment,null,i.createElement("span",{className:d.avatarStack},n)," ",i.createElement("span",{className:d.repliesText},o)):null,i.createElement("span",{className:d.repliesAction},"Reply"))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.comment="comment_c1jn74p3",t.container="container_cxxcdlz",t.repliesAction="repliesAction_rr04njs",t.repliesText="repliesText_r1q7sdz8",t.hasReplies="hasReplies_h1elzcyk",t.replies="replies_r94lihl",t.avatarStack="avatarStack_a129v7zq",t.avatarItem="avatarItem_ao6yw1n",t.isUnread="isUnread_iihm598",n(927)},function(e,t,n){},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(0),r=n(929),s=n(78),a=()=>{};t.FeedbackTabBar=({tabs:e,selected:t,defaultSelected:n,renderTab:l=(e=>e),onChange:c=a,children:d=(e=>e)})=>{const[u,h]=o.useState(n||e[0]),p=o.useCallback(e=>{const t=e.currentTarget.dataset.tab;if(!t)throw new Error("Invariant");h(t),c(t)},[c]);if(void 0!==n&&void 0!==t)throw new Error('FeedbackTabBar requires one of "selected" or "defaultSelected" to be provided not both');const g=t||u;return i.createElement("div",{className:r.container},i.createElement("ul",{className:r.tabbar,role:"tablist"},e.map(e=>i.createElement("li",{key:e,className:s.cx(r.item,g===e&&r.selected),role:"presentation"},i.createElement("button",{id:`tab-${e}`,className:r.button,role:"tab","aria-controls":`panel-${e}`,"aria-selected":g===e,"data-tab":e,onClick:p},l(e))))),i.createElement("div",{id:`panel-${g}`,className:r.panel,role:"tabpanel","aria-labelledby":`tab-${g}`},d(g)))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.container="container_ck0vz1j",t.tabbar="tabbar_t15l5y0e",t.item="item_i1v57bpa",t.selected="selected_s1795iib",t.button="button_b1k41des",t.panel="panel_pafi9eu",n(930)},function(e,t,n){},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.container="container_c8i9p19",t.inner="inner_i1yzys4a",n(932)},function(e,t,n){},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.container="container_ct6c6y2",n(934)},function(e,t,n){},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(82);t.wrapInCustomProperties=function wrapInCustomProperties(e,t){return void 0===o.CustomProperties?e:i.createElement(o.CustomProperties,{customProperties:t},e)}},function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))(function(o,r){function fulfilled(e){try{step(i.next(e))}catch(t){r(t)}}function rejected(e){try{step(i.throw(e))}catch(t){r(t)}}function step(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(fulfilled,rejected)}step((i=i.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const o=n(0),r=n(13),s=n(70),a=n(9),l=n(2),c=n(12),d=n(937),u=n(220),h=n(5),p=n(35);class TutorialManager{constructor(){this.presentationJSON="",this.presentationComponentHash=null,this.presentationWebFrameRef=o.createRef(),this.presentationWebFrameRequestedContent=!1,this.showOnCanvas=l.default.wrapHandler((e,t,n)=>{"number"!=typeof n&&(n=void 0);const i=this.collectNames(e),o=this.collectNames(t),r=l.default.tree,s=new Array,a=new Array;if(r.root.children.forEach(e=>{e.name&&i.has(e.name)?(e.set({isExternalMaster:null}),s.push(e)):e.set({isExternalMaster:c.HIDDEN_MASTER}),e.name&&o.has(e.name)&&a.push(e)}),0===s.length&&0!==i.size)return void console.warn("showOnCanvas: no targets found",e);l.default.setSelection([]),l.default.setLeftPanelContent(h.LeftPanelContent.Layers);const d=0===a.length?s:a;d.length>0?l.default.canvasStore.zoomToCenter(r.getBoundingFrameForNodes(d),{zoom:n,maxZoom:1,animated:!1}):l.default.canvasStore.setZoom(1);const u=document.querySelector("a[data-keyboard=true][data-focus-trap=true]");u&&u.focus(),setTimeout(()=>{l.default.wrapHandler(()=>{l.default.clearUndoStack()})()},0)})}start(){return i(this,void 0,void 0,function*(){const e=this.presentationWebFrameRef.current;e&&(yield s.TutorialDocument.on(e.channel).register(t.tutorialManager),this.tutorialFrame=s.TutorialFrame.on(e.channel).expect());const n=l.default.tree.root.children.find(e=>null!==e.name&&e.name.startsWith("tutorial/start"));if(!n||!n.name)return;let i={};const o=n.name.split("tutorial/start",2);if(o.length>1&&""===o[0]){const e=o[1].trim();try{const t=d.parse(e);"object"==typeof t&&(i=t)}catch(h){console.log(`Invalid tutorial settings; ${h.toString()}`,e)}}let c=r.TutorialPlacement.Top;"bottom"===i.mode?c=r.TutorialPlacement.Bottom:"overlay"===i.mode&&(c=r.TutorialPlacement.Overlay),r.layout.setTutorialLayout(c,n.rect(null).height);const u=i.do;u&&this.doTutorialStep(u).catch(p.unhandledError),this.presentationNode=n,this.updateTutorialFrame(),a.triggerTutorialStartedEvent({})})}set latestComponentHash(e){this.presentationComponentHash!==e&&(this.presentationComponentHash=e,this.updateTutorialFrame())}requestTutorialContent(){return i(this,void 0,void 0,function*(){this.updateTutorialFrame()})}updateTutorialFrame(){this.presentationJSON=(this.presentationNode?JSON.stringify(u.getPreviewData(this.presentationNode),null,2):void 0)||this.presentationJSON;const{tutorialFrame:e,presentationJSON:t}=this;e&&e.presentTutorialContent({presentationJSON:t}).catch(p.unhandledError)}doTutorialStep(e){return i(this,void 0,void 0,function*(){const t=e.show,n=e.center;t&&this.showOnCanvas(t,n||t,e.zoom),a.triggerTutorialStepEvent({names:[...t]})})}collectNames(e){const t=new Set;return"string"==typeof e?t.add(e):e instanceof Array&&e.forEach(e=>{"string"==typeof e&&t.add(e)}),t}}t.TutorialManager=TutorialManager,t.isTutorial=window.isTutorial,t.tutorialManager=new TutorialManager},function(e,t){e.exports=require("json5")},function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))(function(o,r){function fulfilled(e){try{step(i.next(e))}catch(t){r(t)}}function rejected(e){try{step(i.throw(e))}catch(t){r(t)}}function step(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(fulfilled,rejected)}step((i=i.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const o=n(70),r=n(95);t.setupServices=function setupServices(){return i(this,void 0,void 0,function*(){const e={validate:({action:e})=>i(this,void 0,void 0,function*(){const t=r.validateAction(e),n=new Set(Object.keys(t.options).concat(Object.keys(t.states))),i=[];return n.forEach(e=>{const n=t.states[e];i.push(Object.assign({action:e,enabled:!0===n,deferToNative:"native"===n},t.options[e]))}),{states:i}}),dispatch:({action:e})=>i(this,void 0,void 0,function*(){return{success:r.dispatchAction(e)}})};yield o.MenuActionTarget.on(o.PostMessageChannel.toParentFrame).register(e)})}}]);
