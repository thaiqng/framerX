var that=this;function __skpm_run(key,context){that.context=context;var exports=function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s="./src/plugin.js")}({"./src/MochaJSDelegate.js":function(module,exports,__webpack_require__){"use strict";function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function default_1(selectorHandlerDict,prefix,superclass){prefix=prefix||"MochaJSDelegate_DynamicClass_";var uniqueClassName=prefix+NSUUID.UUID().UUIDString(),delegateClassDesc=MOClassDescription.allocateDescriptionForClassWithName_superclass_(uniqueClassName,superclass||NSObject);delegateClassDesc.registerClass();var handlers={};if(this.setHandlerForSelector=function(selectorString,func){var handlerHasBeenSet=selectorString in handlers,selector=NSSelectorFromString(selectorString);if(handlers[selectorString]=func,!handlerHasBeenSet){for(var args=[],regex=/:/g;regex.exec(selectorString);)args.push("arg"+args.length);var dynamicFunction=eval("(function ("+args.join(", ")+") { return handlers[selectorString].apply(this, arguments); })");delegateClassDesc.addInstanceMethodWithSelector_function_(selector,dynamicFunction)}},this.removeHandlerForSelector=function(e){delete handlers[e]},this.getHandlerForSelector=function(e){return handlers[e]},this.getAllHandlers=function(){return handlers},this.getClass=function(){return NSClassFromString(uniqueClassName)},this.getClassInstance=function(){return NSClassFromString(uniqueClassName).new()},"object"===_typeof(selectorHandlerDict))for(var selectorString in selectorHandlerDict)this.setHandlerForSelector(selectorString,selectorHandlerDict[selectorString])}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=default_1},"./src/plugin.js":function(e,t,r){"use strict";var n=r("./src/MochaJSDelegate.js"),o=r("./src/utils.js"),a=r("sketch/dom"),s="undefined"!=typeof MSJSONDataArchiver,i="undefined"!=typeof NSBundle?NSBundle.mainBundle().infoDictionary().CFBundleShortVersionString:0,c=function(e){for(var t=e.writers(),r=0;r<t.length;r++){var n=t[r];if(0===o.toString(n.class()).indexOf(p))return!0}return!1},l=function(e,t){COScript.currentCOScript().shouldKeepAround=!0;var r=S(t).getClassInstance();e.registerWriter(r)},u=function(e,t,r){var n=t.immutableModelObject();return f(e,t,r),MSJSONDataArchiver.archiveStringWithRootObject_error(n,null)},f=function e(t,r,n){var s=t.api(),i=NSApplication.sharedApplication(),c=o.toArray(i.orderedDocuments())[0],l=a.fromNative(c);if(r.isKindOfClass(MSSymbolInstance))try{var f=r.symbolMaster(),d=o.toString(f.objectID());n.symbolInstances=n.symbolInstances||[],n.symbolInstances.push(r),n.symbolMasters=n.symbolMasters||{},n.symbolMasters[d]=f;var p=a.fromNative(r).overrides,S=!0,y=!1,m=void 0;try{for(var h,b=p[Symbol.iterator]();!(S=(h=b.next()).done);S=!0){var v=h.value;if("symbolID"===v.property){var g=o.toString(v.value);if(!g){n.symbolMasters[g]="unresolved";continue}if(!n.symbolMasters[g]){var _=l.getSymbolMasterWithID(g);_?n.symbolMasters[g]=_.sketchObject:log("no master symbol found with id ".concat(g))}}}}catch(e){y=!0,m=e}finally{try{S||null==b.return||b.return()}finally{if(y)throw m}}}catch(e){log("Error extracting symbol instance: ".concat(e))}else if(!r.isKindOfClass(MSSymbolMaster))if(r.isKindOfClass(MSShapeGroup)){var O=o.toString(r.objectID());if(r.canFlatten){var x=n.flattenedShapes=n.flattenedShapes||{};if(void 0===x[O]){x[O]="";var j=r.copyWithOptions(1);j.flatten();var D=u(t,j,n);x[O]=JSON.parse(o.toString(D))}}else log("Failed to flatten shape with id ".concat(O))}else{var M=s.wrapObject(r,s.selectedDocument);if(M.isText){n.texts=n.texts||{};var C=r.CSSAttributes(),N=o.toSafeString(o.toString(M.text)),I=o.toArray(C).filter(function(e){return 0!==e.indexOf("/*")}).map(o.toSafeString);n.texts[M.id]={text:N,css:I}}else M.isGroup&&M.iterate(function(r){return e(t,r.sketchObject,n)})}},d="com.framer.sketch.pasteboard",p="Framer_Pasteboard_DynamicClass_",S=function(e){return new n.default({"writeData:toPasteboard:":function(t,r){r.addTypes_owner_([d],new n.default({"pasteboard:provideDataForType:":function(r){return function(e,t,r){var n={},s=t.layers().layers(),c=o.mapSketchCollection(s,function(t){return u(e,t,n)}),l=n.symbolInstances,p=n.symbolMasters,S=l?l.concat():[],y=MSDocumentData.new().currentPage(),m={},h=n.detachedSymbols=n.detachedSymbols||{};for(;l&&l.length;){var b=l.pop(),v=b.objectID(),g=-1!==S.indexOf(b);for(var _ in p)if(!m[_]){var O=p[_];if("unresolved"!==O){var x=O.copyWithOptions(1);m[_]=x,y.addLayers([x])}delete p[_]}var j=void 0;if(g){var D=b.copyWithOptions(1);y.addLayers([D]),(j=a.fromNative(D).detach())&&(h[v]=j)}else j=a.fromNative(b).detach();j&&f(e,j.sketchObject,n)}for(var M in h){var C=h[M],N=C.sketchObject.immutableModelObject(),I=MSJSONDataArchiver.archiveStringWithRootObject_error(N,null);h[M]=JSON.parse(o.toString(I))}delete n.symbolMasters,delete n.symbolInstances;var k=JSON.stringify(n),A='{\n"version":"'.concat(i,'",\n"layers":[').concat(c.join(","),'],\n"metadata":').concat(k,"}");r.setString_forType_(A,d)}(e,t,r)}}).getClassInstance())},supportedPasteboardTypes:function(e,t){return NSArray.arrayWithArray([d,NSPasteboardTypeString])},canWriteDataToPasteboard:function(e){return!0}},p)};e.exports={onOpenDocument:function(e){if(s){var t=MSPasteboardManager.applicationPasteboardManager();c(t)||l(t,e)}else log("This version of Sketch is not supported.")}}},"./src/utils.js":function(e,t,r){"use strict";function n(e){return e+""}Object.defineProperty(t,"__esModule",{value:!0}),t.toBool=function(e){return!!e},t.toArray=function(e){for(var t=e.count(),r=[],n=0;n<t;n++)r.push(e.objectAtIndex(n));return r},t.toObject=function(e){var t={};for(var r in e)t[r]=e[r];return t},t.toString=n,t.toSafeString=function(e){return n(e).replace(/[\n\r\u2028\u2029]/g,"\n")},t.map=function(e,t){var r,n=[];r=e.count?e.count():e.length;for(var o=0;o<r;o++){var a=void 0;a=e.objectAtIndex?e.objectAtIndex(o):e[o],n.push(t(a,o))}return n},t.filter=function(e,t){var r,n=[];r=e.className&&"__NSArrayM"===e.className()?e.count():e.length;for(var o=0;o<r;o++)t(e[o],o)&&n.push(t(e[o],o));return n},t.mapSketchCollection=function(e,t){for(var r,n=[],o=e.objectEnumerator();r=o.nextObject();)n.push(t(r));return n.reverse()},t.iterateSketchCollection=function(e,t){for(var r,n=e.objectEnumerator();r=n.nextObject();)t(r)}},"sketch/dom":function(e,t){e.exports=require("sketch/dom")}});"default"===key&&"function"==typeof exports?exports(context):exports[key](context)}that.onOpenDocument=__skpm_run.bind(this,"onOpenDocument"),that.onRun=__skpm_run.bind(this,"default");